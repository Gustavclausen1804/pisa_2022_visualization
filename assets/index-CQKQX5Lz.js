var ER=e=>{throw TypeError(e)};var XE=(e,t,r)=>t.has(e)||ER("Cannot "+r);var At=(e,t,r)=>(XE(e,t,"read from private field"),r?r.call(e):t.get(e)),an=(e,t,r)=>t.has(e)?ER("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),Ar=(e,t,r,n)=>(XE(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r),to=(e,t,r)=>(XE(e,t,"access private method"),r);var Ux=(e,t,r,n)=>({set _(s){Ar(e,t,s,r)},get _(){return At(e,t,n)}});function R9(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in e)){const u=Object.getOwnPropertyDescriptor(n,s);u&&Object.defineProperty(e,s,u.get?u:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const u of s)if(u.type==="childList")for(const h of u.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&n(h)}).observe(document,{childList:!0,subtree:!0});function r(s){const u={};return s.integrity&&(u.integrity=s.integrity),s.referrerPolicy&&(u.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?u.credentials="include":s.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function n(s){if(s.ep)return;s.ep=!0;const u=r(s);fetch(s.href,u)}})();var Cf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function sn(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var $B={exports:{}},L1={},FB={exports:{}},Lr={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hv=Symbol.for("react.element"),L9=Symbol.for("react.portal"),j9=Symbol.for("react.fragment"),z9=Symbol.for("react.strict_mode"),N9=Symbol.for("react.profiler"),B9=Symbol.for("react.provider"),$9=Symbol.for("react.context"),F9=Symbol.for("react.forward_ref"),U9=Symbol.for("react.suspense"),V9=Symbol.for("react.memo"),G9=Symbol.for("react.lazy"),TR=Symbol.iterator;function W9(e){return e===null||typeof e!="object"?null:(e=TR&&e[TR]||e["@@iterator"],typeof e=="function"?e:null)}var UB={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},VB=Object.assign,GB={};function Zp(e,t,r){this.props=e,this.context=t,this.refs=GB,this.updater=r||UB}Zp.prototype.isReactComponent={};Zp.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Zp.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function WB(){}WB.prototype=Zp.prototype;function uM(e,t,r){this.props=e,this.context=t,this.refs=GB,this.updater=r||UB}var dM=uM.prototype=new WB;dM.constructor=uM;VB(dM,Zp.prototype);dM.isPureReactComponent=!0;var AR=Array.isArray,qB=Object.prototype.hasOwnProperty,hM={current:null},HB={key:!0,ref:!0,__self:!0,__source:!0};function XB(e,t,r){var n,s={},u=null,h=null;if(t!=null)for(n in t.ref!==void 0&&(h=t.ref),t.key!==void 0&&(u=""+t.key),t)qB.call(t,n)&&!HB.hasOwnProperty(n)&&(s[n]=t[n]);var m=arguments.length-2;if(m===1)s.children=r;else if(1<m){for(var o=Array(m),_=0;_<m;_++)o[_]=arguments[_+2];s.children=o}if(e&&e.defaultProps)for(n in m=e.defaultProps,m)s[n]===void 0&&(s[n]=m[n]);return{$$typeof:Hv,type:e,key:u,ref:h,props:s,_owner:hM.current}}function q9(e,t){return{$$typeof:Hv,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function fM(e){return typeof e=="object"&&e!==null&&e.$$typeof===Hv}function H9(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var PR=/\/+/g;function ZE(e,t){return typeof e=="object"&&e!==null&&e.key!=null?H9(""+e.key):t.toString(36)}function O0(e,t,r,n,s){var u=typeof e;(u==="undefined"||u==="boolean")&&(e=null);var h=!1;if(e===null)h=!0;else switch(u){case"string":case"number":h=!0;break;case"object":switch(e.$$typeof){case Hv:case L9:h=!0}}if(h)return h=e,s=s(h),e=n===""?"."+ZE(h,0):n,AR(s)?(r="",e!=null&&(r=e.replace(PR,"$&/")+"/"),O0(s,t,r,"",function(_){return _})):s!=null&&(fM(s)&&(s=q9(s,r+(!s.key||h&&h.key===s.key?"":(""+s.key).replace(PR,"$&/")+"/")+e)),t.push(s)),1;if(h=0,n=n===""?".":n+":",AR(e))for(var m=0;m<e.length;m++){u=e[m];var o=n+ZE(u,m);h+=O0(u,t,r,o,s)}else if(o=W9(e),typeof o=="function")for(e=o.call(e),m=0;!(u=e.next()).done;)u=u.value,o=n+ZE(u,m++),h+=O0(u,t,r,o,s);else if(u==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return h}function Vx(e,t,r){if(e==null)return e;var n=[],s=0;return O0(e,n,"","",function(u){return t.call(r,u,s++)}),n}function X9(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var xo={current:null},k0={transition:null},Z9={ReactCurrentDispatcher:xo,ReactCurrentBatchConfig:k0,ReactCurrentOwner:hM};function ZB(){throw Error("act(...) is not supported in production builds of React.")}Lr.Children={map:Vx,forEach:function(e,t,r){Vx(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return Vx(e,function(){t++}),t},toArray:function(e){return Vx(e,function(t){return t})||[]},only:function(e){if(!fM(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Lr.Component=Zp;Lr.Fragment=j9;Lr.Profiler=N9;Lr.PureComponent=uM;Lr.StrictMode=z9;Lr.Suspense=U9;Lr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Z9;Lr.act=ZB;Lr.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=VB({},e.props),s=e.key,u=e.ref,h=e._owner;if(t!=null){if(t.ref!==void 0&&(u=t.ref,h=hM.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var m=e.type.defaultProps;for(o in t)qB.call(t,o)&&!HB.hasOwnProperty(o)&&(n[o]=t[o]===void 0&&m!==void 0?m[o]:t[o])}var o=arguments.length-2;if(o===1)n.children=r;else if(1<o){m=Array(o);for(var _=0;_<o;_++)m[_]=arguments[_+2];n.children=m}return{$$typeof:Hv,type:e.type,key:s,ref:u,props:n,_owner:h}};Lr.createContext=function(e){return e={$$typeof:$9,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:B9,_context:e},e.Consumer=e};Lr.createElement=XB;Lr.createFactory=function(e){var t=XB.bind(null,e);return t.type=e,t};Lr.createRef=function(){return{current:null}};Lr.forwardRef=function(e){return{$$typeof:F9,render:e}};Lr.isValidElement=fM;Lr.lazy=function(e){return{$$typeof:G9,_payload:{_status:-1,_result:e},_init:X9}};Lr.memo=function(e,t){return{$$typeof:V9,type:e,compare:t===void 0?null:t}};Lr.startTransition=function(e){var t=k0.transition;k0.transition={};try{e()}finally{k0.transition=t}};Lr.unstable_act=ZB;Lr.useCallback=function(e,t){return xo.current.useCallback(e,t)};Lr.useContext=function(e){return xo.current.useContext(e)};Lr.useDebugValue=function(){};Lr.useDeferredValue=function(e){return xo.current.useDeferredValue(e)};Lr.useEffect=function(e,t){return xo.current.useEffect(e,t)};Lr.useId=function(){return xo.current.useId()};Lr.useImperativeHandle=function(e,t,r){return xo.current.useImperativeHandle(e,t,r)};Lr.useInsertionEffect=function(e,t){return xo.current.useInsertionEffect(e,t)};Lr.useLayoutEffect=function(e,t){return xo.current.useLayoutEffect(e,t)};Lr.useMemo=function(e,t){return xo.current.useMemo(e,t)};Lr.useReducer=function(e,t,r){return xo.current.useReducer(e,t,r)};Lr.useRef=function(e){return xo.current.useRef(e)};Lr.useState=function(e){return xo.current.useState(e)};Lr.useSyncExternalStore=function(e,t,r){return xo.current.useSyncExternalStore(e,t,r)};Lr.useTransition=function(){return xo.current.useTransition()};Lr.version="18.3.1";FB.exports=Lr;var V=FB.exports;const be=sn(V),j1=R9({__proto__:null,default:be},[V]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var K9=V,Y9=Symbol.for("react.element"),J9=Symbol.for("react.fragment"),Q9=Object.prototype.hasOwnProperty,e7=K9.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,t7={key:!0,ref:!0,__self:!0,__source:!0};function KB(e,t,r){var n,s={},u=null,h=null;r!==void 0&&(u=""+r),t.key!==void 0&&(u=""+t.key),t.ref!==void 0&&(h=t.ref);for(n in t)Q9.call(t,n)&&!t7.hasOwnProperty(n)&&(s[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)s[n]===void 0&&(s[n]=t[n]);return{$$typeof:Y9,type:e,key:u,ref:h,props:s,_owner:e7.current}}L1.Fragment=J9;L1.jsx=KB;L1.jsxs=KB;$B.exports=L1;var M=$B.exports,YB={exports:{}},pa={},JB={exports:{}},QB={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(we,Pe){var rt=we.length;we.push(Pe);e:for(;0<rt;){var $e=rt-1>>>1,Ge=we[$e];if(0<s(Ge,Pe))we[$e]=Pe,we[rt]=Ge,rt=$e;else break e}}function r(we){return we.length===0?null:we[0]}function n(we){if(we.length===0)return null;var Pe=we[0],rt=we.pop();if(rt!==Pe){we[0]=rt;e:for(var $e=0,Ge=we.length,Re=Ge>>>1;$e<Re;){var at=2*($e+1)-1,Et=we[at],vt=at+1,lt=we[vt];if(0>s(Et,rt))vt<Ge&&0>s(lt,Et)?(we[$e]=lt,we[vt]=rt,$e=vt):(we[$e]=Et,we[at]=rt,$e=at);else if(vt<Ge&&0>s(lt,rt))we[$e]=lt,we[vt]=rt,$e=vt;else break e}}return Pe}function s(we,Pe){var rt=we.sortIndex-Pe.sortIndex;return rt!==0?rt:we.id-Pe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var u=performance;e.unstable_now=function(){return u.now()}}else{var h=Date,m=h.now();e.unstable_now=function(){return h.now()-m}}var o=[],_=[],E=1,S=null,A=3,I=!1,R=!1,k=!1,L=typeof setTimeout=="function"?setTimeout:null,N=typeof clearTimeout=="function"?clearTimeout:null,z=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function F(we){for(var Pe=r(_);Pe!==null;){if(Pe.callback===null)n(_);else if(Pe.startTime<=we)n(_),Pe.sortIndex=Pe.expirationTime,t(o,Pe);else break;Pe=r(_)}}function U(we){if(k=!1,F(we),!R)if(r(o)!==null)R=!0,Le(W);else{var Pe=r(_);Pe!==null&&Ue(U,Pe.startTime-we)}}function W(we,Pe){R=!1,k&&(k=!1,N(Z),Z=-1),I=!0;var rt=A;try{for(F(Pe),S=r(o);S!==null&&(!(S.expirationTime>Pe)||we&&!ue());){var $e=S.callback;if(typeof $e=="function"){S.callback=null,A=S.priorityLevel;var Ge=$e(S.expirationTime<=Pe);Pe=e.unstable_now(),typeof Ge=="function"?S.callback=Ge:S===r(o)&&n(o),F(Pe)}else n(o);S=r(o)}if(S!==null)var Re=!0;else{var at=r(_);at!==null&&Ue(U,at.startTime-Pe),Re=!1}return Re}finally{S=null,A=rt,I=!1}}var Y=!1,Q=null,Z=-1,re=5,ne=-1;function ue(){return!(e.unstable_now()-ne<re)}function fe(){if(Q!==null){var we=e.unstable_now();ne=we;var Pe=!0;try{Pe=Q(!0,we)}finally{Pe?Ee():(Y=!1,Q=null)}}else Y=!1}var Ee;if(typeof z=="function")Ee=function(){z(fe)};else if(typeof MessageChannel<"u"){var Se=new MessageChannel,je=Se.port2;Se.port1.onmessage=fe,Ee=function(){je.postMessage(null)}}else Ee=function(){L(fe,0)};function Le(we){Q=we,Y||(Y=!0,Ee())}function Ue(we,Pe){Z=L(function(){we(e.unstable_now())},Pe)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(we){we.callback=null},e.unstable_continueExecution=function(){R||I||(R=!0,Le(W))},e.unstable_forceFrameRate=function(we){0>we||125<we?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):re=0<we?Math.floor(1e3/we):5},e.unstable_getCurrentPriorityLevel=function(){return A},e.unstable_getFirstCallbackNode=function(){return r(o)},e.unstable_next=function(we){switch(A){case 1:case 2:case 3:var Pe=3;break;default:Pe=A}var rt=A;A=Pe;try{return we()}finally{A=rt}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(we,Pe){switch(we){case 1:case 2:case 3:case 4:case 5:break;default:we=3}var rt=A;A=we;try{return Pe()}finally{A=rt}},e.unstable_scheduleCallback=function(we,Pe,rt){var $e=e.unstable_now();switch(typeof rt=="object"&&rt!==null?(rt=rt.delay,rt=typeof rt=="number"&&0<rt?$e+rt:$e):rt=$e,we){case 1:var Ge=-1;break;case 2:Ge=250;break;case 5:Ge=1073741823;break;case 4:Ge=1e4;break;default:Ge=5e3}return Ge=rt+Ge,we={id:E++,callback:Pe,priorityLevel:we,startTime:rt,expirationTime:Ge,sortIndex:-1},rt>$e?(we.sortIndex=rt,t(_,we),r(o)===null&&we===r(_)&&(k?(N(Z),Z=-1):k=!0,Ue(U,rt-$e))):(we.sortIndex=Ge,t(o,we),R||I||(R=!0,Le(W))),we},e.unstable_shouldYield=ue,e.unstable_wrapCallback=function(we){var Pe=A;return function(){var rt=A;A=Pe;try{return we.apply(this,arguments)}finally{A=rt}}}})(QB);JB.exports=QB;var r7=JB.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var n7=V,fa=r7;function Dt(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var e$=new Set,$y={};function fh(e,t){mp(e,t),mp(e+"Capture",t)}function mp(e,t){for($y[e]=t,e=0;e<t.length;e++)e$.add(t[e])}var Jl=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),yA=Object.prototype.hasOwnProperty,i7=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,CR={},MR={};function o7(e){return yA.call(MR,e)?!0:yA.call(CR,e)?!1:i7.test(e)?MR[e]=!0:(CR[e]=!0,!1)}function a7(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function s7(e,t,r,n){if(t===null||typeof t>"u"||a7(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function bo(e,t,r,n,s,u,h){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=u,this.removeEmptyString=h}var Gi={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Gi[e]=new bo(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Gi[t]=new bo(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Gi[e]=new bo(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Gi[e]=new bo(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Gi[e]=new bo(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Gi[e]=new bo(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Gi[e]=new bo(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Gi[e]=new bo(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Gi[e]=new bo(e,5,!1,e.toLowerCase(),null,!1,!1)});var pM=/[\-:]([a-z])/g;function mM(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(pM,mM);Gi[t]=new bo(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(pM,mM);Gi[t]=new bo(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(pM,mM);Gi[t]=new bo(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Gi[e]=new bo(e,1,!1,e.toLowerCase(),null,!1,!1)});Gi.xlinkHref=new bo("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Gi[e]=new bo(e,1,!1,e.toLowerCase(),null,!0,!0)});function gM(e,t,r,n){var s=Gi.hasOwnProperty(t)?Gi[t]:null;(s!==null?s.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(s7(t,r,s,n)&&(r=null),n||s===null?o7(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):s.mustUseProperty?e[s.propertyName]=r===null?s.type===3?!1:"":r:(t=s.attributeName,n=s.attributeNamespace,r===null?e.removeAttribute(t):(s=s.type,r=s===3||s===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var lc=n7.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Gx=Symbol.for("react.element"),Mf=Symbol.for("react.portal"),If=Symbol.for("react.fragment"),yM=Symbol.for("react.strict_mode"),vA=Symbol.for("react.profiler"),t$=Symbol.for("react.provider"),r$=Symbol.for("react.context"),vM=Symbol.for("react.forward_ref"),_A=Symbol.for("react.suspense"),xA=Symbol.for("react.suspense_list"),_M=Symbol.for("react.memo"),Xc=Symbol.for("react.lazy"),n$=Symbol.for("react.offscreen"),IR=Symbol.iterator;function qg(e){return e===null||typeof e!="object"?null:(e=IR&&e[IR]||e["@@iterator"],typeof e=="function"?e:null)}var Kn=Object.assign,KE;function fy(e){if(KE===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);KE=t&&t[1]||""}return`
`+KE+e}var YE=!1;function JE(e,t){if(!e||YE)return"";YE=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(_){var n=_}Reflect.construct(e,[],t)}else{try{t.call()}catch(_){n=_}e.call(t.prototype)}else{try{throw Error()}catch(_){n=_}e()}}catch(_){if(_&&n&&typeof _.stack=="string"){for(var s=_.stack.split(`
`),u=n.stack.split(`
`),h=s.length-1,m=u.length-1;1<=h&&0<=m&&s[h]!==u[m];)m--;for(;1<=h&&0<=m;h--,m--)if(s[h]!==u[m]){if(h!==1||m!==1)do if(h--,m--,0>m||s[h]!==u[m]){var o=`
`+s[h].replace(" at new "," at ");return e.displayName&&o.includes("<anonymous>")&&(o=o.replace("<anonymous>",e.displayName)),o}while(1<=h&&0<=m);break}}}finally{YE=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?fy(e):""}function l7(e){switch(e.tag){case 5:return fy(e.type);case 16:return fy("Lazy");case 13:return fy("Suspense");case 19:return fy("SuspenseList");case 0:case 2:case 15:return e=JE(e.type,!1),e;case 11:return e=JE(e.type.render,!1),e;case 1:return e=JE(e.type,!0),e;default:return""}}function bA(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case If:return"Fragment";case Mf:return"Portal";case vA:return"Profiler";case yM:return"StrictMode";case _A:return"Suspense";case xA:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case r$:return(e.displayName||"Context")+".Consumer";case t$:return(e._context.displayName||"Context")+".Provider";case vM:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case _M:return t=e.displayName||null,t!==null?t:bA(e.type)||"Memo";case Xc:t=e._payload,e=e._init;try{return bA(e(t))}catch{}}return null}function c7(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return bA(t);case 8:return t===yM?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Eu(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function i$(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function u7(e){var t=i$(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var s=r.get,u=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(h){n=""+h,u.call(this,h)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(h){n=""+h},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Wx(e){e._valueTracker||(e._valueTracker=u7(e))}function o$(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=i$(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function J0(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function wA(e,t){var r=t.checked;return Kn({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function OR(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=Eu(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function a$(e,t){t=t.checked,t!=null&&gM(e,"checked",t,!1)}function SA(e,t){a$(e,t);var r=Eu(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?EA(e,t.type,r):t.hasOwnProperty("defaultValue")&&EA(e,t.type,Eu(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function kR(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function EA(e,t,r){(t!=="number"||J0(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var py=Array.isArray;function Gf(e,t,r,n){if(e=e.options,t){t={};for(var s=0;s<r.length;s++)t["$"+r[s]]=!0;for(r=0;r<e.length;r++)s=t.hasOwnProperty("$"+e[r].value),e[r].selected!==s&&(e[r].selected=s),s&&n&&(e[r].defaultSelected=!0)}else{for(r=""+Eu(r),t=null,s=0;s<e.length;s++){if(e[s].value===r){e[s].selected=!0,n&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function TA(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Dt(91));return Kn({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function DR(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(Dt(92));if(py(r)){if(1<r.length)throw Error(Dt(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:Eu(r)}}function s$(e,t){var r=Eu(t.value),n=Eu(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function RR(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function l$(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function AA(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?l$(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var qx,c$=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,s){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(qx=qx||document.createElement("div"),qx.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=qx.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Fy(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var Sy={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},d7=["Webkit","ms","Moz","O"];Object.keys(Sy).forEach(function(e){d7.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Sy[t]=Sy[e]})});function u$(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||Sy.hasOwnProperty(e)&&Sy[e]?(""+t).trim():t+"px"}function d$(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,s=u$(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,s):e[r]=s}}var h7=Kn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function PA(e,t){if(t){if(h7[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Dt(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Dt(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Dt(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Dt(62))}}function CA(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var MA=null;function xM(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var IA=null,Wf=null,qf=null;function LR(e){if(e=Kv(e)){if(typeof IA!="function")throw Error(Dt(280));var t=e.stateNode;t&&(t=F1(t),IA(e.stateNode,e.type,t))}}function h$(e){Wf?qf?qf.push(e):qf=[e]:Wf=e}function f$(){if(Wf){var e=Wf,t=qf;if(qf=Wf=null,LR(e),t)for(e=0;e<t.length;e++)LR(t[e])}}function p$(e,t){return e(t)}function m$(){}var QE=!1;function g$(e,t,r){if(QE)return e(t,r);QE=!0;try{return p$(e,t,r)}finally{QE=!1,(Wf!==null||qf!==null)&&(m$(),f$())}}function Uy(e,t){var r=e.stateNode;if(r===null)return null;var n=F1(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(Dt(231,t,typeof r));return r}var OA=!1;if(Jl)try{var Hg={};Object.defineProperty(Hg,"passive",{get:function(){OA=!0}}),window.addEventListener("test",Hg,Hg),window.removeEventListener("test",Hg,Hg)}catch{OA=!1}function f7(e,t,r,n,s,u,h,m,o){var _=Array.prototype.slice.call(arguments,3);try{t.apply(r,_)}catch(E){this.onError(E)}}var Ey=!1,Q0=null,eb=!1,kA=null,p7={onError:function(e){Ey=!0,Q0=e}};function m7(e,t,r,n,s,u,h,m,o){Ey=!1,Q0=null,f7.apply(p7,arguments)}function g7(e,t,r,n,s,u,h,m,o){if(m7.apply(this,arguments),Ey){if(Ey){var _=Q0;Ey=!1,Q0=null}else throw Error(Dt(198));eb||(eb=!0,kA=_)}}function ph(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function y$(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function jR(e){if(ph(e)!==e)throw Error(Dt(188))}function y7(e){var t=e.alternate;if(!t){if(t=ph(e),t===null)throw Error(Dt(188));return t!==e?null:e}for(var r=e,n=t;;){var s=r.return;if(s===null)break;var u=s.alternate;if(u===null){if(n=s.return,n!==null){r=n;continue}break}if(s.child===u.child){for(u=s.child;u;){if(u===r)return jR(s),e;if(u===n)return jR(s),t;u=u.sibling}throw Error(Dt(188))}if(r.return!==n.return)r=s,n=u;else{for(var h=!1,m=s.child;m;){if(m===r){h=!0,r=s,n=u;break}if(m===n){h=!0,n=s,r=u;break}m=m.sibling}if(!h){for(m=u.child;m;){if(m===r){h=!0,r=u,n=s;break}if(m===n){h=!0,n=u,r=s;break}m=m.sibling}if(!h)throw Error(Dt(189))}}if(r.alternate!==n)throw Error(Dt(190))}if(r.tag!==3)throw Error(Dt(188));return r.stateNode.current===r?e:t}function v$(e){return e=y7(e),e!==null?_$(e):null}function _$(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=_$(e);if(t!==null)return t;e=e.sibling}return null}var x$=fa.unstable_scheduleCallback,zR=fa.unstable_cancelCallback,v7=fa.unstable_shouldYield,_7=fa.unstable_requestPaint,ai=fa.unstable_now,x7=fa.unstable_getCurrentPriorityLevel,bM=fa.unstable_ImmediatePriority,b$=fa.unstable_UserBlockingPriority,tb=fa.unstable_NormalPriority,b7=fa.unstable_LowPriority,w$=fa.unstable_IdlePriority,z1=null,ol=null;function w7(e){if(ol&&typeof ol.onCommitFiberRoot=="function")try{ol.onCommitFiberRoot(z1,e,void 0,(e.current.flags&128)===128)}catch{}}var Cs=Math.clz32?Math.clz32:T7,S7=Math.log,E7=Math.LN2;function T7(e){return e>>>=0,e===0?32:31-(S7(e)/E7|0)|0}var Hx=64,Xx=4194304;function my(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function rb(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,s=e.suspendedLanes,u=e.pingedLanes,h=r&268435455;if(h!==0){var m=h&~s;m!==0?n=my(m):(u&=h,u!==0&&(n=my(u)))}else h=r&~s,h!==0?n=my(h):u!==0&&(n=my(u));if(n===0)return 0;if(t!==0&&t!==n&&!(t&s)&&(s=n&-n,u=t&-t,s>=u||s===16&&(u&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-Cs(t),s=1<<r,n|=e[r],t&=~s;return n}function A7(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function P7(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,s=e.expirationTimes,u=e.pendingLanes;0<u;){var h=31-Cs(u),m=1<<h,o=s[h];o===-1?(!(m&r)||m&n)&&(s[h]=A7(m,t)):o<=t&&(e.expiredLanes|=m),u&=~m}}function DA(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function S$(){var e=Hx;return Hx<<=1,!(Hx&4194240)&&(Hx=64),e}function eT(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function Xv(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Cs(t),e[t]=r}function C7(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var s=31-Cs(r),u=1<<s;t[s]=0,n[s]=-1,e[s]=-1,r&=~u}}function wM(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-Cs(r),s=1<<n;s&t|e[n]&t&&(e[n]|=t),r&=~s}}var un=0;function E$(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var T$,SM,A$,P$,C$,RA=!1,Zx=[],du=null,hu=null,fu=null,Vy=new Map,Gy=new Map,Yc=[],M7="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function NR(e,t){switch(e){case"focusin":case"focusout":du=null;break;case"dragenter":case"dragleave":hu=null;break;case"mouseover":case"mouseout":fu=null;break;case"pointerover":case"pointerout":Vy.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Gy.delete(t.pointerId)}}function Xg(e,t,r,n,s,u){return e===null||e.nativeEvent!==u?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:u,targetContainers:[s]},t!==null&&(t=Kv(t),t!==null&&SM(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function I7(e,t,r,n,s){switch(t){case"focusin":return du=Xg(du,e,t,r,n,s),!0;case"dragenter":return hu=Xg(hu,e,t,r,n,s),!0;case"mouseover":return fu=Xg(fu,e,t,r,n,s),!0;case"pointerover":var u=s.pointerId;return Vy.set(u,Xg(Vy.get(u)||null,e,t,r,n,s)),!0;case"gotpointercapture":return u=s.pointerId,Gy.set(u,Xg(Gy.get(u)||null,e,t,r,n,s)),!0}return!1}function M$(e){var t=jd(e.target);if(t!==null){var r=ph(t);if(r!==null){if(t=r.tag,t===13){if(t=y$(r),t!==null){e.blockedOn=t,C$(e.priority,function(){A$(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function D0(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=LA(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);MA=n,r.target.dispatchEvent(n),MA=null}else return t=Kv(r),t!==null&&SM(t),e.blockedOn=r,!1;t.shift()}return!0}function BR(e,t,r){D0(e)&&r.delete(t)}function O7(){RA=!1,du!==null&&D0(du)&&(du=null),hu!==null&&D0(hu)&&(hu=null),fu!==null&&D0(fu)&&(fu=null),Vy.forEach(BR),Gy.forEach(BR)}function Zg(e,t){e.blockedOn===t&&(e.blockedOn=null,RA||(RA=!0,fa.unstable_scheduleCallback(fa.unstable_NormalPriority,O7)))}function Wy(e){function t(s){return Zg(s,e)}if(0<Zx.length){Zg(Zx[0],e);for(var r=1;r<Zx.length;r++){var n=Zx[r];n.blockedOn===e&&(n.blockedOn=null)}}for(du!==null&&Zg(du,e),hu!==null&&Zg(hu,e),fu!==null&&Zg(fu,e),Vy.forEach(t),Gy.forEach(t),r=0;r<Yc.length;r++)n=Yc[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<Yc.length&&(r=Yc[0],r.blockedOn===null);)M$(r),r.blockedOn===null&&Yc.shift()}var Hf=lc.ReactCurrentBatchConfig,nb=!0;function k7(e,t,r,n){var s=un,u=Hf.transition;Hf.transition=null;try{un=1,EM(e,t,r,n)}finally{un=s,Hf.transition=u}}function D7(e,t,r,n){var s=un,u=Hf.transition;Hf.transition=null;try{un=4,EM(e,t,r,n)}finally{un=s,Hf.transition=u}}function EM(e,t,r,n){if(nb){var s=LA(e,t,r,n);if(s===null)uT(e,t,n,ib,r),NR(e,n);else if(I7(s,e,t,r,n))n.stopPropagation();else if(NR(e,n),t&4&&-1<M7.indexOf(e)){for(;s!==null;){var u=Kv(s);if(u!==null&&T$(u),u=LA(e,t,r,n),u===null&&uT(e,t,n,ib,r),u===s)break;s=u}s!==null&&n.stopPropagation()}else uT(e,t,n,null,r)}}var ib=null;function LA(e,t,r,n){if(ib=null,e=xM(n),e=jd(e),e!==null)if(t=ph(e),t===null)e=null;else if(r=t.tag,r===13){if(e=y$(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return ib=e,null}function I$(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(x7()){case bM:return 1;case b$:return 4;case tb:case b7:return 16;case w$:return 536870912;default:return 16}default:return 16}}var au=null,TM=null,R0=null;function O$(){if(R0)return R0;var e,t=TM,r=t.length,n,s="value"in au?au.value:au.textContent,u=s.length;for(e=0;e<r&&t[e]===s[e];e++);var h=r-e;for(n=1;n<=h&&t[r-n]===s[u-n];n++);return R0=s.slice(e,1<n?1-n:void 0)}function L0(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Kx(){return!0}function $R(){return!1}function ma(e){function t(r,n,s,u,h){this._reactName=r,this._targetInst=s,this.type=n,this.nativeEvent=u,this.target=h,this.currentTarget=null;for(var m in e)e.hasOwnProperty(m)&&(r=e[m],this[m]=r?r(u):u[m]);return this.isDefaultPrevented=(u.defaultPrevented!=null?u.defaultPrevented:u.returnValue===!1)?Kx:$R,this.isPropagationStopped=$R,this}return Kn(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Kx)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Kx)},persist:function(){},isPersistent:Kx}),t}var Kp={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},AM=ma(Kp),Zv=Kn({},Kp,{view:0,detail:0}),R7=ma(Zv),tT,rT,Kg,N1=Kn({},Zv,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:PM,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Kg&&(Kg&&e.type==="mousemove"?(tT=e.screenX-Kg.screenX,rT=e.screenY-Kg.screenY):rT=tT=0,Kg=e),tT)},movementY:function(e){return"movementY"in e?e.movementY:rT}}),FR=ma(N1),L7=Kn({},N1,{dataTransfer:0}),j7=ma(L7),z7=Kn({},Zv,{relatedTarget:0}),nT=ma(z7),N7=Kn({},Kp,{animationName:0,elapsedTime:0,pseudoElement:0}),B7=ma(N7),$7=Kn({},Kp,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),F7=ma($7),U7=Kn({},Kp,{data:0}),UR=ma(U7),V7={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},G7={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},W7={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function q7(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=W7[e])?!!t[e]:!1}function PM(){return q7}var H7=Kn({},Zv,{key:function(e){if(e.key){var t=V7[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=L0(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?G7[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:PM,charCode:function(e){return e.type==="keypress"?L0(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?L0(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),X7=ma(H7),Z7=Kn({},N1,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),VR=ma(Z7),K7=Kn({},Zv,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:PM}),Y7=ma(K7),J7=Kn({},Kp,{propertyName:0,elapsedTime:0,pseudoElement:0}),Q7=ma(J7),eX=Kn({},N1,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),tX=ma(eX),rX=[9,13,27,32],CM=Jl&&"CompositionEvent"in window,Ty=null;Jl&&"documentMode"in document&&(Ty=document.documentMode);var nX=Jl&&"TextEvent"in window&&!Ty,k$=Jl&&(!CM||Ty&&8<Ty&&11>=Ty),GR=" ",WR=!1;function D$(e,t){switch(e){case"keyup":return rX.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function R$(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Of=!1;function iX(e,t){switch(e){case"compositionend":return R$(t);case"keypress":return t.which!==32?null:(WR=!0,GR);case"textInput":return e=t.data,e===GR&&WR?null:e;default:return null}}function oX(e,t){if(Of)return e==="compositionend"||!CM&&D$(e,t)?(e=O$(),R0=TM=au=null,Of=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return k$&&t.locale!=="ko"?null:t.data;default:return null}}var aX={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function qR(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!aX[e.type]:t==="textarea"}function L$(e,t,r,n){h$(n),t=ob(t,"onChange"),0<t.length&&(r=new AM("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var Ay=null,qy=null;function sX(e){q$(e,0)}function B1(e){var t=Rf(e);if(o$(t))return e}function lX(e,t){if(e==="change")return t}var j$=!1;if(Jl){var iT;if(Jl){var oT="oninput"in document;if(!oT){var HR=document.createElement("div");HR.setAttribute("oninput","return;"),oT=typeof HR.oninput=="function"}iT=oT}else iT=!1;j$=iT&&(!document.documentMode||9<document.documentMode)}function XR(){Ay&&(Ay.detachEvent("onpropertychange",z$),qy=Ay=null)}function z$(e){if(e.propertyName==="value"&&B1(qy)){var t=[];L$(t,qy,e,xM(e)),g$(sX,t)}}function cX(e,t,r){e==="focusin"?(XR(),Ay=t,qy=r,Ay.attachEvent("onpropertychange",z$)):e==="focusout"&&XR()}function uX(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return B1(qy)}function dX(e,t){if(e==="click")return B1(t)}function hX(e,t){if(e==="input"||e==="change")return B1(t)}function fX(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var ks=typeof Object.is=="function"?Object.is:fX;function Hy(e,t){if(ks(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var s=r[n];if(!yA.call(t,s)||!ks(e[s],t[s]))return!1}return!0}function ZR(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function KR(e,t){var r=ZR(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=ZR(r)}}function N$(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?N$(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function B$(){for(var e=window,t=J0();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=J0(e.document)}return t}function MM(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function pX(e){var t=B$(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&N$(r.ownerDocument.documentElement,r)){if(n!==null&&MM(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=r.textContent.length,u=Math.min(n.start,s);n=n.end===void 0?u:Math.min(n.end,s),!e.extend&&u>n&&(s=n,n=u,u=s),s=KR(r,u);var h=KR(r,n);s&&h&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==h.node||e.focusOffset!==h.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),u>n?(e.addRange(t),e.extend(h.node,h.offset)):(t.setEnd(h.node,h.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mX=Jl&&"documentMode"in document&&11>=document.documentMode,kf=null,jA=null,Py=null,zA=!1;function YR(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;zA||kf==null||kf!==J0(n)||(n=kf,"selectionStart"in n&&MM(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Py&&Hy(Py,n)||(Py=n,n=ob(jA,"onSelect"),0<n.length&&(t=new AM("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=kf)))}function Yx(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Df={animationend:Yx("Animation","AnimationEnd"),animationiteration:Yx("Animation","AnimationIteration"),animationstart:Yx("Animation","AnimationStart"),transitionend:Yx("Transition","TransitionEnd")},aT={},$$={};Jl&&($$=document.createElement("div").style,"AnimationEvent"in window||(delete Df.animationend.animation,delete Df.animationiteration.animation,delete Df.animationstart.animation),"TransitionEvent"in window||delete Df.transitionend.transition);function $1(e){if(aT[e])return aT[e];if(!Df[e])return e;var t=Df[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in $$)return aT[e]=t[r];return e}var F$=$1("animationend"),U$=$1("animationiteration"),V$=$1("animationstart"),G$=$1("transitionend"),W$=new Map,JR="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ku(e,t){W$.set(e,t),fh(t,[e])}for(var sT=0;sT<JR.length;sT++){var lT=JR[sT],gX=lT.toLowerCase(),yX=lT[0].toUpperCase()+lT.slice(1);ku(gX,"on"+yX)}ku(F$,"onAnimationEnd");ku(U$,"onAnimationIteration");ku(V$,"onAnimationStart");ku("dblclick","onDoubleClick");ku("focusin","onFocus");ku("focusout","onBlur");ku(G$,"onTransitionEnd");mp("onMouseEnter",["mouseout","mouseover"]);mp("onMouseLeave",["mouseout","mouseover"]);mp("onPointerEnter",["pointerout","pointerover"]);mp("onPointerLeave",["pointerout","pointerover"]);fh("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));fh("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));fh("onBeforeInput",["compositionend","keypress","textInput","paste"]);fh("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));fh("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));fh("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var gy="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),vX=new Set("cancel close invalid load scroll toggle".split(" ").concat(gy));function QR(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,g7(n,t,void 0,e),e.currentTarget=null}function q$(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],s=n.event;n=n.listeners;e:{var u=void 0;if(t)for(var h=n.length-1;0<=h;h--){var m=n[h],o=m.instance,_=m.currentTarget;if(m=m.listener,o!==u&&s.isPropagationStopped())break e;QR(s,m,_),u=o}else for(h=0;h<n.length;h++){if(m=n[h],o=m.instance,_=m.currentTarget,m=m.listener,o!==u&&s.isPropagationStopped())break e;QR(s,m,_),u=o}}}if(eb)throw e=kA,eb=!1,kA=null,e}function In(e,t){var r=t[UA];r===void 0&&(r=t[UA]=new Set);var n=e+"__bubble";r.has(n)||(H$(t,e,2,!1),r.add(n))}function cT(e,t,r){var n=0;t&&(n|=4),H$(r,e,n,t)}var Jx="_reactListening"+Math.random().toString(36).slice(2);function Xy(e){if(!e[Jx]){e[Jx]=!0,e$.forEach(function(r){r!=="selectionchange"&&(vX.has(r)||cT(r,!1,e),cT(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Jx]||(t[Jx]=!0,cT("selectionchange",!1,t))}}function H$(e,t,r,n){switch(I$(t)){case 1:var s=k7;break;case 4:s=D7;break;default:s=EM}r=s.bind(null,t,r,e),s=void 0,!OA||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),n?s!==void 0?e.addEventListener(t,r,{capture:!0,passive:s}):e.addEventListener(t,r,!0):s!==void 0?e.addEventListener(t,r,{passive:s}):e.addEventListener(t,r,!1)}function uT(e,t,r,n,s){var u=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var h=n.tag;if(h===3||h===4){var m=n.stateNode.containerInfo;if(m===s||m.nodeType===8&&m.parentNode===s)break;if(h===4)for(h=n.return;h!==null;){var o=h.tag;if((o===3||o===4)&&(o=h.stateNode.containerInfo,o===s||o.nodeType===8&&o.parentNode===s))return;h=h.return}for(;m!==null;){if(h=jd(m),h===null)return;if(o=h.tag,o===5||o===6){n=u=h;continue e}m=m.parentNode}}n=n.return}g$(function(){var _=u,E=xM(r),S=[];e:{var A=W$.get(e);if(A!==void 0){var I=AM,R=e;switch(e){case"keypress":if(L0(r)===0)break e;case"keydown":case"keyup":I=X7;break;case"focusin":R="focus",I=nT;break;case"focusout":R="blur",I=nT;break;case"beforeblur":case"afterblur":I=nT;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":I=FR;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":I=j7;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":I=Y7;break;case F$:case U$:case V$:I=B7;break;case G$:I=Q7;break;case"scroll":I=R7;break;case"wheel":I=tX;break;case"copy":case"cut":case"paste":I=F7;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":I=VR}var k=(t&4)!==0,L=!k&&e==="scroll",N=k?A!==null?A+"Capture":null:A;k=[];for(var z=_,F;z!==null;){F=z;var U=F.stateNode;if(F.tag===5&&U!==null&&(F=U,N!==null&&(U=Uy(z,N),U!=null&&k.push(Zy(z,U,F)))),L)break;z=z.return}0<k.length&&(A=new I(A,R,null,r,E),S.push({event:A,listeners:k}))}}if(!(t&7)){e:{if(A=e==="mouseover"||e==="pointerover",I=e==="mouseout"||e==="pointerout",A&&r!==MA&&(R=r.relatedTarget||r.fromElement)&&(jd(R)||R[Ql]))break e;if((I||A)&&(A=E.window===E?E:(A=E.ownerDocument)?A.defaultView||A.parentWindow:window,I?(R=r.relatedTarget||r.toElement,I=_,R=R?jd(R):null,R!==null&&(L=ph(R),R!==L||R.tag!==5&&R.tag!==6)&&(R=null)):(I=null,R=_),I!==R)){if(k=FR,U="onMouseLeave",N="onMouseEnter",z="mouse",(e==="pointerout"||e==="pointerover")&&(k=VR,U="onPointerLeave",N="onPointerEnter",z="pointer"),L=I==null?A:Rf(I),F=R==null?A:Rf(R),A=new k(U,z+"leave",I,r,E),A.target=L,A.relatedTarget=F,U=null,jd(E)===_&&(k=new k(N,z+"enter",R,r,E),k.target=F,k.relatedTarget=L,U=k),L=U,I&&R)t:{for(k=I,N=R,z=0,F=k;F;F=vf(F))z++;for(F=0,U=N;U;U=vf(U))F++;for(;0<z-F;)k=vf(k),z--;for(;0<F-z;)N=vf(N),F--;for(;z--;){if(k===N||N!==null&&k===N.alternate)break t;k=vf(k),N=vf(N)}k=null}else k=null;I!==null&&eL(S,A,I,k,!1),R!==null&&L!==null&&eL(S,L,R,k,!0)}}e:{if(A=_?Rf(_):window,I=A.nodeName&&A.nodeName.toLowerCase(),I==="select"||I==="input"&&A.type==="file")var W=lX;else if(qR(A))if(j$)W=hX;else{W=uX;var Y=cX}else(I=A.nodeName)&&I.toLowerCase()==="input"&&(A.type==="checkbox"||A.type==="radio")&&(W=dX);if(W&&(W=W(e,_))){L$(S,W,r,E);break e}Y&&Y(e,A,_),e==="focusout"&&(Y=A._wrapperState)&&Y.controlled&&A.type==="number"&&EA(A,"number",A.value)}switch(Y=_?Rf(_):window,e){case"focusin":(qR(Y)||Y.contentEditable==="true")&&(kf=Y,jA=_,Py=null);break;case"focusout":Py=jA=kf=null;break;case"mousedown":zA=!0;break;case"contextmenu":case"mouseup":case"dragend":zA=!1,YR(S,r,E);break;case"selectionchange":if(mX)break;case"keydown":case"keyup":YR(S,r,E)}var Q;if(CM)e:{switch(e){case"compositionstart":var Z="onCompositionStart";break e;case"compositionend":Z="onCompositionEnd";break e;case"compositionupdate":Z="onCompositionUpdate";break e}Z=void 0}else Of?D$(e,r)&&(Z="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(Z="onCompositionStart");Z&&(k$&&r.locale!=="ko"&&(Of||Z!=="onCompositionStart"?Z==="onCompositionEnd"&&Of&&(Q=O$()):(au=E,TM="value"in au?au.value:au.textContent,Of=!0)),Y=ob(_,Z),0<Y.length&&(Z=new UR(Z,e,null,r,E),S.push({event:Z,listeners:Y}),Q?Z.data=Q:(Q=R$(r),Q!==null&&(Z.data=Q)))),(Q=nX?iX(e,r):oX(e,r))&&(_=ob(_,"onBeforeInput"),0<_.length&&(E=new UR("onBeforeInput","beforeinput",null,r,E),S.push({event:E,listeners:_}),E.data=Q))}q$(S,t)})}function Zy(e,t,r){return{instance:e,listener:t,currentTarget:r}}function ob(e,t){for(var r=t+"Capture",n=[];e!==null;){var s=e,u=s.stateNode;s.tag===5&&u!==null&&(s=u,u=Uy(e,r),u!=null&&n.unshift(Zy(e,u,s)),u=Uy(e,t),u!=null&&n.push(Zy(e,u,s))),e=e.return}return n}function vf(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function eL(e,t,r,n,s){for(var u=t._reactName,h=[];r!==null&&r!==n;){var m=r,o=m.alternate,_=m.stateNode;if(o!==null&&o===n)break;m.tag===5&&_!==null&&(m=_,s?(o=Uy(r,u),o!=null&&h.unshift(Zy(r,o,m))):s||(o=Uy(r,u),o!=null&&h.push(Zy(r,o,m)))),r=r.return}h.length!==0&&e.push({event:t,listeners:h})}var _X=/\r\n?/g,xX=/\u0000|\uFFFD/g;function tL(e){return(typeof e=="string"?e:""+e).replace(_X,`
`).replace(xX,"")}function Qx(e,t,r){if(t=tL(t),tL(e)!==t&&r)throw Error(Dt(425))}function ab(){}var NA=null,BA=null;function $A(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var FA=typeof setTimeout=="function"?setTimeout:void 0,bX=typeof clearTimeout=="function"?clearTimeout:void 0,rL=typeof Promise=="function"?Promise:void 0,wX=typeof queueMicrotask=="function"?queueMicrotask:typeof rL<"u"?function(e){return rL.resolve(null).then(e).catch(SX)}:FA;function SX(e){setTimeout(function(){throw e})}function dT(e,t){var r=t,n=0;do{var s=r.nextSibling;if(e.removeChild(r),s&&s.nodeType===8)if(r=s.data,r==="/$"){if(n===0){e.removeChild(s),Wy(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=s}while(r);Wy(t)}function pu(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function nL(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var Yp=Math.random().toString(36).slice(2),rl="__reactFiber$"+Yp,Ky="__reactProps$"+Yp,Ql="__reactContainer$"+Yp,UA="__reactEvents$"+Yp,EX="__reactListeners$"+Yp,TX="__reactHandles$"+Yp;function jd(e){var t=e[rl];if(t)return t;for(var r=e.parentNode;r;){if(t=r[Ql]||r[rl]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=nL(e);e!==null;){if(r=e[rl])return r;e=nL(e)}return t}e=r,r=e.parentNode}return null}function Kv(e){return e=e[rl]||e[Ql],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Rf(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Dt(33))}function F1(e){return e[Ky]||null}var VA=[],Lf=-1;function Du(e){return{current:e}}function Dn(e){0>Lf||(e.current=VA[Lf],VA[Lf]=null,Lf--)}function Tn(e,t){Lf++,VA[Lf]=e.current,e.current=t}var Tu={},lo=Du(Tu),$o=Du(!1),eh=Tu;function gp(e,t){var r=e.type.contextTypes;if(!r)return Tu;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var s={},u;for(u in r)s[u]=t[u];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Fo(e){return e=e.childContextTypes,e!=null}function sb(){Dn($o),Dn(lo)}function iL(e,t,r){if(lo.current!==Tu)throw Error(Dt(168));Tn(lo,t),Tn($o,r)}function X$(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var s in n)if(!(s in t))throw Error(Dt(108,c7(e)||"Unknown",s));return Kn({},r,n)}function lb(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Tu,eh=lo.current,Tn(lo,e),Tn($o,$o.current),!0}function oL(e,t,r){var n=e.stateNode;if(!n)throw Error(Dt(169));r?(e=X$(e,t,eh),n.__reactInternalMemoizedMergedChildContext=e,Dn($o),Dn(lo),Tn(lo,e)):Dn($o),Tn($o,r)}var Nl=null,U1=!1,hT=!1;function Z$(e){Nl===null?Nl=[e]:Nl.push(e)}function AX(e){U1=!0,Z$(e)}function Ru(){if(!hT&&Nl!==null){hT=!0;var e=0,t=un;try{var r=Nl;for(un=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}Nl=null,U1=!1}catch(s){throw Nl!==null&&(Nl=Nl.slice(e+1)),x$(bM,Ru),s}finally{un=t,hT=!1}}return null}var jf=[],zf=0,cb=null,ub=0,ka=[],Da=0,th=null,$l=1,Fl="";function Od(e,t){jf[zf++]=ub,jf[zf++]=cb,cb=e,ub=t}function K$(e,t,r){ka[Da++]=$l,ka[Da++]=Fl,ka[Da++]=th,th=e;var n=$l;e=Fl;var s=32-Cs(n)-1;n&=~(1<<s),r+=1;var u=32-Cs(t)+s;if(30<u){var h=s-s%5;u=(n&(1<<h)-1).toString(32),n>>=h,s-=h,$l=1<<32-Cs(t)+s|r<<s|n,Fl=u+e}else $l=1<<u|r<<s|n,Fl=e}function IM(e){e.return!==null&&(Od(e,1),K$(e,1,0))}function OM(e){for(;e===cb;)cb=jf[--zf],jf[zf]=null,ub=jf[--zf],jf[zf]=null;for(;e===th;)th=ka[--Da],ka[Da]=null,Fl=ka[--Da],ka[Da]=null,$l=ka[--Da],ka[Da]=null}var ca=null,la=null,jn=!1,Ts=null;function Y$(e,t){var r=ja(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function aL(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,ca=e,la=pu(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,ca=e,la=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=th!==null?{id:$l,overflow:Fl}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=ja(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,ca=e,la=null,!0):!1;default:return!1}}function GA(e){return(e.mode&1)!==0&&(e.flags&128)===0}function WA(e){if(jn){var t=la;if(t){var r=t;if(!aL(e,t)){if(GA(e))throw Error(Dt(418));t=pu(r.nextSibling);var n=ca;t&&aL(e,t)?Y$(n,r):(e.flags=e.flags&-4097|2,jn=!1,ca=e)}}else{if(GA(e))throw Error(Dt(418));e.flags=e.flags&-4097|2,jn=!1,ca=e}}}function sL(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;ca=e}function e0(e){if(e!==ca)return!1;if(!jn)return sL(e),jn=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!$A(e.type,e.memoizedProps)),t&&(t=la)){if(GA(e))throw J$(),Error(Dt(418));for(;t;)Y$(e,t),t=pu(t.nextSibling)}if(sL(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Dt(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){la=pu(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}la=null}}else la=ca?pu(e.stateNode.nextSibling):null;return!0}function J$(){for(var e=la;e;)e=pu(e.nextSibling)}function yp(){la=ca=null,jn=!1}function kM(e){Ts===null?Ts=[e]:Ts.push(e)}var PX=lc.ReactCurrentBatchConfig;function Yg(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(Dt(309));var n=r.stateNode}if(!n)throw Error(Dt(147,e));var s=n,u=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===u?t.ref:(t=function(h){var m=s.refs;h===null?delete m[u]:m[u]=h},t._stringRef=u,t)}if(typeof e!="string")throw Error(Dt(284));if(!r._owner)throw Error(Dt(290,e))}return e}function t0(e,t){throw e=Object.prototype.toString.call(t),Error(Dt(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function lL(e){var t=e._init;return t(e._payload)}function Q$(e){function t(N,z){if(e){var F=N.deletions;F===null?(N.deletions=[z],N.flags|=16):F.push(z)}}function r(N,z){if(!e)return null;for(;z!==null;)t(N,z),z=z.sibling;return null}function n(N,z){for(N=new Map;z!==null;)z.key!==null?N.set(z.key,z):N.set(z.index,z),z=z.sibling;return N}function s(N,z){return N=vu(N,z),N.index=0,N.sibling=null,N}function u(N,z,F){return N.index=F,e?(F=N.alternate,F!==null?(F=F.index,F<z?(N.flags|=2,z):F):(N.flags|=2,z)):(N.flags|=1048576,z)}function h(N){return e&&N.alternate===null&&(N.flags|=2),N}function m(N,z,F,U){return z===null||z.tag!==6?(z=_T(F,N.mode,U),z.return=N,z):(z=s(z,F),z.return=N,z)}function o(N,z,F,U){var W=F.type;return W===If?E(N,z,F.props.children,U,F.key):z!==null&&(z.elementType===W||typeof W=="object"&&W!==null&&W.$$typeof===Xc&&lL(W)===z.type)?(U=s(z,F.props),U.ref=Yg(N,z,F),U.return=N,U):(U=U0(F.type,F.key,F.props,null,N.mode,U),U.ref=Yg(N,z,F),U.return=N,U)}function _(N,z,F,U){return z===null||z.tag!==4||z.stateNode.containerInfo!==F.containerInfo||z.stateNode.implementation!==F.implementation?(z=xT(F,N.mode,U),z.return=N,z):(z=s(z,F.children||[]),z.return=N,z)}function E(N,z,F,U,W){return z===null||z.tag!==7?(z=Zd(F,N.mode,U,W),z.return=N,z):(z=s(z,F),z.return=N,z)}function S(N,z,F){if(typeof z=="string"&&z!==""||typeof z=="number")return z=_T(""+z,N.mode,F),z.return=N,z;if(typeof z=="object"&&z!==null){switch(z.$$typeof){case Gx:return F=U0(z.type,z.key,z.props,null,N.mode,F),F.ref=Yg(N,null,z),F.return=N,F;case Mf:return z=xT(z,N.mode,F),z.return=N,z;case Xc:var U=z._init;return S(N,U(z._payload),F)}if(py(z)||qg(z))return z=Zd(z,N.mode,F,null),z.return=N,z;t0(N,z)}return null}function A(N,z,F,U){var W=z!==null?z.key:null;if(typeof F=="string"&&F!==""||typeof F=="number")return W!==null?null:m(N,z,""+F,U);if(typeof F=="object"&&F!==null){switch(F.$$typeof){case Gx:return F.key===W?o(N,z,F,U):null;case Mf:return F.key===W?_(N,z,F,U):null;case Xc:return W=F._init,A(N,z,W(F._payload),U)}if(py(F)||qg(F))return W!==null?null:E(N,z,F,U,null);t0(N,F)}return null}function I(N,z,F,U,W){if(typeof U=="string"&&U!==""||typeof U=="number")return N=N.get(F)||null,m(z,N,""+U,W);if(typeof U=="object"&&U!==null){switch(U.$$typeof){case Gx:return N=N.get(U.key===null?F:U.key)||null,o(z,N,U,W);case Mf:return N=N.get(U.key===null?F:U.key)||null,_(z,N,U,W);case Xc:var Y=U._init;return I(N,z,F,Y(U._payload),W)}if(py(U)||qg(U))return N=N.get(F)||null,E(z,N,U,W,null);t0(z,U)}return null}function R(N,z,F,U){for(var W=null,Y=null,Q=z,Z=z=0,re=null;Q!==null&&Z<F.length;Z++){Q.index>Z?(re=Q,Q=null):re=Q.sibling;var ne=A(N,Q,F[Z],U);if(ne===null){Q===null&&(Q=re);break}e&&Q&&ne.alternate===null&&t(N,Q),z=u(ne,z,Z),Y===null?W=ne:Y.sibling=ne,Y=ne,Q=re}if(Z===F.length)return r(N,Q),jn&&Od(N,Z),W;if(Q===null){for(;Z<F.length;Z++)Q=S(N,F[Z],U),Q!==null&&(z=u(Q,z,Z),Y===null?W=Q:Y.sibling=Q,Y=Q);return jn&&Od(N,Z),W}for(Q=n(N,Q);Z<F.length;Z++)re=I(Q,N,Z,F[Z],U),re!==null&&(e&&re.alternate!==null&&Q.delete(re.key===null?Z:re.key),z=u(re,z,Z),Y===null?W=re:Y.sibling=re,Y=re);return e&&Q.forEach(function(ue){return t(N,ue)}),jn&&Od(N,Z),W}function k(N,z,F,U){var W=qg(F);if(typeof W!="function")throw Error(Dt(150));if(F=W.call(F),F==null)throw Error(Dt(151));for(var Y=W=null,Q=z,Z=z=0,re=null,ne=F.next();Q!==null&&!ne.done;Z++,ne=F.next()){Q.index>Z?(re=Q,Q=null):re=Q.sibling;var ue=A(N,Q,ne.value,U);if(ue===null){Q===null&&(Q=re);break}e&&Q&&ue.alternate===null&&t(N,Q),z=u(ue,z,Z),Y===null?W=ue:Y.sibling=ue,Y=ue,Q=re}if(ne.done)return r(N,Q),jn&&Od(N,Z),W;if(Q===null){for(;!ne.done;Z++,ne=F.next())ne=S(N,ne.value,U),ne!==null&&(z=u(ne,z,Z),Y===null?W=ne:Y.sibling=ne,Y=ne);return jn&&Od(N,Z),W}for(Q=n(N,Q);!ne.done;Z++,ne=F.next())ne=I(Q,N,Z,ne.value,U),ne!==null&&(e&&ne.alternate!==null&&Q.delete(ne.key===null?Z:ne.key),z=u(ne,z,Z),Y===null?W=ne:Y.sibling=ne,Y=ne);return e&&Q.forEach(function(fe){return t(N,fe)}),jn&&Od(N,Z),W}function L(N,z,F,U){if(typeof F=="object"&&F!==null&&F.type===If&&F.key===null&&(F=F.props.children),typeof F=="object"&&F!==null){switch(F.$$typeof){case Gx:e:{for(var W=F.key,Y=z;Y!==null;){if(Y.key===W){if(W=F.type,W===If){if(Y.tag===7){r(N,Y.sibling),z=s(Y,F.props.children),z.return=N,N=z;break e}}else if(Y.elementType===W||typeof W=="object"&&W!==null&&W.$$typeof===Xc&&lL(W)===Y.type){r(N,Y.sibling),z=s(Y,F.props),z.ref=Yg(N,Y,F),z.return=N,N=z;break e}r(N,Y);break}else t(N,Y);Y=Y.sibling}F.type===If?(z=Zd(F.props.children,N.mode,U,F.key),z.return=N,N=z):(U=U0(F.type,F.key,F.props,null,N.mode,U),U.ref=Yg(N,z,F),U.return=N,N=U)}return h(N);case Mf:e:{for(Y=F.key;z!==null;){if(z.key===Y)if(z.tag===4&&z.stateNode.containerInfo===F.containerInfo&&z.stateNode.implementation===F.implementation){r(N,z.sibling),z=s(z,F.children||[]),z.return=N,N=z;break e}else{r(N,z);break}else t(N,z);z=z.sibling}z=xT(F,N.mode,U),z.return=N,N=z}return h(N);case Xc:return Y=F._init,L(N,z,Y(F._payload),U)}if(py(F))return R(N,z,F,U);if(qg(F))return k(N,z,F,U);t0(N,F)}return typeof F=="string"&&F!==""||typeof F=="number"?(F=""+F,z!==null&&z.tag===6?(r(N,z.sibling),z=s(z,F),z.return=N,N=z):(r(N,z),z=_T(F,N.mode,U),z.return=N,N=z),h(N)):r(N,z)}return L}var vp=Q$(!0),eF=Q$(!1),db=Du(null),hb=null,Nf=null,DM=null;function RM(){DM=Nf=hb=null}function LM(e){var t=db.current;Dn(db),e._currentValue=t}function qA(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function Xf(e,t){hb=e,DM=Nf=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(No=!0),e.firstContext=null)}function Ua(e){var t=e._currentValue;if(DM!==e)if(e={context:e,memoizedValue:t,next:null},Nf===null){if(hb===null)throw Error(Dt(308));Nf=e,hb.dependencies={lanes:0,firstContext:e}}else Nf=Nf.next=e;return t}var zd=null;function jM(e){zd===null?zd=[e]:zd.push(e)}function tF(e,t,r,n){var s=t.interleaved;return s===null?(r.next=r,jM(t)):(r.next=s.next,s.next=r),t.interleaved=r,ec(e,n)}function ec(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var Zc=!1;function zM(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function rF(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Wl(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function mu(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,$r&2){var s=n.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),n.pending=t,ec(e,r)}return s=n.interleaved,s===null?(t.next=t,jM(n)):(t.next=s.next,s.next=t),n.interleaved=t,ec(e,r)}function j0(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,wM(e,r)}}function cL(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var s=null,u=null;if(r=r.firstBaseUpdate,r!==null){do{var h={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};u===null?s=u=h:u=u.next=h,r=r.next}while(r!==null);u===null?s=u=t:u=u.next=t}else s=u=t;r={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:u,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function fb(e,t,r,n){var s=e.updateQueue;Zc=!1;var u=s.firstBaseUpdate,h=s.lastBaseUpdate,m=s.shared.pending;if(m!==null){s.shared.pending=null;var o=m,_=o.next;o.next=null,h===null?u=_:h.next=_,h=o;var E=e.alternate;E!==null&&(E=E.updateQueue,m=E.lastBaseUpdate,m!==h&&(m===null?E.firstBaseUpdate=_:m.next=_,E.lastBaseUpdate=o))}if(u!==null){var S=s.baseState;h=0,E=_=o=null,m=u;do{var A=m.lane,I=m.eventTime;if((n&A)===A){E!==null&&(E=E.next={eventTime:I,lane:0,tag:m.tag,payload:m.payload,callback:m.callback,next:null});e:{var R=e,k=m;switch(A=t,I=r,k.tag){case 1:if(R=k.payload,typeof R=="function"){S=R.call(I,S,A);break e}S=R;break e;case 3:R.flags=R.flags&-65537|128;case 0:if(R=k.payload,A=typeof R=="function"?R.call(I,S,A):R,A==null)break e;S=Kn({},S,A);break e;case 2:Zc=!0}}m.callback!==null&&m.lane!==0&&(e.flags|=64,A=s.effects,A===null?s.effects=[m]:A.push(m))}else I={eventTime:I,lane:A,tag:m.tag,payload:m.payload,callback:m.callback,next:null},E===null?(_=E=I,o=S):E=E.next=I,h|=A;if(m=m.next,m===null){if(m=s.shared.pending,m===null)break;A=m,m=A.next,A.next=null,s.lastBaseUpdate=A,s.shared.pending=null}}while(!0);if(E===null&&(o=S),s.baseState=o,s.firstBaseUpdate=_,s.lastBaseUpdate=E,t=s.shared.interleaved,t!==null){s=t;do h|=s.lane,s=s.next;while(s!==t)}else u===null&&(s.shared.lanes=0);nh|=h,e.lanes=h,e.memoizedState=S}}function uL(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],s=n.callback;if(s!==null){if(n.callback=null,n=r,typeof s!="function")throw Error(Dt(191,s));s.call(n)}}}var Yv={},al=Du(Yv),Yy=Du(Yv),Jy=Du(Yv);function Nd(e){if(e===Yv)throw Error(Dt(174));return e}function NM(e,t){switch(Tn(Jy,t),Tn(Yy,e),Tn(al,Yv),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:AA(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=AA(t,e)}Dn(al),Tn(al,t)}function _p(){Dn(al),Dn(Yy),Dn(Jy)}function nF(e){Nd(Jy.current);var t=Nd(al.current),r=AA(t,e.type);t!==r&&(Tn(Yy,e),Tn(al,r))}function BM(e){Yy.current===e&&(Dn(al),Dn(Yy))}var Hn=Du(0);function pb(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var fT=[];function $M(){for(var e=0;e<fT.length;e++)fT[e]._workInProgressVersionPrimary=null;fT.length=0}var z0=lc.ReactCurrentDispatcher,pT=lc.ReactCurrentBatchConfig,rh=0,Zn=null,bi=null,Di=null,mb=!1,Cy=!1,Qy=0,CX=0;function ro(){throw Error(Dt(321))}function FM(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!ks(e[r],t[r]))return!1;return!0}function UM(e,t,r,n,s,u){if(rh=u,Zn=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,z0.current=e===null||e.memoizedState===null?kX:DX,e=r(n,s),Cy){u=0;do{if(Cy=!1,Qy=0,25<=u)throw Error(Dt(301));u+=1,Di=bi=null,t.updateQueue=null,z0.current=RX,e=r(n,s)}while(Cy)}if(z0.current=gb,t=bi!==null&&bi.next!==null,rh=0,Di=bi=Zn=null,mb=!1,t)throw Error(Dt(300));return e}function VM(){var e=Qy!==0;return Qy=0,e}function Ys(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Di===null?Zn.memoizedState=Di=e:Di=Di.next=e,Di}function Va(){if(bi===null){var e=Zn.alternate;e=e!==null?e.memoizedState:null}else e=bi.next;var t=Di===null?Zn.memoizedState:Di.next;if(t!==null)Di=t,bi=e;else{if(e===null)throw Error(Dt(310));bi=e,e={memoizedState:bi.memoizedState,baseState:bi.baseState,baseQueue:bi.baseQueue,queue:bi.queue,next:null},Di===null?Zn.memoizedState=Di=e:Di=Di.next=e}return Di}function ev(e,t){return typeof t=="function"?t(e):t}function mT(e){var t=Va(),r=t.queue;if(r===null)throw Error(Dt(311));r.lastRenderedReducer=e;var n=bi,s=n.baseQueue,u=r.pending;if(u!==null){if(s!==null){var h=s.next;s.next=u.next,u.next=h}n.baseQueue=s=u,r.pending=null}if(s!==null){u=s.next,n=n.baseState;var m=h=null,o=null,_=u;do{var E=_.lane;if((rh&E)===E)o!==null&&(o=o.next={lane:0,action:_.action,hasEagerState:_.hasEagerState,eagerState:_.eagerState,next:null}),n=_.hasEagerState?_.eagerState:e(n,_.action);else{var S={lane:E,action:_.action,hasEagerState:_.hasEagerState,eagerState:_.eagerState,next:null};o===null?(m=o=S,h=n):o=o.next=S,Zn.lanes|=E,nh|=E}_=_.next}while(_!==null&&_!==u);o===null?h=n:o.next=m,ks(n,t.memoizedState)||(No=!0),t.memoizedState=n,t.baseState=h,t.baseQueue=o,r.lastRenderedState=n}if(e=r.interleaved,e!==null){s=e;do u=s.lane,Zn.lanes|=u,nh|=u,s=s.next;while(s!==e)}else s===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function gT(e){var t=Va(),r=t.queue;if(r===null)throw Error(Dt(311));r.lastRenderedReducer=e;var n=r.dispatch,s=r.pending,u=t.memoizedState;if(s!==null){r.pending=null;var h=s=s.next;do u=e(u,h.action),h=h.next;while(h!==s);ks(u,t.memoizedState)||(No=!0),t.memoizedState=u,t.baseQueue===null&&(t.baseState=u),r.lastRenderedState=u}return[u,n]}function iF(){}function oF(e,t){var r=Zn,n=Va(),s=t(),u=!ks(n.memoizedState,s);if(u&&(n.memoizedState=s,No=!0),n=n.queue,GM(lF.bind(null,r,n,e),[e]),n.getSnapshot!==t||u||Di!==null&&Di.memoizedState.tag&1){if(r.flags|=2048,tv(9,sF.bind(null,r,n,s,t),void 0,null),Li===null)throw Error(Dt(349));rh&30||aF(r,t,s)}return s}function aF(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=Zn.updateQueue,t===null?(t={lastEffect:null,stores:null},Zn.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function sF(e,t,r,n){t.value=r,t.getSnapshot=n,cF(t)&&uF(e)}function lF(e,t,r){return r(function(){cF(t)&&uF(e)})}function cF(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!ks(e,r)}catch{return!0}}function uF(e){var t=ec(e,1);t!==null&&Ms(t,e,1,-1)}function dL(e){var t=Ys();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ev,lastRenderedState:e},t.queue=e,e=e.dispatch=OX.bind(null,Zn,e),[t.memoizedState,e]}function tv(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=Zn.updateQueue,t===null?(t={lastEffect:null,stores:null},Zn.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function dF(){return Va().memoizedState}function N0(e,t,r,n){var s=Ys();Zn.flags|=e,s.memoizedState=tv(1|t,r,void 0,n===void 0?null:n)}function V1(e,t,r,n){var s=Va();n=n===void 0?null:n;var u=void 0;if(bi!==null){var h=bi.memoizedState;if(u=h.destroy,n!==null&&FM(n,h.deps)){s.memoizedState=tv(t,r,u,n);return}}Zn.flags|=e,s.memoizedState=tv(1|t,r,u,n)}function hL(e,t){return N0(8390656,8,e,t)}function GM(e,t){return V1(2048,8,e,t)}function hF(e,t){return V1(4,2,e,t)}function fF(e,t){return V1(4,4,e,t)}function pF(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function mF(e,t,r){return r=r!=null?r.concat([e]):null,V1(4,4,pF.bind(null,t,e),r)}function WM(){}function gF(e,t){var r=Va();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&FM(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function yF(e,t){var r=Va();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&FM(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function vF(e,t,r){return rh&21?(ks(r,t)||(r=S$(),Zn.lanes|=r,nh|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,No=!0),e.memoizedState=r)}function MX(e,t){var r=un;un=r!==0&&4>r?r:4,e(!0);var n=pT.transition;pT.transition={};try{e(!1),t()}finally{un=r,pT.transition=n}}function _F(){return Va().memoizedState}function IX(e,t,r){var n=yu(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},xF(e))bF(t,r);else if(r=tF(e,t,r,n),r!==null){var s=vo();Ms(r,e,n,s),wF(r,t,n)}}function OX(e,t,r){var n=yu(e),s={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(xF(e))bF(t,s);else{var u=e.alternate;if(e.lanes===0&&(u===null||u.lanes===0)&&(u=t.lastRenderedReducer,u!==null))try{var h=t.lastRenderedState,m=u(h,r);if(s.hasEagerState=!0,s.eagerState=m,ks(m,h)){var o=t.interleaved;o===null?(s.next=s,jM(t)):(s.next=o.next,o.next=s),t.interleaved=s;return}}catch{}finally{}r=tF(e,t,s,n),r!==null&&(s=vo(),Ms(r,e,n,s),wF(r,t,n))}}function xF(e){var t=e.alternate;return e===Zn||t!==null&&t===Zn}function bF(e,t){Cy=mb=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function wF(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,wM(e,r)}}var gb={readContext:Ua,useCallback:ro,useContext:ro,useEffect:ro,useImperativeHandle:ro,useInsertionEffect:ro,useLayoutEffect:ro,useMemo:ro,useReducer:ro,useRef:ro,useState:ro,useDebugValue:ro,useDeferredValue:ro,useTransition:ro,useMutableSource:ro,useSyncExternalStore:ro,useId:ro,unstable_isNewReconciler:!1},kX={readContext:Ua,useCallback:function(e,t){return Ys().memoizedState=[e,t===void 0?null:t],e},useContext:Ua,useEffect:hL,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,N0(4194308,4,pF.bind(null,t,e),r)},useLayoutEffect:function(e,t){return N0(4194308,4,e,t)},useInsertionEffect:function(e,t){return N0(4,2,e,t)},useMemo:function(e,t){var r=Ys();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=Ys();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=IX.bind(null,Zn,e),[n.memoizedState,e]},useRef:function(e){var t=Ys();return e={current:e},t.memoizedState=e},useState:dL,useDebugValue:WM,useDeferredValue:function(e){return Ys().memoizedState=e},useTransition:function(){var e=dL(!1),t=e[0];return e=MX.bind(null,e[1]),Ys().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=Zn,s=Ys();if(jn){if(r===void 0)throw Error(Dt(407));r=r()}else{if(r=t(),Li===null)throw Error(Dt(349));rh&30||aF(n,t,r)}s.memoizedState=r;var u={value:r,getSnapshot:t};return s.queue=u,hL(lF.bind(null,n,u,e),[e]),n.flags|=2048,tv(9,sF.bind(null,n,u,r,t),void 0,null),r},useId:function(){var e=Ys(),t=Li.identifierPrefix;if(jn){var r=Fl,n=$l;r=(n&~(1<<32-Cs(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=Qy++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=CX++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},DX={readContext:Ua,useCallback:gF,useContext:Ua,useEffect:GM,useImperativeHandle:mF,useInsertionEffect:hF,useLayoutEffect:fF,useMemo:yF,useReducer:mT,useRef:dF,useState:function(){return mT(ev)},useDebugValue:WM,useDeferredValue:function(e){var t=Va();return vF(t,bi.memoizedState,e)},useTransition:function(){var e=mT(ev)[0],t=Va().memoizedState;return[e,t]},useMutableSource:iF,useSyncExternalStore:oF,useId:_F,unstable_isNewReconciler:!1},RX={readContext:Ua,useCallback:gF,useContext:Ua,useEffect:GM,useImperativeHandle:mF,useInsertionEffect:hF,useLayoutEffect:fF,useMemo:yF,useReducer:gT,useRef:dF,useState:function(){return gT(ev)},useDebugValue:WM,useDeferredValue:function(e){var t=Va();return bi===null?t.memoizedState=e:vF(t,bi.memoizedState,e)},useTransition:function(){var e=gT(ev)[0],t=Va().memoizedState;return[e,t]},useMutableSource:iF,useSyncExternalStore:oF,useId:_F,unstable_isNewReconciler:!1};function xs(e,t){if(e&&e.defaultProps){t=Kn({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function HA(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:Kn({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var G1={isMounted:function(e){return(e=e._reactInternals)?ph(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=vo(),s=yu(e),u=Wl(n,s);u.payload=t,r!=null&&(u.callback=r),t=mu(e,u,s),t!==null&&(Ms(t,e,s,n),j0(t,e,s))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=vo(),s=yu(e),u=Wl(n,s);u.tag=1,u.payload=t,r!=null&&(u.callback=r),t=mu(e,u,s),t!==null&&(Ms(t,e,s,n),j0(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=vo(),n=yu(e),s=Wl(r,n);s.tag=2,t!=null&&(s.callback=t),t=mu(e,s,n),t!==null&&(Ms(t,e,n,r),j0(t,e,n))}};function fL(e,t,r,n,s,u,h){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,u,h):t.prototype&&t.prototype.isPureReactComponent?!Hy(r,n)||!Hy(s,u):!0}function SF(e,t,r){var n=!1,s=Tu,u=t.contextType;return typeof u=="object"&&u!==null?u=Ua(u):(s=Fo(t)?eh:lo.current,n=t.contextTypes,u=(n=n!=null)?gp(e,s):Tu),t=new t(r,u),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=G1,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=u),t}function pL(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&G1.enqueueReplaceState(t,t.state,null)}function XA(e,t,r,n){var s=e.stateNode;s.props=r,s.state=e.memoizedState,s.refs={},zM(e);var u=t.contextType;typeof u=="object"&&u!==null?s.context=Ua(u):(u=Fo(t)?eh:lo.current,s.context=gp(e,u)),s.state=e.memoizedState,u=t.getDerivedStateFromProps,typeof u=="function"&&(HA(e,t,u,r),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&G1.enqueueReplaceState(s,s.state,null),fb(e,r,s,n),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function xp(e,t){try{var r="",n=t;do r+=l7(n),n=n.return;while(n);var s=r}catch(u){s=`
Error generating stack: `+u.message+`
`+u.stack}return{value:e,source:t,stack:s,digest:null}}function yT(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function ZA(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var LX=typeof WeakMap=="function"?WeakMap:Map;function EF(e,t,r){r=Wl(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){vb||(vb=!0,oP=n),ZA(e,t)},r}function TF(e,t,r){r=Wl(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var s=t.value;r.payload=function(){return n(s)},r.callback=function(){ZA(e,t)}}var u=e.stateNode;return u!==null&&typeof u.componentDidCatch=="function"&&(r.callback=function(){ZA(e,t),typeof n!="function"&&(gu===null?gu=new Set([this]):gu.add(this));var h=t.stack;this.componentDidCatch(t.value,{componentStack:h!==null?h:""})}),r}function mL(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new LX;var s=new Set;n.set(t,s)}else s=n.get(t),s===void 0&&(s=new Set,n.set(t,s));s.has(r)||(s.add(r),e=ZX.bind(null,e,t,r),t.then(e,e))}function gL(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function yL(e,t,r,n,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=Wl(-1,1),t.tag=2,mu(r,t,1))),r.lanes|=1),e)}var jX=lc.ReactCurrentOwner,No=!1;function mo(e,t,r,n){t.child=e===null?eF(t,null,r,n):vp(t,e.child,r,n)}function vL(e,t,r,n,s){r=r.render;var u=t.ref;return Xf(t,s),n=UM(e,t,r,n,u,s),r=VM(),e!==null&&!No?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,tc(e,t,s)):(jn&&r&&IM(t),t.flags|=1,mo(e,t,n,s),t.child)}function _L(e,t,r,n,s){if(e===null){var u=r.type;return typeof u=="function"&&!QM(u)&&u.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=u,AF(e,t,u,n,s)):(e=U0(r.type,null,n,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(u=e.child,!(e.lanes&s)){var h=u.memoizedProps;if(r=r.compare,r=r!==null?r:Hy,r(h,n)&&e.ref===t.ref)return tc(e,t,s)}return t.flags|=1,e=vu(u,n),e.ref=t.ref,e.return=t,t.child=e}function AF(e,t,r,n,s){if(e!==null){var u=e.memoizedProps;if(Hy(u,n)&&e.ref===t.ref)if(No=!1,t.pendingProps=n=u,(e.lanes&s)!==0)e.flags&131072&&(No=!0);else return t.lanes=e.lanes,tc(e,t,s)}return KA(e,t,r,n,s)}function PF(e,t,r){var n=t.pendingProps,s=n.children,u=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Tn($f,ta),ta|=r;else{if(!(r&1073741824))return e=u!==null?u.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Tn($f,ta),ta|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=u!==null?u.baseLanes:r,Tn($f,ta),ta|=n}else u!==null?(n=u.baseLanes|r,t.memoizedState=null):n=r,Tn($f,ta),ta|=n;return mo(e,t,s,r),t.child}function CF(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function KA(e,t,r,n,s){var u=Fo(r)?eh:lo.current;return u=gp(t,u),Xf(t,s),r=UM(e,t,r,n,u,s),n=VM(),e!==null&&!No?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,tc(e,t,s)):(jn&&n&&IM(t),t.flags|=1,mo(e,t,r,s),t.child)}function xL(e,t,r,n,s){if(Fo(r)){var u=!0;lb(t)}else u=!1;if(Xf(t,s),t.stateNode===null)B0(e,t),SF(t,r,n),XA(t,r,n,s),n=!0;else if(e===null){var h=t.stateNode,m=t.memoizedProps;h.props=m;var o=h.context,_=r.contextType;typeof _=="object"&&_!==null?_=Ua(_):(_=Fo(r)?eh:lo.current,_=gp(t,_));var E=r.getDerivedStateFromProps,S=typeof E=="function"||typeof h.getSnapshotBeforeUpdate=="function";S||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(m!==n||o!==_)&&pL(t,h,n,_),Zc=!1;var A=t.memoizedState;h.state=A,fb(t,n,h,s),o=t.memoizedState,m!==n||A!==o||$o.current||Zc?(typeof E=="function"&&(HA(t,r,E,n),o=t.memoizedState),(m=Zc||fL(t,r,m,n,A,o,_))?(S||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount()),typeof h.componentDidMount=="function"&&(t.flags|=4194308)):(typeof h.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=o),h.props=n,h.state=o,h.context=_,n=m):(typeof h.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{h=t.stateNode,rF(e,t),m=t.memoizedProps,_=t.type===t.elementType?m:xs(t.type,m),h.props=_,S=t.pendingProps,A=h.context,o=r.contextType,typeof o=="object"&&o!==null?o=Ua(o):(o=Fo(r)?eh:lo.current,o=gp(t,o));var I=r.getDerivedStateFromProps;(E=typeof I=="function"||typeof h.getSnapshotBeforeUpdate=="function")||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(m!==S||A!==o)&&pL(t,h,n,o),Zc=!1,A=t.memoizedState,h.state=A,fb(t,n,h,s);var R=t.memoizedState;m!==S||A!==R||$o.current||Zc?(typeof I=="function"&&(HA(t,r,I,n),R=t.memoizedState),(_=Zc||fL(t,r,_,n,A,R,o)||!1)?(E||typeof h.UNSAFE_componentWillUpdate!="function"&&typeof h.componentWillUpdate!="function"||(typeof h.componentWillUpdate=="function"&&h.componentWillUpdate(n,R,o),typeof h.UNSAFE_componentWillUpdate=="function"&&h.UNSAFE_componentWillUpdate(n,R,o)),typeof h.componentDidUpdate=="function"&&(t.flags|=4),typeof h.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof h.componentDidUpdate!="function"||m===e.memoizedProps&&A===e.memoizedState||(t.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||m===e.memoizedProps&&A===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=R),h.props=n,h.state=R,h.context=o,n=_):(typeof h.componentDidUpdate!="function"||m===e.memoizedProps&&A===e.memoizedState||(t.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||m===e.memoizedProps&&A===e.memoizedState||(t.flags|=1024),n=!1)}return YA(e,t,r,n,u,s)}function YA(e,t,r,n,s,u){CF(e,t);var h=(t.flags&128)!==0;if(!n&&!h)return s&&oL(t,r,!1),tc(e,t,u);n=t.stateNode,jX.current=t;var m=h&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&h?(t.child=vp(t,e.child,null,u),t.child=vp(t,null,m,u)):mo(e,t,m,u),t.memoizedState=n.state,s&&oL(t,r,!0),t.child}function MF(e){var t=e.stateNode;t.pendingContext?iL(e,t.pendingContext,t.pendingContext!==t.context):t.context&&iL(e,t.context,!1),NM(e,t.containerInfo)}function bL(e,t,r,n,s){return yp(),kM(s),t.flags|=256,mo(e,t,r,n),t.child}var JA={dehydrated:null,treeContext:null,retryLane:0};function QA(e){return{baseLanes:e,cachePool:null,transitions:null}}function IF(e,t,r){var n=t.pendingProps,s=Hn.current,u=!1,h=(t.flags&128)!==0,m;if((m=h)||(m=e!==null&&e.memoizedState===null?!1:(s&2)!==0),m?(u=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),Tn(Hn,s&1),e===null)return WA(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(h=n.children,e=n.fallback,u?(n=t.mode,u=t.child,h={mode:"hidden",children:h},!(n&1)&&u!==null?(u.childLanes=0,u.pendingProps=h):u=H1(h,n,0,null),e=Zd(e,n,r,null),u.return=t,e.return=t,u.sibling=e,t.child=u,t.child.memoizedState=QA(r),t.memoizedState=JA,e):qM(t,h));if(s=e.memoizedState,s!==null&&(m=s.dehydrated,m!==null))return zX(e,t,h,n,m,s,r);if(u){u=n.fallback,h=t.mode,s=e.child,m=s.sibling;var o={mode:"hidden",children:n.children};return!(h&1)&&t.child!==s?(n=t.child,n.childLanes=0,n.pendingProps=o,t.deletions=null):(n=vu(s,o),n.subtreeFlags=s.subtreeFlags&14680064),m!==null?u=vu(m,u):(u=Zd(u,h,r,null),u.flags|=2),u.return=t,n.return=t,n.sibling=u,t.child=n,n=u,u=t.child,h=e.child.memoizedState,h=h===null?QA(r):{baseLanes:h.baseLanes|r,cachePool:null,transitions:h.transitions},u.memoizedState=h,u.childLanes=e.childLanes&~r,t.memoizedState=JA,n}return u=e.child,e=u.sibling,n=vu(u,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function qM(e,t){return t=H1({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function r0(e,t,r,n){return n!==null&&kM(n),vp(t,e.child,null,r),e=qM(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function zX(e,t,r,n,s,u,h){if(r)return t.flags&256?(t.flags&=-257,n=yT(Error(Dt(422))),r0(e,t,h,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(u=n.fallback,s=t.mode,n=H1({mode:"visible",children:n.children},s,0,null),u=Zd(u,s,h,null),u.flags|=2,n.return=t,u.return=t,n.sibling=u,t.child=n,t.mode&1&&vp(t,e.child,null,h),t.child.memoizedState=QA(h),t.memoizedState=JA,u);if(!(t.mode&1))return r0(e,t,h,null);if(s.data==="$!"){if(n=s.nextSibling&&s.nextSibling.dataset,n)var m=n.dgst;return n=m,u=Error(Dt(419)),n=yT(u,n,void 0),r0(e,t,h,n)}if(m=(h&e.childLanes)!==0,No||m){if(n=Li,n!==null){switch(h&-h){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(n.suspendedLanes|h)?0:s,s!==0&&s!==u.retryLane&&(u.retryLane=s,ec(e,s),Ms(n,e,s,-1))}return JM(),n=yT(Error(Dt(421))),r0(e,t,h,n)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=KX.bind(null,e),s._reactRetry=t,null):(e=u.treeContext,la=pu(s.nextSibling),ca=t,jn=!0,Ts=null,e!==null&&(ka[Da++]=$l,ka[Da++]=Fl,ka[Da++]=th,$l=e.id,Fl=e.overflow,th=t),t=qM(t,n.children),t.flags|=4096,t)}function wL(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),qA(e.return,t,r)}function vT(e,t,r,n,s){var u=e.memoizedState;u===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:s}:(u.isBackwards=t,u.rendering=null,u.renderingStartTime=0,u.last=n,u.tail=r,u.tailMode=s)}function OF(e,t,r){var n=t.pendingProps,s=n.revealOrder,u=n.tail;if(mo(e,t,n.children,r),n=Hn.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&wL(e,r,t);else if(e.tag===19)wL(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(Tn(Hn,n),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(r=t.child,s=null;r!==null;)e=r.alternate,e!==null&&pb(e)===null&&(s=r),r=r.sibling;r=s,r===null?(s=t.child,t.child=null):(s=r.sibling,r.sibling=null),vT(t,!1,s,r,u);break;case"backwards":for(r=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&pb(e)===null){t.child=s;break}e=s.sibling,s.sibling=r,r=s,s=e}vT(t,!0,r,null,u);break;case"together":vT(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function B0(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function tc(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),nh|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(Dt(153));if(t.child!==null){for(e=t.child,r=vu(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=vu(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function NX(e,t,r){switch(t.tag){case 3:MF(t),yp();break;case 5:nF(t);break;case 1:Fo(t.type)&&lb(t);break;case 4:NM(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,s=t.memoizedProps.value;Tn(db,n._currentValue),n._currentValue=s;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(Tn(Hn,Hn.current&1),t.flags|=128,null):r&t.child.childLanes?IF(e,t,r):(Tn(Hn,Hn.current&1),e=tc(e,t,r),e!==null?e.sibling:null);Tn(Hn,Hn.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return OF(e,t,r);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Tn(Hn,Hn.current),n)break;return null;case 22:case 23:return t.lanes=0,PF(e,t,r)}return tc(e,t,r)}var kF,eP,DF,RF;kF=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};eP=function(){};DF=function(e,t,r,n){var s=e.memoizedProps;if(s!==n){e=t.stateNode,Nd(al.current);var u=null;switch(r){case"input":s=wA(e,s),n=wA(e,n),u=[];break;case"select":s=Kn({},s,{value:void 0}),n=Kn({},n,{value:void 0}),u=[];break;case"textarea":s=TA(e,s),n=TA(e,n),u=[];break;default:typeof s.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=ab)}PA(r,n);var h;r=null;for(_ in s)if(!n.hasOwnProperty(_)&&s.hasOwnProperty(_)&&s[_]!=null)if(_==="style"){var m=s[_];for(h in m)m.hasOwnProperty(h)&&(r||(r={}),r[h]="")}else _!=="dangerouslySetInnerHTML"&&_!=="children"&&_!=="suppressContentEditableWarning"&&_!=="suppressHydrationWarning"&&_!=="autoFocus"&&($y.hasOwnProperty(_)?u||(u=[]):(u=u||[]).push(_,null));for(_ in n){var o=n[_];if(m=s!=null?s[_]:void 0,n.hasOwnProperty(_)&&o!==m&&(o!=null||m!=null))if(_==="style")if(m){for(h in m)!m.hasOwnProperty(h)||o&&o.hasOwnProperty(h)||(r||(r={}),r[h]="");for(h in o)o.hasOwnProperty(h)&&m[h]!==o[h]&&(r||(r={}),r[h]=o[h])}else r||(u||(u=[]),u.push(_,r)),r=o;else _==="dangerouslySetInnerHTML"?(o=o?o.__html:void 0,m=m?m.__html:void 0,o!=null&&m!==o&&(u=u||[]).push(_,o)):_==="children"?typeof o!="string"&&typeof o!="number"||(u=u||[]).push(_,""+o):_!=="suppressContentEditableWarning"&&_!=="suppressHydrationWarning"&&($y.hasOwnProperty(_)?(o!=null&&_==="onScroll"&&In("scroll",e),u||m===o||(u=[])):(u=u||[]).push(_,o))}r&&(u=u||[]).push("style",r);var _=u;(t.updateQueue=_)&&(t.flags|=4)}};RF=function(e,t,r,n){r!==n&&(t.flags|=4)};function Jg(e,t){if(!jn)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function no(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var s=e.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags&14680064,n|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function BX(e,t,r){var n=t.pendingProps;switch(OM(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return no(t),null;case 1:return Fo(t.type)&&sb(),no(t),null;case 3:return n=t.stateNode,_p(),Dn($o),Dn(lo),$M(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(e0(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Ts!==null&&(lP(Ts),Ts=null))),eP(e,t),no(t),null;case 5:BM(t);var s=Nd(Jy.current);if(r=t.type,e!==null&&t.stateNode!=null)DF(e,t,r,n,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(Dt(166));return no(t),null}if(e=Nd(al.current),e0(t)){n=t.stateNode,r=t.type;var u=t.memoizedProps;switch(n[rl]=t,n[Ky]=u,e=(t.mode&1)!==0,r){case"dialog":In("cancel",n),In("close",n);break;case"iframe":case"object":case"embed":In("load",n);break;case"video":case"audio":for(s=0;s<gy.length;s++)In(gy[s],n);break;case"source":In("error",n);break;case"img":case"image":case"link":In("error",n),In("load",n);break;case"details":In("toggle",n);break;case"input":OR(n,u),In("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!u.multiple},In("invalid",n);break;case"textarea":DR(n,u),In("invalid",n)}PA(r,u),s=null;for(var h in u)if(u.hasOwnProperty(h)){var m=u[h];h==="children"?typeof m=="string"?n.textContent!==m&&(u.suppressHydrationWarning!==!0&&Qx(n.textContent,m,e),s=["children",m]):typeof m=="number"&&n.textContent!==""+m&&(u.suppressHydrationWarning!==!0&&Qx(n.textContent,m,e),s=["children",""+m]):$y.hasOwnProperty(h)&&m!=null&&h==="onScroll"&&In("scroll",n)}switch(r){case"input":Wx(n),kR(n,u,!0);break;case"textarea":Wx(n),RR(n);break;case"select":case"option":break;default:typeof u.onClick=="function"&&(n.onclick=ab)}n=s,t.updateQueue=n,n!==null&&(t.flags|=4)}else{h=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=l$(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=h.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=h.createElement(r,{is:n.is}):(e=h.createElement(r),r==="select"&&(h=e,n.multiple?h.multiple=!0:n.size&&(h.size=n.size))):e=h.createElementNS(e,r),e[rl]=t,e[Ky]=n,kF(e,t,!1,!1),t.stateNode=e;e:{switch(h=CA(r,n),r){case"dialog":In("cancel",e),In("close",e),s=n;break;case"iframe":case"object":case"embed":In("load",e),s=n;break;case"video":case"audio":for(s=0;s<gy.length;s++)In(gy[s],e);s=n;break;case"source":In("error",e),s=n;break;case"img":case"image":case"link":In("error",e),In("load",e),s=n;break;case"details":In("toggle",e),s=n;break;case"input":OR(e,n),s=wA(e,n),In("invalid",e);break;case"option":s=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},s=Kn({},n,{value:void 0}),In("invalid",e);break;case"textarea":DR(e,n),s=TA(e,n),In("invalid",e);break;default:s=n}PA(r,s),m=s;for(u in m)if(m.hasOwnProperty(u)){var o=m[u];u==="style"?d$(e,o):u==="dangerouslySetInnerHTML"?(o=o?o.__html:void 0,o!=null&&c$(e,o)):u==="children"?typeof o=="string"?(r!=="textarea"||o!=="")&&Fy(e,o):typeof o=="number"&&Fy(e,""+o):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&($y.hasOwnProperty(u)?o!=null&&u==="onScroll"&&In("scroll",e):o!=null&&gM(e,u,o,h))}switch(r){case"input":Wx(e),kR(e,n,!1);break;case"textarea":Wx(e),RR(e);break;case"option":n.value!=null&&e.setAttribute("value",""+Eu(n.value));break;case"select":e.multiple=!!n.multiple,u=n.value,u!=null?Gf(e,!!n.multiple,u,!1):n.defaultValue!=null&&Gf(e,!!n.multiple,n.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=ab)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return no(t),null;case 6:if(e&&t.stateNode!=null)RF(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(Dt(166));if(r=Nd(Jy.current),Nd(al.current),e0(t)){if(n=t.stateNode,r=t.memoizedProps,n[rl]=t,(u=n.nodeValue!==r)&&(e=ca,e!==null))switch(e.tag){case 3:Qx(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Qx(n.nodeValue,r,(e.mode&1)!==0)}u&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[rl]=t,t.stateNode=n}return no(t),null;case 13:if(Dn(Hn),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(jn&&la!==null&&t.mode&1&&!(t.flags&128))J$(),yp(),t.flags|=98560,u=!1;else if(u=e0(t),n!==null&&n.dehydrated!==null){if(e===null){if(!u)throw Error(Dt(318));if(u=t.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(Dt(317));u[rl]=t}else yp(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;no(t),u=!1}else Ts!==null&&(lP(Ts),Ts=null),u=!0;if(!u)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||Hn.current&1?wi===0&&(wi=3):JM())),t.updateQueue!==null&&(t.flags|=4),no(t),null);case 4:return _p(),eP(e,t),e===null&&Xy(t.stateNode.containerInfo),no(t),null;case 10:return LM(t.type._context),no(t),null;case 17:return Fo(t.type)&&sb(),no(t),null;case 19:if(Dn(Hn),u=t.memoizedState,u===null)return no(t),null;if(n=(t.flags&128)!==0,h=u.rendering,h===null)if(n)Jg(u,!1);else{if(wi!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(h=pb(e),h!==null){for(t.flags|=128,Jg(u,!1),n=h.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)u=r,e=n,u.flags&=14680066,h=u.alternate,h===null?(u.childLanes=0,u.lanes=e,u.child=null,u.subtreeFlags=0,u.memoizedProps=null,u.memoizedState=null,u.updateQueue=null,u.dependencies=null,u.stateNode=null):(u.childLanes=h.childLanes,u.lanes=h.lanes,u.child=h.child,u.subtreeFlags=0,u.deletions=null,u.memoizedProps=h.memoizedProps,u.memoizedState=h.memoizedState,u.updateQueue=h.updateQueue,u.type=h.type,e=h.dependencies,u.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return Tn(Hn,Hn.current&1|2),t.child}e=e.sibling}u.tail!==null&&ai()>bp&&(t.flags|=128,n=!0,Jg(u,!1),t.lanes=4194304)}else{if(!n)if(e=pb(h),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),Jg(u,!0),u.tail===null&&u.tailMode==="hidden"&&!h.alternate&&!jn)return no(t),null}else 2*ai()-u.renderingStartTime>bp&&r!==1073741824&&(t.flags|=128,n=!0,Jg(u,!1),t.lanes=4194304);u.isBackwards?(h.sibling=t.child,t.child=h):(r=u.last,r!==null?r.sibling=h:t.child=h,u.last=h)}return u.tail!==null?(t=u.tail,u.rendering=t,u.tail=t.sibling,u.renderingStartTime=ai(),t.sibling=null,r=Hn.current,Tn(Hn,n?r&1|2:r&1),t):(no(t),null);case 22:case 23:return YM(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?ta&1073741824&&(no(t),t.subtreeFlags&6&&(t.flags|=8192)):no(t),null;case 24:return null;case 25:return null}throw Error(Dt(156,t.tag))}function $X(e,t){switch(OM(t),t.tag){case 1:return Fo(t.type)&&sb(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return _p(),Dn($o),Dn(lo),$M(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return BM(t),null;case 13:if(Dn(Hn),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Dt(340));yp()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Dn(Hn),null;case 4:return _p(),null;case 10:return LM(t.type._context),null;case 22:case 23:return YM(),null;case 24:return null;default:return null}}var n0=!1,ao=!1,FX=typeof WeakSet=="function"?WeakSet:Set,Zt=null;function Bf(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){ri(e,t,n)}else r.current=null}function tP(e,t,r){try{r()}catch(n){ri(e,t,n)}}var SL=!1;function UX(e,t){if(NA=nb,e=B$(),MM(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var s=n.anchorOffset,u=n.focusNode;n=n.focusOffset;try{r.nodeType,u.nodeType}catch{r=null;break e}var h=0,m=-1,o=-1,_=0,E=0,S=e,A=null;t:for(;;){for(var I;S!==r||s!==0&&S.nodeType!==3||(m=h+s),S!==u||n!==0&&S.nodeType!==3||(o=h+n),S.nodeType===3&&(h+=S.nodeValue.length),(I=S.firstChild)!==null;)A=S,S=I;for(;;){if(S===e)break t;if(A===r&&++_===s&&(m=h),A===u&&++E===n&&(o=h),(I=S.nextSibling)!==null)break;S=A,A=S.parentNode}S=I}r=m===-1||o===-1?null:{start:m,end:o}}else r=null}r=r||{start:0,end:0}}else r=null;for(BA={focusedElem:e,selectionRange:r},nb=!1,Zt=t;Zt!==null;)if(t=Zt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Zt=e;else for(;Zt!==null;){t=Zt;try{var R=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(R!==null){var k=R.memoizedProps,L=R.memoizedState,N=t.stateNode,z=N.getSnapshotBeforeUpdate(t.elementType===t.type?k:xs(t.type,k),L);N.__reactInternalSnapshotBeforeUpdate=z}break;case 3:var F=t.stateNode.containerInfo;F.nodeType===1?F.textContent="":F.nodeType===9&&F.documentElement&&F.removeChild(F.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Dt(163))}}catch(U){ri(t,t.return,U)}if(e=t.sibling,e!==null){e.return=t.return,Zt=e;break}Zt=t.return}return R=SL,SL=!1,R}function My(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&e)===e){var u=s.destroy;s.destroy=void 0,u!==void 0&&tP(t,r,u)}s=s.next}while(s!==n)}}function W1(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function rP(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function LF(e){var t=e.alternate;t!==null&&(e.alternate=null,LF(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[rl],delete t[Ky],delete t[UA],delete t[EX],delete t[TX])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function jF(e){return e.tag===5||e.tag===3||e.tag===4}function EL(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||jF(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function nP(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=ab));else if(n!==4&&(e=e.child,e!==null))for(nP(e,t,r),e=e.sibling;e!==null;)nP(e,t,r),e=e.sibling}function iP(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(iP(e,t,r),e=e.sibling;e!==null;)iP(e,t,r),e=e.sibling}var $i=null,Ss=!1;function Uc(e,t,r){for(r=r.child;r!==null;)zF(e,t,r),r=r.sibling}function zF(e,t,r){if(ol&&typeof ol.onCommitFiberUnmount=="function")try{ol.onCommitFiberUnmount(z1,r)}catch{}switch(r.tag){case 5:ao||Bf(r,t);case 6:var n=$i,s=Ss;$i=null,Uc(e,t,r),$i=n,Ss=s,$i!==null&&(Ss?(e=$i,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):$i.removeChild(r.stateNode));break;case 18:$i!==null&&(Ss?(e=$i,r=r.stateNode,e.nodeType===8?dT(e.parentNode,r):e.nodeType===1&&dT(e,r),Wy(e)):dT($i,r.stateNode));break;case 4:n=$i,s=Ss,$i=r.stateNode.containerInfo,Ss=!0,Uc(e,t,r),$i=n,Ss=s;break;case 0:case 11:case 14:case 15:if(!ao&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){s=n=n.next;do{var u=s,h=u.destroy;u=u.tag,h!==void 0&&(u&2||u&4)&&tP(r,t,h),s=s.next}while(s!==n)}Uc(e,t,r);break;case 1:if(!ao&&(Bf(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(m){ri(r,t,m)}Uc(e,t,r);break;case 21:Uc(e,t,r);break;case 22:r.mode&1?(ao=(n=ao)||r.memoizedState!==null,Uc(e,t,r),ao=n):Uc(e,t,r);break;default:Uc(e,t,r)}}function TL(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new FX),t.forEach(function(n){var s=YX.bind(null,e,n);r.has(n)||(r.add(n),n.then(s,s))})}}function ys(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var s=r[n];try{var u=e,h=t,m=h;e:for(;m!==null;){switch(m.tag){case 5:$i=m.stateNode,Ss=!1;break e;case 3:$i=m.stateNode.containerInfo,Ss=!0;break e;case 4:$i=m.stateNode.containerInfo,Ss=!0;break e}m=m.return}if($i===null)throw Error(Dt(160));zF(u,h,s),$i=null,Ss=!1;var o=s.alternate;o!==null&&(o.return=null),s.return=null}catch(_){ri(s,t,_)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)NF(t,e),t=t.sibling}function NF(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ys(t,e),Xs(e),n&4){try{My(3,e,e.return),W1(3,e)}catch(k){ri(e,e.return,k)}try{My(5,e,e.return)}catch(k){ri(e,e.return,k)}}break;case 1:ys(t,e),Xs(e),n&512&&r!==null&&Bf(r,r.return);break;case 5:if(ys(t,e),Xs(e),n&512&&r!==null&&Bf(r,r.return),e.flags&32){var s=e.stateNode;try{Fy(s,"")}catch(k){ri(e,e.return,k)}}if(n&4&&(s=e.stateNode,s!=null)){var u=e.memoizedProps,h=r!==null?r.memoizedProps:u,m=e.type,o=e.updateQueue;if(e.updateQueue=null,o!==null)try{m==="input"&&u.type==="radio"&&u.name!=null&&a$(s,u),CA(m,h);var _=CA(m,u);for(h=0;h<o.length;h+=2){var E=o[h],S=o[h+1];E==="style"?d$(s,S):E==="dangerouslySetInnerHTML"?c$(s,S):E==="children"?Fy(s,S):gM(s,E,S,_)}switch(m){case"input":SA(s,u);break;case"textarea":s$(s,u);break;case"select":var A=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!u.multiple;var I=u.value;I!=null?Gf(s,!!u.multiple,I,!1):A!==!!u.multiple&&(u.defaultValue!=null?Gf(s,!!u.multiple,u.defaultValue,!0):Gf(s,!!u.multiple,u.multiple?[]:"",!1))}s[Ky]=u}catch(k){ri(e,e.return,k)}}break;case 6:if(ys(t,e),Xs(e),n&4){if(e.stateNode===null)throw Error(Dt(162));s=e.stateNode,u=e.memoizedProps;try{s.nodeValue=u}catch(k){ri(e,e.return,k)}}break;case 3:if(ys(t,e),Xs(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Wy(t.containerInfo)}catch(k){ri(e,e.return,k)}break;case 4:ys(t,e),Xs(e);break;case 13:ys(t,e),Xs(e),s=e.child,s.flags&8192&&(u=s.memoizedState!==null,s.stateNode.isHidden=u,!u||s.alternate!==null&&s.alternate.memoizedState!==null||(ZM=ai())),n&4&&TL(e);break;case 22:if(E=r!==null&&r.memoizedState!==null,e.mode&1?(ao=(_=ao)||E,ys(t,e),ao=_):ys(t,e),Xs(e),n&8192){if(_=e.memoizedState!==null,(e.stateNode.isHidden=_)&&!E&&e.mode&1)for(Zt=e,E=e.child;E!==null;){for(S=Zt=E;Zt!==null;){switch(A=Zt,I=A.child,A.tag){case 0:case 11:case 14:case 15:My(4,A,A.return);break;case 1:Bf(A,A.return);var R=A.stateNode;if(typeof R.componentWillUnmount=="function"){n=A,r=A.return;try{t=n,R.props=t.memoizedProps,R.state=t.memoizedState,R.componentWillUnmount()}catch(k){ri(n,r,k)}}break;case 5:Bf(A,A.return);break;case 22:if(A.memoizedState!==null){PL(S);continue}}I!==null?(I.return=A,Zt=I):PL(S)}E=E.sibling}e:for(E=null,S=e;;){if(S.tag===5){if(E===null){E=S;try{s=S.stateNode,_?(u=s.style,typeof u.setProperty=="function"?u.setProperty("display","none","important"):u.display="none"):(m=S.stateNode,o=S.memoizedProps.style,h=o!=null&&o.hasOwnProperty("display")?o.display:null,m.style.display=u$("display",h))}catch(k){ri(e,e.return,k)}}}else if(S.tag===6){if(E===null)try{S.stateNode.nodeValue=_?"":S.memoizedProps}catch(k){ri(e,e.return,k)}}else if((S.tag!==22&&S.tag!==23||S.memoizedState===null||S===e)&&S.child!==null){S.child.return=S,S=S.child;continue}if(S===e)break e;for(;S.sibling===null;){if(S.return===null||S.return===e)break e;E===S&&(E=null),S=S.return}E===S&&(E=null),S.sibling.return=S.return,S=S.sibling}}break;case 19:ys(t,e),Xs(e),n&4&&TL(e);break;case 21:break;default:ys(t,e),Xs(e)}}function Xs(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(jF(r)){var n=r;break e}r=r.return}throw Error(Dt(160))}switch(n.tag){case 5:var s=n.stateNode;n.flags&32&&(Fy(s,""),n.flags&=-33);var u=EL(e);iP(e,u,s);break;case 3:case 4:var h=n.stateNode.containerInfo,m=EL(e);nP(e,m,h);break;default:throw Error(Dt(161))}}catch(o){ri(e,e.return,o)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function VX(e,t,r){Zt=e,BF(e)}function BF(e,t,r){for(var n=(e.mode&1)!==0;Zt!==null;){var s=Zt,u=s.child;if(s.tag===22&&n){var h=s.memoizedState!==null||n0;if(!h){var m=s.alternate,o=m!==null&&m.memoizedState!==null||ao;m=n0;var _=ao;if(n0=h,(ao=o)&&!_)for(Zt=s;Zt!==null;)h=Zt,o=h.child,h.tag===22&&h.memoizedState!==null?CL(s):o!==null?(o.return=h,Zt=o):CL(s);for(;u!==null;)Zt=u,BF(u),u=u.sibling;Zt=s,n0=m,ao=_}AL(e)}else s.subtreeFlags&8772&&u!==null?(u.return=s,Zt=u):AL(e)}}function AL(e){for(;Zt!==null;){var t=Zt;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:ao||W1(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!ao)if(r===null)n.componentDidMount();else{var s=t.elementType===t.type?r.memoizedProps:xs(t.type,r.memoizedProps);n.componentDidUpdate(s,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var u=t.updateQueue;u!==null&&uL(t,u,n);break;case 3:var h=t.updateQueue;if(h!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}uL(t,h,r)}break;case 5:var m=t.stateNode;if(r===null&&t.flags&4){r=m;var o=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":o.autoFocus&&r.focus();break;case"img":o.src&&(r.src=o.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var _=t.alternate;if(_!==null){var E=_.memoizedState;if(E!==null){var S=E.dehydrated;S!==null&&Wy(S)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Dt(163))}ao||t.flags&512&&rP(t)}catch(A){ri(t,t.return,A)}}if(t===e){Zt=null;break}if(r=t.sibling,r!==null){r.return=t.return,Zt=r;break}Zt=t.return}}function PL(e){for(;Zt!==null;){var t=Zt;if(t===e){Zt=null;break}var r=t.sibling;if(r!==null){r.return=t.return,Zt=r;break}Zt=t.return}}function CL(e){for(;Zt!==null;){var t=Zt;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{W1(4,t)}catch(o){ri(t,r,o)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var s=t.return;try{n.componentDidMount()}catch(o){ri(t,s,o)}}var u=t.return;try{rP(t)}catch(o){ri(t,u,o)}break;case 5:var h=t.return;try{rP(t)}catch(o){ri(t,h,o)}}}catch(o){ri(t,t.return,o)}if(t===e){Zt=null;break}var m=t.sibling;if(m!==null){m.return=t.return,Zt=m;break}Zt=t.return}}var GX=Math.ceil,yb=lc.ReactCurrentDispatcher,HM=lc.ReactCurrentOwner,Na=lc.ReactCurrentBatchConfig,$r=0,Li=null,mi=null,Vi=0,ta=0,$f=Du(0),wi=0,rv=null,nh=0,q1=0,XM=0,Iy=null,jo=null,ZM=0,bp=1/0,zl=null,vb=!1,oP=null,gu=null,i0=!1,su=null,_b=0,Oy=0,aP=null,$0=-1,F0=0;function vo(){return $r&6?ai():$0!==-1?$0:$0=ai()}function yu(e){return e.mode&1?$r&2&&Vi!==0?Vi&-Vi:PX.transition!==null?(F0===0&&(F0=S$()),F0):(e=un,e!==0||(e=window.event,e=e===void 0?16:I$(e.type)),e):1}function Ms(e,t,r,n){if(50<Oy)throw Oy=0,aP=null,Error(Dt(185));Xv(e,r,n),(!($r&2)||e!==Li)&&(e===Li&&(!($r&2)&&(q1|=r),wi===4&&Jc(e,Vi)),Uo(e,n),r===1&&$r===0&&!(t.mode&1)&&(bp=ai()+500,U1&&Ru()))}function Uo(e,t){var r=e.callbackNode;P7(e,t);var n=rb(e,e===Li?Vi:0);if(n===0)r!==null&&zR(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&zR(r),t===1)e.tag===0?AX(ML.bind(null,e)):Z$(ML.bind(null,e)),wX(function(){!($r&6)&&Ru()}),r=null;else{switch(E$(n)){case 1:r=bM;break;case 4:r=b$;break;case 16:r=tb;break;case 536870912:r=w$;break;default:r=tb}r=HF(r,$F.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function $F(e,t){if($0=-1,F0=0,$r&6)throw Error(Dt(327));var r=e.callbackNode;if(Zf()&&e.callbackNode!==r)return null;var n=rb(e,e===Li?Vi:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=xb(e,n);else{t=n;var s=$r;$r|=2;var u=UF();(Li!==e||Vi!==t)&&(zl=null,bp=ai()+500,Xd(e,t));do try{HX();break}catch(m){FF(e,m)}while(!0);RM(),yb.current=u,$r=s,mi!==null?t=0:(Li=null,Vi=0,t=wi)}if(t!==0){if(t===2&&(s=DA(e),s!==0&&(n=s,t=sP(e,s))),t===1)throw r=rv,Xd(e,0),Jc(e,n),Uo(e,ai()),r;if(t===6)Jc(e,n);else{if(s=e.current.alternate,!(n&30)&&!WX(s)&&(t=xb(e,n),t===2&&(u=DA(e),u!==0&&(n=u,t=sP(e,u))),t===1))throw r=rv,Xd(e,0),Jc(e,n),Uo(e,ai()),r;switch(e.finishedWork=s,e.finishedLanes=n,t){case 0:case 1:throw Error(Dt(345));case 2:kd(e,jo,zl);break;case 3:if(Jc(e,n),(n&130023424)===n&&(t=ZM+500-ai(),10<t)){if(rb(e,0)!==0)break;if(s=e.suspendedLanes,(s&n)!==n){vo(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=FA(kd.bind(null,e,jo,zl),t);break}kd(e,jo,zl);break;case 4:if(Jc(e,n),(n&4194240)===n)break;for(t=e.eventTimes,s=-1;0<n;){var h=31-Cs(n);u=1<<h,h=t[h],h>s&&(s=h),n&=~u}if(n=s,n=ai()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*GX(n/1960))-n,10<n){e.timeoutHandle=FA(kd.bind(null,e,jo,zl),n);break}kd(e,jo,zl);break;case 5:kd(e,jo,zl);break;default:throw Error(Dt(329))}}}return Uo(e,ai()),e.callbackNode===r?$F.bind(null,e):null}function sP(e,t){var r=Iy;return e.current.memoizedState.isDehydrated&&(Xd(e,t).flags|=256),e=xb(e,t),e!==2&&(t=jo,jo=r,t!==null&&lP(t)),e}function lP(e){jo===null?jo=e:jo.push.apply(jo,e)}function WX(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var s=r[n],u=s.getSnapshot;s=s.value;try{if(!ks(u(),s))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Jc(e,t){for(t&=~XM,t&=~q1,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-Cs(t),n=1<<r;e[r]=-1,t&=~n}}function ML(e){if($r&6)throw Error(Dt(327));Zf();var t=rb(e,0);if(!(t&1))return Uo(e,ai()),null;var r=xb(e,t);if(e.tag!==0&&r===2){var n=DA(e);n!==0&&(t=n,r=sP(e,n))}if(r===1)throw r=rv,Xd(e,0),Jc(e,t),Uo(e,ai()),r;if(r===6)throw Error(Dt(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,kd(e,jo,zl),Uo(e,ai()),null}function KM(e,t){var r=$r;$r|=1;try{return e(t)}finally{$r=r,$r===0&&(bp=ai()+500,U1&&Ru())}}function ih(e){su!==null&&su.tag===0&&!($r&6)&&Zf();var t=$r;$r|=1;var r=Na.transition,n=un;try{if(Na.transition=null,un=1,e)return e()}finally{un=n,Na.transition=r,$r=t,!($r&6)&&Ru()}}function YM(){ta=$f.current,Dn($f)}function Xd(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,bX(r)),mi!==null)for(r=mi.return;r!==null;){var n=r;switch(OM(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&sb();break;case 3:_p(),Dn($o),Dn(lo),$M();break;case 5:BM(n);break;case 4:_p();break;case 13:Dn(Hn);break;case 19:Dn(Hn);break;case 10:LM(n.type._context);break;case 22:case 23:YM()}r=r.return}if(Li=e,mi=e=vu(e.current,null),Vi=ta=t,wi=0,rv=null,XM=q1=nh=0,jo=Iy=null,zd!==null){for(t=0;t<zd.length;t++)if(r=zd[t],n=r.interleaved,n!==null){r.interleaved=null;var s=n.next,u=r.pending;if(u!==null){var h=u.next;u.next=s,n.next=h}r.pending=n}zd=null}return e}function FF(e,t){do{var r=mi;try{if(RM(),z0.current=gb,mb){for(var n=Zn.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}mb=!1}if(rh=0,Di=bi=Zn=null,Cy=!1,Qy=0,HM.current=null,r===null||r.return===null){wi=1,rv=t,mi=null;break}e:{var u=e,h=r.return,m=r,o=t;if(t=Vi,m.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){var _=o,E=m,S=E.tag;if(!(E.mode&1)&&(S===0||S===11||S===15)){var A=E.alternate;A?(E.updateQueue=A.updateQueue,E.memoizedState=A.memoizedState,E.lanes=A.lanes):(E.updateQueue=null,E.memoizedState=null)}var I=gL(h);if(I!==null){I.flags&=-257,yL(I,h,m,u,t),I.mode&1&&mL(u,_,t),t=I,o=_;var R=t.updateQueue;if(R===null){var k=new Set;k.add(o),t.updateQueue=k}else R.add(o);break e}else{if(!(t&1)){mL(u,_,t),JM();break e}o=Error(Dt(426))}}else if(jn&&m.mode&1){var L=gL(h);if(L!==null){!(L.flags&65536)&&(L.flags|=256),yL(L,h,m,u,t),kM(xp(o,m));break e}}u=o=xp(o,m),wi!==4&&(wi=2),Iy===null?Iy=[u]:Iy.push(u),u=h;do{switch(u.tag){case 3:u.flags|=65536,t&=-t,u.lanes|=t;var N=EF(u,o,t);cL(u,N);break e;case 1:m=o;var z=u.type,F=u.stateNode;if(!(u.flags&128)&&(typeof z.getDerivedStateFromError=="function"||F!==null&&typeof F.componentDidCatch=="function"&&(gu===null||!gu.has(F)))){u.flags|=65536,t&=-t,u.lanes|=t;var U=TF(u,m,t);cL(u,U);break e}}u=u.return}while(u!==null)}GF(r)}catch(W){t=W,mi===r&&r!==null&&(mi=r=r.return);continue}break}while(!0)}function UF(){var e=yb.current;return yb.current=gb,e===null?gb:e}function JM(){(wi===0||wi===3||wi===2)&&(wi=4),Li===null||!(nh&268435455)&&!(q1&268435455)||Jc(Li,Vi)}function xb(e,t){var r=$r;$r|=2;var n=UF();(Li!==e||Vi!==t)&&(zl=null,Xd(e,t));do try{qX();break}catch(s){FF(e,s)}while(!0);if(RM(),$r=r,yb.current=n,mi!==null)throw Error(Dt(261));return Li=null,Vi=0,wi}function qX(){for(;mi!==null;)VF(mi)}function HX(){for(;mi!==null&&!v7();)VF(mi)}function VF(e){var t=qF(e.alternate,e,ta);e.memoizedProps=e.pendingProps,t===null?GF(e):mi=t,HM.current=null}function GF(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=$X(r,t),r!==null){r.flags&=32767,mi=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{wi=6,mi=null;return}}else if(r=BX(r,t,ta),r!==null){mi=r;return}if(t=t.sibling,t!==null){mi=t;return}mi=t=e}while(t!==null);wi===0&&(wi=5)}function kd(e,t,r){var n=un,s=Na.transition;try{Na.transition=null,un=1,XX(e,t,r,n)}finally{Na.transition=s,un=n}return null}function XX(e,t,r,n){do Zf();while(su!==null);if($r&6)throw Error(Dt(327));r=e.finishedWork;var s=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(Dt(177));e.callbackNode=null,e.callbackPriority=0;var u=r.lanes|r.childLanes;if(C7(e,u),e===Li&&(mi=Li=null,Vi=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||i0||(i0=!0,HF(tb,function(){return Zf(),null})),u=(r.flags&15990)!==0,r.subtreeFlags&15990||u){u=Na.transition,Na.transition=null;var h=un;un=1;var m=$r;$r|=4,HM.current=null,UX(e,r),NF(r,e),pX(BA),nb=!!NA,BA=NA=null,e.current=r,VX(r),_7(),$r=m,un=h,Na.transition=u}else e.current=r;if(i0&&(i0=!1,su=e,_b=s),u=e.pendingLanes,u===0&&(gu=null),w7(r.stateNode),Uo(e,ai()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)s=t[r],n(s.value,{componentStack:s.stack,digest:s.digest});if(vb)throw vb=!1,e=oP,oP=null,e;return _b&1&&e.tag!==0&&Zf(),u=e.pendingLanes,u&1?e===aP?Oy++:(Oy=0,aP=e):Oy=0,Ru(),null}function Zf(){if(su!==null){var e=E$(_b),t=Na.transition,r=un;try{if(Na.transition=null,un=16>e?16:e,su===null)var n=!1;else{if(e=su,su=null,_b=0,$r&6)throw Error(Dt(331));var s=$r;for($r|=4,Zt=e.current;Zt!==null;){var u=Zt,h=u.child;if(Zt.flags&16){var m=u.deletions;if(m!==null){for(var o=0;o<m.length;o++){var _=m[o];for(Zt=_;Zt!==null;){var E=Zt;switch(E.tag){case 0:case 11:case 15:My(8,E,u)}var S=E.child;if(S!==null)S.return=E,Zt=S;else for(;Zt!==null;){E=Zt;var A=E.sibling,I=E.return;if(LF(E),E===_){Zt=null;break}if(A!==null){A.return=I,Zt=A;break}Zt=I}}}var R=u.alternate;if(R!==null){var k=R.child;if(k!==null){R.child=null;do{var L=k.sibling;k.sibling=null,k=L}while(k!==null)}}Zt=u}}if(u.subtreeFlags&2064&&h!==null)h.return=u,Zt=h;else e:for(;Zt!==null;){if(u=Zt,u.flags&2048)switch(u.tag){case 0:case 11:case 15:My(9,u,u.return)}var N=u.sibling;if(N!==null){N.return=u.return,Zt=N;break e}Zt=u.return}}var z=e.current;for(Zt=z;Zt!==null;){h=Zt;var F=h.child;if(h.subtreeFlags&2064&&F!==null)F.return=h,Zt=F;else e:for(h=z;Zt!==null;){if(m=Zt,m.flags&2048)try{switch(m.tag){case 0:case 11:case 15:W1(9,m)}}catch(W){ri(m,m.return,W)}if(m===h){Zt=null;break e}var U=m.sibling;if(U!==null){U.return=m.return,Zt=U;break e}Zt=m.return}}if($r=s,Ru(),ol&&typeof ol.onPostCommitFiberRoot=="function")try{ol.onPostCommitFiberRoot(z1,e)}catch{}n=!0}return n}finally{un=r,Na.transition=t}}return!1}function IL(e,t,r){t=xp(r,t),t=EF(e,t,1),e=mu(e,t,1),t=vo(),e!==null&&(Xv(e,1,t),Uo(e,t))}function ri(e,t,r){if(e.tag===3)IL(e,e,r);else for(;t!==null;){if(t.tag===3){IL(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(gu===null||!gu.has(n))){e=xp(r,e),e=TF(t,e,1),t=mu(t,e,1),e=vo(),t!==null&&(Xv(t,1,e),Uo(t,e));break}}t=t.return}}function ZX(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=vo(),e.pingedLanes|=e.suspendedLanes&r,Li===e&&(Vi&r)===r&&(wi===4||wi===3&&(Vi&130023424)===Vi&&500>ai()-ZM?Xd(e,0):XM|=r),Uo(e,t)}function WF(e,t){t===0&&(e.mode&1?(t=Xx,Xx<<=1,!(Xx&130023424)&&(Xx=4194304)):t=1);var r=vo();e=ec(e,t),e!==null&&(Xv(e,t,r),Uo(e,r))}function KX(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),WF(e,r)}function YX(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,s=e.memoizedState;s!==null&&(r=s.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(Dt(314))}n!==null&&n.delete(t),WF(e,r)}var qF;qF=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||$o.current)No=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return No=!1,NX(e,t,r);No=!!(e.flags&131072)}else No=!1,jn&&t.flags&1048576&&K$(t,ub,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;B0(e,t),e=t.pendingProps;var s=gp(t,lo.current);Xf(t,r),s=UM(null,t,n,e,s,r);var u=VM();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Fo(n)?(u=!0,lb(t)):u=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,zM(t),s.updater=G1,t.stateNode=s,s._reactInternals=t,XA(t,n,e,r),t=YA(null,t,n,!0,u,r)):(t.tag=0,jn&&u&&IM(t),mo(null,t,s,r),t=t.child),t;case 16:n=t.elementType;e:{switch(B0(e,t),e=t.pendingProps,s=n._init,n=s(n._payload),t.type=n,s=t.tag=QX(n),e=xs(n,e),s){case 0:t=KA(null,t,n,e,r);break e;case 1:t=xL(null,t,n,e,r);break e;case 11:t=vL(null,t,n,e,r);break e;case 14:t=_L(null,t,n,xs(n.type,e),r);break e}throw Error(Dt(306,n,""))}return t;case 0:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:xs(n,s),KA(e,t,n,s,r);case 1:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:xs(n,s),xL(e,t,n,s,r);case 3:e:{if(MF(t),e===null)throw Error(Dt(387));n=t.pendingProps,u=t.memoizedState,s=u.element,rF(e,t),fb(t,n,null,r);var h=t.memoizedState;if(n=h.element,u.isDehydrated)if(u={element:n,isDehydrated:!1,cache:h.cache,pendingSuspenseBoundaries:h.pendingSuspenseBoundaries,transitions:h.transitions},t.updateQueue.baseState=u,t.memoizedState=u,t.flags&256){s=xp(Error(Dt(423)),t),t=bL(e,t,n,r,s);break e}else if(n!==s){s=xp(Error(Dt(424)),t),t=bL(e,t,n,r,s);break e}else for(la=pu(t.stateNode.containerInfo.firstChild),ca=t,jn=!0,Ts=null,r=eF(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(yp(),n===s){t=tc(e,t,r);break e}mo(e,t,n,r)}t=t.child}return t;case 5:return nF(t),e===null&&WA(t),n=t.type,s=t.pendingProps,u=e!==null?e.memoizedProps:null,h=s.children,$A(n,s)?h=null:u!==null&&$A(n,u)&&(t.flags|=32),CF(e,t),mo(e,t,h,r),t.child;case 6:return e===null&&WA(t),null;case 13:return IF(e,t,r);case 4:return NM(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=vp(t,null,n,r):mo(e,t,n,r),t.child;case 11:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:xs(n,s),vL(e,t,n,s,r);case 7:return mo(e,t,t.pendingProps,r),t.child;case 8:return mo(e,t,t.pendingProps.children,r),t.child;case 12:return mo(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,s=t.pendingProps,u=t.memoizedProps,h=s.value,Tn(db,n._currentValue),n._currentValue=h,u!==null)if(ks(u.value,h)){if(u.children===s.children&&!$o.current){t=tc(e,t,r);break e}}else for(u=t.child,u!==null&&(u.return=t);u!==null;){var m=u.dependencies;if(m!==null){h=u.child;for(var o=m.firstContext;o!==null;){if(o.context===n){if(u.tag===1){o=Wl(-1,r&-r),o.tag=2;var _=u.updateQueue;if(_!==null){_=_.shared;var E=_.pending;E===null?o.next=o:(o.next=E.next,E.next=o),_.pending=o}}u.lanes|=r,o=u.alternate,o!==null&&(o.lanes|=r),qA(u.return,r,t),m.lanes|=r;break}o=o.next}}else if(u.tag===10)h=u.type===t.type?null:u.child;else if(u.tag===18){if(h=u.return,h===null)throw Error(Dt(341));h.lanes|=r,m=h.alternate,m!==null&&(m.lanes|=r),qA(h,r,t),h=u.sibling}else h=u.child;if(h!==null)h.return=u;else for(h=u;h!==null;){if(h===t){h=null;break}if(u=h.sibling,u!==null){u.return=h.return,h=u;break}h=h.return}u=h}mo(e,t,s.children,r),t=t.child}return t;case 9:return s=t.type,n=t.pendingProps.children,Xf(t,r),s=Ua(s),n=n(s),t.flags|=1,mo(e,t,n,r),t.child;case 14:return n=t.type,s=xs(n,t.pendingProps),s=xs(n.type,s),_L(e,t,n,s,r);case 15:return AF(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:xs(n,s),B0(e,t),t.tag=1,Fo(n)?(e=!0,lb(t)):e=!1,Xf(t,r),SF(t,n,s),XA(t,n,s,r),YA(null,t,n,!0,e,r);case 19:return OF(e,t,r);case 22:return PF(e,t,r)}throw Error(Dt(156,t.tag))};function HF(e,t){return x$(e,t)}function JX(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ja(e,t,r,n){return new JX(e,t,r,n)}function QM(e){return e=e.prototype,!(!e||!e.isReactComponent)}function QX(e){if(typeof e=="function")return QM(e)?1:0;if(e!=null){if(e=e.$$typeof,e===vM)return 11;if(e===_M)return 14}return 2}function vu(e,t){var r=e.alternate;return r===null?(r=ja(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function U0(e,t,r,n,s,u){var h=2;if(n=e,typeof e=="function")QM(e)&&(h=1);else if(typeof e=="string")h=5;else e:switch(e){case If:return Zd(r.children,s,u,t);case yM:h=8,s|=8;break;case vA:return e=ja(12,r,t,s|2),e.elementType=vA,e.lanes=u,e;case _A:return e=ja(13,r,t,s),e.elementType=_A,e.lanes=u,e;case xA:return e=ja(19,r,t,s),e.elementType=xA,e.lanes=u,e;case n$:return H1(r,s,u,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case t$:h=10;break e;case r$:h=9;break e;case vM:h=11;break e;case _M:h=14;break e;case Xc:h=16,n=null;break e}throw Error(Dt(130,e==null?e:typeof e,""))}return t=ja(h,r,t,s),t.elementType=e,t.type=n,t.lanes=u,t}function Zd(e,t,r,n){return e=ja(7,e,n,t),e.lanes=r,e}function H1(e,t,r,n){return e=ja(22,e,n,t),e.elementType=n$,e.lanes=r,e.stateNode={isHidden:!1},e}function _T(e,t,r){return e=ja(6,e,null,t),e.lanes=r,e}function xT(e,t,r){return t=ja(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function eZ(e,t,r,n,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=eT(0),this.expirationTimes=eT(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=eT(0),this.identifierPrefix=n,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function eI(e,t,r,n,s,u,h,m,o){return e=new eZ(e,t,r,m,o),t===1?(t=1,u===!0&&(t|=8)):t=0,u=ja(3,null,null,t),e.current=u,u.stateNode=e,u.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},zM(u),e}function tZ(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Mf,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function XF(e){if(!e)return Tu;e=e._reactInternals;e:{if(ph(e)!==e||e.tag!==1)throw Error(Dt(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Fo(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Dt(171))}if(e.tag===1){var r=e.type;if(Fo(r))return X$(e,r,t)}return t}function ZF(e,t,r,n,s,u,h,m,o){return e=eI(r,n,!0,e,s,u,h,m,o),e.context=XF(null),r=e.current,n=vo(),s=yu(r),u=Wl(n,s),u.callback=t??null,mu(r,u,s),e.current.lanes=s,Xv(e,s,n),Uo(e,n),e}function X1(e,t,r,n){var s=t.current,u=vo(),h=yu(s);return r=XF(r),t.context===null?t.context=r:t.pendingContext=r,t=Wl(u,h),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=mu(s,t,h),e!==null&&(Ms(e,s,h,u),j0(e,s,h)),h}function bb(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function OL(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function tI(e,t){OL(e,t),(e=e.alternate)&&OL(e,t)}function rZ(){return null}var KF=typeof reportError=="function"?reportError:function(e){console.error(e)};function rI(e){this._internalRoot=e}Z1.prototype.render=rI.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Dt(409));X1(e,t,null,null)};Z1.prototype.unmount=rI.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;ih(function(){X1(null,e,null,null)}),t[Ql]=null}};function Z1(e){this._internalRoot=e}Z1.prototype.unstable_scheduleHydration=function(e){if(e){var t=P$();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Yc.length&&t!==0&&t<Yc[r].priority;r++);Yc.splice(r,0,e),r===0&&M$(e)}};function nI(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function K1(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function kL(){}function nZ(e,t,r,n,s){if(s){if(typeof n=="function"){var u=n;n=function(){var _=bb(h);u.call(_)}}var h=ZF(t,n,e,0,null,!1,!1,"",kL);return e._reactRootContainer=h,e[Ql]=h.current,Xy(e.nodeType===8?e.parentNode:e),ih(),h}for(;s=e.lastChild;)e.removeChild(s);if(typeof n=="function"){var m=n;n=function(){var _=bb(o);m.call(_)}}var o=eI(e,0,!1,null,null,!1,!1,"",kL);return e._reactRootContainer=o,e[Ql]=o.current,Xy(e.nodeType===8?e.parentNode:e),ih(function(){X1(t,o,r,n)}),o}function Y1(e,t,r,n,s){var u=r._reactRootContainer;if(u){var h=u;if(typeof s=="function"){var m=s;s=function(){var o=bb(h);m.call(o)}}X1(t,h,e,s)}else h=nZ(r,t,e,s,n);return bb(h)}T$=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=my(t.pendingLanes);r!==0&&(wM(t,r|1),Uo(t,ai()),!($r&6)&&(bp=ai()+500,Ru()))}break;case 13:ih(function(){var n=ec(e,1);if(n!==null){var s=vo();Ms(n,e,1,s)}}),tI(e,1)}};SM=function(e){if(e.tag===13){var t=ec(e,134217728);if(t!==null){var r=vo();Ms(t,e,134217728,r)}tI(e,134217728)}};A$=function(e){if(e.tag===13){var t=yu(e),r=ec(e,t);if(r!==null){var n=vo();Ms(r,e,t,n)}tI(e,t)}};P$=function(){return un};C$=function(e,t){var r=un;try{return un=e,t()}finally{un=r}};IA=function(e,t,r){switch(t){case"input":if(SA(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var s=F1(n);if(!s)throw Error(Dt(90));o$(n),SA(n,s)}}}break;case"textarea":s$(e,r);break;case"select":t=r.value,t!=null&&Gf(e,!!r.multiple,t,!1)}};p$=KM;m$=ih;var iZ={usingClientEntryPoint:!1,Events:[Kv,Rf,F1,h$,f$,KM]},Qg={findFiberByHostInstance:jd,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},oZ={bundleType:Qg.bundleType,version:Qg.version,rendererPackageName:Qg.rendererPackageName,rendererConfig:Qg.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:lc.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=v$(e),e===null?null:e.stateNode},findFiberByHostInstance:Qg.findFiberByHostInstance||rZ,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var o0=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!o0.isDisabled&&o0.supportsFiber)try{z1=o0.inject(oZ),ol=o0}catch{}}pa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=iZ;pa.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!nI(t))throw Error(Dt(200));return tZ(e,t,null,r)};pa.createRoot=function(e,t){if(!nI(e))throw Error(Dt(299));var r=!1,n="",s=KF;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=eI(e,1,!1,null,null,r,!1,n,s),e[Ql]=t.current,Xy(e.nodeType===8?e.parentNode:e),new rI(t)};pa.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Dt(188)):(e=Object.keys(e).join(","),Error(Dt(268,e)));return e=v$(t),e=e===null?null:e.stateNode,e};pa.flushSync=function(e){return ih(e)};pa.hydrate=function(e,t,r){if(!K1(t))throw Error(Dt(200));return Y1(null,e,t,!0,r)};pa.hydrateRoot=function(e,t,r){if(!nI(e))throw Error(Dt(405));var n=r!=null&&r.hydratedSources||null,s=!1,u="",h=KF;if(r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(u=r.identifierPrefix),r.onRecoverableError!==void 0&&(h=r.onRecoverableError)),t=ZF(t,null,e,1,r??null,s,!1,u,h),e[Ql]=t.current,Xy(e),n)for(e=0;e<n.length;e++)r=n[e],s=r._getVersion,s=s(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,s]:t.mutableSourceEagerHydrationData.push(r,s);return new Z1(t)};pa.render=function(e,t,r){if(!K1(t))throw Error(Dt(200));return Y1(null,e,t,!1,r)};pa.unmountComponentAtNode=function(e){if(!K1(e))throw Error(Dt(40));return e._reactRootContainer?(ih(function(){Y1(null,null,e,!1,function(){e._reactRootContainer=null,e[Ql]=null})}),!0):!1};pa.unstable_batchedUpdates=KM;pa.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!K1(r))throw Error(Dt(200));if(e==null||e._reactInternals===void 0)throw Error(Dt(38));return Y1(e,t,r,!1,n)};pa.version="18.3.1-next-f1338f8080-20240426";function YF(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(YF)}catch(e){console.error(e)}}YF(),YB.exports=pa;var mh=YB.exports;const JF=sn(mh);var QF,DL=mh;QF=DL.createRoot,DL.hydrateRoot;const aZ=1,sZ=1e6;let bT=0;function lZ(){return bT=(bT+1)%Number.MAX_SAFE_INTEGER,bT.toString()}const wT=new Map,RL=e=>{if(wT.has(e))return;const t=setTimeout(()=>{wT.delete(e),ky({type:"REMOVE_TOAST",toastId:e})},sZ);wT.set(e,t)},cZ=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,aZ)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(r=>r.id===t.toast.id?{...r,...t.toast}:r)};case"DISMISS_TOAST":{const{toastId:r}=t;return r?RL(r):e.toasts.forEach(n=>{RL(n.id)}),{...e,toasts:e.toasts.map(n=>n.id===r||r===void 0?{...n,open:!1}:n)}}case"REMOVE_TOAST":return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(r=>r.id!==t.toastId)}}},V0=[];let G0={toasts:[]};function ky(e){G0=cZ(G0,e),V0.forEach(t=>{t(G0)})}function uZ({...e}){const t=lZ(),r=s=>ky({type:"UPDATE_TOAST",toast:{...s,id:t}}),n=()=>ky({type:"DISMISS_TOAST",toastId:t});return ky({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:s=>{s||n()}}}),{id:t,dismiss:n,update:r}}function dZ(){const[e,t]=V.useState(G0);return V.useEffect(()=>(V0.push(t),()=>{const r=V0.indexOf(t);r>-1&&V0.splice(r,1)}),[e]),{...e,toast:uZ,dismiss:r=>ky({type:"DISMISS_TOAST",toastId:r})}}function rr(e,t,{checkForDefaultPrevented:r=!0}={}){return function(s){if(e==null||e(s),r===!1||!s.defaultPrevented)return t==null?void 0:t(s)}}function hZ(e,t){typeof e=="function"?e(t):e!=null&&(e.current=t)}function e4(...e){return t=>e.forEach(r=>hZ(r,t))}function Ur(...e){return V.useCallback(e4(...e),e)}function fZ(e,t=[]){let r=[];function n(u,h){const m=V.createContext(h),o=r.length;r=[...r,h];function _(S){const{scope:A,children:I,...R}=S,k=(A==null?void 0:A[e][o])||m,L=V.useMemo(()=>R,Object.values(R));return M.jsx(k.Provider,{value:L,children:I})}function E(S,A){const I=(A==null?void 0:A[e][o])||m,R=V.useContext(I);if(R)return R;if(h!==void 0)return h;throw new Error(`\`${S}\` must be used within \`${u}\``)}return _.displayName=u+"Provider",[_,E]}const s=()=>{const u=r.map(h=>V.createContext(h));return function(m){const o=(m==null?void 0:m[e])||u;return V.useMemo(()=>({[`__scope${e}`]:{...m,[e]:o}}),[m,o])}};return s.scopeName=e,[n,pZ(s,...t)]}function pZ(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const n=e.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(u){const h=n.reduce((m,{useScope:o,scopeName:_})=>{const S=o(u)[`__scope${_}`];return{...m,...S}},{});return V.useMemo(()=>({[`__scope${t.scopeName}`]:h}),[h])}};return r.scopeName=t.scopeName,r}var Ga=V.forwardRef((e,t)=>{const{children:r,...n}=e,s=V.Children.toArray(r),u=s.find(mZ);if(u){const h=u.props.children,m=s.map(o=>o===u?V.Children.count(h)>1?V.Children.only(null):V.isValidElement(h)?h.props.children:null:o);return M.jsx(cP,{...n,ref:t,children:V.isValidElement(h)?V.cloneElement(h,void 0,m):null})}return M.jsx(cP,{...n,ref:t,children:r})});Ga.displayName="Slot";var cP=V.forwardRef((e,t)=>{const{children:r,...n}=e;if(V.isValidElement(r)){const s=yZ(r);return V.cloneElement(r,{...gZ(n,r.props),ref:t?e4(t,s):s})}return V.Children.count(r)>1?V.Children.only(null):null});cP.displayName="SlotClone";var t4=({children:e})=>M.jsx(M.Fragment,{children:e});function mZ(e){return V.isValidElement(e)&&e.type===t4}function gZ(e,t){const r={...t};for(const n in t){const s=e[n],u=t[n];/^on[A-Z]/.test(n)?s&&u?r[n]=(...m)=>{u(...m),s(...m)}:s&&(r[n]=s):n==="style"?r[n]={...s,...u}:n==="className"&&(r[n]=[s,u].filter(Boolean).join(" "))}return{...e,...r}}function yZ(e){var n,s;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(s=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:s.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}function iI(e){const t=e+"CollectionProvider",[r,n]=fZ(t),[s,u]=r(t,{collectionRef:{current:null},itemMap:new Map}),h=I=>{const{scope:R,children:k}=I,L=be.useRef(null),N=be.useRef(new Map).current;return M.jsx(s,{scope:R,itemMap:N,collectionRef:L,children:k})};h.displayName=t;const m=e+"CollectionSlot",o=be.forwardRef((I,R)=>{const{scope:k,children:L}=I,N=u(m,k),z=Ur(R,N.collectionRef);return M.jsx(Ga,{ref:z,children:L})});o.displayName=m;const _=e+"CollectionItemSlot",E="data-radix-collection-item",S=be.forwardRef((I,R)=>{const{scope:k,children:L,...N}=I,z=be.useRef(null),F=Ur(R,z),U=u(_,k);return be.useEffect(()=>(U.itemMap.set(z,{ref:z,...N}),()=>void U.itemMap.delete(z))),M.jsx(Ga,{[E]:"",ref:F,children:L})});S.displayName=_;function A(I){const R=u(e+"CollectionConsumer",I);return be.useCallback(()=>{const L=R.collectionRef.current;if(!L)return[];const N=Array.from(L.querySelectorAll(`[${E}]`));return Array.from(R.itemMap.values()).sort((U,W)=>N.indexOf(U.ref.current)-N.indexOf(W.ref.current))},[R.collectionRef,R.itemMap])}return[{Provider:h,Slot:o,ItemSlot:S},A,n]}function vZ(e,t){const r=V.createContext(t),n=u=>{const{children:h,...m}=u,o=V.useMemo(()=>m,Object.values(m));return M.jsx(r.Provider,{value:o,children:h})};n.displayName=e+"Provider";function s(u){const h=V.useContext(r);if(h)return h;if(t!==void 0)return t;throw new Error(`\`${u}\` must be used within \`${e}\``)}return[n,s]}function gh(e,t=[]){let r=[];function n(u,h){const m=V.createContext(h),o=r.length;r=[...r,h];const _=S=>{var N;const{scope:A,children:I,...R}=S,k=((N=A==null?void 0:A[e])==null?void 0:N[o])||m,L=V.useMemo(()=>R,Object.values(R));return M.jsx(k.Provider,{value:L,children:I})};_.displayName=u+"Provider";function E(S,A){var k;const I=((k=A==null?void 0:A[e])==null?void 0:k[o])||m,R=V.useContext(I);if(R)return R;if(h!==void 0)return h;throw new Error(`\`${S}\` must be used within \`${u}\``)}return[_,E]}const s=()=>{const u=r.map(h=>V.createContext(h));return function(m){const o=(m==null?void 0:m[e])||u;return V.useMemo(()=>({[`__scope${e}`]:{...m,[e]:o}}),[m,o])}};return s.scopeName=e,[n,_Z(s,...t)]}function _Z(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const n=e.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(u){const h=n.reduce((m,{useScope:o,scopeName:_})=>{const S=o(u)[`__scope${_}`];return{...m,...S}},{});return V.useMemo(()=>({[`__scope${t.scopeName}`]:h}),[h])}};return r.scopeName=t.scopeName,r}var xZ=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],vr=xZ.reduce((e,t)=>{const r=V.forwardRef((n,s)=>{const{asChild:u,...h}=n,m=u?Ga:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),M.jsx(m,{...h,ref:s})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});function r4(e,t){e&&mh.flushSync(()=>e.dispatchEvent(t))}function si(e){const t=V.useRef(e);return V.useEffect(()=>{t.current=e}),V.useMemo(()=>(...r)=>{var n;return(n=t.current)==null?void 0:n.call(t,...r)},[])}function bZ(e,t=globalThis==null?void 0:globalThis.document){const r=si(e);V.useEffect(()=>{const n=s=>{s.key==="Escape"&&r(s)};return t.addEventListener("keydown",n,{capture:!0}),()=>t.removeEventListener("keydown",n,{capture:!0})},[r,t])}var wZ="DismissableLayer",uP="dismissableLayer.update",SZ="dismissableLayer.pointerDownOutside",EZ="dismissableLayer.focusOutside",LL,n4=V.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Jv=V.forwardRef((e,t)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:n,onPointerDownOutside:s,onFocusOutside:u,onInteractOutside:h,onDismiss:m,...o}=e,_=V.useContext(n4),[E,S]=V.useState(null),A=(E==null?void 0:E.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,I]=V.useState({}),R=Ur(t,Q=>S(Q)),k=Array.from(_.layers),[L]=[..._.layersWithOutsidePointerEventsDisabled].slice(-1),N=k.indexOf(L),z=E?k.indexOf(E):-1,F=_.layersWithOutsidePointerEventsDisabled.size>0,U=z>=N,W=AZ(Q=>{const Z=Q.target,re=[..._.branches].some(ne=>ne.contains(Z));!U||re||(s==null||s(Q),h==null||h(Q),Q.defaultPrevented||m==null||m())},A),Y=PZ(Q=>{const Z=Q.target;[..._.branches].some(ne=>ne.contains(Z))||(u==null||u(Q),h==null||h(Q),Q.defaultPrevented||m==null||m())},A);return bZ(Q=>{z===_.layers.size-1&&(n==null||n(Q),!Q.defaultPrevented&&m&&(Q.preventDefault(),m()))},A),V.useEffect(()=>{if(E)return r&&(_.layersWithOutsidePointerEventsDisabled.size===0&&(LL=A.body.style.pointerEvents,A.body.style.pointerEvents="none"),_.layersWithOutsidePointerEventsDisabled.add(E)),_.layers.add(E),jL(),()=>{r&&_.layersWithOutsidePointerEventsDisabled.size===1&&(A.body.style.pointerEvents=LL)}},[E,A,r,_]),V.useEffect(()=>()=>{E&&(_.layers.delete(E),_.layersWithOutsidePointerEventsDisabled.delete(E),jL())},[E,_]),V.useEffect(()=>{const Q=()=>I({});return document.addEventListener(uP,Q),()=>document.removeEventListener(uP,Q)},[]),M.jsx(vr.div,{...o,ref:R,style:{pointerEvents:F?U?"auto":"none":void 0,...e.style},onFocusCapture:rr(e.onFocusCapture,Y.onFocusCapture),onBlurCapture:rr(e.onBlurCapture,Y.onBlurCapture),onPointerDownCapture:rr(e.onPointerDownCapture,W.onPointerDownCapture)})});Jv.displayName=wZ;var TZ="DismissableLayerBranch",i4=V.forwardRef((e,t)=>{const r=V.useContext(n4),n=V.useRef(null),s=Ur(t,n);return V.useEffect(()=>{const u=n.current;if(u)return r.branches.add(u),()=>{r.branches.delete(u)}},[r.branches]),M.jsx(vr.div,{...e,ref:s})});i4.displayName=TZ;function AZ(e,t=globalThis==null?void 0:globalThis.document){const r=si(e),n=V.useRef(!1),s=V.useRef(()=>{});return V.useEffect(()=>{const u=m=>{if(m.target&&!n.current){let o=function(){o4(SZ,r,_,{discrete:!0})};const _={originalEvent:m};m.pointerType==="touch"?(t.removeEventListener("click",s.current),s.current=o,t.addEventListener("click",s.current,{once:!0})):o()}else t.removeEventListener("click",s.current);n.current=!1},h=window.setTimeout(()=>{t.addEventListener("pointerdown",u)},0);return()=>{window.clearTimeout(h),t.removeEventListener("pointerdown",u),t.removeEventListener("click",s.current)}},[t,r]),{onPointerDownCapture:()=>n.current=!0}}function PZ(e,t=globalThis==null?void 0:globalThis.document){const r=si(e),n=V.useRef(!1);return V.useEffect(()=>{const s=u=>{u.target&&!n.current&&o4(EZ,r,{originalEvent:u},{discrete:!1})};return t.addEventListener("focusin",s),()=>t.removeEventListener("focusin",s)},[t,r]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function jL(){const e=new CustomEvent(uP);document.dispatchEvent(e)}function o4(e,t,r,{discrete:n}){const s=r.originalEvent.target,u=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:r});t&&s.addEventListener(e,t,{once:!0}),n?r4(s,u):s.dispatchEvent(u)}var CZ=Jv,MZ=i4,Wi=globalThis!=null&&globalThis.document?V.useLayoutEffect:()=>{},IZ="Portal",J1=V.forwardRef((e,t)=>{var m;const{container:r,...n}=e,[s,u]=V.useState(!1);Wi(()=>u(!0),[]);const h=r||s&&((m=globalThis==null?void 0:globalThis.document)==null?void 0:m.body);return h?JF.createPortal(M.jsx(vr.div,{...n,ref:t}),h):null});J1.displayName=IZ;function OZ(e,t){return V.useReducer((r,n)=>t[r][n]??r,e)}var qa=e=>{const{present:t,children:r}=e,n=kZ(t),s=typeof r=="function"?r({present:n.isPresent}):V.Children.only(r),u=Ur(n.ref,DZ(s));return typeof r=="function"||n.isPresent?V.cloneElement(s,{ref:u}):null};qa.displayName="Presence";function kZ(e){const[t,r]=V.useState(),n=V.useRef({}),s=V.useRef(e),u=V.useRef("none"),h=e?"mounted":"unmounted",[m,o]=OZ(h,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return V.useEffect(()=>{const _=a0(n.current);u.current=m==="mounted"?_:"none"},[m]),Wi(()=>{const _=n.current,E=s.current;if(E!==e){const A=u.current,I=a0(_);e?o("MOUNT"):I==="none"||(_==null?void 0:_.display)==="none"?o("UNMOUNT"):o(E&&A!==I?"ANIMATION_OUT":"UNMOUNT"),s.current=e}},[e,o]),Wi(()=>{if(t){let _;const E=t.ownerDocument.defaultView??window,S=I=>{const k=a0(n.current).includes(I.animationName);if(I.target===t&&k&&(o("ANIMATION_END"),!s.current)){const L=t.style.animationFillMode;t.style.animationFillMode="forwards",_=E.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=L)})}},A=I=>{I.target===t&&(u.current=a0(n.current))};return t.addEventListener("animationstart",A),t.addEventListener("animationcancel",S),t.addEventListener("animationend",S),()=>{E.clearTimeout(_),t.removeEventListener("animationstart",A),t.removeEventListener("animationcancel",S),t.removeEventListener("animationend",S)}}else o("ANIMATION_END")},[t,o]),{isPresent:["mounted","unmountSuspended"].includes(m),ref:V.useCallback(_=>{_&&(n.current=getComputedStyle(_)),r(_)},[])}}function a0(e){return(e==null?void 0:e.animationName)||"none"}function DZ(e){var n,s;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(s=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:s.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}function Au({prop:e,defaultProp:t,onChange:r=()=>{}}){const[n,s]=RZ({defaultProp:t,onChange:r}),u=e!==void 0,h=u?e:n,m=si(r),o=V.useCallback(_=>{if(u){const S=typeof _=="function"?_(e):_;S!==e&&m(S)}else s(_)},[u,e,s,m]);return[h,o]}function RZ({defaultProp:e,onChange:t}){const r=V.useState(e),[n]=r,s=V.useRef(n),u=si(t);return V.useEffect(()=>{s.current!==n&&(u(n),s.current=n)},[n,s,u]),r}var LZ="VisuallyHidden",Qv=V.forwardRef((e,t)=>M.jsx(vr.span,{...e,ref:t,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...e.style}}));Qv.displayName=LZ;var jZ=Qv,oI="ToastProvider",[aI,zZ,NZ]=iI("Toast"),[a4,LCe]=gh("Toast",[NZ]),[BZ,Q1]=a4(oI),s4=e=>{const{__scopeToast:t,label:r="Notification",duration:n=5e3,swipeDirection:s="right",swipeThreshold:u=50,children:h}=e,[m,o]=V.useState(null),[_,E]=V.useState(0),S=V.useRef(!1),A=V.useRef(!1);return r.trim()||console.error(`Invalid prop \`label\` supplied to \`${oI}\`. Expected non-empty \`string\`.`),M.jsx(aI.Provider,{scope:t,children:M.jsx(BZ,{scope:t,label:r,duration:n,swipeDirection:s,swipeThreshold:u,toastCount:_,viewport:m,onViewportChange:o,onToastAdd:V.useCallback(()=>E(I=>I+1),[]),onToastRemove:V.useCallback(()=>E(I=>I-1),[]),isFocusedToastEscapeKeyDownRef:S,isClosePausedRef:A,children:h})})};s4.displayName=oI;var l4="ToastViewport",$Z=["F8"],dP="toast.viewportPause",hP="toast.viewportResume",c4=V.forwardRef((e,t)=>{const{__scopeToast:r,hotkey:n=$Z,label:s="Notifications ({hotkey})",...u}=e,h=Q1(l4,r),m=zZ(r),o=V.useRef(null),_=V.useRef(null),E=V.useRef(null),S=V.useRef(null),A=Ur(t,S,h.onViewportChange),I=n.join("+").replace(/Key/g,"").replace(/Digit/g,""),R=h.toastCount>0;V.useEffect(()=>{const L=N=>{var F;n.length!==0&&n.every(U=>N[U]||N.code===U)&&((F=S.current)==null||F.focus())};return document.addEventListener("keydown",L),()=>document.removeEventListener("keydown",L)},[n]),V.useEffect(()=>{const L=o.current,N=S.current;if(R&&L&&N){const z=()=>{if(!h.isClosePausedRef.current){const Y=new CustomEvent(dP);N.dispatchEvent(Y),h.isClosePausedRef.current=!0}},F=()=>{if(h.isClosePausedRef.current){const Y=new CustomEvent(hP);N.dispatchEvent(Y),h.isClosePausedRef.current=!1}},U=Y=>{!L.contains(Y.relatedTarget)&&F()},W=()=>{L.contains(document.activeElement)||F()};return L.addEventListener("focusin",z),L.addEventListener("focusout",U),L.addEventListener("pointermove",z),L.addEventListener("pointerleave",W),window.addEventListener("blur",z),window.addEventListener("focus",F),()=>{L.removeEventListener("focusin",z),L.removeEventListener("focusout",U),L.removeEventListener("pointermove",z),L.removeEventListener("pointerleave",W),window.removeEventListener("blur",z),window.removeEventListener("focus",F)}}},[R,h.isClosePausedRef]);const k=V.useCallback(({tabbingDirection:L})=>{const z=m().map(F=>{const U=F.ref.current,W=[U,...QZ(U)];return L==="forwards"?W:W.reverse()});return(L==="forwards"?z.reverse():z).flat()},[m]);return V.useEffect(()=>{const L=S.current;if(L){const N=z=>{var W,Y,Q;const F=z.altKey||z.ctrlKey||z.metaKey;if(z.key==="Tab"&&!F){const Z=document.activeElement,re=z.shiftKey;if(z.target===L&&re){(W=_.current)==null||W.focus();return}const fe=k({tabbingDirection:re?"backwards":"forwards"}),Ee=fe.findIndex(Se=>Se===Z);ST(fe.slice(Ee+1))?z.preventDefault():re?(Y=_.current)==null||Y.focus():(Q=E.current)==null||Q.focus()}};return L.addEventListener("keydown",N),()=>L.removeEventListener("keydown",N)}},[m,k]),M.jsxs(MZ,{ref:o,role:"region","aria-label":s.replace("{hotkey}",I),tabIndex:-1,style:{pointerEvents:R?void 0:"none"},children:[R&&M.jsx(fP,{ref:_,onFocusFromOutsideViewport:()=>{const L=k({tabbingDirection:"forwards"});ST(L)}}),M.jsx(aI.Slot,{scope:r,children:M.jsx(vr.ol,{tabIndex:-1,...u,ref:A})}),R&&M.jsx(fP,{ref:E,onFocusFromOutsideViewport:()=>{const L=k({tabbingDirection:"backwards"});ST(L)}})]})});c4.displayName=l4;var u4="ToastFocusProxy",fP=V.forwardRef((e,t)=>{const{__scopeToast:r,onFocusFromOutsideViewport:n,...s}=e,u=Q1(u4,r);return M.jsx(Qv,{"aria-hidden":!0,tabIndex:0,...s,ref:t,style:{position:"fixed"},onFocus:h=>{var _;const m=h.relatedTarget;!((_=u.viewport)!=null&&_.contains(m))&&n()}})});fP.displayName=u4;var ew="Toast",FZ="toast.swipeStart",UZ="toast.swipeMove",VZ="toast.swipeCancel",GZ="toast.swipeEnd",d4=V.forwardRef((e,t)=>{const{forceMount:r,open:n,defaultOpen:s,onOpenChange:u,...h}=e,[m=!0,o]=Au({prop:n,defaultProp:s,onChange:u});return M.jsx(qa,{present:r||m,children:M.jsx(HZ,{open:m,...h,ref:t,onClose:()=>o(!1),onPause:si(e.onPause),onResume:si(e.onResume),onSwipeStart:rr(e.onSwipeStart,_=>{_.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:rr(e.onSwipeMove,_=>{const{x:E,y:S}=_.detail.delta;_.currentTarget.setAttribute("data-swipe","move"),_.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${E}px`),_.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${S}px`)}),onSwipeCancel:rr(e.onSwipeCancel,_=>{_.currentTarget.setAttribute("data-swipe","cancel"),_.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),_.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),_.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),_.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:rr(e.onSwipeEnd,_=>{const{x:E,y:S}=_.detail.delta;_.currentTarget.setAttribute("data-swipe","end"),_.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),_.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),_.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${E}px`),_.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${S}px`),o(!1)})})})});d4.displayName=ew;var[WZ,qZ]=a4(ew,{onClose(){}}),HZ=V.forwardRef((e,t)=>{const{__scopeToast:r,type:n="foreground",duration:s,open:u,onClose:h,onEscapeKeyDown:m,onPause:o,onResume:_,onSwipeStart:E,onSwipeMove:S,onSwipeCancel:A,onSwipeEnd:I,...R}=e,k=Q1(ew,r),[L,N]=V.useState(null),z=Ur(t,Se=>N(Se)),F=V.useRef(null),U=V.useRef(null),W=s||k.duration,Y=V.useRef(0),Q=V.useRef(W),Z=V.useRef(0),{onToastAdd:re,onToastRemove:ne}=k,ue=si(()=>{var je;(L==null?void 0:L.contains(document.activeElement))&&((je=k.viewport)==null||je.focus()),h()}),fe=V.useCallback(Se=>{!Se||Se===1/0||(window.clearTimeout(Z.current),Y.current=new Date().getTime(),Z.current=window.setTimeout(ue,Se))},[ue]);V.useEffect(()=>{const Se=k.viewport;if(Se){const je=()=>{fe(Q.current),_==null||_()},Le=()=>{const Ue=new Date().getTime()-Y.current;Q.current=Q.current-Ue,window.clearTimeout(Z.current),o==null||o()};return Se.addEventListener(dP,Le),Se.addEventListener(hP,je),()=>{Se.removeEventListener(dP,Le),Se.removeEventListener(hP,je)}}},[k.viewport,W,o,_,fe]),V.useEffect(()=>{u&&!k.isClosePausedRef.current&&fe(W)},[u,W,k.isClosePausedRef,fe]),V.useEffect(()=>(re(),()=>ne()),[re,ne]);const Ee=V.useMemo(()=>L?v4(L):null,[L]);return k.viewport?M.jsxs(M.Fragment,{children:[Ee&&M.jsx(XZ,{__scopeToast:r,role:"status","aria-live":n==="foreground"?"assertive":"polite","aria-atomic":!0,children:Ee}),M.jsx(WZ,{scope:r,onClose:ue,children:mh.createPortal(M.jsx(aI.ItemSlot,{scope:r,children:M.jsx(CZ,{asChild:!0,onEscapeKeyDown:rr(m,()=>{k.isFocusedToastEscapeKeyDownRef.current||ue(),k.isFocusedToastEscapeKeyDownRef.current=!1}),children:M.jsx(vr.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":u?"open":"closed","data-swipe-direction":k.swipeDirection,...R,ref:z,style:{userSelect:"none",touchAction:"none",...e.style},onKeyDown:rr(e.onKeyDown,Se=>{Se.key==="Escape"&&(m==null||m(Se.nativeEvent),Se.nativeEvent.defaultPrevented||(k.isFocusedToastEscapeKeyDownRef.current=!0,ue()))}),onPointerDown:rr(e.onPointerDown,Se=>{Se.button===0&&(F.current={x:Se.clientX,y:Se.clientY})}),onPointerMove:rr(e.onPointerMove,Se=>{if(!F.current)return;const je=Se.clientX-F.current.x,Le=Se.clientY-F.current.y,Ue=!!U.current,we=["left","right"].includes(k.swipeDirection),Pe=["left","up"].includes(k.swipeDirection)?Math.min:Math.max,rt=we?Pe(0,je):0,$e=we?0:Pe(0,Le),Ge=Se.pointerType==="touch"?10:2,Re={x:rt,y:$e},at={originalEvent:Se,delta:Re};Ue?(U.current=Re,s0(UZ,S,at,{discrete:!1})):zL(Re,k.swipeDirection,Ge)?(U.current=Re,s0(FZ,E,at,{discrete:!1}),Se.target.setPointerCapture(Se.pointerId)):(Math.abs(je)>Ge||Math.abs(Le)>Ge)&&(F.current=null)}),onPointerUp:rr(e.onPointerUp,Se=>{const je=U.current,Le=Se.target;if(Le.hasPointerCapture(Se.pointerId)&&Le.releasePointerCapture(Se.pointerId),U.current=null,F.current=null,je){const Ue=Se.currentTarget,we={originalEvent:Se,delta:je};zL(je,k.swipeDirection,k.swipeThreshold)?s0(GZ,I,we,{discrete:!0}):s0(VZ,A,we,{discrete:!0}),Ue.addEventListener("click",Pe=>Pe.preventDefault(),{once:!0})}})})})}),k.viewport)})]}):null}),XZ=e=>{const{__scopeToast:t,children:r,...n}=e,s=Q1(ew,t),[u,h]=V.useState(!1),[m,o]=V.useState(!1);return YZ(()=>h(!0)),V.useEffect(()=>{const _=window.setTimeout(()=>o(!0),1e3);return()=>window.clearTimeout(_)},[]),m?null:M.jsx(J1,{asChild:!0,children:M.jsx(Qv,{...n,children:u&&M.jsxs(M.Fragment,{children:[s.label," ",r]})})})},ZZ="ToastTitle",h4=V.forwardRef((e,t)=>{const{__scopeToast:r,...n}=e;return M.jsx(vr.div,{...n,ref:t})});h4.displayName=ZZ;var KZ="ToastDescription",f4=V.forwardRef((e,t)=>{const{__scopeToast:r,...n}=e;return M.jsx(vr.div,{...n,ref:t})});f4.displayName=KZ;var p4="ToastAction",m4=V.forwardRef((e,t)=>{const{altText:r,...n}=e;return r.trim()?M.jsx(y4,{altText:r,asChild:!0,children:M.jsx(sI,{...n,ref:t})}):(console.error(`Invalid prop \`altText\` supplied to \`${p4}\`. Expected non-empty \`string\`.`),null)});m4.displayName=p4;var g4="ToastClose",sI=V.forwardRef((e,t)=>{const{__scopeToast:r,...n}=e,s=qZ(g4,r);return M.jsx(y4,{asChild:!0,children:M.jsx(vr.button,{type:"button",...n,ref:t,onClick:rr(e.onClick,s.onClose)})})});sI.displayName=g4;var y4=V.forwardRef((e,t)=>{const{__scopeToast:r,altText:n,...s}=e;return M.jsx(vr.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":n||void 0,...s,ref:t})});function v4(e){const t=[];return Array.from(e.childNodes).forEach(n=>{if(n.nodeType===n.TEXT_NODE&&n.textContent&&t.push(n.textContent),JZ(n)){const s=n.ariaHidden||n.hidden||n.style.display==="none",u=n.dataset.radixToastAnnounceExclude==="";if(!s)if(u){const h=n.dataset.radixToastAnnounceAlt;h&&t.push(h)}else t.push(...v4(n))}}),t}function s0(e,t,r,{discrete:n}){const s=r.originalEvent.currentTarget,u=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:r});t&&s.addEventListener(e,t,{once:!0}),n?r4(s,u):s.dispatchEvent(u)}var zL=(e,t,r=0)=>{const n=Math.abs(e.x),s=Math.abs(e.y),u=n>s;return t==="left"||t==="right"?u&&n>r:!u&&s>r};function YZ(e=()=>{}){const t=si(e);Wi(()=>{let r=0,n=0;return r=window.requestAnimationFrame(()=>n=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(r),window.cancelAnimationFrame(n)}},[t])}function JZ(e){return e.nodeType===e.ELEMENT_NODE}function QZ(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const s=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||s?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function ST(e){const t=document.activeElement;return e.some(r=>r===t?!0:(r.focus(),document.activeElement!==t))}var eK=s4,_4=c4,x4=d4,b4=h4,w4=f4,S4=m4,E4=sI;function T4(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(r=T4(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function Fr(){for(var e,t,r=0,n="",s=arguments.length;r<s;r++)(e=arguments[r])&&(t=T4(e))&&(n&&(n+=" "),n+=t);return n}const NL=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,BL=Fr,e_=(e,t)=>r=>{var n;if((t==null?void 0:t.variants)==null)return BL(e,r==null?void 0:r.class,r==null?void 0:r.className);const{variants:s,defaultVariants:u}=t,h=Object.keys(s).map(_=>{const E=r==null?void 0:r[_],S=u==null?void 0:u[_];if(E===null)return null;const A=NL(E)||NL(S);return s[_][A]}),m=r&&Object.entries(r).reduce((_,E)=>{let[S,A]=E;return A===void 0||(_[S]=A),_},{}),o=t==null||(n=t.compoundVariants)===null||n===void 0?void 0:n.reduce((_,E)=>{let{class:S,className:A,...I}=E;return Object.entries(I).every(R=>{let[k,L]=R;return Array.isArray(L)?L.includes({...u,...m}[k]):{...u,...m}[k]===L})?[..._,S,A]:_},[]);return BL(e,h,o,r==null?void 0:r.class,r==null?void 0:r.className)};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tK=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),A4=(...e)=>e.filter((t,r,n)=>!!t&&t.trim()!==""&&n.indexOf(t)===r).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var rK={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nK=V.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:s="",children:u,iconNode:h,...m},o)=>V.createElement("svg",{ref:o,...rK,width:t,height:t,stroke:e,strokeWidth:n?Number(r)*24/Number(t):r,className:A4("lucide",s),...m},[...h.map(([_,E])=>V.createElement(_,E)),...Array.isArray(u)?u:[u]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wo=(e,t)=>{const r=V.forwardRef(({className:n,...s},u)=>V.createElement(nK,{ref:u,iconNode:t,className:A4(`lucide-${tK(e)}`,n),...s}));return r.displayName=`${e}`,r};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iK=wo("ChartBar",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M7 16h8",key:"srdodz"}],["path",{d:"M7 11h12",key:"127s9w"}],["path",{d:"M7 6h3",key:"w9rmul"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oK=wo("ChartNoAxesColumnIncreasing",[["line",{x1:"12",x2:"12",y1:"20",y2:"10",key:"1vz5eb"}],["line",{x1:"18",x2:"18",y1:"20",y2:"4",key:"cun8e5"}],["line",{x1:"6",x2:"6",y1:"20",y2:"16",key:"hq0ia6"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P4=wo("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C4=wo("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aK=wo("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wc=wo("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pP=wo("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mP=wo("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sK=wo("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t_=wo("Map",[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lK=wo("PanelLeft",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cK=wo("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lI=wo("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uK=wo("ZoomIn",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dK=wo("ZoomOut",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),cI="-",hK=e=>{const t=pK(e),{conflictingClassGroups:r,conflictingClassGroupModifiers:n}=e;return{getClassGroupId:h=>{const m=h.split(cI);return m[0]===""&&m.length!==1&&m.shift(),M4(m,t)||fK(h)},getConflictingClassGroupIds:(h,m)=>{const o=r[h]||[];return m&&n[h]?[...o,...n[h]]:o}}},M4=(e,t)=>{var h;if(e.length===0)return t.classGroupId;const r=e[0],n=t.nextPart.get(r),s=n?M4(e.slice(1),n):void 0;if(s)return s;if(t.validators.length===0)return;const u=e.join(cI);return(h=t.validators.find(({validator:m})=>m(u)))==null?void 0:h.classGroupId},$L=/^\[(.+)\]$/,fK=e=>{if($L.test(e)){const t=$L.exec(e)[1],r=t==null?void 0:t.substring(0,t.indexOf(":"));if(r)return"arbitrary.."+r}},pK=e=>{const{theme:t,prefix:r}=e,n={nextPart:new Map,validators:[]};return gK(Object.entries(e.classGroups),r).forEach(([u,h])=>{gP(h,n,u,t)}),n},gP=(e,t,r,n)=>{e.forEach(s=>{if(typeof s=="string"){const u=s===""?t:FL(t,s);u.classGroupId=r;return}if(typeof s=="function"){if(mK(s)){gP(s(n),t,r,n);return}t.validators.push({validator:s,classGroupId:r});return}Object.entries(s).forEach(([u,h])=>{gP(h,FL(t,u),r,n)})})},FL=(e,t)=>{let r=e;return t.split(cI).forEach(n=>{r.nextPart.has(n)||r.nextPart.set(n,{nextPart:new Map,validators:[]}),r=r.nextPart.get(n)}),r},mK=e=>e.isThemeGetter,gK=(e,t)=>t?e.map(([r,n])=>{const s=n.map(u=>typeof u=="string"?t+u:typeof u=="object"?Object.fromEntries(Object.entries(u).map(([h,m])=>[t+h,m])):u);return[r,s]}):e,yK=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,r=new Map,n=new Map;const s=(u,h)=>{r.set(u,h),t++,t>e&&(t=0,n=r,r=new Map)};return{get(u){let h=r.get(u);if(h!==void 0)return h;if((h=n.get(u))!==void 0)return s(u,h),h},set(u,h){r.has(u)?r.set(u,h):s(u,h)}}},I4="!",vK=e=>{const{separator:t,experimentalParseClassName:r}=e,n=t.length===1,s=t[0],u=t.length,h=m=>{const o=[];let _=0,E=0,S;for(let L=0;L<m.length;L++){let N=m[L];if(_===0){if(N===s&&(n||m.slice(L,L+u)===t)){o.push(m.slice(E,L)),E=L+u;continue}if(N==="/"){S=L;continue}}N==="["?_++:N==="]"&&_--}const A=o.length===0?m:m.substring(E),I=A.startsWith(I4),R=I?A.substring(1):A,k=S&&S>E?S-E:void 0;return{modifiers:o,hasImportantModifier:I,baseClassName:R,maybePostfixModifierPosition:k}};return r?m=>r({className:m,parseClassName:h}):h},_K=e=>{if(e.length<=1)return e;const t=[];let r=[];return e.forEach(n=>{n[0]==="["?(t.push(...r.sort(),n),r=[]):r.push(n)}),t.push(...r.sort()),t},xK=e=>({cache:yK(e.cacheSize),parseClassName:vK(e),...hK(e)}),bK=/\s+/,wK=(e,t)=>{const{parseClassName:r,getClassGroupId:n,getConflictingClassGroupIds:s}=t,u=[],h=e.trim().split(bK);let m="";for(let o=h.length-1;o>=0;o-=1){const _=h[o],{modifiers:E,hasImportantModifier:S,baseClassName:A,maybePostfixModifierPosition:I}=r(_);let R=!!I,k=n(R?A.substring(0,I):A);if(!k){if(!R){m=_+(m.length>0?" "+m:m);continue}if(k=n(A),!k){m=_+(m.length>0?" "+m:m);continue}R=!1}const L=_K(E).join(":"),N=S?L+I4:L,z=N+k;if(u.includes(z))continue;u.push(z);const F=s(k,R);for(let U=0;U<F.length;++U){const W=F[U];u.push(N+W)}m=_+(m.length>0?" "+m:m)}return m};function SK(){let e=0,t,r,n="";for(;e<arguments.length;)(t=arguments[e++])&&(r=O4(t))&&(n&&(n+=" "),n+=r);return n}const O4=e=>{if(typeof e=="string")return e;let t,r="";for(let n=0;n<e.length;n++)e[n]&&(t=O4(e[n]))&&(r&&(r+=" "),r+=t);return r};function EK(e,...t){let r,n,s,u=h;function h(o){const _=t.reduce((E,S)=>S(E),e());return r=xK(_),n=r.cache.get,s=r.cache.set,u=m,m(o)}function m(o){const _=n(o);if(_)return _;const E=wK(o,r);return s(o,E),E}return function(){return u(SK.apply(null,arguments))}}const Mn=e=>{const t=r=>r[e]||[];return t.isThemeGetter=!0,t},k4=/^\[(?:([a-z-]+):)?(.+)\]$/i,TK=/^\d+\/\d+$/,AK=new Set(["px","full","screen"]),PK=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,CK=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,MK=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,IK=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,OK=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Rl=e=>Kf(e)||AK.has(e)||TK.test(e),Vc=e=>Jp(e,"length",BK),Kf=e=>!!e&&!Number.isNaN(Number(e)),ET=e=>Jp(e,"number",Kf),ey=e=>!!e&&Number.isInteger(Number(e)),kK=e=>e.endsWith("%")&&Kf(e.slice(0,-1)),Er=e=>k4.test(e),Gc=e=>PK.test(e),DK=new Set(["length","size","percentage"]),RK=e=>Jp(e,DK,D4),LK=e=>Jp(e,"position",D4),jK=new Set(["image","url"]),zK=e=>Jp(e,jK,FK),NK=e=>Jp(e,"",$K),ty=()=>!0,Jp=(e,t,r)=>{const n=k4.exec(e);return n?n[1]?typeof t=="string"?n[1]===t:t.has(n[1]):r(n[2]):!1},BK=e=>CK.test(e)&&!MK.test(e),D4=()=>!1,$K=e=>IK.test(e),FK=e=>OK.test(e),UK=()=>{const e=Mn("colors"),t=Mn("spacing"),r=Mn("blur"),n=Mn("brightness"),s=Mn("borderColor"),u=Mn("borderRadius"),h=Mn("borderSpacing"),m=Mn("borderWidth"),o=Mn("contrast"),_=Mn("grayscale"),E=Mn("hueRotate"),S=Mn("invert"),A=Mn("gap"),I=Mn("gradientColorStops"),R=Mn("gradientColorStopPositions"),k=Mn("inset"),L=Mn("margin"),N=Mn("opacity"),z=Mn("padding"),F=Mn("saturate"),U=Mn("scale"),W=Mn("sepia"),Y=Mn("skew"),Q=Mn("space"),Z=Mn("translate"),re=()=>["auto","contain","none"],ne=()=>["auto","hidden","clip","visible","scroll"],ue=()=>["auto",Er,t],fe=()=>[Er,t],Ee=()=>["",Rl,Vc],Se=()=>["auto",Kf,Er],je=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],Le=()=>["solid","dashed","dotted","double","none"],Ue=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],we=()=>["start","end","center","between","around","evenly","stretch"],Pe=()=>["","0",Er],rt=()=>["auto","avoid","all","avoid-page","page","left","right","column"],$e=()=>[Kf,Er];return{cacheSize:500,separator:":",theme:{colors:[ty],spacing:[Rl,Vc],blur:["none","",Gc,Er],brightness:$e(),borderColor:[e],borderRadius:["none","","full",Gc,Er],borderSpacing:fe(),borderWidth:Ee(),contrast:$e(),grayscale:Pe(),hueRotate:$e(),invert:Pe(),gap:fe(),gradientColorStops:[e],gradientColorStopPositions:[kK,Vc],inset:ue(),margin:ue(),opacity:$e(),padding:fe(),saturate:$e(),scale:$e(),sepia:Pe(),skew:$e(),space:fe(),translate:fe()},classGroups:{aspect:[{aspect:["auto","square","video",Er]}],container:["container"],columns:[{columns:[Gc]}],"break-after":[{"break-after":rt()}],"break-before":[{"break-before":rt()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...je(),Er]}],overflow:[{overflow:ne()}],"overflow-x":[{"overflow-x":ne()}],"overflow-y":[{"overflow-y":ne()}],overscroll:[{overscroll:re()}],"overscroll-x":[{"overscroll-x":re()}],"overscroll-y":[{"overscroll-y":re()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[k]}],"inset-x":[{"inset-x":[k]}],"inset-y":[{"inset-y":[k]}],start:[{start:[k]}],end:[{end:[k]}],top:[{top:[k]}],right:[{right:[k]}],bottom:[{bottom:[k]}],left:[{left:[k]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",ey,Er]}],basis:[{basis:ue()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Er]}],grow:[{grow:Pe()}],shrink:[{shrink:Pe()}],order:[{order:["first","last","none",ey,Er]}],"grid-cols":[{"grid-cols":[ty]}],"col-start-end":[{col:["auto",{span:["full",ey,Er]},Er]}],"col-start":[{"col-start":Se()}],"col-end":[{"col-end":Se()}],"grid-rows":[{"grid-rows":[ty]}],"row-start-end":[{row:["auto",{span:[ey,Er]},Er]}],"row-start":[{"row-start":Se()}],"row-end":[{"row-end":Se()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Er]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Er]}],gap:[{gap:[A]}],"gap-x":[{"gap-x":[A]}],"gap-y":[{"gap-y":[A]}],"justify-content":[{justify:["normal",...we()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...we(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...we(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[z]}],px:[{px:[z]}],py:[{py:[z]}],ps:[{ps:[z]}],pe:[{pe:[z]}],pt:[{pt:[z]}],pr:[{pr:[z]}],pb:[{pb:[z]}],pl:[{pl:[z]}],m:[{m:[L]}],mx:[{mx:[L]}],my:[{my:[L]}],ms:[{ms:[L]}],me:[{me:[L]}],mt:[{mt:[L]}],mr:[{mr:[L]}],mb:[{mb:[L]}],ml:[{ml:[L]}],"space-x":[{"space-x":[Q]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[Q]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Er,t]}],"min-w":[{"min-w":[Er,t,"min","max","fit"]}],"max-w":[{"max-w":[Er,t,"none","full","min","max","fit","prose",{screen:[Gc]},Gc]}],h:[{h:[Er,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Er,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Er,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Er,t,"auto","min","max","fit"]}],"font-size":[{text:["base",Gc,Vc]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",ET]}],"font-family":[{font:[ty]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Er]}],"line-clamp":[{"line-clamp":["none",Kf,ET]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Rl,Er]}],"list-image":[{"list-image":["none",Er]}],"list-style-type":[{list:["none","disc","decimal",Er]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[N]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[N]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Le(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Rl,Vc]}],"underline-offset":[{"underline-offset":["auto",Rl,Er]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:fe()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Er]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Er]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[N]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...je(),LK]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",RK]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},zK]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[R]}],"gradient-via-pos":[{via:[R]}],"gradient-to-pos":[{to:[R]}],"gradient-from":[{from:[I]}],"gradient-via":[{via:[I]}],"gradient-to":[{to:[I]}],rounded:[{rounded:[u]}],"rounded-s":[{"rounded-s":[u]}],"rounded-e":[{"rounded-e":[u]}],"rounded-t":[{"rounded-t":[u]}],"rounded-r":[{"rounded-r":[u]}],"rounded-b":[{"rounded-b":[u]}],"rounded-l":[{"rounded-l":[u]}],"rounded-ss":[{"rounded-ss":[u]}],"rounded-se":[{"rounded-se":[u]}],"rounded-ee":[{"rounded-ee":[u]}],"rounded-es":[{"rounded-es":[u]}],"rounded-tl":[{"rounded-tl":[u]}],"rounded-tr":[{"rounded-tr":[u]}],"rounded-br":[{"rounded-br":[u]}],"rounded-bl":[{"rounded-bl":[u]}],"border-w":[{border:[m]}],"border-w-x":[{"border-x":[m]}],"border-w-y":[{"border-y":[m]}],"border-w-s":[{"border-s":[m]}],"border-w-e":[{"border-e":[m]}],"border-w-t":[{"border-t":[m]}],"border-w-r":[{"border-r":[m]}],"border-w-b":[{"border-b":[m]}],"border-w-l":[{"border-l":[m]}],"border-opacity":[{"border-opacity":[N]}],"border-style":[{border:[...Le(),"hidden"]}],"divide-x":[{"divide-x":[m]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[m]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[N]}],"divide-style":[{divide:Le()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...Le()]}],"outline-offset":[{"outline-offset":[Rl,Er]}],"outline-w":[{outline:[Rl,Vc]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:Ee()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[N]}],"ring-offset-w":[{"ring-offset":[Rl,Vc]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",Gc,NK]}],"shadow-color":[{shadow:[ty]}],opacity:[{opacity:[N]}],"mix-blend":[{"mix-blend":[...Ue(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":Ue()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[n]}],contrast:[{contrast:[o]}],"drop-shadow":[{"drop-shadow":["","none",Gc,Er]}],grayscale:[{grayscale:[_]}],"hue-rotate":[{"hue-rotate":[E]}],invert:[{invert:[S]}],saturate:[{saturate:[F]}],sepia:[{sepia:[W]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[o]}],"backdrop-grayscale":[{"backdrop-grayscale":[_]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[E]}],"backdrop-invert":[{"backdrop-invert":[S]}],"backdrop-opacity":[{"backdrop-opacity":[N]}],"backdrop-saturate":[{"backdrop-saturate":[F]}],"backdrop-sepia":[{"backdrop-sepia":[W]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[h]}],"border-spacing-x":[{"border-spacing-x":[h]}],"border-spacing-y":[{"border-spacing-y":[h]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Er]}],duration:[{duration:$e()}],ease:[{ease:["linear","in","out","in-out",Er]}],delay:[{delay:$e()}],animate:[{animate:["none","spin","ping","pulse","bounce",Er]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[U]}],"scale-x":[{"scale-x":[U]}],"scale-y":[{"scale-y":[U]}],rotate:[{rotate:[ey,Er]}],"translate-x":[{"translate-x":[Z]}],"translate-y":[{"translate-y":[Z]}],"skew-x":[{"skew-x":[Y]}],"skew-y":[{"skew-y":[Y]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Er]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Er]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":fe()}],"scroll-mx":[{"scroll-mx":fe()}],"scroll-my":[{"scroll-my":fe()}],"scroll-ms":[{"scroll-ms":fe()}],"scroll-me":[{"scroll-me":fe()}],"scroll-mt":[{"scroll-mt":fe()}],"scroll-mr":[{"scroll-mr":fe()}],"scroll-mb":[{"scroll-mb":fe()}],"scroll-ml":[{"scroll-ml":fe()}],"scroll-p":[{"scroll-p":fe()}],"scroll-px":[{"scroll-px":fe()}],"scroll-py":[{"scroll-py":fe()}],"scroll-ps":[{"scroll-ps":fe()}],"scroll-pe":[{"scroll-pe":fe()}],"scroll-pt":[{"scroll-pt":fe()}],"scroll-pr":[{"scroll-pr":fe()}],"scroll-pb":[{"scroll-pb":fe()}],"scroll-pl":[{"scroll-pl":fe()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Er]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[Rl,Vc,ET]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},VK=EK(UK);function Wt(...e){return VK(Fr(e))}const GK=eK,R4=V.forwardRef(({className:e,...t},r)=>M.jsx(_4,{ref:r,className:Wt("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",e),...t}));R4.displayName=_4.displayName;const WK=e_("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),L4=V.forwardRef(({className:e,variant:t,...r},n)=>M.jsx(x4,{ref:n,className:Wt(WK({variant:t}),e),...r}));L4.displayName=x4.displayName;const qK=V.forwardRef(({className:e,...t},r)=>M.jsx(S4,{ref:r,className:Wt("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",e),...t}));qK.displayName=S4.displayName;const j4=V.forwardRef(({className:e,...t},r)=>M.jsx(E4,{ref:r,className:Wt("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...t,children:M.jsx(lI,{className:"h-4 w-4"})}));j4.displayName=E4.displayName;const z4=V.forwardRef(({className:e,...t},r)=>M.jsx(b4,{ref:r,className:Wt("text-sm font-semibold",e),...t}));z4.displayName=b4.displayName;const N4=V.forwardRef(({className:e,...t},r)=>M.jsx(w4,{ref:r,className:Wt("text-sm opacity-90",e),...t}));N4.displayName=w4.displayName;function HK(){const{toasts:e}=dZ();return M.jsxs(GK,{children:[e.map(function({id:t,title:r,description:n,action:s,...u}){return M.jsxs(L4,{...u,children:[M.jsxs("div",{className:"grid gap-1",children:[r&&M.jsx(z4,{children:r}),n&&M.jsx(N4,{children:n})]}),s,M.jsx(j4,{})]},t)}),M.jsx(R4,{})]})}var UL=["light","dark"],XK="(prefers-color-scheme: dark)",ZK=V.createContext(void 0),KK={setTheme:e=>{},themes:[]},YK=()=>{var e;return(e=V.useContext(ZK))!=null?e:KK};V.memo(({forcedTheme:e,storageKey:t,attribute:r,enableSystem:n,enableColorScheme:s,defaultTheme:u,value:h,attrs:m,nonce:o})=>{let _=u==="system",E=r==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${m.map(R=>`'${R}'`).join(",")})`};`:`var d=document.documentElement,n='${r}',s='setAttribute';`,S=s?UL.includes(u)&&u?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${u}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",A=(R,k=!1,L=!0)=>{let N=h?h[R]:R,z=k?R+"|| ''":`'${N}'`,F="";return s&&L&&!k&&UL.includes(R)&&(F+=`d.style.colorScheme = '${R}';`),r==="class"?k||N?F+=`c.add(${z})`:F+="null":N&&(F+=`d[s](n,${z})`),F},I=e?`!function(){${E}${A(e)}}()`:n?`!function(){try{${E}var e=localStorage.getItem('${t}');if('system'===e||(!e&&${_})){var t='${XK}',m=window.matchMedia(t);if(m.media!==t||m.matches){${A("dark")}}else{${A("light")}}}else if(e){${h?`var x=${JSON.stringify(h)};`:""}${A(h?"x[e]":"e",!0)}}${_?"":"else{"+A(u,!1,!1)+"}"}${S}}catch(e){}}()`:`!function(){try{${E}var e=localStorage.getItem('${t}');if(e){${h?`var x=${JSON.stringify(h)};`:""}${A(h?"x[e]":"e",!0)}}else{${A(u,!1,!1)};}${S}}catch(t){}}();`;return V.createElement("script",{nonce:o,dangerouslySetInnerHTML:{__html:I}})});var JK=e=>{switch(e){case"success":return tY;case"info":return nY;case"warning":return rY;case"error":return iY;default:return null}},QK=Array(12).fill(0),eY=({visible:e})=>be.createElement("div",{className:"sonner-loading-wrapper","data-visible":e},be.createElement("div",{className:"sonner-spinner"},QK.map((t,r)=>be.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),tY=be.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},be.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),rY=be.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},be.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),nY=be.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},be.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),iY=be.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},be.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),oY=()=>{let[e,t]=be.useState(document.hidden);return be.useEffect(()=>{let r=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",r),()=>window.removeEventListener("visibilitychange",r)},[]),e},yP=1,aY=class{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{let t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}),this.publish=e=>{this.subscribers.forEach(t=>t(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var t;let{message:r,...n}=e,s=typeof(e==null?void 0:e.id)=="number"||((t=e.id)==null?void 0:t.length)>0?e.id:yP++,u=this.toasts.find(m=>m.id===s),h=e.dismissible===void 0?!0:e.dismissible;return u?this.toasts=this.toasts.map(m=>m.id===s?(this.publish({...m,...e,id:s,title:r}),{...m,...e,id:s,dismissible:h,title:r}):m):this.addToast({title:r,...n,dismissible:h,id:s}),s},this.dismiss=e=>(e||this.toasts.forEach(t=>{this.subscribers.forEach(r=>r({id:t.id,dismiss:!0}))}),this.subscribers.forEach(t=>t({id:e,dismiss:!0})),e),this.message=(e,t)=>this.create({...t,message:e}),this.error=(e,t)=>this.create({...t,message:e,type:"error"}),this.success=(e,t)=>this.create({...t,type:"success",message:e}),this.info=(e,t)=>this.create({...t,type:"info",message:e}),this.warning=(e,t)=>this.create({...t,type:"warning",message:e}),this.loading=(e,t)=>this.create({...t,type:"loading",message:e}),this.promise=(e,t)=>{if(!t)return;let r;t.loading!==void 0&&(r=this.create({...t,promise:e,type:"loading",message:t.loading,description:typeof t.description!="function"?t.description:void 0}));let n=e instanceof Promise?e:e(),s=r!==void 0;return n.then(async u=>{if(lY(u)&&!u.ok){s=!1;let h=typeof t.error=="function"?await t.error(`HTTP error! status: ${u.status}`):t.error,m=typeof t.description=="function"?await t.description(`HTTP error! status: ${u.status}`):t.description;this.create({id:r,type:"error",message:h,description:m})}else if(t.success!==void 0){s=!1;let h=typeof t.success=="function"?await t.success(u):t.success,m=typeof t.description=="function"?await t.description(u):t.description;this.create({id:r,type:"success",message:h,description:m})}}).catch(async u=>{if(t.error!==void 0){s=!1;let h=typeof t.error=="function"?await t.error(u):t.error,m=typeof t.description=="function"?await t.description(u):t.description;this.create({id:r,type:"error",message:h,description:m})}}).finally(()=>{var u;s&&(this.dismiss(r),r=void 0),(u=t.finally)==null||u.call(t)}),r},this.custom=(e,t)=>{let r=(t==null?void 0:t.id)||yP++;return this.create({jsx:e(r),id:r,...t}),r},this.subscribers=[],this.toasts=[]}},ea=new aY,sY=(e,t)=>{let r=(t==null?void 0:t.id)||yP++;return ea.addToast({title:e,...t,id:r}),r},lY=e=>e&&typeof e=="object"&&"ok"in e&&typeof e.ok=="boolean"&&"status"in e&&typeof e.status=="number",cY=sY,uY=()=>ea.toasts;Object.assign(cY,{success:ea.success,info:ea.info,warning:ea.warning,error:ea.error,custom:ea.custom,message:ea.message,promise:ea.promise,dismiss:ea.dismiss,loading:ea.loading},{getHistory:uY});function dY(e,{insertAt:t}={}){if(typeof document>"u")return;let r=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",t==="top"&&r.firstChild?r.insertBefore(n,r.firstChild):r.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}dY(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999}:where([data-sonner-toaster][data-x-position="right"]){right:max(var(--offset),env(safe-area-inset-right))}:where([data-sonner-toaster][data-x-position="left"]){left:max(var(--offset),env(safe-area-inset-left))}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:max(var(--offset),env(safe-area-inset-top))}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:max(var(--offset),env(safe-area-inset-bottom))}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;background:var(--gray1);color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:0;right:0;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount, 0px));transition:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation:swipe-out .2s ease-out forwards}@keyframes swipe-out{0%{transform:translateY(calc(var(--lift) * var(--offset) + var(--swipe-amount)));opacity:1}to{transform:translateY(calc(var(--lift) * var(--offset) + var(--swipe-amount) + var(--lift) * -100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;--mobile-offset: 16px;right:var(--mobile-offset);left:var(--mobile-offset);width:100%}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset)}[data-sonner-toaster][data-y-position=bottom]{bottom:20px}[data-sonner-toaster][data-y-position=top]{top:20px}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset);right:var(--mobile-offset);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function l0(e){return e.label!==void 0}var hY=3,fY="32px",pY=4e3,mY=356,gY=14,yY=20,vY=200;function _Y(...e){return e.filter(Boolean).join(" ")}var xY=e=>{var t,r,n,s,u,h,m,o,_,E;let{invert:S,toast:A,unstyled:I,interacting:R,setHeights:k,visibleToasts:L,heights:N,index:z,toasts:F,expanded:U,removeToast:W,defaultRichColors:Y,closeButton:Q,style:Z,cancelButtonStyle:re,actionButtonStyle:ne,className:ue="",descriptionClassName:fe="",duration:Ee,position:Se,gap:je,loadingIcon:Le,expandByDefault:Ue,classNames:we,icons:Pe,closeButtonAriaLabel:rt="Close toast",pauseWhenPageIsHidden:$e,cn:Ge}=e,[Re,at]=be.useState(!1),[Et,vt]=be.useState(!1),[lt,gt]=be.useState(!1),[tt,ft]=be.useState(!1),[ht,Be]=be.useState(0),[zt,Ot]=be.useState(0),qt=be.useRef(null),Pt=be.useRef(null),nr=z===0,tr=z+1<=L,Yt=A.type,or=A.dismissible!==!1,wn=A.className||"",An=A.descriptionClassName||"",ii=be.useMemo(()=>N.findIndex(cr=>cr.toastId===A.id)||0,[N,A.id]),Vr=be.useMemo(()=>{var cr;return(cr=A.closeButton)!=null?cr:Q},[A.closeButton,Q]),Yn=be.useMemo(()=>A.duration||Ee||pY,[A.duration,Ee]),ln=be.useRef(0),hn=be.useRef(0),gn=be.useRef(0),oi=be.useRef(null),[Wo,Ti]=Se.split("-"),Jn=be.useMemo(()=>N.reduce((cr,Gr,ve)=>ve>=ii?cr:cr+Gr.height,0),[N,ii]),qi=oY(),So=A.invert||S,Eo=Yt==="loading";hn.current=be.useMemo(()=>ii*je+Jn,[ii,Jn]),be.useEffect(()=>{at(!0)},[]),be.useLayoutEffect(()=>{if(!Re)return;let cr=Pt.current,Gr=cr.style.height;cr.style.height="auto";let ve=cr.getBoundingClientRect().height;cr.style.height=Gr,Ot(ve),k(ie=>ie.find(oe=>oe.toastId===A.id)?ie.map(oe=>oe.toastId===A.id?{...oe,height:ve}:oe):[{toastId:A.id,height:ve,position:A.position},...ie])},[Re,A.title,A.description,k,A.id]);let Ai=be.useCallback(()=>{vt(!0),Be(hn.current),k(cr=>cr.filter(Gr=>Gr.toastId!==A.id)),setTimeout(()=>{W(A)},vY)},[A,W,k,hn]);be.useEffect(()=>{if(A.promise&&Yt==="loading"||A.duration===1/0||A.type==="loading")return;let cr,Gr=Yn;return U||R||$e&&qi?(()=>{if(gn.current<ln.current){let ve=new Date().getTime()-ln.current;Gr=Gr-ve}gn.current=new Date().getTime()})():Gr!==1/0&&(ln.current=new Date().getTime(),cr=setTimeout(()=>{var ve;(ve=A.onAutoClose)==null||ve.call(A,A),Ai()},Gr)),()=>clearTimeout(cr)},[U,R,Ue,A,Yn,Ai,A.promise,Yt,$e,qi]),be.useEffect(()=>{let cr=Pt.current;if(cr){let Gr=cr.getBoundingClientRect().height;return Ot(Gr),k(ve=>[{toastId:A.id,height:Gr,position:A.position},...ve]),()=>k(ve=>ve.filter(ie=>ie.toastId!==A.id))}},[k,A.id]),be.useEffect(()=>{A.delete&&Ai()},[Ai,A.delete]);function Ka(){return Pe!=null&&Pe.loading?be.createElement("div",{className:"sonner-loader","data-visible":Yt==="loading"},Pe.loading):Le?be.createElement("div",{className:"sonner-loader","data-visible":Yt==="loading"},Le):be.createElement(eY,{visible:Yt==="loading"})}return be.createElement("li",{"aria-live":A.important?"assertive":"polite","aria-atomic":"true",role:"status",tabIndex:0,ref:Pt,className:Ge(ue,wn,we==null?void 0:we.toast,(t=A==null?void 0:A.classNames)==null?void 0:t.toast,we==null?void 0:we.default,we==null?void 0:we[Yt],(r=A==null?void 0:A.classNames)==null?void 0:r[Yt]),"data-sonner-toast":"","data-rich-colors":(n=A.richColors)!=null?n:Y,"data-styled":!(A.jsx||A.unstyled||I),"data-mounted":Re,"data-promise":!!A.promise,"data-removed":Et,"data-visible":tr,"data-y-position":Wo,"data-x-position":Ti,"data-index":z,"data-front":nr,"data-swiping":lt,"data-dismissible":or,"data-type":Yt,"data-invert":So,"data-swipe-out":tt,"data-expanded":!!(U||Ue&&Re),style:{"--index":z,"--toasts-before":z,"--z-index":F.length-z,"--offset":`${Et?ht:hn.current}px`,"--initial-height":Ue?"auto":`${zt}px`,...Z,...A.style},onPointerDown:cr=>{Eo||!or||(qt.current=new Date,Be(hn.current),cr.target.setPointerCapture(cr.pointerId),cr.target.tagName!=="BUTTON"&&(gt(!0),oi.current={x:cr.clientX,y:cr.clientY}))},onPointerUp:()=>{var cr,Gr,ve,ie;if(tt||!or)return;oi.current=null;let oe=Number(((cr=Pt.current)==null?void 0:cr.style.getPropertyValue("--swipe-amount").replace("px",""))||0),xe=new Date().getTime()-((Gr=qt.current)==null?void 0:Gr.getTime()),Ie=Math.abs(oe)/xe;if(Math.abs(oe)>=yY||Ie>.11){Be(hn.current),(ve=A.onDismiss)==null||ve.call(A,A),Ai(),ft(!0);return}(ie=Pt.current)==null||ie.style.setProperty("--swipe-amount","0px"),gt(!1)},onPointerMove:cr=>{var Gr;if(!oi.current||!or)return;let ve=cr.clientY-oi.current.y,ie=cr.clientX-oi.current.x,oe=(Wo==="top"?Math.min:Math.max)(0,ve),xe=cr.pointerType==="touch"?10:2;Math.abs(oe)>xe?(Gr=Pt.current)==null||Gr.style.setProperty("--swipe-amount",`${ve}px`):Math.abs(ie)>xe&&(oi.current=null)}},Vr&&!A.jsx?be.createElement("button",{"aria-label":rt,"data-disabled":Eo,"data-close-button":!0,onClick:Eo||!or?()=>{}:()=>{var cr;Ai(),(cr=A.onDismiss)==null||cr.call(A,A)},className:Ge(we==null?void 0:we.closeButton,(s=A==null?void 0:A.classNames)==null?void 0:s.closeButton)},be.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},be.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),be.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"}))):null,A.jsx||be.isValidElement(A.title)?A.jsx||A.title:be.createElement(be.Fragment,null,Yt||A.icon||A.promise?be.createElement("div",{"data-icon":"",className:Ge(we==null?void 0:we.icon,(u=A==null?void 0:A.classNames)==null?void 0:u.icon)},A.promise||A.type==="loading"&&!A.icon?A.icon||Ka():null,A.type!=="loading"?A.icon||(Pe==null?void 0:Pe[Yt])||JK(Yt):null):null,be.createElement("div",{"data-content":"",className:Ge(we==null?void 0:we.content,(h=A==null?void 0:A.classNames)==null?void 0:h.content)},be.createElement("div",{"data-title":"",className:Ge(we==null?void 0:we.title,(m=A==null?void 0:A.classNames)==null?void 0:m.title)},A.title),A.description?be.createElement("div",{"data-description":"",className:Ge(fe,An,we==null?void 0:we.description,(o=A==null?void 0:A.classNames)==null?void 0:o.description)},A.description):null),be.isValidElement(A.cancel)?A.cancel:A.cancel&&l0(A.cancel)?be.createElement("button",{"data-button":!0,"data-cancel":!0,style:A.cancelButtonStyle||re,onClick:cr=>{var Gr,ve;l0(A.cancel)&&or&&((ve=(Gr=A.cancel).onClick)==null||ve.call(Gr,cr),Ai())},className:Ge(we==null?void 0:we.cancelButton,(_=A==null?void 0:A.classNames)==null?void 0:_.cancelButton)},A.cancel.label):null,be.isValidElement(A.action)?A.action:A.action&&l0(A.action)?be.createElement("button",{"data-button":!0,"data-action":!0,style:A.actionButtonStyle||ne,onClick:cr=>{var Gr,ve;l0(A.action)&&(cr.defaultPrevented||((ve=(Gr=A.action).onClick)==null||ve.call(Gr,cr),Ai()))},className:Ge(we==null?void 0:we.actionButton,(E=A==null?void 0:A.classNames)==null?void 0:E.actionButton)},A.action.label):null))};function VL(){if(typeof window>"u"||typeof document>"u")return"ltr";let e=document.documentElement.getAttribute("dir");return e==="auto"||!e?window.getComputedStyle(document.documentElement).direction:e}var bY=e=>{let{invert:t,position:r="bottom-right",hotkey:n=["altKey","KeyT"],expand:s,closeButton:u,className:h,offset:m,theme:o="light",richColors:_,duration:E,style:S,visibleToasts:A=hY,toastOptions:I,dir:R=VL(),gap:k=gY,loadingIcon:L,icons:N,containerAriaLabel:z="Notifications",pauseWhenPageIsHidden:F,cn:U=_Y}=e,[W,Y]=be.useState([]),Q=be.useMemo(()=>Array.from(new Set([r].concat(W.filter($e=>$e.position).map($e=>$e.position)))),[W,r]),[Z,re]=be.useState([]),[ne,ue]=be.useState(!1),[fe,Ee]=be.useState(!1),[Se,je]=be.useState(o!=="system"?o:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),Le=be.useRef(null),Ue=n.join("+").replace(/Key/g,"").replace(/Digit/g,""),we=be.useRef(null),Pe=be.useRef(!1),rt=be.useCallback($e=>{var Ge;(Ge=W.find(Re=>Re.id===$e.id))!=null&&Ge.delete||ea.dismiss($e.id),Y(Re=>Re.filter(({id:at})=>at!==$e.id))},[W]);return be.useEffect(()=>ea.subscribe($e=>{if($e.dismiss){Y(Ge=>Ge.map(Re=>Re.id===$e.id?{...Re,delete:!0}:Re));return}setTimeout(()=>{JF.flushSync(()=>{Y(Ge=>{let Re=Ge.findIndex(at=>at.id===$e.id);return Re!==-1?[...Ge.slice(0,Re),{...Ge[Re],...$e},...Ge.slice(Re+1)]:[$e,...Ge]})})})}),[]),be.useEffect(()=>{if(o!=="system"){je(o);return}o==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?je("dark"):je("light")),typeof window<"u"&&window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",({matches:$e})=>{je($e?"dark":"light")})},[o]),be.useEffect(()=>{W.length<=1&&ue(!1)},[W]),be.useEffect(()=>{let $e=Ge=>{var Re,at;n.every(Et=>Ge[Et]||Ge.code===Et)&&(ue(!0),(Re=Le.current)==null||Re.focus()),Ge.code==="Escape"&&(document.activeElement===Le.current||(at=Le.current)!=null&&at.contains(document.activeElement))&&ue(!1)};return document.addEventListener("keydown",$e),()=>document.removeEventListener("keydown",$e)},[n]),be.useEffect(()=>{if(Le.current)return()=>{we.current&&(we.current.focus({preventScroll:!0}),we.current=null,Pe.current=!1)}},[Le.current]),W.length?be.createElement("section",{"aria-label":`${z} ${Ue}`,tabIndex:-1},Q.map(($e,Ge)=>{var Re;let[at,Et]=$e.split("-");return be.createElement("ol",{key:$e,dir:R==="auto"?VL():R,tabIndex:-1,ref:Le,className:h,"data-sonner-toaster":!0,"data-theme":Se,"data-y-position":at,"data-x-position":Et,style:{"--front-toast-height":`${((Re=Z[0])==null?void 0:Re.height)||0}px`,"--offset":typeof m=="number"?`${m}px`:m||fY,"--width":`${mY}px`,"--gap":`${k}px`,...S},onBlur:vt=>{Pe.current&&!vt.currentTarget.contains(vt.relatedTarget)&&(Pe.current=!1,we.current&&(we.current.focus({preventScroll:!0}),we.current=null))},onFocus:vt=>{vt.target instanceof HTMLElement&&vt.target.dataset.dismissible==="false"||Pe.current||(Pe.current=!0,we.current=vt.relatedTarget)},onMouseEnter:()=>ue(!0),onMouseMove:()=>ue(!0),onMouseLeave:()=>{fe||ue(!1)},onPointerDown:vt=>{vt.target instanceof HTMLElement&&vt.target.dataset.dismissible==="false"||Ee(!0)},onPointerUp:()=>Ee(!1)},W.filter(vt=>!vt.position&&Ge===0||vt.position===$e).map((vt,lt)=>{var gt,tt;return be.createElement(xY,{key:vt.id,icons:N,index:lt,toast:vt,defaultRichColors:_,duration:(gt=I==null?void 0:I.duration)!=null?gt:E,className:I==null?void 0:I.className,descriptionClassName:I==null?void 0:I.descriptionClassName,invert:t,visibleToasts:A,closeButton:(tt=I==null?void 0:I.closeButton)!=null?tt:u,interacting:fe,position:$e,style:I==null?void 0:I.style,unstyled:I==null?void 0:I.unstyled,classNames:I==null?void 0:I.classNames,cancelButtonStyle:I==null?void 0:I.cancelButtonStyle,actionButtonStyle:I==null?void 0:I.actionButtonStyle,removeToast:rt,toasts:W.filter(ft=>ft.position==vt.position),heights:Z.filter(ft=>ft.position==vt.position),setHeights:re,expandByDefault:s,gap:k,loadingIcon:L,expanded:ne,pauseWhenPageIsHidden:F,cn:U})}))})):null};const wY=({...e})=>{const{theme:t="system"}=YK();return M.jsx(bY,{theme:t,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...e})};var SY=j1.useId||(()=>{}),EY=0;function ql(e){const[t,r]=V.useState(SY());return Wi(()=>{e||r(n=>n??String(EY++))},[e]),e||(t?`radix-${t}`:"")}const TY=["top","right","bottom","left"],Pu=Math.min,ia=Math.max,wb=Math.round,c0=Math.floor,Cu=e=>({x:e,y:e}),AY={left:"right",right:"left",bottom:"top",top:"bottom"},PY={start:"end",end:"start"};function vP(e,t,r){return ia(e,Pu(t,r))}function rc(e,t){return typeof e=="function"?e(t):e}function nc(e){return e.split("-")[0]}function Qp(e){return e.split("-")[1]}function uI(e){return e==="x"?"y":"x"}function dI(e){return e==="y"?"height":"width"}function Mu(e){return["top","bottom"].includes(nc(e))?"y":"x"}function hI(e){return uI(Mu(e))}function CY(e,t,r){r===void 0&&(r=!1);const n=Qp(e),s=hI(e),u=dI(s);let h=s==="x"?n===(r?"end":"start")?"right":"left":n==="start"?"bottom":"top";return t.reference[u]>t.floating[u]&&(h=Sb(h)),[h,Sb(h)]}function MY(e){const t=Sb(e);return[_P(e),t,_P(t)]}function _P(e){return e.replace(/start|end/g,t=>PY[t])}function IY(e,t,r){const n=["left","right"],s=["right","left"],u=["top","bottom"],h=["bottom","top"];switch(e){case"top":case"bottom":return r?t?s:n:t?n:s;case"left":case"right":return t?u:h;default:return[]}}function OY(e,t,r,n){const s=Qp(e);let u=IY(nc(e),r==="start",n);return s&&(u=u.map(h=>h+"-"+s),t&&(u=u.concat(u.map(_P)))),u}function Sb(e){return e.replace(/left|right|bottom|top/g,t=>AY[t])}function kY(e){return{top:0,right:0,bottom:0,left:0,...e}}function B4(e){return typeof e!="number"?kY(e):{top:e,right:e,bottom:e,left:e}}function Eb(e){const{x:t,y:r,width:n,height:s}=e;return{width:n,height:s,top:r,left:t,right:t+n,bottom:r+s,x:t,y:r}}function GL(e,t,r){let{reference:n,floating:s}=e;const u=Mu(t),h=hI(t),m=dI(h),o=nc(t),_=u==="y",E=n.x+n.width/2-s.width/2,S=n.y+n.height/2-s.height/2,A=n[m]/2-s[m]/2;let I;switch(o){case"top":I={x:E,y:n.y-s.height};break;case"bottom":I={x:E,y:n.y+n.height};break;case"right":I={x:n.x+n.width,y:S};break;case"left":I={x:n.x-s.width,y:S};break;default:I={x:n.x,y:n.y}}switch(Qp(t)){case"start":I[h]-=A*(r&&_?-1:1);break;case"end":I[h]+=A*(r&&_?-1:1);break}return I}const DY=async(e,t,r)=>{const{placement:n="bottom",strategy:s="absolute",middleware:u=[],platform:h}=r,m=u.filter(Boolean),o=await(h.isRTL==null?void 0:h.isRTL(t));let _=await h.getElementRects({reference:e,floating:t,strategy:s}),{x:E,y:S}=GL(_,n,o),A=n,I={},R=0;for(let k=0;k<m.length;k++){const{name:L,fn:N}=m[k],{x:z,y:F,data:U,reset:W}=await N({x:E,y:S,initialPlacement:n,placement:A,strategy:s,middlewareData:I,rects:_,platform:h,elements:{reference:e,floating:t}});E=z??E,S=F??S,I={...I,[L]:{...I[L],...U}},W&&R<=50&&(R++,typeof W=="object"&&(W.placement&&(A=W.placement),W.rects&&(_=W.rects===!0?await h.getElementRects({reference:e,floating:t,strategy:s}):W.rects),{x:E,y:S}=GL(_,A,o)),k=-1)}return{x:E,y:S,placement:A,strategy:s,middlewareData:I}};async function nv(e,t){var r;t===void 0&&(t={});const{x:n,y:s,platform:u,rects:h,elements:m,strategy:o}=e,{boundary:_="clippingAncestors",rootBoundary:E="viewport",elementContext:S="floating",altBoundary:A=!1,padding:I=0}=rc(t,e),R=B4(I),L=m[A?S==="floating"?"reference":"floating":S],N=Eb(await u.getClippingRect({element:(r=await(u.isElement==null?void 0:u.isElement(L)))==null||r?L:L.contextElement||await(u.getDocumentElement==null?void 0:u.getDocumentElement(m.floating)),boundary:_,rootBoundary:E,strategy:o})),z=S==="floating"?{x:n,y:s,width:h.floating.width,height:h.floating.height}:h.reference,F=await(u.getOffsetParent==null?void 0:u.getOffsetParent(m.floating)),U=await(u.isElement==null?void 0:u.isElement(F))?await(u.getScale==null?void 0:u.getScale(F))||{x:1,y:1}:{x:1,y:1},W=Eb(u.convertOffsetParentRelativeRectToViewportRelativeRect?await u.convertOffsetParentRelativeRectToViewportRelativeRect({elements:m,rect:z,offsetParent:F,strategy:o}):z);return{top:(N.top-W.top+R.top)/U.y,bottom:(W.bottom-N.bottom+R.bottom)/U.y,left:(N.left-W.left+R.left)/U.x,right:(W.right-N.right+R.right)/U.x}}const RY=e=>({name:"arrow",options:e,async fn(t){const{x:r,y:n,placement:s,rects:u,platform:h,elements:m,middlewareData:o}=t,{element:_,padding:E=0}=rc(e,t)||{};if(_==null)return{};const S=B4(E),A={x:r,y:n},I=hI(s),R=dI(I),k=await h.getDimensions(_),L=I==="y",N=L?"top":"left",z=L?"bottom":"right",F=L?"clientHeight":"clientWidth",U=u.reference[R]+u.reference[I]-A[I]-u.floating[R],W=A[I]-u.reference[I],Y=await(h.getOffsetParent==null?void 0:h.getOffsetParent(_));let Q=Y?Y[F]:0;(!Q||!await(h.isElement==null?void 0:h.isElement(Y)))&&(Q=m.floating[F]||u.floating[R]);const Z=U/2-W/2,re=Q/2-k[R]/2-1,ne=Pu(S[N],re),ue=Pu(S[z],re),fe=ne,Ee=Q-k[R]-ue,Se=Q/2-k[R]/2+Z,je=vP(fe,Se,Ee),Le=!o.arrow&&Qp(s)!=null&&Se!==je&&u.reference[R]/2-(Se<fe?ne:ue)-k[R]/2<0,Ue=Le?Se<fe?Se-fe:Se-Ee:0;return{[I]:A[I]+Ue,data:{[I]:je,centerOffset:Se-je-Ue,...Le&&{alignmentOffset:Ue}},reset:Le}}}),LY=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var r,n;const{placement:s,middlewareData:u,rects:h,initialPlacement:m,platform:o,elements:_}=t,{mainAxis:E=!0,crossAxis:S=!0,fallbackPlacements:A,fallbackStrategy:I="bestFit",fallbackAxisSideDirection:R="none",flipAlignment:k=!0,...L}=rc(e,t);if((r=u.arrow)!=null&&r.alignmentOffset)return{};const N=nc(s),z=Mu(m),F=nc(m)===m,U=await(o.isRTL==null?void 0:o.isRTL(_.floating)),W=A||(F||!k?[Sb(m)]:MY(m)),Y=R!=="none";!A&&Y&&W.push(...OY(m,k,R,U));const Q=[m,...W],Z=await nv(t,L),re=[];let ne=((n=u.flip)==null?void 0:n.overflows)||[];if(E&&re.push(Z[N]),S){const Se=CY(s,h,U);re.push(Z[Se[0]],Z[Se[1]])}if(ne=[...ne,{placement:s,overflows:re}],!re.every(Se=>Se<=0)){var ue,fe;const Se=(((ue=u.flip)==null?void 0:ue.index)||0)+1,je=Q[Se];if(je)return{data:{index:Se,overflows:ne},reset:{placement:je}};let Le=(fe=ne.filter(Ue=>Ue.overflows[0]<=0).sort((Ue,we)=>Ue.overflows[1]-we.overflows[1])[0])==null?void 0:fe.placement;if(!Le)switch(I){case"bestFit":{var Ee;const Ue=(Ee=ne.filter(we=>{if(Y){const Pe=Mu(we.placement);return Pe===z||Pe==="y"}return!0}).map(we=>[we.placement,we.overflows.filter(Pe=>Pe>0).reduce((Pe,rt)=>Pe+rt,0)]).sort((we,Pe)=>we[1]-Pe[1])[0])==null?void 0:Ee[0];Ue&&(Le=Ue);break}case"initialPlacement":Le=m;break}if(s!==Le)return{reset:{placement:Le}}}return{}}}};function WL(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function qL(e){return TY.some(t=>e[t]>=0)}const jY=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:r}=t,{strategy:n="referenceHidden",...s}=rc(e,t);switch(n){case"referenceHidden":{const u=await nv(t,{...s,elementContext:"reference"}),h=WL(u,r.reference);return{data:{referenceHiddenOffsets:h,referenceHidden:qL(h)}}}case"escaped":{const u=await nv(t,{...s,altBoundary:!0}),h=WL(u,r.floating);return{data:{escapedOffsets:h,escaped:qL(h)}}}default:return{}}}}};async function zY(e,t){const{placement:r,platform:n,elements:s}=e,u=await(n.isRTL==null?void 0:n.isRTL(s.floating)),h=nc(r),m=Qp(r),o=Mu(r)==="y",_=["left","top"].includes(h)?-1:1,E=u&&o?-1:1,S=rc(t,e);let{mainAxis:A,crossAxis:I,alignmentAxis:R}=typeof S=="number"?{mainAxis:S,crossAxis:0,alignmentAxis:null}:{mainAxis:S.mainAxis||0,crossAxis:S.crossAxis||0,alignmentAxis:S.alignmentAxis};return m&&typeof R=="number"&&(I=m==="end"?R*-1:R),o?{x:I*E,y:A*_}:{x:A*_,y:I*E}}const NY=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var r,n;const{x:s,y:u,placement:h,middlewareData:m}=t,o=await zY(t,e);return h===((r=m.offset)==null?void 0:r.placement)&&(n=m.arrow)!=null&&n.alignmentOffset?{}:{x:s+o.x,y:u+o.y,data:{...o,placement:h}}}}},BY=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:r,y:n,placement:s}=t,{mainAxis:u=!0,crossAxis:h=!1,limiter:m={fn:L=>{let{x:N,y:z}=L;return{x:N,y:z}}},...o}=rc(e,t),_={x:r,y:n},E=await nv(t,o),S=Mu(nc(s)),A=uI(S);let I=_[A],R=_[S];if(u){const L=A==="y"?"top":"left",N=A==="y"?"bottom":"right",z=I+E[L],F=I-E[N];I=vP(z,I,F)}if(h){const L=S==="y"?"top":"left",N=S==="y"?"bottom":"right",z=R+E[L],F=R-E[N];R=vP(z,R,F)}const k=m.fn({...t,[A]:I,[S]:R});return{...k,data:{x:k.x-r,y:k.y-n,enabled:{[A]:u,[S]:h}}}}}},$Y=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:r,y:n,placement:s,rects:u,middlewareData:h}=t,{offset:m=0,mainAxis:o=!0,crossAxis:_=!0}=rc(e,t),E={x:r,y:n},S=Mu(s),A=uI(S);let I=E[A],R=E[S];const k=rc(m,t),L=typeof k=="number"?{mainAxis:k,crossAxis:0}:{mainAxis:0,crossAxis:0,...k};if(o){const F=A==="y"?"height":"width",U=u.reference[A]-u.floating[F]+L.mainAxis,W=u.reference[A]+u.reference[F]-L.mainAxis;I<U?I=U:I>W&&(I=W)}if(_){var N,z;const F=A==="y"?"width":"height",U=["top","left"].includes(nc(s)),W=u.reference[S]-u.floating[F]+(U&&((N=h.offset)==null?void 0:N[S])||0)+(U?0:L.crossAxis),Y=u.reference[S]+u.reference[F]+(U?0:((z=h.offset)==null?void 0:z[S])||0)-(U?L.crossAxis:0);R<W?R=W:R>Y&&(R=Y)}return{[A]:I,[S]:R}}}},FY=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var r,n;const{placement:s,rects:u,platform:h,elements:m}=t,{apply:o=()=>{},..._}=rc(e,t),E=await nv(t,_),S=nc(s),A=Qp(s),I=Mu(s)==="y",{width:R,height:k}=u.floating;let L,N;S==="top"||S==="bottom"?(L=S,N=A===(await(h.isRTL==null?void 0:h.isRTL(m.floating))?"start":"end")?"left":"right"):(N=S,L=A==="end"?"top":"bottom");const z=k-E.top-E.bottom,F=R-E.left-E.right,U=Pu(k-E[L],z),W=Pu(R-E[N],F),Y=!t.middlewareData.shift;let Q=U,Z=W;if((r=t.middlewareData.shift)!=null&&r.enabled.x&&(Z=F),(n=t.middlewareData.shift)!=null&&n.enabled.y&&(Q=z),Y&&!A){const ne=ia(E.left,0),ue=ia(E.right,0),fe=ia(E.top,0),Ee=ia(E.bottom,0);I?Z=R-2*(ne!==0||ue!==0?ne+ue:ia(E.left,E.right)):Q=k-2*(fe!==0||Ee!==0?fe+Ee:ia(E.top,E.bottom))}await o({...t,availableWidth:Z,availableHeight:Q});const re=await h.getDimensions(m.floating);return R!==re.width||k!==re.height?{reset:{rects:!0}}:{}}}};function tw(){return typeof window<"u"}function em(e){return $4(e)?(e.nodeName||"").toLowerCase():"#document"}function ua(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function fl(e){var t;return(t=($4(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function $4(e){return tw()?e instanceof Node||e instanceof ua(e).Node:!1}function Ds(e){return tw()?e instanceof Element||e instanceof ua(e).Element:!1}function dl(e){return tw()?e instanceof HTMLElement||e instanceof ua(e).HTMLElement:!1}function HL(e){return!tw()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof ua(e).ShadowRoot}function r_(e){const{overflow:t,overflowX:r,overflowY:n,display:s}=Rs(e);return/auto|scroll|overlay|hidden|clip/.test(t+n+r)&&!["inline","contents"].includes(s)}function UY(e){return["table","td","th"].includes(em(e))}function rw(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch{return!1}})}function fI(e){const t=pI(),r=Ds(e)?Rs(e):e;return r.transform!=="none"||r.perspective!=="none"||(r.containerType?r.containerType!=="normal":!1)||!t&&(r.backdropFilter?r.backdropFilter!=="none":!1)||!t&&(r.filter?r.filter!=="none":!1)||["transform","perspective","filter"].some(n=>(r.willChange||"").includes(n))||["paint","layout","strict","content"].some(n=>(r.contain||"").includes(n))}function VY(e){let t=Iu(e);for(;dl(t)&&!wp(t);){if(fI(t))return t;if(rw(t))return null;t=Iu(t)}return null}function pI(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function wp(e){return["html","body","#document"].includes(em(e))}function Rs(e){return ua(e).getComputedStyle(e)}function nw(e){return Ds(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Iu(e){if(em(e)==="html")return e;const t=e.assignedSlot||e.parentNode||HL(e)&&e.host||fl(e);return HL(t)?t.host:t}function F4(e){const t=Iu(e);return wp(t)?e.ownerDocument?e.ownerDocument.body:e.body:dl(t)&&r_(t)?t:F4(t)}function iv(e,t,r){var n;t===void 0&&(t=[]),r===void 0&&(r=!0);const s=F4(e),u=s===((n=e.ownerDocument)==null?void 0:n.body),h=ua(s);if(u){const m=xP(h);return t.concat(h,h.visualViewport||[],r_(s)?s:[],m&&r?iv(m):[])}return t.concat(s,iv(s,[],r))}function xP(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function U4(e){const t=Rs(e);let r=parseFloat(t.width)||0,n=parseFloat(t.height)||0;const s=dl(e),u=s?e.offsetWidth:r,h=s?e.offsetHeight:n,m=wb(r)!==u||wb(n)!==h;return m&&(r=u,n=h),{width:r,height:n,$:m}}function mI(e){return Ds(e)?e:e.contextElement}function Yf(e){const t=mI(e);if(!dl(t))return Cu(1);const r=t.getBoundingClientRect(),{width:n,height:s,$:u}=U4(t);let h=(u?wb(r.width):r.width)/n,m=(u?wb(r.height):r.height)/s;return(!h||!Number.isFinite(h))&&(h=1),(!m||!Number.isFinite(m))&&(m=1),{x:h,y:m}}const GY=Cu(0);function V4(e){const t=ua(e);return!pI()||!t.visualViewport?GY:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function WY(e,t,r){return t===void 0&&(t=!1),!r||t&&r!==ua(e)?!1:t}function oh(e,t,r,n){t===void 0&&(t=!1),r===void 0&&(r=!1);const s=e.getBoundingClientRect(),u=mI(e);let h=Cu(1);t&&(n?Ds(n)&&(h=Yf(n)):h=Yf(e));const m=WY(u,r,n)?V4(u):Cu(0);let o=(s.left+m.x)/h.x,_=(s.top+m.y)/h.y,E=s.width/h.x,S=s.height/h.y;if(u){const A=ua(u),I=n&&Ds(n)?ua(n):n;let R=A,k=xP(R);for(;k&&n&&I!==R;){const L=Yf(k),N=k.getBoundingClientRect(),z=Rs(k),F=N.left+(k.clientLeft+parseFloat(z.paddingLeft))*L.x,U=N.top+(k.clientTop+parseFloat(z.paddingTop))*L.y;o*=L.x,_*=L.y,E*=L.x,S*=L.y,o+=F,_+=U,R=ua(k),k=xP(R)}}return Eb({width:E,height:S,x:o,y:_})}function qY(e){let{elements:t,rect:r,offsetParent:n,strategy:s}=e;const u=s==="fixed",h=fl(n),m=t?rw(t.floating):!1;if(n===h||m&&u)return r;let o={scrollLeft:0,scrollTop:0},_=Cu(1);const E=Cu(0),S=dl(n);if((S||!S&&!u)&&((em(n)!=="body"||r_(h))&&(o=nw(n)),dl(n))){const A=oh(n);_=Yf(n),E.x=A.x+n.clientLeft,E.y=A.y+n.clientTop}return{width:r.width*_.x,height:r.height*_.y,x:r.x*_.x-o.scrollLeft*_.x+E.x,y:r.y*_.y-o.scrollTop*_.y+E.y}}function HY(e){return Array.from(e.getClientRects())}function bP(e,t){const r=nw(e).scrollLeft;return t?t.left+r:oh(fl(e)).left+r}function XY(e){const t=fl(e),r=nw(e),n=e.ownerDocument.body,s=ia(t.scrollWidth,t.clientWidth,n.scrollWidth,n.clientWidth),u=ia(t.scrollHeight,t.clientHeight,n.scrollHeight,n.clientHeight);let h=-r.scrollLeft+bP(e);const m=-r.scrollTop;return Rs(n).direction==="rtl"&&(h+=ia(t.clientWidth,n.clientWidth)-s),{width:s,height:u,x:h,y:m}}function ZY(e,t){const r=ua(e),n=fl(e),s=r.visualViewport;let u=n.clientWidth,h=n.clientHeight,m=0,o=0;if(s){u=s.width,h=s.height;const _=pI();(!_||_&&t==="fixed")&&(m=s.offsetLeft,o=s.offsetTop)}return{width:u,height:h,x:m,y:o}}function KY(e,t){const r=oh(e,!0,t==="fixed"),n=r.top+e.clientTop,s=r.left+e.clientLeft,u=dl(e)?Yf(e):Cu(1),h=e.clientWidth*u.x,m=e.clientHeight*u.y,o=s*u.x,_=n*u.y;return{width:h,height:m,x:o,y:_}}function XL(e,t,r){let n;if(t==="viewport")n=ZY(e,r);else if(t==="document")n=XY(fl(e));else if(Ds(t))n=KY(t,r);else{const s=V4(e);n={...t,x:t.x-s.x,y:t.y-s.y}}return Eb(n)}function G4(e,t){const r=Iu(e);return r===t||!Ds(r)||wp(r)?!1:Rs(r).position==="fixed"||G4(r,t)}function YY(e,t){const r=t.get(e);if(r)return r;let n=iv(e,[],!1).filter(m=>Ds(m)&&em(m)!=="body"),s=null;const u=Rs(e).position==="fixed";let h=u?Iu(e):e;for(;Ds(h)&&!wp(h);){const m=Rs(h),o=fI(h);!o&&m.position==="fixed"&&(s=null),(u?!o&&!s:!o&&m.position==="static"&&!!s&&["absolute","fixed"].includes(s.position)||r_(h)&&!o&&G4(e,h))?n=n.filter(E=>E!==h):s=m,h=Iu(h)}return t.set(e,n),n}function JY(e){let{element:t,boundary:r,rootBoundary:n,strategy:s}=e;const h=[...r==="clippingAncestors"?rw(t)?[]:YY(t,this._c):[].concat(r),n],m=h[0],o=h.reduce((_,E)=>{const S=XL(t,E,s);return _.top=ia(S.top,_.top),_.right=Pu(S.right,_.right),_.bottom=Pu(S.bottom,_.bottom),_.left=ia(S.left,_.left),_},XL(t,m,s));return{width:o.right-o.left,height:o.bottom-o.top,x:o.left,y:o.top}}function QY(e){const{width:t,height:r}=U4(e);return{width:t,height:r}}function e2(e,t,r){const n=dl(t),s=fl(t),u=r==="fixed",h=oh(e,!0,u,t);let m={scrollLeft:0,scrollTop:0};const o=Cu(0);if(n||!n&&!u)if((em(t)!=="body"||r_(s))&&(m=nw(t)),n){const I=oh(t,!0,u,t);o.x=I.x+t.clientLeft,o.y=I.y+t.clientTop}else s&&(o.x=bP(s));let _=0,E=0;if(s&&!n&&!u){const I=s.getBoundingClientRect();E=I.top+m.scrollTop,_=I.left+m.scrollLeft-bP(s,I)}const S=h.left+m.scrollLeft-o.x-_,A=h.top+m.scrollTop-o.y-E;return{x:S,y:A,width:h.width,height:h.height}}function TT(e){return Rs(e).position==="static"}function ZL(e,t){if(!dl(e)||Rs(e).position==="fixed")return null;if(t)return t(e);let r=e.offsetParent;return fl(e)===r&&(r=r.ownerDocument.body),r}function W4(e,t){const r=ua(e);if(rw(e))return r;if(!dl(e)){let s=Iu(e);for(;s&&!wp(s);){if(Ds(s)&&!TT(s))return s;s=Iu(s)}return r}let n=ZL(e,t);for(;n&&UY(n)&&TT(n);)n=ZL(n,t);return n&&wp(n)&&TT(n)&&!fI(n)?r:n||VY(e)||r}const t2=async function(e){const t=this.getOffsetParent||W4,r=this.getDimensions,n=await r(e.floating);return{reference:e2(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function r2(e){return Rs(e).direction==="rtl"}const n2={convertOffsetParentRelativeRectToViewportRelativeRect:qY,getDocumentElement:fl,getClippingRect:JY,getOffsetParent:W4,getElementRects:t2,getClientRects:HY,getDimensions:QY,getScale:Yf,isElement:Ds,isRTL:r2};function i2(e,t){let r=null,n;const s=fl(e);function u(){var m;clearTimeout(n),(m=r)==null||m.disconnect(),r=null}function h(m,o){m===void 0&&(m=!1),o===void 0&&(o=1),u();const{left:_,top:E,width:S,height:A}=e.getBoundingClientRect();if(m||t(),!S||!A)return;const I=c0(E),R=c0(s.clientWidth-(_+S)),k=c0(s.clientHeight-(E+A)),L=c0(_),z={rootMargin:-I+"px "+-R+"px "+-k+"px "+-L+"px",threshold:ia(0,Pu(1,o))||1};let F=!0;function U(W){const Y=W[0].intersectionRatio;if(Y!==o){if(!F)return h();Y?h(!1,Y):n=setTimeout(()=>{h(!1,1e-7)},1e3)}F=!1}try{r=new IntersectionObserver(U,{...z,root:s.ownerDocument})}catch{r=new IntersectionObserver(U,z)}r.observe(e)}return h(!0),u}function o2(e,t,r,n){n===void 0&&(n={});const{ancestorScroll:s=!0,ancestorResize:u=!0,elementResize:h=typeof ResizeObserver=="function",layoutShift:m=typeof IntersectionObserver=="function",animationFrame:o=!1}=n,_=mI(e),E=s||u?[..._?iv(_):[],...iv(t)]:[];E.forEach(N=>{s&&N.addEventListener("scroll",r,{passive:!0}),u&&N.addEventListener("resize",r)});const S=_&&m?i2(_,r):null;let A=-1,I=null;h&&(I=new ResizeObserver(N=>{let[z]=N;z&&z.target===_&&I&&(I.unobserve(t),cancelAnimationFrame(A),A=requestAnimationFrame(()=>{var F;(F=I)==null||F.observe(t)})),r()}),_&&!o&&I.observe(_),I.observe(t));let R,k=o?oh(e):null;o&&L();function L(){const N=oh(e);k&&(N.x!==k.x||N.y!==k.y||N.width!==k.width||N.height!==k.height)&&r(),k=N,R=requestAnimationFrame(L)}return r(),()=>{var N;E.forEach(z=>{s&&z.removeEventListener("scroll",r),u&&z.removeEventListener("resize",r)}),S==null||S(),(N=I)==null||N.disconnect(),I=null,o&&cancelAnimationFrame(R)}}const a2=NY,s2=BY,l2=LY,c2=FY,u2=jY,KL=RY,d2=$Y,h2=(e,t,r)=>{const n=new Map,s={platform:n2,...r},u={...s.platform,_c:n};return DY(e,t,{...s,platform:u})};var W0=typeof document<"u"?V.useLayoutEffect:V.useEffect;function Tb(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let r,n,s;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(r=e.length,r!==t.length)return!1;for(n=r;n--!==0;)if(!Tb(e[n],t[n]))return!1;return!0}if(s=Object.keys(e),r=s.length,r!==Object.keys(t).length)return!1;for(n=r;n--!==0;)if(!{}.hasOwnProperty.call(t,s[n]))return!1;for(n=r;n--!==0;){const u=s[n];if(!(u==="_owner"&&e.$$typeof)&&!Tb(e[u],t[u]))return!1}return!0}return e!==e&&t!==t}function q4(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function YL(e,t){const r=q4(e);return Math.round(t*r)/r}function AT(e){const t=V.useRef(e);return W0(()=>{t.current=e}),t}function f2(e){e===void 0&&(e={});const{placement:t="bottom",strategy:r="absolute",middleware:n=[],platform:s,elements:{reference:u,floating:h}={},transform:m=!0,whileElementsMounted:o,open:_}=e,[E,S]=V.useState({x:0,y:0,strategy:r,placement:t,middlewareData:{},isPositioned:!1}),[A,I]=V.useState(n);Tb(A,n)||I(n);const[R,k]=V.useState(null),[L,N]=V.useState(null),z=V.useCallback(we=>{we!==Y.current&&(Y.current=we,k(we))},[]),F=V.useCallback(we=>{we!==Q.current&&(Q.current=we,N(we))},[]),U=u||R,W=h||L,Y=V.useRef(null),Q=V.useRef(null),Z=V.useRef(E),re=o!=null,ne=AT(o),ue=AT(s),fe=AT(_),Ee=V.useCallback(()=>{if(!Y.current||!Q.current)return;const we={placement:t,strategy:r,middleware:A};ue.current&&(we.platform=ue.current),h2(Y.current,Q.current,we).then(Pe=>{const rt={...Pe,isPositioned:fe.current!==!1};Se.current&&!Tb(Z.current,rt)&&(Z.current=rt,mh.flushSync(()=>{S(rt)}))})},[A,t,r,ue,fe]);W0(()=>{_===!1&&Z.current.isPositioned&&(Z.current.isPositioned=!1,S(we=>({...we,isPositioned:!1})))},[_]);const Se=V.useRef(!1);W0(()=>(Se.current=!0,()=>{Se.current=!1}),[]),W0(()=>{if(U&&(Y.current=U),W&&(Q.current=W),U&&W){if(ne.current)return ne.current(U,W,Ee);Ee()}},[U,W,Ee,ne,re]);const je=V.useMemo(()=>({reference:Y,floating:Q,setReference:z,setFloating:F}),[z,F]),Le=V.useMemo(()=>({reference:U,floating:W}),[U,W]),Ue=V.useMemo(()=>{const we={position:r,left:0,top:0};if(!Le.floating)return we;const Pe=YL(Le.floating,E.x),rt=YL(Le.floating,E.y);return m?{...we,transform:"translate("+Pe+"px, "+rt+"px)",...q4(Le.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:Pe,top:rt}},[r,m,Le.floating,E.x,E.y]);return V.useMemo(()=>({...E,update:Ee,refs:je,elements:Le,floatingStyles:Ue}),[E,Ee,je,Le,Ue])}const p2=e=>{function t(r){return{}.hasOwnProperty.call(r,"current")}return{name:"arrow",options:e,fn(r){const{element:n,padding:s}=typeof e=="function"?e(r):e;return n&&t(n)?n.current!=null?KL({element:n.current,padding:s}).fn(r):{}:n?KL({element:n,padding:s}).fn(r):{}}}},m2=(e,t)=>({...a2(e),options:[e,t]}),g2=(e,t)=>({...s2(e),options:[e,t]}),y2=(e,t)=>({...d2(e),options:[e,t]}),v2=(e,t)=>({...l2(e),options:[e,t]}),_2=(e,t)=>({...c2(e),options:[e,t]}),x2=(e,t)=>({...u2(e),options:[e,t]}),b2=(e,t)=>({...p2(e),options:[e,t]});var w2="Arrow",H4=V.forwardRef((e,t)=>{const{children:r,width:n=10,height:s=5,...u}=e;return M.jsx(vr.svg,{...u,ref:t,width:n,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?r:M.jsx("polygon",{points:"0,0 30,0 15,10"})})});H4.displayName=w2;var S2=H4;function E2(e,t=[]){let r=[];function n(u,h){const m=V.createContext(h),o=r.length;r=[...r,h];function _(S){const{scope:A,children:I,...R}=S,k=(A==null?void 0:A[e][o])||m,L=V.useMemo(()=>R,Object.values(R));return M.jsx(k.Provider,{value:L,children:I})}function E(S,A){const I=(A==null?void 0:A[e][o])||m,R=V.useContext(I);if(R)return R;if(h!==void 0)return h;throw new Error(`\`${S}\` must be used within \`${u}\``)}return _.displayName=u+"Provider",[_,E]}const s=()=>{const u=r.map(h=>V.createContext(h));return function(m){const o=(m==null?void 0:m[e])||u;return V.useMemo(()=>({[`__scope${e}`]:{...m,[e]:o}}),[m,o])}};return s.scopeName=e,[n,T2(s,...t)]}function T2(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const n=e.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(u){const h=n.reduce((m,{useScope:o,scopeName:_})=>{const S=o(u)[`__scope${_}`];return{...m,...S}},{});return V.useMemo(()=>({[`__scope${t.scopeName}`]:h}),[h])}};return r.scopeName=t.scopeName,r}function X4(e){const[t,r]=V.useState(void 0);return Wi(()=>{if(e){r({width:e.offsetWidth,height:e.offsetHeight});const n=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const u=s[0];let h,m;if("borderBoxSize"in u){const o=u.borderBoxSize,_=Array.isArray(o)?o[0]:o;h=_.inlineSize,m=_.blockSize}else h=e.offsetWidth,m=e.offsetHeight;r({width:h,height:m})});return n.observe(e,{box:"border-box"}),()=>n.unobserve(e)}else r(void 0)},[e]),t}var gI="Popper",[Z4,iw]=E2(gI),[A2,K4]=Z4(gI),Y4=e=>{const{__scopePopper:t,children:r}=e,[n,s]=V.useState(null);return M.jsx(A2,{scope:t,anchor:n,onAnchorChange:s,children:r})};Y4.displayName=gI;var J4="PopperAnchor",Q4=V.forwardRef((e,t)=>{const{__scopePopper:r,virtualRef:n,...s}=e,u=K4(J4,r),h=V.useRef(null),m=Ur(t,h);return V.useEffect(()=>{u.onAnchorChange((n==null?void 0:n.current)||h.current)}),n?null:M.jsx(vr.div,{...s,ref:m})});Q4.displayName=J4;var yI="PopperContent",[P2,C2]=Z4(yI),e5=V.forwardRef((e,t)=>{var lt,gt,tt,ft,ht,Be;const{__scopePopper:r,side:n="bottom",sideOffset:s=0,align:u="center",alignOffset:h=0,arrowPadding:m=0,avoidCollisions:o=!0,collisionBoundary:_=[],collisionPadding:E=0,sticky:S="partial",hideWhenDetached:A=!1,updatePositionStrategy:I="optimized",onPlaced:R,...k}=e,L=K4(yI,r),[N,z]=V.useState(null),F=Ur(t,zt=>z(zt)),[U,W]=V.useState(null),Y=X4(U),Q=(Y==null?void 0:Y.width)??0,Z=(Y==null?void 0:Y.height)??0,re=n+(u!=="center"?"-"+u:""),ne=typeof E=="number"?E:{top:0,right:0,bottom:0,left:0,...E},ue=Array.isArray(_)?_:[_],fe=ue.length>0,Ee={padding:ne,boundary:ue.filter(I2),altBoundary:fe},{refs:Se,floatingStyles:je,placement:Le,isPositioned:Ue,middlewareData:we}=f2({strategy:"fixed",placement:re,whileElementsMounted:(...zt)=>o2(...zt,{animationFrame:I==="always"}),elements:{reference:L.anchor},middleware:[m2({mainAxis:s+Z,alignmentAxis:h}),o&&g2({mainAxis:!0,crossAxis:!1,limiter:S==="partial"?y2():void 0,...Ee}),o&&v2({...Ee}),_2({...Ee,apply:({elements:zt,rects:Ot,availableWidth:qt,availableHeight:Pt})=>{const{width:nr,height:tr}=Ot.reference,Yt=zt.floating.style;Yt.setProperty("--radix-popper-available-width",`${qt}px`),Yt.setProperty("--radix-popper-available-height",`${Pt}px`),Yt.setProperty("--radix-popper-anchor-width",`${nr}px`),Yt.setProperty("--radix-popper-anchor-height",`${tr}px`)}}),U&&b2({element:U,padding:m}),O2({arrowWidth:Q,arrowHeight:Z}),A&&x2({strategy:"referenceHidden",...Ee})]}),[Pe,rt]=n5(Le),$e=si(R);Wi(()=>{Ue&&($e==null||$e())},[Ue,$e]);const Ge=(lt=we.arrow)==null?void 0:lt.x,Re=(gt=we.arrow)==null?void 0:gt.y,at=((tt=we.arrow)==null?void 0:tt.centerOffset)!==0,[Et,vt]=V.useState();return Wi(()=>{N&&vt(window.getComputedStyle(N).zIndex)},[N]),M.jsx("div",{ref:Se.setFloating,"data-radix-popper-content-wrapper":"",style:{...je,transform:Ue?je.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Et,"--radix-popper-transform-origin":[(ft=we.transformOrigin)==null?void 0:ft.x,(ht=we.transformOrigin)==null?void 0:ht.y].join(" "),...((Be=we.hide)==null?void 0:Be.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:M.jsx(P2,{scope:r,placedSide:Pe,onArrowChange:W,arrowX:Ge,arrowY:Re,shouldHideArrow:at,children:M.jsx(vr.div,{"data-side":Pe,"data-align":rt,...k,ref:F,style:{...k.style,animation:Ue?void 0:"none"}})})})});e5.displayName=yI;var t5="PopperArrow",M2={top:"bottom",right:"left",bottom:"top",left:"right"},r5=V.forwardRef(function(t,r){const{__scopePopper:n,...s}=t,u=C2(t5,n),h=M2[u.placedSide];return M.jsx("span",{ref:u.onArrowChange,style:{position:"absolute",left:u.arrowX,top:u.arrowY,[h]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[u.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[u.placedSide],visibility:u.shouldHideArrow?"hidden":void 0},children:M.jsx(S2,{...s,ref:r,style:{...s.style,display:"block"}})})});r5.displayName=t5;function I2(e){return e!==null}var O2=e=>({name:"transformOrigin",options:e,fn(t){var L,N,z;const{placement:r,rects:n,middlewareData:s}=t,h=((L=s.arrow)==null?void 0:L.centerOffset)!==0,m=h?0:e.arrowWidth,o=h?0:e.arrowHeight,[_,E]=n5(r),S={start:"0%",center:"50%",end:"100%"}[E],A=(((N=s.arrow)==null?void 0:N.x)??0)+m/2,I=(((z=s.arrow)==null?void 0:z.y)??0)+o/2;let R="",k="";return _==="bottom"?(R=h?S:`${A}px`,k=`${-o}px`):_==="top"?(R=h?S:`${A}px`,k=`${n.floating.height+o}px`):_==="right"?(R=`${-o}px`,k=h?S:`${I}px`):_==="left"&&(R=`${n.floating.width+o}px`,k=h?S:`${I}px`),{data:{x:R,y:k}}}});function n5(e){const[t,r="center"]=e.split("-");return[t,r]}var i5=Y4,o5=Q4,a5=e5,s5=r5,[ow,jCe]=gh("Tooltip",[iw]),aw=iw(),l5="TooltipProvider",k2=700,wP="tooltip.open",[D2,vI]=ow(l5),c5=e=>{const{__scopeTooltip:t,delayDuration:r=k2,skipDelayDuration:n=300,disableHoverableContent:s=!1,children:u}=e,[h,m]=V.useState(!0),o=V.useRef(!1),_=V.useRef(0);return V.useEffect(()=>{const E=_.current;return()=>window.clearTimeout(E)},[]),M.jsx(D2,{scope:t,isOpenDelayed:h,delayDuration:r,onOpen:V.useCallback(()=>{window.clearTimeout(_.current),m(!1)},[]),onClose:V.useCallback(()=>{window.clearTimeout(_.current),_.current=window.setTimeout(()=>m(!0),n)},[n]),isPointerInTransitRef:o,onPointerInTransitChange:V.useCallback(E=>{o.current=E},[]),disableHoverableContent:s,children:u})};c5.displayName=l5;var sw="Tooltip",[R2,lw]=ow(sw),u5=e=>{const{__scopeTooltip:t,children:r,open:n,defaultOpen:s=!1,onOpenChange:u,disableHoverableContent:h,delayDuration:m}=e,o=vI(sw,e.__scopeTooltip),_=aw(t),[E,S]=V.useState(null),A=ql(),I=V.useRef(0),R=h??o.disableHoverableContent,k=m??o.delayDuration,L=V.useRef(!1),[N=!1,z]=Au({prop:n,defaultProp:s,onChange:Q=>{Q?(o.onOpen(),document.dispatchEvent(new CustomEvent(wP))):o.onClose(),u==null||u(Q)}}),F=V.useMemo(()=>N?L.current?"delayed-open":"instant-open":"closed",[N]),U=V.useCallback(()=>{window.clearTimeout(I.current),I.current=0,L.current=!1,z(!0)},[z]),W=V.useCallback(()=>{window.clearTimeout(I.current),I.current=0,z(!1)},[z]),Y=V.useCallback(()=>{window.clearTimeout(I.current),I.current=window.setTimeout(()=>{L.current=!0,z(!0),I.current=0},k)},[k,z]);return V.useEffect(()=>()=>{I.current&&(window.clearTimeout(I.current),I.current=0)},[]),M.jsx(i5,{..._,children:M.jsx(R2,{scope:t,contentId:A,open:N,stateAttribute:F,trigger:E,onTriggerChange:S,onTriggerEnter:V.useCallback(()=>{o.isOpenDelayed?Y():U()},[o.isOpenDelayed,Y,U]),onTriggerLeave:V.useCallback(()=>{R?W():(window.clearTimeout(I.current),I.current=0)},[W,R]),onOpen:U,onClose:W,disableHoverableContent:R,children:r})})};u5.displayName=sw;var SP="TooltipTrigger",d5=V.forwardRef((e,t)=>{const{__scopeTooltip:r,...n}=e,s=lw(SP,r),u=vI(SP,r),h=aw(r),m=V.useRef(null),o=Ur(t,m,s.onTriggerChange),_=V.useRef(!1),E=V.useRef(!1),S=V.useCallback(()=>_.current=!1,[]);return V.useEffect(()=>()=>document.removeEventListener("pointerup",S),[S]),M.jsx(o5,{asChild:!0,...h,children:M.jsx(vr.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...n,ref:o,onPointerMove:rr(e.onPointerMove,A=>{A.pointerType!=="touch"&&!E.current&&!u.isPointerInTransitRef.current&&(s.onTriggerEnter(),E.current=!0)}),onPointerLeave:rr(e.onPointerLeave,()=>{s.onTriggerLeave(),E.current=!1}),onPointerDown:rr(e.onPointerDown,()=>{_.current=!0,document.addEventListener("pointerup",S,{once:!0})}),onFocus:rr(e.onFocus,()=>{_.current||s.onOpen()}),onBlur:rr(e.onBlur,s.onClose),onClick:rr(e.onClick,s.onClose)})})});d5.displayName=SP;var L2="TooltipPortal",[zCe,j2]=ow(L2,{forceMount:void 0}),Sp="TooltipContent",h5=V.forwardRef((e,t)=>{const r=j2(Sp,e.__scopeTooltip),{forceMount:n=r.forceMount,side:s="top",...u}=e,h=lw(Sp,e.__scopeTooltip);return M.jsx(qa,{present:n||h.open,children:h.disableHoverableContent?M.jsx(f5,{side:s,...u,ref:t}):M.jsx(z2,{side:s,...u,ref:t})})}),z2=V.forwardRef((e,t)=>{const r=lw(Sp,e.__scopeTooltip),n=vI(Sp,e.__scopeTooltip),s=V.useRef(null),u=Ur(t,s),[h,m]=V.useState(null),{trigger:o,onClose:_}=r,E=s.current,{onPointerInTransitChange:S}=n,A=V.useCallback(()=>{m(null),S(!1)},[S]),I=V.useCallback((R,k)=>{const L=R.currentTarget,N={x:R.clientX,y:R.clientY},z=F2(N,L.getBoundingClientRect()),F=U2(N,z),U=V2(k.getBoundingClientRect()),W=W2([...F,...U]);m(W),S(!0)},[S]);return V.useEffect(()=>()=>A(),[A]),V.useEffect(()=>{if(o&&E){const R=L=>I(L,E),k=L=>I(L,o);return o.addEventListener("pointerleave",R),E.addEventListener("pointerleave",k),()=>{o.removeEventListener("pointerleave",R),E.removeEventListener("pointerleave",k)}}},[o,E,I,A]),V.useEffect(()=>{if(h){const R=k=>{const L=k.target,N={x:k.clientX,y:k.clientY},z=(o==null?void 0:o.contains(L))||(E==null?void 0:E.contains(L)),F=!G2(N,h);z?A():F&&(A(),_())};return document.addEventListener("pointermove",R),()=>document.removeEventListener("pointermove",R)}},[o,E,h,_,A]),M.jsx(f5,{...e,ref:u})}),[N2,B2]=ow(sw,{isInside:!1}),f5=V.forwardRef((e,t)=>{const{__scopeTooltip:r,children:n,"aria-label":s,onEscapeKeyDown:u,onPointerDownOutside:h,...m}=e,o=lw(Sp,r),_=aw(r),{onClose:E}=o;return V.useEffect(()=>(document.addEventListener(wP,E),()=>document.removeEventListener(wP,E)),[E]),V.useEffect(()=>{if(o.trigger){const S=A=>{const I=A.target;I!=null&&I.contains(o.trigger)&&E()};return window.addEventListener("scroll",S,{capture:!0}),()=>window.removeEventListener("scroll",S,{capture:!0})}},[o.trigger,E]),M.jsx(Jv,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:u,onPointerDownOutside:h,onFocusOutside:S=>S.preventDefault(),onDismiss:E,children:M.jsxs(a5,{"data-state":o.stateAttribute,..._,...m,ref:t,style:{...m.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[M.jsx(t4,{children:n}),M.jsx(N2,{scope:r,isInside:!0,children:M.jsx(jZ,{id:o.contentId,role:"tooltip",children:s||n})})]})})});h5.displayName=Sp;var p5="TooltipArrow",$2=V.forwardRef((e,t)=>{const{__scopeTooltip:r,...n}=e,s=aw(r);return B2(p5,r).isInside?null:M.jsx(s5,{...s,...n,ref:t})});$2.displayName=p5;function F2(e,t){const r=Math.abs(t.top-e.y),n=Math.abs(t.bottom-e.y),s=Math.abs(t.right-e.x),u=Math.abs(t.left-e.x);switch(Math.min(r,n,s,u)){case u:return"left";case s:return"right";case r:return"top";case n:return"bottom";default:throw new Error("unreachable")}}function U2(e,t,r=5){const n=[];switch(t){case"top":n.push({x:e.x-r,y:e.y+r},{x:e.x+r,y:e.y+r});break;case"bottom":n.push({x:e.x-r,y:e.y-r},{x:e.x+r,y:e.y-r});break;case"left":n.push({x:e.x+r,y:e.y-r},{x:e.x+r,y:e.y+r});break;case"right":n.push({x:e.x-r,y:e.y-r},{x:e.x-r,y:e.y+r});break}return n}function V2(e){const{top:t,right:r,bottom:n,left:s}=e;return[{x:s,y:t},{x:r,y:t},{x:r,y:n},{x:s,y:n}]}function G2(e,t){const{x:r,y:n}=e;let s=!1;for(let u=0,h=t.length-1;u<t.length;h=u++){const m=t[u].x,o=t[u].y,_=t[h].x,E=t[h].y;o>n!=E>n&&r<(_-m)*(n-o)/(E-o)+m&&(s=!s)}return s}function W2(e){const t=e.slice();return t.sort((r,n)=>r.x<n.x?-1:r.x>n.x?1:r.y<n.y?-1:r.y>n.y?1:0),q2(t)}function q2(e){if(e.length<=1)return e.slice();const t=[];for(let n=0;n<e.length;n++){const s=e[n];for(;t.length>=2;){const u=t[t.length-1],h=t[t.length-2];if((u.x-h.x)*(s.y-h.y)>=(u.y-h.y)*(s.x-h.x))t.pop();else break}t.push(s)}t.pop();const r=[];for(let n=e.length-1;n>=0;n--){const s=e[n];for(;r.length>=2;){const u=r[r.length-1],h=r[r.length-2];if((u.x-h.x)*(s.y-h.y)>=(u.y-h.y)*(s.x-h.x))r.pop();else break}r.push(s)}return r.pop(),t.length===1&&r.length===1&&t[0].x===r[0].x&&t[0].y===r[0].y?t:t.concat(r)}var H2=c5,X2=u5,Z2=d5,m5=h5;const g5=H2,K2=X2,Y2=Z2,y5=V.forwardRef(({className:e,sideOffset:t=4,...r},n)=>M.jsx(m5,{ref:n,sideOffset:t,className:Wt("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...r}));y5.displayName=m5.displayName;var cw=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},uw=typeof window>"u"||"Deno"in globalThis;function bs(){}function J2(e,t){return typeof e=="function"?e(t):e}function Q2(e){return typeof e=="number"&&e>=0&&e!==1/0}function eJ(e,t){return Math.max(e+(t||0)-Date.now(),0)}function JL(e,t){return typeof e=="function"?e(t):e}function tJ(e,t){return typeof e=="function"?e(t):e}function QL(e,t){const{type:r="all",exact:n,fetchStatus:s,predicate:u,queryKey:h,stale:m}=e;if(h){if(n){if(t.queryHash!==_I(h,t.options))return!1}else if(!av(t.queryKey,h))return!1}if(r!=="all"){const o=t.isActive();if(r==="active"&&!o||r==="inactive"&&o)return!1}return!(typeof m=="boolean"&&t.isStale()!==m||s&&s!==t.state.fetchStatus||u&&!u(t))}function ej(e,t){const{exact:r,status:n,predicate:s,mutationKey:u}=e;if(u){if(!t.options.mutationKey)return!1;if(r){if(ov(t.options.mutationKey)!==ov(u))return!1}else if(!av(t.options.mutationKey,u))return!1}return!(n&&t.state.status!==n||s&&!s(t))}function _I(e,t){return((t==null?void 0:t.queryKeyHashFn)||ov)(e)}function ov(e){return JSON.stringify(e,(t,r)=>EP(r)?Object.keys(r).sort().reduce((n,s)=>(n[s]=r[s],n),{}):r)}function av(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?!Object.keys(t).some(r=>!av(e[r],t[r])):!1}function v5(e,t){if(e===t)return e;const r=tj(e)&&tj(t);if(r||EP(e)&&EP(t)){const n=r?e:Object.keys(e),s=n.length,u=r?t:Object.keys(t),h=u.length,m=r?[]:{};let o=0;for(let _=0;_<h;_++){const E=r?_:u[_];(!r&&n.includes(E)||r)&&e[E]===void 0&&t[E]===void 0?(m[E]=void 0,o++):(m[E]=v5(e[E],t[E]),m[E]===e[E]&&e[E]!==void 0&&o++)}return s===h&&o===s?e:m}return t}function tj(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function EP(e){if(!rj(e))return!1;const t=e.constructor;if(t===void 0)return!0;const r=t.prototype;return!(!rj(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function rj(e){return Object.prototype.toString.call(e)==="[object Object]"}function rJ(e){return new Promise(t=>{setTimeout(t,e)})}function nJ(e,t,r){return typeof r.structuralSharing=="function"?r.structuralSharing(e,t):r.structuralSharing!==!1?v5(e,t):t}function iJ(e,t,r=0){const n=[...e,t];return r&&n.length>r?n.slice(1):n}function oJ(e,t,r=0){const n=[t,...e];return r&&n.length>r?n.slice(0,-1):n}var xI=Symbol();function _5(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===xI?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}var Gd,tu,ap,kB,aJ=(kB=class extends cw{constructor(){super();an(this,Gd);an(this,tu);an(this,ap);Ar(this,ap,t=>{if(!uw&&window.addEventListener){const r=()=>t();return window.addEventListener("visibilitychange",r,!1),()=>{window.removeEventListener("visibilitychange",r)}}})}onSubscribe(){At(this,tu)||this.setEventListener(At(this,ap))}onUnsubscribe(){var t;this.hasListeners()||((t=At(this,tu))==null||t.call(this),Ar(this,tu,void 0))}setEventListener(t){var r;Ar(this,ap,t),(r=At(this,tu))==null||r.call(this),Ar(this,tu,t(n=>{typeof n=="boolean"?this.setFocused(n):this.onFocus()}))}setFocused(t){At(this,Gd)!==t&&(Ar(this,Gd,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(r=>{r(t)})}isFocused(){var t;return typeof At(this,Gd)=="boolean"?At(this,Gd):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},Gd=new WeakMap,tu=new WeakMap,ap=new WeakMap,kB),x5=new aJ,sp,ru,lp,DB,sJ=(DB=class extends cw{constructor(){super();an(this,sp,!0);an(this,ru);an(this,lp);Ar(this,lp,t=>{if(!uw&&window.addEventListener){const r=()=>t(!0),n=()=>t(!1);return window.addEventListener("online",r,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",n)}}})}onSubscribe(){At(this,ru)||this.setEventListener(At(this,lp))}onUnsubscribe(){var t;this.hasListeners()||((t=At(this,ru))==null||t.call(this),Ar(this,ru,void 0))}setEventListener(t){var r;Ar(this,lp,t),(r=At(this,ru))==null||r.call(this),Ar(this,ru,t(this.setOnline.bind(this)))}setOnline(t){At(this,sp)!==t&&(Ar(this,sp,t),this.listeners.forEach(n=>{n(t)}))}isOnline(){return At(this,sp)}},sp=new WeakMap,ru=new WeakMap,lp=new WeakMap,DB),Ab=new sJ;function lJ(){let e,t;const r=new Promise((s,u)=>{e=s,t=u});r.status="pending",r.catch(()=>{});function n(s){Object.assign(r,s),delete r.resolve,delete r.reject}return r.resolve=s=>{n({status:"fulfilled",value:s}),e(s)},r.reject=s=>{n({status:"rejected",reason:s}),t(s)},r}function cJ(e){return Math.min(1e3*2**e,3e4)}function b5(e){return(e??"online")==="online"?Ab.isOnline():!0}var w5=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function PT(e){return e instanceof w5}function S5(e){let t=!1,r=0,n=!1,s;const u=lJ(),h=k=>{var L;n||(A(new w5(k)),(L=e.abort)==null||L.call(e))},m=()=>{t=!0},o=()=>{t=!1},_=()=>x5.isFocused()&&(e.networkMode==="always"||Ab.isOnline())&&e.canRun(),E=()=>b5(e.networkMode)&&e.canRun(),S=k=>{var L;n||(n=!0,(L=e.onSuccess)==null||L.call(e,k),s==null||s(),u.resolve(k))},A=k=>{var L;n||(n=!0,(L=e.onError)==null||L.call(e,k),s==null||s(),u.reject(k))},I=()=>new Promise(k=>{var L;s=N=>{(n||_())&&k(N)},(L=e.onPause)==null||L.call(e)}).then(()=>{var k;s=void 0,n||(k=e.onContinue)==null||k.call(e)}),R=()=>{if(n)return;let k;const L=r===0?e.initialPromise:void 0;try{k=L??e.fn()}catch(N){k=Promise.reject(N)}Promise.resolve(k).then(S).catch(N=>{var Y;if(n)return;const z=e.retry??(uw?0:3),F=e.retryDelay??cJ,U=typeof F=="function"?F(r,N):F,W=z===!0||typeof z=="number"&&r<z||typeof z=="function"&&z(r,N);if(t||!W){A(N);return}r++,(Y=e.onFail)==null||Y.call(e,r,N),rJ(U).then(()=>_()?void 0:I()).then(()=>{t?A(N):R()})})};return{promise:u,cancel:h,continue:()=>(s==null||s(),u),cancelRetry:m,continueRetry:o,canStart:E,start:()=>(E()?R():I().then(R),u)}}function uJ(){let e=[],t=0,r=m=>{m()},n=m=>{m()},s=m=>setTimeout(m,0);const u=m=>{t?e.push(m):s(()=>{r(m)})},h=()=>{const m=e;e=[],m.length&&s(()=>{n(()=>{m.forEach(o=>{r(o)})})})};return{batch:m=>{let o;t++;try{o=m()}finally{t--,t||h()}return o},batchCalls:m=>(...o)=>{u(()=>{m(...o)})},schedule:u,setNotifyFunction:m=>{r=m},setBatchNotifyFunction:m=>{n=m},setScheduler:m=>{s=m}}}var go=uJ(),Wd,RB,E5=(RB=class{constructor(){an(this,Wd)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Q2(this.gcTime)&&Ar(this,Wd,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(uw?1/0:5*60*1e3))}clearGcTimeout(){At(this,Wd)&&(clearTimeout(At(this,Wd)),Ar(this,Wd,void 0))}},Wd=new WeakMap,RB),cp,up,Oa,io,Wv,qd,ws,jl,LB,dJ=(LB=class extends E5{constructor(t){super();an(this,ws);an(this,cp);an(this,up);an(this,Oa);an(this,io);an(this,Wv);an(this,qd);Ar(this,qd,!1),Ar(this,Wv,t.defaultOptions),this.setOptions(t.options),this.observers=[],Ar(this,Oa,t.cache),this.queryKey=t.queryKey,this.queryHash=t.queryHash,Ar(this,cp,fJ(this.options)),this.state=t.state??At(this,cp),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=At(this,io))==null?void 0:t.promise}setOptions(t){this.options={...At(this,Wv),...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&At(this,Oa).remove(this)}setData(t,r){const n=nJ(this.state.data,t,this.options);return to(this,ws,jl).call(this,{data:n,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),n}setState(t,r){to(this,ws,jl).call(this,{type:"setState",state:t,setStateOptions:r})}cancel(t){var n,s;const r=(n=At(this,io))==null?void 0:n.promise;return(s=At(this,io))==null||s.cancel(t),r?r.then(bs).catch(bs):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(At(this,cp))}isActive(){return this.observers.some(t=>tJ(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===xI||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(t=0){return this.state.isInvalidated||this.state.data===void 0||!eJ(this.state.dataUpdatedAt,t)}onFocus(){var r;const t=this.observers.find(n=>n.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(r=At(this,io))==null||r.continue()}onOnline(){var r;const t=this.observers.find(n=>n.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(r=At(this,io))==null||r.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),At(this,Oa).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(r=>r!==t),this.observers.length||(At(this,io)&&(At(this,qd)?At(this,io).cancel({revert:!0}):At(this,io).cancelRetry()),this.scheduleGc()),At(this,Oa).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||to(this,ws,jl).call(this,{type:"invalidate"})}fetch(t,r){var o,_,E;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(At(this,io))return At(this,io).continueRetry(),At(this,io).promise}if(t&&this.setOptions(t),!this.options.queryFn){const S=this.observers.find(A=>A.options.queryFn);S&&this.setOptions(S.options)}const n=new AbortController,s=S=>{Object.defineProperty(S,"signal",{enumerable:!0,get:()=>(Ar(this,qd,!0),n.signal)})},u=()=>{const S=_5(this.options,r),A={queryKey:this.queryKey,meta:this.meta};return s(A),Ar(this,qd,!1),this.options.persister?this.options.persister(S,A,this):S(A)},h={fetchOptions:r,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:u};s(h),(o=this.options.behavior)==null||o.onFetch(h,this),Ar(this,up,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((_=h.fetchOptions)==null?void 0:_.meta))&&to(this,ws,jl).call(this,{type:"fetch",meta:(E=h.fetchOptions)==null?void 0:E.meta});const m=S=>{var A,I,R,k;PT(S)&&S.silent||to(this,ws,jl).call(this,{type:"error",error:S}),PT(S)||((I=(A=At(this,Oa).config).onError)==null||I.call(A,S,this),(k=(R=At(this,Oa).config).onSettled)==null||k.call(R,this.state.data,S,this)),this.scheduleGc()};return Ar(this,io,S5({initialPromise:r==null?void 0:r.initialPromise,fn:h.fetchFn,abort:n.abort.bind(n),onSuccess:S=>{var A,I,R,k;if(S===void 0){m(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(S)}catch(L){m(L);return}(I=(A=At(this,Oa).config).onSuccess)==null||I.call(A,S,this),(k=(R=At(this,Oa).config).onSettled)==null||k.call(R,S,this.state.error,this),this.scheduleGc()},onError:m,onFail:(S,A)=>{to(this,ws,jl).call(this,{type:"failed",failureCount:S,error:A})},onPause:()=>{to(this,ws,jl).call(this,{type:"pause"})},onContinue:()=>{to(this,ws,jl).call(this,{type:"continue"})},retry:h.options.retry,retryDelay:h.options.retryDelay,networkMode:h.options.networkMode,canRun:()=>!0})),At(this,io).start()}},cp=new WeakMap,up=new WeakMap,Oa=new WeakMap,io=new WeakMap,Wv=new WeakMap,qd=new WeakMap,ws=new WeakSet,jl=function(t){const r=n=>{switch(t.type){case"failed":return{...n,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...hJ(n.data,this.options),fetchMeta:t.meta??null};case"success":return{...n,data:t.data,dataUpdateCount:n.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const s=t.error;return PT(s)&&s.revert&&At(this,up)?{...At(this,up),fetchStatus:"idle"}:{...n,error:s,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error"};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...t.state}}};this.state=r(this.state),go.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),At(this,Oa).notify({query:this,type:"updated",action:t})})},LB);function hJ(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:b5(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function fJ(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,r=t!==void 0,n=r?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:r?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var Js,jB,pJ=(jB=class extends cw{constructor(t={}){super();an(this,Js);this.config=t,Ar(this,Js,new Map)}build(t,r,n){const s=r.queryKey,u=r.queryHash??_I(s,r);let h=this.get(u);return h||(h=new dJ({cache:this,queryKey:s,queryHash:u,options:t.defaultQueryOptions(r),state:n,defaultOptions:t.getQueryDefaults(s)}),this.add(h)),h}add(t){At(this,Js).has(t.queryHash)||(At(this,Js).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const r=At(this,Js).get(t.queryHash);r&&(t.destroy(),r===t&&At(this,Js).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){go.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return At(this,Js).get(t)}getAll(){return[...At(this,Js).values()]}find(t){const r={exact:!0,...t};return this.getAll().find(n=>QL(r,n))}findAll(t={}){const r=this.getAll();return Object.keys(t).length>0?r.filter(n=>QL(t,n)):r}notify(t){go.batch(()=>{this.listeners.forEach(r=>{r(t)})})}onFocus(){go.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){go.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},Js=new WeakMap,jB),Qs,po,Hd,el,qc,zB,mJ=(zB=class extends E5{constructor(t){super();an(this,el);an(this,Qs);an(this,po);an(this,Hd);this.mutationId=t.mutationId,Ar(this,po,t.mutationCache),Ar(this,Qs,[]),this.state=t.state||gJ(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){At(this,Qs).includes(t)||(At(this,Qs).push(t),this.clearGcTimeout(),At(this,po).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){Ar(this,Qs,At(this,Qs).filter(r=>r!==t)),this.scheduleGc(),At(this,po).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){At(this,Qs).length||(this.state.status==="pending"?this.scheduleGc():At(this,po).remove(this))}continue(){var t;return((t=At(this,Hd))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var s,u,h,m,o,_,E,S,A,I,R,k,L,N,z,F,U,W,Y,Q;Ar(this,Hd,S5({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(Z,re)=>{to(this,el,qc).call(this,{type:"failed",failureCount:Z,error:re})},onPause:()=>{to(this,el,qc).call(this,{type:"pause"})},onContinue:()=>{to(this,el,qc).call(this,{type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>At(this,po).canRun(this)}));const r=this.state.status==="pending",n=!At(this,Hd).canStart();try{if(!r){to(this,el,qc).call(this,{type:"pending",variables:t,isPaused:n}),await((u=(s=At(this,po).config).onMutate)==null?void 0:u.call(s,t,this));const re=await((m=(h=this.options).onMutate)==null?void 0:m.call(h,t));re!==this.state.context&&to(this,el,qc).call(this,{type:"pending",context:re,variables:t,isPaused:n})}const Z=await At(this,Hd).start();return await((_=(o=At(this,po).config).onSuccess)==null?void 0:_.call(o,Z,t,this.state.context,this)),await((S=(E=this.options).onSuccess)==null?void 0:S.call(E,Z,t,this.state.context)),await((I=(A=At(this,po).config).onSettled)==null?void 0:I.call(A,Z,null,this.state.variables,this.state.context,this)),await((k=(R=this.options).onSettled)==null?void 0:k.call(R,Z,null,t,this.state.context)),to(this,el,qc).call(this,{type:"success",data:Z}),Z}catch(Z){try{throw await((N=(L=At(this,po).config).onError)==null?void 0:N.call(L,Z,t,this.state.context,this)),await((F=(z=this.options).onError)==null?void 0:F.call(z,Z,t,this.state.context)),await((W=(U=At(this,po).config).onSettled)==null?void 0:W.call(U,void 0,Z,this.state.variables,this.state.context,this)),await((Q=(Y=this.options).onSettled)==null?void 0:Q.call(Y,void 0,Z,t,this.state.context)),Z}finally{to(this,el,qc).call(this,{type:"error",error:Z})}}finally{At(this,po).runNext(this)}}},Qs=new WeakMap,po=new WeakMap,Hd=new WeakMap,el=new WeakSet,qc=function(t){const r=n=>{switch(t.type){case"failed":return{...n,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...n,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:t.error,failureCount:n.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=r(this.state),go.batch(()=>{At(this,Qs).forEach(n=>{n.onMutationUpdate(t)}),At(this,po).notify({mutation:this,type:"updated",action:t})})},zB);function gJ(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Qo,qv,NB,yJ=(NB=class extends cw{constructor(t={}){super();an(this,Qo);an(this,qv);this.config=t,Ar(this,Qo,new Map),Ar(this,qv,Date.now())}build(t,r,n){const s=new mJ({mutationCache:this,mutationId:++Ux(this,qv)._,options:t.defaultMutationOptions(r),state:n});return this.add(s),s}add(t){const r=u0(t),n=At(this,Qo).get(r)??[];n.push(t),At(this,Qo).set(r,n),this.notify({type:"added",mutation:t})}remove(t){var n;const r=u0(t);if(At(this,Qo).has(r)){const s=(n=At(this,Qo).get(r))==null?void 0:n.filter(u=>u!==t);s&&(s.length===0?At(this,Qo).delete(r):At(this,Qo).set(r,s))}this.notify({type:"removed",mutation:t})}canRun(t){var n;const r=(n=At(this,Qo).get(u0(t)))==null?void 0:n.find(s=>s.state.status==="pending");return!r||r===t}runNext(t){var n;const r=(n=At(this,Qo).get(u0(t)))==null?void 0:n.find(s=>s!==t&&s.state.isPaused);return(r==null?void 0:r.continue())??Promise.resolve()}clear(){go.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}getAll(){return[...At(this,Qo).values()].flat()}find(t){const r={exact:!0,...t};return this.getAll().find(n=>ej(r,n))}findAll(t={}){return this.getAll().filter(r=>ej(t,r))}notify(t){go.batch(()=>{this.listeners.forEach(r=>{r(t)})})}resumePausedMutations(){const t=this.getAll().filter(r=>r.state.isPaused);return go.batch(()=>Promise.all(t.map(r=>r.continue().catch(bs))))}},Qo=new WeakMap,qv=new WeakMap,NB);function u0(e){var t;return((t=e.options.scope)==null?void 0:t.id)??String(e.mutationId)}function nj(e){return{onFetch:(t,r)=>{var E,S,A,I,R;const n=t.options,s=(A=(S=(E=t.fetchOptions)==null?void 0:E.meta)==null?void 0:S.fetchMore)==null?void 0:A.direction,u=((I=t.state.data)==null?void 0:I.pages)||[],h=((R=t.state.data)==null?void 0:R.pageParams)||[];let m={pages:[],pageParams:[]},o=0;const _=async()=>{let k=!1;const L=F=>{Object.defineProperty(F,"signal",{enumerable:!0,get:()=>(t.signal.aborted?k=!0:t.signal.addEventListener("abort",()=>{k=!0}),t.signal)})},N=_5(t.options,t.fetchOptions),z=async(F,U,W)=>{if(k)return Promise.reject();if(U==null&&F.pages.length)return Promise.resolve(F);const Y={queryKey:t.queryKey,pageParam:U,direction:W?"backward":"forward",meta:t.options.meta};L(Y);const Q=await N(Y),{maxPages:Z}=t.options,re=W?oJ:iJ;return{pages:re(F.pages,Q,Z),pageParams:re(F.pageParams,U,Z)}};if(s&&u.length){const F=s==="backward",U=F?vJ:ij,W={pages:u,pageParams:h},Y=U(n,W);m=await z(W,Y,F)}else{const F=e??u.length;do{const U=o===0?h[0]??n.initialPageParam:ij(n,m);if(o>0&&U==null)break;m=await z(m,U),o++}while(o<F)}return m};t.options.persister?t.fetchFn=()=>{var k,L;return(L=(k=t.options).persister)==null?void 0:L.call(k,_,{queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},r)}:t.fetchFn=_}}}function ij(e,{pages:t,pageParams:r}){const n=t.length-1;return t.length>0?e.getNextPageParam(t[n],t,r[n],r):void 0}function vJ(e,{pages:t,pageParams:r}){var n;return t.length>0?(n=e.getPreviousPageParam)==null?void 0:n.call(e,t[0],t,r[0],r):void 0}var ti,nu,iu,dp,hp,ou,fp,pp,BB,_J=(BB=class{constructor(e={}){an(this,ti);an(this,nu);an(this,iu);an(this,dp);an(this,hp);an(this,ou);an(this,fp);an(this,pp);Ar(this,ti,e.queryCache||new pJ),Ar(this,nu,e.mutationCache||new yJ),Ar(this,iu,e.defaultOptions||{}),Ar(this,dp,new Map),Ar(this,hp,new Map),Ar(this,ou,0)}mount(){Ux(this,ou)._++,At(this,ou)===1&&(Ar(this,fp,x5.subscribe(async e=>{e&&(await this.resumePausedMutations(),At(this,ti).onFocus())})),Ar(this,pp,Ab.subscribe(async e=>{e&&(await this.resumePausedMutations(),At(this,ti).onOnline())})))}unmount(){var e,t;Ux(this,ou)._--,At(this,ou)===0&&((e=At(this,fp))==null||e.call(this),Ar(this,fp,void 0),(t=At(this,pp))==null||t.call(this),Ar(this,pp,void 0))}isFetching(e){return At(this,ti).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return At(this,nu).findAll({...e,status:"pending"}).length}getQueryData(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=At(this,ti).get(t.queryHash))==null?void 0:r.state.data}ensureQueryData(e){const t=this.getQueryData(e.queryKey);if(t===void 0)return this.fetchQuery(e);{const r=this.defaultQueryOptions(e),n=At(this,ti).build(this,r);return e.revalidateIfStale&&n.isStaleByTime(JL(r.staleTime,n))&&this.prefetchQuery(r),Promise.resolve(t)}}getQueriesData(e){return At(this,ti).findAll(e).map(({queryKey:t,state:r})=>{const n=r.data;return[t,n]})}setQueryData(e,t,r){const n=this.defaultQueryOptions({queryKey:e}),s=At(this,ti).get(n.queryHash),u=s==null?void 0:s.state.data,h=J2(t,u);if(h!==void 0)return At(this,ti).build(this,n).setData(h,{...r,manual:!0})}setQueriesData(e,t,r){return go.batch(()=>At(this,ti).findAll(e).map(({queryKey:n})=>[n,this.setQueryData(n,t,r)]))}getQueryState(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=At(this,ti).get(t.queryHash))==null?void 0:r.state}removeQueries(e){const t=At(this,ti);go.batch(()=>{t.findAll(e).forEach(r=>{t.remove(r)})})}resetQueries(e,t){const r=At(this,ti),n={type:"active",...e};return go.batch(()=>(r.findAll(e).forEach(s=>{s.reset()}),this.refetchQueries(n,t)))}cancelQueries(e={},t={}){const r={revert:!0,...t},n=go.batch(()=>At(this,ti).findAll(e).map(s=>s.cancel(r)));return Promise.all(n).then(bs).catch(bs)}invalidateQueries(e={},t={}){return go.batch(()=>{if(At(this,ti).findAll(e).forEach(n=>{n.invalidate()}),e.refetchType==="none")return Promise.resolve();const r={...e,type:e.refetchType??e.type??"active"};return this.refetchQueries(r,t)})}refetchQueries(e={},t){const r={...t,cancelRefetch:(t==null?void 0:t.cancelRefetch)??!0},n=go.batch(()=>At(this,ti).findAll(e).filter(s=>!s.isDisabled()).map(s=>{let u=s.fetch(void 0,r);return r.throwOnError||(u=u.catch(bs)),s.state.fetchStatus==="paused"?Promise.resolve():u}));return Promise.all(n).then(bs)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const r=At(this,ti).build(this,t);return r.isStaleByTime(JL(t.staleTime,r))?r.fetch(t):Promise.resolve(r.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(bs).catch(bs)}fetchInfiniteQuery(e){return e.behavior=nj(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(bs).catch(bs)}ensureInfiniteQueryData(e){return e.behavior=nj(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return Ab.isOnline()?At(this,nu).resumePausedMutations():Promise.resolve()}getQueryCache(){return At(this,ti)}getMutationCache(){return At(this,nu)}getDefaultOptions(){return At(this,iu)}setDefaultOptions(e){Ar(this,iu,e)}setQueryDefaults(e,t){At(this,dp).set(ov(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...At(this,dp).values()];let r={};return t.forEach(n=>{av(e,n.queryKey)&&(r={...r,...n.defaultOptions})}),r}setMutationDefaults(e,t){At(this,hp).set(ov(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...At(this,hp).values()];let r={};return t.forEach(n=>{av(e,n.mutationKey)&&(r={...r,...n.defaultOptions})}),r}defaultQueryOptions(e){if(e._defaulted)return e;const t={...At(this,iu).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=_I(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.enabled!==!0&&t.queryFn===xI&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...At(this,iu).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){At(this,ti).clear(),At(this,nu).clear()}},ti=new WeakMap,nu=new WeakMap,iu=new WeakMap,dp=new WeakMap,hp=new WeakMap,ou=new WeakMap,fp=new WeakMap,pp=new WeakMap,BB),xJ=V.createContext(void 0),bJ=({client:e,children:t})=>(V.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),M.jsx(xJ.Provider,{value:e,children:t}));/**
 * @remix-run/router v1.20.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Pb(){return Pb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Pb.apply(this,arguments)}var lu;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(lu||(lu={}));const oj="popstate";function wJ(e){e===void 0&&(e={});function t(n,s){let{pathname:u,search:h,hash:m}=n.location;return TP("",{pathname:u,search:h,hash:m},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function r(n,s){return typeof s=="string"?s:A5(s)}return EJ(t,r,null,e)}function Vo(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function T5(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function SJ(){return Math.random().toString(36).substr(2,8)}function aj(e,t){return{usr:e.state,key:e.key,idx:t}}function TP(e,t,r,n){return r===void 0&&(r=null),Pb({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?dw(t):t,{state:r,key:t&&t.key||n||SJ()})}function A5(e){let{pathname:t="/",search:r="",hash:n=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function dw(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function EJ(e,t,r,n){n===void 0&&(n={});let{window:s=document.defaultView,v5Compat:u=!1}=n,h=s.history,m=lu.Pop,o=null,_=E();_==null&&(_=0,h.replaceState(Pb({},h.state,{idx:_}),""));function E(){return(h.state||{idx:null}).idx}function S(){m=lu.Pop;let L=E(),N=L==null?null:L-_;_=L,o&&o({action:m,location:k.location,delta:N})}function A(L,N){m=lu.Push;let z=TP(k.location,L,N);_=E()+1;let F=aj(z,_),U=k.createHref(z);try{h.pushState(F,"",U)}catch(W){if(W instanceof DOMException&&W.name==="DataCloneError")throw W;s.location.assign(U)}u&&o&&o({action:m,location:k.location,delta:1})}function I(L,N){m=lu.Replace;let z=TP(k.location,L,N);_=E();let F=aj(z,_),U=k.createHref(z);h.replaceState(F,"",U),u&&o&&o({action:m,location:k.location,delta:0})}function R(L){let N=s.location.origin!=="null"?s.location.origin:s.location.href,z=typeof L=="string"?L:A5(L);return z=z.replace(/ $/,"%20"),Vo(N,"No window.location.(origin|href) available to create URL for href: "+z),new URL(z,N)}let k={get action(){return m},get location(){return e(s,h)},listen(L){if(o)throw new Error("A history only accepts one active listener");return s.addEventListener(oj,S),o=L,()=>{s.removeEventListener(oj,S),o=null}},createHref(L){return t(s,L)},createURL:R,encodeLocation(L){let N=R(L);return{pathname:N.pathname,search:N.search,hash:N.hash}},push:A,replace:I,go(L){return h.go(L)}};return k}var sj;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(sj||(sj={}));function TJ(e,t,r){return r===void 0&&(r="/"),AJ(e,t,r,!1)}function AJ(e,t,r,n){let s=typeof t=="string"?dw(t):t,u=M5(s.pathname||"/",r);if(u==null)return null;let h=P5(e);PJ(h);let m=null;for(let o=0;m==null&&o<h.length;++o){let _=NJ(u);m=jJ(h[o],_,n)}return m}function P5(e,t,r,n){t===void 0&&(t=[]),r===void 0&&(r=[]),n===void 0&&(n="");let s=(u,h,m)=>{let o={relativePath:m===void 0?u.path||"":m,caseSensitive:u.caseSensitive===!0,childrenIndex:h,route:u};o.relativePath.startsWith("/")&&(Vo(o.relativePath.startsWith(n),'Absolute route path "'+o.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),o.relativePath=o.relativePath.slice(n.length));let _=Jf([n,o.relativePath]),E=r.concat(o);u.children&&u.children.length>0&&(Vo(u.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+_+'".')),P5(u.children,t,E,_)),!(u.path==null&&!u.index)&&t.push({path:_,score:RJ(_,u.index),routesMeta:E})};return e.forEach((u,h)=>{var m;if(u.path===""||!((m=u.path)!=null&&m.includes("?")))s(u,h);else for(let o of C5(u.path))s(u,h,o)}),t}function C5(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,s=r.endsWith("?"),u=r.replace(/\?$/,"");if(n.length===0)return s?[u,""]:[u];let h=C5(n.join("/")),m=[];return m.push(...h.map(o=>o===""?u:[u,o].join("/"))),s&&m.push(...h),m.map(o=>e.startsWith("/")&&o===""?"/":o)}function PJ(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:LJ(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const CJ=/^:[\w-]+$/,MJ=3,IJ=2,OJ=1,kJ=10,DJ=-2,lj=e=>e==="*";function RJ(e,t){let r=e.split("/"),n=r.length;return r.some(lj)&&(n+=DJ),t&&(n+=IJ),r.filter(s=>!lj(s)).reduce((s,u)=>s+(CJ.test(u)?MJ:u===""?OJ:kJ),n)}function LJ(e,t){return e.length===t.length&&e.slice(0,-1).every((n,s)=>n===t[s])?e[e.length-1]-t[t.length-1]:0}function jJ(e,t,r){let{routesMeta:n}=e,s={},u="/",h=[];for(let m=0;m<n.length;++m){let o=n[m],_=m===n.length-1,E=u==="/"?t:t.slice(u.length)||"/",S=cj({path:o.relativePath,caseSensitive:o.caseSensitive,end:_},E),A=o.route;if(!S&&_&&r&&!n[n.length-1].route.index&&(S=cj({path:o.relativePath,caseSensitive:o.caseSensitive,end:!1},E)),!S)return null;Object.assign(s,S.params),h.push({params:s,pathname:Jf([u,S.pathname]),pathnameBase:BJ(Jf([u,S.pathnameBase])),route:A}),S.pathnameBase!=="/"&&(u=Jf([u,S.pathnameBase]))}return h}function cj(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=zJ(e.path,e.caseSensitive,e.end),s=t.match(r);if(!s)return null;let u=s[0],h=u.replace(/(.)\/+$/,"$1"),m=s.slice(1);return{params:n.reduce((_,E,S)=>{let{paramName:A,isOptional:I}=E;if(A==="*"){let k=m[S]||"";h=u.slice(0,u.length-k.length).replace(/(.)\/+$/,"$1")}const R=m[S];return I&&!R?_[A]=void 0:_[A]=(R||"").replace(/%2F/g,"/"),_},{}),pathname:u,pathnameBase:h,pattern:e}}function zJ(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),T5(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let n=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(h,m,o)=>(n.push({paramName:m,isOptional:o!=null}),o?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(n.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),n]}function NJ(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return T5(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function M5(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}const Jf=e=>e.join("/").replace(/\/\/+/g,"/"),BJ=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/");function $J(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const I5=["post","put","patch","delete"];new Set(I5);const FJ=["get",...I5];new Set(FJ);/**
 * React Router v6.27.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Cb(){return Cb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Cb.apply(this,arguments)}const UJ=V.createContext(null),VJ=V.createContext(null),O5=V.createContext(null),hw=V.createContext(null),fw=V.createContext({outlet:null,matches:[],isDataRoute:!1}),k5=V.createContext(null);function bI(){return V.useContext(hw)!=null}function D5(){return bI()||Vo(!1),V.useContext(hw).location}function GJ(e,t){return WJ(e,t)}function WJ(e,t,r,n){bI()||Vo(!1);let{navigator:s}=V.useContext(O5),{matches:u}=V.useContext(fw),h=u[u.length-1],m=h?h.params:{};h&&h.pathname;let o=h?h.pathnameBase:"/";h&&h.route;let _=D5(),E;if(t){var S;let L=typeof t=="string"?dw(t):t;o==="/"||(S=L.pathname)!=null&&S.startsWith(o)||Vo(!1),E=L}else E=_;let A=E.pathname||"/",I=A;if(o!=="/"){let L=o.replace(/^\//,"").split("/");I="/"+A.replace(/^\//,"").split("/").slice(L.length).join("/")}let R=TJ(e,{pathname:I}),k=KJ(R&&R.map(L=>Object.assign({},L,{params:Object.assign({},m,L.params),pathname:Jf([o,s.encodeLocation?s.encodeLocation(L.pathname).pathname:L.pathname]),pathnameBase:L.pathnameBase==="/"?o:Jf([o,s.encodeLocation?s.encodeLocation(L.pathnameBase).pathname:L.pathnameBase])})),u,r,n);return t&&k?V.createElement(hw.Provider,{value:{location:Cb({pathname:"/",search:"",hash:"",state:null,key:"default"},E),navigationType:lu.Pop}},k):k}function qJ(){let e=eQ(),t=$J(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return V.createElement(V.Fragment,null,V.createElement("h2",null,"Unexpected Application Error!"),V.createElement("h3",{style:{fontStyle:"italic"}},t),r?V.createElement("pre",{style:s},r):null,null)}const HJ=V.createElement(qJ,null);class XJ extends V.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?V.createElement(fw.Provider,{value:this.props.routeContext},V.createElement(k5.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function ZJ(e){let{routeContext:t,match:r,children:n}=e,s=V.useContext(UJ);return s&&s.static&&s.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=r.route.id),V.createElement(fw.Provider,{value:t},n)}function KJ(e,t,r,n){var s;if(t===void 0&&(t=[]),r===void 0&&(r=null),n===void 0&&(n=null),e==null){var u;if(!r)return null;if(r.errors)e=r.matches;else if((u=n)!=null&&u.v7_partialHydration&&t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let h=e,m=(s=r)==null?void 0:s.errors;if(m!=null){let E=h.findIndex(S=>S.route.id&&(m==null?void 0:m[S.route.id])!==void 0);E>=0||Vo(!1),h=h.slice(0,Math.min(h.length,E+1))}let o=!1,_=-1;if(r&&n&&n.v7_partialHydration)for(let E=0;E<h.length;E++){let S=h[E];if((S.route.HydrateFallback||S.route.hydrateFallbackElement)&&(_=E),S.route.id){let{loaderData:A,errors:I}=r,R=S.route.loader&&A[S.route.id]===void 0&&(!I||I[S.route.id]===void 0);if(S.route.lazy||R){o=!0,_>=0?h=h.slice(0,_+1):h=[h[0]];break}}}return h.reduceRight((E,S,A)=>{let I,R=!1,k=null,L=null;r&&(I=m&&S.route.id?m[S.route.id]:void 0,k=S.route.errorElement||HJ,o&&(_<0&&A===0?(R=!0,L=null):_===A&&(R=!0,L=S.route.hydrateFallbackElement||null)));let N=t.concat(h.slice(0,A+1)),z=()=>{let F;return I?F=k:R?F=L:S.route.Component?F=V.createElement(S.route.Component,null):S.route.element?F=S.route.element:F=E,V.createElement(ZJ,{match:S,routeContext:{outlet:E,matches:N,isDataRoute:r!=null},children:F})};return r&&(S.route.ErrorBoundary||S.route.errorElement||A===0)?V.createElement(XJ,{location:r.location,revalidation:r.revalidation,component:k,error:I,children:z(),routeContext:{outlet:null,matches:N,isDataRoute:!0}}):z()},null)}var AP=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(AP||{});function YJ(e){let t=V.useContext(VJ);return t||Vo(!1),t}function JJ(e){let t=V.useContext(fw);return t||Vo(!1),t}function QJ(e){let t=JJ(),r=t.matches[t.matches.length-1];return r.route.id||Vo(!1),r.route.id}function eQ(){var e;let t=V.useContext(k5),r=YJ(AP.UseRouteError),n=QJ(AP.UseRouteError);return t!==void 0?t:(e=r.errors)==null?void 0:e[n]}function PP(e){Vo(!1)}function tQ(e){let{basename:t="/",children:r=null,location:n,navigationType:s=lu.Pop,navigator:u,static:h=!1,future:m}=e;bI()&&Vo(!1);let o=t.replace(/^\/*/,"/"),_=V.useMemo(()=>({basename:o,navigator:u,static:h,future:Cb({v7_relativeSplatPath:!1},m)}),[o,m,u,h]);typeof n=="string"&&(n=dw(n));let{pathname:E="/",search:S="",hash:A="",state:I=null,key:R="default"}=n,k=V.useMemo(()=>{let L=M5(E,o);return L==null?null:{location:{pathname:L,search:S,hash:A,state:I,key:R},navigationType:s}},[o,E,S,A,I,R,s]);return k==null?null:V.createElement(O5.Provider,{value:_},V.createElement(hw.Provider,{children:r,value:k}))}function rQ(e){let{children:t,location:r}=e;return GJ(CP(t),r)}new Promise(()=>{});function CP(e,t){t===void 0&&(t=[]);let r=[];return V.Children.forEach(e,(n,s)=>{if(!V.isValidElement(n))return;let u=[...t,s];if(n.type===V.Fragment){r.push.apply(r,CP(n.props.children,u));return}n.type!==PP&&Vo(!1),!n.props.index||!n.props.children||Vo(!1);let h={id:n.props.id||u.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(h.children=CP(n.props.children,u)),r.push(h)}),r}/**
 * React Router DOM v6.27.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const nQ="6";try{window.__reactRouterVersion=nQ}catch{}const iQ="startTransition",uj=j1[iQ];function oQ(e){let{basename:t,children:r,future:n,window:s}=e,u=V.useRef();u.current==null&&(u.current=wJ({window:s,v5Compat:!0}));let h=u.current,[m,o]=V.useState({action:h.action,location:h.location}),{v7_startTransition:_}=n||{},E=V.useCallback(S=>{_&&uj?uj(()=>o(S)):o(S)},[o,_]);return V.useLayoutEffect(()=>h.listen(E),[h,E]),V.createElement(tQ,{basename:t,children:r,location:m.location,navigationType:m.action,navigator:h,future:n})}var dj;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(dj||(dj={}));var hj;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(hj||(hj={}));const aQ=()=>M.jsx("header",{className:"bg-white border-b sticky top-0 z-10 shadow-sm",children:M.jsxs("div",{className:"container mx-auto py-3 px-4 flex items-center justify-between",children:[M.jsxs("div",{className:"flex items-center gap-2",children:[M.jsx(t_,{className:"h-5 w-5 text-pisa-blue"}),M.jsx("div",{className:"font-bold text-xl sm:text-2xl bg-gradient-to-r from-pisa-blue to-pisa-purple bg-clip-text text-transparent",children:"Denmark & Europe PISA results"}),M.jsxs("div",{className:"flex flex-col items-start",children:[M.jsx("span",{className:"text-xs font-medium text-white bg-pisa-purple px-2 py-0.5 rounded-md",children:"2022"}),M.jsx("span",{className:"text-xs text-gray-500 hidden sm:inline-block",children:"By Morten Helsø (s214927) & Gustav Clausen (s214940), DTU"})]})]}),M.jsx("div",{className:"hidden md:flex md:w-1/3 relative"})]})}),_n=V.forwardRef(({className:e,...t},r)=>M.jsx("div",{ref:r,className:Wt("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));_n.displayName="Card";const oa=V.forwardRef(({className:e,...t},r)=>M.jsx("div",{ref:r,className:Wt("flex flex-col space-y-1.5 p-6",e),...t}));oa.displayName="CardHeader";const aa=V.forwardRef(({className:e,...t},r)=>M.jsx("h3",{ref:r,className:Wt("text-2xl font-semibold leading-none tracking-tight",e),...t}));aa.displayName="CardTitle";const La=V.forwardRef(({className:e,...t},r)=>M.jsx("p",{ref:r,className:Wt("text-sm text-muted-foreground",e),...t}));La.displayName="CardDescription";const xn=V.forwardRef(({className:e,...t},r)=>M.jsx("div",{ref:r,className:Wt("p-6 pt-0",e),...t}));xn.displayName="CardContent";const sQ=V.forwardRef(({className:e,...t},r)=>M.jsx("div",{ref:r,className:Wt("flex items-center p-6 pt-0",e),...t}));sQ.displayName="CardFooter";const lQ=()=>{const[e,t]=V.useState(!0);return M.jsx("div",{className:`transition-all duration-300 ${e?"":"max-h-0 overflow-hidden opacity-0"}`,children:M.jsx("div",{className:"container mx-auto py-12 px-4 md:px-6",children:M.jsxs("div",{className:"max-w-4xl mx-auto",children:[M.jsx("h1",{className:"text-3xl font-bold mb-6 text-gray-800",id:"start-introduction",children:"Denmark in PISA 2022: Student Well-being and Performance in a European Context"}),M.jsxs("div",{className:"prose max-w-none mb-8",children:[M.jsx("p",{className:"text-lg text-gray-700 mb-4",children:"The PISA (Programme for International Student Assessment) survey provides valuable insights into educational systems worldwide. In this survey, we will first explore Danish students' well-being, academic performance, and how male and female students differ in their experiences. Later we will allow you to interactively explore the PISA dataset by comparing Denmark's results with other European countries."}),M.jsx("h2",{className:"text-2xl font-semibold text-gray-800 mt-8 mb-4",children:"Key Findings"}),M.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[M.jsx(_n,{className:"border-l-4 border-l-pisa-blue",children:M.jsxs(xn,{className:"pt-6",children:[M.jsx("h3",{className:"font-semibold mb-2",children:"Gap between female and male students"}),M.jsx("p",{className:"text-sm text-gray-600",children:"Our clustering analysis reveals a significant gap between male and female students in Denmark. we seperate students into 5 groups based on their well-being and academic performance."})]})}),M.jsx(_n,{className:"border-l-4 border-l-pisa-purple",children:M.jsxs(xn,{className:"pt-6",children:[M.jsx("h3",{className:"font-semibold mb-2",children:"Bullying Exposure"}),M.jsx("p",{className:"text-sm text-gray-600",children:"Denmark has the highest percentage of students reporting bullying exposure in the Nordics."})]})}),M.jsx(_n,{className:"border-l-4 border-l-emerald-500",children:M.jsxs(xn,{className:"pt-6",children:[M.jsx("h3",{className:"font-semibold mb-2",children:"Mathematics Performance"}),M.jsx("p",{className:"text-sm text-gray-600",children:"Students with higher stress levels perform better in mathematics, while performing worse in reading."})]})}),M.jsx(_n,{className:"border-l-4 border-l-amber-500",children:M.jsxs(xn,{className:"pt-6",children:[M.jsx("h3",{className:"font-semibold mb-2",children:"Socioeconomic Impact"}),M.jsx("p",{className:"text-sm text-gray-600",children:"Students from a higher socioeconomic background tend to have better academic performance. Underlying the gap discussed in Denmark between urban, suburban and rural students."})]})})]}),M.jsx("h2",{className:"text-2xl font-semibold text-gray-800 mt-8 mb-4",children:"Methodology"}),M.jsx("p",{className:"text-gray-700 mb-4",children:"PISA 2022 assessed students aged 15-16 across various dimensions including academic performance and well-being indicators. The standardized assessment allows for cross-country comparisons and highlights both strengths and areas for improvement in educational systems. We have used PISA's scores across categories, and normalized all values."})]})]})})})};function cQ(e,t=[]){let r=[];function n(u,h){const m=V.createContext(h),o=r.length;r=[...r,h];function _(S){const{scope:A,children:I,...R}=S,k=(A==null?void 0:A[e][o])||m,L=V.useMemo(()=>R,Object.values(R));return M.jsx(k.Provider,{value:L,children:I})}function E(S,A){const I=(A==null?void 0:A[e][o])||m,R=V.useContext(I);if(R)return R;if(h!==void 0)return h;throw new Error(`\`${S}\` must be used within \`${u}\``)}return _.displayName=u+"Provider",[_,E]}const s=()=>{const u=r.map(h=>V.createContext(h));return function(m){const o=(m==null?void 0:m[e])||u;return V.useMemo(()=>({[`__scope${e}`]:{...m,[e]:o}}),[m,o])}};return s.scopeName=e,[n,uQ(s,...t)]}function uQ(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const n=e.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(u){const h=n.reduce((m,{useScope:o,scopeName:_})=>{const S=o(u)[`__scope${_}`];return{...m,...S}},{});return V.useMemo(()=>({[`__scope${t.scopeName}`]:h}),[h])}};return r.scopeName=t.scopeName,r}var dQ=V.createContext(void 0);function pw(e){const t=V.useContext(dQ);return e||t||"ltr"}var CT="rovingFocusGroup.onEntryFocus",hQ={bubbles:!1,cancelable:!0},mw="RovingFocusGroup",[MP,R5,fQ]=iI(mw),[pQ,L5]=cQ(mw,[fQ]),[mQ,gQ]=pQ(mw),j5=V.forwardRef((e,t)=>M.jsx(MP.Provider,{scope:e.__scopeRovingFocusGroup,children:M.jsx(MP.Slot,{scope:e.__scopeRovingFocusGroup,children:M.jsx(yQ,{...e,ref:t})})}));j5.displayName=mw;var yQ=V.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,orientation:n,loop:s=!1,dir:u,currentTabStopId:h,defaultCurrentTabStopId:m,onCurrentTabStopIdChange:o,onEntryFocus:_,preventScrollOnEntryFocus:E=!1,...S}=e,A=V.useRef(null),I=Ur(t,A),R=pw(u),[k=null,L]=Au({prop:h,defaultProp:m,onChange:o}),[N,z]=V.useState(!1),F=si(_),U=R5(r),W=V.useRef(!1),[Y,Q]=V.useState(0);return V.useEffect(()=>{const Z=A.current;if(Z)return Z.addEventListener(CT,F),()=>Z.removeEventListener(CT,F)},[F]),M.jsx(mQ,{scope:r,orientation:n,dir:R,loop:s,currentTabStopId:k,onItemFocus:V.useCallback(Z=>L(Z),[L]),onItemShiftTab:V.useCallback(()=>z(!0),[]),onFocusableItemAdd:V.useCallback(()=>Q(Z=>Z+1),[]),onFocusableItemRemove:V.useCallback(()=>Q(Z=>Z-1),[]),children:M.jsx(vr.div,{tabIndex:N||Y===0?-1:0,"data-orientation":n,...S,ref:I,style:{outline:"none",...e.style},onMouseDown:rr(e.onMouseDown,()=>{W.current=!0}),onFocus:rr(e.onFocus,Z=>{const re=!W.current;if(Z.target===Z.currentTarget&&re&&!N){const ne=new CustomEvent(CT,hQ);if(Z.currentTarget.dispatchEvent(ne),!ne.defaultPrevented){const ue=U().filter(Le=>Le.focusable),fe=ue.find(Le=>Le.active),Ee=ue.find(Le=>Le.id===k),je=[fe,Ee,...ue].filter(Boolean).map(Le=>Le.ref.current);B5(je,E)}}W.current=!1}),onBlur:rr(e.onBlur,()=>z(!1))})})}),z5="RovingFocusGroupItem",N5=V.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,focusable:n=!0,active:s=!1,tabStopId:u,...h}=e,m=ql(),o=u||m,_=gQ(z5,r),E=_.currentTabStopId===o,S=R5(r),{onFocusableItemAdd:A,onFocusableItemRemove:I}=_;return V.useEffect(()=>{if(n)return A(),()=>I()},[n,A,I]),M.jsx(MP.ItemSlot,{scope:r,id:o,focusable:n,active:s,children:M.jsx(vr.span,{tabIndex:E?0:-1,"data-orientation":_.orientation,...h,ref:t,onMouseDown:rr(e.onMouseDown,R=>{n?_.onItemFocus(o):R.preventDefault()}),onFocus:rr(e.onFocus,()=>_.onItemFocus(o)),onKeyDown:rr(e.onKeyDown,R=>{if(R.key==="Tab"&&R.shiftKey){_.onItemShiftTab();return}if(R.target!==R.currentTarget)return;const k=xQ(R,_.orientation,_.dir);if(k!==void 0){if(R.metaKey||R.ctrlKey||R.altKey||R.shiftKey)return;R.preventDefault();let N=S().filter(z=>z.focusable).map(z=>z.ref.current);if(k==="last")N.reverse();else if(k==="prev"||k==="next"){k==="prev"&&N.reverse();const z=N.indexOf(R.currentTarget);N=_.loop?bQ(N,z+1):N.slice(z+1)}setTimeout(()=>B5(N))}})})})});N5.displayName=z5;var vQ={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function _Q(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function xQ(e,t,r){const n=_Q(e.key,r);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(n))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(n)))return vQ[n]}function B5(e,t=!1){const r=document.activeElement;for(const n of e)if(n===r||(n.focus({preventScroll:t}),document.activeElement!==r))return}function bQ(e,t){return e.map((r,n)=>e[(t+n)%e.length])}var wQ=j5,SQ=N5,wI="Tabs",[EQ,NCe]=gh(wI,[L5]),$5=L5(),[TQ,SI]=EQ(wI),F5=V.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,onValueChange:s,defaultValue:u,orientation:h="horizontal",dir:m,activationMode:o="automatic",..._}=e,E=pw(m),[S,A]=Au({prop:n,onChange:s,defaultProp:u});return M.jsx(TQ,{scope:r,baseId:ql(),value:S,onValueChange:A,orientation:h,dir:E,activationMode:o,children:M.jsx(vr.div,{dir:E,"data-orientation":h,..._,ref:t})})});F5.displayName=wI;var U5="TabsList",V5=V.forwardRef((e,t)=>{const{__scopeTabs:r,loop:n=!0,...s}=e,u=SI(U5,r),h=$5(r);return M.jsx(wQ,{asChild:!0,...h,orientation:u.orientation,dir:u.dir,loop:n,children:M.jsx(vr.div,{role:"tablist","aria-orientation":u.orientation,...s,ref:t})})});V5.displayName=U5;var G5="TabsTrigger",W5=V.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,disabled:s=!1,...u}=e,h=SI(G5,r),m=$5(r),o=X5(h.baseId,n),_=Z5(h.baseId,n),E=n===h.value;return M.jsx(SQ,{asChild:!0,...m,focusable:!s,active:E,children:M.jsx(vr.button,{type:"button",role:"tab","aria-selected":E,"aria-controls":_,"data-state":E?"active":"inactive","data-disabled":s?"":void 0,disabled:s,id:o,...u,ref:t,onMouseDown:rr(e.onMouseDown,S=>{!s&&S.button===0&&S.ctrlKey===!1?h.onValueChange(n):S.preventDefault()}),onKeyDown:rr(e.onKeyDown,S=>{[" ","Enter"].includes(S.key)&&h.onValueChange(n)}),onFocus:rr(e.onFocus,()=>{const S=h.activationMode!=="manual";!E&&!s&&S&&h.onValueChange(n)})})})});W5.displayName=G5;var q5="TabsContent",H5=V.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,forceMount:s,children:u,...h}=e,m=SI(q5,r),o=X5(m.baseId,n),_=Z5(m.baseId,n),E=n===m.value,S=V.useRef(E);return V.useEffect(()=>{const A=requestAnimationFrame(()=>S.current=!1);return()=>cancelAnimationFrame(A)},[]),M.jsx(qa,{present:s||E,children:({present:A})=>M.jsx(vr.div,{"data-state":E?"active":"inactive","data-orientation":m.orientation,role:"tabpanel","aria-labelledby":o,hidden:!A,id:_,tabIndex:0,...h,ref:t,style:{...e.style,animationDuration:S.current?"0s":void 0},children:A&&u})})});H5.displayName=q5;function X5(e,t){return`${e}-trigger-${t}`}function Z5(e,t){return`${e}-content-${t}`}var AQ=F5,K5=V5,Y5=W5,J5=H5;const gw=AQ,n_=V.forwardRef(({className:e,...t},r)=>M.jsx(K5,{ref:r,className:Wt("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...t}));n_.displayName=K5.displayName;const sl=V.forwardRef(({className:e,...t},r)=>M.jsx(Y5,{ref:r,className:Wt("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...t}));sl.displayName=Y5.displayName;const ll=V.forwardRef(({className:e,...t},r)=>M.jsx(J5,{ref:r,className:Wt("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));ll.displayName=J5.displayName;function IP(e,[t,r]){return Math.min(r,Math.max(t,e))}var MT=0;function Q5(){V.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??fj()),document.body.insertAdjacentElement("beforeend",e[1]??fj()),MT++,()=>{MT===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),MT--}},[])}function fj(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var IT="focusScope.autoFocusOnMount",OT="focusScope.autoFocusOnUnmount",pj={bubbles:!1,cancelable:!0},PQ="FocusScope",EI=V.forwardRef((e,t)=>{const{loop:r=!1,trapped:n=!1,onMountAutoFocus:s,onUnmountAutoFocus:u,...h}=e,[m,o]=V.useState(null),_=si(s),E=si(u),S=V.useRef(null),A=Ur(t,k=>o(k)),I=V.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;V.useEffect(()=>{if(n){let k=function(F){if(I.paused||!m)return;const U=F.target;m.contains(U)?S.current=U:Hc(S.current,{select:!0})},L=function(F){if(I.paused||!m)return;const U=F.relatedTarget;U!==null&&(m.contains(U)||Hc(S.current,{select:!0}))},N=function(F){if(document.activeElement===document.body)for(const W of F)W.removedNodes.length>0&&Hc(m)};document.addEventListener("focusin",k),document.addEventListener("focusout",L);const z=new MutationObserver(N);return m&&z.observe(m,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",k),document.removeEventListener("focusout",L),z.disconnect()}}},[n,m,I.paused]),V.useEffect(()=>{if(m){gj.add(I);const k=document.activeElement;if(!m.contains(k)){const N=new CustomEvent(IT,pj);m.addEventListener(IT,_),m.dispatchEvent(N),N.defaultPrevented||(CQ(DQ(eU(m)),{select:!0}),document.activeElement===k&&Hc(m))}return()=>{m.removeEventListener(IT,_),setTimeout(()=>{const N=new CustomEvent(OT,pj);m.addEventListener(OT,E),m.dispatchEvent(N),N.defaultPrevented||Hc(k??document.body,{select:!0}),m.removeEventListener(OT,E),gj.remove(I)},0)}}},[m,_,E,I]);const R=V.useCallback(k=>{if(!r&&!n||I.paused)return;const L=k.key==="Tab"&&!k.altKey&&!k.ctrlKey&&!k.metaKey,N=document.activeElement;if(L&&N){const z=k.currentTarget,[F,U]=MQ(z);F&&U?!k.shiftKey&&N===U?(k.preventDefault(),r&&Hc(F,{select:!0})):k.shiftKey&&N===F&&(k.preventDefault(),r&&Hc(U,{select:!0})):N===z&&k.preventDefault()}},[r,n,I.paused]);return M.jsx(vr.div,{tabIndex:-1,...h,ref:A,onKeyDown:R})});EI.displayName=PQ;function CQ(e,{select:t=!1}={}){const r=document.activeElement;for(const n of e)if(Hc(n,{select:t}),document.activeElement!==r)return}function MQ(e){const t=eU(e),r=mj(t,e),n=mj(t.reverse(),e);return[r,n]}function eU(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const s=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||s?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function mj(e,t){for(const r of e)if(!IQ(r,{upTo:t}))return r}function IQ(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function OQ(e){return e instanceof HTMLInputElement&&"select"in e}function Hc(e,{select:t=!1}={}){if(e&&e.focus){const r=document.activeElement;e.focus({preventScroll:!0}),e!==r&&OQ(e)&&t&&e.select()}}var gj=kQ();function kQ(){let e=[];return{add(t){const r=e[0];t!==r&&(r==null||r.pause()),e=yj(e,t),e.unshift(t)},remove(t){var r;e=yj(e,t),(r=e[0])==null||r.resume()}}}function yj(e,t){const r=[...e],n=r.indexOf(t);return n!==-1&&r.splice(n,1),r}function DQ(e){return e.filter(t=>t.tagName!=="A")}function tU(e){const t=V.useRef({value:e,previous:e});return V.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var RQ=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},_f=new WeakMap,d0=new WeakMap,h0={},kT=0,rU=function(e){return e&&(e.host||rU(e.parentNode))},LQ=function(e,t){return t.map(function(r){if(e.contains(r))return r;var n=rU(r);return n&&e.contains(n)?n:(console.error("aria-hidden",r,"in not contained inside",e,". Doing nothing"),null)}).filter(function(r){return!!r})},jQ=function(e,t,r,n){var s=LQ(t,Array.isArray(e)?e:[e]);h0[r]||(h0[r]=new WeakMap);var u=h0[r],h=[],m=new Set,o=new Set(s),_=function(S){!S||m.has(S)||(m.add(S),_(S.parentNode))};s.forEach(_);var E=function(S){!S||o.has(S)||Array.prototype.forEach.call(S.children,function(A){if(m.has(A))E(A);else try{var I=A.getAttribute(n),R=I!==null&&I!=="false",k=(_f.get(A)||0)+1,L=(u.get(A)||0)+1;_f.set(A,k),u.set(A,L),h.push(A),k===1&&R&&d0.set(A,!0),L===1&&A.setAttribute(r,"true"),R||A.setAttribute(n,"true")}catch(N){console.error("aria-hidden: cannot operate on ",A,N)}})};return E(t),m.clear(),kT++,function(){h.forEach(function(S){var A=_f.get(S)-1,I=u.get(S)-1;_f.set(S,A),u.set(S,I),A||(d0.has(S)||S.removeAttribute(n),d0.delete(S)),I||S.removeAttribute(r)}),kT--,kT||(_f=new WeakMap,_f=new WeakMap,d0=new WeakMap,h0={})}},nU=function(e,t,r){r===void 0&&(r="data-aria-hidden");var n=Array.from(Array.isArray(e)?e:[e]),s=RQ(e);return s?(n.push.apply(n,Array.from(s.querySelectorAll("[aria-live]"))),jQ(n,s,r,"aria-hidden")):function(){return null}},nl=function(){return nl=Object.assign||function(t){for(var r,n=1,s=arguments.length;n<s;n++){r=arguments[n];for(var u in r)Object.prototype.hasOwnProperty.call(r,u)&&(t[u]=r[u])}return t},nl.apply(this,arguments)};function iU(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r}function zQ(e,t,r){if(r||arguments.length===2)for(var n=0,s=t.length,u;n<s;n++)(u||!(n in t))&&(u||(u=Array.prototype.slice.call(t,0,n)),u[n]=t[n]);return e.concat(u||Array.prototype.slice.call(t))}var q0="right-scroll-bar-position",H0="width-before-scroll-bar",NQ="with-scroll-bars-hidden",BQ="--removed-body-scroll-bar-size";function DT(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function $Q(e,t){var r=V.useState(function(){return{value:e,callback:t,facade:{get current(){return r.value},set current(n){var s=r.value;s!==n&&(r.value=n,r.callback(n,s))}}}})[0];return r.callback=t,r.facade}var FQ=typeof window<"u"?V.useLayoutEffect:V.useEffect,vj=new WeakMap;function UQ(e,t){var r=$Q(null,function(n){return e.forEach(function(s){return DT(s,n)})});return FQ(function(){var n=vj.get(r);if(n){var s=new Set(n),u=new Set(e),h=r.current;s.forEach(function(m){u.has(m)||DT(m,null)}),u.forEach(function(m){s.has(m)||DT(m,h)})}vj.set(r,e)},[e]),r}function VQ(e){return e}function GQ(e,t){t===void 0&&(t=VQ);var r=[],n=!1,s={read:function(){if(n)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return r.length?r[r.length-1]:e},useMedium:function(u){var h=t(u,n);return r.push(h),function(){r=r.filter(function(m){return m!==h})}},assignSyncMedium:function(u){for(n=!0;r.length;){var h=r;r=[],h.forEach(u)}r={push:function(m){return u(m)},filter:function(){return r}}},assignMedium:function(u){n=!0;var h=[];if(r.length){var m=r;r=[],m.forEach(u),h=r}var o=function(){var E=h;h=[],E.forEach(u)},_=function(){return Promise.resolve().then(o)};_(),r={push:function(E){h.push(E),_()},filter:function(E){return h=h.filter(E),r}}}};return s}function WQ(e){e===void 0&&(e={});var t=GQ(null);return t.options=nl({async:!0,ssr:!1},e),t}var oU=function(e){var t=e.sideCar,r=iU(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var n=t.read();if(!n)throw new Error("Sidecar medium not found");return V.createElement(n,nl({},r))};oU.isSideCarExport=!0;function qQ(e,t){return e.useMedium(t),oU}var aU=WQ(),RT=function(){},yw=V.forwardRef(function(e,t){var r=V.useRef(null),n=V.useState({onScrollCapture:RT,onWheelCapture:RT,onTouchMoveCapture:RT}),s=n[0],u=n[1],h=e.forwardProps,m=e.children,o=e.className,_=e.removeScrollBar,E=e.enabled,S=e.shards,A=e.sideCar,I=e.noIsolation,R=e.inert,k=e.allowPinchZoom,L=e.as,N=L===void 0?"div":L,z=e.gapMode,F=iU(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),U=A,W=UQ([r,t]),Y=nl(nl({},F),s);return V.createElement(V.Fragment,null,E&&V.createElement(U,{sideCar:aU,removeScrollBar:_,shards:S,noIsolation:I,inert:R,setCallbacks:u,allowPinchZoom:!!k,lockRef:r,gapMode:z}),h?V.cloneElement(V.Children.only(m),nl(nl({},Y),{ref:W})):V.createElement(N,nl({},Y,{className:o,ref:W}),m))});yw.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};yw.classNames={fullWidth:H0,zeroRight:q0};var HQ=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function XQ(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=HQ();return t&&e.setAttribute("nonce",t),e}function ZQ(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function KQ(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var YQ=function(){var e=0,t=null;return{add:function(r){e==0&&(t=XQ())&&(ZQ(t,r),KQ(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},JQ=function(){var e=YQ();return function(t,r){V.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&r])}},sU=function(){var e=JQ(),t=function(r){var n=r.styles,s=r.dynamic;return e(n,s),null};return t},QQ={left:0,top:0,right:0,gap:0},LT=function(e){return parseInt(e||"",10)||0},eee=function(e){var t=window.getComputedStyle(document.body),r=t[e==="padding"?"paddingLeft":"marginLeft"],n=t[e==="padding"?"paddingTop":"marginTop"],s=t[e==="padding"?"paddingRight":"marginRight"];return[LT(r),LT(n),LT(s)]},tee=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return QQ;var t=eee(e),r=document.documentElement.clientWidth,n=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,n-r+t[2]-t[0])}},ree=sU(),Qf="data-scroll-locked",nee=function(e,t,r,n){var s=e.left,u=e.top,h=e.right,m=e.gap;return r===void 0&&(r="margin"),`
  .`.concat(NQ,` {
   overflow: hidden `).concat(n,`;
   padding-right: `).concat(m,"px ").concat(n,`;
  }
  body[`).concat(Qf,`] {
    overflow: hidden `).concat(n,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(n,";"),r==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(u,`px;
    padding-right: `).concat(h,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(m,"px ").concat(n,`;
    `),r==="padding"&&"padding-right: ".concat(m,"px ").concat(n,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(q0,` {
    right: `).concat(m,"px ").concat(n,`;
  }
  
  .`).concat(H0,` {
    margin-right: `).concat(m,"px ").concat(n,`;
  }
  
  .`).concat(q0," .").concat(q0,` {
    right: 0 `).concat(n,`;
  }
  
  .`).concat(H0," .").concat(H0,` {
    margin-right: 0 `).concat(n,`;
  }
  
  body[`).concat(Qf,`] {
    `).concat(BQ,": ").concat(m,`px;
  }
`)},_j=function(){var e=parseInt(document.body.getAttribute(Qf)||"0",10);return isFinite(e)?e:0},iee=function(){V.useEffect(function(){return document.body.setAttribute(Qf,(_j()+1).toString()),function(){var e=_j()-1;e<=0?document.body.removeAttribute(Qf):document.body.setAttribute(Qf,e.toString())}},[])},oee=function(e){var t=e.noRelative,r=e.noImportant,n=e.gapMode,s=n===void 0?"margin":n;iee();var u=V.useMemo(function(){return tee(s)},[s]);return V.createElement(ree,{styles:nee(u,!t,s,r?"":"!important")})},OP=!1;if(typeof window<"u")try{var f0=Object.defineProperty({},"passive",{get:function(){return OP=!0,!0}});window.addEventListener("test",f0,f0),window.removeEventListener("test",f0,f0)}catch{OP=!1}var xf=OP?{passive:!1}:!1,aee=function(e){return e.tagName==="TEXTAREA"},lU=function(e,t){if(!(e instanceof Element))return!1;var r=window.getComputedStyle(e);return r[t]!=="hidden"&&!(r.overflowY===r.overflowX&&!aee(e)&&r[t]==="visible")},see=function(e){return lU(e,"overflowY")},lee=function(e){return lU(e,"overflowX")},xj=function(e,t){var r=t.ownerDocument,n=t;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var s=cU(e,n);if(s){var u=uU(e,n),h=u[1],m=u[2];if(h>m)return!0}n=n.parentNode}while(n&&n!==r.body);return!1},cee=function(e){var t=e.scrollTop,r=e.scrollHeight,n=e.clientHeight;return[t,r,n]},uee=function(e){var t=e.scrollLeft,r=e.scrollWidth,n=e.clientWidth;return[t,r,n]},cU=function(e,t){return e==="v"?see(t):lee(t)},uU=function(e,t){return e==="v"?cee(t):uee(t)},dee=function(e,t){return e==="h"&&t==="rtl"?-1:1},hee=function(e,t,r,n,s){var u=dee(e,window.getComputedStyle(t).direction),h=u*n,m=r.target,o=t.contains(m),_=!1,E=h>0,S=0,A=0;do{var I=uU(e,m),R=I[0],k=I[1],L=I[2],N=k-L-u*R;(R||N)&&cU(e,m)&&(S+=N,A+=R),m instanceof ShadowRoot?m=m.host:m=m.parentNode}while(!o&&m!==document.body||o&&(t.contains(m)||t===m));return(E&&(Math.abs(S)<1||!s)||!E&&(Math.abs(A)<1||!s))&&(_=!0),_},p0=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},bj=function(e){return[e.deltaX,e.deltaY]},wj=function(e){return e&&"current"in e?e.current:e},fee=function(e,t){return e[0]===t[0]&&e[1]===t[1]},pee=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},mee=0,bf=[];function gee(e){var t=V.useRef([]),r=V.useRef([0,0]),n=V.useRef(),s=V.useState(mee++)[0],u=V.useState(sU)[0],h=V.useRef(e);V.useEffect(function(){h.current=e},[e]),V.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(s));var k=zQ([e.lockRef.current],(e.shards||[]).map(wj),!0).filter(Boolean);return k.forEach(function(L){return L.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),k.forEach(function(L){return L.classList.remove("allow-interactivity-".concat(s))})}}},[e.inert,e.lockRef.current,e.shards]);var m=V.useCallback(function(k,L){if("touches"in k&&k.touches.length===2||k.type==="wheel"&&k.ctrlKey)return!h.current.allowPinchZoom;var N=p0(k),z=r.current,F="deltaX"in k?k.deltaX:z[0]-N[0],U="deltaY"in k?k.deltaY:z[1]-N[1],W,Y=k.target,Q=Math.abs(F)>Math.abs(U)?"h":"v";if("touches"in k&&Q==="h"&&Y.type==="range")return!1;var Z=xj(Q,Y);if(!Z)return!0;if(Z?W=Q:(W=Q==="v"?"h":"v",Z=xj(Q,Y)),!Z)return!1;if(!n.current&&"changedTouches"in k&&(F||U)&&(n.current=W),!W)return!0;var re=n.current||W;return hee(re,L,k,re==="h"?F:U,!0)},[]),o=V.useCallback(function(k){var L=k;if(!(!bf.length||bf[bf.length-1]!==u)){var N="deltaY"in L?bj(L):p0(L),z=t.current.filter(function(W){return W.name===L.type&&(W.target===L.target||L.target===W.shadowParent)&&fee(W.delta,N)})[0];if(z&&z.should){L.cancelable&&L.preventDefault();return}if(!z){var F=(h.current.shards||[]).map(wj).filter(Boolean).filter(function(W){return W.contains(L.target)}),U=F.length>0?m(L,F[0]):!h.current.noIsolation;U&&L.cancelable&&L.preventDefault()}}},[]),_=V.useCallback(function(k,L,N,z){var F={name:k,delta:L,target:N,should:z,shadowParent:yee(N)};t.current.push(F),setTimeout(function(){t.current=t.current.filter(function(U){return U!==F})},1)},[]),E=V.useCallback(function(k){r.current=p0(k),n.current=void 0},[]),S=V.useCallback(function(k){_(k.type,bj(k),k.target,m(k,e.lockRef.current))},[]),A=V.useCallback(function(k){_(k.type,p0(k),k.target,m(k,e.lockRef.current))},[]);V.useEffect(function(){return bf.push(u),e.setCallbacks({onScrollCapture:S,onWheelCapture:S,onTouchMoveCapture:A}),document.addEventListener("wheel",o,xf),document.addEventListener("touchmove",o,xf),document.addEventListener("touchstart",E,xf),function(){bf=bf.filter(function(k){return k!==u}),document.removeEventListener("wheel",o,xf),document.removeEventListener("touchmove",o,xf),document.removeEventListener("touchstart",E,xf)}},[]);var I=e.removeScrollBar,R=e.inert;return V.createElement(V.Fragment,null,R?V.createElement(u,{styles:pee(s)}):null,I?V.createElement(oee,{gapMode:e.gapMode}):null)}function yee(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const vee=qQ(aU,gee);var TI=V.forwardRef(function(e,t){return V.createElement(yw,nl({},e,{ref:t,sideCar:vee}))});TI.classNames=yw.classNames;var _ee=[" ","Enter","ArrowUp","ArrowDown"],xee=[" ","Enter"],i_="Select",[vw,_w,bee]=iI(i_),[tm,BCe]=gh(i_,[bee,iw]),xw=iw(),[wee,Lu]=tm(i_),[See,Eee]=tm(i_),dU=e=>{const{__scopeSelect:t,children:r,open:n,defaultOpen:s,onOpenChange:u,value:h,defaultValue:m,onValueChange:o,dir:_,name:E,autoComplete:S,disabled:A,required:I,form:R}=e,k=xw(t),[L,N]=V.useState(null),[z,F]=V.useState(null),[U,W]=V.useState(!1),Y=pw(_),[Q=!1,Z]=Au({prop:n,defaultProp:s,onChange:u}),[re,ne]=Au({prop:h,defaultProp:m,onChange:o}),ue=V.useRef(null),fe=L?R||!!L.closest("form"):!0,[Ee,Se]=V.useState(new Set),je=Array.from(Ee).map(Le=>Le.props.value).join(";");return M.jsx(i5,{...k,children:M.jsxs(wee,{required:I,scope:t,trigger:L,onTriggerChange:N,valueNode:z,onValueNodeChange:F,valueNodeHasChildren:U,onValueNodeHasChildrenChange:W,contentId:ql(),value:re,onValueChange:ne,open:Q,onOpenChange:Z,dir:Y,triggerPointerDownPosRef:ue,disabled:A,children:[M.jsx(vw.Provider,{scope:t,children:M.jsx(See,{scope:e.__scopeSelect,onNativeOptionAdd:V.useCallback(Le=>{Se(Ue=>new Set(Ue).add(Le))},[]),onNativeOptionRemove:V.useCallback(Le=>{Se(Ue=>{const we=new Set(Ue);return we.delete(Le),we})},[]),children:r})}),fe?M.jsxs(jU,{"aria-hidden":!0,required:I,tabIndex:-1,name:E,autoComplete:S,value:re,onChange:Le=>ne(Le.target.value),disabled:A,form:R,children:[re===void 0?M.jsx("option",{value:""}):null,Array.from(Ee)]},je):null]})})};dU.displayName=i_;var hU="SelectTrigger",fU=V.forwardRef((e,t)=>{const{__scopeSelect:r,disabled:n=!1,...s}=e,u=xw(r),h=Lu(hU,r),m=h.disabled||n,o=Ur(t,h.onTriggerChange),_=_w(r),E=V.useRef("touch"),[S,A,I]=zU(k=>{const L=_().filter(F=>!F.disabled),N=L.find(F=>F.value===h.value),z=NU(L,k,N);z!==void 0&&h.onValueChange(z.value)}),R=k=>{m||(h.onOpenChange(!0),I()),k&&(h.triggerPointerDownPosRef.current={x:Math.round(k.pageX),y:Math.round(k.pageY)})};return M.jsx(o5,{asChild:!0,...u,children:M.jsx(vr.button,{type:"button",role:"combobox","aria-controls":h.contentId,"aria-expanded":h.open,"aria-required":h.required,"aria-autocomplete":"none",dir:h.dir,"data-state":h.open?"open":"closed",disabled:m,"data-disabled":m?"":void 0,"data-placeholder":LU(h.value)?"":void 0,...s,ref:o,onClick:rr(s.onClick,k=>{k.currentTarget.focus(),E.current!=="mouse"&&R(k)}),onPointerDown:rr(s.onPointerDown,k=>{E.current=k.pointerType;const L=k.target;L.hasPointerCapture(k.pointerId)&&L.releasePointerCapture(k.pointerId),k.button===0&&k.ctrlKey===!1&&k.pointerType==="mouse"&&(R(k),k.preventDefault())}),onKeyDown:rr(s.onKeyDown,k=>{const L=S.current!=="";!(k.ctrlKey||k.altKey||k.metaKey)&&k.key.length===1&&A(k.key),!(L&&k.key===" ")&&_ee.includes(k.key)&&(R(),k.preventDefault())})})})});fU.displayName=hU;var pU="SelectValue",mU=V.forwardRef((e,t)=>{const{__scopeSelect:r,className:n,style:s,children:u,placeholder:h="",...m}=e,o=Lu(pU,r),{onValueNodeHasChildrenChange:_}=o,E=u!==void 0,S=Ur(t,o.onValueNodeChange);return Wi(()=>{_(E)},[_,E]),M.jsx(vr.span,{...m,ref:S,style:{pointerEvents:"none"},children:LU(o.value)?M.jsx(M.Fragment,{children:h}):u})});mU.displayName=pU;var Tee="SelectIcon",gU=V.forwardRef((e,t)=>{const{__scopeSelect:r,children:n,...s}=e;return M.jsx(vr.span,{"aria-hidden":!0,...s,ref:t,children:n||"▼"})});gU.displayName=Tee;var Aee="SelectPortal",yU=e=>M.jsx(J1,{asChild:!0,...e});yU.displayName=Aee;var ah="SelectContent",vU=V.forwardRef((e,t)=>{const r=Lu(ah,e.__scopeSelect),[n,s]=V.useState();if(Wi(()=>{s(new DocumentFragment)},[]),!r.open){const u=n;return u?mh.createPortal(M.jsx(_U,{scope:e.__scopeSelect,children:M.jsx(vw.Slot,{scope:e.__scopeSelect,children:M.jsx("div",{children:e.children})})}),u):null}return M.jsx(xU,{...e,ref:t})});vU.displayName=ah;var _s=10,[_U,ju]=tm(ah),Pee="SelectContentImpl",xU=V.forwardRef((e,t)=>{const{__scopeSelect:r,position:n="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:u,onPointerDownOutside:h,side:m,sideOffset:o,align:_,alignOffset:E,arrowPadding:S,collisionBoundary:A,collisionPadding:I,sticky:R,hideWhenDetached:k,avoidCollisions:L,...N}=e,z=Lu(ah,r),[F,U]=V.useState(null),[W,Y]=V.useState(null),Q=Ur(t,lt=>U(lt)),[Z,re]=V.useState(null),[ne,ue]=V.useState(null),fe=_w(r),[Ee,Se]=V.useState(!1),je=V.useRef(!1);V.useEffect(()=>{if(F)return nU(F)},[F]),Q5();const Le=V.useCallback(lt=>{const[gt,...tt]=fe().map(Be=>Be.ref.current),[ft]=tt.slice(-1),ht=document.activeElement;for(const Be of lt)if(Be===ht||(Be==null||Be.scrollIntoView({block:"nearest"}),Be===gt&&W&&(W.scrollTop=0),Be===ft&&W&&(W.scrollTop=W.scrollHeight),Be==null||Be.focus(),document.activeElement!==ht))return},[fe,W]),Ue=V.useCallback(()=>Le([Z,F]),[Le,Z,F]);V.useEffect(()=>{Ee&&Ue()},[Ee,Ue]);const{onOpenChange:we,triggerPointerDownPosRef:Pe}=z;V.useEffect(()=>{if(F){let lt={x:0,y:0};const gt=ft=>{var ht,Be;lt={x:Math.abs(Math.round(ft.pageX)-(((ht=Pe.current)==null?void 0:ht.x)??0)),y:Math.abs(Math.round(ft.pageY)-(((Be=Pe.current)==null?void 0:Be.y)??0))}},tt=ft=>{lt.x<=10&&lt.y<=10?ft.preventDefault():F.contains(ft.target)||we(!1),document.removeEventListener("pointermove",gt),Pe.current=null};return Pe.current!==null&&(document.addEventListener("pointermove",gt),document.addEventListener("pointerup",tt,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",gt),document.removeEventListener("pointerup",tt,{capture:!0})}}},[F,we,Pe]),V.useEffect(()=>{const lt=()=>we(!1);return window.addEventListener("blur",lt),window.addEventListener("resize",lt),()=>{window.removeEventListener("blur",lt),window.removeEventListener("resize",lt)}},[we]);const[rt,$e]=zU(lt=>{const gt=fe().filter(ht=>!ht.disabled),tt=gt.find(ht=>ht.ref.current===document.activeElement),ft=NU(gt,lt,tt);ft&&setTimeout(()=>ft.ref.current.focus())}),Ge=V.useCallback((lt,gt,tt)=>{const ft=!je.current&&!tt;(z.value!==void 0&&z.value===gt||ft)&&(re(lt),ft&&(je.current=!0))},[z.value]),Re=V.useCallback(()=>F==null?void 0:F.focus(),[F]),at=V.useCallback((lt,gt,tt)=>{const ft=!je.current&&!tt;(z.value!==void 0&&z.value===gt||ft)&&ue(lt)},[z.value]),Et=n==="popper"?kP:bU,vt=Et===kP?{side:m,sideOffset:o,align:_,alignOffset:E,arrowPadding:S,collisionBoundary:A,collisionPadding:I,sticky:R,hideWhenDetached:k,avoidCollisions:L}:{};return M.jsx(_U,{scope:r,content:F,viewport:W,onViewportChange:Y,itemRefCallback:Ge,selectedItem:Z,onItemLeave:Re,itemTextRefCallback:at,focusSelectedItem:Ue,selectedItemText:ne,position:n,isPositioned:Ee,searchRef:rt,children:M.jsx(TI,{as:Ga,allowPinchZoom:!0,children:M.jsx(EI,{asChild:!0,trapped:z.open,onMountAutoFocus:lt=>{lt.preventDefault()},onUnmountAutoFocus:rr(s,lt=>{var gt;(gt=z.trigger)==null||gt.focus({preventScroll:!0}),lt.preventDefault()}),children:M.jsx(Jv,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:u,onPointerDownOutside:h,onFocusOutside:lt=>lt.preventDefault(),onDismiss:()=>z.onOpenChange(!1),children:M.jsx(Et,{role:"listbox",id:z.contentId,"data-state":z.open?"open":"closed",dir:z.dir,onContextMenu:lt=>lt.preventDefault(),...N,...vt,onPlaced:()=>Se(!0),ref:Q,style:{display:"flex",flexDirection:"column",outline:"none",...N.style},onKeyDown:rr(N.onKeyDown,lt=>{const gt=lt.ctrlKey||lt.altKey||lt.metaKey;if(lt.key==="Tab"&&lt.preventDefault(),!gt&&lt.key.length===1&&$e(lt.key),["ArrowUp","ArrowDown","Home","End"].includes(lt.key)){let ft=fe().filter(ht=>!ht.disabled).map(ht=>ht.ref.current);if(["ArrowUp","End"].includes(lt.key)&&(ft=ft.slice().reverse()),["ArrowUp","ArrowDown"].includes(lt.key)){const ht=lt.target,Be=ft.indexOf(ht);ft=ft.slice(Be+1)}setTimeout(()=>Le(ft)),lt.preventDefault()}})})})})})})});xU.displayName=Pee;var Cee="SelectItemAlignedPosition",bU=V.forwardRef((e,t)=>{const{__scopeSelect:r,onPlaced:n,...s}=e,u=Lu(ah,r),h=ju(ah,r),[m,o]=V.useState(null),[_,E]=V.useState(null),S=Ur(t,Q=>E(Q)),A=_w(r),I=V.useRef(!1),R=V.useRef(!0),{viewport:k,selectedItem:L,selectedItemText:N,focusSelectedItem:z}=h,F=V.useCallback(()=>{if(u.trigger&&u.valueNode&&m&&_&&k&&L&&N){const Q=u.trigger.getBoundingClientRect(),Z=_.getBoundingClientRect(),re=u.valueNode.getBoundingClientRect(),ne=N.getBoundingClientRect();if(u.dir!=="rtl"){const ht=ne.left-Z.left,Be=re.left-ht,zt=Q.left-Be,Ot=Q.width+zt,qt=Math.max(Ot,Z.width),Pt=window.innerWidth-_s,nr=IP(Be,[_s,Math.max(_s,Pt-qt)]);m.style.minWidth=Ot+"px",m.style.left=nr+"px"}else{const ht=Z.right-ne.right,Be=window.innerWidth-re.right-ht,zt=window.innerWidth-Q.right-Be,Ot=Q.width+zt,qt=Math.max(Ot,Z.width),Pt=window.innerWidth-_s,nr=IP(Be,[_s,Math.max(_s,Pt-qt)]);m.style.minWidth=Ot+"px",m.style.right=nr+"px"}const ue=A(),fe=window.innerHeight-_s*2,Ee=k.scrollHeight,Se=window.getComputedStyle(_),je=parseInt(Se.borderTopWidth,10),Le=parseInt(Se.paddingTop,10),Ue=parseInt(Se.borderBottomWidth,10),we=parseInt(Se.paddingBottom,10),Pe=je+Le+Ee+we+Ue,rt=Math.min(L.offsetHeight*5,Pe),$e=window.getComputedStyle(k),Ge=parseInt($e.paddingTop,10),Re=parseInt($e.paddingBottom,10),at=Q.top+Q.height/2-_s,Et=fe-at,vt=L.offsetHeight/2,lt=L.offsetTop+vt,gt=je+Le+lt,tt=Pe-gt;if(gt<=at){const ht=ue.length>0&&L===ue[ue.length-1].ref.current;m.style.bottom="0px";const Be=_.clientHeight-k.offsetTop-k.offsetHeight,zt=Math.max(Et,vt+(ht?Re:0)+Be+Ue),Ot=gt+zt;m.style.height=Ot+"px"}else{const ht=ue.length>0&&L===ue[0].ref.current;m.style.top="0px";const zt=Math.max(at,je+k.offsetTop+(ht?Ge:0)+vt)+tt;m.style.height=zt+"px",k.scrollTop=gt-at+k.offsetTop}m.style.margin=`${_s}px 0`,m.style.minHeight=rt+"px",m.style.maxHeight=fe+"px",n==null||n(),requestAnimationFrame(()=>I.current=!0)}},[A,u.trigger,u.valueNode,m,_,k,L,N,u.dir,n]);Wi(()=>F(),[F]);const[U,W]=V.useState();Wi(()=>{_&&W(window.getComputedStyle(_).zIndex)},[_]);const Y=V.useCallback(Q=>{Q&&R.current===!0&&(F(),z==null||z(),R.current=!1)},[F,z]);return M.jsx(Iee,{scope:r,contentWrapper:m,shouldExpandOnScrollRef:I,onScrollButtonChange:Y,children:M.jsx("div",{ref:o,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:U},children:M.jsx(vr.div,{...s,ref:S,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}})})})});bU.displayName=Cee;var Mee="SelectPopperPosition",kP=V.forwardRef((e,t)=>{const{__scopeSelect:r,align:n="start",collisionPadding:s=_s,...u}=e,h=xw(r);return M.jsx(a5,{...h,...u,ref:t,align:n,collisionPadding:s,style:{boxSizing:"border-box",...u.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});kP.displayName=Mee;var[Iee,AI]=tm(ah,{}),DP="SelectViewport",wU=V.forwardRef((e,t)=>{const{__scopeSelect:r,nonce:n,...s}=e,u=ju(DP,r),h=AI(DP,r),m=Ur(t,u.onViewportChange),o=V.useRef(0);return M.jsxs(M.Fragment,{children:[M.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:n}),M.jsx(vw.Slot,{scope:r,children:M.jsx(vr.div,{"data-radix-select-viewport":"",role:"presentation",...s,ref:m,style:{position:"relative",flex:1,overflow:"hidden auto",...s.style},onScroll:rr(s.onScroll,_=>{const E=_.currentTarget,{contentWrapper:S,shouldExpandOnScrollRef:A}=h;if(A!=null&&A.current&&S){const I=Math.abs(o.current-E.scrollTop);if(I>0){const R=window.innerHeight-_s*2,k=parseFloat(S.style.minHeight),L=parseFloat(S.style.height),N=Math.max(k,L);if(N<R){const z=N+I,F=Math.min(R,z),U=z-F;S.style.height=F+"px",S.style.bottom==="0px"&&(E.scrollTop=U>0?U:0,S.style.justifyContent="flex-end")}}}o.current=E.scrollTop})})})]})});wU.displayName=DP;var SU="SelectGroup",[Oee,kee]=tm(SU),Dee=V.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e,s=ql();return M.jsx(Oee,{scope:r,id:s,children:M.jsx(vr.div,{role:"group","aria-labelledby":s,...n,ref:t})})});Dee.displayName=SU;var EU="SelectLabel",TU=V.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e,s=kee(EU,r);return M.jsx(vr.div,{id:s.id,...n,ref:t})});TU.displayName=EU;var Mb="SelectItem",[Ree,AU]=tm(Mb),PU=V.forwardRef((e,t)=>{const{__scopeSelect:r,value:n,disabled:s=!1,textValue:u,...h}=e,m=Lu(Mb,r),o=ju(Mb,r),_=m.value===n,[E,S]=V.useState(u??""),[A,I]=V.useState(!1),R=Ur(t,z=>{var F;return(F=o.itemRefCallback)==null?void 0:F.call(o,z,n,s)}),k=ql(),L=V.useRef("touch"),N=()=>{s||(m.onValueChange(n),m.onOpenChange(!1))};if(n==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return M.jsx(Ree,{scope:r,value:n,disabled:s,textId:k,isSelected:_,onItemTextChange:V.useCallback(z=>{S(F=>F||((z==null?void 0:z.textContent)??"").trim())},[]),children:M.jsx(vw.ItemSlot,{scope:r,value:n,disabled:s,textValue:E,children:M.jsx(vr.div,{role:"option","aria-labelledby":k,"data-highlighted":A?"":void 0,"aria-selected":_&&A,"data-state":_?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1,...h,ref:R,onFocus:rr(h.onFocus,()=>I(!0)),onBlur:rr(h.onBlur,()=>I(!1)),onClick:rr(h.onClick,()=>{L.current!=="mouse"&&N()}),onPointerUp:rr(h.onPointerUp,()=>{L.current==="mouse"&&N()}),onPointerDown:rr(h.onPointerDown,z=>{L.current=z.pointerType}),onPointerMove:rr(h.onPointerMove,z=>{var F;L.current=z.pointerType,s?(F=o.onItemLeave)==null||F.call(o):L.current==="mouse"&&z.currentTarget.focus({preventScroll:!0})}),onPointerLeave:rr(h.onPointerLeave,z=>{var F;z.currentTarget===document.activeElement&&((F=o.onItemLeave)==null||F.call(o))}),onKeyDown:rr(h.onKeyDown,z=>{var U;((U=o.searchRef)==null?void 0:U.current)!==""&&z.key===" "||(xee.includes(z.key)&&N(),z.key===" "&&z.preventDefault())})})})})});PU.displayName=Mb;var yy="SelectItemText",CU=V.forwardRef((e,t)=>{const{__scopeSelect:r,className:n,style:s,...u}=e,h=Lu(yy,r),m=ju(yy,r),o=AU(yy,r),_=Eee(yy,r),[E,S]=V.useState(null),A=Ur(t,N=>S(N),o.onItemTextChange,N=>{var z;return(z=m.itemTextRefCallback)==null?void 0:z.call(m,N,o.value,o.disabled)}),I=E==null?void 0:E.textContent,R=V.useMemo(()=>M.jsx("option",{value:o.value,disabled:o.disabled,children:I},o.value),[o.disabled,o.value,I]),{onNativeOptionAdd:k,onNativeOptionRemove:L}=_;return Wi(()=>(k(R),()=>L(R)),[k,L,R]),M.jsxs(M.Fragment,{children:[M.jsx(vr.span,{id:o.textId,...u,ref:A}),o.isSelected&&h.valueNode&&!h.valueNodeHasChildren?mh.createPortal(u.children,h.valueNode):null]})});CU.displayName=yy;var MU="SelectItemIndicator",IU=V.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e;return AU(MU,r).isSelected?M.jsx(vr.span,{"aria-hidden":!0,...n,ref:t}):null});IU.displayName=MU;var RP="SelectScrollUpButton",OU=V.forwardRef((e,t)=>{const r=ju(RP,e.__scopeSelect),n=AI(RP,e.__scopeSelect),[s,u]=V.useState(!1),h=Ur(t,n.onScrollButtonChange);return Wi(()=>{if(r.viewport&&r.isPositioned){let m=function(){const _=o.scrollTop>0;u(_)};const o=r.viewport;return m(),o.addEventListener("scroll",m),()=>o.removeEventListener("scroll",m)}},[r.viewport,r.isPositioned]),s?M.jsx(DU,{...e,ref:h,onAutoScroll:()=>{const{viewport:m,selectedItem:o}=r;m&&o&&(m.scrollTop=m.scrollTop-o.offsetHeight)}}):null});OU.displayName=RP;var LP="SelectScrollDownButton",kU=V.forwardRef((e,t)=>{const r=ju(LP,e.__scopeSelect),n=AI(LP,e.__scopeSelect),[s,u]=V.useState(!1),h=Ur(t,n.onScrollButtonChange);return Wi(()=>{if(r.viewport&&r.isPositioned){let m=function(){const _=o.scrollHeight-o.clientHeight,E=Math.ceil(o.scrollTop)<_;u(E)};const o=r.viewport;return m(),o.addEventListener("scroll",m),()=>o.removeEventListener("scroll",m)}},[r.viewport,r.isPositioned]),s?M.jsx(DU,{...e,ref:h,onAutoScroll:()=>{const{viewport:m,selectedItem:o}=r;m&&o&&(m.scrollTop=m.scrollTop+o.offsetHeight)}}):null});kU.displayName=LP;var DU=V.forwardRef((e,t)=>{const{__scopeSelect:r,onAutoScroll:n,...s}=e,u=ju("SelectScrollButton",r),h=V.useRef(null),m=_w(r),o=V.useCallback(()=>{h.current!==null&&(window.clearInterval(h.current),h.current=null)},[]);return V.useEffect(()=>()=>o(),[o]),Wi(()=>{var E;const _=m().find(S=>S.ref.current===document.activeElement);(E=_==null?void 0:_.ref.current)==null||E.scrollIntoView({block:"nearest"})},[m]),M.jsx(vr.div,{"aria-hidden":!0,...s,ref:t,style:{flexShrink:0,...s.style},onPointerDown:rr(s.onPointerDown,()=>{h.current===null&&(h.current=window.setInterval(n,50))}),onPointerMove:rr(s.onPointerMove,()=>{var _;(_=u.onItemLeave)==null||_.call(u),h.current===null&&(h.current=window.setInterval(n,50))}),onPointerLeave:rr(s.onPointerLeave,()=>{o()})})}),Lee="SelectSeparator",RU=V.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e;return M.jsx(vr.div,{"aria-hidden":!0,...n,ref:t})});RU.displayName=Lee;var jP="SelectArrow",jee=V.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e,s=xw(r),u=Lu(jP,r),h=ju(jP,r);return u.open&&h.position==="popper"?M.jsx(s5,{...s,...n,ref:t}):null});jee.displayName=jP;function LU(e){return e===""||e===void 0}var jU=V.forwardRef((e,t)=>{const{value:r,...n}=e,s=V.useRef(null),u=Ur(t,s),h=tU(r);return V.useEffect(()=>{const m=s.current,o=window.HTMLSelectElement.prototype,E=Object.getOwnPropertyDescriptor(o,"value").set;if(h!==r&&E){const S=new Event("change",{bubbles:!0});E.call(m,r),m.dispatchEvent(S)}},[h,r]),M.jsx(Qv,{asChild:!0,children:M.jsx("select",{...n,ref:u,defaultValue:r})})});jU.displayName="BubbleSelect";function zU(e){const t=si(e),r=V.useRef(""),n=V.useRef(0),s=V.useCallback(h=>{const m=r.current+h;t(m),function o(_){r.current=_,window.clearTimeout(n.current),_!==""&&(n.current=window.setTimeout(()=>o(""),1e3))}(m)},[t]),u=V.useCallback(()=>{r.current="",window.clearTimeout(n.current)},[]);return V.useEffect(()=>()=>window.clearTimeout(n.current),[]),[r,s,u]}function NU(e,t,r){const s=t.length>1&&Array.from(t).every(_=>_===t[0])?t[0]:t,u=r?e.indexOf(r):-1;let h=zee(e,Math.max(u,0));s.length===1&&(h=h.filter(_=>_!==r));const o=h.find(_=>_.textValue.toLowerCase().startsWith(s.toLowerCase()));return o!==r?o:void 0}function zee(e,t){return e.map((r,n)=>e[(t+n)%e.length])}var Nee=dU,BU=fU,Bee=mU,$ee=gU,Fee=yU,$U=vU,Uee=wU,FU=TU,UU=PU,Vee=CU,Gee=IU,VU=OU,GU=kU,WU=RU;const qU=Nee,HU=Bee,PI=V.forwardRef(({className:e,children:t,...r},n)=>M.jsxs(BU,{ref:n,className:Wt("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...r,children:[t,M.jsx($ee,{asChild:!0,children:M.jsx(C4,{className:"h-4 w-4 opacity-50"})})]}));PI.displayName=BU.displayName;const XU=V.forwardRef(({className:e,...t},r)=>M.jsx(VU,{ref:r,className:Wt("flex cursor-default items-center justify-center py-1",e),...t,children:M.jsx(pP,{className:"h-4 w-4"})}));XU.displayName=VU.displayName;const ZU=V.forwardRef(({className:e,...t},r)=>M.jsx(GU,{ref:r,className:Wt("flex cursor-default items-center justify-center py-1",e),...t,children:M.jsx(C4,{className:"h-4 w-4"})}));ZU.displayName=GU.displayName;const CI=V.forwardRef(({className:e,children:t,position:r="popper",...n},s)=>M.jsx(Fee,{children:M.jsxs($U,{ref:s,className:Wt("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:r,...n,children:[M.jsx(XU,{}),M.jsx(Uee,{className:Wt("p-1",r==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),M.jsx(ZU,{})]})}));CI.displayName=$U.displayName;const Wee=V.forwardRef(({className:e,...t},r)=>M.jsx(FU,{ref:r,className:Wt("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t}));Wee.displayName=FU.displayName;const Ra=V.forwardRef(({className:e,children:t,...r},n)=>M.jsxs(UU,{ref:n,className:Wt("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...r,children:[M.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:M.jsx(Gee,{children:M.jsx(P4,{className:"h-4 w-4"})})}),M.jsx(Vee,{children:t})]}));Ra.displayName=UU.displayName;const qee=V.forwardRef(({className:e,...t},r)=>M.jsx(WU,{ref:r,className:Wt("-mx-1 my-1 h-px bg-muted",e),...t}));qee.displayName=WU.displayName;const Hee=e_("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),Is=V.forwardRef(({className:e,variant:t,size:r,asChild:n=!1,...s},u)=>{const h=n?Ga:"button";return M.jsx(h,{className:Wt(Hee({variant:t,size:r,className:e})),ref:u,...s})});Is.displayName="Button";var Xee=Array.isArray,Go=Xee,Zee=typeof Cf=="object"&&Cf&&Cf.Object===Object&&Cf,KU=Zee,Kee=KU,Yee=typeof self=="object"&&self&&self.Object===Object&&self,Jee=Kee||Yee||Function("return this")(),pl=Jee,Qee=pl,ete=Qee.Symbol,o_=ete,Sj=o_,YU=Object.prototype,tte=YU.hasOwnProperty,rte=YU.toString,ry=Sj?Sj.toStringTag:void 0;function nte(e){var t=tte.call(e,ry),r=e[ry];try{e[ry]=void 0;var n=!0}catch{}var s=rte.call(e);return n&&(t?e[ry]=r:delete e[ry]),s}var ite=nte,ote=Object.prototype,ate=ote.toString;function ste(e){return ate.call(e)}var lte=ste,Ej=o_,cte=ite,ute=lte,dte="[object Null]",hte="[object Undefined]",Tj=Ej?Ej.toStringTag:void 0;function fte(e){return e==null?e===void 0?hte:dte:Tj&&Tj in Object(e)?cte(e):ute(e)}var cc=fte;function pte(e){return e!=null&&typeof e=="object"}var uc=pte,mte=cc,gte=uc,yte="[object Symbol]";function vte(e){return typeof e=="symbol"||gte(e)&&mte(e)==yte}var rm=vte,_te=Go,xte=rm,bte=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,wte=/^\w*$/;function Ste(e,t){if(_te(e))return!1;var r=typeof e;return r=="number"||r=="symbol"||r=="boolean"||e==null||xte(e)?!0:wte.test(e)||!bte.test(e)||t!=null&&e in Object(t)}var MI=Ste;function Ete(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var zu=Ete;const nm=sn(zu);var Tte=cc,Ate=zu,Pte="[object AsyncFunction]",Cte="[object Function]",Mte="[object GeneratorFunction]",Ite="[object Proxy]";function Ote(e){if(!Ate(e))return!1;var t=Tte(e);return t==Cte||t==Mte||t==Pte||t==Ite}var II=Ote;const Rr=sn(II);var kte=pl,Dte=kte["__core-js_shared__"],Rte=Dte,jT=Rte,Aj=function(){var e=/[^.]+$/.exec(jT&&jT.keys&&jT.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function Lte(e){return!!Aj&&Aj in e}var jte=Lte,zte=Function.prototype,Nte=zte.toString;function Bte(e){if(e!=null){try{return Nte.call(e)}catch{}try{return e+""}catch{}}return""}var JU=Bte,$te=II,Fte=jte,Ute=zu,Vte=JU,Gte=/[\\^$.*+?()[\]{}|]/g,Wte=/^\[object .+?Constructor\]$/,qte=Function.prototype,Hte=Object.prototype,Xte=qte.toString,Zte=Hte.hasOwnProperty,Kte=RegExp("^"+Xte.call(Zte).replace(Gte,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Yte(e){if(!Ute(e)||Fte(e))return!1;var t=$te(e)?Kte:Wte;return t.test(Vte(e))}var Jte=Yte;function Qte(e,t){return e==null?void 0:e[t]}var ere=Qte,tre=Jte,rre=ere;function nre(e,t){var r=rre(e,t);return tre(r)?r:void 0}var yh=nre,ire=yh,ore=ire(Object,"create"),bw=ore,Pj=bw;function are(){this.__data__=Pj?Pj(null):{},this.size=0}var sre=are;function lre(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var cre=lre,ure=bw,dre="__lodash_hash_undefined__",hre=Object.prototype,fre=hre.hasOwnProperty;function pre(e){var t=this.__data__;if(ure){var r=t[e];return r===dre?void 0:r}return fre.call(t,e)?t[e]:void 0}var mre=pre,gre=bw,yre=Object.prototype,vre=yre.hasOwnProperty;function _re(e){var t=this.__data__;return gre?t[e]!==void 0:vre.call(t,e)}var xre=_re,bre=bw,wre="__lodash_hash_undefined__";function Sre(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=bre&&t===void 0?wre:t,this}var Ere=Sre,Tre=sre,Are=cre,Pre=mre,Cre=xre,Mre=Ere;function im(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}im.prototype.clear=Tre;im.prototype.delete=Are;im.prototype.get=Pre;im.prototype.has=Cre;im.prototype.set=Mre;var Ire=im;function Ore(){this.__data__=[],this.size=0}var kre=Ore;function Dre(e,t){return e===t||e!==e&&t!==t}var OI=Dre,Rre=OI;function Lre(e,t){for(var r=e.length;r--;)if(Rre(e[r][0],t))return r;return-1}var ww=Lre,jre=ww,zre=Array.prototype,Nre=zre.splice;function Bre(e){var t=this.__data__,r=jre(t,e);if(r<0)return!1;var n=t.length-1;return r==n?t.pop():Nre.call(t,r,1),--this.size,!0}var $re=Bre,Fre=ww;function Ure(e){var t=this.__data__,r=Fre(t,e);return r<0?void 0:t[r][1]}var Vre=Ure,Gre=ww;function Wre(e){return Gre(this.__data__,e)>-1}var qre=Wre,Hre=ww;function Xre(e,t){var r=this.__data__,n=Hre(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this}var Zre=Xre,Kre=kre,Yre=$re,Jre=Vre,Qre=qre,ene=Zre;function om(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}om.prototype.clear=Kre;om.prototype.delete=Yre;om.prototype.get=Jre;om.prototype.has=Qre;om.prototype.set=ene;var Sw=om,tne=yh,rne=pl,nne=tne(rne,"Map"),kI=nne,Cj=Ire,ine=Sw,one=kI;function ane(){this.size=0,this.__data__={hash:new Cj,map:new(one||ine),string:new Cj}}var sne=ane;function lne(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var cne=lne,une=cne;function dne(e,t){var r=e.__data__;return une(t)?r[typeof t=="string"?"string":"hash"]:r.map}var Ew=dne,hne=Ew;function fne(e){var t=hne(this,e).delete(e);return this.size-=t?1:0,t}var pne=fne,mne=Ew;function gne(e){return mne(this,e).get(e)}var yne=gne,vne=Ew;function _ne(e){return vne(this,e).has(e)}var xne=_ne,bne=Ew;function wne(e,t){var r=bne(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this}var Sne=wne,Ene=sne,Tne=pne,Ane=yne,Pne=xne,Cne=Sne;function am(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}am.prototype.clear=Ene;am.prototype.delete=Tne;am.prototype.get=Ane;am.prototype.has=Pne;am.prototype.set=Cne;var DI=am,QU=DI,Mne="Expected a function";function RI(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(Mne);var r=function(){var n=arguments,s=t?t.apply(this,n):n[0],u=r.cache;if(u.has(s))return u.get(s);var h=e.apply(this,n);return r.cache=u.set(s,h)||u,h};return r.cache=new(RI.Cache||QU),r}RI.Cache=QU;var e6=RI;const Ine=sn(e6);var One=e6,kne=500;function Dne(e){var t=One(e,function(n){return r.size===kne&&r.clear(),n}),r=t.cache;return t}var Rne=Dne,Lne=Rne,jne=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,zne=/\\(\\)?/g,Nne=Lne(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(jne,function(r,n,s,u){t.push(s?u.replace(zne,"$1"):n||r)}),t}),Bne=Nne;function $ne(e,t){for(var r=-1,n=e==null?0:e.length,s=Array(n);++r<n;)s[r]=t(e[r],r,e);return s}var LI=$ne,Mj=o_,Fne=LI,Une=Go,Vne=rm,Gne=1/0,Ij=Mj?Mj.prototype:void 0,Oj=Ij?Ij.toString:void 0;function t6(e){if(typeof e=="string")return e;if(Une(e))return Fne(e,t6)+"";if(Vne(e))return Oj?Oj.call(e):"";var t=e+"";return t=="0"&&1/e==-Gne?"-0":t}var Wne=t6,qne=Wne;function Hne(e){return e==null?"":qne(e)}var r6=Hne,Xne=Go,Zne=MI,Kne=Bne,Yne=r6;function Jne(e,t){return Xne(e)?e:Zne(e,t)?[e]:Kne(Yne(e))}var n6=Jne,Qne=rm,eie=1/0;function tie(e){if(typeof e=="string"||Qne(e))return e;var t=e+"";return t=="0"&&1/e==-eie?"-0":t}var Tw=tie,rie=n6,nie=Tw;function iie(e,t){t=rie(t,e);for(var r=0,n=t.length;e!=null&&r<n;)e=e[nie(t[r++])];return r&&r==n?e:void 0}var jI=iie,oie=jI;function aie(e,t,r){var n=e==null?void 0:oie(e,t);return n===void 0?r:n}var i6=aie;const Ba=sn(i6);function sie(e){return e==null}var lie=sie;const Mr=sn(lie);var cie=cc,uie=Go,die=uc,hie="[object String]";function fie(e){return typeof e=="string"||!uie(e)&&die(e)&&cie(e)==hie}var pie=fie;const a_=sn(pie);var o6={exports:{}},dn={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zI=Symbol.for("react.element"),NI=Symbol.for("react.portal"),Aw=Symbol.for("react.fragment"),Pw=Symbol.for("react.strict_mode"),Cw=Symbol.for("react.profiler"),Mw=Symbol.for("react.provider"),Iw=Symbol.for("react.context"),mie=Symbol.for("react.server_context"),Ow=Symbol.for("react.forward_ref"),kw=Symbol.for("react.suspense"),Dw=Symbol.for("react.suspense_list"),Rw=Symbol.for("react.memo"),Lw=Symbol.for("react.lazy"),gie=Symbol.for("react.offscreen"),a6;a6=Symbol.for("react.module.reference");function Ha(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case zI:switch(e=e.type,e){case Aw:case Cw:case Pw:case kw:case Dw:return e;default:switch(e=e&&e.$$typeof,e){case mie:case Iw:case Ow:case Lw:case Rw:case Mw:return e;default:return t}}case NI:return t}}}dn.ContextConsumer=Iw;dn.ContextProvider=Mw;dn.Element=zI;dn.ForwardRef=Ow;dn.Fragment=Aw;dn.Lazy=Lw;dn.Memo=Rw;dn.Portal=NI;dn.Profiler=Cw;dn.StrictMode=Pw;dn.Suspense=kw;dn.SuspenseList=Dw;dn.isAsyncMode=function(){return!1};dn.isConcurrentMode=function(){return!1};dn.isContextConsumer=function(e){return Ha(e)===Iw};dn.isContextProvider=function(e){return Ha(e)===Mw};dn.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===zI};dn.isForwardRef=function(e){return Ha(e)===Ow};dn.isFragment=function(e){return Ha(e)===Aw};dn.isLazy=function(e){return Ha(e)===Lw};dn.isMemo=function(e){return Ha(e)===Rw};dn.isPortal=function(e){return Ha(e)===NI};dn.isProfiler=function(e){return Ha(e)===Cw};dn.isStrictMode=function(e){return Ha(e)===Pw};dn.isSuspense=function(e){return Ha(e)===kw};dn.isSuspenseList=function(e){return Ha(e)===Dw};dn.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===Aw||e===Cw||e===Pw||e===kw||e===Dw||e===gie||typeof e=="object"&&e!==null&&(e.$$typeof===Lw||e.$$typeof===Rw||e.$$typeof===Mw||e.$$typeof===Iw||e.$$typeof===Ow||e.$$typeof===a6||e.getModuleId!==void 0)};dn.typeOf=Ha;o6.exports=dn;var s6=o6.exports,yie=cc,vie=uc,_ie="[object Number]";function xie(e){return typeof e=="number"||vie(e)&&yie(e)==_ie}var l6=xie;const bie=sn(l6);var wie=l6;function Sie(e){return wie(e)&&e!=+e}var Eie=Sie;const s_=sn(Eie);var Ps=function(t){return t===0?0:t>0?1:-1},Bd=function(t){return a_(t)&&t.indexOf("%")===t.length-1},Vt=function(t){return bie(t)&&!s_(t)},Si=function(t){return Vt(t)||a_(t)},Tie=0,l_=function(t){var r=++Tie;return"".concat(t||"").concat(r)},sh=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!Vt(t)&&!a_(t))return n;var u;if(Bd(t)){var h=t.indexOf("%");u=r*parseFloat(t.slice(0,h))/100}else u=+t;return s_(u)&&(u=n),s&&u>r&&(u=r),u},Qc=function(t){if(!t)return null;var r=Object.keys(t);return r&&r.length?t[r[0]]:null},Aie=function(t){if(!Array.isArray(t))return!1;for(var r=t.length,n={},s=0;s<r;s++)if(!n[t[s]])n[t[s]]=!0;else return!0;return!1},tl=function(t,r){return Vt(t)&&Vt(r)?function(n){return t+n*(r-t)}:function(){return r}};function Ib(e,t,r){return!e||!e.length?null:e.find(function(n){return n&&(typeof t=="function"?t(n):Ba(n,t))===r})}var Pie=function(t){if(!t||!t.length)return null;for(var r=t.length,n=0,s=0,u=0,h=0,m=1/0,o=-1/0,_=0,E=0,S=0;S<r;S++)_=t[S].cx||0,E=t[S].cy||0,n+=_,s+=E,u+=_*E,h+=_*_,m=Math.min(m,_),o=Math.max(o,_);var A=r*h!==n*n?(r*u-n*s)/(r*h-n*n):0;return{xmin:m,xmax:o,a:A,b:(s-A*n)/r}};function ep(e,t){for(var r in e)if({}.hasOwnProperty.call(e,r)&&(!{}.hasOwnProperty.call(t,r)||e[r]!==t[r]))return!1;for(var n in t)if({}.hasOwnProperty.call(t,n)&&!{}.hasOwnProperty.call(e,n))return!1;return!0}function zP(e){"@babel/helpers - typeof";return zP=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zP(e)}var Cie=["viewBox","children"],Mie=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],kj=["points","pathLength"],zT={svg:Cie,polygon:kj,polyline:kj},BI=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],Ob=function(t,r){if(!t||typeof t=="function"||typeof t=="boolean")return null;var n=t;if(V.isValidElement(t)&&(n=t.props),!nm(n))return null;var s={};return Object.keys(n).forEach(function(u){BI.includes(u)&&(s[u]=r||function(h){return n[u](n,h)})}),s},Iie=function(t,r,n){return function(s){return t(r,n,s),null}},sv=function(t,r,n){if(!nm(t)||zP(t)!=="object")return null;var s=null;return Object.keys(t).forEach(function(u){var h=t[u];BI.includes(u)&&typeof h=="function"&&(s||(s={}),s[u]=Iie(h,r,n))}),s},Oie=["children"],kie=["children"];function Dj(e,t){if(e==null)return{};var r=Die(e,t),n,s;if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(e);for(s=0;s<u.length;s++)n=u[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Die(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var Rj={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart"},Hl=function(t){return typeof t=="string"?t:t?t.displayName||t.name||"Component":""},Lj=null,NT=null,$I=function e(t){if(t===Lj&&Array.isArray(NT))return NT;var r=[];return V.Children.forEach(t,function(n){Mr(n)||(s6.isFragment(n)?r=r.concat(e(n.props.children)):r.push(n))}),NT=r,Lj=t,r};function da(e,t){var r=[],n=[];return Array.isArray(t)?n=t.map(function(s){return Hl(s)}):n=[Hl(t)],$I(e).forEach(function(s){var u=Ba(s,"type.displayName")||Ba(s,"type.name");n.indexOf(u)!==-1&&r.push(s)}),r}function ra(e,t){var r=da(e,t);return r&&r[0]}var jj=function(t){if(!t||!t.props)return!1;var r=t.props,n=r.width,s=r.height;return!(!Vt(n)||n<=0||!Vt(s)||s<=0)},Rie=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],Lie=function(t){return t&&t.type&&a_(t.type)&&Rie.indexOf(t.type)>=0},jie=function(t,r,n,s){var u,h=(u=zT==null?void 0:zT[s])!==null&&u!==void 0?u:[];return!Rr(t)&&(s&&h.includes(r)||Mie.includes(r))||n&&BI.includes(r)},Br=function(t,r,n){if(!t||typeof t=="function"||typeof t=="boolean")return null;var s=t;if(V.isValidElement(t)&&(s=t.props),!nm(s))return null;var u={};return Object.keys(s).forEach(function(h){var m;jie((m=s)===null||m===void 0?void 0:m[h],h,r,n)&&(u[h]=s[h])}),u},NP=function e(t,r){if(t===r)return!0;var n=V.Children.count(t);if(n!==V.Children.count(r))return!1;if(n===0)return!0;if(n===1)return zj(Array.isArray(t)?t[0]:t,Array.isArray(r)?r[0]:r);for(var s=0;s<n;s++){var u=t[s],h=r[s];if(Array.isArray(u)||Array.isArray(h)){if(!e(u,h))return!1}else if(!zj(u,h))return!1}return!0},zj=function(t,r){if(Mr(t)&&Mr(r))return!0;if(!Mr(t)&&!Mr(r)){var n=t.props||{},s=n.children,u=Dj(n,Oie),h=r.props||{},m=h.children,o=Dj(h,kie);return s&&m?ep(u,o)&&NP(s,m):!s&&!m?ep(u,o):!1}return!1},Nj=function(t,r){var n=[],s={};return $I(t).forEach(function(u,h){if(Lie(u))n.push(u);else if(u){var m=Hl(u.type),o=r[m]||{},_=o.handler,E=o.once;if(_&&(!E||!s[m])){var S=_(u,m,h);n.push(S),s[m]=!0}}}),n},zie=function(t){var r=t&&t.type;return r&&Rj[r]?Rj[r]:null},Nie=function(t,r){return $I(r).indexOf(t)},Bie=["children","width","height","viewBox","className","style","title","desc"];function BP(){return BP=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},BP.apply(this,arguments)}function $ie(e,t){if(e==null)return{};var r=Fie(e,t),n,s;if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(e);for(s=0;s<u.length;s++)n=u[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Fie(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function $P(e){var t=e.children,r=e.width,n=e.height,s=e.viewBox,u=e.className,h=e.style,m=e.title,o=e.desc,_=$ie(e,Bie),E=s||{width:r,height:n,x:0,y:0},S=Fr("recharts-surface",u);return be.createElement("svg",BP({},Br(_,!0,"svg"),{className:S,width:r,height:n,style:h,viewBox:"".concat(E.x," ").concat(E.y," ").concat(E.width," ").concat(E.height)}),be.createElement("title",null,m),be.createElement("desc",null,o),t)}var Uie=["children","className"];function FP(){return FP=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},FP.apply(this,arguments)}function Vie(e,t){if(e==null)return{};var r=Gie(e,t),n,s;if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(e);for(s=0;s<u.length;s++)n=u[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Gie(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var Xn=be.forwardRef(function(e,t){var r=e.children,n=e.className,s=Vie(e,Uie),u=Fr("recharts-layer",n);return be.createElement("g",FP({className:u},Br(s,!0),{ref:t}),r)}),Xl=function(t,r){for(var n=arguments.length,s=new Array(n>2?n-2:0),u=2;u<n;u++)s[u-2]=arguments[u]};function Wie(e,t,r){var n=-1,s=e.length;t<0&&(t=-t>s?0:s+t),r=r>s?s:r,r<0&&(r+=s),s=t>r?0:r-t>>>0,t>>>=0;for(var u=Array(s);++n<s;)u[n]=e[n+t];return u}var qie=Wie,Hie=qie;function Xie(e,t,r){var n=e.length;return r=r===void 0?n:r,!t&&r>=n?e:Hie(e,t,r)}var Zie=Xie,Kie="\\ud800-\\udfff",Yie="\\u0300-\\u036f",Jie="\\ufe20-\\ufe2f",Qie="\\u20d0-\\u20ff",eoe=Yie+Jie+Qie,toe="\\ufe0e\\ufe0f",roe="\\u200d",noe=RegExp("["+roe+Kie+eoe+toe+"]");function ioe(e){return noe.test(e)}var c6=ioe;function ooe(e){return e.split("")}var aoe=ooe,u6="\\ud800-\\udfff",soe="\\u0300-\\u036f",loe="\\ufe20-\\ufe2f",coe="\\u20d0-\\u20ff",uoe=soe+loe+coe,doe="\\ufe0e\\ufe0f",hoe="["+u6+"]",UP="["+uoe+"]",VP="\\ud83c[\\udffb-\\udfff]",foe="(?:"+UP+"|"+VP+")",d6="[^"+u6+"]",h6="(?:\\ud83c[\\udde6-\\uddff]){2}",f6="[\\ud800-\\udbff][\\udc00-\\udfff]",poe="\\u200d",p6=foe+"?",m6="["+doe+"]?",moe="(?:"+poe+"(?:"+[d6,h6,f6].join("|")+")"+m6+p6+")*",goe=m6+p6+moe,yoe="(?:"+[d6+UP+"?",UP,h6,f6,hoe].join("|")+")",voe=RegExp(VP+"(?="+VP+")|"+yoe+goe,"g");function _oe(e){return e.match(voe)||[]}var xoe=_oe,boe=aoe,woe=c6,Soe=xoe;function Eoe(e){return woe(e)?Soe(e):boe(e)}var Toe=Eoe,Aoe=Zie,Poe=c6,Coe=Toe,Moe=r6;function Ioe(e){return function(t){t=Moe(t);var r=Poe(t)?Coe(t):void 0,n=r?r[0]:t.charAt(0),s=r?Aoe(r,1).join(""):t.slice(1);return n[e]()+s}}var Ooe=Ioe,koe=Ooe,Doe=koe("toUpperCase"),Roe=Doe;const jw=sn(Roe);function En(e){return function(){return e}}const g6=Math.cos,kb=Math.sin,Ls=Math.sqrt,Db=Math.PI,zw=2*Db,GP=Math.PI,WP=2*GP,Dd=1e-6,Loe=WP-Dd;function y6(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function joe(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return y6;const r=10**t;return function(n){this._+=n[0];for(let s=1,u=n.length;s<u;++s)this._+=Math.round(arguments[s]*r)/r+n[s]}}class zoe{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?y6:joe(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,n,s){this._append`Q${+t},${+r},${this._x1=+n},${this._y1=+s}`}bezierCurveTo(t,r,n,s,u,h){this._append`C${+t},${+r},${+n},${+s},${this._x1=+u},${this._y1=+h}`}arcTo(t,r,n,s,u){if(t=+t,r=+r,n=+n,s=+s,u=+u,u<0)throw new Error(`negative radius: ${u}`);let h=this._x1,m=this._y1,o=n-t,_=s-r,E=h-t,S=m-r,A=E*E+S*S;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(A>Dd)if(!(Math.abs(S*o-_*E)>Dd)||!u)this._append`L${this._x1=t},${this._y1=r}`;else{let I=n-h,R=s-m,k=o*o+_*_,L=I*I+R*R,N=Math.sqrt(k),z=Math.sqrt(A),F=u*Math.tan((GP-Math.acos((k+A-L)/(2*N*z)))/2),U=F/z,W=F/N;Math.abs(U-1)>Dd&&this._append`L${t+U*E},${r+U*S}`,this._append`A${u},${u},0,0,${+(S*I>E*R)},${this._x1=t+W*o},${this._y1=r+W*_}`}}arc(t,r,n,s,u,h){if(t=+t,r=+r,n=+n,h=!!h,n<0)throw new Error(`negative radius: ${n}`);let m=n*Math.cos(s),o=n*Math.sin(s),_=t+m,E=r+o,S=1^h,A=h?s-u:u-s;this._x1===null?this._append`M${_},${E}`:(Math.abs(this._x1-_)>Dd||Math.abs(this._y1-E)>Dd)&&this._append`L${_},${E}`,n&&(A<0&&(A=A%WP+WP),A>Loe?this._append`A${n},${n},0,1,${S},${t-m},${r-o}A${n},${n},0,1,${S},${this._x1=_},${this._y1=E}`:A>Dd&&this._append`A${n},${n},0,${+(A>=GP)},${S},${this._x1=t+n*Math.cos(u)},${this._y1=r+n*Math.sin(u)}`)}rect(t,r,n,s){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${n=+n}v${+s}h${-n}Z`}toString(){return this._}}function FI(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);t=n}return e},()=>new zoe(t)}function UI(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function v6(e){this._context=e}v6.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function Nw(e){return new v6(e)}function _6(e){return e[0]}function x6(e){return e[1]}function b6(e,t){var r=En(!0),n=null,s=Nw,u=null,h=FI(m);e=typeof e=="function"?e:e===void 0?_6:En(e),t=typeof t=="function"?t:t===void 0?x6:En(t);function m(o){var _,E=(o=UI(o)).length,S,A=!1,I;for(n==null&&(u=s(I=h())),_=0;_<=E;++_)!(_<E&&r(S=o[_],_,o))===A&&((A=!A)?u.lineStart():u.lineEnd()),A&&u.point(+e(S,_,o),+t(S,_,o));if(I)return u=null,I+""||null}return m.x=function(o){return arguments.length?(e=typeof o=="function"?o:En(+o),m):e},m.y=function(o){return arguments.length?(t=typeof o=="function"?o:En(+o),m):t},m.defined=function(o){return arguments.length?(r=typeof o=="function"?o:En(!!o),m):r},m.curve=function(o){return arguments.length?(s=o,n!=null&&(u=s(n)),m):s},m.context=function(o){return arguments.length?(o==null?n=u=null:u=s(n=o),m):n},m}function m0(e,t,r){var n=null,s=En(!0),u=null,h=Nw,m=null,o=FI(_);e=typeof e=="function"?e:e===void 0?_6:En(+e),t=typeof t=="function"?t:En(t===void 0?0:+t),r=typeof r=="function"?r:r===void 0?x6:En(+r);function _(S){var A,I,R,k=(S=UI(S)).length,L,N=!1,z,F=new Array(k),U=new Array(k);for(u==null&&(m=h(z=o())),A=0;A<=k;++A){if(!(A<k&&s(L=S[A],A,S))===N)if(N=!N)I=A,m.areaStart(),m.lineStart();else{for(m.lineEnd(),m.lineStart(),R=A-1;R>=I;--R)m.point(F[R],U[R]);m.lineEnd(),m.areaEnd()}N&&(F[A]=+e(L,A,S),U[A]=+t(L,A,S),m.point(n?+n(L,A,S):F[A],r?+r(L,A,S):U[A]))}if(z)return m=null,z+""||null}function E(){return b6().defined(s).curve(h).context(u)}return _.x=function(S){return arguments.length?(e=typeof S=="function"?S:En(+S),n=null,_):e},_.x0=function(S){return arguments.length?(e=typeof S=="function"?S:En(+S),_):e},_.x1=function(S){return arguments.length?(n=S==null?null:typeof S=="function"?S:En(+S),_):n},_.y=function(S){return arguments.length?(t=typeof S=="function"?S:En(+S),r=null,_):t},_.y0=function(S){return arguments.length?(t=typeof S=="function"?S:En(+S),_):t},_.y1=function(S){return arguments.length?(r=S==null?null:typeof S=="function"?S:En(+S),_):r},_.lineX0=_.lineY0=function(){return E().x(e).y(t)},_.lineY1=function(){return E().x(e).y(r)},_.lineX1=function(){return E().x(n).y(t)},_.defined=function(S){return arguments.length?(s=typeof S=="function"?S:En(!!S),_):s},_.curve=function(S){return arguments.length?(h=S,u!=null&&(m=h(u)),_):h},_.context=function(S){return arguments.length?(S==null?u=m=null:m=h(u=S),_):u},_}class w6{constructor(t,r){this._context=t,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,r){switch(t=+t,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,r,t,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,t,this._y0,t,r);break}}this._x0=t,this._y0=r}}function Noe(e){return new w6(e,!0)}function Boe(e){return new w6(e,!1)}const VI={draw(e,t){const r=Ls(t/Db);e.moveTo(r,0),e.arc(0,0,r,0,zw)}},$oe={draw(e,t){const r=Ls(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},S6=Ls(1/3),Foe=S6*2,Uoe={draw(e,t){const r=Ls(t/Foe),n=r*S6;e.moveTo(0,-r),e.lineTo(n,0),e.lineTo(0,r),e.lineTo(-n,0),e.closePath()}},Voe={draw(e,t){const r=Ls(t),n=-r/2;e.rect(n,n,r,r)}},Goe=.8908130915292852,E6=kb(Db/10)/kb(7*Db/10),Woe=kb(zw/10)*E6,qoe=-g6(zw/10)*E6,Hoe={draw(e,t){const r=Ls(t*Goe),n=Woe*r,s=qoe*r;e.moveTo(0,-r),e.lineTo(n,s);for(let u=1;u<5;++u){const h=zw*u/5,m=g6(h),o=kb(h);e.lineTo(o*r,-m*r),e.lineTo(m*n-o*s,o*n+m*s)}e.closePath()}},BT=Ls(3),Xoe={draw(e,t){const r=-Ls(t/(BT*3));e.moveTo(0,r*2),e.lineTo(-BT*r,-r),e.lineTo(BT*r,-r),e.closePath()}},Pa=-.5,Ca=Ls(3)/2,qP=1/Ls(12),Zoe=(qP/2+1)*3,Koe={draw(e,t){const r=Ls(t/Zoe),n=r/2,s=r*qP,u=n,h=r*qP+r,m=-u,o=h;e.moveTo(n,s),e.lineTo(u,h),e.lineTo(m,o),e.lineTo(Pa*n-Ca*s,Ca*n+Pa*s),e.lineTo(Pa*u-Ca*h,Ca*u+Pa*h),e.lineTo(Pa*m-Ca*o,Ca*m+Pa*o),e.lineTo(Pa*n+Ca*s,Pa*s-Ca*n),e.lineTo(Pa*u+Ca*h,Pa*h-Ca*u),e.lineTo(Pa*m+Ca*o,Pa*o-Ca*m),e.closePath()}};function Yoe(e,t){let r=null,n=FI(s);e=typeof e=="function"?e:En(e||VI),t=typeof t=="function"?t:En(t===void 0?64:+t);function s(){let u;if(r||(r=u=n()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),u)return r=null,u+""||null}return s.type=function(u){return arguments.length?(e=typeof u=="function"?u:En(u),s):e},s.size=function(u){return arguments.length?(t=typeof u=="function"?u:En(+u),s):t},s.context=function(u){return arguments.length?(r=u??null,s):r},s}function Rb(){}function Lb(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function T6(e){this._context=e}T6.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Lb(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Lb(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Joe(e){return new T6(e)}function A6(e){this._context=e}A6.prototype={areaStart:Rb,areaEnd:Rb,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:Lb(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Qoe(e){return new A6(e)}function P6(e){this._context=e}P6.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,n=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:Lb(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function eae(e){return new P6(e)}function C6(e){this._context=e}C6.prototype={areaStart:Rb,areaEnd:Rb,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function tae(e){return new C6(e)}function Bj(e){return e<0?-1:1}function $j(e,t,r){var n=e._x1-e._x0,s=t-e._x1,u=(e._y1-e._y0)/(n||s<0&&-0),h=(r-e._y1)/(s||n<0&&-0),m=(u*s+h*n)/(n+s);return(Bj(u)+Bj(h))*Math.min(Math.abs(u),Math.abs(h),.5*Math.abs(m))||0}function Fj(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function $T(e,t,r){var n=e._x0,s=e._y0,u=e._x1,h=e._y1,m=(u-n)/3;e._context.bezierCurveTo(n+m,s+m*t,u-m,h-m*r,u,h)}function jb(e){this._context=e}jb.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:$T(this,this._t0,Fj(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,$T(this,Fj(this,r=$j(this,e,t)),r);break;default:$T(this,this._t0,r=$j(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function M6(e){this._context=new I6(e)}(M6.prototype=Object.create(jb.prototype)).point=function(e,t){jb.prototype.point.call(this,t,e)};function I6(e){this._context=e}I6.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,n,s,u){this._context.bezierCurveTo(t,e,n,r,u,s)}};function rae(e){return new jb(e)}function nae(e){return new M6(e)}function O6(e){this._context=e}O6.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var n=Uj(e),s=Uj(t),u=0,h=1;h<r;++u,++h)this._context.bezierCurveTo(n[0][u],s[0][u],n[1][u],s[1][u],e[h],t[h]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function Uj(e){var t,r=e.length-1,n,s=new Array(r),u=new Array(r),h=new Array(r);for(s[0]=0,u[0]=2,h[0]=e[0]+2*e[1],t=1;t<r-1;++t)s[t]=1,u[t]=4,h[t]=4*e[t]+2*e[t+1];for(s[r-1]=2,u[r-1]=7,h[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=s[t]/u[t-1],u[t]-=n,h[t]-=n*h[t-1];for(s[r-1]=h[r-1]/u[r-1],t=r-2;t>=0;--t)s[t]=(h[t]-s[t+1])/u[t];for(u[r-1]=(e[r]+s[r-1])/2,t=0;t<r-1;++t)u[t]=2*e[t+1]-s[t+1];return[s,u]}function iae(e){return new O6(e)}function Bw(e,t){this._context=e,this._t=t}Bw.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function oae(e){return new Bw(e,.5)}function aae(e){return new Bw(e,0)}function sae(e){return new Bw(e,1)}function Ep(e,t){if((h=e.length)>1)for(var r=1,n,s,u=e[t[0]],h,m=u.length;r<h;++r)for(s=u,u=e[t[r]],n=0;n<m;++n)u[n][1]+=u[n][0]=isNaN(s[n][1])?s[n][0]:s[n][1]}function HP(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function lae(e,t){return e[t]}function cae(e){const t=[];return t.key=e,t}function uae(){var e=En([]),t=HP,r=Ep,n=lae;function s(u){var h=Array.from(e.apply(this,arguments),cae),m,o=h.length,_=-1,E;for(const S of u)for(m=0,++_;m<o;++m)(h[m][_]=[0,+n(S,h[m].key,_,u)]).data=S;for(m=0,E=UI(t(h));m<o;++m)h[E[m]].index=m;return r(h,E),h}return s.keys=function(u){return arguments.length?(e=typeof u=="function"?u:En(Array.from(u)),s):e},s.value=function(u){return arguments.length?(n=typeof u=="function"?u:En(+u),s):n},s.order=function(u){return arguments.length?(t=u==null?HP:typeof u=="function"?u:En(Array.from(u)),s):t},s.offset=function(u){return arguments.length?(r=u??Ep,s):r},s}function dae(e,t){if((n=e.length)>0){for(var r,n,s=0,u=e[0].length,h;s<u;++s){for(h=r=0;r<n;++r)h+=e[r][s][1]||0;if(h)for(r=0;r<n;++r)e[r][s][1]/=h}Ep(e,t)}}function hae(e,t){if((s=e.length)>0){for(var r=0,n=e[t[0]],s,u=n.length;r<u;++r){for(var h=0,m=0;h<s;++h)m+=e[h][r][1]||0;n[r][1]+=n[r][0]=-m/2}Ep(e,t)}}function fae(e,t){if(!(!((h=e.length)>0)||!((u=(s=e[t[0]]).length)>0))){for(var r=0,n=1,s,u,h;n<u;++n){for(var m=0,o=0,_=0;m<h;++m){for(var E=e[t[m]],S=E[n][1]||0,A=E[n-1][1]||0,I=(S-A)/2,R=0;R<m;++R){var k=e[t[R]],L=k[n][1]||0,N=k[n-1][1]||0;I+=L-N}o+=S,_+=I*S}s[n-1][1]+=s[n-1][0]=r,o&&(r-=_/o)}s[n-1][1]+=s[n-1][0]=r,Ep(e,t)}}function lv(e){"@babel/helpers - typeof";return lv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},lv(e)}var pae=["type","size","sizeType"];function XP(){return XP=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},XP.apply(this,arguments)}function Vj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Gj(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Vj(Object(r),!0).forEach(function(n){mae(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Vj(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function mae(e,t,r){return t=gae(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function gae(e){var t=yae(e,"string");return lv(t)=="symbol"?t:t+""}function yae(e,t){if(lv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(lv(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function vae(e,t){if(e==null)return{};var r=_ae(e,t),n,s;if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(e);for(s=0;s<u.length;s++)n=u[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function _ae(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var k6={symbolCircle:VI,symbolCross:$oe,symbolDiamond:Uoe,symbolSquare:Voe,symbolStar:Hoe,symbolTriangle:Xoe,symbolWye:Koe},xae=Math.PI/180,bae=function(t){var r="symbol".concat(jw(t));return k6[r]||VI},wae=function(t,r,n){if(r==="area")return t;switch(n){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var s=18*xae;return 1.25*t*t*(Math.tan(s)-Math.tan(s*2)*Math.pow(Math.tan(s),2))}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},Sae=function(t,r){k6["symbol".concat(jw(t))]=r},$w=function(t){var r=t.type,n=r===void 0?"circle":r,s=t.size,u=s===void 0?64:s,h=t.sizeType,m=h===void 0?"area":h,o=vae(t,pae),_=Gj(Gj({},o),{},{type:n,size:u,sizeType:m}),E=function(){var L=bae(n),N=Yoe().type(L).size(wae(u,m,n));return N()},S=_.className,A=_.cx,I=_.cy,R=Br(_,!0);return A===+A&&I===+I&&u===+u?be.createElement("path",XP({},R,{className:Fr("recharts-symbols",S),transform:"translate(".concat(A,", ").concat(I,")"),d:E()})):null};$w.registerSymbol=Sae;function Tp(e){"@babel/helpers - typeof";return Tp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Tp(e)}function ZP(){return ZP=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ZP.apply(this,arguments)}function Wj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Eae(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Wj(Object(r),!0).forEach(function(n){cv(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Wj(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Tae(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Aae(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,R6(n.key),n)}}function Pae(e,t,r){return t&&Aae(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Cae(e,t,r){return t=zb(t),Mae(e,D6()?Reflect.construct(t,r||[],zb(e).constructor):t.apply(e,r))}function Mae(e,t){if(t&&(Tp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Iae(e)}function Iae(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function D6(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(D6=function(){return!!e})()}function zb(e){return zb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},zb(e)}function Oae(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&KP(e,t)}function KP(e,t){return KP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},KP(e,t)}function cv(e,t,r){return t=R6(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function R6(e){var t=kae(e,"string");return Tp(t)=="symbol"?t:t+""}function kae(e,t){if(Tp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Tp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Ma=32,GI=function(e){function t(){return Tae(this,t),Cae(this,t,arguments)}return Oae(t,e),Pae(t,[{key:"renderIcon",value:function(n){var s=this.props.inactiveColor,u=Ma/2,h=Ma/6,m=Ma/3,o=n.inactive?s:n.color;if(n.type==="plainline")return be.createElement("line",{strokeWidth:4,fill:"none",stroke:o,strokeDasharray:n.payload.strokeDasharray,x1:0,y1:u,x2:Ma,y2:u,className:"recharts-legend-icon"});if(n.type==="line")return be.createElement("path",{strokeWidth:4,fill:"none",stroke:o,d:"M0,".concat(u,"h").concat(m,`
            A`).concat(h,",").concat(h,",0,1,1,").concat(2*m,",").concat(u,`
            H`).concat(Ma,"M").concat(2*m,",").concat(u,`
            A`).concat(h,",").concat(h,",0,1,1,").concat(m,",").concat(u),className:"recharts-legend-icon"});if(n.type==="rect")return be.createElement("path",{stroke:"none",fill:o,d:"M0,".concat(Ma/8,"h").concat(Ma,"v").concat(Ma*3/4,"h").concat(-Ma,"z"),className:"recharts-legend-icon"});if(be.isValidElement(n.legendIcon)){var _=Eae({},n);return delete _.legendIcon,be.cloneElement(n.legendIcon,_)}return be.createElement($w,{fill:o,cx:u,cy:u,size:Ma,sizeType:"diameter",type:n.type})}},{key:"renderItems",value:function(){var n=this,s=this.props,u=s.payload,h=s.iconSize,m=s.layout,o=s.formatter,_=s.inactiveColor,E={x:0,y:0,width:Ma,height:Ma},S={display:m==="horizontal"?"inline-block":"block",marginRight:10},A={display:"inline-block",verticalAlign:"middle",marginRight:4};return u.map(function(I,R){var k=I.formatter||o,L=Fr(cv(cv({"recharts-legend-item":!0},"legend-item-".concat(R),!0),"inactive",I.inactive));if(I.type==="none")return null;var N=Rr(I.value)?null:I.value;Xl(!Rr(I.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var z=I.inactive?_:I.color;return be.createElement("li",ZP({className:L,style:S,key:"legend-item-".concat(R)},sv(n.props,I,R)),be.createElement($P,{width:h,height:h,viewBox:E,style:A},n.renderIcon(I)),be.createElement("span",{className:"recharts-legend-item-text",style:{color:z}},k?k(N,I,R):N))})}},{key:"render",value:function(){var n=this.props,s=n.payload,u=n.layout,h=n.align;if(!s||!s.length)return null;var m={padding:0,margin:0,textAlign:u==="horizontal"?h:"left"};return be.createElement("ul",{className:"recharts-default-legend",style:m},this.renderItems())}}])}(V.PureComponent);cv(GI,"displayName","Legend");cv(GI,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var Dae=Sw;function Rae(){this.__data__=new Dae,this.size=0}var Lae=Rae;function jae(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}var zae=jae;function Nae(e){return this.__data__.get(e)}var Bae=Nae;function $ae(e){return this.__data__.has(e)}var Fae=$ae,Uae=Sw,Vae=kI,Gae=DI,Wae=200;function qae(e,t){var r=this.__data__;if(r instanceof Uae){var n=r.__data__;if(!Vae||n.length<Wae-1)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new Gae(n)}return r.set(e,t),this.size=r.size,this}var Hae=qae,Xae=Sw,Zae=Lae,Kae=zae,Yae=Bae,Jae=Fae,Qae=Hae;function sm(e){var t=this.__data__=new Xae(e);this.size=t.size}sm.prototype.clear=Zae;sm.prototype.delete=Kae;sm.prototype.get=Yae;sm.prototype.has=Jae;sm.prototype.set=Qae;var L6=sm,ese="__lodash_hash_undefined__";function tse(e){return this.__data__.set(e,ese),this}var rse=tse;function nse(e){return this.__data__.has(e)}var ise=nse,ose=DI,ase=rse,sse=ise;function Nb(e){var t=-1,r=e==null?0:e.length;for(this.__data__=new ose;++t<r;)this.add(e[t])}Nb.prototype.add=Nb.prototype.push=ase;Nb.prototype.has=sse;var j6=Nb;function lse(e,t){for(var r=-1,n=e==null?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}var z6=lse;function cse(e,t){return e.has(t)}var N6=cse,use=j6,dse=z6,hse=N6,fse=1,pse=2;function mse(e,t,r,n,s,u){var h=r&fse,m=e.length,o=t.length;if(m!=o&&!(h&&o>m))return!1;var _=u.get(e),E=u.get(t);if(_&&E)return _==t&&E==e;var S=-1,A=!0,I=r&pse?new use:void 0;for(u.set(e,t),u.set(t,e);++S<m;){var R=e[S],k=t[S];if(n)var L=h?n(k,R,S,t,e,u):n(R,k,S,e,t,u);if(L!==void 0){if(L)continue;A=!1;break}if(I){if(!dse(t,function(N,z){if(!hse(I,z)&&(R===N||s(R,N,r,n,u)))return I.push(z)})){A=!1;break}}else if(!(R===k||s(R,k,r,n,u))){A=!1;break}}return u.delete(e),u.delete(t),A}var B6=mse,gse=pl,yse=gse.Uint8Array,vse=yse;function _se(e){var t=-1,r=Array(e.size);return e.forEach(function(n,s){r[++t]=[s,n]}),r}var xse=_se;function bse(e){var t=-1,r=Array(e.size);return e.forEach(function(n){r[++t]=n}),r}var WI=bse,qj=o_,Hj=vse,wse=OI,Sse=B6,Ese=xse,Tse=WI,Ase=1,Pse=2,Cse="[object Boolean]",Mse="[object Date]",Ise="[object Error]",Ose="[object Map]",kse="[object Number]",Dse="[object RegExp]",Rse="[object Set]",Lse="[object String]",jse="[object Symbol]",zse="[object ArrayBuffer]",Nse="[object DataView]",Xj=qj?qj.prototype:void 0,FT=Xj?Xj.valueOf:void 0;function Bse(e,t,r,n,s,u,h){switch(r){case Nse:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case zse:return!(e.byteLength!=t.byteLength||!u(new Hj(e),new Hj(t)));case Cse:case Mse:case kse:return wse(+e,+t);case Ise:return e.name==t.name&&e.message==t.message;case Dse:case Lse:return e==t+"";case Ose:var m=Ese;case Rse:var o=n&Ase;if(m||(m=Tse),e.size!=t.size&&!o)return!1;var _=h.get(e);if(_)return _==t;n|=Pse,h.set(e,t);var E=Sse(m(e),m(t),n,s,u,h);return h.delete(e),E;case jse:if(FT)return FT.call(e)==FT.call(t)}return!1}var $se=Bse;function Fse(e,t){for(var r=-1,n=t.length,s=e.length;++r<n;)e[s+r]=t[r];return e}var $6=Fse,Use=$6,Vse=Go;function Gse(e,t,r){var n=t(e);return Vse(e)?n:Use(n,r(e))}var Wse=Gse;function qse(e,t){for(var r=-1,n=e==null?0:e.length,s=0,u=[];++r<n;){var h=e[r];t(h,r,e)&&(u[s++]=h)}return u}var Hse=qse;function Xse(){return[]}var Zse=Xse,Kse=Hse,Yse=Zse,Jse=Object.prototype,Qse=Jse.propertyIsEnumerable,Zj=Object.getOwnPropertySymbols,ele=Zj?function(e){return e==null?[]:(e=Object(e),Kse(Zj(e),function(t){return Qse.call(e,t)}))}:Yse,tle=ele;function rle(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}var nle=rle,ile=cc,ole=uc,ale="[object Arguments]";function sle(e){return ole(e)&&ile(e)==ale}var lle=sle,Kj=lle,cle=uc,F6=Object.prototype,ule=F6.hasOwnProperty,dle=F6.propertyIsEnumerable,hle=Kj(function(){return arguments}())?Kj:function(e){return cle(e)&&ule.call(e,"callee")&&!dle.call(e,"callee")},qI=hle,Bb={exports:{}};function fle(){return!1}var ple=fle;Bb.exports;(function(e,t){var r=pl,n=ple,s=t&&!t.nodeType&&t,u=s&&!0&&e&&!e.nodeType&&e,h=u&&u.exports===s,m=h?r.Buffer:void 0,o=m?m.isBuffer:void 0,_=o||n;e.exports=_})(Bb,Bb.exports);var U6=Bb.exports,mle=9007199254740991,gle=/^(?:0|[1-9]\d*)$/;function yle(e,t){var r=typeof e;return t=t??mle,!!t&&(r=="number"||r!="symbol"&&gle.test(e))&&e>-1&&e%1==0&&e<t}var HI=yle,vle=9007199254740991;function _le(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=vle}var XI=_le,xle=cc,ble=XI,wle=uc,Sle="[object Arguments]",Ele="[object Array]",Tle="[object Boolean]",Ale="[object Date]",Ple="[object Error]",Cle="[object Function]",Mle="[object Map]",Ile="[object Number]",Ole="[object Object]",kle="[object RegExp]",Dle="[object Set]",Rle="[object String]",Lle="[object WeakMap]",jle="[object ArrayBuffer]",zle="[object DataView]",Nle="[object Float32Array]",Ble="[object Float64Array]",$le="[object Int8Array]",Fle="[object Int16Array]",Ule="[object Int32Array]",Vle="[object Uint8Array]",Gle="[object Uint8ClampedArray]",Wle="[object Uint16Array]",qle="[object Uint32Array]",On={};On[Nle]=On[Ble]=On[$le]=On[Fle]=On[Ule]=On[Vle]=On[Gle]=On[Wle]=On[qle]=!0;On[Sle]=On[Ele]=On[jle]=On[Tle]=On[zle]=On[Ale]=On[Ple]=On[Cle]=On[Mle]=On[Ile]=On[Ole]=On[kle]=On[Dle]=On[Rle]=On[Lle]=!1;function Hle(e){return wle(e)&&ble(e.length)&&!!On[xle(e)]}var Xle=Hle;function Zle(e){return function(t){return e(t)}}var V6=Zle,$b={exports:{}};$b.exports;(function(e,t){var r=KU,n=t&&!t.nodeType&&t,s=n&&!0&&e&&!e.nodeType&&e,u=s&&s.exports===n,h=u&&r.process,m=function(){try{var o=s&&s.require&&s.require("util").types;return o||h&&h.binding&&h.binding("util")}catch{}}();e.exports=m})($b,$b.exports);var Kle=$b.exports,Yle=Xle,Jle=V6,Yj=Kle,Jj=Yj&&Yj.isTypedArray,Qle=Jj?Jle(Jj):Yle,G6=Qle,ece=nle,tce=qI,rce=Go,nce=U6,ice=HI,oce=G6,ace=Object.prototype,sce=ace.hasOwnProperty;function lce(e,t){var r=rce(e),n=!r&&tce(e),s=!r&&!n&&nce(e),u=!r&&!n&&!s&&oce(e),h=r||n||s||u,m=h?ece(e.length,String):[],o=m.length;for(var _ in e)(t||sce.call(e,_))&&!(h&&(_=="length"||s&&(_=="offset"||_=="parent")||u&&(_=="buffer"||_=="byteLength"||_=="byteOffset")||ice(_,o)))&&m.push(_);return m}var cce=lce,uce=Object.prototype;function dce(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||uce;return e===r}var hce=dce;function fce(e,t){return function(r){return e(t(r))}}var W6=fce,pce=W6,mce=pce(Object.keys,Object),gce=mce,yce=hce,vce=gce,_ce=Object.prototype,xce=_ce.hasOwnProperty;function bce(e){if(!yce(e))return vce(e);var t=[];for(var r in Object(e))xce.call(e,r)&&r!="constructor"&&t.push(r);return t}var wce=bce,Sce=II,Ece=XI;function Tce(e){return e!=null&&Ece(e.length)&&!Sce(e)}var c_=Tce,Ace=cce,Pce=wce,Cce=c_;function Mce(e){return Cce(e)?Ace(e):Pce(e)}var Fw=Mce,Ice=Wse,Oce=tle,kce=Fw;function Dce(e){return Ice(e,kce,Oce)}var Rce=Dce,Qj=Rce,Lce=1,jce=Object.prototype,zce=jce.hasOwnProperty;function Nce(e,t,r,n,s,u){var h=r&Lce,m=Qj(e),o=m.length,_=Qj(t),E=_.length;if(o!=E&&!h)return!1;for(var S=o;S--;){var A=m[S];if(!(h?A in t:zce.call(t,A)))return!1}var I=u.get(e),R=u.get(t);if(I&&R)return I==t&&R==e;var k=!0;u.set(e,t),u.set(t,e);for(var L=h;++S<o;){A=m[S];var N=e[A],z=t[A];if(n)var F=h?n(z,N,A,t,e,u):n(N,z,A,e,t,u);if(!(F===void 0?N===z||s(N,z,r,n,u):F)){k=!1;break}L||(L=A=="constructor")}if(k&&!L){var U=e.constructor,W=t.constructor;U!=W&&"constructor"in e&&"constructor"in t&&!(typeof U=="function"&&U instanceof U&&typeof W=="function"&&W instanceof W)&&(k=!1)}return u.delete(e),u.delete(t),k}var Bce=Nce,$ce=yh,Fce=pl,Uce=$ce(Fce,"DataView"),Vce=Uce,Gce=yh,Wce=pl,qce=Gce(Wce,"Promise"),Hce=qce,Xce=yh,Zce=pl,Kce=Xce(Zce,"Set"),q6=Kce,Yce=yh,Jce=pl,Qce=Yce(Jce,"WeakMap"),eue=Qce,YP=Vce,JP=kI,QP=Hce,eC=q6,tC=eue,H6=cc,lm=JU,ez="[object Map]",tue="[object Object]",tz="[object Promise]",rz="[object Set]",nz="[object WeakMap]",iz="[object DataView]",rue=lm(YP),nue=lm(JP),iue=lm(QP),oue=lm(eC),aue=lm(tC),Rd=H6;(YP&&Rd(new YP(new ArrayBuffer(1)))!=iz||JP&&Rd(new JP)!=ez||QP&&Rd(QP.resolve())!=tz||eC&&Rd(new eC)!=rz||tC&&Rd(new tC)!=nz)&&(Rd=function(e){var t=H6(e),r=t==tue?e.constructor:void 0,n=r?lm(r):"";if(n)switch(n){case rue:return iz;case nue:return ez;case iue:return tz;case oue:return rz;case aue:return nz}return t});var sue=Rd,UT=L6,lue=B6,cue=$se,uue=Bce,oz=sue,az=Go,sz=U6,due=G6,hue=1,lz="[object Arguments]",cz="[object Array]",g0="[object Object]",fue=Object.prototype,uz=fue.hasOwnProperty;function pue(e,t,r,n,s,u){var h=az(e),m=az(t),o=h?cz:oz(e),_=m?cz:oz(t);o=o==lz?g0:o,_=_==lz?g0:_;var E=o==g0,S=_==g0,A=o==_;if(A&&sz(e)){if(!sz(t))return!1;h=!0,E=!1}if(A&&!E)return u||(u=new UT),h||due(e)?lue(e,t,r,n,s,u):cue(e,t,o,r,n,s,u);if(!(r&hue)){var I=E&&uz.call(e,"__wrapped__"),R=S&&uz.call(t,"__wrapped__");if(I||R){var k=I?e.value():e,L=R?t.value():t;return u||(u=new UT),s(k,L,r,n,u)}}return A?(u||(u=new UT),uue(e,t,r,n,s,u)):!1}var mue=pue,gue=mue,dz=uc;function X6(e,t,r,n,s){return e===t?!0:e==null||t==null||!dz(e)&&!dz(t)?e!==e&&t!==t:gue(e,t,r,n,X6,s)}var ZI=X6,yue=L6,vue=ZI,_ue=1,xue=2;function bue(e,t,r,n){var s=r.length,u=s,h=!n;if(e==null)return!u;for(e=Object(e);s--;){var m=r[s];if(h&&m[2]?m[1]!==e[m[0]]:!(m[0]in e))return!1}for(;++s<u;){m=r[s];var o=m[0],_=e[o],E=m[1];if(h&&m[2]){if(_===void 0&&!(o in e))return!1}else{var S=new yue;if(n)var A=n(_,E,o,e,t,S);if(!(A===void 0?vue(E,_,_ue|xue,n,S):A))return!1}}return!0}var wue=bue,Sue=zu;function Eue(e){return e===e&&!Sue(e)}var Z6=Eue,Tue=Z6,Aue=Fw;function Pue(e){for(var t=Aue(e),r=t.length;r--;){var n=t[r],s=e[n];t[r]=[n,s,Tue(s)]}return t}var Cue=Pue;function Mue(e,t){return function(r){return r==null?!1:r[e]===t&&(t!==void 0||e in Object(r))}}var K6=Mue,Iue=wue,Oue=Cue,kue=K6;function Due(e){var t=Oue(e);return t.length==1&&t[0][2]?kue(t[0][0],t[0][1]):function(r){return r===e||Iue(r,e,t)}}var Rue=Due;function Lue(e,t){return e!=null&&t in Object(e)}var jue=Lue,zue=n6,Nue=qI,Bue=Go,$ue=HI,Fue=XI,Uue=Tw;function Vue(e,t,r){t=zue(t,e);for(var n=-1,s=t.length,u=!1;++n<s;){var h=Uue(t[n]);if(!(u=e!=null&&r(e,h)))break;e=e[h]}return u||++n!=s?u:(s=e==null?0:e.length,!!s&&Fue(s)&&$ue(h,s)&&(Bue(e)||Nue(e)))}var Gue=Vue,Wue=jue,que=Gue;function Hue(e,t){return e!=null&&que(e,t,Wue)}var Xue=Hue,Zue=ZI,Kue=i6,Yue=Xue,Jue=MI,Que=Z6,ede=K6,tde=Tw,rde=1,nde=2;function ide(e,t){return Jue(e)&&Que(t)?ede(tde(e),t):function(r){var n=Kue(r,e);return n===void 0&&n===t?Yue(r,e):Zue(t,n,rde|nde)}}var ode=ide;function ade(e){return e}var cm=ade;function sde(e){return function(t){return t==null?void 0:t[e]}}var lde=sde,cde=jI;function ude(e){return function(t){return cde(t,e)}}var dde=ude,hde=lde,fde=dde,pde=MI,mde=Tw;function gde(e){return pde(e)?hde(mde(e)):fde(e)}var yde=gde,vde=Rue,_de=ode,xde=cm,bde=Go,wde=yde;function Sde(e){return typeof e=="function"?e:e==null?xde:typeof e=="object"?bde(e)?_de(e[0],e[1]):vde(e):wde(e)}var Nu=Sde;function Ede(e,t,r,n){for(var s=e.length,u=r+(n?1:-1);n?u--:++u<s;)if(t(e[u],u,e))return u;return-1}var Y6=Ede;function Tde(e){return e!==e}var Ade=Tde;function Pde(e,t,r){for(var n=r-1,s=e.length;++n<s;)if(e[n]===t)return n;return-1}var Cde=Pde,Mde=Y6,Ide=Ade,Ode=Cde;function kde(e,t,r){return t===t?Ode(e,t,r):Mde(e,Ide,r)}var Dde=kde,Rde=Dde;function Lde(e,t){var r=e==null?0:e.length;return!!r&&Rde(e,t,0)>-1}var jde=Lde;function zde(e,t,r){for(var n=-1,s=e==null?0:e.length;++n<s;)if(r(t,e[n]))return!0;return!1}var Nde=zde;function Bde(){}var $de=Bde,VT=q6,Fde=$de,Ude=WI,Vde=1/0,Gde=VT&&1/Ude(new VT([,-0]))[1]==Vde?function(e){return new VT(e)}:Fde,Wde=Gde,qde=j6,Hde=jde,Xde=Nde,Zde=N6,Kde=Wde,Yde=WI,Jde=200;function Qde(e,t,r){var n=-1,s=Hde,u=e.length,h=!0,m=[],o=m;if(r)h=!1,s=Xde;else if(u>=Jde){var _=t?null:Kde(e);if(_)return Yde(_);h=!1,s=Zde,o=new qde}else o=t?[]:m;e:for(;++n<u;){var E=e[n],S=t?t(E):E;if(E=r||E!==0?E:0,h&&S===S){for(var A=o.length;A--;)if(o[A]===S)continue e;t&&o.push(S),m.push(E)}else s(o,S,r)||(o!==m&&o.push(S),m.push(E))}return m}var ehe=Qde,the=Nu,rhe=ehe;function nhe(e,t){return e&&e.length?rhe(e,the(t)):[]}var ihe=nhe;const hz=sn(ihe);function J6(e,t,r){return t===!0?hz(e,r):Rr(t)?hz(e,t):e}function Ap(e){"@babel/helpers - typeof";return Ap=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ap(e)}var ohe=["ref"];function fz(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Ll(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?fz(Object(r),!0).forEach(function(n){Uw(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):fz(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ahe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function pz(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,eV(n.key),n)}}function she(e,t,r){return t&&pz(e.prototype,t),r&&pz(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function lhe(e,t,r){return t=Fb(t),che(e,Q6()?Reflect.construct(t,r||[],Fb(e).constructor):t.apply(e,r))}function che(e,t){if(t&&(Ap(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return uhe(e)}function uhe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Q6(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Q6=function(){return!!e})()}function Fb(e){return Fb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Fb(e)}function dhe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&rC(e,t)}function rC(e,t){return rC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},rC(e,t)}function Uw(e,t,r){return t=eV(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function eV(e){var t=hhe(e,"string");return Ap(t)=="symbol"?t:t+""}function hhe(e,t){if(Ap(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Ap(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function fhe(e,t){if(e==null)return{};var r=phe(e,t),n,s;if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(e);for(s=0;s<u.length;s++)n=u[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function phe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function mhe(e){return e.value}function ghe(e,t){if(be.isValidElement(e))return be.cloneElement(e,t);if(typeof e=="function")return be.createElement(e,t);t.ref;var r=fhe(t,ohe);return be.createElement(GI,r)}var mz=1,ha=function(e){function t(){var r;ahe(this,t);for(var n=arguments.length,s=new Array(n),u=0;u<n;u++)s[u]=arguments[u];return r=lhe(this,t,[].concat(s)),Uw(r,"lastBoundingBox",{width:-1,height:-1}),r}return dhe(t,e),she(t,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();return n.height=this.wrapperNode.offsetHeight,n.width=this.wrapperNode.offsetWidth,n}return null}},{key:"updateBBox",value:function(){var n=this.props.onBBoxUpdate,s=this.getBBox();s?(Math.abs(s.width-this.lastBoundingBox.width)>mz||Math.abs(s.height-this.lastBoundingBox.height)>mz)&&(this.lastBoundingBox.width=s.width,this.lastBoundingBox.height=s.height,n&&n(s)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,n&&n(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?Ll({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(n){var s=this.props,u=s.layout,h=s.align,m=s.verticalAlign,o=s.margin,_=s.chartWidth,E=s.chartHeight,S,A;if(!n||(n.left===void 0||n.left===null)&&(n.right===void 0||n.right===null))if(h==="center"&&u==="vertical"){var I=this.getBBoxSnapshot();S={left:((_||0)-I.width)/2}}else S=h==="right"?{right:o&&o.right||0}:{left:o&&o.left||0};if(!n||(n.top===void 0||n.top===null)&&(n.bottom===void 0||n.bottom===null))if(m==="middle"){var R=this.getBBoxSnapshot();A={top:((E||0)-R.height)/2}}else A=m==="bottom"?{bottom:o&&o.bottom||0}:{top:o&&o.top||0};return Ll(Ll({},S),A)}},{key:"render",value:function(){var n=this,s=this.props,u=s.content,h=s.width,m=s.height,o=s.wrapperStyle,_=s.payloadUniqBy,E=s.payload,S=Ll(Ll({position:"absolute",width:h||"auto",height:m||"auto"},this.getDefaultPosition(o)),o);return be.createElement("div",{className:"recharts-legend-wrapper",style:S,ref:function(I){n.wrapperNode=I}},ghe(u,Ll(Ll({},this.props),{},{payload:J6(E,_,mhe)})))}}],[{key:"getWithHeight",value:function(n,s){var u=Ll(Ll({},this.defaultProps),n.props),h=u.layout;return h==="vertical"&&Vt(n.props.height)?{height:n.props.height}:h==="horizontal"?{width:n.props.width||s}:null}}])}(V.PureComponent);Uw(ha,"displayName","Legend");Uw(ha,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var gz=o_,yhe=qI,vhe=Go,yz=gz?gz.isConcatSpreadable:void 0;function _he(e){return vhe(e)||yhe(e)||!!(yz&&e&&e[yz])}var xhe=_he,bhe=$6,whe=xhe;function tV(e,t,r,n,s){var u=-1,h=e.length;for(r||(r=whe),s||(s=[]);++u<h;){var m=e[u];t>0&&r(m)?t>1?tV(m,t-1,r,n,s):bhe(s,m):n||(s[s.length]=m)}return s}var rV=tV;function She(e){return function(t,r,n){for(var s=-1,u=Object(t),h=n(t),m=h.length;m--;){var o=h[e?m:++s];if(r(u[o],o,u)===!1)break}return t}}var Ehe=She,The=Ehe,Ahe=The(),Phe=Ahe,Che=Phe,Mhe=Fw;function Ihe(e,t){return e&&Che(e,t,Mhe)}var nV=Ihe,Ohe=c_;function khe(e,t){return function(r,n){if(r==null)return r;if(!Ohe(r))return e(r,n);for(var s=r.length,u=t?s:-1,h=Object(r);(t?u--:++u<s)&&n(h[u],u,h)!==!1;);return r}}var Dhe=khe,Rhe=nV,Lhe=Dhe,jhe=Lhe(Rhe),KI=jhe,zhe=KI,Nhe=c_;function Bhe(e,t){var r=-1,n=Nhe(e)?Array(e.length):[];return zhe(e,function(s,u,h){n[++r]=t(s,u,h)}),n}var iV=Bhe;function $he(e,t){var r=e.length;for(e.sort(t);r--;)e[r]=e[r].value;return e}var Fhe=$he,vz=rm;function Uhe(e,t){if(e!==t){var r=e!==void 0,n=e===null,s=e===e,u=vz(e),h=t!==void 0,m=t===null,o=t===t,_=vz(t);if(!m&&!_&&!u&&e>t||u&&h&&o&&!m&&!_||n&&h&&o||!r&&o||!s)return 1;if(!n&&!u&&!_&&e<t||_&&r&&s&&!n&&!u||m&&r&&s||!h&&s||!o)return-1}return 0}var Vhe=Uhe,Ghe=Vhe;function Whe(e,t,r){for(var n=-1,s=e.criteria,u=t.criteria,h=s.length,m=r.length;++n<h;){var o=Ghe(s[n],u[n]);if(o){if(n>=m)return o;var _=r[n];return o*(_=="desc"?-1:1)}}return e.index-t.index}var qhe=Whe,GT=LI,Hhe=jI,Xhe=Nu,Zhe=iV,Khe=Fhe,Yhe=V6,Jhe=qhe,Qhe=cm,efe=Go;function tfe(e,t,r){t.length?t=GT(t,function(u){return efe(u)?function(h){return Hhe(h,u.length===1?u[0]:u)}:u}):t=[Qhe];var n=-1;t=GT(t,Yhe(Xhe));var s=Zhe(e,function(u,h,m){var o=GT(t,function(_){return _(u)});return{criteria:o,index:++n,value:u}});return Khe(s,function(u,h){return Jhe(u,h,r)})}var rfe=tfe;function nfe(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}var ife=nfe,ofe=ife,_z=Math.max;function afe(e,t,r){return t=_z(t===void 0?e.length-1:t,0),function(){for(var n=arguments,s=-1,u=_z(n.length-t,0),h=Array(u);++s<u;)h[s]=n[t+s];s=-1;for(var m=Array(t+1);++s<t;)m[s]=n[s];return m[t]=r(h),ofe(e,this,m)}}var sfe=afe;function lfe(e){return function(){return e}}var cfe=lfe,ufe=yh,dfe=function(){try{var e=ufe(Object,"defineProperty");return e({},"",{}),e}catch{}}(),oV=dfe,hfe=cfe,xz=oV,ffe=cm,pfe=xz?function(e,t){return xz(e,"toString",{configurable:!0,enumerable:!1,value:hfe(t),writable:!0})}:ffe,mfe=pfe,gfe=800,yfe=16,vfe=Date.now;function _fe(e){var t=0,r=0;return function(){var n=vfe(),s=yfe-(n-r);if(r=n,s>0){if(++t>=gfe)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var xfe=_fe,bfe=mfe,wfe=xfe,Sfe=wfe(bfe),Efe=Sfe,Tfe=cm,Afe=sfe,Pfe=Efe;function Cfe(e,t){return Pfe(Afe(e,t,Tfe),e+"")}var Mfe=Cfe,Ife=OI,Ofe=c_,kfe=HI,Dfe=zu;function Rfe(e,t,r){if(!Dfe(r))return!1;var n=typeof t;return(n=="number"?Ofe(r)&&kfe(t,r.length):n=="string"&&t in r)?Ife(r[t],e):!1}var Vw=Rfe,Lfe=rV,jfe=rfe,zfe=Mfe,bz=Vw,Nfe=zfe(function(e,t){if(e==null)return[];var r=t.length;return r>1&&bz(e,t[0],t[1])?t=[]:r>2&&bz(t[0],t[1],t[2])&&(t=[t[0]]),jfe(e,Lfe(t,1),[])}),Bfe=Nfe;const YI=sn(Bfe);function uv(e){"@babel/helpers - typeof";return uv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},uv(e)}function nC(){return nC=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},nC.apply(this,arguments)}function $fe(e,t){return Gfe(e)||Vfe(e,t)||Ufe(e,t)||Ffe()}function Ffe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ufe(e,t){if(e){if(typeof e=="string")return wz(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return wz(e,t)}}function wz(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Vfe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,u,h,m=[],o=!0,_=!1;try{if(u=(r=r.call(e)).next,t!==0)for(;!(o=(n=u.call(r)).done)&&(m.push(n.value),m.length!==t);o=!0);}catch(E){_=!0,s=E}finally{try{if(!o&&r.return!=null&&(h=r.return(),Object(h)!==h))return}finally{if(_)throw s}}return m}}function Gfe(e){if(Array.isArray(e))return e}function Sz(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function WT(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Sz(Object(r),!0).forEach(function(n){Wfe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Sz(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Wfe(e,t,r){return t=qfe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function qfe(e){var t=Hfe(e,"string");return uv(t)=="symbol"?t:t+""}function Hfe(e,t){if(uv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(uv(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Xfe(e){return Array.isArray(e)&&Si(e[0])&&Si(e[1])?e.join(" ~ "):e}var Zfe=function(t){var r=t.separator,n=r===void 0?" : ":r,s=t.contentStyle,u=s===void 0?{}:s,h=t.itemStyle,m=h===void 0?{}:h,o=t.labelStyle,_=o===void 0?{}:o,E=t.payload,S=t.formatter,A=t.itemSorter,I=t.wrapperClassName,R=t.labelClassName,k=t.label,L=t.labelFormatter,N=t.accessibilityLayer,z=N===void 0?!1:N,F=function(){if(E&&E.length){var fe={padding:0,margin:0},Ee=(A?YI(E,A):E).map(function(Se,je){if(Se.type==="none")return null;var Le=WT({display:"block",paddingTop:4,paddingBottom:4,color:Se.color||"#000"},m),Ue=Se.formatter||S||Xfe,we=Se.value,Pe=Se.name,rt=we,$e=Pe;if(Ue&&rt!=null&&$e!=null){var Ge=Ue(we,Pe,Se,je,E);if(Array.isArray(Ge)){var Re=$fe(Ge,2);rt=Re[0],$e=Re[1]}else rt=Ge}return be.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(je),style:Le},Si($e)?be.createElement("span",{className:"recharts-tooltip-item-name"},$e):null,Si($e)?be.createElement("span",{className:"recharts-tooltip-item-separator"},n):null,be.createElement("span",{className:"recharts-tooltip-item-value"},rt),be.createElement("span",{className:"recharts-tooltip-item-unit"},Se.unit||""))});return be.createElement("ul",{className:"recharts-tooltip-item-list",style:fe},Ee)}return null},U=WT({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},u),W=WT({margin:0},_),Y=!Mr(k),Q=Y?k:"",Z=Fr("recharts-default-tooltip",I),re=Fr("recharts-tooltip-label",R);Y&&L&&E!==void 0&&E!==null&&(Q=L(k,E));var ne=z?{role:"status","aria-live":"assertive"}:{};return be.createElement("div",nC({className:Z,style:U},ne),be.createElement("p",{className:re,style:W},be.isValidElement(Q)?Q:"".concat(Q)),F())};function dv(e){"@babel/helpers - typeof";return dv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},dv(e)}function y0(e,t,r){return t=Kfe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Kfe(e){var t=Yfe(e,"string");return dv(t)=="symbol"?t:t+""}function Yfe(e,t){if(dv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(dv(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ny="recharts-tooltip-wrapper",Jfe={visibility:"hidden"};function Qfe(e){var t=e.coordinate,r=e.translateX,n=e.translateY;return Fr(ny,y0(y0(y0(y0({},"".concat(ny,"-right"),Vt(r)&&t&&Vt(t.x)&&r>=t.x),"".concat(ny,"-left"),Vt(r)&&t&&Vt(t.x)&&r<t.x),"".concat(ny,"-bottom"),Vt(n)&&t&&Vt(t.y)&&n>=t.y),"".concat(ny,"-top"),Vt(n)&&t&&Vt(t.y)&&n<t.y))}function Ez(e){var t=e.allowEscapeViewBox,r=e.coordinate,n=e.key,s=e.offsetTopLeft,u=e.position,h=e.reverseDirection,m=e.tooltipDimension,o=e.viewBox,_=e.viewBoxDimension;if(u&&Vt(u[n]))return u[n];var E=r[n]-m-s,S=r[n]+s;if(t[n])return h[n]?E:S;if(h[n]){var A=E,I=o[n];return A<I?Math.max(S,o[n]):Math.max(E,o[n])}var R=S+m,k=o[n]+_;return R>k?Math.max(E,o[n]):Math.max(S,o[n])}function epe(e){var t=e.translateX,r=e.translateY,n=e.useTranslate3d;return{transform:n?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}function tpe(e){var t=e.allowEscapeViewBox,r=e.coordinate,n=e.offsetTopLeft,s=e.position,u=e.reverseDirection,h=e.tooltipBox,m=e.useTranslate3d,o=e.viewBox,_,E,S;return h.height>0&&h.width>0&&r?(E=Ez({allowEscapeViewBox:t,coordinate:r,key:"x",offsetTopLeft:n,position:s,reverseDirection:u,tooltipDimension:h.width,viewBox:o,viewBoxDimension:o.width}),S=Ez({allowEscapeViewBox:t,coordinate:r,key:"y",offsetTopLeft:n,position:s,reverseDirection:u,tooltipDimension:h.height,viewBox:o,viewBoxDimension:o.height}),_=epe({translateX:E,translateY:S,useTranslate3d:m})):_=Jfe,{cssProperties:_,cssClasses:Qfe({translateX:E,translateY:S,coordinate:r})}}function Pp(e){"@babel/helpers - typeof";return Pp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Pp(e)}function Tz(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Az(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Tz(Object(r),!0).forEach(function(n){oC(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Tz(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function rpe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function npe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,sV(n.key),n)}}function ipe(e,t,r){return t&&npe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function ope(e,t,r){return t=Ub(t),ape(e,aV()?Reflect.construct(t,r||[],Ub(e).constructor):t.apply(e,r))}function ape(e,t){if(t&&(Pp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return spe(e)}function spe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function aV(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(aV=function(){return!!e})()}function Ub(e){return Ub=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Ub(e)}function lpe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&iC(e,t)}function iC(e,t){return iC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},iC(e,t)}function oC(e,t,r){return t=sV(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function sV(e){var t=cpe(e,"string");return Pp(t)=="symbol"?t:t+""}function cpe(e,t){if(Pp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Pp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Pz=1,upe=function(e){function t(){var r;rpe(this,t);for(var n=arguments.length,s=new Array(n),u=0;u<n;u++)s[u]=arguments[u];return r=ope(this,t,[].concat(s)),oC(r,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),oC(r,"handleKeyDown",function(h){if(h.key==="Escape"){var m,o,_,E;r.setState({dismissed:!0,dismissedAtCoordinate:{x:(m=(o=r.props.coordinate)===null||o===void 0?void 0:o.x)!==null&&m!==void 0?m:0,y:(_=(E=r.props.coordinate)===null||E===void 0?void 0:E.y)!==null&&_!==void 0?_:0}})}}),r}return lpe(t,e),ipe(t,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();(Math.abs(n.width-this.state.lastBoundingBox.width)>Pz||Math.abs(n.height-this.state.lastBoundingBox.height)>Pz)&&this.setState({lastBoundingBox:{width:n.width,height:n.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var n,s;this.props.active&&this.updateBBox(),this.state.dismissed&&(((n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==this.state.dismissedAtCoordinate.x||((s=this.props.coordinate)===null||s===void 0?void 0:s.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var n=this,s=this.props,u=s.active,h=s.allowEscapeViewBox,m=s.animationDuration,o=s.animationEasing,_=s.children,E=s.coordinate,S=s.hasPayload,A=s.isAnimationActive,I=s.offset,R=s.position,k=s.reverseDirection,L=s.useTranslate3d,N=s.viewBox,z=s.wrapperStyle,F=tpe({allowEscapeViewBox:h,coordinate:E,offsetTopLeft:I,position:R,reverseDirection:k,tooltipBox:this.state.lastBoundingBox,useTranslate3d:L,viewBox:N}),U=F.cssClasses,W=F.cssProperties,Y=Az(Az({transition:A&&u?"transform ".concat(m,"ms ").concat(o):void 0},W),{},{pointerEvents:"none",visibility:!this.state.dismissed&&u&&S?"visible":"hidden",position:"absolute",top:0,left:0},z);return be.createElement("div",{tabIndex:-1,className:U,style:Y,ref:function(Z){n.wrapperNode=Z}},_)}}])}(V.PureComponent),dpe=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},Zl={isSsr:dpe(),get:function(t){return Zl[t]},set:function(t,r){if(typeof t=="string")Zl[t]=r;else{var n=Object.keys(t);n&&n.length&&n.forEach(function(s){Zl[s]=t[s]})}}};function Cp(e){"@babel/helpers - typeof";return Cp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Cp(e)}function Cz(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Mz(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Cz(Object(r),!0).forEach(function(n){JI(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Cz(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function hpe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function fpe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,cV(n.key),n)}}function ppe(e,t,r){return t&&fpe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function mpe(e,t,r){return t=Vb(t),gpe(e,lV()?Reflect.construct(t,r||[],Vb(e).constructor):t.apply(e,r))}function gpe(e,t){if(t&&(Cp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ype(e)}function ype(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function lV(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(lV=function(){return!!e})()}function Vb(e){return Vb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Vb(e)}function vpe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&aC(e,t)}function aC(e,t){return aC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},aC(e,t)}function JI(e,t,r){return t=cV(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function cV(e){var t=_pe(e,"string");return Cp(t)=="symbol"?t:t+""}function _pe(e,t){if(Cp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Cp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function xpe(e){return e.dataKey}function bpe(e,t){return be.isValidElement(e)?be.cloneElement(e,t):typeof e=="function"?be.createElement(e,t):be.createElement(Zfe,t)}var Fi=function(e){function t(){return hpe(this,t),mpe(this,t,arguments)}return vpe(t,e),ppe(t,[{key:"render",value:function(){var n=this,s=this.props,u=s.active,h=s.allowEscapeViewBox,m=s.animationDuration,o=s.animationEasing,_=s.content,E=s.coordinate,S=s.filterNull,A=s.isAnimationActive,I=s.offset,R=s.payload,k=s.payloadUniqBy,L=s.position,N=s.reverseDirection,z=s.useTranslate3d,F=s.viewBox,U=s.wrapperStyle,W=R??[];S&&W.length&&(W=J6(R.filter(function(Q){return Q.value!=null&&(Q.hide!==!0||n.props.includeHidden)}),k,xpe));var Y=W.length>0;return be.createElement(upe,{allowEscapeViewBox:h,animationDuration:m,animationEasing:o,isAnimationActive:A,active:u,coordinate:E,hasPayload:Y,offset:I,position:L,reverseDirection:N,useTranslate3d:z,viewBox:F,wrapperStyle:U},bpe(_,Mz(Mz({},this.props),{},{payload:W})))}}])}(V.PureComponent);JI(Fi,"displayName","Tooltip");JI(Fi,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!Zl.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var wpe=pl,Spe=function(){return wpe.Date.now()},Epe=Spe,Tpe=/\s/;function Ape(e){for(var t=e.length;t--&&Tpe.test(e.charAt(t)););return t}var Ppe=Ape,Cpe=Ppe,Mpe=/^\s+/;function Ipe(e){return e&&e.slice(0,Cpe(e)+1).replace(Mpe,"")}var Ope=Ipe,kpe=Ope,Iz=zu,Dpe=rm,Oz=NaN,Rpe=/^[-+]0x[0-9a-f]+$/i,Lpe=/^0b[01]+$/i,jpe=/^0o[0-7]+$/i,zpe=parseInt;function Npe(e){if(typeof e=="number")return e;if(Dpe(e))return Oz;if(Iz(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=Iz(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=kpe(e);var r=Lpe.test(e);return r||jpe.test(e)?zpe(e.slice(2),r?2:8):Rpe.test(e)?Oz:+e}var uV=Npe,Bpe=zu,qT=Epe,kz=uV,$pe="Expected a function",Fpe=Math.max,Upe=Math.min;function Vpe(e,t,r){var n,s,u,h,m,o,_=0,E=!1,S=!1,A=!0;if(typeof e!="function")throw new TypeError($pe);t=kz(t)||0,Bpe(r)&&(E=!!r.leading,S="maxWait"in r,u=S?Fpe(kz(r.maxWait)||0,t):u,A="trailing"in r?!!r.trailing:A);function I(Y){var Q=n,Z=s;return n=s=void 0,_=Y,h=e.apply(Z,Q),h}function R(Y){return _=Y,m=setTimeout(N,t),E?I(Y):h}function k(Y){var Q=Y-o,Z=Y-_,re=t-Q;return S?Upe(re,u-Z):re}function L(Y){var Q=Y-o,Z=Y-_;return o===void 0||Q>=t||Q<0||S&&Z>=u}function N(){var Y=qT();if(L(Y))return z(Y);m=setTimeout(N,k(Y))}function z(Y){return m=void 0,A&&n?I(Y):(n=s=void 0,h)}function F(){m!==void 0&&clearTimeout(m),_=0,n=o=s=m=void 0}function U(){return m===void 0?h:z(qT())}function W(){var Y=qT(),Q=L(Y);if(n=arguments,s=this,o=Y,Q){if(m===void 0)return R(o);if(S)return clearTimeout(m),m=setTimeout(N,t),I(o)}return m===void 0&&(m=setTimeout(N,t)),h}return W.cancel=F,W.flush=U,W}var Gpe=Vpe,Wpe=Gpe,qpe=zu,Hpe="Expected a function";function Xpe(e,t,r){var n=!0,s=!0;if(typeof e!="function")throw new TypeError(Hpe);return qpe(r)&&(n="leading"in r?!!r.leading:n,s="trailing"in r?!!r.trailing:s),Wpe(e,t,{leading:n,maxWait:t,trailing:s})}var Zpe=Xpe;const dV=sn(Zpe);function hv(e){"@babel/helpers - typeof";return hv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},hv(e)}function Dz(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function v0(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Dz(Object(r),!0).forEach(function(n){Kpe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Dz(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Kpe(e,t,r){return t=Ype(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ype(e){var t=Jpe(e,"string");return hv(t)=="symbol"?t:t+""}function Jpe(e,t){if(hv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(hv(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Qpe(e,t){return nme(e)||rme(e,t)||tme(e,t)||eme()}function eme(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function tme(e,t){if(e){if(typeof e=="string")return Rz(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Rz(e,t)}}function Rz(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function rme(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,u,h,m=[],o=!0,_=!1;try{if(u=(r=r.call(e)).next,t!==0)for(;!(o=(n=u.call(r)).done)&&(m.push(n.value),m.length!==t);o=!0);}catch(E){_=!0,s=E}finally{try{if(!o&&r.return!=null&&(h=r.return(),Object(h)!==h))return}finally{if(_)throw s}}return m}}function nme(e){if(Array.isArray(e))return e}var _u=V.forwardRef(function(e,t){var r=e.aspect,n=e.initialDimension,s=n===void 0?{width:-1,height:-1}:n,u=e.width,h=u===void 0?"100%":u,m=e.height,o=m===void 0?"100%":m,_=e.minWidth,E=_===void 0?0:_,S=e.minHeight,A=e.maxHeight,I=e.children,R=e.debounce,k=R===void 0?0:R,L=e.id,N=e.className,z=e.onResize,F=e.style,U=F===void 0?{}:F,W=V.useRef(null),Y=V.useRef();Y.current=z,V.useImperativeHandle(t,function(){return Object.defineProperty(W.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),W.current},configurable:!0})});var Q=V.useState({containerWidth:s.width,containerHeight:s.height}),Z=Qpe(Q,2),re=Z[0],ne=Z[1],ue=V.useCallback(function(Ee,Se){ne(function(je){var Le=Math.round(Ee),Ue=Math.round(Se);return je.containerWidth===Le&&je.containerHeight===Ue?je:{containerWidth:Le,containerHeight:Ue}})},[]);V.useEffect(function(){var Ee=function(Pe){var rt,$e=Pe[0].contentRect,Ge=$e.width,Re=$e.height;ue(Ge,Re),(rt=Y.current)===null||rt===void 0||rt.call(Y,Ge,Re)};k>0&&(Ee=dV(Ee,k,{trailing:!0,leading:!1}));var Se=new ResizeObserver(Ee),je=W.current.getBoundingClientRect(),Le=je.width,Ue=je.height;return ue(Le,Ue),Se.observe(W.current),function(){Se.disconnect()}},[ue,k]);var fe=V.useMemo(function(){var Ee=re.containerWidth,Se=re.containerHeight;if(Ee<0||Se<0)return null;Xl(Bd(h)||Bd(o),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,h,o),Xl(!r||r>0,"The aspect(%s) must be greater than zero.",r);var je=Bd(h)?Ee:h,Le=Bd(o)?Se:o;r&&r>0&&(je?Le=je/r:Le&&(je=Le*r),A&&Le>A&&(Le=A)),Xl(je>0||Le>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,je,Le,h,o,E,S,r);var Ue=!Array.isArray(I)&&Hl(I.type).endsWith("Chart");return be.Children.map(I,function(we){return s6.isElement(we)?V.cloneElement(we,v0({width:je,height:Le},Ue?{style:v0({height:"100%",width:"100%",maxHeight:Le,maxWidth:je},we.props.style)}:{})):we})},[r,I,o,A,S,E,re,h]);return be.createElement("div",{id:L?"".concat(L):void 0,className:Fr("recharts-responsive-container",N),style:v0(v0({},U),{},{width:h,height:o,minWidth:E,minHeight:S,maxHeight:A}),ref:W},fe)}),QI=function(t){return null};QI.displayName="Cell";function fv(e){"@babel/helpers - typeof";return fv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fv(e)}function Lz(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function sC(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Lz(Object(r),!0).forEach(function(n){ime(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Lz(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ime(e,t,r){return t=ome(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ome(e){var t=ame(e,"string");return fv(t)=="symbol"?t:t+""}function ame(e,t){if(fv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(fv(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var wf={widthCache:{},cacheCount:0},sme=2e3,lme={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},jz="recharts_measurement_span";function cme(e){var t=sC({},e);return Object.keys(t).forEach(function(r){t[r]||delete t[r]}),t}var Dy=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||Zl.isSsr)return{width:0,height:0};var n=cme(r),s=JSON.stringify({text:t,copyStyle:n});if(wf.widthCache[s])return wf.widthCache[s];try{var u=document.getElementById(jz);u||(u=document.createElement("span"),u.setAttribute("id",jz),u.setAttribute("aria-hidden","true"),document.body.appendChild(u));var h=sC(sC({},lme),n);Object.assign(u.style,h),u.textContent="".concat(t);var m=u.getBoundingClientRect(),o={width:m.width,height:m.height};return wf.widthCache[s]=o,++wf.cacheCount>sme&&(wf.cacheCount=0,wf.widthCache={}),o}catch{return{width:0,height:0}}},ume=function(t){return{top:t.top+window.scrollY-document.documentElement.clientTop,left:t.left+window.scrollX-document.documentElement.clientLeft}};function pv(e){"@babel/helpers - typeof";return pv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pv(e)}function Gb(e,t){return pme(e)||fme(e,t)||hme(e,t)||dme()}function dme(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function hme(e,t){if(e){if(typeof e=="string")return zz(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return zz(e,t)}}function zz(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function fme(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,u,h,m=[],o=!0,_=!1;try{if(u=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;o=!1}else for(;!(o=(n=u.call(r)).done)&&(m.push(n.value),m.length!==t);o=!0);}catch(E){_=!0,s=E}finally{try{if(!o&&r.return!=null&&(h=r.return(),Object(h)!==h))return}finally{if(_)throw s}}return m}}function pme(e){if(Array.isArray(e))return e}function mme(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Nz(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,yme(n.key),n)}}function gme(e,t,r){return t&&Nz(e.prototype,t),r&&Nz(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function yme(e){var t=vme(e,"string");return pv(t)=="symbol"?t:t+""}function vme(e,t){if(pv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(pv(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Bz=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,$z=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,_me=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,xme=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,hV={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},bme=Object.keys(hV),Ff="NaN";function wme(e,t){return e*hV[t]}var _0=function(){function e(t,r){mme(this,e),this.num=t,this.unit=r,this.num=t,this.unit=r,Number.isNaN(t)&&(this.unit=""),r!==""&&!_me.test(r)&&(this.num=NaN,this.unit=""),bme.includes(r)&&(this.num=wme(t,r),this.unit="px")}return gme(e,[{key:"add",value:function(r){return this.unit!==r.unit?new e(NaN,""):new e(this.num+r.num,this.unit)}},{key:"subtract",value:function(r){return this.unit!==r.unit?new e(NaN,""):new e(this.num-r.num,this.unit)}},{key:"multiply",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new e(NaN,""):new e(this.num*r.num,this.unit||r.unit)}},{key:"divide",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new e(NaN,""):new e(this.num/r.num,this.unit||r.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(r){var n,s=(n=xme.exec(r))!==null&&n!==void 0?n:[],u=Gb(s,3),h=u[1],m=u[2];return new e(parseFloat(h),m??"")}}])}();function fV(e){if(e.includes(Ff))return Ff;for(var t=e;t.includes("*")||t.includes("/");){var r,n=(r=Bz.exec(t))!==null&&r!==void 0?r:[],s=Gb(n,4),u=s[1],h=s[2],m=s[3],o=_0.parse(u??""),_=_0.parse(m??""),E=h==="*"?o.multiply(_):o.divide(_);if(E.isNaN())return Ff;t=t.replace(Bz,E.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var S,A=(S=$z.exec(t))!==null&&S!==void 0?S:[],I=Gb(A,4),R=I[1],k=I[2],L=I[3],N=_0.parse(R??""),z=_0.parse(L??""),F=k==="+"?N.add(z):N.subtract(z);if(F.isNaN())return Ff;t=t.replace($z,F.toString())}return t}var Fz=/\(([^()]*)\)/;function Sme(e){for(var t=e;t.includes("(");){var r=Fz.exec(t),n=Gb(r,2),s=n[1];t=t.replace(Fz,fV(s))}return t}function Eme(e){var t=e.replace(/\s+/g,"");return t=Sme(t),t=fV(t),t}function Tme(e){try{return Eme(e)}catch{return Ff}}function HT(e){var t=Tme(e.slice(5,-1));return t===Ff?"":t}var Ame=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],Pme=["dx","dy","angle","className","breakAll"];function lC(){return lC=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},lC.apply(this,arguments)}function Uz(e,t){if(e==null)return{};var r=Cme(e,t),n,s;if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(e);for(s=0;s<u.length;s++)n=u[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Cme(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function Vz(e,t){return kme(e)||Ome(e,t)||Ime(e,t)||Mme()}function Mme(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ime(e,t){if(e){if(typeof e=="string")return Gz(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Gz(e,t)}}function Gz(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Ome(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,u,h,m=[],o=!0,_=!1;try{if(u=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;o=!1}else for(;!(o=(n=u.call(r)).done)&&(m.push(n.value),m.length!==t);o=!0);}catch(E){_=!0,s=E}finally{try{if(!o&&r.return!=null&&(h=r.return(),Object(h)!==h))return}finally{if(_)throw s}}return m}}function kme(e){if(Array.isArray(e))return e}var pV=/[ \f\n\r\t\v\u2028\u2029]+/,mV=function(t){var r=t.children,n=t.breakAll,s=t.style;try{var u=[];Mr(r)||(n?u=r.toString().split(""):u=r.toString().split(pV));var h=u.map(function(o){return{word:o,width:Dy(o,s).width}}),m=n?0:Dy(" ",s).width;return{wordsWithComputedWidth:h,spaceWidth:m}}catch{return null}},Dme=function(t,r,n,s,u){var h=t.maxLines,m=t.children,o=t.style,_=t.breakAll,E=Vt(h),S=m,A=function(){var je=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return je.reduce(function(Le,Ue){var we=Ue.word,Pe=Ue.width,rt=Le[Le.length-1];if(rt&&(s==null||u||rt.width+Pe+n<Number(s)))rt.words.push(we),rt.width+=Pe+n;else{var $e={words:[we],width:Pe};Le.push($e)}return Le},[])},I=A(r),R=function(je){return je.reduce(function(Le,Ue){return Le.width>Ue.width?Le:Ue})};if(!E)return I;for(var k="…",L=function(je){var Le=S.slice(0,je),Ue=mV({breakAll:_,style:o,children:Le+k}).wordsWithComputedWidth,we=A(Ue),Pe=we.length>h||R(we).width>Number(s);return[Pe,we]},N=0,z=S.length-1,F=0,U;N<=z&&F<=S.length-1;){var W=Math.floor((N+z)/2),Y=W-1,Q=L(Y),Z=Vz(Q,2),re=Z[0],ne=Z[1],ue=L(W),fe=Vz(ue,1),Ee=fe[0];if(!re&&!Ee&&(N=W+1),re&&Ee&&(z=W-1),!re&&Ee){U=ne;break}F++}return U||I},Wz=function(t){var r=Mr(t)?[]:t.toString().split(pV);return[{words:r}]},Rme=function(t){var r=t.width,n=t.scaleToFit,s=t.children,u=t.style,h=t.breakAll,m=t.maxLines;if((r||n)&&!Zl.isSsr){var o,_,E=mV({breakAll:h,children:s,style:u});if(E){var S=E.wordsWithComputedWidth,A=E.spaceWidth;o=S,_=A}else return Wz(s);return Dme({breakAll:h,children:s,maxLines:m,style:u},o,_,r,n)}return Wz(s)},qz="#808080",Wb=function(t){var r=t.x,n=r===void 0?0:r,s=t.y,u=s===void 0?0:s,h=t.lineHeight,m=h===void 0?"1em":h,o=t.capHeight,_=o===void 0?"0.71em":o,E=t.scaleToFit,S=E===void 0?!1:E,A=t.textAnchor,I=A===void 0?"start":A,R=t.verticalAnchor,k=R===void 0?"end":R,L=t.fill,N=L===void 0?qz:L,z=Uz(t,Ame),F=V.useMemo(function(){return Rme({breakAll:z.breakAll,children:z.children,maxLines:z.maxLines,scaleToFit:S,style:z.style,width:z.width})},[z.breakAll,z.children,z.maxLines,S,z.style,z.width]),U=z.dx,W=z.dy,Y=z.angle,Q=z.className,Z=z.breakAll,re=Uz(z,Pme);if(!Si(n)||!Si(u))return null;var ne=n+(Vt(U)?U:0),ue=u+(Vt(W)?W:0),fe;switch(k){case"start":fe=HT("calc(".concat(_,")"));break;case"middle":fe=HT("calc(".concat((F.length-1)/2," * -").concat(m," + (").concat(_," / 2))"));break;default:fe=HT("calc(".concat(F.length-1," * -").concat(m,")"));break}var Ee=[];if(S){var Se=F[0].width,je=z.width;Ee.push("scale(".concat((Vt(je)?je/Se:1)/Se,")"))}return Y&&Ee.push("rotate(".concat(Y,", ").concat(ne,", ").concat(ue,")")),Ee.length&&(re.transform=Ee.join(" ")),be.createElement("text",lC({},Br(re,!0),{x:ne,y:ue,className:Fr("recharts-text",Q),textAnchor:I,fill:N.includes("url")?qz:N}),F.map(function(Le,Ue){var we=Le.words.join(Z?"":" ");return be.createElement("tspan",{x:ne,dy:Ue===0?fe:m,key:"".concat(we,"-").concat(Ue)},we)}))};function xu(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Lme(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function eO(e){let t,r,n;e.length!==2?(t=xu,r=(m,o)=>xu(e(m),o),n=(m,o)=>e(m)-o):(t=e===xu||e===Lme?e:jme,r=e,n=e);function s(m,o,_=0,E=m.length){if(_<E){if(t(o,o)!==0)return E;do{const S=_+E>>>1;r(m[S],o)<0?_=S+1:E=S}while(_<E)}return _}function u(m,o,_=0,E=m.length){if(_<E){if(t(o,o)!==0)return E;do{const S=_+E>>>1;r(m[S],o)<=0?_=S+1:E=S}while(_<E)}return _}function h(m,o,_=0,E=m.length){const S=s(m,o,_,E-1);return S>_&&n(m[S-1],o)>-n(m[S],o)?S-1:S}return{left:s,center:h,right:u}}function jme(){return 0}function gV(e){return e===null?NaN:+e}function*zme(e,t){for(let r of e)r!=null&&(r=+r)>=r&&(yield r)}const Nme=eO(xu),u_=Nme.right;eO(gV).center;class Hz extends Map{constructor(t,r=Fme){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(const[n,s]of t)this.set(n,s)}get(t){return super.get(Xz(this,t))}has(t){return super.has(Xz(this,t))}set(t,r){return super.set(Bme(this,t),r)}delete(t){return super.delete($me(this,t))}}function Xz({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):r}function Bme({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):(e.set(n,r),r)}function $me({_intern:e,_key:t},r){const n=t(r);return e.has(n)&&(r=e.get(n),e.delete(n)),r}function Fme(e){return e!==null&&typeof e=="object"?e.valueOf():e}function Ume(e=xu){if(e===xu)return yV;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,r)=>{const n=e(t,r);return n||n===0?n:(e(r,r)===0)-(e(t,t)===0)}}function yV(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const Vme=Math.sqrt(50),Gme=Math.sqrt(10),Wme=Math.sqrt(2);function qb(e,t,r){const n=(t-e)/Math.max(0,r),s=Math.floor(Math.log10(n)),u=n/Math.pow(10,s),h=u>=Vme?10:u>=Gme?5:u>=Wme?2:1;let m,o,_;return s<0?(_=Math.pow(10,-s)/h,m=Math.round(e*_),o=Math.round(t*_),m/_<e&&++m,o/_>t&&--o,_=-_):(_=Math.pow(10,s)*h,m=Math.round(e/_),o=Math.round(t/_),m*_<e&&++m,o*_>t&&--o),o<m&&.5<=r&&r<2?qb(e,t,r*2):[m,o,_]}function cC(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];const n=t<e,[s,u,h]=n?qb(t,e,r):qb(e,t,r);if(!(u>=s))return[];const m=u-s+1,o=new Array(m);if(n)if(h<0)for(let _=0;_<m;++_)o[_]=(u-_)/-h;else for(let _=0;_<m;++_)o[_]=(u-_)*h;else if(h<0)for(let _=0;_<m;++_)o[_]=(s+_)/-h;else for(let _=0;_<m;++_)o[_]=(s+_)*h;return o}function uC(e,t,r){return t=+t,e=+e,r=+r,qb(e,t,r)[2]}function dC(e,t,r){t=+t,e=+e,r=+r;const n=t<e,s=n?uC(t,e,r):uC(e,t,r);return(n?-1:1)*(s<0?1/-s:s)}function Zz(e,t){let r;for(const n of e)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function Kz(e,t){let r;for(const n of e)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function vV(e,t,r=0,n=1/0,s){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(e.length-1,n)),!(r<=t&&t<=n))return e;for(s=s===void 0?yV:Ume(s);n>r;){if(n-r>600){const o=n-r+1,_=t-r+1,E=Math.log(o),S=.5*Math.exp(2*E/3),A=.5*Math.sqrt(E*S*(o-S)/o)*(_-o/2<0?-1:1),I=Math.max(r,Math.floor(t-_*S/o+A)),R=Math.min(n,Math.floor(t+(o-_)*S/o+A));vV(e,t,I,R,s)}const u=e[t];let h=r,m=n;for(iy(e,r,t),s(e[n],u)>0&&iy(e,r,n);h<m;){for(iy(e,h,m),++h,--m;s(e[h],u)<0;)++h;for(;s(e[m],u)>0;)--m}s(e[r],u)===0?iy(e,r,m):(++m,iy(e,m,n)),m<=t&&(r=m+1),t<=m&&(n=m-1)}return e}function iy(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function qme(e,t,r){if(e=Float64Array.from(zme(e)),!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return Kz(e);if(t>=1)return Zz(e);var n,s=(n-1)*t,u=Math.floor(s),h=Zz(vV(e,u).subarray(0,u+1)),m=Kz(e.subarray(u+1));return h+(m-h)*(s-u)}}function Hme(e,t,r=gV){if(!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return+r(e[0],0,e);if(t>=1)return+r(e[n-1],n-1,e);var n,s=(n-1)*t,u=Math.floor(s),h=+r(e[u],u,e),m=+r(e[u+1],u+1,e);return h+(m-h)*(s-u)}}function Xme(e,t,r){e=+e,t=+t,r=(s=arguments.length)<2?(t=e,e=0,1):s<3?1:+r;for(var n=-1,s=Math.max(0,Math.ceil((t-e)/r))|0,u=new Array(s);++n<s;)u[n]=e+n*r;return u}function Xa(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function dc(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const hC=Symbol("implicit");function tO(){var e=new Hz,t=[],r=[],n=hC;function s(u){let h=e.get(u);if(h===void 0){if(n!==hC)return n;e.set(u,h=t.push(u)-1)}return r[h%r.length]}return s.domain=function(u){if(!arguments.length)return t.slice();t=[],e=new Hz;for(const h of u)e.has(h)||e.set(h,t.push(h)-1);return s},s.range=function(u){return arguments.length?(r=Array.from(u),s):r.slice()},s.unknown=function(u){return arguments.length?(n=u,s):n},s.copy=function(){return tO(t,r).unknown(n)},Xa.apply(s,arguments),s}function mv(){var e=tO().unknown(void 0),t=e.domain,r=e.range,n=0,s=1,u,h,m=!1,o=0,_=0,E=.5;delete e.unknown;function S(){var A=t().length,I=s<n,R=I?s:n,k=I?n:s;u=(k-R)/Math.max(1,A-o+_*2),m&&(u=Math.floor(u)),R+=(k-R-u*(A-o))*E,h=u*(1-o),m&&(R=Math.round(R),h=Math.round(h));var L=Xme(A).map(function(N){return R+u*N});return r(I?L.reverse():L)}return e.domain=function(A){return arguments.length?(t(A),S()):t()},e.range=function(A){return arguments.length?([n,s]=A,n=+n,s=+s,S()):[n,s]},e.rangeRound=function(A){return[n,s]=A,n=+n,s=+s,m=!0,S()},e.bandwidth=function(){return h},e.step=function(){return u},e.round=function(A){return arguments.length?(m=!!A,S()):m},e.padding=function(A){return arguments.length?(o=Math.min(1,_=+A),S()):o},e.paddingInner=function(A){return arguments.length?(o=Math.min(1,A),S()):o},e.paddingOuter=function(A){return arguments.length?(_=+A,S()):_},e.align=function(A){return arguments.length?(E=Math.max(0,Math.min(1,A)),S()):E},e.copy=function(){return mv(t(),[n,s]).round(m).paddingInner(o).paddingOuter(_).align(E)},Xa.apply(S(),arguments)}function _V(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return _V(t())},e}function Ry(){return _V(mv.apply(null,arguments).paddingInner(1))}function rO(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function xV(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function d_(){}var gv=.7,Hb=1/gv,tp="\\s*([+-]?\\d+)\\s*",yv="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",cl="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Zme=/^#([0-9a-f]{3,8})$/,Kme=new RegExp(`^rgb\\(${tp},${tp},${tp}\\)$`),Yme=new RegExp(`^rgb\\(${cl},${cl},${cl}\\)$`),Jme=new RegExp(`^rgba\\(${tp},${tp},${tp},${yv}\\)$`),Qme=new RegExp(`^rgba\\(${cl},${cl},${cl},${yv}\\)$`),ege=new RegExp(`^hsl\\(${yv},${cl},${cl}\\)$`),tge=new RegExp(`^hsla\\(${yv},${cl},${cl},${yv}\\)$`),Yz={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};rO(d_,vv,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Jz,formatHex:Jz,formatHex8:rge,formatHsl:nge,formatRgb:Qz,toString:Qz});function Jz(){return this.rgb().formatHex()}function rge(){return this.rgb().formatHex8()}function nge(){return bV(this).formatHsl()}function Qz(){return this.rgb().formatRgb()}function vv(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=Zme.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?eN(t):r===3?new Bo(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?x0(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?x0(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Kme.exec(e))?new Bo(t[1],t[2],t[3],1):(t=Yme.exec(e))?new Bo(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Jme.exec(e))?x0(t[1],t[2],t[3],t[4]):(t=Qme.exec(e))?x0(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=ege.exec(e))?nN(t[1],t[2]/100,t[3]/100,1):(t=tge.exec(e))?nN(t[1],t[2]/100,t[3]/100,t[4]):Yz.hasOwnProperty(e)?eN(Yz[e]):e==="transparent"?new Bo(NaN,NaN,NaN,0):null}function eN(e){return new Bo(e>>16&255,e>>8&255,e&255,1)}function x0(e,t,r,n){return n<=0&&(e=t=r=NaN),new Bo(e,t,r,n)}function ige(e){return e instanceof d_||(e=vv(e)),e?(e=e.rgb(),new Bo(e.r,e.g,e.b,e.opacity)):new Bo}function fC(e,t,r,n){return arguments.length===1?ige(e):new Bo(e,t,r,n??1)}function Bo(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}rO(Bo,fC,xV(d_,{brighter(e){return e=e==null?Hb:Math.pow(Hb,e),new Bo(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?gv:Math.pow(gv,e),new Bo(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Bo(Kd(this.r),Kd(this.g),Kd(this.b),Xb(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:tN,formatHex:tN,formatHex8:oge,formatRgb:rN,toString:rN}));function tN(){return`#${$d(this.r)}${$d(this.g)}${$d(this.b)}`}function oge(){return`#${$d(this.r)}${$d(this.g)}${$d(this.b)}${$d((isNaN(this.opacity)?1:this.opacity)*255)}`}function rN(){const e=Xb(this.opacity);return`${e===1?"rgb(":"rgba("}${Kd(this.r)}, ${Kd(this.g)}, ${Kd(this.b)}${e===1?")":`, ${e})`}`}function Xb(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Kd(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function $d(e){return e=Kd(e),(e<16?"0":"")+e.toString(16)}function nN(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new As(e,t,r,n)}function bV(e){if(e instanceof As)return new As(e.h,e.s,e.l,e.opacity);if(e instanceof d_||(e=vv(e)),!e)return new As;if(e instanceof As)return e;e=e.rgb();var t=e.r/255,r=e.g/255,n=e.b/255,s=Math.min(t,r,n),u=Math.max(t,r,n),h=NaN,m=u-s,o=(u+s)/2;return m?(t===u?h=(r-n)/m+(r<n)*6:r===u?h=(n-t)/m+2:h=(t-r)/m+4,m/=o<.5?u+s:2-u-s,h*=60):m=o>0&&o<1?0:h,new As(h,m,o,e.opacity)}function age(e,t,r,n){return arguments.length===1?bV(e):new As(e,t,r,n??1)}function As(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}rO(As,age,xV(d_,{brighter(e){return e=e==null?Hb:Math.pow(Hb,e),new As(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?gv:Math.pow(gv,e),new As(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,s=2*r-n;return new Bo(XT(e>=240?e-240:e+120,s,n),XT(e,s,n),XT(e<120?e+240:e-120,s,n),this.opacity)},clamp(){return new As(iN(this.h),b0(this.s),b0(this.l),Xb(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Xb(this.opacity);return`${e===1?"hsl(":"hsla("}${iN(this.h)}, ${b0(this.s)*100}%, ${b0(this.l)*100}%${e===1?")":`, ${e})`}`}}));function iN(e){return e=(e||0)%360,e<0?e+360:e}function b0(e){return Math.max(0,Math.min(1,e||0))}function XT(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const nO=e=>()=>e;function sge(e,t){return function(r){return e+r*t}}function lge(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}function cge(e){return(e=+e)==1?wV:function(t,r){return r-t?lge(t,r,e):nO(isNaN(t)?r:t)}}function wV(e,t){var r=t-e;return r?sge(e,r):nO(isNaN(e)?t:e)}const oN=function e(t){var r=cge(t);function n(s,u){var h=r((s=fC(s)).r,(u=fC(u)).r),m=r(s.g,u.g),o=r(s.b,u.b),_=wV(s.opacity,u.opacity);return function(E){return s.r=h(E),s.g=m(E),s.b=o(E),s.opacity=_(E),s+""}}return n.gamma=e,n}(1);function uge(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,n=t.slice(),s;return function(u){for(s=0;s<r;++s)n[s]=e[s]*(1-u)+t[s]*u;return n}}function dge(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function hge(e,t){var r=t?t.length:0,n=e?Math.min(r,e.length):0,s=new Array(n),u=new Array(r),h;for(h=0;h<n;++h)s[h]=um(e[h],t[h]);for(;h<r;++h)u[h]=t[h];return function(m){for(h=0;h<n;++h)u[h]=s[h](m);return u}}function fge(e,t){var r=new Date;return e=+e,t=+t,function(n){return r.setTime(e*(1-n)+t*n),r}}function Zb(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function pge(e,t){var r={},n={},s;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(s in t)s in e?r[s]=um(e[s],t[s]):n[s]=t[s];return function(u){for(s in r)n[s]=r[s](u);return n}}var pC=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ZT=new RegExp(pC.source,"g");function mge(e){return function(){return e}}function gge(e){return function(t){return e(t)+""}}function yge(e,t){var r=pC.lastIndex=ZT.lastIndex=0,n,s,u,h=-1,m=[],o=[];for(e=e+"",t=t+"";(n=pC.exec(e))&&(s=ZT.exec(t));)(u=s.index)>r&&(u=t.slice(r,u),m[h]?m[h]+=u:m[++h]=u),(n=n[0])===(s=s[0])?m[h]?m[h]+=s:m[++h]=s:(m[++h]=null,o.push({i:h,x:Zb(n,s)})),r=ZT.lastIndex;return r<t.length&&(u=t.slice(r),m[h]?m[h]+=u:m[++h]=u),m.length<2?o[0]?gge(o[0].x):mge(t):(t=o.length,function(_){for(var E=0,S;E<t;++E)m[(S=o[E]).i]=S.x(_);return m.join("")})}function um(e,t){var r=typeof t,n;return t==null||r==="boolean"?nO(t):(r==="number"?Zb:r==="string"?(n=vv(t))?(t=n,oN):yge:t instanceof vv?oN:t instanceof Date?fge:dge(t)?uge:Array.isArray(t)?hge:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?pge:Zb)(e,t)}function iO(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}function vge(e,t){t===void 0&&(t=e,e=um);for(var r=0,n=t.length-1,s=t[0],u=new Array(n<0?0:n);r<n;)u[r]=e(s,s=t[++r]);return function(h){var m=Math.max(0,Math.min(n-1,Math.floor(h*=n)));return u[m](h-m)}}function _ge(e){return function(){return e}}function Kb(e){return+e}var aN=[0,1];function yo(e){return e}function mC(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:_ge(isNaN(t)?NaN:.5)}function xge(e,t){var r;return e>t&&(r=e,e=t,t=r),function(n){return Math.max(e,Math.min(t,n))}}function bge(e,t,r){var n=e[0],s=e[1],u=t[0],h=t[1];return s<n?(n=mC(s,n),u=r(h,u)):(n=mC(n,s),u=r(u,h)),function(m){return u(n(m))}}function wge(e,t,r){var n=Math.min(e.length,t.length)-1,s=new Array(n),u=new Array(n),h=-1;for(e[n]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++h<n;)s[h]=mC(e[h],e[h+1]),u[h]=r(t[h],t[h+1]);return function(m){var o=u_(e,m,1,n)-1;return u[o](s[o](m))}}function h_(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Gw(){var e=aN,t=aN,r=um,n,s,u,h=yo,m,o,_;function E(){var A=Math.min(e.length,t.length);return h!==yo&&(h=xge(e[0],e[A-1])),m=A>2?wge:bge,o=_=null,S}function S(A){return A==null||isNaN(A=+A)?u:(o||(o=m(e.map(n),t,r)))(n(h(A)))}return S.invert=function(A){return h(s((_||(_=m(t,e.map(n),Zb)))(A)))},S.domain=function(A){return arguments.length?(e=Array.from(A,Kb),E()):e.slice()},S.range=function(A){return arguments.length?(t=Array.from(A),E()):t.slice()},S.rangeRound=function(A){return t=Array.from(A),r=iO,E()},S.clamp=function(A){return arguments.length?(h=A?!0:yo,E()):h!==yo},S.interpolate=function(A){return arguments.length?(r=A,E()):r},S.unknown=function(A){return arguments.length?(u=A,S):u},function(A,I){return n=A,s=I,E()}}function oO(){return Gw()(yo,yo)}function Sge(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Yb(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}function Mp(e){return e=Yb(Math.abs(e)),e?e[1]:NaN}function Ege(e,t){return function(r,n){for(var s=r.length,u=[],h=0,m=e[0],o=0;s>0&&m>0&&(o+m+1>n&&(m=Math.max(1,n-o)),u.push(r.substring(s-=m,s+m)),!((o+=m+1)>n));)m=e[h=(h+1)%e.length];return u.reverse().join(t)}}function Tge(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var Age=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function _v(e){if(!(t=Age.exec(e)))throw new Error("invalid format: "+e);var t;return new aO({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}_v.prototype=aO.prototype;function aO(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}aO.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Pge(e){e:for(var t=e.length,r=1,n=-1,s;r<t;++r)switch(e[r]){case".":n=s=r;break;case"0":n===0&&(n=r),s=r;break;default:if(!+e[r])break e;n>0&&(n=0);break}return n>0?e.slice(0,n)+e.slice(s+1):e}var SV;function Cge(e,t){var r=Yb(e,t);if(!r)return e+"";var n=r[0],s=r[1],u=s-(SV=Math.max(-8,Math.min(8,Math.floor(s/3)))*3)+1,h=n.length;return u===h?n:u>h?n+new Array(u-h+1).join("0"):u>0?n.slice(0,u)+"."+n.slice(u):"0."+new Array(1-u).join("0")+Yb(e,Math.max(0,t+u-1))[0]}function sN(e,t){var r=Yb(e,t);if(!r)return e+"";var n=r[0],s=r[1];return s<0?"0."+new Array(-s).join("0")+n:n.length>s+1?n.slice(0,s+1)+"."+n.slice(s+1):n+new Array(s-n.length+2).join("0")}const lN={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:Sge,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>sN(e*100,t),r:sN,s:Cge,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function cN(e){return e}var uN=Array.prototype.map,dN=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function Mge(e){var t=e.grouping===void 0||e.thousands===void 0?cN:Ege(uN.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",n=e.currency===void 0?"":e.currency[1]+"",s=e.decimal===void 0?".":e.decimal+"",u=e.numerals===void 0?cN:Tge(uN.call(e.numerals,String)),h=e.percent===void 0?"%":e.percent+"",m=e.minus===void 0?"−":e.minus+"",o=e.nan===void 0?"NaN":e.nan+"";function _(S){S=_v(S);var A=S.fill,I=S.align,R=S.sign,k=S.symbol,L=S.zero,N=S.width,z=S.comma,F=S.precision,U=S.trim,W=S.type;W==="n"?(z=!0,W="g"):lN[W]||(F===void 0&&(F=12),U=!0,W="g"),(L||A==="0"&&I==="=")&&(L=!0,A="0",I="=");var Y=k==="$"?r:k==="#"&&/[boxX]/.test(W)?"0"+W.toLowerCase():"",Q=k==="$"?n:/[%p]/.test(W)?h:"",Z=lN[W],re=/[defgprs%]/.test(W);F=F===void 0?6:/[gprs]/.test(W)?Math.max(1,Math.min(21,F)):Math.max(0,Math.min(20,F));function ne(ue){var fe=Y,Ee=Q,Se,je,Le;if(W==="c")Ee=Z(ue)+Ee,ue="";else{ue=+ue;var Ue=ue<0||1/ue<0;if(ue=isNaN(ue)?o:Z(Math.abs(ue),F),U&&(ue=Pge(ue)),Ue&&+ue==0&&R!=="+"&&(Ue=!1),fe=(Ue?R==="("?R:m:R==="-"||R==="("?"":R)+fe,Ee=(W==="s"?dN[8+SV/3]:"")+Ee+(Ue&&R==="("?")":""),re){for(Se=-1,je=ue.length;++Se<je;)if(Le=ue.charCodeAt(Se),48>Le||Le>57){Ee=(Le===46?s+ue.slice(Se+1):ue.slice(Se))+Ee,ue=ue.slice(0,Se);break}}}z&&!L&&(ue=t(ue,1/0));var we=fe.length+ue.length+Ee.length,Pe=we<N?new Array(N-we+1).join(A):"";switch(z&&L&&(ue=t(Pe+ue,Pe.length?N-Ee.length:1/0),Pe=""),I){case"<":ue=fe+ue+Ee+Pe;break;case"=":ue=fe+Pe+ue+Ee;break;case"^":ue=Pe.slice(0,we=Pe.length>>1)+fe+ue+Ee+Pe.slice(we);break;default:ue=Pe+fe+ue+Ee;break}return u(ue)}return ne.toString=function(){return S+""},ne}function E(S,A){var I=_((S=_v(S),S.type="f",S)),R=Math.max(-8,Math.min(8,Math.floor(Mp(A)/3)))*3,k=Math.pow(10,-R),L=dN[8+R/3];return function(N){return I(k*N)+L}}return{format:_,formatPrefix:E}}var w0,sO,EV;Ige({thousands:",",grouping:[3],currency:["$",""]});function Ige(e){return w0=Mge(e),sO=w0.format,EV=w0.formatPrefix,w0}function Oge(e){return Math.max(0,-Mp(Math.abs(e)))}function kge(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Mp(t)/3)))*3-Mp(Math.abs(e)))}function Dge(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Mp(t)-Mp(e))+1}function TV(e,t,r,n){var s=dC(e,t,r),u;switch(n=_v(n??",f"),n.type){case"s":{var h=Math.max(Math.abs(e),Math.abs(t));return n.precision==null&&!isNaN(u=kge(s,h))&&(n.precision=u),EV(n,h)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(u=Dge(s,Math.max(Math.abs(e),Math.abs(t))))&&(n.precision=u-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(u=Oge(s))&&(n.precision=u-(n.type==="%")*2);break}}return sO(n)}function Bu(e){var t=e.domain;return e.ticks=function(r){var n=t();return cC(n[0],n[n.length-1],r??10)},e.tickFormat=function(r,n){var s=t();return TV(s[0],s[s.length-1],r??10,n)},e.nice=function(r){r==null&&(r=10);var n=t(),s=0,u=n.length-1,h=n[s],m=n[u],o,_,E=10;for(m<h&&(_=h,h=m,m=_,_=s,s=u,u=_);E-- >0;){if(_=uC(h,m,r),_===o)return n[s]=h,n[u]=m,t(n);if(_>0)h=Math.floor(h/_)*_,m=Math.ceil(m/_)*_;else if(_<0)h=Math.ceil(h*_)/_,m=Math.floor(m*_)/_;else break;o=_}return e},e}function Jb(){var e=oO();return e.copy=function(){return h_(e,Jb())},Xa.apply(e,arguments),Bu(e)}function AV(e){var t;function r(n){return n==null||isNaN(n=+n)?t:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(e=Array.from(n,Kb),r):e.slice()},r.unknown=function(n){return arguments.length?(t=n,r):t},r.copy=function(){return AV(e).unknown(t)},e=arguments.length?Array.from(e,Kb):[0,1],Bu(r)}function PV(e,t){e=e.slice();var r=0,n=e.length-1,s=e[r],u=e[n],h;return u<s&&(h=r,r=n,n=h,h=s,s=u,u=h),e[r]=t.floor(s),e[n]=t.ceil(u),e}function hN(e){return Math.log(e)}function fN(e){return Math.exp(e)}function Rge(e){return-Math.log(-e)}function Lge(e){return-Math.exp(-e)}function jge(e){return isFinite(e)?+("1e"+e):e<0?0:e}function zge(e){return e===10?jge:e===Math.E?Math.exp:t=>Math.pow(e,t)}function Nge(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function pN(e){return(t,r)=>-e(-t,r)}function lO(e){const t=e(hN,fN),r=t.domain;let n=10,s,u;function h(){return s=Nge(n),u=zge(n),r()[0]<0?(s=pN(s),u=pN(u),e(Rge,Lge)):e(hN,fN),t}return t.base=function(m){return arguments.length?(n=+m,h()):n},t.domain=function(m){return arguments.length?(r(m),h()):r()},t.ticks=m=>{const o=r();let _=o[0],E=o[o.length-1];const S=E<_;S&&([_,E]=[E,_]);let A=s(_),I=s(E),R,k;const L=m==null?10:+m;let N=[];if(!(n%1)&&I-A<L){if(A=Math.floor(A),I=Math.ceil(I),_>0){for(;A<=I;++A)for(R=1;R<n;++R)if(k=A<0?R/u(-A):R*u(A),!(k<_)){if(k>E)break;N.push(k)}}else for(;A<=I;++A)for(R=n-1;R>=1;--R)if(k=A>0?R/u(-A):R*u(A),!(k<_)){if(k>E)break;N.push(k)}N.length*2<L&&(N=cC(_,E,L))}else N=cC(A,I,Math.min(I-A,L)).map(u);return S?N.reverse():N},t.tickFormat=(m,o)=>{if(m==null&&(m=10),o==null&&(o=n===10?"s":","),typeof o!="function"&&(!(n%1)&&(o=_v(o)).precision==null&&(o.trim=!0),o=sO(o)),m===1/0)return o;const _=Math.max(1,n*m/t.ticks().length);return E=>{let S=E/u(Math.round(s(E)));return S*n<n-.5&&(S*=n),S<=_?o(E):""}},t.nice=()=>r(PV(r(),{floor:m=>u(Math.floor(s(m))),ceil:m=>u(Math.ceil(s(m)))})),t}function CV(){const e=lO(Gw()).domain([1,10]);return e.copy=()=>h_(e,CV()).base(e.base()),Xa.apply(e,arguments),e}function mN(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function gN(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function cO(e){var t=1,r=e(mN(t),gN(t));return r.constant=function(n){return arguments.length?e(mN(t=+n),gN(t)):t},Bu(r)}function MV(){var e=cO(Gw());return e.copy=function(){return h_(e,MV()).constant(e.constant())},Xa.apply(e,arguments)}function yN(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function Bge(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function $ge(e){return e<0?-e*e:e*e}function uO(e){var t=e(yo,yo),r=1;function n(){return r===1?e(yo,yo):r===.5?e(Bge,$ge):e(yN(r),yN(1/r))}return t.exponent=function(s){return arguments.length?(r=+s,n()):r},Bu(t)}function dO(){var e=uO(Gw());return e.copy=function(){return h_(e,dO()).exponent(e.exponent())},Xa.apply(e,arguments),e}function Fge(){return dO.apply(null,arguments).exponent(.5)}function vN(e){return Math.sign(e)*e*e}function Uge(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function IV(){var e=oO(),t=[0,1],r=!1,n;function s(u){var h=Uge(e(u));return isNaN(h)?n:r?Math.round(h):h}return s.invert=function(u){return e.invert(vN(u))},s.domain=function(u){return arguments.length?(e.domain(u),s):e.domain()},s.range=function(u){return arguments.length?(e.range((t=Array.from(u,Kb)).map(vN)),s):t.slice()},s.rangeRound=function(u){return s.range(u).round(!0)},s.round=function(u){return arguments.length?(r=!!u,s):r},s.clamp=function(u){return arguments.length?(e.clamp(u),s):e.clamp()},s.unknown=function(u){return arguments.length?(n=u,s):n},s.copy=function(){return IV(e.domain(),t).round(r).clamp(e.clamp()).unknown(n)},Xa.apply(s,arguments),Bu(s)}function OV(){var e=[],t=[],r=[],n;function s(){var h=0,m=Math.max(1,t.length);for(r=new Array(m-1);++h<m;)r[h-1]=Hme(e,h/m);return u}function u(h){return h==null||isNaN(h=+h)?n:t[u_(r,h)]}return u.invertExtent=function(h){var m=t.indexOf(h);return m<0?[NaN,NaN]:[m>0?r[m-1]:e[0],m<r.length?r[m]:e[e.length-1]]},u.domain=function(h){if(!arguments.length)return e.slice();e=[];for(let m of h)m!=null&&!isNaN(m=+m)&&e.push(m);return e.sort(xu),s()},u.range=function(h){return arguments.length?(t=Array.from(h),s()):t.slice()},u.unknown=function(h){return arguments.length?(n=h,u):n},u.quantiles=function(){return r.slice()},u.copy=function(){return OV().domain(e).range(t).unknown(n)},Xa.apply(u,arguments)}function kV(){var e=0,t=1,r=1,n=[.5],s=[0,1],u;function h(o){return o!=null&&o<=o?s[u_(n,o,0,r)]:u}function m(){var o=-1;for(n=new Array(r);++o<r;)n[o]=((o+1)*t-(o-r)*e)/(r+1);return h}return h.domain=function(o){return arguments.length?([e,t]=o,e=+e,t=+t,m()):[e,t]},h.range=function(o){return arguments.length?(r=(s=Array.from(o)).length-1,m()):s.slice()},h.invertExtent=function(o){var _=s.indexOf(o);return _<0?[NaN,NaN]:_<1?[e,n[0]]:_>=r?[n[r-1],t]:[n[_-1],n[_]]},h.unknown=function(o){return arguments.length&&(u=o),h},h.thresholds=function(){return n.slice()},h.copy=function(){return kV().domain([e,t]).range(s).unknown(u)},Xa.apply(Bu(h),arguments)}function DV(){var e=[.5],t=[0,1],r,n=1;function s(u){return u!=null&&u<=u?t[u_(e,u,0,n)]:r}return s.domain=function(u){return arguments.length?(e=Array.from(u),n=Math.min(e.length,t.length-1),s):e.slice()},s.range=function(u){return arguments.length?(t=Array.from(u),n=Math.min(e.length,t.length-1),s):t.slice()},s.invertExtent=function(u){var h=t.indexOf(u);return[e[h-1],e[h]]},s.unknown=function(u){return arguments.length?(r=u,s):r},s.copy=function(){return DV().domain(e).range(t).unknown(r)},Xa.apply(s,arguments)}const KT=new Date,YT=new Date;function Ei(e,t,r,n){function s(u){return e(u=arguments.length===0?new Date:new Date(+u)),u}return s.floor=u=>(e(u=new Date(+u)),u),s.ceil=u=>(e(u=new Date(u-1)),t(u,1),e(u),u),s.round=u=>{const h=s(u),m=s.ceil(u);return u-h<m-u?h:m},s.offset=(u,h)=>(t(u=new Date(+u),h==null?1:Math.floor(h)),u),s.range=(u,h,m)=>{const o=[];if(u=s.ceil(u),m=m==null?1:Math.floor(m),!(u<h)||!(m>0))return o;let _;do o.push(_=new Date(+u)),t(u,m),e(u);while(_<u&&u<h);return o},s.filter=u=>Ei(h=>{if(h>=h)for(;e(h),!u(h);)h.setTime(h-1)},(h,m)=>{if(h>=h)if(m<0)for(;++m<=0;)for(;t(h,-1),!u(h););else for(;--m>=0;)for(;t(h,1),!u(h););}),r&&(s.count=(u,h)=>(KT.setTime(+u),YT.setTime(+h),e(KT),e(YT),Math.floor(r(KT,YT))),s.every=u=>(u=Math.floor(u),!isFinite(u)||!(u>0)?null:u>1?s.filter(n?h=>n(h)%u===0:h=>s.count(0,h)%u===0):s)),s}const Qb=Ei(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);Qb.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Ei(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):Qb);Qb.range;const Ul=1e3,za=Ul*60,Vl=za*60,ic=Vl*24,hO=ic*7,_N=ic*30,JT=ic*365,Fd=Ei(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Ul)},(e,t)=>(t-e)/Ul,e=>e.getUTCSeconds());Fd.range;const fO=Ei(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Ul)},(e,t)=>{e.setTime(+e+t*za)},(e,t)=>(t-e)/za,e=>e.getMinutes());fO.range;const pO=Ei(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*za)},(e,t)=>(t-e)/za,e=>e.getUTCMinutes());pO.range;const mO=Ei(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Ul-e.getMinutes()*za)},(e,t)=>{e.setTime(+e+t*Vl)},(e,t)=>(t-e)/Vl,e=>e.getHours());mO.range;const gO=Ei(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Vl)},(e,t)=>(t-e)/Vl,e=>e.getUTCHours());gO.range;const f_=Ei(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*za)/ic,e=>e.getDate()-1);f_.range;const Ww=Ei(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/ic,e=>e.getUTCDate()-1);Ww.range;const RV=Ei(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/ic,e=>Math.floor(e/ic));RV.range;function vh(e){return Ei(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,r)=>{t.setDate(t.getDate()+r*7)},(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*za)/hO)}const qw=vh(0),e1=vh(1),Vge=vh(2),Gge=vh(3),Ip=vh(4),Wge=vh(5),qge=vh(6);qw.range;e1.range;Vge.range;Gge.range;Ip.range;Wge.range;qge.range;function _h(e){return Ei(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r*7)},(t,r)=>(r-t)/hO)}const Hw=_h(0),t1=_h(1),Hge=_h(2),Xge=_h(3),Op=_h(4),Zge=_h(5),Kge=_h(6);Hw.range;t1.range;Hge.range;Xge.range;Op.range;Zge.range;Kge.range;const yO=Ei(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());yO.range;const vO=Ei(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());vO.range;const oc=Ei(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());oc.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Ei(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)});oc.range;const ac=Ei(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());ac.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Ei(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)});ac.range;function LV(e,t,r,n,s,u){const h=[[Fd,1,Ul],[Fd,5,5*Ul],[Fd,15,15*Ul],[Fd,30,30*Ul],[u,1,za],[u,5,5*za],[u,15,15*za],[u,30,30*za],[s,1,Vl],[s,3,3*Vl],[s,6,6*Vl],[s,12,12*Vl],[n,1,ic],[n,2,2*ic],[r,1,hO],[t,1,_N],[t,3,3*_N],[e,1,JT]];function m(_,E,S){const A=E<_;A&&([_,E]=[E,_]);const I=S&&typeof S.range=="function"?S:o(_,E,S),R=I?I.range(_,+E+1):[];return A?R.reverse():R}function o(_,E,S){const A=Math.abs(E-_)/S,I=eO(([,,L])=>L).right(h,A);if(I===h.length)return e.every(dC(_/JT,E/JT,S));if(I===0)return Qb.every(Math.max(dC(_,E,S),1));const[R,k]=h[A/h[I-1][2]<h[I][2]/A?I-1:I];return R.every(k)}return[m,o]}const[Yge,Jge]=LV(ac,vO,Hw,RV,gO,pO),[Qge,eye]=LV(oc,yO,qw,f_,mO,fO);function QT(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function eA(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function oy(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function tye(e){var t=e.dateTime,r=e.date,n=e.time,s=e.periods,u=e.days,h=e.shortDays,m=e.months,o=e.shortMonths,_=ay(s),E=sy(s),S=ay(u),A=sy(u),I=ay(h),R=sy(h),k=ay(m),L=sy(m),N=ay(o),z=sy(o),F={a:Ue,A:we,b:Pe,B:rt,c:null,d:TN,e:TN,f:Eye,g:Rye,G:jye,H:bye,I:wye,j:Sye,L:jV,m:Tye,M:Aye,p:$e,q:Ge,Q:CN,s:MN,S:Pye,u:Cye,U:Mye,V:Iye,w:Oye,W:kye,x:null,X:null,y:Dye,Y:Lye,Z:zye,"%":PN},U={a:Re,A:at,b:Et,B:vt,c:null,d:AN,e:AN,f:Fye,g:Yye,G:Qye,H:Nye,I:Bye,j:$ye,L:NV,m:Uye,M:Vye,p:lt,q:gt,Q:CN,s:MN,S:Gye,u:Wye,U:qye,V:Hye,w:Xye,W:Zye,x:null,X:null,y:Kye,Y:Jye,Z:eve,"%":PN},W={a:ne,A:ue,b:fe,B:Ee,c:Se,d:SN,e:SN,f:yye,g:wN,G:bN,H:EN,I:EN,j:fye,L:gye,m:hye,M:pye,p:re,q:dye,Q:_ye,s:xye,S:mye,u:aye,U:sye,V:lye,w:oye,W:cye,x:je,X:Le,y:wN,Y:bN,Z:uye,"%":vye};F.x=Y(r,F),F.X=Y(n,F),F.c=Y(t,F),U.x=Y(r,U),U.X=Y(n,U),U.c=Y(t,U);function Y(tt,ft){return function(ht){var Be=[],zt=-1,Ot=0,qt=tt.length,Pt,nr,tr;for(ht instanceof Date||(ht=new Date(+ht));++zt<qt;)tt.charCodeAt(zt)===37&&(Be.push(tt.slice(Ot,zt)),(nr=xN[Pt=tt.charAt(++zt)])!=null?Pt=tt.charAt(++zt):nr=Pt==="e"?" ":"0",(tr=ft[Pt])&&(Pt=tr(ht,nr)),Be.push(Pt),Ot=zt+1);return Be.push(tt.slice(Ot,zt)),Be.join("")}}function Q(tt,ft){return function(ht){var Be=oy(1900,void 0,1),zt=Z(Be,tt,ht+="",0),Ot,qt;if(zt!=ht.length)return null;if("Q"in Be)return new Date(Be.Q);if("s"in Be)return new Date(Be.s*1e3+("L"in Be?Be.L:0));if(ft&&!("Z"in Be)&&(Be.Z=0),"p"in Be&&(Be.H=Be.H%12+Be.p*12),Be.m===void 0&&(Be.m="q"in Be?Be.q:0),"V"in Be){if(Be.V<1||Be.V>53)return null;"w"in Be||(Be.w=1),"Z"in Be?(Ot=eA(oy(Be.y,0,1)),qt=Ot.getUTCDay(),Ot=qt>4||qt===0?t1.ceil(Ot):t1(Ot),Ot=Ww.offset(Ot,(Be.V-1)*7),Be.y=Ot.getUTCFullYear(),Be.m=Ot.getUTCMonth(),Be.d=Ot.getUTCDate()+(Be.w+6)%7):(Ot=QT(oy(Be.y,0,1)),qt=Ot.getDay(),Ot=qt>4||qt===0?e1.ceil(Ot):e1(Ot),Ot=f_.offset(Ot,(Be.V-1)*7),Be.y=Ot.getFullYear(),Be.m=Ot.getMonth(),Be.d=Ot.getDate()+(Be.w+6)%7)}else("W"in Be||"U"in Be)&&("w"in Be||(Be.w="u"in Be?Be.u%7:"W"in Be?1:0),qt="Z"in Be?eA(oy(Be.y,0,1)).getUTCDay():QT(oy(Be.y,0,1)).getDay(),Be.m=0,Be.d="W"in Be?(Be.w+6)%7+Be.W*7-(qt+5)%7:Be.w+Be.U*7-(qt+6)%7);return"Z"in Be?(Be.H+=Be.Z/100|0,Be.M+=Be.Z%100,eA(Be)):QT(Be)}}function Z(tt,ft,ht,Be){for(var zt=0,Ot=ft.length,qt=ht.length,Pt,nr;zt<Ot;){if(Be>=qt)return-1;if(Pt=ft.charCodeAt(zt++),Pt===37){if(Pt=ft.charAt(zt++),nr=W[Pt in xN?ft.charAt(zt++):Pt],!nr||(Be=nr(tt,ht,Be))<0)return-1}else if(Pt!=ht.charCodeAt(Be++))return-1}return Be}function re(tt,ft,ht){var Be=_.exec(ft.slice(ht));return Be?(tt.p=E.get(Be[0].toLowerCase()),ht+Be[0].length):-1}function ne(tt,ft,ht){var Be=I.exec(ft.slice(ht));return Be?(tt.w=R.get(Be[0].toLowerCase()),ht+Be[0].length):-1}function ue(tt,ft,ht){var Be=S.exec(ft.slice(ht));return Be?(tt.w=A.get(Be[0].toLowerCase()),ht+Be[0].length):-1}function fe(tt,ft,ht){var Be=N.exec(ft.slice(ht));return Be?(tt.m=z.get(Be[0].toLowerCase()),ht+Be[0].length):-1}function Ee(tt,ft,ht){var Be=k.exec(ft.slice(ht));return Be?(tt.m=L.get(Be[0].toLowerCase()),ht+Be[0].length):-1}function Se(tt,ft,ht){return Z(tt,t,ft,ht)}function je(tt,ft,ht){return Z(tt,r,ft,ht)}function Le(tt,ft,ht){return Z(tt,n,ft,ht)}function Ue(tt){return h[tt.getDay()]}function we(tt){return u[tt.getDay()]}function Pe(tt){return o[tt.getMonth()]}function rt(tt){return m[tt.getMonth()]}function $e(tt){return s[+(tt.getHours()>=12)]}function Ge(tt){return 1+~~(tt.getMonth()/3)}function Re(tt){return h[tt.getUTCDay()]}function at(tt){return u[tt.getUTCDay()]}function Et(tt){return o[tt.getUTCMonth()]}function vt(tt){return m[tt.getUTCMonth()]}function lt(tt){return s[+(tt.getUTCHours()>=12)]}function gt(tt){return 1+~~(tt.getUTCMonth()/3)}return{format:function(tt){var ft=Y(tt+="",F);return ft.toString=function(){return tt},ft},parse:function(tt){var ft=Q(tt+="",!1);return ft.toString=function(){return tt},ft},utcFormat:function(tt){var ft=Y(tt+="",U);return ft.toString=function(){return tt},ft},utcParse:function(tt){var ft=Q(tt+="",!0);return ft.toString=function(){return tt},ft}}}var xN={"-":"",_:" ",0:"0"},ji=/^\s*\d+/,rye=/^%/,nye=/[\\^$*+?|[\]().{}]/g;function Qr(e,t,r){var n=e<0?"-":"",s=(n?-e:e)+"",u=s.length;return n+(u<r?new Array(r-u+1).join(t)+s:s)}function iye(e){return e.replace(nye,"\\$&")}function ay(e){return new RegExp("^(?:"+e.map(iye).join("|")+")","i")}function sy(e){return new Map(e.map((t,r)=>[t.toLowerCase(),r]))}function oye(e,t,r){var n=ji.exec(t.slice(r,r+1));return n?(e.w=+n[0],r+n[0].length):-1}function aye(e,t,r){var n=ji.exec(t.slice(r,r+1));return n?(e.u=+n[0],r+n[0].length):-1}function sye(e,t,r){var n=ji.exec(t.slice(r,r+2));return n?(e.U=+n[0],r+n[0].length):-1}function lye(e,t,r){var n=ji.exec(t.slice(r,r+2));return n?(e.V=+n[0],r+n[0].length):-1}function cye(e,t,r){var n=ji.exec(t.slice(r,r+2));return n?(e.W=+n[0],r+n[0].length):-1}function bN(e,t,r){var n=ji.exec(t.slice(r,r+4));return n?(e.y=+n[0],r+n[0].length):-1}function wN(e,t,r){var n=ji.exec(t.slice(r,r+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function uye(e,t,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function dye(e,t,r){var n=ji.exec(t.slice(r,r+1));return n?(e.q=n[0]*3-3,r+n[0].length):-1}function hye(e,t,r){var n=ji.exec(t.slice(r,r+2));return n?(e.m=n[0]-1,r+n[0].length):-1}function SN(e,t,r){var n=ji.exec(t.slice(r,r+2));return n?(e.d=+n[0],r+n[0].length):-1}function fye(e,t,r){var n=ji.exec(t.slice(r,r+3));return n?(e.m=0,e.d=+n[0],r+n[0].length):-1}function EN(e,t,r){var n=ji.exec(t.slice(r,r+2));return n?(e.H=+n[0],r+n[0].length):-1}function pye(e,t,r){var n=ji.exec(t.slice(r,r+2));return n?(e.M=+n[0],r+n[0].length):-1}function mye(e,t,r){var n=ji.exec(t.slice(r,r+2));return n?(e.S=+n[0],r+n[0].length):-1}function gye(e,t,r){var n=ji.exec(t.slice(r,r+3));return n?(e.L=+n[0],r+n[0].length):-1}function yye(e,t,r){var n=ji.exec(t.slice(r,r+6));return n?(e.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function vye(e,t,r){var n=rye.exec(t.slice(r,r+1));return n?r+n[0].length:-1}function _ye(e,t,r){var n=ji.exec(t.slice(r));return n?(e.Q=+n[0],r+n[0].length):-1}function xye(e,t,r){var n=ji.exec(t.slice(r));return n?(e.s=+n[0],r+n[0].length):-1}function TN(e,t){return Qr(e.getDate(),t,2)}function bye(e,t){return Qr(e.getHours(),t,2)}function wye(e,t){return Qr(e.getHours()%12||12,t,2)}function Sye(e,t){return Qr(1+f_.count(oc(e),e),t,3)}function jV(e,t){return Qr(e.getMilliseconds(),t,3)}function Eye(e,t){return jV(e,t)+"000"}function Tye(e,t){return Qr(e.getMonth()+1,t,2)}function Aye(e,t){return Qr(e.getMinutes(),t,2)}function Pye(e,t){return Qr(e.getSeconds(),t,2)}function Cye(e){var t=e.getDay();return t===0?7:t}function Mye(e,t){return Qr(qw.count(oc(e)-1,e),t,2)}function zV(e){var t=e.getDay();return t>=4||t===0?Ip(e):Ip.ceil(e)}function Iye(e,t){return e=zV(e),Qr(Ip.count(oc(e),e)+(oc(e).getDay()===4),t,2)}function Oye(e){return e.getDay()}function kye(e,t){return Qr(e1.count(oc(e)-1,e),t,2)}function Dye(e,t){return Qr(e.getFullYear()%100,t,2)}function Rye(e,t){return e=zV(e),Qr(e.getFullYear()%100,t,2)}function Lye(e,t){return Qr(e.getFullYear()%1e4,t,4)}function jye(e,t){var r=e.getDay();return e=r>=4||r===0?Ip(e):Ip.ceil(e),Qr(e.getFullYear()%1e4,t,4)}function zye(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Qr(t/60|0,"0",2)+Qr(t%60,"0",2)}function AN(e,t){return Qr(e.getUTCDate(),t,2)}function Nye(e,t){return Qr(e.getUTCHours(),t,2)}function Bye(e,t){return Qr(e.getUTCHours()%12||12,t,2)}function $ye(e,t){return Qr(1+Ww.count(ac(e),e),t,3)}function NV(e,t){return Qr(e.getUTCMilliseconds(),t,3)}function Fye(e,t){return NV(e,t)+"000"}function Uye(e,t){return Qr(e.getUTCMonth()+1,t,2)}function Vye(e,t){return Qr(e.getUTCMinutes(),t,2)}function Gye(e,t){return Qr(e.getUTCSeconds(),t,2)}function Wye(e){var t=e.getUTCDay();return t===0?7:t}function qye(e,t){return Qr(Hw.count(ac(e)-1,e),t,2)}function BV(e){var t=e.getUTCDay();return t>=4||t===0?Op(e):Op.ceil(e)}function Hye(e,t){return e=BV(e),Qr(Op.count(ac(e),e)+(ac(e).getUTCDay()===4),t,2)}function Xye(e){return e.getUTCDay()}function Zye(e,t){return Qr(t1.count(ac(e)-1,e),t,2)}function Kye(e,t){return Qr(e.getUTCFullYear()%100,t,2)}function Yye(e,t){return e=BV(e),Qr(e.getUTCFullYear()%100,t,2)}function Jye(e,t){return Qr(e.getUTCFullYear()%1e4,t,4)}function Qye(e,t){var r=e.getUTCDay();return e=r>=4||r===0?Op(e):Op.ceil(e),Qr(e.getUTCFullYear()%1e4,t,4)}function eve(){return"+0000"}function PN(){return"%"}function CN(e){return+e}function MN(e){return Math.floor(+e/1e3)}var Sf,$V,FV;tve({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function tve(e){return Sf=tye(e),$V=Sf.format,Sf.parse,FV=Sf.utcFormat,Sf.utcParse,Sf}function rve(e){return new Date(e)}function nve(e){return e instanceof Date?+e:+new Date(+e)}function _O(e,t,r,n,s,u,h,m,o,_){var E=oO(),S=E.invert,A=E.domain,I=_(".%L"),R=_(":%S"),k=_("%I:%M"),L=_("%I %p"),N=_("%a %d"),z=_("%b %d"),F=_("%B"),U=_("%Y");function W(Y){return(o(Y)<Y?I:m(Y)<Y?R:h(Y)<Y?k:u(Y)<Y?L:n(Y)<Y?s(Y)<Y?N:z:r(Y)<Y?F:U)(Y)}return E.invert=function(Y){return new Date(S(Y))},E.domain=function(Y){return arguments.length?A(Array.from(Y,nve)):A().map(rve)},E.ticks=function(Y){var Q=A();return e(Q[0],Q[Q.length-1],Y??10)},E.tickFormat=function(Y,Q){return Q==null?W:_(Q)},E.nice=function(Y){var Q=A();return(!Y||typeof Y.range!="function")&&(Y=t(Q[0],Q[Q.length-1],Y??10)),Y?A(PV(Q,Y)):E},E.copy=function(){return h_(E,_O(e,t,r,n,s,u,h,m,o,_))},E}function ive(){return Xa.apply(_O(Qge,eye,oc,yO,qw,f_,mO,fO,Fd,$V).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function ove(){return Xa.apply(_O(Yge,Jge,ac,vO,Hw,Ww,gO,pO,Fd,FV).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Xw(){var e=0,t=1,r,n,s,u,h=yo,m=!1,o;function _(S){return S==null||isNaN(S=+S)?o:h(s===0?.5:(S=(u(S)-r)*s,m?Math.max(0,Math.min(1,S)):S))}_.domain=function(S){return arguments.length?([e,t]=S,r=u(e=+e),n=u(t=+t),s=r===n?0:1/(n-r),_):[e,t]},_.clamp=function(S){return arguments.length?(m=!!S,_):m},_.interpolator=function(S){return arguments.length?(h=S,_):h};function E(S){return function(A){var I,R;return arguments.length?([I,R]=A,h=S(I,R),_):[h(0),h(1)]}}return _.range=E(um),_.rangeRound=E(iO),_.unknown=function(S){return arguments.length?(o=S,_):o},function(S){return u=S,r=S(e),n=S(t),s=r===n?0:1/(n-r),_}}function $u(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function UV(){var e=Bu(Xw()(yo));return e.copy=function(){return $u(e,UV())},dc.apply(e,arguments)}function VV(){var e=lO(Xw()).domain([1,10]);return e.copy=function(){return $u(e,VV()).base(e.base())},dc.apply(e,arguments)}function GV(){var e=cO(Xw());return e.copy=function(){return $u(e,GV()).constant(e.constant())},dc.apply(e,arguments)}function xO(){var e=uO(Xw());return e.copy=function(){return $u(e,xO()).exponent(e.exponent())},dc.apply(e,arguments)}function ave(){return xO.apply(null,arguments).exponent(.5)}function WV(){var e=[],t=yo;function r(n){if(n!=null&&!isNaN(n=+n))return t((u_(e,n,1)-1)/(e.length-1))}return r.domain=function(n){if(!arguments.length)return e.slice();e=[];for(let s of n)s!=null&&!isNaN(s=+s)&&e.push(s);return e.sort(xu),r},r.interpolator=function(n){return arguments.length?(t=n,r):t},r.range=function(){return e.map((n,s)=>t(s/(e.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(s,u)=>qme(e,u/n))},r.copy=function(){return WV(t).domain(e)},dc.apply(r,arguments)}function Zw(){var e=0,t=.5,r=1,n=1,s,u,h,m,o,_=yo,E,S=!1,A;function I(k){return isNaN(k=+k)?A:(k=.5+((k=+E(k))-u)*(n*k<n*u?m:o),_(S?Math.max(0,Math.min(1,k)):k))}I.domain=function(k){return arguments.length?([e,t,r]=k,s=E(e=+e),u=E(t=+t),h=E(r=+r),m=s===u?0:.5/(u-s),o=u===h?0:.5/(h-u),n=u<s?-1:1,I):[e,t,r]},I.clamp=function(k){return arguments.length?(S=!!k,I):S},I.interpolator=function(k){return arguments.length?(_=k,I):_};function R(k){return function(L){var N,z,F;return arguments.length?([N,z,F]=L,_=vge(k,[N,z,F]),I):[_(0),_(.5),_(1)]}}return I.range=R(um),I.rangeRound=R(iO),I.unknown=function(k){return arguments.length?(A=k,I):A},function(k){return E=k,s=k(e),u=k(t),h=k(r),m=s===u?0:.5/(u-s),o=u===h?0:.5/(h-u),n=u<s?-1:1,I}}function qV(){var e=Bu(Zw()(yo));return e.copy=function(){return $u(e,qV())},dc.apply(e,arguments)}function HV(){var e=lO(Zw()).domain([.1,1,10]);return e.copy=function(){return $u(e,HV()).base(e.base())},dc.apply(e,arguments)}function XV(){var e=cO(Zw());return e.copy=function(){return $u(e,XV()).constant(e.constant())},dc.apply(e,arguments)}function bO(){var e=uO(Zw());return e.copy=function(){return $u(e,bO()).exponent(e.exponent())},dc.apply(e,arguments)}function sve(){return bO.apply(null,arguments).exponent(.5)}const IN=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:mv,scaleDiverging:qV,scaleDivergingLog:HV,scaleDivergingPow:bO,scaleDivergingSqrt:sve,scaleDivergingSymlog:XV,scaleIdentity:AV,scaleImplicit:hC,scaleLinear:Jb,scaleLog:CV,scaleOrdinal:tO,scalePoint:Ry,scalePow:dO,scaleQuantile:OV,scaleQuantize:kV,scaleRadial:IV,scaleSequential:UV,scaleSequentialLog:VV,scaleSequentialPow:xO,scaleSequentialQuantile:WV,scaleSequentialSqrt:ave,scaleSequentialSymlog:GV,scaleSqrt:Fge,scaleSymlog:MV,scaleThreshold:DV,scaleTime:ive,scaleUtc:ove,tickFormat:TV},Symbol.toStringTag,{value:"Module"}));var lve=rm;function cve(e,t,r){for(var n=-1,s=e.length;++n<s;){var u=e[n],h=t(u);if(h!=null&&(m===void 0?h===h&&!lve(h):r(h,m)))var m=h,o=u}return o}var ZV=cve;function uve(e,t){return e>t}var dve=uve,hve=ZV,fve=dve,pve=cm;function mve(e){return e&&e.length?hve(e,pve,fve):void 0}var gve=mve;const Kw=sn(gve);function yve(e,t){return e<t}var vve=yve,_ve=ZV,xve=vve,bve=cm;function wve(e){return e&&e.length?_ve(e,bve,xve):void 0}var Sve=wve;const Yw=sn(Sve);var Eve=LI,Tve=Nu,Ave=iV,Pve=Go;function Cve(e,t){var r=Pve(e)?Eve:Ave;return r(e,Tve(t))}var Mve=Cve,Ive=rV,Ove=Mve;function kve(e,t){return Ive(Ove(e,t),1)}var Dve=kve;const Rve=sn(Dve);var Lve=ZI;function jve(e,t){return Lve(e,t)}var zve=jve;const Jw=sn(zve);var dm=1e9,Nve={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},SO,zn=!0,Wa="[DecimalError] ",Yd=Wa+"Invalid argument: ",wO=Wa+"Exponent out of range: ",hm=Math.floor,Ld=Math.pow,Bve=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,sa,ki=1e7,kn=7,KV=9007199254740991,r1=hm(KV/kn),Kt={};Kt.absoluteValue=Kt.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};Kt.comparedTo=Kt.cmp=function(e){var t,r,n,s,u=this;if(e=new u.constructor(e),u.s!==e.s)return u.s||-e.s;if(u.e!==e.e)return u.e>e.e^u.s<0?1:-1;for(n=u.d.length,s=e.d.length,t=0,r=n<s?n:s;t<r;++t)if(u.d[t]!==e.d[t])return u.d[t]>e.d[t]^u.s<0?1:-1;return n===s?0:n>s^u.s<0?1:-1};Kt.decimalPlaces=Kt.dp=function(){var e=this,t=e.d.length-1,r=(t-e.e)*kn;if(t=e.d[t],t)for(;t%10==0;t/=10)r--;return r<0?0:r};Kt.dividedBy=Kt.div=function(e){return Kl(this,new this.constructor(e))};Kt.dividedToIntegerBy=Kt.idiv=function(e){var t=this,r=t.constructor;return bn(Kl(t,new r(e),0,1),r.precision)};Kt.equals=Kt.eq=function(e){return!this.cmp(e)};Kt.exponent=function(){return gi(this)};Kt.greaterThan=Kt.gt=function(e){return this.cmp(e)>0};Kt.greaterThanOrEqualTo=Kt.gte=function(e){return this.cmp(e)>=0};Kt.isInteger=Kt.isint=function(){return this.e>this.d.length-2};Kt.isNegative=Kt.isneg=function(){return this.s<0};Kt.isPositive=Kt.ispos=function(){return this.s>0};Kt.isZero=function(){return this.s===0};Kt.lessThan=Kt.lt=function(e){return this.cmp(e)<0};Kt.lessThanOrEqualTo=Kt.lte=function(e){return this.cmp(e)<1};Kt.logarithm=Kt.log=function(e){var t,r=this,n=r.constructor,s=n.precision,u=s+5;if(e===void 0)e=new n(10);else if(e=new n(e),e.s<1||e.eq(sa))throw Error(Wa+"NaN");if(r.s<1)throw Error(Wa+(r.s?"NaN":"-Infinity"));return r.eq(sa)?new n(0):(zn=!1,t=Kl(xv(r,u),xv(e,u),u),zn=!0,bn(t,s))};Kt.minus=Kt.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?QV(t,e):YV(t,(e.s=-e.s,e))};Kt.modulo=Kt.mod=function(e){var t,r=this,n=r.constructor,s=n.precision;if(e=new n(e),!e.s)throw Error(Wa+"NaN");return r.s?(zn=!1,t=Kl(r,e,0,1).times(e),zn=!0,r.minus(t)):bn(new n(r),s)};Kt.naturalExponential=Kt.exp=function(){return JV(this)};Kt.naturalLogarithm=Kt.ln=function(){return xv(this)};Kt.negated=Kt.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};Kt.plus=Kt.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?YV(t,e):QV(t,(e.s=-e.s,e))};Kt.precision=Kt.sd=function(e){var t,r,n,s=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(Yd+e);if(t=gi(s)+1,n=s.d.length-1,r=n*kn+1,n=s.d[n],n){for(;n%10==0;n/=10)r--;for(n=s.d[0];n>=10;n/=10)r++}return e&&t>r?t:r};Kt.squareRoot=Kt.sqrt=function(){var e,t,r,n,s,u,h,m=this,o=m.constructor;if(m.s<1){if(!m.s)return new o(0);throw Error(Wa+"NaN")}for(e=gi(m),zn=!1,s=Math.sqrt(+m),s==0||s==1/0?(t=il(m.d),(t.length+e)%2==0&&(t+="0"),s=Math.sqrt(t),e=hm((e+1)/2)-(e<0||e%2),s==1/0?t="5e"+e:(t=s.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),n=new o(t)):n=new o(s.toString()),r=o.precision,s=h=r+3;;)if(u=n,n=u.plus(Kl(m,u,h+2)).times(.5),il(u.d).slice(0,h)===(t=il(n.d)).slice(0,h)){if(t=t.slice(h-3,h+1),s==h&&t=="4999"){if(bn(u,r+1,0),u.times(u).eq(m)){n=u;break}}else if(t!="9999")break;h+=4}return zn=!0,bn(n,r)};Kt.times=Kt.mul=function(e){var t,r,n,s,u,h,m,o,_,E=this,S=E.constructor,A=E.d,I=(e=new S(e)).d;if(!E.s||!e.s)return new S(0);for(e.s*=E.s,r=E.e+e.e,o=A.length,_=I.length,o<_&&(u=A,A=I,I=u,h=o,o=_,_=h),u=[],h=o+_,n=h;n--;)u.push(0);for(n=_;--n>=0;){for(t=0,s=o+n;s>n;)m=u[s]+I[n]*A[s-n-1]+t,u[s--]=m%ki|0,t=m/ki|0;u[s]=(u[s]+t)%ki|0}for(;!u[--h];)u.pop();return t?++r:u.shift(),e.d=u,e.e=r,zn?bn(e,S.precision):e};Kt.toDecimalPlaces=Kt.todp=function(e,t){var r=this,n=r.constructor;return r=new n(r),e===void 0?r:(hl(e,0,dm),t===void 0?t=n.rounding:hl(t,0,8),bn(r,e+gi(r)+1,t))};Kt.toExponential=function(e,t){var r,n=this,s=n.constructor;return e===void 0?r=lh(n,!0):(hl(e,0,dm),t===void 0?t=s.rounding:hl(t,0,8),n=bn(new s(n),e+1,t),r=lh(n,!0,e+1)),r};Kt.toFixed=function(e,t){var r,n,s=this,u=s.constructor;return e===void 0?lh(s):(hl(e,0,dm),t===void 0?t=u.rounding:hl(t,0,8),n=bn(new u(s),e+gi(s)+1,t),r=lh(n.abs(),!1,e+gi(n)+1),s.isneg()&&!s.isZero()?"-"+r:r)};Kt.toInteger=Kt.toint=function(){var e=this,t=e.constructor;return bn(new t(e),gi(e)+1,t.rounding)};Kt.toNumber=function(){return+this};Kt.toPower=Kt.pow=function(e){var t,r,n,s,u,h,m=this,o=m.constructor,_=12,E=+(e=new o(e));if(!e.s)return new o(sa);if(m=new o(m),!m.s){if(e.s<1)throw Error(Wa+"Infinity");return m}if(m.eq(sa))return m;if(n=o.precision,e.eq(sa))return bn(m,n);if(t=e.e,r=e.d.length-1,h=t>=r,u=m.s,h){if((r=E<0?-E:E)<=KV){for(s=new o(sa),t=Math.ceil(n/kn+4),zn=!1;r%2&&(s=s.times(m),kN(s.d,t)),r=hm(r/2),r!==0;)m=m.times(m),kN(m.d,t);return zn=!0,e.s<0?new o(sa).div(s):bn(s,n)}}else if(u<0)throw Error(Wa+"NaN");return u=u<0&&e.d[Math.max(t,r)]&1?-1:1,m.s=1,zn=!1,s=e.times(xv(m,n+_)),zn=!0,s=JV(s),s.s=u,s};Kt.toPrecision=function(e,t){var r,n,s=this,u=s.constructor;return e===void 0?(r=gi(s),n=lh(s,r<=u.toExpNeg||r>=u.toExpPos)):(hl(e,1,dm),t===void 0?t=u.rounding:hl(t,0,8),s=bn(new u(s),e,t),r=gi(s),n=lh(s,e<=r||r<=u.toExpNeg,e)),n};Kt.toSignificantDigits=Kt.tosd=function(e,t){var r=this,n=r.constructor;return e===void 0?(e=n.precision,t=n.rounding):(hl(e,1,dm),t===void 0?t=n.rounding:hl(t,0,8)),bn(new n(r),e,t)};Kt.toString=Kt.valueOf=Kt.val=Kt.toJSON=Kt[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=gi(e),r=e.constructor;return lh(e,t<=r.toExpNeg||t>=r.toExpPos)};function YV(e,t){var r,n,s,u,h,m,o,_,E=e.constructor,S=E.precision;if(!e.s||!t.s)return t.s||(t=new E(e)),zn?bn(t,S):t;if(o=e.d,_=t.d,h=e.e,s=t.e,o=o.slice(),u=h-s,u){for(u<0?(n=o,u=-u,m=_.length):(n=_,s=h,m=o.length),h=Math.ceil(S/kn),m=h>m?h+1:m+1,u>m&&(u=m,n.length=1),n.reverse();u--;)n.push(0);n.reverse()}for(m=o.length,u=_.length,m-u<0&&(u=m,n=_,_=o,o=n),r=0;u;)r=(o[--u]=o[u]+_[u]+r)/ki|0,o[u]%=ki;for(r&&(o.unshift(r),++s),m=o.length;o[--m]==0;)o.pop();return t.d=o,t.e=s,zn?bn(t,S):t}function hl(e,t,r){if(e!==~~e||e<t||e>r)throw Error(Yd+e)}function il(e){var t,r,n,s=e.length-1,u="",h=e[0];if(s>0){for(u+=h,t=1;t<s;t++)n=e[t]+"",r=kn-n.length,r&&(u+=Kc(r)),u+=n;h=e[t],n=h+"",r=kn-n.length,r&&(u+=Kc(r))}else if(h===0)return"0";for(;h%10===0;)h/=10;return u+h}var Kl=function(){function e(n,s){var u,h=0,m=n.length;for(n=n.slice();m--;)u=n[m]*s+h,n[m]=u%ki|0,h=u/ki|0;return h&&n.unshift(h),n}function t(n,s,u,h){var m,o;if(u!=h)o=u>h?1:-1;else for(m=o=0;m<u;m++)if(n[m]!=s[m]){o=n[m]>s[m]?1:-1;break}return o}function r(n,s,u){for(var h=0;u--;)n[u]-=h,h=n[u]<s[u]?1:0,n[u]=h*ki+n[u]-s[u];for(;!n[0]&&n.length>1;)n.shift()}return function(n,s,u,h){var m,o,_,E,S,A,I,R,k,L,N,z,F,U,W,Y,Q,Z,re=n.constructor,ne=n.s==s.s?1:-1,ue=n.d,fe=s.d;if(!n.s)return new re(n);if(!s.s)throw Error(Wa+"Division by zero");for(o=n.e-s.e,Q=fe.length,W=ue.length,I=new re(ne),R=I.d=[],_=0;fe[_]==(ue[_]||0);)++_;if(fe[_]>(ue[_]||0)&&--o,u==null?z=u=re.precision:h?z=u+(gi(n)-gi(s))+1:z=u,z<0)return new re(0);if(z=z/kn+2|0,_=0,Q==1)for(E=0,fe=fe[0],z++;(_<W||E)&&z--;_++)F=E*ki+(ue[_]||0),R[_]=F/fe|0,E=F%fe|0;else{for(E=ki/(fe[0]+1)|0,E>1&&(fe=e(fe,E),ue=e(ue,E),Q=fe.length,W=ue.length),U=Q,k=ue.slice(0,Q),L=k.length;L<Q;)k[L++]=0;Z=fe.slice(),Z.unshift(0),Y=fe[0],fe[1]>=ki/2&&++Y;do E=0,m=t(fe,k,Q,L),m<0?(N=k[0],Q!=L&&(N=N*ki+(k[1]||0)),E=N/Y|0,E>1?(E>=ki&&(E=ki-1),S=e(fe,E),A=S.length,L=k.length,m=t(S,k,A,L),m==1&&(E--,r(S,Q<A?Z:fe,A))):(E==0&&(m=E=1),S=fe.slice()),A=S.length,A<L&&S.unshift(0),r(k,S,L),m==-1&&(L=k.length,m=t(fe,k,Q,L),m<1&&(E++,r(k,Q<L?Z:fe,L))),L=k.length):m===0&&(E++,k=[0]),R[_++]=E,m&&k[0]?k[L++]=ue[U]||0:(k=[ue[U]],L=1);while((U++<W||k[0]!==void 0)&&z--)}return R[0]||R.shift(),I.e=o,bn(I,h?u+gi(I)+1:u)}}();function JV(e,t){var r,n,s,u,h,m,o=0,_=0,E=e.constructor,S=E.precision;if(gi(e)>16)throw Error(wO+gi(e));if(!e.s)return new E(sa);for(t==null?(zn=!1,m=S):m=t,h=new E(.03125);e.abs().gte(.1);)e=e.times(h),_+=5;for(n=Math.log(Ld(2,_))/Math.LN10*2+5|0,m+=n,r=s=u=new E(sa),E.precision=m;;){if(s=bn(s.times(e),m),r=r.times(++o),h=u.plus(Kl(s,r,m)),il(h.d).slice(0,m)===il(u.d).slice(0,m)){for(;_--;)u=bn(u.times(u),m);return E.precision=S,t==null?(zn=!0,bn(u,S)):u}u=h}}function gi(e){for(var t=e.e*kn,r=e.d[0];r>=10;r/=10)t++;return t}function tA(e,t,r){if(t>e.LN10.sd())throw zn=!0,r&&(e.precision=r),Error(Wa+"LN10 precision limit exceeded");return bn(new e(e.LN10),t)}function Kc(e){for(var t="";e--;)t+="0";return t}function xv(e,t){var r,n,s,u,h,m,o,_,E,S=1,A=10,I=e,R=I.d,k=I.constructor,L=k.precision;if(I.s<1)throw Error(Wa+(I.s?"NaN":"-Infinity"));if(I.eq(sa))return new k(0);if(t==null?(zn=!1,_=L):_=t,I.eq(10))return t==null&&(zn=!0),tA(k,_);if(_+=A,k.precision=_,r=il(R),n=r.charAt(0),u=gi(I),Math.abs(u)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)I=I.times(e),r=il(I.d),n=r.charAt(0),S++;u=gi(I),n>1?(I=new k("0."+r),u++):I=new k(n+"."+r.slice(1))}else return o=tA(k,_+2,L).times(u+""),I=xv(new k(n+"."+r.slice(1)),_-A).plus(o),k.precision=L,t==null?(zn=!0,bn(I,L)):I;for(m=h=I=Kl(I.minus(sa),I.plus(sa),_),E=bn(I.times(I),_),s=3;;){if(h=bn(h.times(E),_),o=m.plus(Kl(h,new k(s),_)),il(o.d).slice(0,_)===il(m.d).slice(0,_))return m=m.times(2),u!==0&&(m=m.plus(tA(k,_+2,L).times(u+""))),m=Kl(m,new k(S),_),k.precision=L,t==null?(zn=!0,bn(m,L)):m;m=o,s+=2}}function ON(e,t){var r,n,s;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(r<0&&(r=n),r+=+t.slice(n+1),t=t.substring(0,n)):r<0&&(r=t.length),n=0;t.charCodeAt(n)===48;)++n;for(s=t.length;t.charCodeAt(s-1)===48;)--s;if(t=t.slice(n,s),t){if(s-=n,r=r-n-1,e.e=hm(r/kn),e.d=[],n=(r+1)%kn,r<0&&(n+=kn),n<s){for(n&&e.d.push(+t.slice(0,n)),s-=kn;n<s;)e.d.push(+t.slice(n,n+=kn));t=t.slice(n),n=kn-t.length}else n-=s;for(;n--;)t+="0";if(e.d.push(+t),zn&&(e.e>r1||e.e<-r1))throw Error(wO+r)}else e.s=0,e.e=0,e.d=[0];return e}function bn(e,t,r){var n,s,u,h,m,o,_,E,S=e.d;for(h=1,u=S[0];u>=10;u/=10)h++;if(n=t-h,n<0)n+=kn,s=t,_=S[E=0];else{if(E=Math.ceil((n+1)/kn),u=S.length,E>=u)return e;for(_=u=S[E],h=1;u>=10;u/=10)h++;n%=kn,s=n-kn+h}if(r!==void 0&&(u=Ld(10,h-s-1),m=_/u%10|0,o=t<0||S[E+1]!==void 0||_%u,o=r<4?(m||o)&&(r==0||r==(e.s<0?3:2)):m>5||m==5&&(r==4||o||r==6&&(n>0?s>0?_/Ld(10,h-s):0:S[E-1])%10&1||r==(e.s<0?8:7))),t<1||!S[0])return o?(u=gi(e),S.length=1,t=t-u-1,S[0]=Ld(10,(kn-t%kn)%kn),e.e=hm(-t/kn)||0):(S.length=1,S[0]=e.e=e.s=0),e;if(n==0?(S.length=E,u=1,E--):(S.length=E+1,u=Ld(10,kn-n),S[E]=s>0?(_/Ld(10,h-s)%Ld(10,s)|0)*u:0),o)for(;;)if(E==0){(S[0]+=u)==ki&&(S[0]=1,++e.e);break}else{if(S[E]+=u,S[E]!=ki)break;S[E--]=0,u=1}for(n=S.length;S[--n]===0;)S.pop();if(zn&&(e.e>r1||e.e<-r1))throw Error(wO+gi(e));return e}function QV(e,t){var r,n,s,u,h,m,o,_,E,S,A=e.constructor,I=A.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new A(e),zn?bn(t,I):t;if(o=e.d,S=t.d,n=t.e,_=e.e,o=o.slice(),h=_-n,h){for(E=h<0,E?(r=o,h=-h,m=S.length):(r=S,n=_,m=o.length),s=Math.max(Math.ceil(I/kn),m)+2,h>s&&(h=s,r.length=1),r.reverse(),s=h;s--;)r.push(0);r.reverse()}else{for(s=o.length,m=S.length,E=s<m,E&&(m=s),s=0;s<m;s++)if(o[s]!=S[s]){E=o[s]<S[s];break}h=0}for(E&&(r=o,o=S,S=r,t.s=-t.s),m=o.length,s=S.length-m;s>0;--s)o[m++]=0;for(s=S.length;s>h;){if(o[--s]<S[s]){for(u=s;u&&o[--u]===0;)o[u]=ki-1;--o[u],o[s]+=ki}o[s]-=S[s]}for(;o[--m]===0;)o.pop();for(;o[0]===0;o.shift())--n;return o[0]?(t.d=o,t.e=n,zn?bn(t,I):t):new A(0)}function lh(e,t,r){var n,s=gi(e),u=il(e.d),h=u.length;return t?(r&&(n=r-h)>0?u=u.charAt(0)+"."+u.slice(1)+Kc(n):h>1&&(u=u.charAt(0)+"."+u.slice(1)),u=u+(s<0?"e":"e+")+s):s<0?(u="0."+Kc(-s-1)+u,r&&(n=r-h)>0&&(u+=Kc(n))):s>=h?(u+=Kc(s+1-h),r&&(n=r-s-1)>0&&(u=u+"."+Kc(n))):((n=s+1)<h&&(u=u.slice(0,n)+"."+u.slice(n)),r&&(n=r-h)>0&&(s+1===h&&(u+="."),u+=Kc(n))),e.s<0?"-"+u:u}function kN(e,t){if(e.length>t)return e.length=t,!0}function e8(e){var t,r,n;function s(u){var h=this;if(!(h instanceof s))return new s(u);if(h.constructor=s,u instanceof s){h.s=u.s,h.e=u.e,h.d=(u=u.d)?u.slice():u;return}if(typeof u=="number"){if(u*0!==0)throw Error(Yd+u);if(u>0)h.s=1;else if(u<0)u=-u,h.s=-1;else{h.s=0,h.e=0,h.d=[0];return}if(u===~~u&&u<1e7){h.e=0,h.d=[u];return}return ON(h,u.toString())}else if(typeof u!="string")throw Error(Yd+u);if(u.charCodeAt(0)===45?(u=u.slice(1),h.s=-1):h.s=1,Bve.test(u))ON(h,u);else throw Error(Yd+u)}if(s.prototype=Kt,s.ROUND_UP=0,s.ROUND_DOWN=1,s.ROUND_CEIL=2,s.ROUND_FLOOR=3,s.ROUND_HALF_UP=4,s.ROUND_HALF_DOWN=5,s.ROUND_HALF_EVEN=6,s.ROUND_HALF_CEIL=7,s.ROUND_HALF_FLOOR=8,s.clone=e8,s.config=s.set=$ve,e===void 0&&(e={}),e)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<n.length;)e.hasOwnProperty(r=n[t++])||(e[r]=this[r]);return s.config(e),s}function $ve(e){if(!e||typeof e!="object")throw Error(Wa+"Object expected");var t,r,n,s=["precision",1,dm,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<s.length;t+=3)if((n=e[r=s[t]])!==void 0)if(hm(n)===n&&n>=s[t+1]&&n<=s[t+2])this[r]=n;else throw Error(Yd+r+": "+n);if((n=e[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(Yd+r+": "+n);return this}var SO=e8(Nve);sa=new SO(1);const mn=SO;function Fve(e){return Wve(e)||Gve(e)||Vve(e)||Uve()}function Uve(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Vve(e,t){if(e){if(typeof e=="string")return gC(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return gC(e,t)}}function Gve(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function Wve(e){if(Array.isArray(e))return gC(e)}function gC(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var qve=function(t){return t},t8={"@@functional/placeholder":!0},r8=function(t){return t===t8},DN=function(t){return function r(){return arguments.length===0||arguments.length===1&&r8(arguments.length<=0?void 0:arguments[0])?r:t.apply(void 0,arguments)}},Hve=function e(t,r){return t===1?r:DN(function(){for(var n=arguments.length,s=new Array(n),u=0;u<n;u++)s[u]=arguments[u];var h=s.filter(function(m){return m!==t8}).length;return h>=t?r.apply(void 0,s):e(t-h,DN(function(){for(var m=arguments.length,o=new Array(m),_=0;_<m;_++)o[_]=arguments[_];var E=s.map(function(S){return r8(S)?o.shift():S});return r.apply(void 0,Fve(E).concat(o))}))})},Qw=function(t){return Hve(t.length,t)},yC=function(t,r){for(var n=[],s=t;s<r;++s)n[s-t]=s;return n},Xve=Qw(function(e,t){return Array.isArray(t)?t.map(e):Object.keys(t).map(function(r){return t[r]}).map(e)}),Zve=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(!r.length)return qve;var s=r.reverse(),u=s[0],h=s.slice(1);return function(){return h.reduce(function(m,o){return o(m)},u.apply(void 0,arguments))}},vC=function(t){return Array.isArray(t)?t.reverse():t.split("").reverse.join("")},n8=function(t){var r=null,n=null;return function(){for(var s=arguments.length,u=new Array(s),h=0;h<s;h++)u[h]=arguments[h];return r&&u.every(function(m,o){return m===r[o]})||(r=u,n=t.apply(void 0,u)),n}};function Kve(e){var t;return e===0?t=1:t=Math.floor(new mn(e).abs().log(10).toNumber())+1,t}function Yve(e,t,r){for(var n=new mn(e),s=0,u=[];n.lt(t)&&s<1e5;)u.push(n.toNumber()),n=n.add(r),s++;return u}var Jve=Qw(function(e,t,r){var n=+e,s=+t;return n+r*(s-n)}),Qve=Qw(function(e,t,r){var n=t-+e;return n=n||1/0,(r-e)/n}),e_e=Qw(function(e,t,r){var n=t-+e;return n=n||1/0,Math.max(0,Math.min(1,(r-e)/n))});const eS={rangeStep:Yve,getDigitCount:Kve,interpolateNumber:Jve,uninterpolateNumber:Qve,uninterpolateTruncation:e_e};function _C(e){return n_e(e)||r_e(e)||i8(e)||t_e()}function t_e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function r_e(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function n_e(e){if(Array.isArray(e))return xC(e)}function bv(e,t){return a_e(e)||o_e(e,t)||i8(e,t)||i_e()}function i_e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function i8(e,t){if(e){if(typeof e=="string")return xC(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return xC(e,t)}}function xC(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function o_e(e,t){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(e)))){var r=[],n=!0,s=!1,u=void 0;try{for(var h=e[Symbol.iterator](),m;!(n=(m=h.next()).done)&&(r.push(m.value),!(t&&r.length===t));n=!0);}catch(o){s=!0,u=o}finally{try{!n&&h.return!=null&&h.return()}finally{if(s)throw u}}return r}}function a_e(e){if(Array.isArray(e))return e}function o8(e){var t=bv(e,2),r=t[0],n=t[1],s=r,u=n;return r>n&&(s=n,u=r),[s,u]}function a8(e,t,r){if(e.lte(0))return new mn(0);var n=eS.getDigitCount(e.toNumber()),s=new mn(10).pow(n),u=e.div(s),h=n!==1?.05:.1,m=new mn(Math.ceil(u.div(h).toNumber())).add(r).mul(h),o=m.mul(s);return t?o:new mn(Math.ceil(o))}function s_e(e,t,r){var n=1,s=new mn(e);if(!s.isint()&&r){var u=Math.abs(e);u<1?(n=new mn(10).pow(eS.getDigitCount(e)-1),s=new mn(Math.floor(s.div(n).toNumber())).mul(n)):u>1&&(s=new mn(Math.floor(e)))}else e===0?s=new mn(Math.floor((t-1)/2)):r||(s=new mn(Math.floor(e)));var h=Math.floor((t-1)/2),m=Zve(Xve(function(o){return s.add(new mn(o-h).mul(n)).toNumber()}),yC);return m(0,t)}function s8(e,t,r,n){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((t-e)/(r-1)))return{step:new mn(0),tickMin:new mn(0),tickMax:new mn(0)};var u=a8(new mn(t).sub(e).div(r-1),n,s),h;e<=0&&t>=0?h=new mn(0):(h=new mn(e).add(t).div(2),h=h.sub(new mn(h).mod(u)));var m=Math.ceil(h.sub(e).div(u).toNumber()),o=Math.ceil(new mn(t).sub(h).div(u).toNumber()),_=m+o+1;return _>r?s8(e,t,r,n,s+1):(_<r&&(o=t>0?o+(r-_):o,m=t>0?m:m+(r-_)),{step:u,tickMin:h.sub(new mn(m).mul(u)),tickMax:h.add(new mn(o).mul(u))})}function l_e(e){var t=bv(e,2),r=t[0],n=t[1],s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,h=Math.max(s,2),m=o8([r,n]),o=bv(m,2),_=o[0],E=o[1];if(_===-1/0||E===1/0){var S=E===1/0?[_].concat(_C(yC(0,s-1).map(function(){return 1/0}))):[].concat(_C(yC(0,s-1).map(function(){return-1/0})),[E]);return r>n?vC(S):S}if(_===E)return s_e(_,s,u);var A=s8(_,E,h,u),I=A.step,R=A.tickMin,k=A.tickMax,L=eS.rangeStep(R,k.add(new mn(.1).mul(I)),I);return r>n?vC(L):L}function c_e(e,t){var r=bv(e,2),n=r[0],s=r[1],u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,h=o8([n,s]),m=bv(h,2),o=m[0],_=m[1];if(o===-1/0||_===1/0)return[n,s];if(o===_)return[o];var E=Math.max(t,2),S=a8(new mn(_).sub(o).div(E-1),u,0),A=[].concat(_C(eS.rangeStep(new mn(o),new mn(_).sub(new mn(.99).mul(S)),S)),[_]);return n>s?vC(A):A}var u_e=n8(l_e),d_e=n8(c_e),h_e="Invariant failed";function ch(e,t){throw new Error(h_e)}var f_e=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function kp(e){"@babel/helpers - typeof";return kp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},kp(e)}function n1(){return n1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},n1.apply(this,arguments)}function p_e(e,t){return v_e(e)||y_e(e,t)||g_e(e,t)||m_e()}function m_e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function g_e(e,t){if(e){if(typeof e=="string")return RN(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return RN(e,t)}}function RN(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function y_e(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,u,h,m=[],o=!0,_=!1;try{if(u=(r=r.call(e)).next,t!==0)for(;!(o=(n=u.call(r)).done)&&(m.push(n.value),m.length!==t);o=!0);}catch(E){_=!0,s=E}finally{try{if(!o&&r.return!=null&&(h=r.return(),Object(h)!==h))return}finally{if(_)throw s}}return m}}function v_e(e){if(Array.isArray(e))return e}function __e(e,t){if(e==null)return{};var r=x_e(e,t),n,s;if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(e);for(s=0;s<u.length;s++)n=u[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function x_e(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function b_e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function w_e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,u8(n.key),n)}}function S_e(e,t,r){return t&&w_e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function E_e(e,t,r){return t=i1(t),T_e(e,l8()?Reflect.construct(t,r||[],i1(e).constructor):t.apply(e,r))}function T_e(e,t){if(t&&(kp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return A_e(e)}function A_e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l8(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(l8=function(){return!!e})()}function i1(e){return i1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},i1(e)}function P_e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&bC(e,t)}function bC(e,t){return bC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},bC(e,t)}function c8(e,t,r){return t=u8(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function u8(e){var t=C_e(e,"string");return kp(t)=="symbol"?t:t+""}function C_e(e,t){if(kp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(kp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var p_=function(e){function t(){return b_e(this,t),E_e(this,t,arguments)}return P_e(t,e),S_e(t,[{key:"render",value:function(){var n=this.props,s=n.offset,u=n.layout,h=n.width,m=n.dataKey,o=n.data,_=n.dataPointFormatter,E=n.xAxis,S=n.yAxis,A=__e(n,f_e),I=Br(A,!1);this.props.direction==="x"&&E.type!=="number"&&ch();var R=o.map(function(k){var L=_(k,m),N=L.x,z=L.y,F=L.value,U=L.errorVal;if(!U)return null;var W=[],Y,Q;if(Array.isArray(U)){var Z=p_e(U,2);Y=Z[0],Q=Z[1]}else Y=Q=U;if(u==="vertical"){var re=E.scale,ne=z+s,ue=ne+h,fe=ne-h,Ee=re(F-Y),Se=re(F+Q);W.push({x1:Se,y1:ue,x2:Se,y2:fe}),W.push({x1:Ee,y1:ne,x2:Se,y2:ne}),W.push({x1:Ee,y1:ue,x2:Ee,y2:fe})}else if(u==="horizontal"){var je=S.scale,Le=N+s,Ue=Le-h,we=Le+h,Pe=je(F-Y),rt=je(F+Q);W.push({x1:Ue,y1:rt,x2:we,y2:rt}),W.push({x1:Le,y1:Pe,x2:Le,y2:rt}),W.push({x1:Ue,y1:Pe,x2:we,y2:Pe})}return be.createElement(Xn,n1({className:"recharts-errorBar",key:"bar-".concat(W.map(function($e){return"".concat($e.x1,"-").concat($e.x2,"-").concat($e.y1,"-").concat($e.y2)}))},I),W.map(function($e){return be.createElement("line",n1({},$e,{key:"line-".concat($e.x1,"-").concat($e.x2,"-").concat($e.y1,"-").concat($e.y2)}))}))});return be.createElement(Xn,{className:"recharts-errorBars"},R)}}])}(be.Component);c8(p_,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});c8(p_,"displayName","ErrorBar");function wv(e){"@babel/helpers - typeof";return wv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wv(e)}function LN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Md(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?LN(Object(r),!0).forEach(function(n){M_e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):LN(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function M_e(e,t,r){return t=I_e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function I_e(e){var t=O_e(e,"string");return wv(t)=="symbol"?t:t+""}function O_e(e,t){if(wv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(wv(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var d8=function(t){var r=t.children,n=t.formattedGraphicalItems,s=t.legendWidth,u=t.legendContent,h=ra(r,ha);if(!h)return null;var m=ha.defaultProps,o=m!==void 0?Md(Md({},m),h.props):{},_;return h.props&&h.props.payload?_=h.props&&h.props.payload:u==="children"?_=(n||[]).reduce(function(E,S){var A=S.item,I=S.props,R=I.sectors||I.data||[];return E.concat(R.map(function(k){return{type:h.props.iconType||A.props.legendType,value:k.name,color:k.fill,payload:k}}))},[]):_=(n||[]).map(function(E){var S=E.item,A=S.type.defaultProps,I=A!==void 0?Md(Md({},A),S.props):{},R=I.dataKey,k=I.name,L=I.legendType,N=I.hide;return{inactive:N,dataKey:R,type:o.iconType||L||"square",color:EO(S),value:k||R,payload:I}}),Md(Md(Md({},o),ha.getWithHeight(h,s)),{},{payload:_,item:h})};function Sv(e){"@babel/helpers - typeof";return Sv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Sv(e)}function jN(e){return L_e(e)||R_e(e)||D_e(e)||k_e()}function k_e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function D_e(e,t){if(e){if(typeof e=="string")return wC(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return wC(e,t)}}function R_e(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function L_e(e){if(Array.isArray(e))return wC(e)}function wC(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function zN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function ni(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?zN(Object(r),!0).forEach(function(n){rp(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):zN(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function rp(e,t,r){return t=j_e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function j_e(e){var t=z_e(e,"string");return Sv(t)=="symbol"?t:t+""}function z_e(e,t){if(Sv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Sv(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function _o(e,t,r){return Mr(e)||Mr(t)?r:Si(t)?Ba(e,t,r):Rr(t)?t(e):r}function Ly(e,t,r,n){var s=Rve(e,function(m){return _o(m,t)});if(r==="number"){var u=s.filter(function(m){return Vt(m)||parseFloat(m)});return u.length?[Yw(u),Kw(u)]:[1/0,-1/0]}var h=n?s.filter(function(m){return!Mr(m)}):s;return h.map(function(m){return Si(m)||m instanceof Date?m:""})}var N_e=function(t){var r,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],s=arguments.length>2?arguments[2]:void 0,u=arguments.length>3?arguments[3]:void 0,h=-1,m=(r=n==null?void 0:n.length)!==null&&r!==void 0?r:0;if(m<=1)return 0;if(u&&u.axisType==="angleAxis"&&Math.abs(Math.abs(u.range[1]-u.range[0])-360)<=1e-6)for(var o=u.range,_=0;_<m;_++){var E=_>0?s[_-1].coordinate:s[m-1].coordinate,S=s[_].coordinate,A=_>=m-1?s[0].coordinate:s[_+1].coordinate,I=void 0;if(Ps(S-E)!==Ps(A-S)){var R=[];if(Ps(A-S)===Ps(o[1]-o[0])){I=A;var k=S+o[1]-o[0];R[0]=Math.min(k,(k+E)/2),R[1]=Math.max(k,(k+E)/2)}else{I=E;var L=A+o[1]-o[0];R[0]=Math.min(S,(L+S)/2),R[1]=Math.max(S,(L+S)/2)}var N=[Math.min(S,(I+S)/2),Math.max(S,(I+S)/2)];if(t>N[0]&&t<=N[1]||t>=R[0]&&t<=R[1]){h=s[_].index;break}}else{var z=Math.min(E,A),F=Math.max(E,A);if(t>(z+S)/2&&t<=(F+S)/2){h=s[_].index;break}}}else for(var U=0;U<m;U++)if(U===0&&t<=(n[U].coordinate+n[U+1].coordinate)/2||U>0&&U<m-1&&t>(n[U].coordinate+n[U-1].coordinate)/2&&t<=(n[U].coordinate+n[U+1].coordinate)/2||U===m-1&&t>(n[U].coordinate+n[U-1].coordinate)/2){h=n[U].index;break}return h},EO=function(t){var r,n=t,s=n.type.displayName,u=(r=t.type)!==null&&r!==void 0&&r.defaultProps?ni(ni({},t.type.defaultProps),t.props):t.props,h=u.stroke,m=u.fill,o;switch(s){case"Line":o=h;break;case"Area":case"Radar":o=h&&h!=="none"?h:m;break;default:o=m;break}return o},B_e=function(t){var r=t.barSize,n=t.totalSize,s=t.stackGroups,u=s===void 0?{}:s;if(!u)return{};for(var h={},m=Object.keys(u),o=0,_=m.length;o<_;o++)for(var E=u[m[o]].stackGroups,S=Object.keys(E),A=0,I=S.length;A<I;A++){var R=E[S[A]],k=R.items,L=R.cateAxisId,N=k.filter(function(Q){return Hl(Q.type).indexOf("Bar")>=0});if(N&&N.length){var z=N[0].type.defaultProps,F=z!==void 0?ni(ni({},z),N[0].props):N[0].props,U=F.barSize,W=F[L];h[W]||(h[W]=[]);var Y=Mr(U)?r:U;h[W].push({item:N[0],stackList:N.slice(1),barSize:Mr(Y)?void 0:sh(Y,n,0)})}}return h},$_e=function(t){var r=t.barGap,n=t.barCategoryGap,s=t.bandSize,u=t.sizeList,h=u===void 0?[]:u,m=t.maxBarSize,o=h.length;if(o<1)return null;var _=sh(r,s,0,!0),E,S=[];if(h[0].barSize===+h[0].barSize){var A=!1,I=s/o,R=h.reduce(function(U,W){return U+W.barSize||0},0);R+=(o-1)*_,R>=s&&(R-=(o-1)*_,_=0),R>=s&&I>0&&(A=!0,I*=.9,R=o*I);var k=(s-R)/2>>0,L={offset:k-_,size:0};E=h.reduce(function(U,W){var Y={item:W.item,position:{offset:L.offset+L.size+_,size:A?I:W.barSize}},Q=[].concat(jN(U),[Y]);return L=Q[Q.length-1].position,W.stackList&&W.stackList.length&&W.stackList.forEach(function(Z){Q.push({item:Z,position:L})}),Q},S)}else{var N=sh(n,s,0,!0);s-2*N-(o-1)*_<=0&&(_=0);var z=(s-2*N-(o-1)*_)/o;z>1&&(z>>=0);var F=m===+m?Math.min(z,m):z;E=h.reduce(function(U,W,Y){var Q=[].concat(jN(U),[{item:W.item,position:{offset:N+(z+_)*Y+(z-F)/2,size:F}}]);return W.stackList&&W.stackList.length&&W.stackList.forEach(function(Z){Q.push({item:Z,position:Q[Q.length-1].position})}),Q},S)}return E},F_e=function(t,r,n,s){var u=n.children,h=n.width,m=n.margin,o=h-(m.left||0)-(m.right||0),_=d8({children:u,legendWidth:o});if(_){var E=s||{},S=E.width,A=E.height,I=_.align,R=_.verticalAlign,k=_.layout;if((k==="vertical"||k==="horizontal"&&R==="middle")&&I!=="center"&&Vt(t[I]))return ni(ni({},t),{},rp({},I,t[I]+(S||0)));if((k==="horizontal"||k==="vertical"&&I==="center")&&R!=="middle"&&Vt(t[R]))return ni(ni({},t),{},rp({},R,t[R]+(A||0)))}return t},U_e=function(t,r,n){return Mr(r)?!0:t==="horizontal"?r==="yAxis":t==="vertical"||n==="x"?r==="xAxis":n==="y"?r==="yAxis":!0},h8=function(t,r,n,s,u){var h=r.props.children,m=da(h,p_).filter(function(_){return U_e(s,u,_.props.direction)});if(m&&m.length){var o=m.map(function(_){return _.props.dataKey});return t.reduce(function(_,E){var S=_o(E,n);if(Mr(S))return _;var A=Array.isArray(S)?[Yw(S),Kw(S)]:[S,S],I=o.reduce(function(R,k){var L=_o(E,k,0),N=A[0]-Math.abs(Array.isArray(L)?L[0]:L),z=A[1]+Math.abs(Array.isArray(L)?L[1]:L);return[Math.min(N,R[0]),Math.max(z,R[1])]},[1/0,-1/0]);return[Math.min(I[0],_[0]),Math.max(I[1],_[1])]},[1/0,-1/0])}return null},V_e=function(t,r,n,s,u){var h=r.map(function(m){return h8(t,m,n,u,s)}).filter(function(m){return!Mr(m)});return h&&h.length?h.reduce(function(m,o){return[Math.min(m[0],o[0]),Math.max(m[1],o[1])]},[1/0,-1/0]):null},f8=function(t,r,n,s,u){var h=r.map(function(o){var _=o.props.dataKey;return n==="number"&&_&&h8(t,o,_,s)||Ly(t,_,n,u)});if(n==="number")return h.reduce(function(o,_){return[Math.min(o[0],_[0]),Math.max(o[1],_[1])]},[1/0,-1/0]);var m={};return h.reduce(function(o,_){for(var E=0,S=_.length;E<S;E++)m[_[E]]||(m[_[E]]=!0,o.push(_[E]));return o},[])},p8=function(t,r){return t==="horizontal"&&r==="xAxis"||t==="vertical"&&r==="yAxis"||t==="centric"&&r==="angleAxis"||t==="radial"&&r==="radiusAxis"},m8=function(t,r,n,s){if(s)return t.map(function(o){return o.coordinate});var u,h,m=t.map(function(o){return o.coordinate===r&&(u=!0),o.coordinate===n&&(h=!0),o.coordinate});return u||m.push(r),h||m.push(n),m},Gl=function(t,r,n){if(!t)return null;var s=t.scale,u=t.duplicateDomain,h=t.type,m=t.range,o=t.realScaleType==="scaleBand"?s.bandwidth()/2:2,_=(r||n)&&h==="category"&&s.bandwidth?s.bandwidth()/o:0;if(_=t.axisType==="angleAxis"&&(m==null?void 0:m.length)>=2?Ps(m[0]-m[1])*2*_:_,r&&(t.ticks||t.niceTicks)){var E=(t.ticks||t.niceTicks).map(function(S){var A=u?u.indexOf(S):S;return{coordinate:s(A)+_,value:S,offset:_}});return E.filter(function(S){return!s_(S.coordinate)})}return t.isCategorical&&t.categoricalDomain?t.categoricalDomain.map(function(S,A){return{coordinate:s(S)+_,value:S,index:A,offset:_}}):s.ticks&&!n?s.ticks(t.tickCount).map(function(S){return{coordinate:s(S)+_,value:S,offset:_}}):s.domain().map(function(S,A){return{coordinate:s(S)+_,value:u?u[S]:S,index:A,offset:_}})},rA=new WeakMap,S0=function(t,r){if(typeof r!="function")return t;rA.has(t)||rA.set(t,new WeakMap);var n=rA.get(t);if(n.has(r))return n.get(r);var s=function(){t.apply(void 0,arguments),r.apply(void 0,arguments)};return n.set(r,s),s},G_e=function(t,r,n){var s=t.scale,u=t.type,h=t.layout,m=t.axisType;if(s==="auto")return h==="radial"&&m==="radiusAxis"?{scale:mv(),realScaleType:"band"}:h==="radial"&&m==="angleAxis"?{scale:Jb(),realScaleType:"linear"}:u==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!n)?{scale:Ry(),realScaleType:"point"}:u==="category"?{scale:mv(),realScaleType:"band"}:{scale:Jb(),realScaleType:"linear"};if(a_(s)){var o="scale".concat(jw(s));return{scale:(IN[o]||Ry)(),realScaleType:IN[o]?o:"point"}}return Rr(s)?{scale:s}:{scale:Ry(),realScaleType:"point"}},NN=1e-4,W_e=function(t){var r=t.domain();if(!(!r||r.length<=2)){var n=r.length,s=t.range(),u=Math.min(s[0],s[1])-NN,h=Math.max(s[0],s[1])+NN,m=t(r[0]),o=t(r[n-1]);(m<u||m>h||o<u||o>h)&&t.domain([r[0],r[n-1]])}},q_e=function(t,r){if(!t)return null;for(var n=0,s=t.length;n<s;n++)if(t[n].item===r)return t[n].position;return null},H_e=function(t,r){if(!r||r.length!==2||!Vt(r[0])||!Vt(r[1]))return t;var n=Math.min(r[0],r[1]),s=Math.max(r[0],r[1]),u=[t[0],t[1]];return(!Vt(t[0])||t[0]<n)&&(u[0]=n),(!Vt(t[1])||t[1]>s)&&(u[1]=s),u[0]>s&&(u[0]=s),u[1]<n&&(u[1]=n),u},X_e=function(t){var r=t.length;if(!(r<=0))for(var n=0,s=t[0].length;n<s;++n)for(var u=0,h=0,m=0;m<r;++m){var o=s_(t[m][n][1])?t[m][n][0]:t[m][n][1];o>=0?(t[m][n][0]=u,t[m][n][1]=u+o,u=t[m][n][1]):(t[m][n][0]=h,t[m][n][1]=h+o,h=t[m][n][1])}},Z_e=function(t){var r=t.length;if(!(r<=0))for(var n=0,s=t[0].length;n<s;++n)for(var u=0,h=0;h<r;++h){var m=s_(t[h][n][1])?t[h][n][0]:t[h][n][1];m>=0?(t[h][n][0]=u,t[h][n][1]=u+m,u=t[h][n][1]):(t[h][n][0]=0,t[h][n][1]=0)}},K_e={sign:X_e,expand:dae,none:Ep,silhouette:hae,wiggle:fae,positive:Z_e},Y_e=function(t,r,n){var s=r.map(function(m){return m.props.dataKey}),u=K_e[n],h=uae().keys(s).value(function(m,o){return+_o(m,o,0)}).order(HP).offset(u);return h(t)},J_e=function(t,r,n,s,u,h){if(!t)return null;var m=h?r.reverse():r,o={},_=m.reduce(function(S,A){var I,R=(I=A.type)!==null&&I!==void 0&&I.defaultProps?ni(ni({},A.type.defaultProps),A.props):A.props,k=R.stackId,L=R.hide;if(L)return S;var N=R[n],z=S[N]||{hasStack:!1,stackGroups:{}};if(Si(k)){var F=z.stackGroups[k]||{numericAxisId:n,cateAxisId:s,items:[]};F.items.push(A),z.hasStack=!0,z.stackGroups[k]=F}else z.stackGroups[l_("_stackId_")]={numericAxisId:n,cateAxisId:s,items:[A]};return ni(ni({},S),{},rp({},N,z))},o),E={};return Object.keys(_).reduce(function(S,A){var I=_[A];if(I.hasStack){var R={};I.stackGroups=Object.keys(I.stackGroups).reduce(function(k,L){var N=I.stackGroups[L];return ni(ni({},k),{},rp({},L,{numericAxisId:n,cateAxisId:s,items:N.items,stackedData:Y_e(t,N.items,u)}))},R)}return ni(ni({},S),{},rp({},A,I))},E)},Q_e=function(t,r){var n=r.realScaleType,s=r.type,u=r.tickCount,h=r.originalDomain,m=r.allowDecimals,o=n||r.scale;if(o!=="auto"&&o!=="linear")return null;if(u&&s==="number"&&h&&(h[0]==="auto"||h[1]==="auto")){var _=t.domain();if(!_.length)return null;var E=u_e(_,u,m);return t.domain([Yw(E),Kw(E)]),{niceTicks:E}}if(u&&s==="number"){var S=t.domain(),A=d_e(S,u,m);return{niceTicks:A}}return null};function BN(e){var t=e.axis,r=e.ticks,n=e.bandSize,s=e.entry,u=e.index,h=e.dataKey;if(t.type==="category"){if(!t.allowDuplicatedCategory&&t.dataKey&&!Mr(s[t.dataKey])){var m=Ib(r,"value",s[t.dataKey]);if(m)return m.coordinate+n/2}return r[u]?r[u].coordinate+n/2:null}var o=_o(s,Mr(h)?t.dataKey:h);return Mr(o)?null:t.scale(o)}var $N=function(t){var r=t.axis,n=t.ticks,s=t.offset,u=t.bandSize,h=t.entry,m=t.index;if(r.type==="category")return n[m]?n[m].coordinate+s:null;var o=_o(h,r.dataKey,r.domain[m]);return Mr(o)?null:r.scale(o)-u/2+s},exe=function(t){var r=t.numericAxis,n=r.scale.domain();if(r.type==="number"){var s=Math.min(n[0],n[1]),u=Math.max(n[0],n[1]);return s<=0&&u>=0?0:u<0?u:s}return n[0]},txe=function(t,r){var n,s=(n=t.type)!==null&&n!==void 0&&n.defaultProps?ni(ni({},t.type.defaultProps),t.props):t.props,u=s.stackId;if(Si(u)){var h=r[u];if(h){var m=h.items.indexOf(t);return m>=0?h.stackedData[m]:null}}return null},rxe=function(t){return t.reduce(function(r,n){return[Yw(n.concat([r[0]]).filter(Vt)),Kw(n.concat([r[1]]).filter(Vt))]},[1/0,-1/0])},g8=function(t,r,n){return Object.keys(t).reduce(function(s,u){var h=t[u],m=h.stackedData,o=m.reduce(function(_,E){var S=rxe(E.slice(r,n+1));return[Math.min(_[0],S[0]),Math.max(_[1],S[1])]},[1/0,-1/0]);return[Math.min(o[0],s[0]),Math.max(o[1],s[1])]},[1/0,-1/0]).map(function(s){return s===1/0||s===-1/0?0:s})},FN=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,UN=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,SC=function(t,r,n){if(Rr(t))return t(r,n);if(!Array.isArray(t))return r;var s=[];if(Vt(t[0]))s[0]=n?t[0]:Math.min(t[0],r[0]);else if(FN.test(t[0])){var u=+FN.exec(t[0])[1];s[0]=r[0]-u}else Rr(t[0])?s[0]=t[0](r[0]):s[0]=r[0];if(Vt(t[1]))s[1]=n?t[1]:Math.max(t[1],r[1]);else if(UN.test(t[1])){var h=+UN.exec(t[1])[1];s[1]=r[1]+h}else Rr(t[1])?s[1]=t[1](r[1]):s[1]=r[1];return s},o1=function(t,r,n){if(t&&t.scale&&t.scale.bandwidth){var s=t.scale.bandwidth();if(!n||s>0)return s}if(t&&r&&r.length>=2){for(var u=YI(r,function(S){return S.coordinate}),h=1/0,m=1,o=u.length;m<o;m++){var _=u[m],E=u[m-1];h=Math.min((_.coordinate||0)-(E.coordinate||0),h)}return h===1/0?0:h}return n?void 0:0},VN=function(t,r,n){return!t||!t.length||Jw(t,Ba(n,"type.defaultProps.domain"))?r:t},y8=function(t,r){var n=t.type.defaultProps?ni(ni({},t.type.defaultProps),t.props):t.props,s=n.dataKey,u=n.name,h=n.unit,m=n.formatter,o=n.tooltipType,_=n.chartType,E=n.hide;return ni(ni({},Br(t,!1)),{},{dataKey:s,unit:h,formatter:m,name:u||s,color:EO(t),value:_o(r,s),type:o,payload:r,chartType:_,hide:E})};function Ev(e){"@babel/helpers - typeof";return Ev=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ev(e)}function GN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function WN(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?GN(Object(r),!0).forEach(function(n){nxe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):GN(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function nxe(e,t,r){return t=ixe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ixe(e){var t=oxe(e,"string");return Ev(t)=="symbol"?t:t+""}function oxe(e,t){if(Ev(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Ev(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var a1=Math.PI/180,axe=function(t){return t*180/Math.PI},Ui=function(t,r,n,s){return{x:t+Math.cos(-a1*s)*n,y:r+Math.sin(-a1*s)*n}},sxe=function(t,r){var n=t.x,s=t.y,u=r.x,h=r.y;return Math.sqrt(Math.pow(n-u,2)+Math.pow(s-h,2))},lxe=function(t,r){var n=t.x,s=t.y,u=r.cx,h=r.cy,m=sxe({x:n,y:s},{x:u,y:h});if(m<=0)return{radius:m};var o=(n-u)/m,_=Math.acos(o);return s>h&&(_=2*Math.PI-_),{radius:m,angle:axe(_),angleInRadian:_}},cxe=function(t){var r=t.startAngle,n=t.endAngle,s=Math.floor(r/360),u=Math.floor(n/360),h=Math.min(s,u);return{startAngle:r-h*360,endAngle:n-h*360}},uxe=function(t,r){var n=r.startAngle,s=r.endAngle,u=Math.floor(n/360),h=Math.floor(s/360),m=Math.min(u,h);return t+m*360},qN=function(t,r){var n=t.x,s=t.y,u=lxe({x:n,y:s},r),h=u.radius,m=u.angle,o=r.innerRadius,_=r.outerRadius;if(h<o||h>_)return!1;if(h===0)return!0;var E=cxe(r),S=E.startAngle,A=E.endAngle,I=m,R;if(S<=A){for(;I>A;)I-=360;for(;I<S;)I+=360;R=I>=S&&I<=A}else{for(;I>S;)I-=360;for(;I<A;)I+=360;R=I>=A&&I<=S}return R?WN(WN({},r),{},{radius:h,angle:uxe(I,r)}):null};function Tv(e){"@babel/helpers - typeof";return Tv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Tv(e)}var dxe=["offset"];function hxe(e){return gxe(e)||mxe(e)||pxe(e)||fxe()}function fxe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function pxe(e,t){if(e){if(typeof e=="string")return EC(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return EC(e,t)}}function mxe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function gxe(e){if(Array.isArray(e))return EC(e)}function EC(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function yxe(e,t){if(e==null)return{};var r=vxe(e,t),n,s;if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(e);for(s=0;s<u.length;s++)n=u[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function vxe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function HN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function xi(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?HN(Object(r),!0).forEach(function(n){_xe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):HN(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function _xe(e,t,r){return t=xxe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function xxe(e){var t=bxe(e,"string");return Tv(t)=="symbol"?t:t+""}function bxe(e,t){if(Tv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Tv(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Av(){return Av=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Av.apply(this,arguments)}var wxe=function(t){var r=t.value,n=t.formatter,s=Mr(t.children)?r:t.children;return Rr(n)?n(s):s},Sxe=function(t,r){var n=Ps(r-t),s=Math.min(Math.abs(r-t),360);return n*s},Exe=function(t,r,n){var s=t.position,u=t.viewBox,h=t.offset,m=t.className,o=u,_=o.cx,E=o.cy,S=o.innerRadius,A=o.outerRadius,I=o.startAngle,R=o.endAngle,k=o.clockWise,L=(S+A)/2,N=Sxe(I,R),z=N>=0?1:-1,F,U;s==="insideStart"?(F=I+z*h,U=k):s==="insideEnd"?(F=R-z*h,U=!k):s==="end"&&(F=R+z*h,U=k),U=N<=0?U:!U;var W=Ui(_,E,L,F),Y=Ui(_,E,L,F+(U?1:-1)*359),Q="M".concat(W.x,",").concat(W.y,`
    A`).concat(L,",").concat(L,",0,1,").concat(U?0:1,`,
    `).concat(Y.x,",").concat(Y.y),Z=Mr(t.id)?l_("recharts-radial-line-"):t.id;return be.createElement("text",Av({},n,{dominantBaseline:"central",className:Fr("recharts-radial-bar-label",m)}),be.createElement("defs",null,be.createElement("path",{id:Z,d:Q})),be.createElement("textPath",{xlinkHref:"#".concat(Z)},r))},Txe=function(t){var r=t.viewBox,n=t.offset,s=t.position,u=r,h=u.cx,m=u.cy,o=u.innerRadius,_=u.outerRadius,E=u.startAngle,S=u.endAngle,A=(E+S)/2;if(s==="outside"){var I=Ui(h,m,_+n,A),R=I.x,k=I.y;return{x:R,y:k,textAnchor:R>=h?"start":"end",verticalAnchor:"middle"}}if(s==="center")return{x:h,y:m,textAnchor:"middle",verticalAnchor:"middle"};if(s==="centerTop")return{x:h,y:m,textAnchor:"middle",verticalAnchor:"start"};if(s==="centerBottom")return{x:h,y:m,textAnchor:"middle",verticalAnchor:"end"};var L=(o+_)/2,N=Ui(h,m,L,A),z=N.x,F=N.y;return{x:z,y:F,textAnchor:"middle",verticalAnchor:"middle"}},Axe=function(t){var r=t.viewBox,n=t.parentViewBox,s=t.offset,u=t.position,h=r,m=h.x,o=h.y,_=h.width,E=h.height,S=E>=0?1:-1,A=S*s,I=S>0?"end":"start",R=S>0?"start":"end",k=_>=0?1:-1,L=k*s,N=k>0?"end":"start",z=k>0?"start":"end";if(u==="top"){var F={x:m+_/2,y:o-S*s,textAnchor:"middle",verticalAnchor:I};return xi(xi({},F),n?{height:Math.max(o-n.y,0),width:_}:{})}if(u==="bottom"){var U={x:m+_/2,y:o+E+A,textAnchor:"middle",verticalAnchor:R};return xi(xi({},U),n?{height:Math.max(n.y+n.height-(o+E),0),width:_}:{})}if(u==="left"){var W={x:m-L,y:o+E/2,textAnchor:N,verticalAnchor:"middle"};return xi(xi({},W),n?{width:Math.max(W.x-n.x,0),height:E}:{})}if(u==="right"){var Y={x:m+_+L,y:o+E/2,textAnchor:z,verticalAnchor:"middle"};return xi(xi({},Y),n?{width:Math.max(n.x+n.width-Y.x,0),height:E}:{})}var Q=n?{width:_,height:E}:{};return u==="insideLeft"?xi({x:m+L,y:o+E/2,textAnchor:z,verticalAnchor:"middle"},Q):u==="insideRight"?xi({x:m+_-L,y:o+E/2,textAnchor:N,verticalAnchor:"middle"},Q):u==="insideTop"?xi({x:m+_/2,y:o+A,textAnchor:"middle",verticalAnchor:R},Q):u==="insideBottom"?xi({x:m+_/2,y:o+E-A,textAnchor:"middle",verticalAnchor:I},Q):u==="insideTopLeft"?xi({x:m+L,y:o+A,textAnchor:z,verticalAnchor:R},Q):u==="insideTopRight"?xi({x:m+_-L,y:o+A,textAnchor:N,verticalAnchor:R},Q):u==="insideBottomLeft"?xi({x:m+L,y:o+E-A,textAnchor:z,verticalAnchor:I},Q):u==="insideBottomRight"?xi({x:m+_-L,y:o+E-A,textAnchor:N,verticalAnchor:I},Q):nm(u)&&(Vt(u.x)||Bd(u.x))&&(Vt(u.y)||Bd(u.y))?xi({x:m+sh(u.x,_),y:o+sh(u.y,E),textAnchor:"end",verticalAnchor:"end"},Q):xi({x:m+_/2,y:o+E/2,textAnchor:"middle",verticalAnchor:"middle"},Q)},Pxe=function(t){return"cx"in t&&Vt(t.cx)};function Ri(e){var t=e.offset,r=t===void 0?5:t,n=yxe(e,dxe),s=xi({offset:r},n),u=s.viewBox,h=s.position,m=s.value,o=s.children,_=s.content,E=s.className,S=E===void 0?"":E,A=s.textBreakAll;if(!u||Mr(m)&&Mr(o)&&!V.isValidElement(_)&&!Rr(_))return null;if(V.isValidElement(_))return V.cloneElement(_,s);var I;if(Rr(_)){if(I=V.createElement(_,s),V.isValidElement(I))return I}else I=wxe(s);var R=Pxe(u),k=Br(s,!0);if(R&&(h==="insideStart"||h==="insideEnd"||h==="end"))return Exe(s,I,k);var L=R?Txe(s):Axe(s);return be.createElement(Wb,Av({className:Fr("recharts-label",S)},k,L,{breakAll:A}),I)}Ri.displayName="Label";var v8=function(t){var r=t.cx,n=t.cy,s=t.angle,u=t.startAngle,h=t.endAngle,m=t.r,o=t.radius,_=t.innerRadius,E=t.outerRadius,S=t.x,A=t.y,I=t.top,R=t.left,k=t.width,L=t.height,N=t.clockWise,z=t.labelViewBox;if(z)return z;if(Vt(k)&&Vt(L)){if(Vt(S)&&Vt(A))return{x:S,y:A,width:k,height:L};if(Vt(I)&&Vt(R))return{x:I,y:R,width:k,height:L}}return Vt(S)&&Vt(A)?{x:S,y:A,width:0,height:0}:Vt(r)&&Vt(n)?{cx:r,cy:n,startAngle:u||s||0,endAngle:h||s||0,innerRadius:_||0,outerRadius:E||o||m||0,clockWise:N}:t.viewBox?t.viewBox:{}},Cxe=function(t,r){return t?t===!0?be.createElement(Ri,{key:"label-implicit",viewBox:r}):Si(t)?be.createElement(Ri,{key:"label-implicit",viewBox:r,value:t}):V.isValidElement(t)?t.type===Ri?V.cloneElement(t,{key:"label-implicit",viewBox:r}):be.createElement(Ri,{key:"label-implicit",content:t,viewBox:r}):Rr(t)?be.createElement(Ri,{key:"label-implicit",content:t,viewBox:r}):nm(t)?be.createElement(Ri,Av({viewBox:r},t,{key:"label-implicit"})):null:null},Mxe=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&n&&!t.label)return null;var s=t.children,u=v8(t),h=da(s,Ri).map(function(o,_){return V.cloneElement(o,{viewBox:r||u,key:"label-".concat(_)})});if(!n)return h;var m=Cxe(t.label,r||u);return[m].concat(hxe(h))};Ri.parseViewBox=v8;Ri.renderCallByParent=Mxe;function Ixe(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}var Oxe=Ixe;const kxe=sn(Oxe);function Pv(e){"@babel/helpers - typeof";return Pv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Pv(e)}var Dxe=["valueAccessor"],Rxe=["data","dataKey","clockWise","id","textBreakAll"];function Lxe(e){return Bxe(e)||Nxe(e)||zxe(e)||jxe()}function jxe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function zxe(e,t){if(e){if(typeof e=="string")return TC(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return TC(e,t)}}function Nxe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Bxe(e){if(Array.isArray(e))return TC(e)}function TC(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function s1(){return s1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},s1.apply(this,arguments)}function XN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function ZN(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?XN(Object(r),!0).forEach(function(n){$xe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):XN(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function $xe(e,t,r){return t=Fxe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Fxe(e){var t=Uxe(e,"string");return Pv(t)=="symbol"?t:t+""}function Uxe(e,t){if(Pv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Pv(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function KN(e,t){if(e==null)return{};var r=Vxe(e,t),n,s;if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(e);for(s=0;s<u.length;s++)n=u[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Vxe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var Gxe=function(t){return Array.isArray(t.value)?kxe(t.value):t.value};function bu(e){var t=e.valueAccessor,r=t===void 0?Gxe:t,n=KN(e,Dxe),s=n.data,u=n.dataKey,h=n.clockWise,m=n.id,o=n.textBreakAll,_=KN(n,Rxe);return!s||!s.length?null:be.createElement(Xn,{className:"recharts-label-list"},s.map(function(E,S){var A=Mr(u)?r(E,S):_o(E&&E.payload,u),I=Mr(m)?{}:{id:"".concat(m,"-").concat(S)};return be.createElement(Ri,s1({},Br(E,!0),_,I,{parentViewBox:E.parentViewBox,value:A,textBreakAll:o,viewBox:Ri.parseViewBox(Mr(h)?E:ZN(ZN({},E),{},{clockWise:h})),key:"label-".concat(S),index:S}))}))}bu.displayName="LabelList";function Wxe(e,t){return e?e===!0?be.createElement(bu,{key:"labelList-implicit",data:t}):be.isValidElement(e)||Rr(e)?be.createElement(bu,{key:"labelList-implicit",data:t,content:e}):nm(e)?be.createElement(bu,s1({data:t},e,{key:"labelList-implicit"})):null:null}function qxe(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var n=e.children,s=da(n,bu).map(function(h,m){return V.cloneElement(h,{data:t,key:"labelList-".concat(m)})});if(!r)return s;var u=Wxe(e.label,t);return[u].concat(Lxe(s))}bu.renderCallByParent=qxe;function Cv(e){"@babel/helpers - typeof";return Cv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Cv(e)}function AC(){return AC=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},AC.apply(this,arguments)}function YN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function JN(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?YN(Object(r),!0).forEach(function(n){Hxe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):YN(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Hxe(e,t,r){return t=Xxe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Xxe(e){var t=Zxe(e,"string");return Cv(t)=="symbol"?t:t+""}function Zxe(e,t){if(Cv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Cv(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Kxe=function(t,r){var n=Ps(r-t),s=Math.min(Math.abs(r-t),359.999);return n*s},E0=function(t){var r=t.cx,n=t.cy,s=t.radius,u=t.angle,h=t.sign,m=t.isExternal,o=t.cornerRadius,_=t.cornerIsExternal,E=o*(m?1:-1)+s,S=Math.asin(o/E)/a1,A=_?u:u+h*S,I=Ui(r,n,E,A),R=Ui(r,n,s,A),k=_?u-h*S:u,L=Ui(r,n,E*Math.cos(S*a1),k);return{center:I,circleTangency:R,lineTangency:L,theta:S}},_8=function(t){var r=t.cx,n=t.cy,s=t.innerRadius,u=t.outerRadius,h=t.startAngle,m=t.endAngle,o=Kxe(h,m),_=h+o,E=Ui(r,n,u,h),S=Ui(r,n,u,_),A="M ".concat(E.x,",").concat(E.y,`
    A `).concat(u,",").concat(u,`,0,
    `).concat(+(Math.abs(o)>180),",").concat(+(h>_),`,
    `).concat(S.x,",").concat(S.y,`
  `);if(s>0){var I=Ui(r,n,s,h),R=Ui(r,n,s,_);A+="L ".concat(R.x,",").concat(R.y,`
            A `).concat(s,",").concat(s,`,0,
            `).concat(+(Math.abs(o)>180),",").concat(+(h<=_),`,
            `).concat(I.x,",").concat(I.y," Z")}else A+="L ".concat(r,",").concat(n," Z");return A},Yxe=function(t){var r=t.cx,n=t.cy,s=t.innerRadius,u=t.outerRadius,h=t.cornerRadius,m=t.forceCornerRadius,o=t.cornerIsExternal,_=t.startAngle,E=t.endAngle,S=Ps(E-_),A=E0({cx:r,cy:n,radius:u,angle:_,sign:S,cornerRadius:h,cornerIsExternal:o}),I=A.circleTangency,R=A.lineTangency,k=A.theta,L=E0({cx:r,cy:n,radius:u,angle:E,sign:-S,cornerRadius:h,cornerIsExternal:o}),N=L.circleTangency,z=L.lineTangency,F=L.theta,U=o?Math.abs(_-E):Math.abs(_-E)-k-F;if(U<0)return m?"M ".concat(R.x,",").concat(R.y,`
        a`).concat(h,",").concat(h,",0,0,1,").concat(h*2,`,0
        a`).concat(h,",").concat(h,",0,0,1,").concat(-h*2,`,0
      `):_8({cx:r,cy:n,innerRadius:s,outerRadius:u,startAngle:_,endAngle:E});var W="M ".concat(R.x,",").concat(R.y,`
    A`).concat(h,",").concat(h,",0,0,").concat(+(S<0),",").concat(I.x,",").concat(I.y,`
    A`).concat(u,",").concat(u,",0,").concat(+(U>180),",").concat(+(S<0),",").concat(N.x,",").concat(N.y,`
    A`).concat(h,",").concat(h,",0,0,").concat(+(S<0),",").concat(z.x,",").concat(z.y,`
  `);if(s>0){var Y=E0({cx:r,cy:n,radius:s,angle:_,sign:S,isExternal:!0,cornerRadius:h,cornerIsExternal:o}),Q=Y.circleTangency,Z=Y.lineTangency,re=Y.theta,ne=E0({cx:r,cy:n,radius:s,angle:E,sign:-S,isExternal:!0,cornerRadius:h,cornerIsExternal:o}),ue=ne.circleTangency,fe=ne.lineTangency,Ee=ne.theta,Se=o?Math.abs(_-E):Math.abs(_-E)-re-Ee;if(Se<0&&h===0)return"".concat(W,"L").concat(r,",").concat(n,"Z");W+="L".concat(fe.x,",").concat(fe.y,`
      A`).concat(h,",").concat(h,",0,0,").concat(+(S<0),",").concat(ue.x,",").concat(ue.y,`
      A`).concat(s,",").concat(s,",0,").concat(+(Se>180),",").concat(+(S>0),",").concat(Q.x,",").concat(Q.y,`
      A`).concat(h,",").concat(h,",0,0,").concat(+(S<0),",").concat(Z.x,",").concat(Z.y,"Z")}else W+="L".concat(r,",").concat(n,"Z");return W},Jxe={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},x8=function(t){var r=JN(JN({},Jxe),t),n=r.cx,s=r.cy,u=r.innerRadius,h=r.outerRadius,m=r.cornerRadius,o=r.forceCornerRadius,_=r.cornerIsExternal,E=r.startAngle,S=r.endAngle,A=r.className;if(h<u||E===S)return null;var I=Fr("recharts-sector",A),R=h-u,k=sh(m,R,0,!0),L;return k>0&&Math.abs(E-S)<360?L=Yxe({cx:n,cy:s,innerRadius:u,outerRadius:h,cornerRadius:Math.min(k,R/2),forceCornerRadius:o,cornerIsExternal:_,startAngle:E,endAngle:S}):L=_8({cx:n,cy:s,innerRadius:u,outerRadius:h,startAngle:E,endAngle:S}),be.createElement("path",AC({},Br(r,!0),{className:I,d:L,role:"img"}))};function Mv(e){"@babel/helpers - typeof";return Mv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Mv(e)}function PC(){return PC=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},PC.apply(this,arguments)}function QN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function e3(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?QN(Object(r),!0).forEach(function(n){Qxe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):QN(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Qxe(e,t,r){return t=e0e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function e0e(e){var t=t0e(e,"string");return Mv(t)=="symbol"?t:t+""}function t0e(e,t){if(Mv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Mv(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var t3={curveBasisClosed:Qoe,curveBasisOpen:eae,curveBasis:Joe,curveBumpX:Noe,curveBumpY:Boe,curveLinearClosed:tae,curveLinear:Nw,curveMonotoneX:rae,curveMonotoneY:nae,curveNatural:iae,curveStep:oae,curveStepAfter:sae,curveStepBefore:aae},T0=function(t){return t.x===+t.x&&t.y===+t.y},ly=function(t){return t.x},cy=function(t){return t.y},r0e=function(t,r){if(Rr(t))return t;var n="curve".concat(jw(t));return(n==="curveMonotone"||n==="curveBump")&&r?t3["".concat(n).concat(r==="vertical"?"Y":"X")]:t3[n]||Nw},n0e=function(t){var r=t.type,n=r===void 0?"linear":r,s=t.points,u=s===void 0?[]:s,h=t.baseLine,m=t.layout,o=t.connectNulls,_=o===void 0?!1:o,E=r0e(n,m),S=_?u.filter(function(k){return T0(k)}):u,A;if(Array.isArray(h)){var I=_?h.filter(function(k){return T0(k)}):h,R=S.map(function(k,L){return e3(e3({},k),{},{base:I[L]})});return m==="vertical"?A=m0().y(cy).x1(ly).x0(function(k){return k.base.x}):A=m0().x(ly).y1(cy).y0(function(k){return k.base.y}),A.defined(T0).curve(E),A(R)}return m==="vertical"&&Vt(h)?A=m0().y(cy).x1(ly).x0(h):Vt(h)?A=m0().x(ly).y1(cy).y0(h):A=b6().x(ly).y(cy),A.defined(T0).curve(E),A(S)},CC=function(t){var r=t.className,n=t.points,s=t.path,u=t.pathRef;if((!n||!n.length)&&!s)return null;var h=n&&n.length?n0e(t):s;return be.createElement("path",PC({},Br(t,!1),Ob(t),{className:Fr("recharts-curve",r),d:h,ref:u}))},b8={exports:{}},i0e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",o0e=i0e,a0e=o0e;function w8(){}function S8(){}S8.resetWarningCache=w8;var s0e=function(){function e(n,s,u,h,m,o){if(o!==a0e){var _=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw _.name="Invariant Violation",_}}e.isRequired=e;function t(){return e}var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:S8,resetWarningCache:w8};return r.PropTypes=r,r};b8.exports=s0e();var l0e=b8.exports;const Tr=sn(l0e);var c0e=Object.getOwnPropertyNames,u0e=Object.getOwnPropertySymbols,d0e=Object.prototype.hasOwnProperty;function r3(e,t){return function(n,s,u){return e(n,s,u)&&t(n,s,u)}}function A0(e){return function(r,n,s){if(!r||!n||typeof r!="object"||typeof n!="object")return e(r,n,s);var u=s.cache,h=u.get(r),m=u.get(n);if(h&&m)return h===n&&m===r;u.set(r,n),u.set(n,r);var o=e(r,n,s);return u.delete(r),u.delete(n),o}}function n3(e){return c0e(e).concat(u0e(e))}var E8=Object.hasOwn||function(e,t){return d0e.call(e,t)};function fm(e,t){return e||t?e===t:e===t||e!==e&&t!==t}var T8="_owner",i3=Object.getOwnPropertyDescriptor,o3=Object.keys;function h0e(e,t,r){var n=e.length;if(t.length!==n)return!1;for(;n-- >0;)if(!r.equals(e[n],t[n],n,n,e,t,r))return!1;return!0}function f0e(e,t){return fm(e.getTime(),t.getTime())}function a3(e,t,r){if(e.size!==t.size)return!1;for(var n={},s=e.entries(),u=0,h,m;(h=s.next())&&!h.done;){for(var o=t.entries(),_=!1,E=0;(m=o.next())&&!m.done;){var S=h.value,A=S[0],I=S[1],R=m.value,k=R[0],L=R[1];!_&&!n[E]&&(_=r.equals(A,k,u,E,e,t,r)&&r.equals(I,L,A,k,e,t,r))&&(n[E]=!0),E++}if(!_)return!1;u++}return!0}function p0e(e,t,r){var n=o3(e),s=n.length;if(o3(t).length!==s)return!1;for(var u;s-- >0;)if(u=n[s],u===T8&&(e.$$typeof||t.$$typeof)&&e.$$typeof!==t.$$typeof||!E8(t,u)||!r.equals(e[u],t[u],u,u,e,t,r))return!1;return!0}function uy(e,t,r){var n=n3(e),s=n.length;if(n3(t).length!==s)return!1;for(var u,h,m;s-- >0;)if(u=n[s],u===T8&&(e.$$typeof||t.$$typeof)&&e.$$typeof!==t.$$typeof||!E8(t,u)||!r.equals(e[u],t[u],u,u,e,t,r)||(h=i3(e,u),m=i3(t,u),(h||m)&&(!h||!m||h.configurable!==m.configurable||h.enumerable!==m.enumerable||h.writable!==m.writable)))return!1;return!0}function m0e(e,t){return fm(e.valueOf(),t.valueOf())}function g0e(e,t){return e.source===t.source&&e.flags===t.flags}function s3(e,t,r){if(e.size!==t.size)return!1;for(var n={},s=e.values(),u,h;(u=s.next())&&!u.done;){for(var m=t.values(),o=!1,_=0;(h=m.next())&&!h.done;)!o&&!n[_]&&(o=r.equals(u.value,h.value,u.value,h.value,e,t,r))&&(n[_]=!0),_++;if(!o)return!1}return!0}function y0e(e,t){var r=e.length;if(t.length!==r)return!1;for(;r-- >0;)if(e[r]!==t[r])return!1;return!0}var v0e="[object Arguments]",_0e="[object Boolean]",x0e="[object Date]",b0e="[object Map]",w0e="[object Number]",S0e="[object Object]",E0e="[object RegExp]",T0e="[object Set]",A0e="[object String]",P0e=Array.isArray,l3=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,c3=Object.assign,C0e=Object.prototype.toString.call.bind(Object.prototype.toString);function M0e(e){var t=e.areArraysEqual,r=e.areDatesEqual,n=e.areMapsEqual,s=e.areObjectsEqual,u=e.arePrimitiveWrappersEqual,h=e.areRegExpsEqual,m=e.areSetsEqual,o=e.areTypedArraysEqual;return function(E,S,A){if(E===S)return!0;if(E==null||S==null||typeof E!="object"||typeof S!="object")return E!==E&&S!==S;var I=E.constructor;if(I!==S.constructor)return!1;if(I===Object)return s(E,S,A);if(P0e(E))return t(E,S,A);if(l3!=null&&l3(E))return o(E,S,A);if(I===Date)return r(E,S,A);if(I===RegExp)return h(E,S,A);if(I===Map)return n(E,S,A);if(I===Set)return m(E,S,A);var R=C0e(E);return R===x0e?r(E,S,A):R===E0e?h(E,S,A):R===b0e?n(E,S,A):R===T0e?m(E,S,A):R===S0e?typeof E.then!="function"&&typeof S.then!="function"&&s(E,S,A):R===v0e?s(E,S,A):R===_0e||R===w0e||R===A0e?u(E,S,A):!1}}function I0e(e){var t=e.circular,r=e.createCustomConfig,n=e.strict,s={areArraysEqual:n?uy:h0e,areDatesEqual:f0e,areMapsEqual:n?r3(a3,uy):a3,areObjectsEqual:n?uy:p0e,arePrimitiveWrappersEqual:m0e,areRegExpsEqual:g0e,areSetsEqual:n?r3(s3,uy):s3,areTypedArraysEqual:n?uy:y0e};if(r&&(s=c3({},s,r(s))),t){var u=A0(s.areArraysEqual),h=A0(s.areMapsEqual),m=A0(s.areObjectsEqual),o=A0(s.areSetsEqual);s=c3({},s,{areArraysEqual:u,areMapsEqual:h,areObjectsEqual:m,areSetsEqual:o})}return s}function O0e(e){return function(t,r,n,s,u,h,m){return e(t,r,m)}}function k0e(e){var t=e.circular,r=e.comparator,n=e.createState,s=e.equals,u=e.strict;if(n)return function(o,_){var E=n(),S=E.cache,A=S===void 0?t?new WeakMap:void 0:S,I=E.meta;return r(o,_,{cache:A,equals:s,meta:I,strict:u})};if(t)return function(o,_){return r(o,_,{cache:new WeakMap,equals:s,meta:void 0,strict:u})};var h={cache:void 0,equals:s,meta:void 0,strict:u};return function(o,_){return r(o,_,h)}}var D0e=Fu();Fu({strict:!0});Fu({circular:!0});Fu({circular:!0,strict:!0});Fu({createInternalComparator:function(){return fm}});Fu({strict:!0,createInternalComparator:function(){return fm}});Fu({circular:!0,createInternalComparator:function(){return fm}});Fu({circular:!0,createInternalComparator:function(){return fm},strict:!0});function Fu(e){e===void 0&&(e={});var t=e.circular,r=t===void 0?!1:t,n=e.createInternalComparator,s=e.createState,u=e.strict,h=u===void 0?!1:u,m=I0e(e),o=M0e(m),_=n?n(o):O0e(o);return k0e({circular:r,comparator:o,createState:s,equals:_,strict:h})}function R0e(e){typeof requestAnimationFrame<"u"&&requestAnimationFrame(e)}function u3(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=-1,n=function s(u){r<0&&(r=u),u-r>t?(e(u),r=-1):R0e(s)};requestAnimationFrame(n)}function MC(e){"@babel/helpers - typeof";return MC=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},MC(e)}function L0e(e){return B0e(e)||N0e(e)||z0e(e)||j0e()}function j0e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function z0e(e,t){if(e){if(typeof e=="string")return d3(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return d3(e,t)}}function d3(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function N0e(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function B0e(e){if(Array.isArray(e))return e}function $0e(){var e={},t=function(){return null},r=!1,n=function s(u){if(!r){if(Array.isArray(u)){if(!u.length)return;var h=u,m=L0e(h),o=m[0],_=m.slice(1);if(typeof o=="number"){u3(s.bind(null,_),o);return}s(o),u3(s.bind(null,_));return}MC(u)==="object"&&(e=u,t(e)),typeof u=="function"&&u()}};return{stop:function(){r=!0},start:function(u){r=!1,n(u)},subscribe:function(u){return t=u,function(){t=function(){return null}}}}}function Iv(e){"@babel/helpers - typeof";return Iv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Iv(e)}function h3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function f3(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?h3(Object(r),!0).forEach(function(n){A8(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function A8(e,t,r){return t=F0e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function F0e(e){var t=U0e(e,"string");return Iv(t)==="symbol"?t:String(t)}function U0e(e,t){if(Iv(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Iv(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var V0e=function(t,r){return[Object.keys(t),Object.keys(r)].reduce(function(n,s){return n.filter(function(u){return s.includes(u)})})},G0e=function(t){return t},W0e=function(t){return t.replace(/([A-Z])/g,function(r){return"-".concat(r.toLowerCase())})},jy=function(t,r){return Object.keys(r).reduce(function(n,s){return f3(f3({},n),{},A8({},s,t(s,r[s])))},{})},p3=function(t,r,n){return t.map(function(s){return"".concat(W0e(s)," ").concat(r,"ms ").concat(n)}).join(",")};function q0e(e,t){return Z0e(e)||X0e(e,t)||P8(e,t)||H0e()}function H0e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function X0e(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,u,h,m=[],o=!0,_=!1;try{if(u=(r=r.call(e)).next,t!==0)for(;!(o=(n=u.call(r)).done)&&(m.push(n.value),m.length!==t);o=!0);}catch(E){_=!0,s=E}finally{try{if(!o&&r.return!=null&&(h=r.return(),Object(h)!==h))return}finally{if(_)throw s}}return m}}function Z0e(e){if(Array.isArray(e))return e}function K0e(e){return Q0e(e)||J0e(e)||P8(e)||Y0e()}function Y0e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function P8(e,t){if(e){if(typeof e=="string")return IC(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return IC(e,t)}}function J0e(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Q0e(e){if(Array.isArray(e))return IC(e)}function IC(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var l1=1e-4,C8=function(t,r){return[0,3*t,3*r-6*t,3*t-3*r+1]},M8=function(t,r){return t.map(function(n,s){return n*Math.pow(r,s)}).reduce(function(n,s){return n+s})},m3=function(t,r){return function(n){var s=C8(t,r);return M8(s,n)}},ebe=function(t,r){return function(n){var s=C8(t,r),u=[].concat(K0e(s.map(function(h,m){return h*m}).slice(1)),[0]);return M8(u,n)}},g3=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var s=r[0],u=r[1],h=r[2],m=r[3];if(r.length===1)switch(r[0]){case"linear":s=0,u=0,h=1,m=1;break;case"ease":s=.25,u=.1,h=.25,m=1;break;case"ease-in":s=.42,u=0,h=1,m=1;break;case"ease-out":s=.42,u=0,h=.58,m=1;break;case"ease-in-out":s=0,u=0,h=.58,m=1;break;default:{var o=r[0].split("(");if(o[0]==="cubic-bezier"&&o[1].split(")")[0].split(",").length===4){var _=o[1].split(")")[0].split(",").map(function(L){return parseFloat(L)}),E=q0e(_,4);s=E[0],u=E[1],h=E[2],m=E[3]}}}var S=m3(s,h),A=m3(u,m),I=ebe(s,h),R=function(N){return N>1?1:N<0?0:N},k=function(N){for(var z=N>1?1:N,F=z,U=0;U<8;++U){var W=S(F)-z,Y=I(F);if(Math.abs(W-z)<l1||Y<l1)return A(F);F=R(F-W/Y)}return A(F)};return k.isStepper=!1,k},tbe=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=t.stiff,n=r===void 0?100:r,s=t.damping,u=s===void 0?8:s,h=t.dt,m=h===void 0?17:h,o=function(E,S,A){var I=-(E-S)*n,R=A*u,k=A+(I-R)*m/1e3,L=A*m/1e3+E;return Math.abs(L-S)<l1&&Math.abs(k)<l1?[S,0]:[L,k]};return o.isStepper=!0,o.dt=m,o},rbe=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var s=r[0];if(typeof s=="string")switch(s){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return g3(s);case"spring":return tbe();default:if(s.split("(")[0]==="cubic-bezier")return g3(s)}return typeof s=="function"?s:null};function Ov(e){"@babel/helpers - typeof";return Ov=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ov(e)}function y3(e){return obe(e)||ibe(e)||I8(e)||nbe()}function nbe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ibe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function obe(e){if(Array.isArray(e))return kC(e)}function v3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Bi(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?v3(Object(r),!0).forEach(function(n){OC(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function OC(e,t,r){return t=abe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function abe(e){var t=sbe(e,"string");return Ov(t)==="symbol"?t:String(t)}function sbe(e,t){if(Ov(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Ov(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function lbe(e,t){return dbe(e)||ube(e,t)||I8(e,t)||cbe()}function cbe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function I8(e,t){if(e){if(typeof e=="string")return kC(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return kC(e,t)}}function kC(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function ube(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,u,h,m=[],o=!0,_=!1;try{if(u=(r=r.call(e)).next,t!==0)for(;!(o=(n=u.call(r)).done)&&(m.push(n.value),m.length!==t);o=!0);}catch(E){_=!0,s=E}finally{try{if(!o&&r.return!=null&&(h=r.return(),Object(h)!==h))return}finally{if(_)throw s}}return m}}function dbe(e){if(Array.isArray(e))return e}var c1=function(t,r,n){return t+(r-t)*n},DC=function(t){var r=t.from,n=t.to;return r!==n},hbe=function e(t,r,n){var s=jy(function(u,h){if(DC(h)){var m=t(h.from,h.to,h.velocity),o=lbe(m,2),_=o[0],E=o[1];return Bi(Bi({},h),{},{from:_,velocity:E})}return h},r);return n<1?jy(function(u,h){return DC(h)?Bi(Bi({},h),{},{velocity:c1(h.velocity,s[u].velocity,n),from:c1(h.from,s[u].from,n)}):h},r):e(t,s,n-1)};const fbe=function(e,t,r,n,s){var u=V0e(e,t),h=u.reduce(function(L,N){return Bi(Bi({},L),{},OC({},N,[e[N],t[N]]))},{}),m=u.reduce(function(L,N){return Bi(Bi({},L),{},OC({},N,{from:e[N],velocity:0,to:t[N]}))},{}),o=-1,_,E,S=function(){return null},A=function(){return jy(function(N,z){return z.from},m)},I=function(){return!Object.values(m).filter(DC).length},R=function(N){_||(_=N);var z=N-_,F=z/r.dt;m=hbe(r,m,F),s(Bi(Bi(Bi({},e),t),A())),_=N,I()||(o=requestAnimationFrame(S))},k=function(N){E||(E=N);var z=(N-E)/n,F=jy(function(W,Y){return c1.apply(void 0,y3(Y).concat([r(z)]))},h);if(s(Bi(Bi(Bi({},e),t),F)),z<1)o=requestAnimationFrame(S);else{var U=jy(function(W,Y){return c1.apply(void 0,y3(Y).concat([r(1)]))},h);s(Bi(Bi(Bi({},e),t),U))}};return S=r.isStepper?R:k,function(){return requestAnimationFrame(S),function(){cancelAnimationFrame(o)}}};function Dp(e){"@babel/helpers - typeof";return Dp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Dp(e)}var pbe=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function mbe(e,t){if(e==null)return{};var r=gbe(e,t),n,s;if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(e);for(s=0;s<u.length;s++)n=u[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function gbe(e,t){if(e==null)return{};var r={},n=Object.keys(e),s,u;for(u=0;u<n.length;u++)s=n[u],!(t.indexOf(s)>=0)&&(r[s]=e[s]);return r}function nA(e){return xbe(e)||_be(e)||vbe(e)||ybe()}function ybe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function vbe(e,t){if(e){if(typeof e=="string")return RC(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return RC(e,t)}}function _be(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function xbe(e){if(Array.isArray(e))return RC(e)}function RC(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function _3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function vs(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?_3(Object(r),!0).forEach(function(n){vy(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function vy(e,t,r){return t=O8(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function bbe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function wbe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,O8(n.key),n)}}function Sbe(e,t,r){return t&&wbe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function O8(e){var t=Ebe(e,"string");return Dp(t)==="symbol"?t:String(t)}function Ebe(e,t){if(Dp(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Dp(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Tbe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&LC(e,t)}function LC(e,t){return LC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},LC(e,t)}function Abe(e){var t=Pbe();return function(){var n=u1(e),s;if(t){var u=u1(this).constructor;s=Reflect.construct(n,arguments,u)}else s=n.apply(this,arguments);return jC(this,s)}}function jC(e,t){if(t&&(Dp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return zC(e)}function zC(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Pbe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function u1(e){return u1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},u1(e)}var sc=function(e){Tbe(r,e);var t=Abe(r);function r(n,s){var u;bbe(this,r),u=t.call(this,n,s);var h=u.props,m=h.isActive,o=h.attributeName,_=h.from,E=h.to,S=h.steps,A=h.children,I=h.duration;if(u.handleStyleChange=u.handleStyleChange.bind(zC(u)),u.changeStyle=u.changeStyle.bind(zC(u)),!m||I<=0)return u.state={style:{}},typeof A=="function"&&(u.state={style:E}),jC(u);if(S&&S.length)u.state={style:S[0].style};else if(_){if(typeof A=="function")return u.state={style:_},jC(u);u.state={style:o?vy({},o,_):_}}else u.state={style:{}};return u}return Sbe(r,[{key:"componentDidMount",value:function(){var s=this.props,u=s.isActive,h=s.canBegin;this.mounted=!0,!(!u||!h)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(s){var u=this.props,h=u.isActive,m=u.canBegin,o=u.attributeName,_=u.shouldReAnimate,E=u.to,S=u.from,A=this.state.style;if(m){if(!h){var I={style:o?vy({},o,E):E};this.state&&A&&(o&&A[o]!==E||!o&&A!==E)&&this.setState(I);return}if(!(D0e(s.to,E)&&s.canBegin&&s.isActive)){var R=!s.canBegin||!s.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var k=R||_?S:s.to;if(this.state&&A){var L={style:o?vy({},o,k):k};(o&&A[o]!==k||!o&&A!==k)&&this.setState(L)}this.runAnimation(vs(vs({},this.props),{},{from:k,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var s=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),s&&s()}},{key:"handleStyleChange",value:function(s){this.changeStyle(s)}},{key:"changeStyle",value:function(s){this.mounted&&this.setState({style:s})}},{key:"runJSAnimation",value:function(s){var u=this,h=s.from,m=s.to,o=s.duration,_=s.easing,E=s.begin,S=s.onAnimationEnd,A=s.onAnimationStart,I=fbe(h,m,rbe(_),o,this.changeStyle),R=function(){u.stopJSAnimation=I()};this.manager.start([A,E,R,o,S])}},{key:"runStepAnimation",value:function(s){var u=this,h=s.steps,m=s.begin,o=s.onAnimationStart,_=h[0],E=_.style,S=_.duration,A=S===void 0?0:S,I=function(k,L,N){if(N===0)return k;var z=L.duration,F=L.easing,U=F===void 0?"ease":F,W=L.style,Y=L.properties,Q=L.onAnimationEnd,Z=N>0?h[N-1]:L,re=Y||Object.keys(W);if(typeof U=="function"||U==="spring")return[].concat(nA(k),[u.runJSAnimation.bind(u,{from:Z.style,to:W,duration:z,easing:U}),z]);var ne=p3(re,z,U),ue=vs(vs(vs({},Z.style),W),{},{transition:ne});return[].concat(nA(k),[ue,z,Q]).filter(G0e)};return this.manager.start([o].concat(nA(h.reduce(I,[E,Math.max(A,m)])),[s.onAnimationEnd]))}},{key:"runAnimation",value:function(s){this.manager||(this.manager=$0e());var u=s.begin,h=s.duration,m=s.attributeName,o=s.to,_=s.easing,E=s.onAnimationStart,S=s.onAnimationEnd,A=s.steps,I=s.children,R=this.manager;if(this.unSubscribe=R.subscribe(this.handleStyleChange),typeof _=="function"||typeof I=="function"||_==="spring"){this.runJSAnimation(s);return}if(A.length>1){this.runStepAnimation(s);return}var k=m?vy({},m,o):o,L=p3(Object.keys(k),h,_);R.start([E,u,vs(vs({},k),{},{transition:L}),h,S])}},{key:"render",value:function(){var s=this.props,u=s.children;s.begin;var h=s.duration;s.attributeName,s.easing;var m=s.isActive;s.steps,s.from,s.to,s.canBegin,s.onAnimationEnd,s.shouldReAnimate,s.onAnimationReStart;var o=mbe(s,pbe),_=V.Children.count(u),E=this.state.style;if(typeof u=="function")return u(E);if(!m||_===0||h<=0)return u;var S=function(I){var R=I.props,k=R.style,L=k===void 0?{}:k,N=R.className,z=V.cloneElement(I,vs(vs({},o),{},{style:vs(vs({},L),E),className:N}));return z};return _===1?S(V.Children.only(u)):be.createElement("div",null,V.Children.map(u,function(A){return S(A)}))}}]),r}(V.PureComponent);sc.displayName="Animate";sc.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};sc.propTypes={from:Tr.oneOfType([Tr.object,Tr.string]),to:Tr.oneOfType([Tr.object,Tr.string]),attributeName:Tr.string,duration:Tr.number,begin:Tr.number,easing:Tr.oneOfType([Tr.string,Tr.func]),steps:Tr.arrayOf(Tr.shape({duration:Tr.number.isRequired,style:Tr.object.isRequired,easing:Tr.oneOfType([Tr.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),Tr.func]),properties:Tr.arrayOf("string"),onAnimationEnd:Tr.func})),children:Tr.oneOfType([Tr.node,Tr.func]),isActive:Tr.bool,canBegin:Tr.bool,onAnimationEnd:Tr.func,shouldReAnimate:Tr.bool,onAnimationStart:Tr.func,onAnimationReStart:Tr.func};Tr.object,Tr.object,Tr.object,Tr.element;Tr.object,Tr.object,Tr.object,Tr.oneOfType([Tr.array,Tr.element]),Tr.any;function kv(e){"@babel/helpers - typeof";return kv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},kv(e)}function d1(){return d1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},d1.apply(this,arguments)}function Cbe(e,t){return kbe(e)||Obe(e,t)||Ibe(e,t)||Mbe()}function Mbe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ibe(e,t){if(e){if(typeof e=="string")return x3(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return x3(e,t)}}function x3(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Obe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,u,h,m=[],o=!0,_=!1;try{if(u=(r=r.call(e)).next,t!==0)for(;!(o=(n=u.call(r)).done)&&(m.push(n.value),m.length!==t);o=!0);}catch(E){_=!0,s=E}finally{try{if(!o&&r.return!=null&&(h=r.return(),Object(h)!==h))return}finally{if(_)throw s}}return m}}function kbe(e){if(Array.isArray(e))return e}function b3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function w3(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?b3(Object(r),!0).forEach(function(n){Dbe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Dbe(e,t,r){return t=Rbe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Rbe(e){var t=Lbe(e,"string");return kv(t)=="symbol"?t:t+""}function Lbe(e,t){if(kv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(kv(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var S3=function(t,r,n,s,u){var h=Math.min(Math.abs(n)/2,Math.abs(s)/2),m=s>=0?1:-1,o=n>=0?1:-1,_=s>=0&&n>=0||s<0&&n<0?1:0,E;if(h>0&&u instanceof Array){for(var S=[0,0,0,0],A=0,I=4;A<I;A++)S[A]=u[A]>h?h:u[A];E="M".concat(t,",").concat(r+m*S[0]),S[0]>0&&(E+="A ".concat(S[0],",").concat(S[0],",0,0,").concat(_,",").concat(t+o*S[0],",").concat(r)),E+="L ".concat(t+n-o*S[1],",").concat(r),S[1]>0&&(E+="A ".concat(S[1],",").concat(S[1],",0,0,").concat(_,`,
        `).concat(t+n,",").concat(r+m*S[1])),E+="L ".concat(t+n,",").concat(r+s-m*S[2]),S[2]>0&&(E+="A ".concat(S[2],",").concat(S[2],",0,0,").concat(_,`,
        `).concat(t+n-o*S[2],",").concat(r+s)),E+="L ".concat(t+o*S[3],",").concat(r+s),S[3]>0&&(E+="A ".concat(S[3],",").concat(S[3],",0,0,").concat(_,`,
        `).concat(t,",").concat(r+s-m*S[3])),E+="Z"}else if(h>0&&u===+u&&u>0){var R=Math.min(h,u);E="M ".concat(t,",").concat(r+m*R,`
            A `).concat(R,",").concat(R,",0,0,").concat(_,",").concat(t+o*R,",").concat(r,`
            L `).concat(t+n-o*R,",").concat(r,`
            A `).concat(R,",").concat(R,",0,0,").concat(_,",").concat(t+n,",").concat(r+m*R,`
            L `).concat(t+n,",").concat(r+s-m*R,`
            A `).concat(R,",").concat(R,",0,0,").concat(_,",").concat(t+n-o*R,",").concat(r+s,`
            L `).concat(t+o*R,",").concat(r+s,`
            A `).concat(R,",").concat(R,",0,0,").concat(_,",").concat(t,",").concat(r+s-m*R," Z")}else E="M ".concat(t,",").concat(r," h ").concat(n," v ").concat(s," h ").concat(-n," Z");return E},jbe=function(t,r){if(!t||!r)return!1;var n=t.x,s=t.y,u=r.x,h=r.y,m=r.width,o=r.height;if(Math.abs(m)>0&&Math.abs(o)>0){var _=Math.min(u,u+m),E=Math.max(u,u+m),S=Math.min(h,h+o),A=Math.max(h,h+o);return n>=_&&n<=E&&s>=S&&s<=A}return!1},zbe={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},TO=function(t){var r=w3(w3({},zbe),t),n=V.useRef(),s=V.useState(-1),u=Cbe(s,2),h=u[0],m=u[1];V.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var U=n.current.getTotalLength();U&&m(U)}catch{}},[]);var o=r.x,_=r.y,E=r.width,S=r.height,A=r.radius,I=r.className,R=r.animationEasing,k=r.animationDuration,L=r.animationBegin,N=r.isAnimationActive,z=r.isUpdateAnimationActive;if(o!==+o||_!==+_||E!==+E||S!==+S||E===0||S===0)return null;var F=Fr("recharts-rectangle",I);return z?be.createElement(sc,{canBegin:h>0,from:{width:E,height:S,x:o,y:_},to:{width:E,height:S,x:o,y:_},duration:k,animationEasing:R,isActive:z},function(U){var W=U.width,Y=U.height,Q=U.x,Z=U.y;return be.createElement(sc,{canBegin:h>0,from:"0px ".concat(h===-1?1:h,"px"),to:"".concat(h,"px 0px"),attributeName:"strokeDasharray",begin:L,duration:k,isActive:N,easing:R},be.createElement("path",d1({},Br(r,!0),{className:F,d:S3(Q,Z,W,Y,A),ref:n})))}):be.createElement("path",d1({},Br(r,!0),{className:F,d:S3(o,_,E,S,A)}))};function NC(){return NC=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},NC.apply(this,arguments)}var k8=function(t){var r=t.cx,n=t.cy,s=t.r,u=t.className,h=Fr("recharts-dot",u);return r===+r&&n===+n&&s===+s?be.createElement("circle",NC({},Br(t,!1),Ob(t),{className:h,cx:r,cy:n,r:s})):null};function Dv(e){"@babel/helpers - typeof";return Dv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Dv(e)}var Nbe=["x","y","top","left","width","height","className"];function BC(){return BC=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},BC.apply(this,arguments)}function E3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Bbe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?E3(Object(r),!0).forEach(function(n){$be(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):E3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function $be(e,t,r){return t=Fbe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Fbe(e){var t=Ube(e,"string");return Dv(t)=="symbol"?t:t+""}function Ube(e,t){if(Dv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Dv(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Vbe(e,t){if(e==null)return{};var r=Gbe(e,t),n,s;if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(e);for(s=0;s<u.length;s++)n=u[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Gbe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var Wbe=function(t,r,n,s,u,h){return"M".concat(t,",").concat(u,"v").concat(s,"M").concat(h,",").concat(r,"h").concat(n)},qbe=function(t){var r=t.x,n=r===void 0?0:r,s=t.y,u=s===void 0?0:s,h=t.top,m=h===void 0?0:h,o=t.left,_=o===void 0?0:o,E=t.width,S=E===void 0?0:E,A=t.height,I=A===void 0?0:A,R=t.className,k=Vbe(t,Nbe),L=Bbe({x:n,y:u,top:m,left:_,width:S,height:I},k);return!Vt(n)||!Vt(u)||!Vt(S)||!Vt(I)||!Vt(m)||!Vt(_)?null:be.createElement("path",BC({},Br(L,!0),{className:Fr("recharts-cross",R),d:Wbe(n,u,S,I,m,_)}))},Hbe=W6,Xbe=Hbe(Object.getPrototypeOf,Object),Zbe=Xbe,Kbe=cc,Ybe=Zbe,Jbe=uc,Qbe="[object Object]",e1e=Function.prototype,t1e=Object.prototype,D8=e1e.toString,r1e=t1e.hasOwnProperty,n1e=D8.call(Object);function i1e(e){if(!Jbe(e)||Kbe(e)!=Qbe)return!1;var t=Ybe(e);if(t===null)return!0;var r=r1e.call(t,"constructor")&&t.constructor;return typeof r=="function"&&r instanceof r&&D8.call(r)==n1e}var o1e=i1e;const a1e=sn(o1e);var s1e=cc,l1e=uc,c1e="[object Boolean]";function u1e(e){return e===!0||e===!1||l1e(e)&&s1e(e)==c1e}var d1e=u1e;const h1e=sn(d1e);function Rv(e){"@babel/helpers - typeof";return Rv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Rv(e)}function h1(){return h1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},h1.apply(this,arguments)}function f1e(e,t){return y1e(e)||g1e(e,t)||m1e(e,t)||p1e()}function p1e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function m1e(e,t){if(e){if(typeof e=="string")return T3(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return T3(e,t)}}function T3(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function g1e(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,u,h,m=[],o=!0,_=!1;try{if(u=(r=r.call(e)).next,t!==0)for(;!(o=(n=u.call(r)).done)&&(m.push(n.value),m.length!==t);o=!0);}catch(E){_=!0,s=E}finally{try{if(!o&&r.return!=null&&(h=r.return(),Object(h)!==h))return}finally{if(_)throw s}}return m}}function y1e(e){if(Array.isArray(e))return e}function A3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function P3(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?A3(Object(r),!0).forEach(function(n){v1e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):A3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function v1e(e,t,r){return t=_1e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _1e(e){var t=x1e(e,"string");return Rv(t)=="symbol"?t:t+""}function x1e(e,t){if(Rv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Rv(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var C3=function(t,r,n,s,u){var h=n-s,m;return m="M ".concat(t,",").concat(r),m+="L ".concat(t+n,",").concat(r),m+="L ".concat(t+n-h/2,",").concat(r+u),m+="L ".concat(t+n-h/2-s,",").concat(r+u),m+="L ".concat(t,",").concat(r," Z"),m},b1e={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},w1e=function(t){var r=P3(P3({},b1e),t),n=V.useRef(),s=V.useState(-1),u=f1e(s,2),h=u[0],m=u[1];V.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var F=n.current.getTotalLength();F&&m(F)}catch{}},[]);var o=r.x,_=r.y,E=r.upperWidth,S=r.lowerWidth,A=r.height,I=r.className,R=r.animationEasing,k=r.animationDuration,L=r.animationBegin,N=r.isUpdateAnimationActive;if(o!==+o||_!==+_||E!==+E||S!==+S||A!==+A||E===0&&S===0||A===0)return null;var z=Fr("recharts-trapezoid",I);return N?be.createElement(sc,{canBegin:h>0,from:{upperWidth:0,lowerWidth:0,height:A,x:o,y:_},to:{upperWidth:E,lowerWidth:S,height:A,x:o,y:_},duration:k,animationEasing:R,isActive:N},function(F){var U=F.upperWidth,W=F.lowerWidth,Y=F.height,Q=F.x,Z=F.y;return be.createElement(sc,{canBegin:h>0,from:"0px ".concat(h===-1?1:h,"px"),to:"".concat(h,"px 0px"),attributeName:"strokeDasharray",begin:L,duration:k,easing:R},be.createElement("path",h1({},Br(r,!0),{className:z,d:C3(Q,Z,U,W,Y),ref:n})))}):be.createElement("g",null,be.createElement("path",h1({},Br(r,!0),{className:z,d:C3(o,_,E,S,A)})))},S1e=["option","shapeType","propTransformer","activeClassName","isActive"];function Lv(e){"@babel/helpers - typeof";return Lv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Lv(e)}function E1e(e,t){if(e==null)return{};var r=T1e(e,t),n,s;if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(e);for(s=0;s<u.length;s++)n=u[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function T1e(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function M3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function f1(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?M3(Object(r),!0).forEach(function(n){A1e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):M3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function A1e(e,t,r){return t=P1e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function P1e(e){var t=C1e(e,"string");return Lv(t)=="symbol"?t:t+""}function C1e(e,t){if(Lv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Lv(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function M1e(e,t){return f1(f1({},t),e)}function I1e(e,t){return e==="symbols"}function I3(e){var t=e.shapeType,r=e.elementProps;switch(t){case"rectangle":return be.createElement(TO,r);case"trapezoid":return be.createElement(w1e,r);case"sector":return be.createElement(x8,r);case"symbols":if(I1e(t))return be.createElement($w,r);break;default:return null}}function O1e(e){return V.isValidElement(e)?e.props:e}function $C(e){var t=e.option,r=e.shapeType,n=e.propTransformer,s=n===void 0?M1e:n,u=e.activeClassName,h=u===void 0?"recharts-active-shape":u,m=e.isActive,o=E1e(e,S1e),_;if(V.isValidElement(t))_=V.cloneElement(t,f1(f1({},o),O1e(t)));else if(Rr(t))_=t(o);else if(a1e(t)&&!h1e(t)){var E=s(t,o);_=be.createElement(I3,{shapeType:r,elementProps:E})}else{var S=o;_=be.createElement(I3,{shapeType:r,elementProps:S})}return m?be.createElement(Xn,{className:h},_):_}function tS(e,t){return t!=null&&"trapezoids"in e.props}function rS(e,t){return t!=null&&"sectors"in e.props}function jv(e,t){return t!=null&&"points"in e.props}function k1e(e,t){var r,n,s=e.x===(t==null||(r=t.labelViewBox)===null||r===void 0?void 0:r.x)||e.x===t.x,u=e.y===(t==null||(n=t.labelViewBox)===null||n===void 0?void 0:n.y)||e.y===t.y;return s&&u}function D1e(e,t){var r=e.endAngle===t.endAngle,n=e.startAngle===t.startAngle;return r&&n}function R1e(e,t){var r=e.x===t.x,n=e.y===t.y,s=e.z===t.z;return r&&n&&s}function L1e(e,t){var r;return tS(e,t)?r=k1e:rS(e,t)?r=D1e:jv(e,t)&&(r=R1e),r}function j1e(e,t){var r;return tS(e,t)?r="trapezoids":rS(e,t)?r="sectors":jv(e,t)&&(r="points"),r}function z1e(e,t){if(tS(e,t)){var r;return(r=t.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}if(rS(e,t)){var n;return(n=t.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}return jv(e,t)?t.payload:{}}function N1e(e){var t=e.activeTooltipItem,r=e.graphicalItem,n=e.itemData,s=j1e(r,t),u=z1e(r,t),h=n.filter(function(o,_){var E=Jw(u,o),S=r.props[s].filter(function(R){var k=L1e(r,t);return k(R,t)}),A=r.props[s].indexOf(S[S.length-1]),I=_===A;return E&&I}),m=n.indexOf(h[h.length-1]);return m}var B1e=Math.ceil,$1e=Math.max;function F1e(e,t,r,n){for(var s=-1,u=$1e(B1e((t-e)/(r||1)),0),h=Array(u);u--;)h[n?u:++s]=e,e+=r;return h}var U1e=F1e,V1e=uV,O3=1/0,G1e=17976931348623157e292;function W1e(e){if(!e)return e===0?e:0;if(e=V1e(e),e===O3||e===-O3){var t=e<0?-1:1;return t*G1e}return e===e?e:0}var R8=W1e,q1e=U1e,H1e=Vw,iA=R8;function X1e(e){return function(t,r,n){return n&&typeof n!="number"&&H1e(t,r,n)&&(r=n=void 0),t=iA(t),r===void 0?(r=t,t=0):r=iA(r),n=n===void 0?t<r?1:-1:iA(n),q1e(t,r,n,e)}}var Z1e=X1e,K1e=Z1e,Y1e=K1e(),J1e=Y1e;const p1=sn(J1e);function zv(e){"@babel/helpers - typeof";return zv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zv(e)}function k3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function D3(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?k3(Object(r),!0).forEach(function(n){L8(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):k3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function L8(e,t,r){return t=Q1e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Q1e(e){var t=ewe(e,"string");return zv(t)=="symbol"?t:t+""}function ewe(e,t){if(zv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(zv(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var twe=["Webkit","Moz","O","ms"],rwe=function(t,r){var n=t.replace(/(\w)/,function(u){return u.toUpperCase()}),s=twe.reduce(function(u,h){return D3(D3({},u),{},L8({},h+n,r))},{});return s[t]=r,s};function Rp(e){"@babel/helpers - typeof";return Rp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Rp(e)}function m1(){return m1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},m1.apply(this,arguments)}function R3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function oA(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?R3(Object(r),!0).forEach(function(n){Jo(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):R3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function nwe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function L3(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,z8(n.key),n)}}function iwe(e,t,r){return t&&L3(e.prototype,t),r&&L3(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function owe(e,t,r){return t=g1(t),awe(e,j8()?Reflect.construct(t,r||[],g1(e).constructor):t.apply(e,r))}function awe(e,t){if(t&&(Rp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return swe(e)}function swe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function j8(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(j8=function(){return!!e})()}function g1(e){return g1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},g1(e)}function lwe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&FC(e,t)}function FC(e,t){return FC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},FC(e,t)}function Jo(e,t,r){return t=z8(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function z8(e){var t=cwe(e,"string");return Rp(t)=="symbol"?t:t+""}function cwe(e,t){if(Rp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Rp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var uwe=function(t){var r=t.data,n=t.startIndex,s=t.endIndex,u=t.x,h=t.width,m=t.travellerWidth;if(!r||!r.length)return{};var o=r.length,_=Ry().domain(p1(0,o)).range([u,u+h-m]),E=_.domain().map(function(S){return _(S)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:_(n),endX:_(s),scale:_,scaleValues:E}},j3=function(t){return t.changedTouches&&!!t.changedTouches.length},Lp=function(e){function t(r){var n;return nwe(this,t),n=owe(this,t,[r]),Jo(n,"handleDrag",function(s){n.leaveTimer&&(clearTimeout(n.leaveTimer),n.leaveTimer=null),n.state.isTravellerMoving?n.handleTravellerMove(s):n.state.isSlideMoving&&n.handleSlideDrag(s)}),Jo(n,"handleTouchMove",function(s){s.changedTouches!=null&&s.changedTouches.length>0&&n.handleDrag(s.changedTouches[0])}),Jo(n,"handleDragEnd",function(){n.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var s=n.props,u=s.endIndex,h=s.onDragEnd,m=s.startIndex;h==null||h({endIndex:u,startIndex:m})}),n.detachDragEndListener()}),Jo(n,"handleLeaveWrapper",function(){(n.state.isTravellerMoving||n.state.isSlideMoving)&&(n.leaveTimer=window.setTimeout(n.handleDragEnd,n.props.leaveTimeOut))}),Jo(n,"handleEnterSlideOrTraveller",function(){n.setState({isTextActive:!0})}),Jo(n,"handleLeaveSlideOrTraveller",function(){n.setState({isTextActive:!1})}),Jo(n,"handleSlideDragStart",function(s){var u=j3(s)?s.changedTouches[0]:s;n.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:u.pageX}),n.attachDragEndListener()}),n.travellerDragStartHandlers={startX:n.handleTravellerDragStart.bind(n,"startX"),endX:n.handleTravellerDragStart.bind(n,"endX")},n.state={},n}return lwe(t,e),iwe(t,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(n){var s=n.startX,u=n.endX,h=this.state.scaleValues,m=this.props,o=m.gap,_=m.data,E=_.length-1,S=Math.min(s,u),A=Math.max(s,u),I=t.getIndexInRange(h,S),R=t.getIndexInRange(h,A);return{startIndex:I-I%o,endIndex:R===E?E:R-R%o}}},{key:"getTextOfTick",value:function(n){var s=this.props,u=s.data,h=s.tickFormatter,m=s.dataKey,o=_o(u[n],m,n);return Rr(h)?h(o,n):o}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(n){var s=this.state,u=s.slideMoveStartX,h=s.startX,m=s.endX,o=this.props,_=o.x,E=o.width,S=o.travellerWidth,A=o.startIndex,I=o.endIndex,R=o.onChange,k=n.pageX-u;k>0?k=Math.min(k,_+E-S-m,_+E-S-h):k<0&&(k=Math.max(k,_-h,_-m));var L=this.getIndex({startX:h+k,endX:m+k});(L.startIndex!==A||L.endIndex!==I)&&R&&R(L),this.setState({startX:h+k,endX:m+k,slideMoveStartX:n.pageX})}},{key:"handleTravellerDragStart",value:function(n,s){var u=j3(s)?s.changedTouches[0]:s;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:n,brushMoveStartX:u.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(n){var s=this.state,u=s.brushMoveStartX,h=s.movingTravellerId,m=s.endX,o=s.startX,_=this.state[h],E=this.props,S=E.x,A=E.width,I=E.travellerWidth,R=E.onChange,k=E.gap,L=E.data,N={startX:this.state.startX,endX:this.state.endX},z=n.pageX-u;z>0?z=Math.min(z,S+A-I-_):z<0&&(z=Math.max(z,S-_)),N[h]=_+z;var F=this.getIndex(N),U=F.startIndex,W=F.endIndex,Y=function(){var Z=L.length-1;return h==="startX"&&(m>o?U%k===0:W%k===0)||m<o&&W===Z||h==="endX"&&(m>o?W%k===0:U%k===0)||m>o&&W===Z};this.setState(Jo(Jo({},h,_+z),"brushMoveStartX",n.pageX),function(){R&&Y()&&R(F)})}},{key:"handleTravellerMoveKeyboard",value:function(n,s){var u=this,h=this.state,m=h.scaleValues,o=h.startX,_=h.endX,E=this.state[s],S=m.indexOf(E);if(S!==-1){var A=S+n;if(!(A===-1||A>=m.length)){var I=m[A];s==="startX"&&I>=_||s==="endX"&&I<=o||this.setState(Jo({},s,I),function(){u.props.onChange(u.getIndex({startX:u.state.startX,endX:u.state.endX}))})}}}},{key:"renderBackground",value:function(){var n=this.props,s=n.x,u=n.y,h=n.width,m=n.height,o=n.fill,_=n.stroke;return be.createElement("rect",{stroke:_,fill:o,x:s,y:u,width:h,height:m})}},{key:"renderPanorama",value:function(){var n=this.props,s=n.x,u=n.y,h=n.width,m=n.height,o=n.data,_=n.children,E=n.padding,S=V.Children.only(_);return S?be.cloneElement(S,{x:s,y:u,width:h,height:m,margin:E,compact:!0,data:o}):null}},{key:"renderTravellerLayer",value:function(n,s){var u,h,m=this,o=this.props,_=o.y,E=o.travellerWidth,S=o.height,A=o.traveller,I=o.ariaLabel,R=o.data,k=o.startIndex,L=o.endIndex,N=Math.max(n,this.props.x),z=oA(oA({},Br(this.props,!1)),{},{x:N,y:_,width:E,height:S}),F=I||"Min value: ".concat((u=R[k])===null||u===void 0?void 0:u.name,", Max value: ").concat((h=R[L])===null||h===void 0?void 0:h.name);return be.createElement(Xn,{tabIndex:0,role:"slider","aria-label":F,"aria-valuenow":n,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[s],onTouchStart:this.travellerDragStartHandlers[s],onKeyDown:function(W){["ArrowLeft","ArrowRight"].includes(W.key)&&(W.preventDefault(),W.stopPropagation(),m.handleTravellerMoveKeyboard(W.key==="ArrowRight"?1:-1,s))},onFocus:function(){m.setState({isTravellerFocused:!0})},onBlur:function(){m.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},t.renderTraveller(A,z))}},{key:"renderSlide",value:function(n,s){var u=this.props,h=u.y,m=u.height,o=u.stroke,_=u.travellerWidth,E=Math.min(n,s)+_,S=Math.max(Math.abs(s-n)-_,0);return be.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:o,fillOpacity:.2,x:E,y:h,width:S,height:m})}},{key:"renderText",value:function(){var n=this.props,s=n.startIndex,u=n.endIndex,h=n.y,m=n.height,o=n.travellerWidth,_=n.stroke,E=this.state,S=E.startX,A=E.endX,I=5,R={pointerEvents:"none",fill:_};return be.createElement(Xn,{className:"recharts-brush-texts"},be.createElement(Wb,m1({textAnchor:"end",verticalAnchor:"middle",x:Math.min(S,A)-I,y:h+m/2},R),this.getTextOfTick(s)),be.createElement(Wb,m1({textAnchor:"start",verticalAnchor:"middle",x:Math.max(S,A)+o+I,y:h+m/2},R),this.getTextOfTick(u)))}},{key:"render",value:function(){var n=this.props,s=n.data,u=n.className,h=n.children,m=n.x,o=n.y,_=n.width,E=n.height,S=n.alwaysShowText,A=this.state,I=A.startX,R=A.endX,k=A.isTextActive,L=A.isSlideMoving,N=A.isTravellerMoving,z=A.isTravellerFocused;if(!s||!s.length||!Vt(m)||!Vt(o)||!Vt(_)||!Vt(E)||_<=0||E<=0)return null;var F=Fr("recharts-brush",u),U=be.Children.count(h)===1,W=rwe("userSelect","none");return be.createElement(Xn,{className:F,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:W},this.renderBackground(),U&&this.renderPanorama(),this.renderSlide(I,R),this.renderTravellerLayer(I,"startX"),this.renderTravellerLayer(R,"endX"),(k||L||N||z||S)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(n){var s=n.x,u=n.y,h=n.width,m=n.height,o=n.stroke,_=Math.floor(u+m/2)-1;return be.createElement(be.Fragment,null,be.createElement("rect",{x:s,y:u,width:h,height:m,fill:o,stroke:"none"}),be.createElement("line",{x1:s+1,y1:_,x2:s+h-1,y2:_,fill:"none",stroke:"#fff"}),be.createElement("line",{x1:s+1,y1:_+2,x2:s+h-1,y2:_+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(n,s){var u;return be.isValidElement(n)?u=be.cloneElement(n,s):Rr(n)?u=n(s):u=t.renderDefaultTraveller(s),u}},{key:"getDerivedStateFromProps",value:function(n,s){var u=n.data,h=n.width,m=n.x,o=n.travellerWidth,_=n.updateId,E=n.startIndex,S=n.endIndex;if(u!==s.prevData||_!==s.prevUpdateId)return oA({prevData:u,prevTravellerWidth:o,prevUpdateId:_,prevX:m,prevWidth:h},u&&u.length?uwe({data:u,width:h,x:m,travellerWidth:o,startIndex:E,endIndex:S}):{scale:null,scaleValues:null});if(s.scale&&(h!==s.prevWidth||m!==s.prevX||o!==s.prevTravellerWidth)){s.scale.range([m,m+h-o]);var A=s.scale.domain().map(function(I){return s.scale(I)});return{prevData:u,prevTravellerWidth:o,prevUpdateId:_,prevX:m,prevWidth:h,startX:s.scale(n.startIndex),endX:s.scale(n.endIndex),scaleValues:A}}return null}},{key:"getIndexInRange",value:function(n,s){for(var u=n.length,h=0,m=u-1;m-h>1;){var o=Math.floor((h+m)/2);n[o]>s?m=o:h=o}return s>=n[m]?m:h}}])}(V.PureComponent);Jo(Lp,"displayName","Brush");Jo(Lp,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var dwe=KI;function hwe(e,t){var r;return dwe(e,function(n,s,u){return r=t(n,s,u),!r}),!!r}var fwe=hwe,pwe=z6,mwe=Nu,gwe=fwe,ywe=Go,vwe=Vw;function _we(e,t,r){var n=ywe(e)?pwe:gwe;return r&&vwe(e,t,r)&&(t=void 0),n(e,mwe(t))}var xwe=_we;const bwe=sn(xwe);var ul=function(t,r){var n=t.alwaysShow,s=t.ifOverflow;return n&&(s="extendDomain"),s===r},z3=oV;function wwe(e,t,r){t=="__proto__"&&z3?z3(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}var Swe=wwe,Ewe=Swe,Twe=nV,Awe=Nu;function Pwe(e,t){var r={};return t=Awe(t),Twe(e,function(n,s,u){Ewe(r,s,t(n,s,u))}),r}var Cwe=Pwe;const Mwe=sn(Cwe);function Iwe(e,t){for(var r=-1,n=e==null?0:e.length;++r<n;)if(!t(e[r],r,e))return!1;return!0}var Owe=Iwe,kwe=KI;function Dwe(e,t){var r=!0;return kwe(e,function(n,s,u){return r=!!t(n,s,u),r}),r}var Rwe=Dwe,Lwe=Owe,jwe=Rwe,zwe=Nu,Nwe=Go,Bwe=Vw;function $we(e,t,r){var n=Nwe(e)?Lwe:jwe;return r&&Bwe(e,t,r)&&(t=void 0),n(e,zwe(t))}var Fwe=$we;const N8=sn(Fwe);var Uwe=["x","y"];function Nv(e){"@babel/helpers - typeof";return Nv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Nv(e)}function UC(){return UC=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},UC.apply(this,arguments)}function N3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function dy(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?N3(Object(r),!0).forEach(function(n){Vwe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):N3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Vwe(e,t,r){return t=Gwe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Gwe(e){var t=Wwe(e,"string");return Nv(t)=="symbol"?t:t+""}function Wwe(e,t){if(Nv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Nv(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function qwe(e,t){if(e==null)return{};var r=Hwe(e,t),n,s;if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(e);for(s=0;s<u.length;s++)n=u[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Hwe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function Xwe(e,t){var r=e.x,n=e.y,s=qwe(e,Uwe),u="".concat(r),h=parseInt(u,10),m="".concat(n),o=parseInt(m,10),_="".concat(t.height||s.height),E=parseInt(_,10),S="".concat(t.width||s.width),A=parseInt(S,10);return dy(dy(dy(dy(dy({},t),s),h?{x:h}:{}),o?{y:o}:{}),{},{height:E,width:A,name:t.name,radius:t.radius})}function B3(e){return be.createElement($C,UC({shapeType:"rectangle",propTransformer:Xwe,activeClassName:"recharts-active-bar"},e))}var Zwe=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(n,s){if(typeof t=="number")return t;var u=typeof n=="number";return u?t(n,s):(u||ch(),r)}},Kwe=["value","background"],B8;function jp(e){"@babel/helpers - typeof";return jp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},jp(e)}function Ywe(e,t){if(e==null)return{};var r=Jwe(e,t),n,s;if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(e);for(s=0;s<u.length;s++)n=u[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Jwe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function y1(){return y1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},y1.apply(this,arguments)}function $3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function pi(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?$3(Object(r),!0).forEach(function(n){cu(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Qwe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function F3(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,F8(n.key),n)}}function eSe(e,t,r){return t&&F3(e.prototype,t),r&&F3(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function tSe(e,t,r){return t=v1(t),rSe(e,$8()?Reflect.construct(t,r||[],v1(e).constructor):t.apply(e,r))}function rSe(e,t){if(t&&(jp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return nSe(e)}function nSe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $8(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return($8=function(){return!!e})()}function v1(e){return v1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},v1(e)}function iSe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&VC(e,t)}function VC(e,t){return VC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},VC(e,t)}function cu(e,t,r){return t=F8(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function F8(e){var t=oSe(e,"string");return jp(t)=="symbol"?t:t+""}function oSe(e,t){if(jp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(jp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var zo=function(e){function t(){var r;Qwe(this,t);for(var n=arguments.length,s=new Array(n),u=0;u<n;u++)s[u]=arguments[u];return r=tSe(this,t,[].concat(s)),cu(r,"state",{isAnimationFinished:!1}),cu(r,"id",l_("recharts-bar-")),cu(r,"handleAnimationEnd",function(){var h=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),h&&h()}),cu(r,"handleAnimationStart",function(){var h=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),h&&h()}),r}return iSe(t,e),eSe(t,[{key:"renderRectanglesStatically",value:function(n){var s=this,u=this.props,h=u.shape,m=u.dataKey,o=u.activeIndex,_=u.activeBar,E=Br(this.props,!1);return n&&n.map(function(S,A){var I=A===o,R=I?_:h,k=pi(pi(pi({},E),S),{},{isActive:I,option:R,index:A,dataKey:m,onAnimationStart:s.handleAnimationStart,onAnimationEnd:s.handleAnimationEnd});return be.createElement(Xn,y1({className:"recharts-bar-rectangle"},sv(s.props,S,A),{key:"rectangle-".concat(S==null?void 0:S.x,"-").concat(S==null?void 0:S.y,"-").concat(S==null?void 0:S.value)}),be.createElement(B3,k))})}},{key:"renderRectanglesWithAnimation",value:function(){var n=this,s=this.props,u=s.data,h=s.layout,m=s.isAnimationActive,o=s.animationBegin,_=s.animationDuration,E=s.animationEasing,S=s.animationId,A=this.state.prevData;return be.createElement(sc,{begin:o,duration:_,isActive:m,easing:E,from:{t:0},to:{t:1},key:"bar-".concat(S),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(I){var R=I.t,k=u.map(function(L,N){var z=A&&A[N];if(z){var F=tl(z.x,L.x),U=tl(z.y,L.y),W=tl(z.width,L.width),Y=tl(z.height,L.height);return pi(pi({},L),{},{x:F(R),y:U(R),width:W(R),height:Y(R)})}if(h==="horizontal"){var Q=tl(0,L.height),Z=Q(R);return pi(pi({},L),{},{y:L.y+L.height-Z,height:Z})}var re=tl(0,L.width),ne=re(R);return pi(pi({},L),{},{width:ne})});return be.createElement(Xn,null,n.renderRectanglesStatically(k))})}},{key:"renderRectangles",value:function(){var n=this.props,s=n.data,u=n.isAnimationActive,h=this.state.prevData;return u&&s&&s.length&&(!h||!Jw(h,s))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(s)}},{key:"renderBackground",value:function(){var n=this,s=this.props,u=s.data,h=s.dataKey,m=s.activeIndex,o=Br(this.props.background,!1);return u.map(function(_,E){_.value;var S=_.background,A=Ywe(_,Kwe);if(!S)return null;var I=pi(pi(pi(pi(pi({},A),{},{fill:"#eee"},S),o),sv(n.props,_,E)),{},{onAnimationStart:n.handleAnimationStart,onAnimationEnd:n.handleAnimationEnd,dataKey:h,index:E,className:"recharts-bar-background-rectangle"});return be.createElement(B3,y1({key:"background-bar-".concat(E),option:n.props.background,isActive:E===m},I))})}},{key:"renderErrorBar",value:function(n,s){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var u=this.props,h=u.data,m=u.xAxis,o=u.yAxis,_=u.layout,E=u.children,S=da(E,p_);if(!S)return null;var A=_==="vertical"?h[0].height/2:h[0].width/2,I=function(L,N){var z=Array.isArray(L.value)?L.value[1]:L.value;return{x:L.x,y:L.y,value:z,errorVal:_o(L,N)}},R={clipPath:n?"url(#clipPath-".concat(s,")"):null};return be.createElement(Xn,R,S.map(function(k){return be.cloneElement(k,{key:"error-bar-".concat(s,"-").concat(k.props.dataKey),data:h,xAxis:m,yAxis:o,layout:_,offset:A,dataPointFormatter:I})}))}},{key:"render",value:function(){var n=this.props,s=n.hide,u=n.data,h=n.className,m=n.xAxis,o=n.yAxis,_=n.left,E=n.top,S=n.width,A=n.height,I=n.isAnimationActive,R=n.background,k=n.id;if(s||!u||!u.length)return null;var L=this.state.isAnimationFinished,N=Fr("recharts-bar",h),z=m&&m.allowDataOverflow,F=o&&o.allowDataOverflow,U=z||F,W=Mr(k)?this.id:k;return be.createElement(Xn,{className:N},z||F?be.createElement("defs",null,be.createElement("clipPath",{id:"clipPath-".concat(W)},be.createElement("rect",{x:z?_:_-S/2,y:F?E:E-A/2,width:z?S:S*2,height:F?A:A*2}))):null,be.createElement(Xn,{className:"recharts-bar-rectangles",clipPath:U?"url(#clipPath-".concat(W,")"):null},R?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(U,W),(!I||L)&&bu.renderCallByParent(this.props,u))}}],[{key:"getDerivedStateFromProps",value:function(n,s){return n.animationId!==s.prevAnimationId?{prevAnimationId:n.animationId,curData:n.data,prevData:s.curData}:n.data!==s.curData?{curData:n.data}:null}}])}(V.PureComponent);B8=zo;cu(zo,"displayName","Bar");cu(zo,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!Zl.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});cu(zo,"getComposedData",function(e){var t=e.props,r=e.item,n=e.barPosition,s=e.bandSize,u=e.xAxis,h=e.yAxis,m=e.xAxisTicks,o=e.yAxisTicks,_=e.stackedData,E=e.dataStartIndex,S=e.displayedData,A=e.offset,I=q_e(n,r);if(!I)return null;var R=t.layout,k=r.type.defaultProps,L=k!==void 0?pi(pi({},k),r.props):r.props,N=L.dataKey,z=L.children,F=L.minPointSize,U=R==="horizontal"?h:u,W=_?U.scale.domain():null,Y=exe({numericAxis:U}),Q=da(z,QI),Z=S.map(function(re,ne){var ue,fe,Ee,Se,je,Le;_?ue=H_e(_[E+ne],W):(ue=_o(re,N),Array.isArray(ue)||(ue=[Y,ue]));var Ue=Zwe(F,B8.defaultProps.minPointSize)(ue[1],ne);if(R==="horizontal"){var we,Pe=[h.scale(ue[0]),h.scale(ue[1])],rt=Pe[0],$e=Pe[1];fe=$N({axis:u,ticks:m,bandSize:s,offset:I.offset,entry:re,index:ne}),Ee=(we=$e??rt)!==null&&we!==void 0?we:void 0,Se=I.size;var Ge=rt-$e;if(je=Number.isNaN(Ge)?0:Ge,Le={x:fe,y:h.y,width:Se,height:h.height},Math.abs(Ue)>0&&Math.abs(je)<Math.abs(Ue)){var Re=Ps(je||Ue)*(Math.abs(Ue)-Math.abs(je));Ee-=Re,je+=Re}}else{var at=[u.scale(ue[0]),u.scale(ue[1])],Et=at[0],vt=at[1];if(fe=Et,Ee=$N({axis:h,ticks:o,bandSize:s,offset:I.offset,entry:re,index:ne}),Se=vt-Et,je=I.size,Le={x:u.x,y:Ee,width:u.width,height:je},Math.abs(Ue)>0&&Math.abs(Se)<Math.abs(Ue)){var lt=Ps(Se||Ue)*(Math.abs(Ue)-Math.abs(Se));Se+=lt}}return pi(pi(pi({},re),{},{x:fe,y:Ee,width:Se,height:je,value:_?ue:ue[1],payload:re,background:Le},Q&&Q[ne]&&Q[ne].props),{},{tooltipPayload:[y8(r,re)],tooltipPosition:{x:fe+Se/2,y:Ee+je/2}})});return pi({data:Z,layout:R},A)});function Bv(e){"@babel/helpers - typeof";return Bv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Bv(e)}function aSe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function U3(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,U8(n.key),n)}}function sSe(e,t,r){return t&&U3(e.prototype,t),r&&U3(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function V3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Es(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?V3(Object(r),!0).forEach(function(n){nS(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):V3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function nS(e,t,r){return t=U8(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function U8(e){var t=lSe(e,"string");return Bv(t)=="symbol"?t:t+""}function lSe(e,t){if(Bv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Bv(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var V8=function(t,r,n,s,u){var h=t.width,m=t.height,o=t.layout,_=t.children,E=Object.keys(r),S={left:n.left,leftMirror:n.left,right:h-n.right,rightMirror:h-n.right,top:n.top,topMirror:n.top,bottom:m-n.bottom,bottomMirror:m-n.bottom},A=!!ra(_,zo);return E.reduce(function(I,R){var k=r[R],L=k.orientation,N=k.domain,z=k.padding,F=z===void 0?{}:z,U=k.mirror,W=k.reversed,Y="".concat(L).concat(U?"Mirror":""),Q,Z,re,ne,ue;if(k.type==="number"&&(k.padding==="gap"||k.padding==="no-gap")){var fe=N[1]-N[0],Ee=1/0,Se=k.categoricalDomain.sort();if(Se.forEach(function(at,Et){Et>0&&(Ee=Math.min((at||0)-(Se[Et-1]||0),Ee))}),Number.isFinite(Ee)){var je=Ee/fe,Le=k.layout==="vertical"?n.height:n.width;if(k.padding==="gap"&&(Q=je*Le/2),k.padding==="no-gap"){var Ue=sh(t.barCategoryGap,je*Le),we=je*Le/2;Q=we-Ue-(we-Ue)/Le*Ue}}}s==="xAxis"?Z=[n.left+(F.left||0)+(Q||0),n.left+n.width-(F.right||0)-(Q||0)]:s==="yAxis"?Z=o==="horizontal"?[n.top+n.height-(F.bottom||0),n.top+(F.top||0)]:[n.top+(F.top||0)+(Q||0),n.top+n.height-(F.bottom||0)-(Q||0)]:Z=k.range,W&&(Z=[Z[1],Z[0]]);var Pe=G_e(k,u,A),rt=Pe.scale,$e=Pe.realScaleType;rt.domain(N).range(Z),W_e(rt);var Ge=Q_e(rt,Es(Es({},k),{},{realScaleType:$e}));s==="xAxis"?(ue=L==="top"&&!U||L==="bottom"&&U,re=n.left,ne=S[Y]-ue*k.height):s==="yAxis"&&(ue=L==="left"&&!U||L==="right"&&U,re=S[Y]-ue*k.width,ne=n.top);var Re=Es(Es(Es({},k),Ge),{},{realScaleType:$e,x:re,y:ne,scale:rt,width:s==="xAxis"?n.width:k.width,height:s==="yAxis"?n.height:k.height});return Re.bandSize=o1(Re,Ge),!k.hide&&s==="xAxis"?S[Y]+=(ue?-1:1)*Re.height:k.hide||(S[Y]+=(ue?-1:1)*Re.width),Es(Es({},I),{},nS({},R,Re))},{})},G8=function(t,r){var n=t.x,s=t.y,u=r.x,h=r.y;return{x:Math.min(n,u),y:Math.min(s,h),width:Math.abs(u-n),height:Math.abs(h-s)}},cSe=function(t){var r=t.x1,n=t.y1,s=t.x2,u=t.y2;return G8({x:r,y:n},{x:s,y:u})},W8=function(){function e(t){aSe(this,e),this.scale=t}return sSe(e,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=n.bandAware,u=n.position;if(r!==void 0){if(u)switch(u){case"start":return this.scale(r);case"middle":{var h=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+h}case"end":{var m=this.bandwidth?this.bandwidth():0;return this.scale(r)+m}default:return this.scale(r)}if(s){var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+o}return this.scale(r)}}},{key:"isInRange",value:function(r){var n=this.range(),s=n[0],u=n[n.length-1];return s<=u?r>=s&&r<=u:r>=u&&r<=s}}],[{key:"create",value:function(r){return new e(r)}}])}();nS(W8,"EPS",1e-4);var AO=function(t){var r=Object.keys(t).reduce(function(n,s){return Es(Es({},n),{},nS({},s,W8.create(t[s])))},{});return Es(Es({},r),{},{apply:function(s){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},h=u.bandAware,m=u.position;return Mwe(s,function(o,_){return r[_].apply(o,{bandAware:h,position:m})})},isInRange:function(s){return N8(s,function(u,h){return r[h].isInRange(u)})}})};function uSe(e){return(e%180+180)%180}var dSe=function(t){var r=t.width,n=t.height,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,u=uSe(s),h=u*Math.PI/180,m=Math.atan(n/r),o=h>m&&h<Math.PI-m?n/Math.sin(h):r/Math.cos(h);return Math.abs(o)},hSe=Nu,fSe=c_,pSe=Fw;function mSe(e){return function(t,r,n){var s=Object(t);if(!fSe(t)){var u=hSe(r);t=pSe(t),r=function(m){return u(s[m],m,s)}}var h=e(t,r,n);return h>-1?s[u?t[h]:h]:void 0}}var gSe=mSe,ySe=R8;function vSe(e){var t=ySe(e),r=t%1;return t===t?r?t-r:t:0}var _Se=vSe,xSe=Y6,bSe=Nu,wSe=_Se,SSe=Math.max;function ESe(e,t,r){var n=e==null?0:e.length;if(!n)return-1;var s=r==null?0:wSe(r);return s<0&&(s=SSe(n+s,0)),xSe(e,bSe(t),s)}var TSe=ESe,ASe=gSe,PSe=TSe,CSe=ASe(PSe),MSe=CSe;const ISe=sn(MSe);var OSe=Ine(function(e){return{x:e.left,y:e.top,width:e.width,height:e.height}},function(e){return["l",e.left,"t",e.top,"w",e.width,"h",e.height].join("")}),PO=V.createContext(void 0),CO=V.createContext(void 0),q8=V.createContext(void 0),H8=V.createContext({}),X8=V.createContext(void 0),Z8=V.createContext(0),K8=V.createContext(0),G3=function(t){var r=t.state,n=r.xAxisMap,s=r.yAxisMap,u=r.offset,h=t.clipPathId,m=t.children,o=t.width,_=t.height,E=OSe(u);return be.createElement(PO.Provider,{value:n},be.createElement(CO.Provider,{value:s},be.createElement(H8.Provider,{value:u},be.createElement(q8.Provider,{value:E},be.createElement(X8.Provider,{value:h},be.createElement(Z8.Provider,{value:_},be.createElement(K8.Provider,{value:o},m)))))))},kSe=function(){return V.useContext(X8)},Y8=function(t){var r=V.useContext(PO);r==null&&ch();var n=r[t];return n==null&&ch(),n},DSe=function(){var t=V.useContext(PO);return Qc(t)},RSe=function(){var t=V.useContext(CO),r=ISe(t,function(n){return N8(n.domain,Number.isFinite)});return r||Qc(t)},J8=function(t){var r=V.useContext(CO);r==null&&ch();var n=r[t];return n==null&&ch(),n},LSe=function(){var t=V.useContext(q8);return t},jSe=function(){return V.useContext(H8)},MO=function(){return V.useContext(K8)},IO=function(){return V.useContext(Z8)};function zp(e){"@babel/helpers - typeof";return zp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zp(e)}function zSe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function NSe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,eG(n.key),n)}}function BSe(e,t,r){return t&&NSe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function $Se(e,t,r){return t=_1(t),FSe(e,Q8()?Reflect.construct(t,r||[],_1(e).constructor):t.apply(e,r))}function FSe(e,t){if(t&&(zp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return USe(e)}function USe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Q8(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Q8=function(){return!!e})()}function _1(e){return _1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},_1(e)}function VSe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&GC(e,t)}function GC(e,t){return GC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},GC(e,t)}function W3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function q3(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?W3(Object(r),!0).forEach(function(n){OO(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):W3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function OO(e,t,r){return t=eG(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function eG(e){var t=GSe(e,"string");return zp(t)=="symbol"?t:t+""}function GSe(e,t){if(zp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(zp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function WSe(e,t){return ZSe(e)||XSe(e,t)||HSe(e,t)||qSe()}function qSe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function HSe(e,t){if(e){if(typeof e=="string")return H3(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return H3(e,t)}}function H3(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function XSe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,u,h,m=[],o=!0,_=!1;try{if(u=(r=r.call(e)).next,t!==0)for(;!(o=(n=u.call(r)).done)&&(m.push(n.value),m.length!==t);o=!0);}catch(E){_=!0,s=E}finally{try{if(!o&&r.return!=null&&(h=r.return(),Object(h)!==h))return}finally{if(_)throw s}}return m}}function ZSe(e){if(Array.isArray(e))return e}function WC(){return WC=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},WC.apply(this,arguments)}var KSe=function(t,r){var n;return be.isValidElement(t)?n=be.cloneElement(t,r):Rr(t)?n=t(r):n=be.createElement("line",WC({},r,{className:"recharts-reference-line-line"})),n},YSe=function(t,r,n,s,u,h,m,o,_){var E=u.x,S=u.y,A=u.width,I=u.height;if(n){var R=_.y,k=t.y.apply(R,{position:h});if(ul(_,"discard")&&!t.y.isInRange(k))return null;var L=[{x:E+A,y:k},{x:E,y:k}];return o==="left"?L.reverse():L}if(r){var N=_.x,z=t.x.apply(N,{position:h});if(ul(_,"discard")&&!t.x.isInRange(z))return null;var F=[{x:z,y:S+I},{x:z,y:S}];return m==="top"?F.reverse():F}if(s){var U=_.segment,W=U.map(function(Y){return t.apply(Y,{position:h})});return ul(_,"discard")&&bwe(W,function(Y){return!t.isInRange(Y)})?null:W}return null};function JSe(e){var t=e.x,r=e.y,n=e.segment,s=e.xAxisId,u=e.yAxisId,h=e.shape,m=e.className,o=e.alwaysShow,_=kSe(),E=Y8(s),S=J8(u),A=LSe();if(!_||!A)return null;Xl(o===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var I=AO({x:E.scale,y:S.scale}),R=Si(t),k=Si(r),L=n&&n.length===2,N=YSe(I,R,k,L,A,e.position,E.orientation,S.orientation,e);if(!N)return null;var z=WSe(N,2),F=z[0],U=F.x,W=F.y,Y=z[1],Q=Y.x,Z=Y.y,re=ul(e,"hidden")?"url(#".concat(_,")"):void 0,ne=q3(q3({clipPath:re},Br(e,!0)),{},{x1:U,y1:W,x2:Q,y2:Z});return be.createElement(Xn,{className:Fr("recharts-reference-line",m)},KSe(h,ne),Ri.renderCallByParent(e,cSe({x1:U,y1:W,x2:Q,y2:Z})))}var wu=function(e){function t(){return zSe(this,t),$Se(this,t,arguments)}return VSe(t,e),BSe(t,[{key:"render",value:function(){return be.createElement(JSe,this.props)}}])}(be.Component);OO(wu,"displayName","ReferenceLine");OO(wu,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function qC(){return qC=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},qC.apply(this,arguments)}function Np(e){"@babel/helpers - typeof";return Np=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Np(e)}function X3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Z3(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?X3(Object(r),!0).forEach(function(n){iS(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):X3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function QSe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function eEe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,rG(n.key),n)}}function tEe(e,t,r){return t&&eEe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function rEe(e,t,r){return t=x1(t),nEe(e,tG()?Reflect.construct(t,r||[],x1(e).constructor):t.apply(e,r))}function nEe(e,t){if(t&&(Np(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return iEe(e)}function iEe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function tG(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(tG=function(){return!!e})()}function x1(e){return x1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},x1(e)}function oEe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&HC(e,t)}function HC(e,t){return HC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},HC(e,t)}function iS(e,t,r){return t=rG(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function rG(e){var t=aEe(e,"string");return Np(t)=="symbol"?t:t+""}function aEe(e,t){if(Np(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Np(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var sEe=function(t){var r=t.x,n=t.y,s=t.xAxis,u=t.yAxis,h=AO({x:s.scale,y:u.scale}),m=h.apply({x:r,y:n},{bandAware:!0});return ul(t,"discard")&&!h.isInRange(m)?null:m},oS=function(e){function t(){return QSe(this,t),rEe(this,t,arguments)}return oEe(t,e),tEe(t,[{key:"render",value:function(){var n=this.props,s=n.x,u=n.y,h=n.r,m=n.alwaysShow,o=n.clipPathId,_=Si(s),E=Si(u);if(Xl(m===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!_||!E)return null;var S=sEe(this.props);if(!S)return null;var A=S.x,I=S.y,R=this.props,k=R.shape,L=R.className,N=ul(this.props,"hidden")?"url(#".concat(o,")"):void 0,z=Z3(Z3({clipPath:N},Br(this.props,!0)),{},{cx:A,cy:I});return be.createElement(Xn,{className:Fr("recharts-reference-dot",L)},t.renderDot(k,z),Ri.renderCallByParent(this.props,{x:A-h,y:I-h,width:2*h,height:2*h}))}}])}(be.Component);iS(oS,"displayName","ReferenceDot");iS(oS,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});iS(oS,"renderDot",function(e,t){var r;return be.isValidElement(e)?r=be.cloneElement(e,t):Rr(e)?r=e(t):r=be.createElement(k8,qC({},t,{cx:t.cx,cy:t.cy,className:"recharts-reference-dot-dot"})),r});function XC(){return XC=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},XC.apply(this,arguments)}function Bp(e){"@babel/helpers - typeof";return Bp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Bp(e)}function K3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Y3(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?K3(Object(r),!0).forEach(function(n){aS(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):K3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function lEe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function cEe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,iG(n.key),n)}}function uEe(e,t,r){return t&&cEe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function dEe(e,t,r){return t=b1(t),hEe(e,nG()?Reflect.construct(t,r||[],b1(e).constructor):t.apply(e,r))}function hEe(e,t){if(t&&(Bp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return fEe(e)}function fEe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function nG(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(nG=function(){return!!e})()}function b1(e){return b1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},b1(e)}function pEe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ZC(e,t)}function ZC(e,t){return ZC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},ZC(e,t)}function aS(e,t,r){return t=iG(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function iG(e){var t=mEe(e,"string");return Bp(t)=="symbol"?t:t+""}function mEe(e,t){if(Bp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Bp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var gEe=function(t,r,n,s,u){var h=u.x1,m=u.x2,o=u.y1,_=u.y2,E=u.xAxis,S=u.yAxis;if(!E||!S)return null;var A=AO({x:E.scale,y:S.scale}),I={x:t?A.x.apply(h,{position:"start"}):A.x.rangeMin,y:n?A.y.apply(o,{position:"start"}):A.y.rangeMin},R={x:r?A.x.apply(m,{position:"end"}):A.x.rangeMax,y:s?A.y.apply(_,{position:"end"}):A.y.rangeMax};return ul(u,"discard")&&(!A.isInRange(I)||!A.isInRange(R))?null:G8(I,R)},sS=function(e){function t(){return lEe(this,t),dEe(this,t,arguments)}return pEe(t,e),uEe(t,[{key:"render",value:function(){var n=this.props,s=n.x1,u=n.x2,h=n.y1,m=n.y2,o=n.className,_=n.alwaysShow,E=n.clipPathId;Xl(_===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var S=Si(s),A=Si(u),I=Si(h),R=Si(m),k=this.props.shape;if(!S&&!A&&!I&&!R&&!k)return null;var L=gEe(S,A,I,R,this.props);if(!L&&!k)return null;var N=ul(this.props,"hidden")?"url(#".concat(E,")"):void 0;return be.createElement(Xn,{className:Fr("recharts-reference-area",o)},t.renderRect(k,Y3(Y3({clipPath:N},Br(this.props,!0)),L)),Ri.renderCallByParent(this.props,L))}}])}(be.Component);aS(sS,"displayName","ReferenceArea");aS(sS,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});aS(sS,"renderRect",function(e,t){var r;return be.isValidElement(e)?r=be.cloneElement(e,t):Rr(e)?r=e(t):r=be.createElement(TO,XC({},t,{className:"recharts-reference-area-rect"})),r});function oG(e,t,r){if(t<1)return[];if(t===1&&r===void 0)return e;for(var n=[],s=0;s<e.length;s+=t)n.push(e[s]);return n}function yEe(e,t,r){var n={width:e.width+t.width,height:e.height+t.height};return dSe(n,r)}function vEe(e,t,r){var n=r==="width",s=e.x,u=e.y,h=e.width,m=e.height;return t===1?{start:n?s:u,end:n?s+h:u+m}:{start:n?s+h:u+m,end:n?s:u}}function w1(e,t,r,n,s){if(e*t<e*n||e*t>e*s)return!1;var u=r();return e*(t-e*u/2-n)>=0&&e*(t+e*u/2-s)<=0}function _Ee(e,t){return oG(e,t+1)}function xEe(e,t,r,n,s){for(var u=(n||[]).slice(),h=t.start,m=t.end,o=0,_=1,E=h,S=function(){var R=n==null?void 0:n[o];if(R===void 0)return{v:oG(n,_)};var k=o,L,N=function(){return L===void 0&&(L=r(R,k)),L},z=R.coordinate,F=o===0||w1(e,z,N,E,m);F||(o=0,E=h,_+=1),F&&(E=z+e*(N()/2+s),o+=_)},A;_<=u.length;)if(A=S(),A)return A.v;return[]}function $v(e){"@babel/helpers - typeof";return $v=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$v(e)}function J3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function oo(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?J3(Object(r),!0).forEach(function(n){bEe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):J3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function bEe(e,t,r){return t=wEe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function wEe(e){var t=SEe(e,"string");return $v(t)=="symbol"?t:t+""}function SEe(e,t){if($v(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if($v(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function EEe(e,t,r,n,s){for(var u=(n||[]).slice(),h=u.length,m=t.start,o=t.end,_=function(A){var I=u[A],R,k=function(){return R===void 0&&(R=r(I,A)),R};if(A===h-1){var L=e*(I.coordinate+e*k()/2-o);u[A]=I=oo(oo({},I),{},{tickCoord:L>0?I.coordinate-L*e:I.coordinate})}else u[A]=I=oo(oo({},I),{},{tickCoord:I.coordinate});var N=w1(e,I.tickCoord,k,m,o);N&&(o=I.tickCoord-e*(k()/2+s),u[A]=oo(oo({},I),{},{isShow:!0}))},E=h-1;E>=0;E--)_(E);return u}function TEe(e,t,r,n,s,u){var h=(n||[]).slice(),m=h.length,o=t.start,_=t.end;if(u){var E=n[m-1],S=r(E,m-1),A=e*(E.coordinate+e*S/2-_);h[m-1]=E=oo(oo({},E),{},{tickCoord:A>0?E.coordinate-A*e:E.coordinate});var I=w1(e,E.tickCoord,function(){return S},o,_);I&&(_=E.tickCoord-e*(S/2+s),h[m-1]=oo(oo({},E),{},{isShow:!0}))}for(var R=u?m-1:m,k=function(z){var F=h[z],U,W=function(){return U===void 0&&(U=r(F,z)),U};if(z===0){var Y=e*(F.coordinate-e*W()/2-o);h[z]=F=oo(oo({},F),{},{tickCoord:Y<0?F.coordinate-Y*e:F.coordinate})}else h[z]=F=oo(oo({},F),{},{tickCoord:F.coordinate});var Q=w1(e,F.tickCoord,W,o,_);Q&&(o=F.tickCoord+e*(W()/2+s),h[z]=oo(oo({},F),{},{isShow:!0}))},L=0;L<R;L++)k(L);return h}function kO(e,t,r){var n=e.tick,s=e.ticks,u=e.viewBox,h=e.minTickGap,m=e.orientation,o=e.interval,_=e.tickFormatter,E=e.unit,S=e.angle;if(!s||!s.length||!n)return[];if(Vt(o)||Zl.isSsr)return _Ee(s,typeof o=="number"&&Vt(o)?o:0);var A=[],I=m==="top"||m==="bottom"?"width":"height",R=E&&I==="width"?Dy(E,{fontSize:t,letterSpacing:r}):{width:0,height:0},k=function(F,U){var W=Rr(_)?_(F.value,U):F.value;return I==="width"?yEe(Dy(W,{fontSize:t,letterSpacing:r}),R,S):Dy(W,{fontSize:t,letterSpacing:r})[I]},L=s.length>=2?Ps(s[1].coordinate-s[0].coordinate):1,N=vEe(u,L,I);return o==="equidistantPreserveStart"?xEe(L,N,k,s,h):(o==="preserveStart"||o==="preserveStartEnd"?A=TEe(L,N,k,s,h,o==="preserveStartEnd"):A=EEe(L,N,k,s,h),A.filter(function(z){return z.isShow}))}var AEe=["viewBox"],PEe=["viewBox"],CEe=["ticks"];function $p(e){"@babel/helpers - typeof";return $p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$p(e)}function Uf(){return Uf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Uf.apply(this,arguments)}function Q3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function fo(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Q3(Object(r),!0).forEach(function(n){DO(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Q3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function aA(e,t){if(e==null)return{};var r=MEe(e,t),n,s;if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(e);for(s=0;s<u.length;s++)n=u[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function MEe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function IEe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function eB(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,sG(n.key),n)}}function OEe(e,t,r){return t&&eB(e.prototype,t),r&&eB(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function kEe(e,t,r){return t=S1(t),DEe(e,aG()?Reflect.construct(t,r||[],S1(e).constructor):t.apply(e,r))}function DEe(e,t){if(t&&($p(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return REe(e)}function REe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function aG(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(aG=function(){return!!e})()}function S1(e){return S1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},S1(e)}function LEe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&KC(e,t)}function KC(e,t){return KC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},KC(e,t)}function DO(e,t,r){return t=sG(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function sG(e){var t=jEe(e,"string");return $p(t)=="symbol"?t:t+""}function jEe(e,t){if($p(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if($p(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var pm=function(e){function t(r){var n;return IEe(this,t),n=kEe(this,t,[r]),n.state={fontSize:"",letterSpacing:""},n}return LEe(t,e),OEe(t,[{key:"shouldComponentUpdate",value:function(n,s){var u=n.viewBox,h=aA(n,AEe),m=this.props,o=m.viewBox,_=aA(m,PEe);return!ep(u,o)||!ep(h,_)||!ep(s,this.state)}},{key:"componentDidMount",value:function(){var n=this.layerReference;if(n){var s=n.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];s&&this.setState({fontSize:window.getComputedStyle(s).fontSize,letterSpacing:window.getComputedStyle(s).letterSpacing})}}},{key:"getTickLineCoord",value:function(n){var s=this.props,u=s.x,h=s.y,m=s.width,o=s.height,_=s.orientation,E=s.tickSize,S=s.mirror,A=s.tickMargin,I,R,k,L,N,z,F=S?-1:1,U=n.tickSize||E,W=Vt(n.tickCoord)?n.tickCoord:n.coordinate;switch(_){case"top":I=R=n.coordinate,L=h+ +!S*o,k=L-F*U,z=k-F*A,N=W;break;case"left":k=L=n.coordinate,R=u+ +!S*m,I=R-F*U,N=I-F*A,z=W;break;case"right":k=L=n.coordinate,R=u+ +S*m,I=R+F*U,N=I+F*A,z=W;break;default:I=R=n.coordinate,L=h+ +S*o,k=L+F*U,z=k+F*A,N=W;break}return{line:{x1:I,y1:k,x2:R,y2:L},tick:{x:N,y:z}}}},{key:"getTickTextAnchor",value:function(){var n=this.props,s=n.orientation,u=n.mirror,h;switch(s){case"left":h=u?"start":"end";break;case"right":h=u?"end":"start";break;default:h="middle";break}return h}},{key:"getTickVerticalAnchor",value:function(){var n=this.props,s=n.orientation,u=n.mirror,h="end";switch(s){case"left":case"right":h="middle";break;case"top":h=u?"start":"end";break;default:h=u?"end":"start";break}return h}},{key:"renderAxisLine",value:function(){var n=this.props,s=n.x,u=n.y,h=n.width,m=n.height,o=n.orientation,_=n.mirror,E=n.axisLine,S=fo(fo(fo({},Br(this.props,!1)),Br(E,!1)),{},{fill:"none"});if(o==="top"||o==="bottom"){var A=+(o==="top"&&!_||o==="bottom"&&_);S=fo(fo({},S),{},{x1:s,y1:u+A*m,x2:s+h,y2:u+A*m})}else{var I=+(o==="left"&&!_||o==="right"&&_);S=fo(fo({},S),{},{x1:s+I*h,y1:u,x2:s+I*h,y2:u+m})}return be.createElement("line",Uf({},S,{className:Fr("recharts-cartesian-axis-line",Ba(E,"className"))}))}},{key:"renderTicks",value:function(n,s,u){var h=this,m=this.props,o=m.tickLine,_=m.stroke,E=m.tick,S=m.tickFormatter,A=m.unit,I=kO(fo(fo({},this.props),{},{ticks:n}),s,u),R=this.getTickTextAnchor(),k=this.getTickVerticalAnchor(),L=Br(this.props,!1),N=Br(E,!1),z=fo(fo({},L),{},{fill:"none"},Br(o,!1)),F=I.map(function(U,W){var Y=h.getTickLineCoord(U),Q=Y.line,Z=Y.tick,re=fo(fo(fo(fo({textAnchor:R,verticalAnchor:k},L),{},{stroke:"none",fill:_},N),Z),{},{index:W,payload:U,visibleTicksCount:I.length,tickFormatter:S});return be.createElement(Xn,Uf({className:"recharts-cartesian-axis-tick",key:"tick-".concat(U.value,"-").concat(U.coordinate,"-").concat(U.tickCoord)},sv(h.props,U,W)),o&&be.createElement("line",Uf({},z,Q,{className:Fr("recharts-cartesian-axis-tick-line",Ba(o,"className"))})),E&&t.renderTickItem(E,re,"".concat(Rr(S)?S(U.value,W):U.value).concat(A||"")))});return be.createElement("g",{className:"recharts-cartesian-axis-ticks"},F)}},{key:"render",value:function(){var n=this,s=this.props,u=s.axisLine,h=s.width,m=s.height,o=s.ticksGenerator,_=s.className,E=s.hide;if(E)return null;var S=this.props,A=S.ticks,I=aA(S,CEe),R=A;return Rr(o)&&(R=A&&A.length>0?o(this.props):o(I)),h<=0||m<=0||!R||!R.length?null:be.createElement(Xn,{className:Fr("recharts-cartesian-axis",_),ref:function(L){n.layerReference=L}},u&&this.renderAxisLine(),this.renderTicks(R,this.state.fontSize,this.state.letterSpacing),Ri.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(n,s,u){var h;return be.isValidElement(n)?h=be.cloneElement(n,s):Rr(n)?h=n(s):h=be.createElement(Wb,Uf({},s,{className:"recharts-cartesian-axis-tick-value"}),u),h}}])}(V.Component);DO(pm,"displayName","CartesianAxis");DO(pm,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var zEe=["x1","y1","x2","y2","key"],NEe=["offset"];function uh(e){"@babel/helpers - typeof";return uh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},uh(e)}function tB(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function so(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?tB(Object(r),!0).forEach(function(n){BEe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tB(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function BEe(e,t,r){return t=$Ee(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $Ee(e){var t=FEe(e,"string");return uh(t)=="symbol"?t:t+""}function FEe(e,t){if(uh(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(uh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ud(){return Ud=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ud.apply(this,arguments)}function rB(e,t){if(e==null)return{};var r=UEe(e,t),n,s;if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(e);for(s=0;s<u.length;s++)n=u[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function UEe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var VEe=function(t){var r=t.fill;if(!r||r==="none")return null;var n=t.fillOpacity,s=t.x,u=t.y,h=t.width,m=t.height,o=t.ry;return be.createElement("rect",{x:s,y:u,ry:o,width:h,height:m,stroke:"none",fill:r,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function lG(e,t){var r;if(be.isValidElement(e))r=be.cloneElement(e,t);else if(Rr(e))r=e(t);else{var n=t.x1,s=t.y1,u=t.x2,h=t.y2,m=t.key,o=rB(t,zEe),_=Br(o,!1);_.offset;var E=rB(_,NEe);r=be.createElement("line",Ud({},E,{x1:n,y1:s,x2:u,y2:h,fill:"none",key:m}))}return r}function GEe(e){var t=e.x,r=e.width,n=e.horizontal,s=n===void 0?!0:n,u=e.horizontalPoints;if(!s||!u||!u.length)return null;var h=u.map(function(m,o){var _=so(so({},e),{},{x1:t,y1:m,x2:t+r,y2:m,key:"line-".concat(o),index:o});return lG(s,_)});return be.createElement("g",{className:"recharts-cartesian-grid-horizontal"},h)}function WEe(e){var t=e.y,r=e.height,n=e.vertical,s=n===void 0?!0:n,u=e.verticalPoints;if(!s||!u||!u.length)return null;var h=u.map(function(m,o){var _=so(so({},e),{},{x1:m,y1:t,x2:m,y2:t+r,key:"line-".concat(o),index:o});return lG(s,_)});return be.createElement("g",{className:"recharts-cartesian-grid-vertical"},h)}function qEe(e){var t=e.horizontalFill,r=e.fillOpacity,n=e.x,s=e.y,u=e.width,h=e.height,m=e.horizontalPoints,o=e.horizontal,_=o===void 0?!0:o;if(!_||!t||!t.length)return null;var E=m.map(function(A){return Math.round(A+s-s)}).sort(function(A,I){return A-I});s!==E[0]&&E.unshift(0);var S=E.map(function(A,I){var R=!E[I+1],k=R?s+h-A:E[I+1]-A;if(k<=0)return null;var L=I%t.length;return be.createElement("rect",{key:"react-".concat(I),y:A,x:n,height:k,width:u,stroke:"none",fill:t[L],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return be.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},S)}function HEe(e){var t=e.vertical,r=t===void 0?!0:t,n=e.verticalFill,s=e.fillOpacity,u=e.x,h=e.y,m=e.width,o=e.height,_=e.verticalPoints;if(!r||!n||!n.length)return null;var E=_.map(function(A){return Math.round(A+u-u)}).sort(function(A,I){return A-I});u!==E[0]&&E.unshift(0);var S=E.map(function(A,I){var R=!E[I+1],k=R?u+m-A:E[I+1]-A;if(k<=0)return null;var L=I%n.length;return be.createElement("rect",{key:"react-".concat(I),x:A,y:h,width:k,height:o,stroke:"none",fill:n[L],fillOpacity:s,className:"recharts-cartesian-grid-bg"})});return be.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},S)}var XEe=function(t,r){var n=t.xAxis,s=t.width,u=t.height,h=t.offset;return m8(kO(so(so(so({},pm.defaultProps),n),{},{ticks:Gl(n,!0),viewBox:{x:0,y:0,width:s,height:u}})),h.left,h.left+h.width,r)},ZEe=function(t,r){var n=t.yAxis,s=t.width,u=t.height,h=t.offset;return m8(kO(so(so(so({},pm.defaultProps),n),{},{ticks:Gl(n,!0),viewBox:{x:0,y:0,width:s,height:u}})),h.top,h.top+h.height,r)},Ef={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function Yl(e){var t,r,n,s,u,h,m=MO(),o=IO(),_=jSe(),E=so(so({},e),{},{stroke:(t=e.stroke)!==null&&t!==void 0?t:Ef.stroke,fill:(r=e.fill)!==null&&r!==void 0?r:Ef.fill,horizontal:(n=e.horizontal)!==null&&n!==void 0?n:Ef.horizontal,horizontalFill:(s=e.horizontalFill)!==null&&s!==void 0?s:Ef.horizontalFill,vertical:(u=e.vertical)!==null&&u!==void 0?u:Ef.vertical,verticalFill:(h=e.verticalFill)!==null&&h!==void 0?h:Ef.verticalFill,x:Vt(e.x)?e.x:_.left,y:Vt(e.y)?e.y:_.top,width:Vt(e.width)?e.width:_.width,height:Vt(e.height)?e.height:_.height}),S=E.x,A=E.y,I=E.width,R=E.height,k=E.syncWithTicks,L=E.horizontalValues,N=E.verticalValues,z=DSe(),F=RSe();if(!Vt(I)||I<=0||!Vt(R)||R<=0||!Vt(S)||S!==+S||!Vt(A)||A!==+A)return null;var U=E.verticalCoordinatesGenerator||XEe,W=E.horizontalCoordinatesGenerator||ZEe,Y=E.horizontalPoints,Q=E.verticalPoints;if((!Y||!Y.length)&&Rr(W)){var Z=L&&L.length,re=W({yAxis:F?so(so({},F),{},{ticks:Z?L:F.ticks}):void 0,width:m,height:o,offset:_},Z?!0:k);Xl(Array.isArray(re),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(uh(re),"]")),Array.isArray(re)&&(Y=re)}if((!Q||!Q.length)&&Rr(U)){var ne=N&&N.length,ue=U({xAxis:z?so(so({},z),{},{ticks:ne?N:z.ticks}):void 0,width:m,height:o,offset:_},ne?!0:k);Xl(Array.isArray(ue),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(uh(ue),"]")),Array.isArray(ue)&&(Q=ue)}return be.createElement("g",{className:"recharts-cartesian-grid"},be.createElement(VEe,{fill:E.fill,fillOpacity:E.fillOpacity,x:E.x,y:E.y,width:E.width,height:E.height,ry:E.ry}),be.createElement(GEe,Ud({},E,{offset:_,horizontalPoints:Y,xAxis:z,yAxis:F})),be.createElement(WEe,Ud({},E,{offset:_,verticalPoints:Q,xAxis:z,yAxis:F})),be.createElement(qEe,Ud({},E,{horizontalPoints:Y})),be.createElement(HEe,Ud({},E,{verticalPoints:Q})))}Yl.displayName="CartesianGrid";function Fp(e){"@babel/helpers - typeof";return Fp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Fp(e)}function KEe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function YEe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,dG(n.key),n)}}function JEe(e,t,r){return t&&YEe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function QEe(e,t,r){return t=E1(t),eTe(e,cG()?Reflect.construct(t,r||[],E1(e).constructor):t.apply(e,r))}function eTe(e,t){if(t&&(Fp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return tTe(e)}function tTe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function cG(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(cG=function(){return!!e})()}function E1(e){return E1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},E1(e)}function rTe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&YC(e,t)}function YC(e,t){return YC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},YC(e,t)}function uG(e,t,r){return t=dG(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function dG(e){var t=nTe(e,"string");return Fp(t)=="symbol"?t:t+""}function nTe(e,t){if(Fp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Fp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var m_=function(e){function t(){return KEe(this,t),QEe(this,t,arguments)}return rTe(t,e),JEe(t,[{key:"render",value:function(){return null}}])}(be.Component);uG(m_,"displayName","ZAxis");uG(m_,"defaultProps",{zAxisId:0,range:[64,64],scale:"auto",type:"number"});var iTe=["option","isActive"];function zy(){return zy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},zy.apply(this,arguments)}function oTe(e,t){if(e==null)return{};var r=aTe(e,t),n,s;if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(e);for(s=0;s<u.length;s++)n=u[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function aTe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function sTe(e){var t=e.option,r=e.isActive,n=oTe(e,iTe);return typeof t=="string"?be.createElement($C,zy({option:be.createElement($w,zy({type:t},n)),isActive:r,shapeType:"symbols"},n)):be.createElement($C,zy({option:t,isActive:r,shapeType:"symbols"},n))}function Up(e){"@babel/helpers - typeof";return Up=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Up(e)}function Ny(){return Ny=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ny.apply(this,arguments)}function nB(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Ia(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?nB(Object(r),!0).forEach(function(n){uu(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):nB(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function lTe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function iB(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,fG(n.key),n)}}function cTe(e,t,r){return t&&iB(e.prototype,t),r&&iB(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function uTe(e,t,r){return t=T1(t),dTe(e,hG()?Reflect.construct(t,r||[],T1(e).constructor):t.apply(e,r))}function dTe(e,t){if(t&&(Up(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return hTe(e)}function hTe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function hG(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(hG=function(){return!!e})()}function T1(e){return T1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},T1(e)}function fTe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&JC(e,t)}function JC(e,t){return JC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},JC(e,t)}function uu(e,t,r){return t=fG(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function fG(e){var t=pTe(e,"string");return Up(t)=="symbol"?t:t+""}function pTe(e,t){if(Up(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Up(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Ou=function(e){function t(){var r;lTe(this,t);for(var n=arguments.length,s=new Array(n),u=0;u<n;u++)s[u]=arguments[u];return r=uTe(this,t,[].concat(s)),uu(r,"state",{isAnimationFinished:!1}),uu(r,"handleAnimationEnd",function(){r.setState({isAnimationFinished:!0})}),uu(r,"handleAnimationStart",function(){r.setState({isAnimationFinished:!1})}),uu(r,"id",l_("recharts-scatter-")),r}return fTe(t,e),cTe(t,[{key:"renderSymbolsStatically",value:function(n){var s=this,u=this.props,h=u.shape,m=u.activeShape,o=u.activeIndex,_=Br(this.props,!1);return n.map(function(E,S){var A=o===S,I=A?m:h,R=Ia(Ia({},_),E);return be.createElement(Xn,Ny({className:"recharts-scatter-symbol",key:"symbol-".concat(E==null?void 0:E.cx,"-").concat(E==null?void 0:E.cy,"-").concat(E==null?void 0:E.size,"-").concat(S)},sv(s.props,E,S),{role:"img"}),be.createElement(sTe,Ny({option:I,isActive:A,key:"symbol-".concat(S)},R)))})}},{key:"renderSymbolsWithAnimation",value:function(){var n=this,s=this.props,u=s.points,h=s.isAnimationActive,m=s.animationBegin,o=s.animationDuration,_=s.animationEasing,E=s.animationId,S=this.state.prevPoints;return be.createElement(sc,{begin:m,duration:o,isActive:h,easing:_,from:{t:0},to:{t:1},key:"pie-".concat(E),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(A){var I=A.t,R=u.map(function(k,L){var N=S&&S[L];if(N){var z=tl(N.cx,k.cx),F=tl(N.cy,k.cy),U=tl(N.size,k.size);return Ia(Ia({},k),{},{cx:z(I),cy:F(I),size:U(I)})}var W=tl(0,k.size);return Ia(Ia({},k),{},{size:W(I)})});return be.createElement(Xn,null,n.renderSymbolsStatically(R))})}},{key:"renderSymbols",value:function(){var n=this.props,s=n.points,u=n.isAnimationActive,h=this.state.prevPoints;return u&&s&&s.length&&(!h||!Jw(h,s))?this.renderSymbolsWithAnimation():this.renderSymbolsStatically(s)}},{key:"renderErrorBar",value:function(){var n=this.props.isAnimationActive;if(n&&!this.state.isAnimationFinished)return null;var s=this.props,u=s.points,h=s.xAxis,m=s.yAxis,o=s.children,_=da(o,p_);return _?_.map(function(E,S){var A=E.props,I=A.direction,R=A.dataKey;return be.cloneElement(E,{key:"".concat(I,"-").concat(R,"-").concat(u[S]),data:u,xAxis:h,yAxis:m,layout:I==="x"?"vertical":"horizontal",dataPointFormatter:function(L,N){return{x:L.cx,y:L.cy,value:I==="x"?+L.node.x:+L.node.y,errorVal:_o(L,N)}}})}):null}},{key:"renderLine",value:function(){var n=this.props,s=n.points,u=n.line,h=n.lineType,m=n.lineJointType,o=Br(this.props,!1),_=Br(u,!1),E,S;if(h==="joint")E=s.map(function(F){return{x:F.cx,y:F.cy}});else if(h==="fitting"){var A=Pie(s),I=A.xmin,R=A.xmax,k=A.a,L=A.b,N=function(U){return k*U+L};E=[{x:I,y:N(I)},{x:R,y:N(R)}]}var z=Ia(Ia(Ia({},o),{},{fill:"none",stroke:o&&o.fill},_),{},{points:E});return be.isValidElement(u)?S=be.cloneElement(u,z):Rr(u)?S=u(z):S=be.createElement(CC,Ny({},z,{type:m})),be.createElement(Xn,{className:"recharts-scatter-line",key:"recharts-scatter-line"},S)}},{key:"render",value:function(){var n=this.props,s=n.hide,u=n.points,h=n.line,m=n.className,o=n.xAxis,_=n.yAxis,E=n.left,S=n.top,A=n.width,I=n.height,R=n.id,k=n.isAnimationActive;if(s||!u||!u.length)return null;var L=this.state.isAnimationFinished,N=Fr("recharts-scatter",m),z=o&&o.allowDataOverflow,F=_&&_.allowDataOverflow,U=z||F,W=Mr(R)?this.id:R;return be.createElement(Xn,{className:N,clipPath:U?"url(#clipPath-".concat(W,")"):null},z||F?be.createElement("defs",null,be.createElement("clipPath",{id:"clipPath-".concat(W)},be.createElement("rect",{x:z?E:E-A/2,y:F?S:S-I/2,width:z?A:A*2,height:F?I:I*2}))):null,h&&this.renderLine(),this.renderErrorBar(),be.createElement(Xn,{key:"recharts-scatter-symbols"},this.renderSymbols()),(!k||L)&&bu.renderCallByParent(this.props,u))}}],[{key:"getDerivedStateFromProps",value:function(n,s){return n.animationId!==s.prevAnimationId?{prevAnimationId:n.animationId,curPoints:n.points,prevPoints:s.curPoints}:n.points!==s.curPoints?{curPoints:n.points}:null}}])}(V.PureComponent);uu(Ou,"displayName","Scatter");uu(Ou,"defaultProps",{xAxisId:0,yAxisId:0,zAxisId:0,legendType:"circle",lineType:"joint",lineJointType:"linear",data:[],shape:"circle",hide:!1,isAnimationActive:!Zl.isSsr,animationBegin:0,animationDuration:400,animationEasing:"linear"});uu(Ou,"getComposedData",function(e){var t=e.xAxis,r=e.yAxis,n=e.zAxis,s=e.item,u=e.displayedData,h=e.xAxisTicks,m=e.yAxisTicks,o=e.offset,_=s.props.tooltipType,E=da(s.props.children,QI),S=Mr(t.dataKey)?s.props.dataKey:t.dataKey,A=Mr(r.dataKey)?s.props.dataKey:r.dataKey,I=n&&n.dataKey,R=n?n.range:m_.defaultProps.range,k=R&&R[0],L=t.scale.bandwidth?t.scale.bandwidth():0,N=r.scale.bandwidth?r.scale.bandwidth():0,z=u.map(function(F,U){var W=_o(F,S),Y=_o(F,A),Q=!Mr(I)&&_o(F,I)||"-",Z=[{name:Mr(t.dataKey)?s.props.name:t.name||t.dataKey,unit:t.unit||"",value:W,payload:F,dataKey:S,type:_},{name:Mr(r.dataKey)?s.props.name:r.name||r.dataKey,unit:r.unit||"",value:Y,payload:F,dataKey:A,type:_}];Q!=="-"&&Z.push({name:n.name||n.dataKey,unit:n.unit||"",value:Q,payload:F,dataKey:I,type:_});var re=BN({axis:t,ticks:h,bandSize:L,entry:F,index:U,dataKey:S}),ne=BN({axis:r,ticks:m,bandSize:N,entry:F,index:U,dataKey:A}),ue=Q!=="-"?n.scale(Q):k,fe=Math.sqrt(Math.max(ue,0)/Math.PI);return Ia(Ia({},F),{},{cx:re,cy:ne,x:re-fe,y:ne-fe,xAxis:t,yAxis:r,zAxis:n,width:2*fe,height:2*fe,size:ue,node:{x:W,y:Y,z:Q},tooltipPayload:Z,tooltipPosition:{x:re,y:ne},payload:F},E&&E[U]&&E[U].props)});return Ia({points:z},o)});function Vp(e){"@babel/helpers - typeof";return Vp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Vp(e)}function mTe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function gTe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,gG(n.key),n)}}function yTe(e,t,r){return t&&gTe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function vTe(e,t,r){return t=A1(t),_Te(e,pG()?Reflect.construct(t,r||[],A1(e).constructor):t.apply(e,r))}function _Te(e,t){if(t&&(Vp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return xTe(e)}function xTe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function pG(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(pG=function(){return!!e})()}function A1(e){return A1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},A1(e)}function bTe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&QC(e,t)}function QC(e,t){return QC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},QC(e,t)}function mG(e,t,r){return t=gG(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function gG(e){var t=wTe(e,"string");return Vp(t)=="symbol"?t:t+""}function wTe(e,t){if(Vp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Vp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function eM(){return eM=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},eM.apply(this,arguments)}function STe(e){var t=e.xAxisId,r=MO(),n=IO(),s=Y8(t);return s==null?null:be.createElement(pm,eM({},s,{className:Fr("recharts-".concat(s.axisType," ").concat(s.axisType),s.className),viewBox:{x:0,y:0,width:r,height:n},ticksGenerator:function(h){return Gl(h,!0)}}))}var $a=function(e){function t(){return mTe(this,t),vTe(this,t,arguments)}return bTe(t,e),yTe(t,[{key:"render",value:function(){return be.createElement(STe,this.props)}}])}(be.Component);mG($a,"displayName","XAxis");mG($a,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function Gp(e){"@babel/helpers - typeof";return Gp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Gp(e)}function ETe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function TTe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,_G(n.key),n)}}function ATe(e,t,r){return t&&TTe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function PTe(e,t,r){return t=P1(t),CTe(e,yG()?Reflect.construct(t,r||[],P1(e).constructor):t.apply(e,r))}function CTe(e,t){if(t&&(Gp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return MTe(e)}function MTe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function yG(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(yG=function(){return!!e})()}function P1(e){return P1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},P1(e)}function ITe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&tM(e,t)}function tM(e,t){return tM=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},tM(e,t)}function vG(e,t,r){return t=_G(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _G(e){var t=OTe(e,"string");return Gp(t)=="symbol"?t:t+""}function OTe(e,t){if(Gp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Gp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function rM(){return rM=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},rM.apply(this,arguments)}var kTe=function(t){var r=t.yAxisId,n=MO(),s=IO(),u=J8(r);return u==null?null:be.createElement(pm,rM({},u,{className:Fr("recharts-".concat(u.axisType," ").concat(u.axisType),u.className),viewBox:{x:0,y:0,width:n,height:s},ticksGenerator:function(m){return Gl(m,!0)}}))},Fa=function(e){function t(){return ETe(this,t),PTe(this,t,arguments)}return ITe(t,e),ATe(t,[{key:"render",value:function(){return be.createElement(kTe,this.props)}}])}(be.Component);vG(Fa,"displayName","YAxis");vG(Fa,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function oB(e){return jTe(e)||LTe(e)||RTe(e)||DTe()}function DTe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function RTe(e,t){if(e){if(typeof e=="string")return nM(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return nM(e,t)}}function LTe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function jTe(e){if(Array.isArray(e))return nM(e)}function nM(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var iM=function(t,r,n,s,u){var h=da(t,wu),m=da(t,oS),o=[].concat(oB(h),oB(m)),_=da(t,sS),E="".concat(s,"Id"),S=s[0],A=r;if(o.length&&(A=o.reduce(function(k,L){if(L.props[E]===n&&ul(L.props,"extendDomain")&&Vt(L.props[S])){var N=L.props[S];return[Math.min(k[0],N),Math.max(k[1],N)]}return k},A)),_.length){var I="".concat(S,"1"),R="".concat(S,"2");A=_.reduce(function(k,L){if(L.props[E]===n&&ul(L.props,"extendDomain")&&Vt(L.props[I])&&Vt(L.props[R])){var N=L.props[I],z=L.props[R];return[Math.min(k[0],N,z),Math.max(k[1],N,z)]}return k},A)}return u&&u.length&&(A=u.reduce(function(k,L){return Vt(L)?[Math.min(k[0],L),Math.max(k[1],L)]:k},A)),A},xG={exports:{}};(function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function s(o,_,E){this.fn=o,this.context=_,this.once=E||!1}function u(o,_,E,S,A){if(typeof E!="function")throw new TypeError("The listener must be a function");var I=new s(E,S||o,A),R=r?r+_:_;return o._events[R]?o._events[R].fn?o._events[R]=[o._events[R],I]:o._events[R].push(I):(o._events[R]=I,o._eventsCount++),o}function h(o,_){--o._eventsCount===0?o._events=new n:delete o._events[_]}function m(){this._events=new n,this._eventsCount=0}m.prototype.eventNames=function(){var _=[],E,S;if(this._eventsCount===0)return _;for(S in E=this._events)t.call(E,S)&&_.push(r?S.slice(1):S);return Object.getOwnPropertySymbols?_.concat(Object.getOwnPropertySymbols(E)):_},m.prototype.listeners=function(_){var E=r?r+_:_,S=this._events[E];if(!S)return[];if(S.fn)return[S.fn];for(var A=0,I=S.length,R=new Array(I);A<I;A++)R[A]=S[A].fn;return R},m.prototype.listenerCount=function(_){var E=r?r+_:_,S=this._events[E];return S?S.fn?1:S.length:0},m.prototype.emit=function(_,E,S,A,I,R){var k=r?r+_:_;if(!this._events[k])return!1;var L=this._events[k],N=arguments.length,z,F;if(L.fn){switch(L.once&&this.removeListener(_,L.fn,void 0,!0),N){case 1:return L.fn.call(L.context),!0;case 2:return L.fn.call(L.context,E),!0;case 3:return L.fn.call(L.context,E,S),!0;case 4:return L.fn.call(L.context,E,S,A),!0;case 5:return L.fn.call(L.context,E,S,A,I),!0;case 6:return L.fn.call(L.context,E,S,A,I,R),!0}for(F=1,z=new Array(N-1);F<N;F++)z[F-1]=arguments[F];L.fn.apply(L.context,z)}else{var U=L.length,W;for(F=0;F<U;F++)switch(L[F].once&&this.removeListener(_,L[F].fn,void 0,!0),N){case 1:L[F].fn.call(L[F].context);break;case 2:L[F].fn.call(L[F].context,E);break;case 3:L[F].fn.call(L[F].context,E,S);break;case 4:L[F].fn.call(L[F].context,E,S,A);break;default:if(!z)for(W=1,z=new Array(N-1);W<N;W++)z[W-1]=arguments[W];L[F].fn.apply(L[F].context,z)}}return!0},m.prototype.on=function(_,E,S){return u(this,_,E,S,!1)},m.prototype.once=function(_,E,S){return u(this,_,E,S,!0)},m.prototype.removeListener=function(_,E,S,A){var I=r?r+_:_;if(!this._events[I])return this;if(!E)return h(this,I),this;var R=this._events[I];if(R.fn)R.fn===E&&(!A||R.once)&&(!S||R.context===S)&&h(this,I);else{for(var k=0,L=[],N=R.length;k<N;k++)(R[k].fn!==E||A&&!R[k].once||S&&R[k].context!==S)&&L.push(R[k]);L.length?this._events[I]=L.length===1?L[0]:L:h(this,I)}return this},m.prototype.removeAllListeners=function(_){var E;return _?(E=r?r+_:_,this._events[E]&&h(this,E)):(this._events=new n,this._eventsCount=0),this},m.prototype.off=m.prototype.removeListener,m.prototype.addListener=m.prototype.on,m.prefixed=r,m.EventEmitter=m,e.exports=m})(xG);var zTe=xG.exports;const NTe=sn(zTe);var sA=new NTe,lA="recharts.syncMouseEvents";function Fv(e){"@babel/helpers - typeof";return Fv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Fv(e)}function BTe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $Te(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,bG(n.key),n)}}function FTe(e,t,r){return t&&$Te(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function cA(e,t,r){return t=bG(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function bG(e){var t=UTe(e,"string");return Fv(t)=="symbol"?t:t+""}function UTe(e,t){if(Fv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Fv(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var VTe=function(){function e(){BTe(this,e),cA(this,"activeIndex",0),cA(this,"coordinateList",[]),cA(this,"layout","horizontal")}return FTe(e,[{key:"setDetails",value:function(r){var n,s=r.coordinateList,u=s===void 0?null:s,h=r.container,m=h===void 0?null:h,o=r.layout,_=o===void 0?null:o,E=r.offset,S=E===void 0?null:E,A=r.mouseHandlerCallback,I=A===void 0?null:A;this.coordinateList=(n=u??this.coordinateList)!==null&&n!==void 0?n:[],this.container=m??this.container,this.layout=_??this.layout,this.offset=S??this.offset,this.mouseHandlerCallback=I??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(r){if(this.coordinateList.length!==0)switch(r.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(r){this.activeIndex=r}},{key:"spoofMouse",value:function(){var r,n;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var s=this.container.getBoundingClientRect(),u=s.x,h=s.y,m=s.height,o=this.coordinateList[this.activeIndex].coordinate,_=((r=window)===null||r===void 0?void 0:r.scrollX)||0,E=((n=window)===null||n===void 0?void 0:n.scrollY)||0,S=u+o+_,A=h+this.offset.top+m/2+E;this.mouseHandlerCallback({pageX:S,pageY:A})}}}])}();function GTe(e,t,r){if(r==="number"&&t===!0&&Array.isArray(e)){var n=e==null?void 0:e[0],s=e==null?void 0:e[1];if(n&&s&&Vt(n)&&Vt(s))return!0}return!1}function WTe(e,t,r,n){var s=n/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-s:r.left+.5,y:e==="horizontal"?r.top+.5:t.y-s,width:e==="horizontal"?n:r.width-1,height:e==="horizontal"?r.height-1:n}}function wG(e){var t=e.cx,r=e.cy,n=e.radius,s=e.startAngle,u=e.endAngle,h=Ui(t,r,n,s),m=Ui(t,r,n,u);return{points:[h,m],cx:t,cy:r,radius:n,startAngle:s,endAngle:u}}function qTe(e,t,r){var n,s,u,h;if(e==="horizontal")n=t.x,u=n,s=r.top,h=r.top+r.height;else if(e==="vertical")s=t.y,h=s,n=r.left,u=r.left+r.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var m=t.cx,o=t.cy,_=t.innerRadius,E=t.outerRadius,S=t.angle,A=Ui(m,o,_,S),I=Ui(m,o,E,S);n=A.x,s=A.y,u=I.x,h=I.y}else return wG(t);return[{x:n,y:s},{x:u,y:h}]}function Uv(e){"@babel/helpers - typeof";return Uv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Uv(e)}function aB(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function P0(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?aB(Object(r),!0).forEach(function(n){HTe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):aB(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function HTe(e,t,r){return t=XTe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function XTe(e){var t=ZTe(e,"string");return Uv(t)=="symbol"?t:t+""}function ZTe(e,t){if(Uv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Uv(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function KTe(e){var t,r,n=e.element,s=e.tooltipEventType,u=e.isActive,h=e.activeCoordinate,m=e.activePayload,o=e.offset,_=e.activeTooltipIndex,E=e.tooltipAxisBandSize,S=e.layout,A=e.chartName,I=(t=n.props.cursor)!==null&&t!==void 0?t:(r=n.type.defaultProps)===null||r===void 0?void 0:r.cursor;if(!n||!I||!u||!h||A!=="ScatterChart"&&s!=="axis")return null;var R,k=CC;if(A==="ScatterChart")R=h,k=qbe;else if(A==="BarChart")R=WTe(S,h,o,E),k=TO;else if(S==="radial"){var L=wG(h),N=L.cx,z=L.cy,F=L.radius,U=L.startAngle,W=L.endAngle;R={cx:N,cy:z,startAngle:U,endAngle:W,innerRadius:F,outerRadius:F},k=x8}else R={points:qTe(S,h,o)},k=CC;var Y=P0(P0(P0(P0({stroke:"#ccc",pointerEvents:"none"},o),R),Br(I,!1)),{},{payload:m,payloadIndex:_,className:Fr("recharts-tooltip-cursor",I.className)});return V.isValidElement(I)?V.cloneElement(I,Y):V.createElement(k,Y)}var YTe=["item"],JTe=["children","className","width","height","style","compact","title","desc"];function Wp(e){"@babel/helpers - typeof";return Wp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Wp(e)}function By(){return By=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},By.apply(this,arguments)}function sB(e,t){return tAe(e)||eAe(e,t)||EG(e,t)||QTe()}function QTe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function eAe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,u,h,m=[],o=!0,_=!1;try{if(u=(r=r.call(e)).next,t!==0)for(;!(o=(n=u.call(r)).done)&&(m.push(n.value),m.length!==t);o=!0);}catch(E){_=!0,s=E}finally{try{if(!o&&r.return!=null&&(h=r.return(),Object(h)!==h))return}finally{if(_)throw s}}return m}}function tAe(e){if(Array.isArray(e))return e}function lB(e,t){if(e==null)return{};var r=rAe(e,t),n,s;if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(e);for(s=0;s<u.length;s++)n=u[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function rAe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function nAe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function iAe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,TG(n.key),n)}}function oAe(e,t,r){return t&&iAe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function aAe(e,t,r){return t=C1(t),sAe(e,SG()?Reflect.construct(t,r||[],C1(e).constructor):t.apply(e,r))}function sAe(e,t){if(t&&(Wp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return lAe(e)}function lAe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function SG(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(SG=function(){return!!e})()}function C1(e){return C1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},C1(e)}function cAe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&oM(e,t)}function oM(e,t){return oM=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},oM(e,t)}function qp(e){return hAe(e)||dAe(e)||EG(e)||uAe()}function uAe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function EG(e,t){if(e){if(typeof e=="string")return aM(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return aM(e,t)}}function dAe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function hAe(e){if(Array.isArray(e))return aM(e)}function aM(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function cB(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function mt(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?cB(Object(r),!0).forEach(function(n){pr(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):cB(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function pr(e,t,r){return t=TG(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function TG(e){var t=fAe(e,"string");return Wp(t)=="symbol"?t:t+""}function fAe(e,t){if(Wp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Wp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var pAe={xAxis:["bottom","top"],yAxis:["left","right"]},mAe={width:"100%",height:"100%"},AG={x:0,y:0};function C0(e){return e}var gAe=function(t,r){return r==="horizontal"?t.x:r==="vertical"?t.y:r==="centric"?t.angle:t.radius},yAe=function(t,r,n,s){var u=r.find(function(E){return E&&E.index===n});if(u){if(t==="horizontal")return{x:u.coordinate,y:s.y};if(t==="vertical")return{x:s.x,y:u.coordinate};if(t==="centric"){var h=u.coordinate,m=s.radius;return mt(mt(mt({},s),Ui(s.cx,s.cy,m,h)),{},{angle:h,radius:m})}var o=u.coordinate,_=s.angle;return mt(mt(mt({},s),Ui(s.cx,s.cy,o,_)),{},{angle:_,radius:o})}return AG},lS=function(t,r){var n=r.graphicalItems,s=r.dataStartIndex,u=r.dataEndIndex,h=(n??[]).reduce(function(m,o){var _=o.props.data;return _&&_.length?[].concat(qp(m),qp(_)):m},[]);return h.length>0?h:t&&t.length&&Vt(s)&&Vt(u)?t.slice(s,u+1):[]};function PG(e){return e==="number"?[0,"auto"]:void 0}var sM=function(t,r,n,s){var u=t.graphicalItems,h=t.tooltipAxis,m=lS(r,t);return n<0||!u||!u.length||n>=m.length?null:u.reduce(function(o,_){var E,S=(E=_.props.data)!==null&&E!==void 0?E:r;S&&t.dataStartIndex+t.dataEndIndex!==0&&t.dataEndIndex-t.dataStartIndex>=n&&(S=S.slice(t.dataStartIndex,t.dataEndIndex+1));var A;if(h.dataKey&&!h.allowDuplicatedCategory){var I=S===void 0?m:S;A=Ib(I,h.dataKey,s)}else A=S&&S[n]||m[n];return A?[].concat(qp(o),[y8(_,A)]):o},[])},uB=function(t,r,n,s){var u=s||{x:t.chartX,y:t.chartY},h=gAe(u,n),m=t.orderedTooltipTicks,o=t.tooltipAxis,_=t.tooltipTicks,E=N_e(h,m,_,o);if(E>=0&&_){var S=_[E]&&_[E].value,A=sM(t,r,E,S),I=yAe(n,m,E,u);return{activeTooltipIndex:E,activeLabel:S,activePayload:A,activeCoordinate:I}}return null},vAe=function(t,r){var n=r.axes,s=r.graphicalItems,u=r.axisType,h=r.axisIdKey,m=r.stackGroups,o=r.dataStartIndex,_=r.dataEndIndex,E=t.layout,S=t.children,A=t.stackOffset,I=p8(E,u);return n.reduce(function(R,k){var L,N=k.type.defaultProps!==void 0?mt(mt({},k.type.defaultProps),k.props):k.props,z=N.type,F=N.dataKey,U=N.allowDataOverflow,W=N.allowDuplicatedCategory,Y=N.scale,Q=N.ticks,Z=N.includeHidden,re=N[h];if(R[re])return R;var ne=lS(t.data,{graphicalItems:s.filter(function(Ge){var Re,at=h in Ge.props?Ge.props[h]:(Re=Ge.type.defaultProps)===null||Re===void 0?void 0:Re[h];return at===re}),dataStartIndex:o,dataEndIndex:_}),ue=ne.length,fe,Ee,Se;GTe(N.domain,U,z)&&(fe=SC(N.domain,null,U),I&&(z==="number"||Y!=="auto")&&(Se=Ly(ne,F,"category")));var je=PG(z);if(!fe||fe.length===0){var Le,Ue=(Le=N.domain)!==null&&Le!==void 0?Le:je;if(F){if(fe=Ly(ne,F,z),z==="category"&&I){var we=Aie(fe);W&&we?(Ee=fe,fe=p1(0,ue)):W||(fe=VN(Ue,fe,k).reduce(function(Ge,Re){return Ge.indexOf(Re)>=0?Ge:[].concat(qp(Ge),[Re])},[]))}else if(z==="category")W?fe=fe.filter(function(Ge){return Ge!==""&&!Mr(Ge)}):fe=VN(Ue,fe,k).reduce(function(Ge,Re){return Ge.indexOf(Re)>=0||Re===""||Mr(Re)?Ge:[].concat(qp(Ge),[Re])},[]);else if(z==="number"){var Pe=V_e(ne,s.filter(function(Ge){var Re,at,Et=h in Ge.props?Ge.props[h]:(Re=Ge.type.defaultProps)===null||Re===void 0?void 0:Re[h],vt="hide"in Ge.props?Ge.props.hide:(at=Ge.type.defaultProps)===null||at===void 0?void 0:at.hide;return Et===re&&(Z||!vt)}),F,u,E);Pe&&(fe=Pe)}I&&(z==="number"||Y!=="auto")&&(Se=Ly(ne,F,"category"))}else I?fe=p1(0,ue):m&&m[re]&&m[re].hasStack&&z==="number"?fe=A==="expand"?[0,1]:g8(m[re].stackGroups,o,_):fe=f8(ne,s.filter(function(Ge){var Re=h in Ge.props?Ge.props[h]:Ge.type.defaultProps[h],at="hide"in Ge.props?Ge.props.hide:Ge.type.defaultProps.hide;return Re===re&&(Z||!at)}),z,E,!0);if(z==="number")fe=iM(S,fe,re,u,Q),Ue&&(fe=SC(Ue,fe,U));else if(z==="category"&&Ue){var rt=Ue,$e=fe.every(function(Ge){return rt.indexOf(Ge)>=0});$e&&(fe=rt)}}return mt(mt({},R),{},pr({},re,mt(mt({},N),{},{axisType:u,domain:fe,categoricalDomain:Se,duplicateDomain:Ee,originalDomain:(L=N.domain)!==null&&L!==void 0?L:je,isCategorical:I,layout:E})))},{})},_Ae=function(t,r){var n=r.graphicalItems,s=r.Axis,u=r.axisType,h=r.axisIdKey,m=r.stackGroups,o=r.dataStartIndex,_=r.dataEndIndex,E=t.layout,S=t.children,A=lS(t.data,{graphicalItems:n,dataStartIndex:o,dataEndIndex:_}),I=A.length,R=p8(E,u),k=-1;return n.reduce(function(L,N){var z=N.type.defaultProps!==void 0?mt(mt({},N.type.defaultProps),N.props):N.props,F=z[h],U=PG("number");if(!L[F]){k++;var W;return R?W=p1(0,I):m&&m[F]&&m[F].hasStack?(W=g8(m[F].stackGroups,o,_),W=iM(S,W,F,u)):(W=SC(U,f8(A,n.filter(function(Y){var Q,Z,re=h in Y.props?Y.props[h]:(Q=Y.type.defaultProps)===null||Q===void 0?void 0:Q[h],ne="hide"in Y.props?Y.props.hide:(Z=Y.type.defaultProps)===null||Z===void 0?void 0:Z.hide;return re===F&&!ne}),"number",E),s.defaultProps.allowDataOverflow),W=iM(S,W,F,u)),mt(mt({},L),{},pr({},F,mt(mt({axisType:u},s.defaultProps),{},{hide:!0,orientation:Ba(pAe,"".concat(u,".").concat(k%2),null),domain:W,originalDomain:U,isCategorical:R,layout:E})))}return L},{})},xAe=function(t,r){var n=r.axisType,s=n===void 0?"xAxis":n,u=r.AxisComp,h=r.graphicalItems,m=r.stackGroups,o=r.dataStartIndex,_=r.dataEndIndex,E=t.children,S="".concat(s,"Id"),A=da(E,u),I={};return A&&A.length?I=vAe(t,{axes:A,graphicalItems:h,axisType:s,axisIdKey:S,stackGroups:m,dataStartIndex:o,dataEndIndex:_}):h&&h.length&&(I=_Ae(t,{Axis:u,graphicalItems:h,axisType:s,axisIdKey:S,stackGroups:m,dataStartIndex:o,dataEndIndex:_})),I},bAe=function(t){var r=Qc(t),n=Gl(r,!1,!0);return{tooltipTicks:n,orderedTooltipTicks:YI(n,function(s){return s.coordinate}),tooltipAxis:r,tooltipAxisBandSize:o1(r,n)}},dB=function(t){var r=t.children,n=t.defaultShowTooltip,s=ra(r,Lp),u=0,h=0;return t.data&&t.data.length!==0&&(h=t.data.length-1),s&&s.props&&(s.props.startIndex>=0&&(u=s.props.startIndex),s.props.endIndex>=0&&(h=s.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:u,dataEndIndex:h,activeTooltipIndex:-1,isTooltipActive:!!n}},wAe=function(t){return!t||!t.length?!1:t.some(function(r){var n=Hl(r&&r.type);return n&&n.indexOf("Bar")>=0})},hB=function(t){return t==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:t==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:t==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},SAe=function(t,r){var n=t.props,s=t.graphicalItems,u=t.xAxisMap,h=u===void 0?{}:u,m=t.yAxisMap,o=m===void 0?{}:m,_=n.width,E=n.height,S=n.children,A=n.margin||{},I=ra(S,Lp),R=ra(S,ha),k=Object.keys(o).reduce(function(W,Y){var Q=o[Y],Z=Q.orientation;return!Q.mirror&&!Q.hide?mt(mt({},W),{},pr({},Z,W[Z]+Q.width)):W},{left:A.left||0,right:A.right||0}),L=Object.keys(h).reduce(function(W,Y){var Q=h[Y],Z=Q.orientation;return!Q.mirror&&!Q.hide?mt(mt({},W),{},pr({},Z,Ba(W,"".concat(Z))+Q.height)):W},{top:A.top||0,bottom:A.bottom||0}),N=mt(mt({},L),k),z=N.bottom;I&&(N.bottom+=I.props.height||Lp.defaultProps.height),R&&r&&(N=F_e(N,s,n,r));var F=_-N.left-N.right,U=E-N.top-N.bottom;return mt(mt({brushBottom:z},N),{},{width:Math.max(F,0),height:Math.max(U,0)})},EAe=function(t,r){if(r==="xAxis")return t[r].width;if(r==="yAxis")return t[r].height},CG=function(t){var r=t.chartName,n=t.GraphicalChild,s=t.defaultTooltipEventType,u=s===void 0?"axis":s,h=t.validateTooltipEventTypes,m=h===void 0?["axis"]:h,o=t.axisComponents,_=t.legendContent,E=t.formatAxisMap,S=t.defaultProps,A=function(L,N){var z=N.graphicalItems,F=N.stackGroups,U=N.offset,W=N.updateId,Y=N.dataStartIndex,Q=N.dataEndIndex,Z=L.barSize,re=L.layout,ne=L.barGap,ue=L.barCategoryGap,fe=L.maxBarSize,Ee=hB(re),Se=Ee.numericAxisName,je=Ee.cateAxisName,Le=wAe(z),Ue=[];return z.forEach(function(we,Pe){var rt=lS(L.data,{graphicalItems:[we],dataStartIndex:Y,dataEndIndex:Q}),$e=we.type.defaultProps!==void 0?mt(mt({},we.type.defaultProps),we.props):we.props,Ge=$e.dataKey,Re=$e.maxBarSize,at=$e["".concat(Se,"Id")],Et=$e["".concat(je,"Id")],vt={},lt=o.reduce(function(or,wn){var An=N["".concat(wn.axisType,"Map")],ii=$e["".concat(wn.axisType,"Id")];An&&An[ii]||wn.axisType==="zAxis"||ch();var Vr=An[ii];return mt(mt({},or),{},pr(pr({},wn.axisType,Vr),"".concat(wn.axisType,"Ticks"),Gl(Vr)))},vt),gt=lt[je],tt=lt["".concat(je,"Ticks")],ft=F&&F[at]&&F[at].hasStack&&txe(we,F[at].stackGroups),ht=Hl(we.type).indexOf("Bar")>=0,Be=o1(gt,tt),zt=[],Ot=Le&&B_e({barSize:Z,stackGroups:F,totalSize:EAe(lt,je)});if(ht){var qt,Pt,nr=Mr(Re)?fe:Re,tr=(qt=(Pt=o1(gt,tt,!0))!==null&&Pt!==void 0?Pt:nr)!==null&&qt!==void 0?qt:0;zt=$_e({barGap:ne,barCategoryGap:ue,bandSize:tr!==Be?tr:Be,sizeList:Ot[Et],maxBarSize:nr}),tr!==Be&&(zt=zt.map(function(or){return mt(mt({},or),{},{position:mt(mt({},or.position),{},{offset:or.position.offset-tr/2})})}))}var Yt=we&&we.type&&we.type.getComposedData;Yt&&Ue.push({props:mt(mt({},Yt(mt(mt({},lt),{},{displayedData:rt,props:L,dataKey:Ge,item:we,bandSize:Be,barPosition:zt,offset:U,stackedData:ft,layout:re,dataStartIndex:Y,dataEndIndex:Q}))),{},pr(pr(pr({key:we.key||"item-".concat(Pe)},Se,lt[Se]),je,lt[je]),"animationId",W)),childIndex:Nie(we,L.children),item:we})}),Ue},I=function(L,N){var z=L.props,F=L.dataStartIndex,U=L.dataEndIndex,W=L.updateId;if(!jj({props:z}))return null;var Y=z.children,Q=z.layout,Z=z.stackOffset,re=z.data,ne=z.reverseStackOrder,ue=hB(Q),fe=ue.numericAxisName,Ee=ue.cateAxisName,Se=da(Y,n),je=J_e(re,Se,"".concat(fe,"Id"),"".concat(Ee,"Id"),Z,ne),Le=o.reduce(function($e,Ge){var Re="".concat(Ge.axisType,"Map");return mt(mt({},$e),{},pr({},Re,xAe(z,mt(mt({},Ge),{},{graphicalItems:Se,stackGroups:Ge.axisType===fe&&je,dataStartIndex:F,dataEndIndex:U}))))},{}),Ue=SAe(mt(mt({},Le),{},{props:z,graphicalItems:Se}),N==null?void 0:N.legendBBox);Object.keys(Le).forEach(function($e){Le[$e]=E(z,Le[$e],Ue,$e.replace("Map",""),r)});var we=Le["".concat(Ee,"Map")],Pe=bAe(we),rt=A(z,mt(mt({},Le),{},{dataStartIndex:F,dataEndIndex:U,updateId:W,graphicalItems:Se,stackGroups:je,offset:Ue}));return mt(mt({formattedGraphicalItems:rt,graphicalItems:Se,offset:Ue,stackGroups:je},Pe),Le)},R=function(k){function L(N){var z,F,U;return nAe(this,L),U=aAe(this,L,[N]),pr(U,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),pr(U,"accessibilityManager",new VTe),pr(U,"handleLegendBBoxUpdate",function(W){if(W){var Y=U.state,Q=Y.dataStartIndex,Z=Y.dataEndIndex,re=Y.updateId;U.setState(mt({legendBBox:W},I({props:U.props,dataStartIndex:Q,dataEndIndex:Z,updateId:re},mt(mt({},U.state),{},{legendBBox:W}))))}}),pr(U,"handleReceiveSyncEvent",function(W,Y,Q){if(U.props.syncId===W){if(Q===U.eventEmitterSymbol&&typeof U.props.syncMethod!="function")return;U.applySyncEvent(Y)}}),pr(U,"handleBrushChange",function(W){var Y=W.startIndex,Q=W.endIndex;if(Y!==U.state.dataStartIndex||Q!==U.state.dataEndIndex){var Z=U.state.updateId;U.setState(function(){return mt({dataStartIndex:Y,dataEndIndex:Q},I({props:U.props,dataStartIndex:Y,dataEndIndex:Q,updateId:Z},U.state))}),U.triggerSyncEvent({dataStartIndex:Y,dataEndIndex:Q})}}),pr(U,"handleMouseEnter",function(W){var Y=U.getMouseInfo(W);if(Y){var Q=mt(mt({},Y),{},{isTooltipActive:!0});U.setState(Q),U.triggerSyncEvent(Q);var Z=U.props.onMouseEnter;Rr(Z)&&Z(Q,W)}}),pr(U,"triggeredAfterMouseMove",function(W){var Y=U.getMouseInfo(W),Q=Y?mt(mt({},Y),{},{isTooltipActive:!0}):{isTooltipActive:!1};U.setState(Q),U.triggerSyncEvent(Q);var Z=U.props.onMouseMove;Rr(Z)&&Z(Q,W)}),pr(U,"handleItemMouseEnter",function(W){U.setState(function(){return{isTooltipActive:!0,activeItem:W,activePayload:W.tooltipPayload,activeCoordinate:W.tooltipPosition||{x:W.cx,y:W.cy}}})}),pr(U,"handleItemMouseLeave",function(){U.setState(function(){return{isTooltipActive:!1}})}),pr(U,"handleMouseMove",function(W){W.persist(),U.throttleTriggeredAfterMouseMove(W)}),pr(U,"handleMouseLeave",function(W){U.throttleTriggeredAfterMouseMove.cancel();var Y={isTooltipActive:!1};U.setState(Y),U.triggerSyncEvent(Y);var Q=U.props.onMouseLeave;Rr(Q)&&Q(Y,W)}),pr(U,"handleOuterEvent",function(W){var Y=zie(W),Q=Ba(U.props,"".concat(Y));if(Y&&Rr(Q)){var Z,re;/.*touch.*/i.test(Y)?re=U.getMouseInfo(W.changedTouches[0]):re=U.getMouseInfo(W),Q((Z=re)!==null&&Z!==void 0?Z:{},W)}}),pr(U,"handleClick",function(W){var Y=U.getMouseInfo(W);if(Y){var Q=mt(mt({},Y),{},{isTooltipActive:!0});U.setState(Q),U.triggerSyncEvent(Q);var Z=U.props.onClick;Rr(Z)&&Z(Q,W)}}),pr(U,"handleMouseDown",function(W){var Y=U.props.onMouseDown;if(Rr(Y)){var Q=U.getMouseInfo(W);Y(Q,W)}}),pr(U,"handleMouseUp",function(W){var Y=U.props.onMouseUp;if(Rr(Y)){var Q=U.getMouseInfo(W);Y(Q,W)}}),pr(U,"handleTouchMove",function(W){W.changedTouches!=null&&W.changedTouches.length>0&&U.throttleTriggeredAfterMouseMove(W.changedTouches[0])}),pr(U,"handleTouchStart",function(W){W.changedTouches!=null&&W.changedTouches.length>0&&U.handleMouseDown(W.changedTouches[0])}),pr(U,"handleTouchEnd",function(W){W.changedTouches!=null&&W.changedTouches.length>0&&U.handleMouseUp(W.changedTouches[0])}),pr(U,"triggerSyncEvent",function(W){U.props.syncId!==void 0&&sA.emit(lA,U.props.syncId,W,U.eventEmitterSymbol)}),pr(U,"applySyncEvent",function(W){var Y=U.props,Q=Y.layout,Z=Y.syncMethod,re=U.state.updateId,ne=W.dataStartIndex,ue=W.dataEndIndex;if(W.dataStartIndex!==void 0||W.dataEndIndex!==void 0)U.setState(mt({dataStartIndex:ne,dataEndIndex:ue},I({props:U.props,dataStartIndex:ne,dataEndIndex:ue,updateId:re},U.state)));else if(W.activeTooltipIndex!==void 0){var fe=W.chartX,Ee=W.chartY,Se=W.activeTooltipIndex,je=U.state,Le=je.offset,Ue=je.tooltipTicks;if(!Le)return;if(typeof Z=="function")Se=Z(Ue,W);else if(Z==="value"){Se=-1;for(var we=0;we<Ue.length;we++)if(Ue[we].value===W.activeLabel){Se=we;break}}var Pe=mt(mt({},Le),{},{x:Le.left,y:Le.top}),rt=Math.min(fe,Pe.x+Pe.width),$e=Math.min(Ee,Pe.y+Pe.height),Ge=Ue[Se]&&Ue[Se].value,Re=sM(U.state,U.props.data,Se),at=Ue[Se]?{x:Q==="horizontal"?Ue[Se].coordinate:rt,y:Q==="horizontal"?$e:Ue[Se].coordinate}:AG;U.setState(mt(mt({},W),{},{activeLabel:Ge,activeCoordinate:at,activePayload:Re,activeTooltipIndex:Se}))}else U.setState(W)}),pr(U,"renderCursor",function(W){var Y,Q=U.state,Z=Q.isTooltipActive,re=Q.activeCoordinate,ne=Q.activePayload,ue=Q.offset,fe=Q.activeTooltipIndex,Ee=Q.tooltipAxisBandSize,Se=U.getTooltipEventType(),je=(Y=W.props.active)!==null&&Y!==void 0?Y:Z,Le=U.props.layout,Ue=W.key||"_recharts-cursor";return be.createElement(KTe,{key:Ue,activeCoordinate:re,activePayload:ne,activeTooltipIndex:fe,chartName:r,element:W,isActive:je,layout:Le,offset:ue,tooltipAxisBandSize:Ee,tooltipEventType:Se})}),pr(U,"renderPolarAxis",function(W,Y,Q){var Z=Ba(W,"type.axisType"),re=Ba(U.state,"".concat(Z,"Map")),ne=W.type.defaultProps,ue=ne!==void 0?mt(mt({},ne),W.props):W.props,fe=re&&re[ue["".concat(Z,"Id")]];return V.cloneElement(W,mt(mt({},fe),{},{className:Fr(Z,fe.className),key:W.key||"".concat(Y,"-").concat(Q),ticks:Gl(fe,!0)}))}),pr(U,"renderPolarGrid",function(W){var Y=W.props,Q=Y.radialLines,Z=Y.polarAngles,re=Y.polarRadius,ne=U.state,ue=ne.radiusAxisMap,fe=ne.angleAxisMap,Ee=Qc(ue),Se=Qc(fe),je=Se.cx,Le=Se.cy,Ue=Se.innerRadius,we=Se.outerRadius;return V.cloneElement(W,{polarAngles:Array.isArray(Z)?Z:Gl(Se,!0).map(function(Pe){return Pe.coordinate}),polarRadius:Array.isArray(re)?re:Gl(Ee,!0).map(function(Pe){return Pe.coordinate}),cx:je,cy:Le,innerRadius:Ue,outerRadius:we,key:W.key||"polar-grid",radialLines:Q})}),pr(U,"renderLegend",function(){var W=U.state.formattedGraphicalItems,Y=U.props,Q=Y.children,Z=Y.width,re=Y.height,ne=U.props.margin||{},ue=Z-(ne.left||0)-(ne.right||0),fe=d8({children:Q,formattedGraphicalItems:W,legendWidth:ue,legendContent:_});if(!fe)return null;var Ee=fe.item,Se=lB(fe,YTe);return V.cloneElement(Ee,mt(mt({},Se),{},{chartWidth:Z,chartHeight:re,margin:ne,onBBoxUpdate:U.handleLegendBBoxUpdate}))}),pr(U,"renderTooltip",function(){var W,Y=U.props,Q=Y.children,Z=Y.accessibilityLayer,re=ra(Q,Fi);if(!re)return null;var ne=U.state,ue=ne.isTooltipActive,fe=ne.activeCoordinate,Ee=ne.activePayload,Se=ne.activeLabel,je=ne.offset,Le=(W=re.props.active)!==null&&W!==void 0?W:ue;return V.cloneElement(re,{viewBox:mt(mt({},je),{},{x:je.left,y:je.top}),active:Le,label:Se,payload:Le?Ee:[],coordinate:fe,accessibilityLayer:Z})}),pr(U,"renderBrush",function(W){var Y=U.props,Q=Y.margin,Z=Y.data,re=U.state,ne=re.offset,ue=re.dataStartIndex,fe=re.dataEndIndex,Ee=re.updateId;return V.cloneElement(W,{key:W.key||"_recharts-brush",onChange:S0(U.handleBrushChange,W.props.onChange),data:Z,x:Vt(W.props.x)?W.props.x:ne.left,y:Vt(W.props.y)?W.props.y:ne.top+ne.height+ne.brushBottom-(Q.bottom||0),width:Vt(W.props.width)?W.props.width:ne.width,startIndex:ue,endIndex:fe,updateId:"brush-".concat(Ee)})}),pr(U,"renderReferenceElement",function(W,Y,Q){if(!W)return null;var Z=U,re=Z.clipPathId,ne=U.state,ue=ne.xAxisMap,fe=ne.yAxisMap,Ee=ne.offset,Se=W.type.defaultProps||{},je=W.props,Le=je.xAxisId,Ue=Le===void 0?Se.xAxisId:Le,we=je.yAxisId,Pe=we===void 0?Se.yAxisId:we;return V.cloneElement(W,{key:W.key||"".concat(Y,"-").concat(Q),xAxis:ue[Ue],yAxis:fe[Pe],viewBox:{x:Ee.left,y:Ee.top,width:Ee.width,height:Ee.height},clipPathId:re})}),pr(U,"renderActivePoints",function(W){var Y=W.item,Q=W.activePoint,Z=W.basePoint,re=W.childIndex,ne=W.isRange,ue=[],fe=Y.props.key,Ee=Y.item.type.defaultProps!==void 0?mt(mt({},Y.item.type.defaultProps),Y.item.props):Y.item.props,Se=Ee.activeDot,je=Ee.dataKey,Le=mt(mt({index:re,dataKey:je,cx:Q.x,cy:Q.y,r:4,fill:EO(Y.item),strokeWidth:2,stroke:"#fff",payload:Q.payload,value:Q.value},Br(Se,!1)),Ob(Se));return ue.push(L.renderActiveDot(Se,Le,"".concat(fe,"-activePoint-").concat(re))),Z?ue.push(L.renderActiveDot(Se,mt(mt({},Le),{},{cx:Z.x,cy:Z.y}),"".concat(fe,"-basePoint-").concat(re))):ne&&ue.push(null),ue}),pr(U,"renderGraphicChild",function(W,Y,Q){var Z=U.filterFormatItem(W,Y,Q);if(!Z)return null;var re=U.getTooltipEventType(),ne=U.state,ue=ne.isTooltipActive,fe=ne.tooltipAxis,Ee=ne.activeTooltipIndex,Se=ne.activeLabel,je=U.props.children,Le=ra(je,Fi),Ue=Z.props,we=Ue.points,Pe=Ue.isRange,rt=Ue.baseLine,$e=Z.item.type.defaultProps!==void 0?mt(mt({},Z.item.type.defaultProps),Z.item.props):Z.item.props,Ge=$e.activeDot,Re=$e.hide,at=$e.activeBar,Et=$e.activeShape,vt=!!(!Re&&ue&&Le&&(Ge||at||Et)),lt={};re!=="axis"&&Le&&Le.props.trigger==="click"?lt={onClick:S0(U.handleItemMouseEnter,W.props.onClick)}:re!=="axis"&&(lt={onMouseLeave:S0(U.handleItemMouseLeave,W.props.onMouseLeave),onMouseEnter:S0(U.handleItemMouseEnter,W.props.onMouseEnter)});var gt=V.cloneElement(W,mt(mt({},Z.props),lt));function tt(wn){return typeof fe.dataKey=="function"?fe.dataKey(wn.payload):null}if(vt)if(Ee>=0){var ft,ht;if(fe.dataKey&&!fe.allowDuplicatedCategory){var Be=typeof fe.dataKey=="function"?tt:"payload.".concat(fe.dataKey.toString());ft=Ib(we,Be,Se),ht=Pe&&rt&&Ib(rt,Be,Se)}else ft=we==null?void 0:we[Ee],ht=Pe&&rt&&rt[Ee];if(Et||at){var zt=W.props.activeIndex!==void 0?W.props.activeIndex:Ee;return[V.cloneElement(W,mt(mt(mt({},Z.props),lt),{},{activeIndex:zt})),null,null]}if(!Mr(ft))return[gt].concat(qp(U.renderActivePoints({item:Z,activePoint:ft,basePoint:ht,childIndex:Ee,isRange:Pe})))}else{var Ot,qt=(Ot=U.getItemByXY(U.state.activeCoordinate))!==null&&Ot!==void 0?Ot:{graphicalItem:gt},Pt=qt.graphicalItem,nr=Pt.item,tr=nr===void 0?W:nr,Yt=Pt.childIndex,or=mt(mt(mt({},Z.props),lt),{},{activeIndex:Yt});return[V.cloneElement(tr,or),null,null]}return Pe?[gt,null,null]:[gt,null]}),pr(U,"renderCustomized",function(W,Y,Q){return V.cloneElement(W,mt(mt({key:"recharts-customized-".concat(Q)},U.props),U.state))}),pr(U,"renderMap",{CartesianGrid:{handler:C0,once:!0},ReferenceArea:{handler:U.renderReferenceElement},ReferenceLine:{handler:C0},ReferenceDot:{handler:U.renderReferenceElement},XAxis:{handler:C0},YAxis:{handler:C0},Brush:{handler:U.renderBrush,once:!0},Bar:{handler:U.renderGraphicChild},Line:{handler:U.renderGraphicChild},Area:{handler:U.renderGraphicChild},Radar:{handler:U.renderGraphicChild},RadialBar:{handler:U.renderGraphicChild},Scatter:{handler:U.renderGraphicChild},Pie:{handler:U.renderGraphicChild},Funnel:{handler:U.renderGraphicChild},Tooltip:{handler:U.renderCursor,once:!0},PolarGrid:{handler:U.renderPolarGrid,once:!0},PolarAngleAxis:{handler:U.renderPolarAxis},PolarRadiusAxis:{handler:U.renderPolarAxis},Customized:{handler:U.renderCustomized}}),U.clipPathId="".concat((z=N.id)!==null&&z!==void 0?z:l_("recharts"),"-clip"),U.throttleTriggeredAfterMouseMove=dV(U.triggeredAfterMouseMove,(F=N.throttleDelay)!==null&&F!==void 0?F:1e3/60),U.state={},U}return cAe(L,k),oAe(L,[{key:"componentDidMount",value:function(){var z,F;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(z=this.props.margin.left)!==null&&z!==void 0?z:0,top:(F=this.props.margin.top)!==null&&F!==void 0?F:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var z=this.props,F=z.children,U=z.data,W=z.height,Y=z.layout,Q=ra(F,Fi);if(Q){var Z=Q.props.defaultIndex;if(!(typeof Z!="number"||Z<0||Z>this.state.tooltipTicks.length-1)){var re=this.state.tooltipTicks[Z]&&this.state.tooltipTicks[Z].value,ne=sM(this.state,U,Z,re),ue=this.state.tooltipTicks[Z].coordinate,fe=(this.state.offset.top+W)/2,Ee=Y==="horizontal",Se=Ee?{x:ue,y:fe}:{y:ue,x:fe},je=this.state.formattedGraphicalItems.find(function(Ue){var we=Ue.item;return we.type.name==="Scatter"});je&&(Se=mt(mt({},Se),je.props.points[Z].tooltipPosition),ne=je.props.points[Z].tooltipPayload);var Le={activeTooltipIndex:Z,isTooltipActive:!0,activeLabel:re,activePayload:ne,activeCoordinate:Se};this.setState(Le),this.renderCursor(Q),this.accessibilityManager.setIndex(Z)}}}},{key:"getSnapshotBeforeUpdate",value:function(z,F){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==F.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==z.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==z.margin){var U,W;this.accessibilityManager.setDetails({offset:{left:(U=this.props.margin.left)!==null&&U!==void 0?U:0,top:(W=this.props.margin.top)!==null&&W!==void 0?W:0}})}return null}},{key:"componentDidUpdate",value:function(z){NP([ra(z.children,Fi)],[ra(this.props.children,Fi)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var z=ra(this.props.children,Fi);if(z&&typeof z.props.shared=="boolean"){var F=z.props.shared?"axis":"item";return m.indexOf(F)>=0?F:u}return u}},{key:"getMouseInfo",value:function(z){if(!this.container)return null;var F=this.container,U=F.getBoundingClientRect(),W=ume(U),Y={chartX:Math.round(z.pageX-W.left),chartY:Math.round(z.pageY-W.top)},Q=U.width/F.offsetWidth||1,Z=this.inRange(Y.chartX,Y.chartY,Q);if(!Z)return null;var re=this.state,ne=re.xAxisMap,ue=re.yAxisMap,fe=this.getTooltipEventType();if(fe!=="axis"&&ne&&ue){var Ee=Qc(ne).scale,Se=Qc(ue).scale,je=Ee&&Ee.invert?Ee.invert(Y.chartX):null,Le=Se&&Se.invert?Se.invert(Y.chartY):null;return mt(mt({},Y),{},{xValue:je,yValue:Le})}var Ue=uB(this.state,this.props.data,this.props.layout,Z);return Ue?mt(mt({},Y),Ue):null}},{key:"inRange",value:function(z,F){var U=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,W=this.props.layout,Y=z/U,Q=F/U;if(W==="horizontal"||W==="vertical"){var Z=this.state.offset,re=Y>=Z.left&&Y<=Z.left+Z.width&&Q>=Z.top&&Q<=Z.top+Z.height;return re?{x:Y,y:Q}:null}var ne=this.state,ue=ne.angleAxisMap,fe=ne.radiusAxisMap;if(ue&&fe){var Ee=Qc(ue);return qN({x:Y,y:Q},Ee)}return null}},{key:"parseEventsOfWrapper",value:function(){var z=this.props.children,F=this.getTooltipEventType(),U=ra(z,Fi),W={};U&&F==="axis"&&(U.props.trigger==="click"?W={onClick:this.handleClick}:W={onMouseEnter:this.handleMouseEnter,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd});var Y=Ob(this.props,this.handleOuterEvent);return mt(mt({},Y),W)}},{key:"addListener",value:function(){sA.on(lA,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){sA.removeListener(lA,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(z,F,U){for(var W=this.state.formattedGraphicalItems,Y=0,Q=W.length;Y<Q;Y++){var Z=W[Y];if(Z.item===z||Z.props.key===z.key||F===Hl(Z.item.type)&&U===Z.childIndex)return Z}return null}},{key:"renderClipPath",value:function(){var z=this.clipPathId,F=this.state.offset,U=F.left,W=F.top,Y=F.height,Q=F.width;return be.createElement("defs",null,be.createElement("clipPath",{id:z},be.createElement("rect",{x:U,y:W,height:Y,width:Q})))}},{key:"getXScales",value:function(){var z=this.state.xAxisMap;return z?Object.entries(z).reduce(function(F,U){var W=sB(U,2),Y=W[0],Q=W[1];return mt(mt({},F),{},pr({},Y,Q.scale))},{}):null}},{key:"getYScales",value:function(){var z=this.state.yAxisMap;return z?Object.entries(z).reduce(function(F,U){var W=sB(U,2),Y=W[0],Q=W[1];return mt(mt({},F),{},pr({},Y,Q.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(z){var F;return(F=this.state.xAxisMap)===null||F===void 0||(F=F[z])===null||F===void 0?void 0:F.scale}},{key:"getYScaleByAxisId",value:function(z){var F;return(F=this.state.yAxisMap)===null||F===void 0||(F=F[z])===null||F===void 0?void 0:F.scale}},{key:"getItemByXY",value:function(z){var F=this.state,U=F.formattedGraphicalItems,W=F.activeItem;if(U&&U.length)for(var Y=0,Q=U.length;Y<Q;Y++){var Z=U[Y],re=Z.props,ne=Z.item,ue=ne.type.defaultProps!==void 0?mt(mt({},ne.type.defaultProps),ne.props):ne.props,fe=Hl(ne.type);if(fe==="Bar"){var Ee=(re.data||[]).find(function(Ue){return jbe(z,Ue)});if(Ee)return{graphicalItem:Z,payload:Ee}}else if(fe==="RadialBar"){var Se=(re.data||[]).find(function(Ue){return qN(z,Ue)});if(Se)return{graphicalItem:Z,payload:Se}}else if(tS(Z,W)||rS(Z,W)||jv(Z,W)){var je=N1e({graphicalItem:Z,activeTooltipItem:W,itemData:ue.data}),Le=ue.activeIndex===void 0?je:ue.activeIndex;return{graphicalItem:mt(mt({},Z),{},{childIndex:Le}),payload:jv(Z,W)?ue.data[je]:Z.props.data[je]}}}return null}},{key:"render",value:function(){var z=this;if(!jj(this))return null;var F=this.props,U=F.children,W=F.className,Y=F.width,Q=F.height,Z=F.style,re=F.compact,ne=F.title,ue=F.desc,fe=lB(F,JTe),Ee=Br(fe,!1);if(re)return be.createElement(G3,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},be.createElement($P,By({},Ee,{width:Y,height:Q,title:ne,desc:ue}),this.renderClipPath(),Nj(U,this.renderMap)));if(this.props.accessibilityLayer){var Se,je;Ee.tabIndex=(Se=this.props.tabIndex)!==null&&Se!==void 0?Se:0,Ee.role=(je=this.props.role)!==null&&je!==void 0?je:"application",Ee.onKeyDown=function(Ue){z.accessibilityManager.keyboardEvent(Ue)},Ee.onFocus=function(){z.accessibilityManager.focus()}}var Le=this.parseEventsOfWrapper();return be.createElement(G3,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},be.createElement("div",By({className:Fr("recharts-wrapper",W),style:mt({position:"relative",cursor:"default",width:Y,height:Q},Z)},Le,{ref:function(we){z.container=we}}),be.createElement($P,By({},Ee,{width:Y,height:Q,title:ne,desc:ue,style:mAe}),this.renderClipPath(),Nj(U,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])}(V.Component);return pr(R,"displayName",r),pr(R,"defaultProps",mt({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},S)),pr(R,"getDerivedStateFromProps",function(k,L){var N=k.dataKey,z=k.data,F=k.children,U=k.width,W=k.height,Y=k.layout,Q=k.stackOffset,Z=k.margin,re=L.dataStartIndex,ne=L.dataEndIndex;if(L.updateId===void 0){var ue=dB(k);return mt(mt(mt({},ue),{},{updateId:0},I(mt(mt({props:k},ue),{},{updateId:0}),L)),{},{prevDataKey:N,prevData:z,prevWidth:U,prevHeight:W,prevLayout:Y,prevStackOffset:Q,prevMargin:Z,prevChildren:F})}if(N!==L.prevDataKey||z!==L.prevData||U!==L.prevWidth||W!==L.prevHeight||Y!==L.prevLayout||Q!==L.prevStackOffset||!ep(Z,L.prevMargin)){var fe=dB(k),Ee={chartX:L.chartX,chartY:L.chartY,isTooltipActive:L.isTooltipActive},Se=mt(mt({},uB(L,z,Y)),{},{updateId:L.updateId+1}),je=mt(mt(mt({},fe),Ee),Se);return mt(mt(mt({},je),I(mt({props:k},je),L)),{},{prevDataKey:N,prevData:z,prevWidth:U,prevHeight:W,prevLayout:Y,prevStackOffset:Q,prevMargin:Z,prevChildren:F})}if(!NP(F,L.prevChildren)){var Le,Ue,we,Pe,rt=ra(F,Lp),$e=rt&&(Le=(Ue=rt.props)===null||Ue===void 0?void 0:Ue.startIndex)!==null&&Le!==void 0?Le:re,Ge=rt&&(we=(Pe=rt.props)===null||Pe===void 0?void 0:Pe.endIndex)!==null&&we!==void 0?we:ne,Re=$e!==re||Ge!==ne,at=!Mr(z),Et=at&&!Re?L.updateId:L.updateId+1;return mt(mt({updateId:Et},I(mt(mt({props:k},L),{},{updateId:Et,dataStartIndex:$e,dataEndIndex:Ge}),L)),{},{prevChildren:F,dataStartIndex:$e,dataEndIndex:Ge})}return null}),pr(R,"renderActiveDot",function(k,L,N){var z;return V.isValidElement(k)?z=V.cloneElement(k,L):Rr(k)?z=k(L):z=be.createElement(k8,L),be.createElement(Xn,{className:"recharts-active-dot",key:N},z)}),function(L){return be.createElement(R,L)}},np=CG({chartName:"BarChart",GraphicalChild:zo,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:$a},{axisType:"yAxis",AxisComp:Fa}],formatAxisMap:V8}),MG=CG({chartName:"ScatterChart",GraphicalChild:Ou,defaultTooltipEventType:"item",validateTooltipEventTypes:["item"],axisComponents:[{axisType:"xAxis",AxisComp:$a},{axisType:"yAxis",AxisComp:Fa},{axisType:"zAxis",AxisComp:m_}],formatAxisMap:V8});const TAe=({active:e,payload:t,label:r})=>e&&t&&t.length?M.jsxs("div",{className:"custom-tooltip bg-white p-3 border border-gray-200 rounded-md shadow-md",children:[M.jsx("p",{className:"font-medium",children:t[0].payload.name}),M.jsxs("p",{className:"text-sm text-gray-600",children:[t[0].name,": ",t[0].value.toFixed(2)]})]}):null,AAe=({variable:e,countries:t,countryData:r,loading:n})=>{const u=(()=>{if(t.length===0||!r||Object.keys(r).length===0)return[];const m=t.filter(o=>r[o]&&r[o][e]!==void 0&&!isNaN(r[o][e])).map(o=>({name:r[o].CountryName||o,code:o,value:r[o][e],fill:"#8b5cf6"}));return console.log("VisualizationPlaceholder data:",{countries:t,countryDataKeys:Object.keys(r||{}),selectedData:m}),m.sort((o,_)=>_.value-o.value)})(),h=()=>{if(u.length===0)return["auto","auto"];if(e==="PV1MATH")return[Math.min(400,Math.floor(Math.min(...u.map(m=>m.value))*.95)),Math.max(550,Math.ceil(Math.max(...u.map(m=>m.value))*1.05))];{const m=Math.min(...u.map(_=>_.value)),o=Math.max(...u.map(_=>_.value));return[Math.min(-.5,m*1.1),Math.max(.8,o*1.1)]}};return n?M.jsx("div",{className:"h-full flex items-center justify-center bg-muted/50 rounded-md",children:M.jsx("div",{className:"text-center",children:M.jsx("div",{className:"text-muted-foreground mb-2",children:"Loading data..."})})}):t.length===0?M.jsx("div",{className:"h-full flex items-center justify-center bg-muted/50 rounded-md",children:M.jsxs("div",{className:"text-center",children:[M.jsx("div",{className:"text-muted-foreground mb-2",children:"No countries selected"}),M.jsx("div",{className:"text-sm text-muted-foreground",children:"Please select at least one country to visualize data"})]})}):u.length===0?M.jsx("div",{className:"h-full flex items-center justify-center bg-muted/50 rounded-md",children:M.jsxs("div",{className:"text-center",children:[M.jsx("div",{className:"text-muted-foreground mb-2",children:"No data available"}),M.jsxs("div",{className:"text-sm text-muted-foreground",children:["The selected countries don't have data for the ",e," variable"]})]})}):M.jsx(_u,{width:"100%",height:"100%",children:M.jsxs(np,{data:u,margin:{top:20,right:30,left:20,bottom:60},children:[M.jsx(Yl,{strokeDasharray:"3 3",vertical:!1}),M.jsx($a,{dataKey:"name",tick:{fontSize:12},angle:-45,textAnchor:"end",tickMargin:10}),M.jsx(Fa,{tick:{fontSize:12},domain:h(),tickCount:7,label:{value:e==="PV1MATH"?"PISA Math Score":`${e} Index Value`,angle:-90,position:"insideLeft",style:{textAnchor:"middle",fontSize:12}}}),M.jsx(Fi,{content:M.jsx(TAe,{})}),M.jsx(ha,{wrapperStyle:{fontSize:12,bottom:0}}),e!=="PV1MATH"&&M.jsx(wu,{y:0,stroke:"#000",strokeDasharray:"3 3"}),M.jsx(zo,{dataKey:"value",name:e==="PV1MATH"?"PISA Math Score":`${e} Index`})]})})};var IG={exports:{}};(function(e,t){var r={};(function(n,s){e.exports=s()})(Cf,function(){var n,s,u;function h(o,_){if(!n)n=_;else if(!s)s=_;else{var E="self.onerror = function() { console.error('An error occurred while parsing the WebWorker bundle. This is most likely due to improper transpilation by Babel; please see https://docs.mapbox.com/mapbox-gl-js/guides/install/#transpiling'); }; var sharedChunk = {}; ("+n+")(sharedChunk); ("+s+")(sharedChunk); self.onerror = null;",S={};n(S),u=_(S),typeof window<"u"&&window&&window.URL&&window.URL.createObjectURL&&(u.workerUrl=window.URL.createObjectURL(new Blob([E],{type:"text/javascript"})))}}h(["exports"],function(o){var _=typeof self<"u"?self:{},E="2.15.0";let S;const A={API_URL:"https://api.mapbox.com",get API_URL_REGEX(){if(S==null){const a=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;try{S=r.API_URL_REGEX!=null?new RegExp(r.API_URL_REGEX):a}catch{S=a}}return S},get API_TILEJSON_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/v[0-9]*\/.*\.json.*$)/i},get API_SPRITE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*\/sprite.*\..*$)/i},get API_FONTS_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/fonts\/v[0-9]*\/)(.*\.pbf.*$)/i},get API_STYLE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*$)/i},get API_CDN_URL_REGEX(){return/^((https?:)?\/\/)?api\.mapbox\.c(n|om)(\/mapbox-gl-js\/)(.*$)/i},get EVENTS_URL(){if(!A.API_URL)return null;try{const a=new URL(A.API_URL);return a.hostname==="api.mapbox.cn"?"https://events.mapbox.cn/events/v2":a.hostname==="api.mapbox.com"?"https://events.mapbox.com/events/v2":null}catch{return null}},SESSION_PATH:"/map-sessions/v1",FEEDBACK_URL:"https://apps.mapbox.com/feedback",TILE_URL_VERSION:"v4",RASTER_URL_PREFIX:"raster/v1",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},I={supported:!1,testSupport:function(a){!L&&k&&(N?z(a):R=a)}};let R,k,L=!1,N=!1;function z(a){const i=a.createTexture();a.bindTexture(a.TEXTURE_2D,i);try{if(a.texImage2D(a.TEXTURE_2D,0,a.RGBA,a.RGBA,a.UNSIGNED_BYTE,k),a.isContextLost())return;I.supported=!0}catch{}a.deleteTexture(i),L=!0}_.document&&(k=_.document.createElement("img"),k.onload=function(){R&&z(R),R=null,N=!0},k.onerror=function(){L=!0,R=null},k.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");const F="01";function U(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}var W=Y;function Y(a,i,l,d){this.cx=3*a,this.bx=3*(l-a)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*i,this.by=3*(d-i)-this.cy,this.ay=1-this.cy-this.by,this.p1x=a,this.p1y=i,this.p2x=l,this.p2y=d}Y.prototype={sampleCurveX:function(a){return((this.ax*a+this.bx)*a+this.cx)*a},sampleCurveY:function(a){return((this.ay*a+this.by)*a+this.cy)*a},sampleCurveDerivativeX:function(a){return(3*this.ax*a+2*this.bx)*a+this.cx},solveCurveX:function(a,i){if(i===void 0&&(i=1e-6),a<0)return 0;if(a>1)return 1;for(var l=a,d=0;d<8;d++){var p=this.sampleCurveX(l)-a;if(Math.abs(p)<i)return l;var y=this.sampleCurveDerivativeX(l);if(Math.abs(y)<1e-6)break;l-=p/y}var x=0,w=1;for(l=a,d=0;d<20&&(p=this.sampleCurveX(l),!(Math.abs(p-a)<i));d++)a>p?x=l:w=l,l=.5*(w-x)+x;return l},solve:function(a,i){return this.sampleCurveY(this.solveCurveX(a,i))}};var Q=U(W),Z=re;function re(a,i){this.x=a,this.y=i}re.prototype={clone:function(){return new re(this.x,this.y)},add:function(a){return this.clone()._add(a)},sub:function(a){return this.clone()._sub(a)},multByPoint:function(a){return this.clone()._multByPoint(a)},divByPoint:function(a){return this.clone()._divByPoint(a)},mult:function(a){return this.clone()._mult(a)},div:function(a){return this.clone()._div(a)},rotate:function(a){return this.clone()._rotate(a)},rotateAround:function(a,i){return this.clone()._rotateAround(a,i)},matMult:function(a){return this.clone()._matMult(a)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(a){return this.x===a.x&&this.y===a.y},dist:function(a){return Math.sqrt(this.distSqr(a))},distSqr:function(a){var i=a.x-this.x,l=a.y-this.y;return i*i+l*l},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(a){return Math.atan2(this.y-a.y,this.x-a.x)},angleWith:function(a){return this.angleWithSep(a.x,a.y)},angleWithSep:function(a,i){return Math.atan2(this.x*i-this.y*a,this.x*a+this.y*i)},_matMult:function(a){var i=a[2]*this.x+a[3]*this.y;return this.x=a[0]*this.x+a[1]*this.y,this.y=i,this},_add:function(a){return this.x+=a.x,this.y+=a.y,this},_sub:function(a){return this.x-=a.x,this.y-=a.y,this},_mult:function(a){return this.x*=a,this.y*=a,this},_div:function(a){return this.x/=a,this.y/=a,this},_multByPoint:function(a){return this.x*=a.x,this.y*=a.y,this},_divByPoint:function(a){return this.x/=a.x,this.y/=a.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var a=this.y;return this.y=this.x,this.x=-a,this},_rotate:function(a){var i=Math.cos(a),l=Math.sin(a),d=l*this.x+i*this.y;return this.x=i*this.x-l*this.y,this.y=d,this},_rotateAround:function(a,i){var l=Math.cos(a),d=Math.sin(a),p=i.y+d*(this.x-i.x)+l*(this.y-i.y);return this.x=i.x+l*(this.x-i.x)-d*(this.y-i.y),this.y=p,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},re.convert=function(a){return a instanceof re?a:Array.isArray(a)?new re(a[0],a[1]):a};var ne=U(Z);const ue=Math.PI/180,fe=180/Math.PI;function Ee(a){return a*ue}function Se(a){return a*fe}const je=[[0,0],[1,0],[1,1],[0,1]];function Le(a){if(a<=0)return 0;if(a>=1)return 1;const i=a*a,l=i*a;return 4*(a<.5?l:3*(a-i)+l-.75)}function Ue(a,i,l,d){const p=new Q(a,i,l,d);return function(y){return p.solve(y)}}const we=Ue(.25,.1,.25,1);function Pe(a,i,l){return Math.min(l,Math.max(i,a))}function rt(a,i,l){return(l=Pe((l-a)/(i-a),0,1))*l*(3-2*l)}function $e(a,i,l){const d=l-i,p=((a-i)%d+d)%d+i;return p===i?l:p}function Ge(a,i,l){if(!a.length)return l(null,[]);let d=a.length;const p=new Array(a.length);let y=null;a.forEach((x,w)=>{i(x,(P,C)=>{P&&(y=P),p[w]=C,--d==0&&l(y,p)})})}function Re(a){const i=[];for(const l in a)i.push(a[l]);return i}function at(a,...i){for(const l of i)for(const d in l)a[d]=l[d];return a}let Et=1;function vt(){return Et++}function lt(){return function a(i){return i?(i^Math.random()*(16>>i/4)).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,a)}()}function gt(a){return a<=1?1:Math.pow(2,Math.ceil(Math.log(a)/Math.LN2))}function tt(a){return!!a&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(a)}function ft(a,i){a.forEach(l=>{i[l]&&(i[l]=i[l].bind(i))})}function ht(a,i){return a.indexOf(i,a.length-i.length)!==-1}function Be(a,i,l){const d={};for(const p in a)d[p]=i.call(this,a[p],p,a);return d}function zt(a,i,l){const d={};for(const p in a)i.call(l||this,a[p],p,a)&&(d[p]=a[p]);return d}function Ot(a){return Array.isArray(a)?a.map(Ot):typeof a=="object"&&a?Be(a,Ot):a}const qt={};function Pt(a){qt[a]||(typeof console<"u"&&console.warn(a),qt[a]=!0)}function nr(a,i,l){return(l.y-a.y)*(i.x-a.x)>(i.y-a.y)*(l.x-a.x)}function tr(a){let i=0;for(let l,d,p=0,y=a.length,x=y-1;p<y;x=p++)l=a[p],d=a[x],i+=(d.x-l.x)*(l.y+d.y);return i}function Yt(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function or(a){const i={};if(a.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(l,d,p,y)=>{const x=p||y;return i[d]=!x||x.toLowerCase(),""}),i["max-age"]){const l=parseInt(i["max-age"],10);isNaN(l)?delete i["max-age"]:i["max-age"]=l}return i}let wn=null;function An(a){if(wn==null){const i=a.navigator?a.navigator.userAgent:null;wn=!!a.safari||!(!i||!(/\b(iPad|iPhone|iPod)\b/.test(i)||i.match("Safari")&&!i.match("Chrome")))}return wn}function ii(a){try{const i=_[a];return i.setItem("_mapbox_test_",1),i.removeItem("_mapbox_test_"),!0}catch{return!1}}function Vr(a,i){return[a[4*i],a[4*i+1],a[4*i+2],a[4*i+3]]}const Yn="mapbox-tiles";let ln=500,hn=50,gn,oi;function Wo(){try{return _.caches}catch{}}function Ti(){Wo()&&!gn&&(gn=_.caches.open(Yn))}function Jn(a){const i=a.indexOf("?");if(i<0)return a;const l=function(p){const y=p.indexOf("?");return y>0?p.slice(y+1).split("&"):[]}(a),d=l.filter(p=>{const y=p.split("=");return y[0]==="language"||y[0]==="worldview"});return d.length?`${a.slice(0,i)}?${d.join("&")}`:a.slice(0,i)}let qi=1/0;const So={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(So);class Eo extends Error{constructor(i,l,d){l===401&&qe(d)&&(i+=": you may have provided an invalid Mapbox access token. See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes"),super(i),this.status=l,this.url=d}toString(){return`${this.name}: ${this.message} (${this.status}): ${this.url}`}}const Ai=Yt()?()=>self.worker&&self.worker.referrer:()=>(_.location.protocol==="blob:"?_.parent:_).location.href,Ka=function(a,i){if(!(/^file:/.test(l=a.url)||/^file:/.test(Ai())&&!/^\w+:/.test(l))){if(_.fetch&&_.Request&&_.AbortController&&_.Request.prototype.hasOwnProperty("signal"))return function(d,p){const y=new _.AbortController,x=new _.Request(d.url,{method:d.method||"GET",body:d.body,credentials:d.credentials,headers:d.headers,referrer:Ai(),referrerPolicy:d.referrerPolicy,signal:y.signal});let w=!1,P=!1;const C=(j=x.url).indexOf("sku=")>0&&qe(j);var j;d.type==="json"&&x.headers.set("Accept","application/json");const $=(X,K,te)=>{if(P)return;if(X&&X.message!=="SecurityError"&&Pt(X.toString()),K&&te)return G(K);const se=Date.now();_.fetch(x).then(me=>{if(me.ok){const Ae=C?me.clone():null;return G(me,Ae,se)}return p(new Eo(me.statusText,me.status,d.url))}).catch(me=>{me.name!=="AbortError"&&p(new Error(`${me.message} ${d.url}`))})},G=(X,K,te)=>{(d.type==="arrayBuffer"?X.arrayBuffer():d.type==="json"?X.json():X.text()).then(se=>{P||(K&&te&&function(me,Ae,ge){if(Ti(),!gn)return;const Te={status:Ae.status,statusText:Ae.statusText,headers:new _.Headers};Ae.headers.forEach((Ye,Xe)=>Te.headers.set(Xe,Ye));const Me=or(Ae.headers.get("Cache-Control")||"");if(Me["no-store"])return;Me["max-age"]&&Te.headers.set("Expires",new Date(ge+1e3*Me["max-age"]).toUTCString());const Ce=Te.headers.get("Expires");Ce&&(new Date(Ce).getTime()-ge<42e4||function(Ye,Xe){if(oi===void 0)try{new Response(new ReadableStream),oi=!0}catch{oi=!1}oi?Xe(Ye.body):Ye.blob().then(Xe)}(Ae,Ye=>{const Xe=new _.Response(Ye,Te);Ti(),gn&&gn.then(ot=>ot.put(Jn(me.url),Xe)).catch(ot=>Pt(ot.message))}))}(x,K,te),w=!0,p(null,se,X.headers.get("Cache-Control"),X.headers.get("Expires")))}).catch(se=>{P||p(new Error(se.message))})};return C?function(X,K){if(Ti(),!gn)return K(null);const te=Jn(X.url);gn.then(se=>{se.match(te).then(me=>{const Ae=function(ge){if(!ge)return!1;const Te=new Date(ge.headers.get("Expires")||0),Me=or(ge.headers.get("Cache-Control")||"");return Te>Date.now()&&!Me["no-cache"]}(me);se.delete(te),Ae&&se.put(te,me.clone()),K(null,me,Ae)}).catch(K)}).catch(K)}(x,$):$(null,null),{cancel:()=>{P=!0,w||y.abort()}}}(a,i);if(Yt()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",a,i,void 0,!0)}var l;return function(d,p){const y=new _.XMLHttpRequest;y.open(d.method||"GET",d.url,!0),d.type==="arrayBuffer"&&(y.responseType="arraybuffer");for(const x in d.headers)y.setRequestHeader(x,d.headers[x]);return d.type==="json"&&(y.responseType="text",y.setRequestHeader("Accept","application/json")),y.withCredentials=d.credentials==="include",y.onerror=()=>{p(new Error(y.statusText))},y.onload=()=>{if((y.status>=200&&y.status<300||y.status===0)&&y.response!==null){let x=y.response;if(d.type==="json")try{x=JSON.parse(y.response)}catch(w){return p(w)}p(null,x,y.getResponseHeader("Cache-Control"),y.getResponseHeader("Expires"))}else p(new Eo(y.statusText,y.status,d.url))},y.send(d.body),{cancel:()=>y.abort()}}(a,i)},cr=function(a,i){return Ka(at(a,{type:"arrayBuffer"}),i)};function Gr(a){const i=_.document.createElement("a");return i.href=a,i.protocol===_.document.location.protocol&&i.host===_.document.location.host}const ve="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let ie,oe;ie=[],oe=0;const xe=function(a,i){if(I.supported&&(a.headers||(a.headers={}),a.headers.accept="image/webp,*/*"),oe>=A.MAX_PARALLEL_IMAGE_REQUESTS){const y={requestParameters:a,callback:i,cancelled:!1,cancel(){this.cancelled=!0}};return ie.push(y),y}oe++;let l=!1;const d=()=>{if(!l)for(l=!0,oe--;ie.length&&oe<A.MAX_PARALLEL_IMAGE_REQUESTS;){const y=ie.shift(),{requestParameters:x,callback:w,cancelled:P}=y;P||(y.cancel=xe(x,w).cancel)}},p=cr(a,(y,x,w,P)=>{d(),y?i(y):x&&(_.createImageBitmap?function(C,j){const $=new _.Blob([new Uint8Array(C)],{type:"image/png"});_.createImageBitmap($).then(G=>{j(null,G)}).catch(G=>{j(new Error(`Could not load image because of ${G.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})}(x,(C,j)=>i(C,j,w,P)):function(C,j){const $=new _.Image,G=_.URL;$.onload=()=>{j(null,$),G.revokeObjectURL($.src),$.onload=null,_.requestAnimationFrame(()=>{$.src=ve})},$.onerror=()=>j(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const X=new _.Blob([new Uint8Array(C)],{type:"image/png"});$.src=C.byteLength?G.createObjectURL(X):ve}(x,(C,j)=>i(C,j,w,P)))});return{cancel:()=>{p.cancel(),d()}}},Ie="NO_ACCESS_TOKEN";function Ne(a){return a.indexOf("mapbox:")===0}function qe(a){return A.API_URL_REGEX.test(a)}function We(a){return A.API_CDN_URL_REGEX.test(a)}function ze(a){return A.API_STYLE_REGEX.test(a)&&!et(a)}function et(a){return A.API_SPRITE_REGEX.test(a)}const It=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function kt(a){const i=a.match(It);if(!i)throw new Error("Unable to parse URL object");return{protocol:i[1],authority:i[2],path:i[3]||"/",params:i[4]?i[4].split("&"):[]}}function Tt(a){const i=a.params.length?`?${a.params.join("&")}`:"";return`${a.protocol}://${a.authority}${a.path}${i}`}const ur="mapbox.eventData";function mr(a){if(!a)return null;const i=a.split(".");if(!i||i.length!==3)return null;try{return JSON.parse(decodeURIComponent(_.atob(i[1]).split("").map(l=>"%"+("00"+l.charCodeAt(0).toString(16)).slice(-2)).join("")))}catch{return null}}class dr{constructor(i){this.type=i,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null}getStorageKey(i){const l=mr(A.ACCESS_TOKEN);let d="";return d=l&&l.u?_.btoa(encodeURIComponent(l.u).replace(/%([0-9A-F]{2})/g,(p,y)=>String.fromCharCode(+("0x"+y)))):A.ACCESS_TOKEN||"",i?`${ur}.${i}:${d}`:`${ur}:${d}`}fetchEventData(){const i=ii("localStorage"),l=this.getStorageKey(),d=this.getStorageKey("uuid");if(i)try{const p=_.localStorage.getItem(l);p&&(this.eventData=JSON.parse(p));const y=_.localStorage.getItem(d);y&&(this.anonId=y)}catch{Pt("Unable to read from LocalStorage")}}saveEventData(){const i=ii("localStorage"),l=this.getStorageKey(),d=this.getStorageKey("uuid");if(i)try{_.localStorage.setItem(d,this.anonId),Object.keys(this.eventData).length>=1&&_.localStorage.setItem(l,JSON.stringify(this.eventData))}catch{Pt("Unable to write to LocalStorage")}}processRequests(i){}postEvent(i,l,d,p){if(!A.EVENTS_URL)return;const y=kt(A.EVENTS_URL);y.params.push(`access_token=${p||A.ACCESS_TOKEN||""}`);const x={event:this.type,created:new Date(i).toISOString()},w=l?at(x,l):x,P={url:Tt(y),headers:{"Content-Type":"text/plain"},body:JSON.stringify([w])};this.pendingRequest=function(C,j){return Ka(at(C,{method:"POST"}),j)}(P,C=>{this.pendingRequest=null,d(C),this.saveEventData(),this.processRequests(p)})}queueRequest(i,l){this.queue.push(i),this.processRequests(l)}}const gr=new class extends dr{constructor(a){super("appUserTurnstile"),this._customAccessToken=a}postTurnstileEvent(a,i){A.EVENTS_URL&&A.ACCESS_TOKEN&&Array.isArray(a)&&a.some(l=>Ne(l)||qe(l))&&this.queueRequest(Date.now(),i)}processRequests(a){if(this.pendingRequest||this.queue.length===0)return;this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();const i=mr(A.ACCESS_TOKEN),l=i?i.u:A.ACCESS_TOKEN;let d=l!==this.eventData.tokenU;tt(this.anonId)||(this.anonId=lt(),d=!0);const p=this.queue.shift();if(this.eventData.lastSuccess){const y=new Date(this.eventData.lastSuccess),x=new Date(p),w=(p-this.eventData.lastSuccess)/864e5;d=d||w>=1||w<-1||y.getDate()!==x.getDate()}else d=!0;d?this.postEvent(p,{sdkIdentifier:"mapbox-gl-js",sdkVersion:E,skuId:F,"enabled.telemetry":!1,userId:this.anonId},y=>{y||(this.eventData.lastSuccess=p,this.eventData.tokenU=l)},a):this.processRequests()}},Sr=gr.postTurnstileEvent.bind(gr),yn=new class extends dr{constructor(){super("map.load"),this.success={},this.skuToken=""}postMapLoadEvent(a,i,l,d){this.skuToken=i,this.errorCb=d,A.EVENTS_URL&&(l||A.ACCESS_TOKEN?this.queueRequest({id:a,timestamp:Date.now()},l):this.errorCb(new Error(Ie)))}processRequests(a){if(this.pendingRequest||this.queue.length===0)return;const{id:i,timestamp:l}=this.queue.shift();i&&this.success[i]||(this.anonId||this.fetchEventData(),tt(this.anonId)||(this.anonId=lt()),this.postEvent(l,{sdkIdentifier:"mapbox-gl-js",sdkVersion:E,skuId:F,skuToken:this.skuToken,userId:this.anonId},d=>{d?this.errorCb(d):i&&(this.success[i]=!0)},a))}},Nn=yn.postMapLoadEvent.bind(yn),Pi=new class extends dr{constructor(){super("gljs.performance")}postPerformanceEvent(a,i){A.EVENTS_URL&&(a||A.ACCESS_TOKEN)&&this.queueRequest({timestamp:Date.now(),performanceData:i},a)}processRequests(a){if(this.pendingRequest||this.queue.length===0)return;const{timestamp:i,performanceData:l}=this.queue.shift(),d=function(p){const y=_.performance.getEntriesByType("resource"),x=_.performance.getEntriesByType("mark"),w=function(G){const X={};if(G){for(const K in G)if(K!=="other")for(const te of G[K]){const se=`${K}ResolveRangeMin`,me=`${K}ResolveRangeMax`,Ae=`${K}RequestCount`,ge=`${K}RequestCachedCount`;X[se]=Math.min(X[se]||1/0,te.startTime),X[me]=Math.max(X[me]||-1/0,te.responseEnd);const Te=Me=>{X[Me]===void 0&&(X[Me]=0),++X[Me]};te.transferSize!==void 0&&te.transferSize===0&&Te(ge),Te(Ae)}}return X}(function(G,X){const K={};if(G)for(const te of G){const se=X(te);K[se]===void 0&&(K[se]=[]),K[se].push(te)}return K}(y,y_)),P=_.devicePixelRatio,C=_.navigator.connection||_.navigator.mozConnection||_.navigator.webkitConnection,j={counters:[],metadata:[],attributes:[]},$=(G,X,K)=>{K!=null&&G.push({name:X,value:K.toString()})};for(const G in w)$(j.counters,G,w[G]);if(p.interactionRange[0]!==1/0&&p.interactionRange[1]!==-1/0&&($(j.counters,"interactionRangeMin",p.interactionRange[0]),$(j.counters,"interactionRangeMax",p.interactionRange[1])),x)for(const G of Object.keys(hc)){const X=hc[G],K=x.find(te=>te.name===X);K&&$(j.counters,X,K.startTime)}return $(j.counters,"visibilityHidden",p.visibilityHidden),$(j.attributes,"style",function(G){if(G)for(const X of G){const K=X.name.split("?")[0];if(ze(K)){const te=K.split("/").slice(-2);if(te.length===2)return`mapbox://styles/${te[0]}/${te[1]}`}}}(y)),$(j.attributes,"terrainEnabled",p.terrainEnabled?"true":"false"),$(j.attributes,"fogEnabled",p.fogEnabled?"true":"false"),$(j.attributes,"projection",p.projection),$(j.attributes,"zoom",p.zoom),$(j.metadata,"devicePixelRatio",P),$(j.metadata,"connectionEffectiveType",C?C.effectiveType:void 0),$(j.metadata,"navigatorUserAgent",_.navigator.userAgent),$(j.metadata,"screenWidth",_.screen.width),$(j.metadata,"screenHeight",_.screen.height),$(j.metadata,"windowWidth",_.innerWidth),$(j.metadata,"windowHeight",_.innerHeight),$(j.metadata,"mapWidth",p.width/P),$(j.metadata,"mapHeight",p.height/P),$(j.metadata,"webglRenderer",p.renderer),$(j.metadata,"webglVendor",p.vendor),$(j.metadata,"sdkVersion",E),$(j.metadata,"sdkIdentifier","mapbox-gl-js"),j}(l);for(const p of d.metadata);for(const p of d.counters);for(const p of d.attributes);this.postEvent(i,d,()=>{},a)}},Qn=Pi.postPerformanceEvent.bind(Pi),ga=new class extends dr{constructor(){super("map.auth"),this.success={},this.skuToken=""}getSession(a,i,l,d){if(!A.API_URL||!A.SESSION_PATH)return;const p=kt(A.API_URL+A.SESSION_PATH);p.params.push(`sku=${i||""}`),p.params.push(`access_token=${d||A.ACCESS_TOKEN||""}`);const y={url:Tt(p),headers:{"Content-Type":"text/plain"}};this.pendingRequest=function(x,w){return Ka(at(x,{method:"GET"}),w)}(y,x=>{this.pendingRequest=null,l(x),this.saveEventData(),this.processRequests(d)})}getSessionAPI(a,i,l,d){this.skuToken=i,this.errorCb=d,A.SESSION_PATH&&A.API_URL&&(l||A.ACCESS_TOKEN?this.queueRequest({id:a,timestamp:Date.now()},l):this.errorCb(new Error(Ie)))}processRequests(a){if(this.pendingRequest||this.queue.length===0)return;const{id:i,timestamp:l}=this.queue.shift();i&&this.success[i]||this.getSession(l,this.skuToken,d=>{d?this.errorCb(d):i&&(this.success[i]=!0)},a)}},li=ga.getSessionAPI.bind(ga),zi=new Set,hc={create:"create",load:"load",fullLoad:"fullLoad"},mS={mark(a){_.performance.mark(a)},measure(a,i,l){_.performance.measure(a,i,l)}};function y_(a){const i=a.name.split("?")[0];return We(i)&&i.includes("mapbox-gl.js")?"javascript":We(i)&&i.includes("mapbox-gl.css")?"css":function(l){return A.API_FONTS_REGEX.test(l)}(i)?"fontRange":et(i)?"sprite":ze(i)?"style":function(l){return A.API_TILEJSON_REGEX.test(l)}(i)?"tilejson":"other"}const jr=_.performance;function mm(a){const i=a?a.url.toString():void 0;return jr.getEntriesByName(i)}let Uu,gm,xh,ya;const Ya={now:()=>xh!==void 0?xh:_.performance.now(),setNow(a){xh=a},restoreNow(){xh=void 0},frame(a){const i=_.requestAnimationFrame(a);return{cancel:()=>_.cancelAnimationFrame(i)}},getImageData(a,i=0){const{width:l,height:d}=a;ya||(ya=_.document.createElement("canvas"));const p=ya.getContext("2d",{willReadFrequently:!0});if(!p)throw new Error("failed to create canvas 2d context");return(l>ya.width||d>ya.height)&&(ya.width=l,ya.height=d),p.clearRect(-i,-i,l+2*i,d+2*i),p.drawImage(a,0,0,l,d),p.getImageData(-i,-i,l+2*i,d+2*i)},resolveURL:a=>(Uu||(Uu=_.document.createElement("a")),Uu.href=a,Uu.href),get devicePixelRatio(){return _.devicePixelRatio},get prefersReducedMotion(){return!!_.matchMedia&&(gm==null&&(gm=_.matchMedia("(prefers-reduced-motion: reduce)")),gm.matches)}};function ym(a,i,l){l[a]&&l[a].indexOf(i)!==-1||(l[a]=l[a]||[],l[a].push(i))}function vm(a,i,l){if(l&&l[a]){const d=l[a].indexOf(i);d!==-1&&l[a].splice(d,1)}}class gl{constructor(i,l={}){at(this,l),this.type=i}}class Ja extends gl{constructor(i,l={}){super("error",at({error:i},l))}}class Vu{on(i,l){return this._listeners=this._listeners||{},ym(i,l,this._listeners),this}off(i,l){return vm(i,l,this._listeners),vm(i,l,this._oneTimeListeners),this}once(i,l){return l?(this._oneTimeListeners=this._oneTimeListeners||{},ym(i,l,this._oneTimeListeners),this):new Promise(d=>this.once(i,d))}fire(i,l){typeof i=="string"&&(i=new gl(i,l||{}));const d=i.type;if(this.listens(d)){i.target=this;const p=this._listeners&&this._listeners[d]?this._listeners[d].slice():[];for(const w of p)w.call(this,i);const y=this._oneTimeListeners&&this._oneTimeListeners[d]?this._oneTimeListeners[d].slice():[];for(const w of y)vm(d,w,this._oneTimeListeners),w.call(this,i);const x=this._eventedParent;x&&(at(i,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),x.fire(i))}else i instanceof Ja&&console.error(i.error);return this}listens(i){return!!(this._listeners&&this._listeners[i]&&this._listeners[i].length>0||this._oneTimeListeners&&this._oneTimeListeners[i]&&this._oneTimeListeners[i].length>0||this._eventedParent&&this._eventedParent.listens(i))}setEventedParent(i,l){return this._eventedParent=i,this._eventedParentData=l,this}}var it=JSON.parse('{"$version":8,"$root":{"version":{"required":true,"type":"enum","values":[8]},"name":{"type":"string"},"metadata":{"type":"*"},"center":{"type":"array","value":"number"},"zoom":{"type":"number"},"bearing":{"type":"number","default":0,"period":360,"units":"degrees"},"pitch":{"type":"number","default":0,"units":"degrees"},"light":{"type":"light"},"terrain":{"type":"terrain"},"fog":{"type":"fog"},"sources":{"required":true,"type":"sources"},"sprite":{"type":"string"},"glyphs":{"type":"string"},"transition":{"type":"transition"},"projection":{"type":"projection"},"layers":{"required":true,"type":"array","value":"layer"}},"sources":{"*":{"type":"source"}},"source":["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],"source_vector":{"type":{"required":true,"type":"enum","values":{"vector":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"scheme":{"type":"enum","values":{"xyz":{},"tms":{}},"default":"xyz"},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"attribution":{"type":"string"},"promoteId":{"type":"promoteId"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster":{"type":{"required":true,"type":"enum","values":{"raster":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512,"units":"pixels"},"scheme":{"type":"enum","values":{"xyz":{},"tms":{}},"default":"xyz"},"attribution":{"type":"string"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster_dem":{"type":{"required":true,"type":"enum","values":{"raster-dem":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512,"units":"pixels"},"attribution":{"type":"string"},"encoding":{"type":"enum","values":{"terrarium":{},"mapbox":{}},"default":"mapbox"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_geojson":{"type":{"required":true,"type":"enum","values":{"geojson":{}}},"data":{"type":"*"},"maxzoom":{"type":"number","default":18},"attribution":{"type":"string"},"buffer":{"type":"number","default":128,"maximum":512,"minimum":0},"filter":{"type":"*"},"tolerance":{"type":"number","default":0.375},"cluster":{"type":"boolean","default":false},"clusterRadius":{"type":"number","default":50,"minimum":0},"clusterMaxZoom":{"type":"number"},"clusterMinPoints":{"type":"number"},"clusterProperties":{"type":"*"},"lineMetrics":{"type":"boolean","default":false},"generateId":{"type":"boolean","default":false},"promoteId":{"type":"promoteId"}},"source_video":{"type":{"required":true,"type":"enum","values":{"video":{}}},"urls":{"required":true,"type":"array","value":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"source_image":{"type":{"required":true,"type":"enum","values":{"image":{}}},"url":{"required":true,"type":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"layer":{"id":{"type":"string","required":true},"type":{"type":"enum","values":{"fill":{},"line":{},"symbol":{},"circle":{},"heatmap":{},"fill-extrusion":{},"raster":{},"hillshade":{},"background":{},"sky":{}},"required":true},"metadata":{"type":"*"},"source":{"type":"string"},"source-layer":{"type":"string"},"minzoom":{"type":"number","minimum":0,"maximum":24},"maxzoom":{"type":"number","minimum":0,"maximum":24},"filter":{"type":"filter"},"layout":{"type":"layout"},"paint":{"type":"paint"}},"layout":["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background","layout_sky"],"layout_background":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_sky":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_fill":{"fill-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_circle":{"circle-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_heatmap":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_fill-extrusion":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"},"fill-extrusion-edge-radius":{"type":"number","private":true,"default":0,"minimum":0,"maximum":1,"property-type":"constant"}},"layout_line":{"line-cap":{"type":"enum","values":{"butt":{},"round":{},"square":{}},"default":"butt","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-join":{"type":"enum","values":{"bevel":{},"round":{},"miter":{}},"default":"miter","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{"type":"number","default":2,"requires":[{"line-join":"miter"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-round-limit":{"type":"number","default":1.05,"requires":[{"line-join":"round"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_symbol":{"symbol-placement":{"type":"enum","values":{"point":{},"line":{},"line-center":{}},"default":"point","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-spacing":{"type":"number","default":250,"minimum":1,"units":"pixels","requires":[{"symbol-placement":"line"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{"type":"boolean","default":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{"type":"enum","values":{"auto":{},"viewport-y":{},"source":{}},"default":"auto","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{"type":"boolean","default":false,"requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{"type":"boolean","default":false,"requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-optional":{"type":"boolean","default":false,"requires":["icon-image","text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-size":{"type":"number","default":1,"minimum":0,"units":"factor of the original icon size","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{"type":"enum","values":{"none":{},"width":{},"height":{},"both":{}},"default":"none","requires":["icon-image","text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{"type":"array","value":"number","length":4,"default":[0,0,0,0],"units":"pixels","requires":["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-image":{"type":"resolvedImage","tokens":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{"type":"number","default":0,"period":360,"units":"degrees","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{"type":"boolean","default":false,"requires":["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-offset":{"type":"array","value":"number","length":2,"default":[0,0],"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{"type":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-field":{"type":"formatted","default":"","tokens":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-font":{"type":"array","value":"string","default":["Open Sans Regular","Arial Unicode MS Regular"],"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-size":{"type":"number","default":16,"minimum":0,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{"type":"number","default":10,"minimum":0,"units":"ems","requires":["text-field",{"symbol-placement":["point"]}],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{"type":"number","default":1.2,"units":"ems","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{"type":"number","default":0,"units":"ems","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-justify":{"type":"enum","values":{"auto":{},"left":{},"center":{},"right":{}},"default":"center","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{"type":"number","units":"ems","default":0,"requires":["text-field"],"property-type":"data-driven","expression":{"interpolated":true,"parameters":["zoom","feature"]}},"text-variable-anchor":{"type":"array","value":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"requires":["text-field",{"symbol-placement":["point"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-anchor":{"type":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center","requires":["text-field",{"!":"text-variable-anchor"}],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{"type":"number","default":45,"units":"degrees","requires":["text-field",{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-writing-mode":{"type":"array","value":"enum","values":{"horizontal":{},"vertical":{}},"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotate":{"type":"number","default":0,"period":360,"units":"degrees","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-keep-upright":{"type":"boolean","default":true,"requires":["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-transform":{"type":"enum","values":{"none":{},"uppercase":{},"lowercase":{}},"default":"none","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-offset":{"type":"array","value":"number","units":"ems","length":2,"default":[0,0],"requires":["text-field",{"!":"text-radial-offset"}],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{"type":"boolean","default":false,"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{"type":"boolean","default":false,"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-optional":{"type":"boolean","default":false,"requires":["text-field","icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_raster":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_hillshade":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"filter":{"type":"array","value":"*"},"filter_symbol":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature","pitch","distance-from-center"]}},"filter_fill":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_line":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_circle":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_fill-extrusion":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_heatmap":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_operator":{"type":"enum","values":{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},"in":{},"!in":{},"all":{},"any":{},"none":{},"has":{},"!has":{},"within":{}}},"geometry_type":{"type":"enum","values":{"Point":{},"LineString":{},"Polygon":{}}},"function":{"expression":{"type":"expression"},"stops":{"type":"array","value":"function_stop"},"base":{"type":"number","default":1,"minimum":0},"property":{"type":"string","default":"$zoom"},"type":{"type":"enum","values":{"identity":{},"exponential":{},"interval":{},"categorical":{}},"default":"exponential"},"colorSpace":{"type":"enum","values":{"rgb":{},"lab":{},"hcl":{}},"default":"rgb"},"default":{"type":"*","required":false}},"function_stop":{"type":"array","minimum":0,"maximum":24,"value":["number","color"],"length":2},"expression":{"type":"array","value":"*","minimum":1},"fog":{"range":{"type":"array","default":[0.5,10],"minimum":-20,"maximum":20,"length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"high-color":{"type":"color","property-type":"data-constant","default":"#245cdf","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"space-color":{"type":"color","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,"#010b19",7,"#367ab9"],"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"horizon-blend":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,0.2,7,0.1],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"star-intensity":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],5,0.35,6,0],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"light":{"anchor":{"type":"enum","default":"viewport","values":{"map":{},"viewport":{}},"property-type":"data-constant","transition":false,"expression":{"interpolated":false,"parameters":["zoom"]}},"position":{"type":"array","default":[1.15,210,30],"length":3,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"projection":{"name":{"type":"enum","values":{"albers":{},"equalEarth":{},"equirectangular":{},"lambertConformalConic":{},"mercator":{},"naturalEarth":{},"winkelTripel":{},"globe":{}},"default":"mercator","required":true},"center":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-180,-90],"maximum":[180,90],"transition":false,"requires":[{"name":["albers","lambertConformalConic"]}]},"parallels":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-90,-90],"maximum":[90,90],"transition":false,"requires":[{"name":["albers","lambertConformalConic"]}]}},"terrain":{"source":{"type":"string","required":true},"exaggeration":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1000,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true,"requires":["source"]}},"paint":["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background","paint_sky"],"paint_fill":{"fill-antialias":{"type":"boolean","default":true,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"fill-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{"type":"color","transition":true,"requires":[{"!":"fill-pattern"},{"fill-antialias":true}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["fill-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"fill-extrusion-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["fill-extrusion-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"fill-extrusion-height":{"type":"number","default":0,"minimum":0,"units":"meters","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{"type":"number","default":0,"minimum":0,"units":"meters","transition":true,"requires":["fill-extrusion-height"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{"type":"boolean","default":true,"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-ambient-occlusion-intensity":{"property-type":"data-constant","type":"number","private":true,"default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-radius":{"property-type":"data-constant","type":"number","private":true,"default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true,"requires":["fill-extrusion-edge-radius"]},"fill-extrusion-rounded-roof":{"type":"boolean","default":true,"requires":["fill-extrusion-edge-radius"],"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_line":{"line-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"line-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["line-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"line-width":{"type":"number","default":1,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{"type":"number","default":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{"type":"array","value":"number","minimum":0,"transition":false,"units":"line widths","requires":[{"!":"line-pattern"}],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-gradient":{"type":"color","transition":false,"requires":[{"!":"line-pattern"},{"source":"geojson","has":{"lineMetrics":true}}],"expression":{"interpolated":true,"parameters":["line-progress"]},"property-type":"color-ramp"},"line-trim-offset":{"type":"array","value":"number","length":2,"default":[0,0],"minimum":[0,0],"maximum":[1,1],"transition":false,"requires":[{"source":"geojson","has":{"lineMetrics":true}}],"property-type":"constant"}},"paint_circle":{"circle-radius":{"type":"number","default":5,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{"type":"number","default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["circle-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{}},"default":"viewport","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"}},"paint_heatmap":{"heatmap-radius":{"type":"number","default":30,"minimum":1,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{"type":"number","default":1,"minimum":0,"transition":false,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"heatmap-color":{"type":"color","default":["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",0.1,"royalblue",0.3,"cyan",0.5,"lime",0.7,"yellow",1,"red"],"transition":false,"expression":{"interpolated":true,"parameters":["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_symbol":{"icon-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{"type":"color","default":"#000000","transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["icon-image","icon-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{"type":"color","default":"#000000","transition":true,"overridable":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["text-field","text-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_raster":{"raster-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{"type":"number","default":0,"period":360,"transition":true,"units":"degrees","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{"type":"number","default":0,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-saturation":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-contrast":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-resampling":{"type":"enum","values":{"linear":{},"nearest":{}},"default":"linear","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{"type":"number","default":300,"minimum":0,"transition":false,"units":"milliseconds","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_hillshade":{"hillshade-illumination-direction":{"type":"number","default":335,"minimum":0,"maximum":359,"transition":false,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"viewport","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{"type":"number","default":0.5,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{"type":"color","default":"#FFFFFF","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_background":{"background-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"background-pattern"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"background-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"background-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_sky":{"sky-type":{"type":"enum","values":{"gradient":{},"atmosphere":{}},"default":"atmosphere","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{"type":"array","value":"number","length":2,"units":"degrees","minimum":[0,0],"maximum":[360,180],"transition":false,"requires":[{"sky-type":"atmosphere"}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{"type":"number","requires":[{"sky-type":"atmosphere"}],"default":10,"minimum":0,"maximum":100,"transition":false,"property-type":"data-constant"},"sky-gradient-center":{"type":"array","requires":[{"sky-type":"gradient"}],"value":"number","default":[0,0],"length":2,"units":"degrees","minimum":[0,0],"maximum":[360,180],"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{"type":"number","requires":[{"sky-type":"gradient"}],"default":90,"minimum":0,"maximum":180,"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient":{"type":"color","default":["interpolate",["linear"],["sky-radial-progress"],0.8,"#87ceeb",1,"white"],"transition":false,"requires":[{"sky-type":"gradient"}],"expression":{"interpolated":true,"parameters":["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{"type":"color","default":"white","transition":false,"requires":[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-atmosphere-color":{"type":"color","default":"white","transition":false,"requires":[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"transition":{"duration":{"type":"number","default":300,"minimum":0,"units":"milliseconds"},"delay":{"type":"number","default":0,"minimum":0,"units":"milliseconds"}},"property-type":{"data-driven":{"type":"property-type"},"color-ramp":{"type":"property-type"},"data-constant":{"type":"property-type"},"constant":{"type":"property-type"}},"promoteId":{"*":{"type":"string"}}}');function Qa(a,...i){for(const l of i)for(const d in l)a[d]=l[d];return a}function Bn(a){return a instanceof Number||a instanceof String||a instanceof Boolean?a.valueOf():a}function ci(a){if(Array.isArray(a))return a.map(ci);if(a instanceof Object&&!(a instanceof Number||a instanceof String||a instanceof Boolean)){const i={};for(const l in a)i[l]=ci(a[l]);return i}return Bn(a)}class v_ extends Error{constructor(i,l){super(l),this.message=l,this.key=i}}var va=v_;class _m{constructor(i,l=[]){this.parent=i,this.bindings={};for(const[d,p]of l)this.bindings[d]=p}concat(i){return new _m(this,i)}get(i){if(this.bindings[i])return this.bindings[i];if(this.parent)return this.parent.get(i);throw new Error(`${i} not found in scope.`)}has(i){return!!this.bindings[i]||!!this.parent&&this.parent.has(i)}}var __=_m;const fc={kind:"null"},Nt={kind:"number"},wr={kind:"string"},_r={kind:"boolean"},co={kind:"color"},qo={kind:"object"},xr={kind:"value"},uo={kind:"collator"},Gu={kind:"formatted"},yl={kind:"resolvedImage"};function To(a,i){return{kind:"array",itemType:a,N:i}}function fn(a){if(a.kind==="array"){const i=fn(a.itemType);return typeof a.N=="number"?`array<${i}, ${a.N}>`:a.itemType.kind==="value"?"array":`array<${i}>`}return a.kind}const x_=[fc,Nt,wr,_r,co,Gu,qo,To(xr),yl];function es(a,i){if(i.kind==="error")return null;if(a.kind==="array"){if(i.kind==="array"&&(i.N===0&&i.itemType.kind==="value"||!es(a.itemType,i.itemType))&&(typeof a.N!="number"||a.N===i.N))return null}else{if(a.kind===i.kind)return null;if(a.kind==="value"){for(const l of x_)if(!es(l,i))return null}}return`Expected ${fn(a)} but found ${fn(i)} instead.`}function Wu(a,i){return i.some(l=>l.kind===a.kind)}function qu(a,i){return i.some(l=>l==="null"?a===null:l==="array"?Array.isArray(a):l==="object"?a&&!Array.isArray(a)&&typeof a=="object":l===typeof a)}var xm,b_={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function Hu(a){return(a=Math.round(a))<0?0:a>255?255:a}function Xu(a){return Hu(a[a.length-1]==="%"?parseFloat(a)/100*255:parseInt(a))}function bh(a){return(i=a[a.length-1]==="%"?parseFloat(a)/100:parseFloat(a))<0?0:i>1?1:i;var i}function pc(a,i,l){return l<0?l+=1:l>1&&(l-=1),6*l<1?a+(i-a)*l*6:2*l<1?i:3*l<2?a+(i-a)*(2/3-l)*6:a}try{xm={}.parseCSSColor=function(a){var i,l=a.replace(/ /g,"").toLowerCase();if(l in b_)return b_[l].slice();if(l[0]==="#")return l.length===4?(i=parseInt(l.substr(1),16))>=0&&i<=4095?[(3840&i)>>4|(3840&i)>>8,240&i|(240&i)>>4,15&i|(15&i)<<4,1]:null:l.length===7&&(i=parseInt(l.substr(1),16))>=0&&i<=16777215?[(16711680&i)>>16,(65280&i)>>8,255&i,1]:null;var d=l.indexOf("("),p=l.indexOf(")");if(d!==-1&&p+1===l.length){var y=l.substr(0,d),x=l.substr(d+1,p-(d+1)).split(","),w=1;switch(y){case"rgba":if(x.length!==4)return null;w=bh(x.pop());case"rgb":return x.length!==3?null:[Xu(x[0]),Xu(x[1]),Xu(x[2]),w];case"hsla":if(x.length!==4)return null;w=bh(x.pop());case"hsl":if(x.length!==3)return null;var P=(parseFloat(x[0])%360+360)%360/360,C=bh(x[1]),j=bh(x[2]),$=j<=.5?j*(C+1):j+C-j*C,G=2*j-$;return[Hu(255*pc(G,$,P+1/3)),Hu(255*pc(G,$,P)),Hu(255*pc(G,$,P-1/3)),w];default:return null}}return null}}catch{}class Hi{constructor(i,l,d,p=1){this.r=i,this.g=l,this.b=d,this.a=p}static parse(i){if(!i)return;if(i instanceof Hi)return i;if(typeof i!="string")return;const l=xm(i);return l?new Hi(l[0]/255*l[3],l[1]/255*l[3],l[2]/255*l[3],l[3]):void 0}toString(){const[i,l,d,p]=this.toArray();return`rgba(${Math.round(i)},${Math.round(l)},${Math.round(d)},${p})`}toArray(){const{r:i,g:l,b:d,a:p}=this;return p===0?[0,0,0,0]:[255*i/p,255*l/p,255*d/p,p]}toArray01(){const{r:i,g:l,b:d,a:p}=this;return p===0?[0,0,0,0]:[i/p,l/p,d/p,p]}toArray01PremultipliedAlpha(){const{r:i,g:l,b:d,a:p}=this;return[i,l,d,p]}}Hi.black=new Hi(0,0,0,1),Hi.white=new Hi(1,1,1,1),Hi.transparent=new Hi(0,0,0,0),Hi.red=new Hi(1,0,0,1),Hi.blue=new Hi(0,0,1,1);var Rn=Hi;class bm{constructor(i,l,d){this.sensitivity=i?l?"variant":"case":l?"accent":"base",this.locale=d,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(i,l){return this.collator.compare(i,l)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class wm{constructor(i,l,d,p,y){this.text=i.normalize?i.normalize():i,this.image=l,this.scale=d,this.fontStack=p,this.textColor=y}}class Xi{constructor(i){this.sections=i}static fromString(i){return new Xi([new wm(i,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(i=>i.text.length!==0||i.image&&i.image.name.length!==0)}static factory(i){return i instanceof Xi?i:Xi.fromString(i)}toString(){return this.sections.length===0?"":this.sections.map(i=>i.text).join("")}serialize(){const i=["format"];for(const l of this.sections){if(l.image){i.push(["image",l.image.name]);continue}i.push(l.text);const d={};l.fontStack&&(d["text-font"]=["literal",l.fontStack.split(",")]),l.scale&&(d["font-scale"]=l.scale),l.textColor&&(d["text-color"]=["rgba"].concat(l.textColor.toArray())),i.push(d)}return i}}class Ao{constructor(i){this.name=i.name,this.available=i.available}toString(){return this.name}static fromString(i){return i?new Ao({name:i,available:!1}):null}serialize(){return["image",this.name]}}function w_(a,i,l,d){return typeof a=="number"&&a>=0&&a<=255&&typeof i=="number"&&i>=0&&i<=255&&typeof l=="number"&&l>=0&&l<=255?d===void 0||typeof d=="number"&&d>=0&&d<=1?null:`Invalid rgba value [${[a,i,l,d].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof d=="number"?[a,i,l,d]:[a,i,l]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Zu(a){if(a===null||typeof a=="string"||typeof a=="boolean"||typeof a=="number"||a instanceof Rn||a instanceof bm||a instanceof Xi||a instanceof Ao)return!0;if(Array.isArray(a)){for(const i of a)if(!Zu(i))return!1;return!0}if(typeof a=="object"){for(const i in a)if(!Zu(a[i]))return!1;return!0}return!1}function Pn(a){if(a===null)return fc;if(typeof a=="string")return wr;if(typeof a=="boolean")return _r;if(typeof a=="number")return Nt;if(a instanceof Rn)return co;if(a instanceof bm)return uo;if(a instanceof Xi)return Gu;if(a instanceof Ao)return yl;if(Array.isArray(a)){const i=a.length;let l;for(const d of a){const p=Pn(d);if(l){if(l===p)continue;l=xr;break}l=p}return To(l||xr,i)}return qo}function Ku(a){const i=typeof a;return a===null?"":i==="string"||i==="number"||i==="boolean"?String(a):a instanceof Rn||a instanceof Xi||a instanceof Ao?a.toString():JSON.stringify(a)}class Sm{constructor(i,l){this.type=i,this.value=l}static parse(i,l){if(i.length!==2)return l.error(`'literal' expression requires exactly one argument, but found ${i.length-1} instead.`);if(!Zu(i[1]))return l.error("invalid value");const d=i[1];let p=Pn(d);const y=l.expectedType;return p.kind!=="array"||p.N!==0||!y||y.kind!=="array"||typeof y.N=="number"&&y.N!==0||(p=y),new Sm(p,d)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof Rn?["rgba"].concat(this.value.toArray()):this.value instanceof Xi?this.value.serialize():this.value}}var vl=Sm,yi=class{constructor(a){this.name="ExpressionEvaluationError",this.message=a}toJSON(){return this.message}};const Em={string:wr,number:Nt,boolean:_r,object:qo};class Tm{constructor(i,l){this.type=i,this.args=l}static parse(i,l){if(i.length<2)return l.error("Expected at least one argument.");let d,p=1;const y=i[0];if(y==="array"){let w,P;if(i.length>2){const C=i[1];if(typeof C!="string"||!(C in Em)||C==="object")return l.error('The item type argument of "array" must be one of string, number, boolean',1);w=Em[C],p++}else w=xr;if(i.length>3){if(i[2]!==null&&(typeof i[2]!="number"||i[2]<0||i[2]!==Math.floor(i[2])))return l.error('The length argument to "array" must be a positive integer literal',2);P=i[2],p++}d=To(w,P)}else d=Em[y];const x=[];for(;p<i.length;p++){const w=l.parse(i[p],p,xr);if(!w)return null;x.push(w)}return new Tm(d,x)}evaluate(i){for(let l=0;l<this.args.length;l++){const d=this.args[l].evaluate(i);if(!es(this.type,Pn(d)))return d;if(l===this.args.length-1)throw new yi(`Expected value to be of type ${fn(this.type)}, but found ${fn(Pn(d))} instead.`)}return null}eachChild(i){this.args.forEach(i)}outputDefined(){return this.args.every(i=>i.outputDefined())}serialize(){const i=this.type,l=[i.kind];if(i.kind==="array"){const d=i.itemType;if(d.kind==="string"||d.kind==="number"||d.kind==="boolean"){l.push(d.kind);const p=i.N;(typeof p=="number"||this.args.length>1)&&l.push(p)}}return l.concat(this.args.map(d=>d.serialize()))}}var ts=Tm;class zs{constructor(i){this.type=Gu,this.sections=i}static parse(i,l){if(i.length<2)return l.error("Expected at least one argument.");const d=i[1];if(!Array.isArray(d)&&typeof d=="object")return l.error("First argument must be an image or text section.");const p=[];let y=!1;for(let x=1;x<=i.length-1;++x){const w=i[x];if(y&&typeof w=="object"&&!Array.isArray(w)){y=!1;let P=null;if(w["font-scale"]&&(P=l.parse(w["font-scale"],1,Nt),!P))return null;let C=null;if(w["text-font"]&&(C=l.parse(w["text-font"],1,To(wr)),!C))return null;let j=null;if(w["text-color"]&&(j=l.parse(w["text-color"],1,co),!j))return null;const $=p[p.length-1];$.scale=P,$.font=C,$.textColor=j}else{const P=l.parse(i[x],1,xr);if(!P)return null;const C=P.type.kind;if(C!=="string"&&C!=="value"&&C!=="null"&&C!=="resolvedImage")return l.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");y=!0,p.push({content:P,scale:null,font:null,textColor:null})}}return new zs(p)}evaluate(i){return new Xi(this.sections.map(l=>{const d=l.content.evaluate(i);return Pn(d)===yl?new wm("",d,null,null,null):new wm(Ku(d),null,l.scale?l.scale.evaluate(i):null,l.font?l.font.evaluate(i).join(","):null,l.textColor?l.textColor.evaluate(i):null)}))}eachChild(i){for(const l of this.sections)i(l.content),l.scale&&i(l.scale),l.font&&i(l.font),l.textColor&&i(l.textColor)}outputDefined(){return!1}serialize(){const i=["format"];for(const l of this.sections){i.push(l.content.serialize());const d={};l.scale&&(d["font-scale"]=l.scale.serialize()),l.font&&(d["text-font"]=l.font.serialize()),l.textColor&&(d["text-color"]=l.textColor.serialize()),i.push(d)}return i}}class wh{constructor(i){this.type=yl,this.input=i}static parse(i,l){if(i.length!==2)return l.error("Expected two arguments.");const d=l.parse(i[1],1,wr);return d?new wh(d):l.error("No image name provided.")}evaluate(i){const l=this.input.evaluate(i),d=Ao.fromString(l);return d&&i.availableImages&&(d.available=i.availableImages.indexOf(l)>-1),d}eachChild(i){i(this.input)}outputDefined(){return!1}serialize(){return["image",this.input.serialize()]}}const gS={"to-boolean":_r,"to-color":co,"to-number":Nt,"to-string":wr};class Am{constructor(i,l){this.type=i,this.args=l}static parse(i,l){if(i.length<2)return l.error("Expected at least one argument.");const d=i[0];if((d==="to-boolean"||d==="to-string")&&i.length!==2)return l.error("Expected one argument.");const p=gS[d],y=[];for(let x=1;x<i.length;x++){const w=l.parse(i[x],x,xr);if(!w)return null;y.push(w)}return new Am(p,y)}evaluate(i){if(this.type.kind==="boolean")return!!this.args[0].evaluate(i);if(this.type.kind==="color"){let l,d;for(const p of this.args){if(l=p.evaluate(i),d=null,l instanceof Rn)return l;if(typeof l=="string"){const y=i.parseColor(l);if(y)return y}else if(Array.isArray(l)&&(d=l.length<3||l.length>4?`Invalid rbga value ${JSON.stringify(l)}: expected an array containing either three or four numeric values.`:w_(l[0],l[1],l[2],l[3]),!d))return new Rn(l[0]/255,l[1]/255,l[2]/255,l[3])}throw new yi(d||`Could not parse color from value '${typeof l=="string"?l:String(JSON.stringify(l))}'`)}if(this.type.kind==="number"){let l=null;for(const d of this.args){if(l=d.evaluate(i),l===null)return 0;const p=Number(l);if(!isNaN(p))return p}throw new yi(`Could not convert ${JSON.stringify(l)} to number.`)}return this.type.kind==="formatted"?Xi.fromString(Ku(this.args[0].evaluate(i))):this.type.kind==="resolvedImage"?Ao.fromString(Ku(this.args[0].evaluate(i))):Ku(this.args[0].evaluate(i))}eachChild(i){this.args.forEach(i)}outputDefined(){return this.args.every(i=>i.outputDefined())}serialize(){if(this.type.kind==="formatted")return new zs([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new wh(this.args[0]).serialize();const i=[`to-${this.type.kind}`];return this.eachChild(l=>{i.push(l.serialize())}),i}}var mc=Am;const _a=["Unknown","Point","LineString","Polygon"];var Pm=class{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null,this.featureTileCoord=null,this.featureDistanceData=null}id(){return this.feature&&this.feature.id!==void 0?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?_a[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}distanceFromCenter(){if(this.featureTileCoord&&this.featureDistanceData){const a=this.featureDistanceData.center,i=this.featureDistanceData.scale,{x:l,y:d}=this.featureTileCoord;return this.featureDistanceData.bearing[0]*(l*i-a[0])+this.featureDistanceData.bearing[1]*(d*i-a[1])}return 0}parseColor(a){let i=this._parseColorCache[a];return i||(i=this._parseColorCache[a]=Rn.parse(a)),i}};class _l{constructor(i,l,d,p){this.name=i,this.type=l,this._evaluate=d,this.args=p}evaluate(i){return this._evaluate(i,this.args)}eachChild(i){this.args.forEach(i)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map(i=>i.serialize()))}static parse(i,l){const d=i[0],p=_l.definitions[d];if(!p)return l.error(`Unknown expression "${d}". If you wanted a literal array, use ["literal", [...]].`,0);const y=Array.isArray(p)?p[0]:p.type,x=Array.isArray(p)?[[p[1],p[2]]]:p.overloads,w=x.filter(([C])=>!Array.isArray(C)||C.length===i.length-1);let P=null;for(const[C,j]of w){P=new Dm(l.registry,l.path,null,l.scope);const $=[];let G=!1;for(let X=1;X<i.length;X++){const K=i[X],te=Array.isArray(C)?C[X-1]:C.type,se=P.parse(K,1+$.length,te);if(!se){G=!0;break}$.push(se)}if(!G)if(Array.isArray(C)&&C.length!==$.length)P.error(`Expected ${C.length} arguments, but found ${$.length} instead.`);else{for(let X=0;X<$.length;X++){const K=Array.isArray(C)?C[X]:C.type,te=$[X];P.concat(X+1).checkSubtype(K,te.type)}if(P.errors.length===0)return new _l(d,y,j,$)}}if(w.length===1)l.errors.push(...P.errors);else{const C=(w.length?w:x).map(([$])=>{return G=$,Array.isArray(G)?`(${G.map(fn).join(", ")})`:`(${fn(G.type)}...)`;var G}).join(" | "),j=[];for(let $=1;$<i.length;$++){const G=l.parse(i[$],1+j.length);if(!G)return null;j.push(fn(G.type))}l.error(`Expected arguments of type ${C}, but found (${j.join(", ")}) instead.`)}return null}static register(i,l){_l.definitions=l;for(const d in l)i[d]=_l}}var rs=_l;class Yu{constructor(i,l,d){this.type=uo,this.locale=d,this.caseSensitive=i,this.diacriticSensitive=l}static parse(i,l){if(i.length!==2)return l.error("Expected one argument.");const d=i[1];if(typeof d!="object"||Array.isArray(d))return l.error("Collator options argument must be an object.");const p=l.parse(d["case-sensitive"]!==void 0&&d["case-sensitive"],1,_r);if(!p)return null;const y=l.parse(d["diacritic-sensitive"]!==void 0&&d["diacritic-sensitive"],1,_r);if(!y)return null;let x=null;return d.locale&&(x=l.parse(d.locale,1,wr),!x)?null:new Yu(p,y,x)}evaluate(i){return new bm(this.caseSensitive.evaluate(i),this.diacriticSensitive.evaluate(i),this.locale?this.locale.evaluate(i):null)}eachChild(i){i(this.caseSensitive),i(this.diacriticSensitive),this.locale&&i(this.locale)}outputDefined(){return!1}serialize(){const i={};return i["case-sensitive"]=this.caseSensitive.serialize(),i["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(i.locale=this.locale.serialize()),["collator",i]}}const ns=8192;function Sh(a,i){a[0]=Math.min(a[0],i[0]),a[1]=Math.min(a[1],i[1]),a[2]=Math.max(a[2],i[0]),a[3]=Math.max(a[3],i[1])}function gc(a,i){return!(a[0]<=i[0]||a[2]>=i[2]||a[1]<=i[1]||a[3]>=i[3])}function Ju(a,i){const l=(180+a[0])/360,d=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+a[1]*Math.PI/360)))/360,p=Math.pow(2,i.z);return[Math.round(l*p*ns),Math.round(d*p*ns)]}function S_(a,i,l){const d=a[0]-i[0],p=a[1]-i[1],y=a[0]-l[0],x=a[1]-l[1];return d*x-y*p==0&&d*y<=0&&p*x<=0}function Eh(a,i){let l=!1;for(let x=0,w=i.length;x<w;x++){const P=i[x];for(let C=0,j=P.length;C<j-1;C++){if(S_(a,P[C],P[C+1]))return!1;(p=P[C])[1]>(d=a)[1]!=(y=P[C+1])[1]>d[1]&&d[0]<(y[0]-p[0])*(d[1]-p[1])/(y[1]-p[1])+p[0]&&(l=!l)}}var d,p,y;return l}function Cm(a,i){for(let l=0;l<i.length;l++)if(Eh(a,i[l]))return!0;return!1}function Mm(a,i,l,d){const p=d[0]-l[0],y=d[1]-l[1],x=(a[0]-l[0])*y-p*(a[1]-l[1]),w=(i[0]-l[0])*y-p*(i[1]-l[1]);return x>0&&w<0||x<0&&w>0}function yc(a,i,l){for(const C of l)for(let j=0;j<C.length-1;++j)if((w=[(x=C[j+1])[0]-(y=C[j])[0],x[1]-y[1]])[0]*(P=[(p=i)[0]-(d=a)[0],p[1]-d[1]])[1]-w[1]*P[0]!=0&&Mm(d,p,y,x)&&Mm(y,x,d,p))return!0;var d,p,y,x,w,P;return!1}function zr(a,i){for(let l=0;l<a.length;++l)if(!Eh(a[l],i))return!1;for(let l=0;l<a.length-1;++l)if(yc(a[l],a[l+1],i))return!1;return!0}function yS(a,i){for(let l=0;l<i.length;l++)if(zr(a,i[l]))return!0;return!1}function Im(a,i,l){const d=[];for(let p=0;p<a.length;p++){const y=[];for(let x=0;x<a[p].length;x++){const w=Ju(a[p][x],l);Sh(i,w),y.push(w)}d.push(y)}return d}function E_(a,i,l){const d=[];for(let p=0;p<a.length;p++){const y=Im(a[p],i,l);d.push(y)}return d}function Om(a,i,l,d){if(a[0]<l[0]||a[0]>l[2]){const p=.5*d;let y=a[0]-l[0]>p?-d:l[0]-a[0]>p?d:0;y===0&&(y=a[0]-l[2]>p?-d:l[2]-a[0]>p?d:0),a[0]+=y}Sh(i,a)}function T_(a,i,l,d){const p=Math.pow(2,d.z)*ns,y=[d.x*ns,d.y*ns],x=[];if(!a)return x;for(const w of a)for(const P of w){const C=[P.x+y[0],P.y+y[1]];Om(C,i,l,p),x.push(C)}return x}function km(a,i,l,d){const p=Math.pow(2,d.z)*ns,y=[d.x*ns,d.y*ns],x=[];if(!a)return x;for(const P of a){const C=[];for(const j of P){const $=[j.x+y[0],j.y+y[1]];Sh(i,$),C.push($)}x.push(C)}if(i[2]-i[0]<=p/2){(w=i)[0]=w[1]=1/0,w[2]=w[3]=-1/0;for(const P of x)for(const C of P)Om(C,i,l,p)}var w;return x}class vc{constructor(i,l){this.type=_r,this.geojson=i,this.geometries=l}static parse(i,l){if(i.length!==2)return l.error(`'within' expression requires exactly one argument, but found ${i.length-1} instead.`);if(Zu(i[1])){const d=i[1];if(d.type==="FeatureCollection")for(let p=0;p<d.features.length;++p){const y=d.features[p].geometry.type;if(y==="Polygon"||y==="MultiPolygon")return new vc(d,d.features[p].geometry)}else if(d.type==="Feature"){const p=d.geometry.type;if(p==="Polygon"||p==="MultiPolygon")return new vc(d,d.geometry)}else if(d.type==="Polygon"||d.type==="MultiPolygon")return new vc(d,d)}return l.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(i){if(i.geometry()!=null&&i.canonicalID()!=null){if(i.geometryType()==="Point")return function(l,d){const p=[1/0,1/0,-1/0,-1/0],y=[1/0,1/0,-1/0,-1/0],x=l.canonicalID();if(!x)return!1;if(d.type==="Polygon"){const w=Im(d.coordinates,y,x),P=T_(l.geometry(),p,y,x);if(!gc(p,y))return!1;for(const C of P)if(!Eh(C,w))return!1}if(d.type==="MultiPolygon"){const w=E_(d.coordinates,y,x),P=T_(l.geometry(),p,y,x);if(!gc(p,y))return!1;for(const C of P)if(!Cm(C,w))return!1}return!0}(i,this.geometries);if(i.geometryType()==="LineString")return function(l,d){const p=[1/0,1/0,-1/0,-1/0],y=[1/0,1/0,-1/0,-1/0],x=l.canonicalID();if(!x)return!1;if(d.type==="Polygon"){const w=Im(d.coordinates,y,x),P=km(l.geometry(),p,y,x);if(!gc(p,y))return!1;for(const C of P)if(!zr(C,w))return!1}if(d.type==="MultiPolygon"){const w=E_(d.coordinates,y,x),P=km(l.geometry(),p,y,x);if(!gc(p,y))return!1;for(const C of P)if(!yS(C,w))return!1}return!0}(i,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}var Th=vc;function _c(a){if(a instanceof rs&&(a.name==="get"&&a.args.length===1||a.name==="feature-state"||a.name==="has"&&a.args.length===1||a.name==="properties"||a.name==="geometry-type"||a.name==="id"||/^filter-/.test(a.name))||a instanceof Th)return!1;let i=!0;return a.eachChild(l=>{i&&!_c(l)&&(i=!1)}),i}function is(a){if(a instanceof rs&&a.name==="feature-state")return!1;let i=!0;return a.eachChild(l=>{i&&!is(l)&&(i=!1)}),i}function xl(a,i){if(a instanceof rs&&i.indexOf(a.name)>=0)return!1;let l=!0;return a.eachChild(d=>{l&&!xl(d,i)&&(l=!1)}),l}class Ah{constructor(i,l){this.type=l.type,this.name=i,this.boundExpression=l}static parse(i,l){if(i.length!==2||typeof i[1]!="string")return l.error("'var' expression requires exactly one string literal argument.");const d=i[1];return l.scope.has(d)?new Ah(d,l.scope.get(d)):l.error(`Unknown variable "${d}". Make sure "${d}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(i){return this.boundExpression.evaluate(i)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}var A_=Ah;class Qu{constructor(i,l=[],d,p=new __,y=[]){this.registry=i,this.path=l,this.key=l.map(x=>`[${x}]`).join(""),this.scope=p,this.errors=y,this.expectedType=d}parse(i,l,d,p,y={}){return l?this.concat(l,d,p)._parse(i,y):this._parse(i,y)}_parse(i,l){function d(p,y,x){return x==="assert"?new ts(y,[p]):x==="coerce"?new mc(y,[p]):p}if(i!==null&&typeof i!="string"&&typeof i!="boolean"&&typeof i!="number"||(i=["literal",i]),Array.isArray(i)){if(i.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const p=i[0];if(typeof p!="string")return this.error(`Expression name must be a string, but found ${typeof p} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const y=this.registry[p];if(y){let x=y.parse(i,this);if(!x)return null;if(this.expectedType){const w=this.expectedType,P=x.type;if(w.kind!=="string"&&w.kind!=="number"&&w.kind!=="boolean"&&w.kind!=="object"&&w.kind!=="array"||P.kind!=="value")if(w.kind!=="color"&&w.kind!=="formatted"&&w.kind!=="resolvedImage"||P.kind!=="value"&&P.kind!=="string"){if(this.checkSubtype(w,P))return null}else x=d(x,w,l.typeAnnotation||"coerce");else x=d(x,w,l.typeAnnotation||"assert")}if(!(x instanceof vl)&&x.type.kind!=="resolvedImage"&&Rm(x)){const w=new Pm;try{x=new vl(x.type,x.evaluate(w))}catch(P){return this.error(P.message),null}}return x}return this.error(`Unknown expression "${p}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(i===void 0?"'undefined' value invalid. Use null instead.":typeof i=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof i} instead.`)}concat(i,l,d){const p=typeof i=="number"?this.path.concat(i):this.path,y=d?this.scope.concat(d):this.scope;return new Qu(this.registry,p,l||null,y,this.errors)}error(i,...l){const d=`${this.key}${l.map(p=>`[${p}]`).join("")}`;this.errors.push(new va(d,i))}checkSubtype(i,l){const d=es(i,l);return d&&this.error(d),d}}var Dm=Qu;function Rm(a){if(a instanceof A_)return Rm(a.boundExpression);if(a instanceof rs&&a.name==="error"||a instanceof Yu||a instanceof Th)return!1;const i=a instanceof mc||a instanceof ts;let l=!0;return a.eachChild(d=>{l=i?l&&Rm(d):l&&d instanceof vl}),!!l&&_c(a)&&xl(a,["zoom","heatmap-density","line-progress","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center"])}function Ph(a,i){const l=a.length-1;let d,p,y=0,x=l,w=0;for(;y<=x;)if(w=Math.floor((y+x)/2),d=a[w],p=a[w+1],d<=i){if(w===l||i<p)return w;y=w+1}else{if(!(d>i))throw new yi("Input is not a number.");x=w-1}return 0}class Ch{constructor(i,l,d){this.type=i,this.input=l,this.labels=[],this.outputs=[];for(const[p,y]of d)this.labels.push(p),this.outputs.push(y)}static parse(i,l){if(i.length-1<4)return l.error(`Expected at least 4 arguments, but found only ${i.length-1}.`);if((i.length-1)%2!=0)return l.error("Expected an even number of arguments.");const d=l.parse(i[1],1,Nt);if(!d)return null;const p=[];let y=null;l.expectedType&&l.expectedType.kind!=="value"&&(y=l.expectedType);for(let x=1;x<i.length;x+=2){const w=x===1?-1/0:i[x],P=i[x+1],C=x,j=x+1;if(typeof w!="number")return l.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',C);if(p.length&&p[p.length-1][0]>=w)return l.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',C);const $=l.parse(P,j,y);if(!$)return null;y=y||$.type,p.push([w,$])}return new Ch(y,d,p)}evaluate(i){const l=this.labels,d=this.outputs;if(l.length===1)return d[0].evaluate(i);const p=this.input.evaluate(i);if(p<=l[0])return d[0].evaluate(i);const y=l.length;return p>=l[y-1]?d[y-1].evaluate(i):d[Ph(l,p)].evaluate(i)}eachChild(i){i(this.input);for(const l of this.outputs)i(l)}outputDefined(){return this.outputs.every(i=>i.outputDefined())}serialize(){const i=["step",this.input.serialize()];for(let l=0;l<this.labels.length;l++)l>0&&i.push(this.labels[l]),i.push(this.outputs[l].serialize());return i}}var Lm=Ch;function Cr(a,i,l){return a*(1-l)+i*l}var ed=Object.freeze({__proto__:null,array:function(a,i,l){return a.map((d,p)=>Cr(d,i[p],l))},color:function(a,i,l){return new Rn(Cr(a.r,i.r,l),Cr(a.g,i.g,l),Cr(a.b,i.b,l),Cr(a.a,i.a,l))},number:Cr});const P_=.95047,jm=1.08883,C_=4/29,bl=6/29,zm=3*bl*bl,vS=bl*bl*bl,_S=Math.PI/180,xS=180/Math.PI;function Nm(a){return a>vS?Math.pow(a,1/3):a/zm+C_}function Bm(a){return a>bl?a*a*a:zm*(a-C_)}function $m(a){return 255*(a<=.0031308?12.92*a:1.055*Math.pow(a,1/2.4)-.055)}function Mh(a){return(a/=255)<=.04045?a/12.92:Math.pow((a+.055)/1.055,2.4)}function M_(a){const i=Mh(a.r),l=Mh(a.g),d=Mh(a.b),p=Nm((.4124564*i+.3575761*l+.1804375*d)/P_),y=Nm((.2126729*i+.7151522*l+.072175*d)/1);return{l:116*y-16,a:500*(p-y),b:200*(y-Nm((.0193339*i+.119192*l+.9503041*d)/jm)),alpha:a.a}}function I_(a){let i=(a.l+16)/116,l=isNaN(a.a)?i:i+a.a/500,d=isNaN(a.b)?i:i-a.b/200;return i=1*Bm(i),l=P_*Bm(l),d=jm*Bm(d),new Rn($m(3.2404542*l-1.5371385*i-.4985314*d),$m(-.969266*l+1.8760108*i+.041556*d),$m(.0556434*l-.2040259*i+1.0572252*d),a.alpha)}function bS(a,i,l){const d=i-a;return a+l*(d>180||d<-180?d-360*Math.round(d/360):d)}const td={forward:M_,reverse:I_,interpolate:function(a,i,l){return{l:Cr(a.l,i.l,l),a:Cr(a.a,i.a,l),b:Cr(a.b,i.b,l),alpha:Cr(a.alpha,i.alpha,l)}}},xc={forward:function(a){const{l:i,a:l,b:d}=M_(a),p=Math.atan2(d,l)*xS;return{h:p<0?p+360:p,c:Math.sqrt(l*l+d*d),l:i,alpha:a.a}},reverse:function(a){const i=a.h*_S,l=a.c;return I_({l:a.l,a:Math.cos(i)*l,b:Math.sin(i)*l,alpha:a.alpha})},interpolate:function(a,i,l){return{h:bS(a.h,i.h,l),c:Cr(a.c,i.c,l),l:Cr(a.l,i.l,l),alpha:Cr(a.alpha,i.alpha,l)}}};var Fm=Object.freeze({__proto__:null,hcl:xc,lab:td});class rd{constructor(i,l,d,p,y){this.type=i,this.operator=l,this.interpolation=d,this.input=p,this.labels=[],this.outputs=[];for(const[x,w]of y)this.labels.push(x),this.outputs.push(w)}static interpolationFactor(i,l,d,p){let y=0;if(i.name==="exponential")y=Um(l,i.base,d,p);else if(i.name==="linear")y=Um(l,1,d,p);else if(i.name==="cubic-bezier"){const x=i.controlPoints;y=new Q(x[0],x[1],x[2],x[3]).solve(Um(l,1,d,p))}return y}static parse(i,l){let[d,p,y,...x]=i;if(!Array.isArray(p)||p.length===0)return l.error("Expected an interpolation type expression.",1);if(p[0]==="linear")p={name:"linear"};else if(p[0]==="exponential"){const C=p[1];if(typeof C!="number")return l.error("Exponential interpolation requires a numeric base.",1,1);p={name:"exponential",base:C}}else{if(p[0]!=="cubic-bezier")return l.error(`Unknown interpolation type ${String(p[0])}`,1,0);{const C=p.slice(1);if(C.length!==4||C.some(j=>typeof j!="number"||j<0||j>1))return l.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);p={name:"cubic-bezier",controlPoints:C}}}if(i.length-1<4)return l.error(`Expected at least 4 arguments, but found only ${i.length-1}.`);if((i.length-1)%2!=0)return l.error("Expected an even number of arguments.");if(y=l.parse(y,2,Nt),!y)return null;const w=[];let P=null;d==="interpolate-hcl"||d==="interpolate-lab"?P=co:l.expectedType&&l.expectedType.kind!=="value"&&(P=l.expectedType);for(let C=0;C<x.length;C+=2){const j=x[C],$=x[C+1],G=C+3,X=C+4;if(typeof j!="number")return l.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',G);if(w.length&&w[w.length-1][0]>=j)return l.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',G);const K=l.parse($,X,P);if(!K)return null;P=P||K.type,w.push([j,K])}return P.kind==="number"||P.kind==="color"||P.kind==="array"&&P.itemType.kind==="number"&&typeof P.N=="number"?new rd(P,d,p,y,w):l.error(`Type ${fn(P)} is not interpolatable.`)}evaluate(i){const l=this.labels,d=this.outputs;if(l.length===1)return d[0].evaluate(i);const p=this.input.evaluate(i);if(p<=l[0])return d[0].evaluate(i);const y=l.length;if(p>=l[y-1])return d[y-1].evaluate(i);const x=Ph(l,p),w=rd.interpolationFactor(this.interpolation,p,l[x],l[x+1]),P=d[x].evaluate(i),C=d[x+1].evaluate(i);return this.operator==="interpolate"?ed[this.type.kind.toLowerCase()](P,C,w):this.operator==="interpolate-hcl"?xc.reverse(xc.interpolate(xc.forward(P),xc.forward(C),w)):td.reverse(td.interpolate(td.forward(P),td.forward(C),w))}eachChild(i){i(this.input);for(const l of this.outputs)i(l)}outputDefined(){return this.outputs.every(i=>i.outputDefined())}serialize(){let i;i=this.interpolation.name==="linear"?["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);const l=[this.operator,i,this.input.serialize()];for(let d=0;d<this.labels.length;d++)l.push(this.labels[d],this.outputs[d].serialize());return l}}function Um(a,i,l,d){const p=d-l,y=a-l;return p===0?0:i===1?y/p:(Math.pow(i,y)-1)/(Math.pow(i,p)-1)}var xa=rd;class Ih{constructor(i,l){this.type=i,this.args=l}static parse(i,l){if(i.length<2)return l.error("Expectected at least one argument.");let d=null;const p=l.expectedType;p&&p.kind!=="value"&&(d=p);const y=[];for(const w of i.slice(1)){const P=l.parse(w,1+y.length,d,void 0,{typeAnnotation:"omit"});if(!P)return null;d=d||P.type,y.push(P)}const x=p&&y.some(w=>es(p,w.type));return new Ih(x?xr:d,y)}evaluate(i){let l,d=null,p=0;for(const y of this.args){if(p++,d=y.evaluate(i),d&&d instanceof Ao&&!d.available&&(l||(l=d),d=null,p===this.args.length))return l;if(d!==null)break}return d}eachChild(i){this.args.forEach(i)}outputDefined(){return this.args.every(i=>i.outputDefined())}serialize(){const i=["coalesce"];return this.eachChild(l=>{i.push(l.serialize())}),i}}var Vm=Ih;class Oh{constructor(i,l){this.type=l.type,this.bindings=[].concat(i),this.result=l}evaluate(i){return this.result.evaluate(i)}eachChild(i){for(const l of this.bindings)i(l[1]);i(this.result)}static parse(i,l){if(i.length<4)return l.error(`Expected at least 3 arguments, but found ${i.length-1} instead.`);const d=[];for(let y=1;y<i.length-1;y+=2){const x=i[y];if(typeof x!="string")return l.error(`Expected string, but found ${typeof x} instead.`,y);if(/[^a-zA-Z0-9_]/.test(x))return l.error("Variable names must contain only alphanumeric characters or '_'.",y);const w=l.parse(i[y+1],y+1);if(!w)return null;d.push([x,w])}const p=l.parse(i[i.length-1],i.length-1,l.expectedType,d);return p?new Oh(d,p):null}outputDefined(){return this.result.outputDefined()}serialize(){const i=["let"];for(const[l,d]of this.bindings)i.push(l,d.serialize());return i.push(this.result.serialize()),i}}var O_=Oh;class Gm{constructor(i,l,d){this.type=i,this.index=l,this.input=d}static parse(i,l){if(i.length!==3)return l.error(`Expected 2 arguments, but found ${i.length-1} instead.`);const d=l.parse(i[1],1,Nt),p=l.parse(i[2],2,To(l.expectedType||xr));return d&&p?new Gm(p.type.itemType,d,p):null}evaluate(i){const l=this.index.evaluate(i),d=this.input.evaluate(i);if(l<0)throw new yi(`Array index out of bounds: ${l} < 0.`);if(l>=d.length)throw new yi(`Array index out of bounds: ${l} > ${d.length-1}.`);if(l!==Math.floor(l))throw new yi(`Array index must be an integer, but found ${l} instead.`);return d[l]}eachChild(i){i(this.index),i(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}}var wS=Gm;class Wm{constructor(i,l){this.type=_r,this.needle=i,this.haystack=l}static parse(i,l){if(i.length!==3)return l.error(`Expected 2 arguments, but found ${i.length-1} instead.`);const d=l.parse(i[1],1,xr),p=l.parse(i[2],2,xr);return d&&p?Wu(d.type,[_r,wr,Nt,fc,xr])?new Wm(d,p):l.error(`Expected first argument to be of type boolean, string, number or null, but found ${fn(d.type)} instead`):null}evaluate(i){const l=this.needle.evaluate(i),d=this.haystack.evaluate(i);if(d==null)return!1;if(!qu(l,["boolean","string","number","null"]))throw new yi(`Expected first argument to be of type boolean, string, number or null, but found ${fn(Pn(l))} instead.`);if(!qu(d,["string","array"]))throw new yi(`Expected second argument to be of type array or string, but found ${fn(Pn(d))} instead.`);return d.indexOf(l)>=0}eachChild(i){i(this.needle),i(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}var kh=Wm;class nd{constructor(i,l,d){this.type=Nt,this.needle=i,this.haystack=l,this.fromIndex=d}static parse(i,l){if(i.length<=2||i.length>=5)return l.error(`Expected 3 or 4 arguments, but found ${i.length-1} instead.`);const d=l.parse(i[1],1,xr),p=l.parse(i[2],2,xr);if(!d||!p)return null;if(!Wu(d.type,[_r,wr,Nt,fc,xr]))return l.error(`Expected first argument to be of type boolean, string, number or null, but found ${fn(d.type)} instead`);if(i.length===4){const y=l.parse(i[3],3,Nt);return y?new nd(d,p,y):null}return new nd(d,p)}evaluate(i){const l=this.needle.evaluate(i),d=this.haystack.evaluate(i);if(!qu(l,["boolean","string","number","null"]))throw new yi(`Expected first argument to be of type boolean, string, number or null, but found ${fn(Pn(l))} instead.`);if(!qu(d,["string","array"]))throw new yi(`Expected second argument to be of type array or string, but found ${fn(Pn(d))} instead.`);if(this.fromIndex){const p=this.fromIndex.evaluate(i);return d.indexOf(l,p)}return d.indexOf(l)}eachChild(i){i(this.needle),i(this.haystack),this.fromIndex&&i(this.fromIndex)}outputDefined(){return!1}serialize(){if(this.fromIndex!=null&&this.fromIndex!==void 0){const i=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),i]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}var k_=nd;class qm{constructor(i,l,d,p,y,x){this.inputType=i,this.type=l,this.input=d,this.cases=p,this.outputs=y,this.otherwise=x}static parse(i,l){if(i.length<5)return l.error(`Expected at least 4 arguments, but found only ${i.length-1}.`);if(i.length%2!=1)return l.error("Expected an even number of arguments.");let d,p;l.expectedType&&l.expectedType.kind!=="value"&&(p=l.expectedType);const y={},x=[];for(let C=2;C<i.length-1;C+=2){let j=i[C];const $=i[C+1];Array.isArray(j)||(j=[j]);const G=l.concat(C);if(j.length===0)return G.error("Expected at least one branch label.");for(const K of j){if(typeof K!="number"&&typeof K!="string")return G.error("Branch labels must be numbers or strings.");if(typeof K=="number"&&Math.abs(K)>Number.MAX_SAFE_INTEGER)return G.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof K=="number"&&Math.floor(K)!==K)return G.error("Numeric branch labels must be integer values.");if(d){if(G.checkSubtype(d,Pn(K)))return null}else d=Pn(K);if(y[String(K)]!==void 0)return G.error("Branch labels must be unique.");y[String(K)]=x.length}const X=l.parse($,C,p);if(!X)return null;p=p||X.type,x.push(X)}const w=l.parse(i[1],1,xr);if(!w)return null;const P=l.parse(i[i.length-1],i.length-1,p);return P?w.type.kind!=="value"&&l.concat(1).checkSubtype(d,w.type)?null:new qm(d,p,w,y,x,P):null}evaluate(i){const l=this.input.evaluate(i);return(Pn(l)===this.inputType&&this.outputs[this.cases[l]]||this.otherwise).evaluate(i)}eachChild(i){i(this.input),this.outputs.forEach(i),i(this.otherwise)}outputDefined(){return this.outputs.every(i=>i.outputDefined())&&this.otherwise.outputDefined()}serialize(){const i=["match",this.input.serialize()],l=Object.keys(this.cases).sort(),d=[],p={};for(const x of l){const w=p[this.cases[x]];w===void 0?(p[this.cases[x]]=d.length,d.push([this.cases[x],[x]])):d[w][1].push(x)}const y=x=>this.inputType.kind==="number"?Number(x):x;for(const[x,w]of d)i.push(w.length===1?y(w[0]):w.map(y)),i.push(this.outputs[x].serialize());return i.push(this.otherwise.serialize()),i}}var SS=qm;class Hm{constructor(i,l,d){this.type=i,this.branches=l,this.otherwise=d}static parse(i,l){if(i.length<4)return l.error(`Expected at least 3 arguments, but found only ${i.length-1}.`);if(i.length%2!=0)return l.error("Expected an odd number of arguments.");let d;l.expectedType&&l.expectedType.kind!=="value"&&(d=l.expectedType);const p=[];for(let x=1;x<i.length-1;x+=2){const w=l.parse(i[x],x,_r);if(!w)return null;const P=l.parse(i[x+1],x+1,d);if(!P)return null;p.push([w,P]),d=d||P.type}const y=l.parse(i[i.length-1],i.length-1,d);return y?new Hm(d,p,y):null}evaluate(i){for(const[l,d]of this.branches)if(l.evaluate(i))return d.evaluate(i);return this.otherwise.evaluate(i)}eachChild(i){for(const[l,d]of this.branches)i(l),i(d);i(this.otherwise)}outputDefined(){return this.branches.every(([i,l])=>l.outputDefined())&&this.otherwise.outputDefined()}serialize(){const i=["case"];return this.eachChild(l=>{i.push(l.serialize())}),i}}var D_=Hm;class id{constructor(i,l,d,p){this.type=i,this.input=l,this.beginIndex=d,this.endIndex=p}static parse(i,l){if(i.length<=2||i.length>=5)return l.error(`Expected 3 or 4 arguments, but found ${i.length-1} instead.`);const d=l.parse(i[1],1,xr),p=l.parse(i[2],2,Nt);if(!d||!p)return null;if(!Wu(d.type,[To(xr),wr,xr]))return l.error(`Expected first argument to be of type array or string, but found ${fn(d.type)} instead`);if(i.length===4){const y=l.parse(i[3],3,Nt);return y?new id(d.type,d,p,y):null}return new id(d.type,d,p)}evaluate(i){const l=this.input.evaluate(i),d=this.beginIndex.evaluate(i);if(!qu(l,["string","array"]))throw new yi(`Expected first argument to be of type array or string, but found ${fn(Pn(l))} instead.`);if(this.endIndex){const p=this.endIndex.evaluate(i);return l.slice(d,p)}return l.slice(d)}eachChild(i){i(this.input),i(this.beginIndex),this.endIndex&&i(this.endIndex)}outputDefined(){return!1}serialize(){if(this.endIndex!=null&&this.endIndex!==void 0){const i=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),i]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}var R_=id;function Dh(a,i){return a==="=="||a==="!="?i.kind==="boolean"||i.kind==="string"||i.kind==="number"||i.kind==="null"||i.kind==="value":i.kind==="string"||i.kind==="number"||i.kind==="value"}function L_(a,i,l,d){return d.compare(i,l)===0}function bc(a,i,l){const d=a!=="=="&&a!=="!=";return class OG{constructor(y,x,w){this.type=_r,this.lhs=y,this.rhs=x,this.collator=w,this.hasUntypedArgument=y.type.kind==="value"||x.type.kind==="value"}static parse(y,x){if(y.length!==3&&y.length!==4)return x.error("Expected two or three arguments.");const w=y[0];let P=x.parse(y[1],1,xr);if(!P)return null;if(!Dh(w,P.type))return x.concat(1).error(`"${w}" comparisons are not supported for type '${fn(P.type)}'.`);let C=x.parse(y[2],2,xr);if(!C)return null;if(!Dh(w,C.type))return x.concat(2).error(`"${w}" comparisons are not supported for type '${fn(C.type)}'.`);if(P.type.kind!==C.type.kind&&P.type.kind!=="value"&&C.type.kind!=="value")return x.error(`Cannot compare types '${fn(P.type)}' and '${fn(C.type)}'.`);d&&(P.type.kind==="value"&&C.type.kind!=="value"?P=new ts(C.type,[P]):P.type.kind!=="value"&&C.type.kind==="value"&&(C=new ts(P.type,[C])));let j=null;if(y.length===4){if(P.type.kind!=="string"&&C.type.kind!=="string"&&P.type.kind!=="value"&&C.type.kind!=="value")return x.error("Cannot use collator to compare non-string types.");if(j=x.parse(y[3],3,uo),!j)return null}return new OG(P,C,j)}evaluate(y){const x=this.lhs.evaluate(y),w=this.rhs.evaluate(y);if(d&&this.hasUntypedArgument){const P=Pn(x),C=Pn(w);if(P.kind!==C.kind||P.kind!=="string"&&P.kind!=="number")throw new yi(`Expected arguments for "${a}" to be (string, string) or (number, number), but found (${P.kind}, ${C.kind}) instead.`)}if(this.collator&&!d&&this.hasUntypedArgument){const P=Pn(x),C=Pn(w);if(P.kind!=="string"||C.kind!=="string")return i(y,x,w)}return this.collator?l(y,x,w,this.collator.evaluate(y)):i(y,x,w)}eachChild(y){y(this.lhs),y(this.rhs),this.collator&&y(this.collator)}outputDefined(){return!0}serialize(){const y=[a];return this.eachChild(x=>{y.push(x.serialize())}),y}}}const ES=bc("==",function(a,i,l){return i===l},L_),TS=bc("!=",function(a,i,l){return i!==l},function(a,i,l,d){return!L_(0,i,l,d)}),AS=bc("<",function(a,i,l){return i<l},function(a,i,l,d){return d.compare(i,l)<0}),PS=bc(">",function(a,i,l){return i>l},function(a,i,l,d){return d.compare(i,l)>0}),CS=bc("<=",function(a,i,l){return i<=l},function(a,i,l,d){return d.compare(i,l)<=0}),j_=bc(">=",function(a,i,l){return i>=l},function(a,i,l,d){return d.compare(i,l)>=0});class Rh{constructor(i,l,d,p,y,x){this.type=wr,this.number=i,this.locale=l,this.currency=d,this.unit=p,this.minFractionDigits=y,this.maxFractionDigits=x}static parse(i,l){if(i.length!==3)return l.error("Expected two arguments.");const d=l.parse(i[1],1,Nt);if(!d)return null;const p=i[2];if(typeof p!="object"||Array.isArray(p))return l.error("NumberFormat options argument must be an object.");let y=null;if(p.locale&&(y=l.parse(p.locale,1,wr),!y))return null;let x=null;if(p.currency&&(x=l.parse(p.currency,1,wr),!x))return null;let w=null;if(p.unit&&(w=l.parse(p.unit,1,wr),!w))return null;let P=null;if(p["min-fraction-digits"]&&(P=l.parse(p["min-fraction-digits"],1,Nt),!P))return null;let C=null;return p["max-fraction-digits"]&&(C=l.parse(p["max-fraction-digits"],1,Nt),!C)?null:new Rh(d,y,x,w,P,C)}evaluate(i){return new Intl.NumberFormat(this.locale?this.locale.evaluate(i):[],{style:(this.currency?"currency":this.unit&&"unit")||"decimal",currency:this.currency?this.currency.evaluate(i):void 0,unit:this.unit?this.unit.evaluate(i):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(i):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(i):void 0}).format(this.number.evaluate(i))}eachChild(i){i(this.number),this.locale&&i(this.locale),this.currency&&i(this.currency),this.unit&&i(this.unit),this.minFractionDigits&&i(this.minFractionDigits),this.maxFractionDigits&&i(this.maxFractionDigits)}outputDefined(){return!1}serialize(){const i={};return this.locale&&(i.locale=this.locale.serialize()),this.currency&&(i.currency=this.currency.serialize()),this.unit&&(i.unit=this.unit.serialize()),this.minFractionDigits&&(i["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(i["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),i]}}class wc{constructor(i){this.type=Nt,this.input=i}static parse(i,l){if(i.length!==2)return l.error(`Expected 1 argument, but found ${i.length-1} instead.`);const d=l.parse(i[1],1);return d?d.type.kind!=="array"&&d.type.kind!=="string"&&d.type.kind!=="value"?l.error(`Expected argument of type string or array, but found ${fn(d.type)} instead.`):new wc(d):null}evaluate(i){const l=this.input.evaluate(i);if(typeof l=="string"||Array.isArray(l))return l.length;throw new yi(`Expected value to be of type string or array, but found ${fn(Pn(l))} instead.`)}eachChild(i){i(this.input)}outputDefined(){return!1}serialize(){const i=["length"];return this.eachChild(l=>{i.push(l.serialize())}),i}}const z_={"==":ES,"!=":TS,">":PS,"<":AS,">=":j_,"<=":CS,array:ts,at:wS,boolean:ts,case:D_,coalesce:Vm,collator:Yu,format:zs,image:wh,in:kh,"index-of":k_,interpolate:xa,"interpolate-hcl":xa,"interpolate-lab":xa,length:wc,let:O_,literal:vl,match:SS,number:ts,"number-format":Rh,object:ts,slice:R_,step:Lm,string:ts,"to-boolean":mc,"to-color":mc,"to-number":mc,"to-string":mc,var:A_,within:Th};function N_(a,[i,l,d,p]){i=i.evaluate(a),l=l.evaluate(a),d=d.evaluate(a);const y=p?p.evaluate(a):1,x=w_(i,l,d,y);if(x)throw new yi(x);return new Rn(i/255*y,l/255*y,d/255*y,y)}function os(a,i){return a in i}function Lh(a,i){const l=i[a];return l===void 0?null:l}function Po(a){return{type:a}}rs.register(z_,{error:[{kind:"error"},[wr],(a,[i])=>{throw new yi(i.evaluate(a))}],typeof:[wr,[xr],(a,[i])=>fn(Pn(i.evaluate(a)))],"to-rgba":[To(Nt,4),[co],(a,[i])=>i.evaluate(a).toArray()],rgb:[co,[Nt,Nt,Nt],N_],rgba:[co,[Nt,Nt,Nt,Nt],N_],has:{type:_r,overloads:[[[wr],(a,[i])=>os(i.evaluate(a),a.properties())],[[wr,qo],(a,[i,l])=>os(i.evaluate(a),l.evaluate(a))]]},get:{type:xr,overloads:[[[wr],(a,[i])=>Lh(i.evaluate(a),a.properties())],[[wr,qo],(a,[i,l])=>Lh(i.evaluate(a),l.evaluate(a))]]},"feature-state":[xr,[wr],(a,[i])=>Lh(i.evaluate(a),a.featureState||{})],properties:[qo,[],a=>a.properties()],"geometry-type":[wr,[],a=>a.geometryType()],id:[xr,[],a=>a.id()],zoom:[Nt,[],a=>a.globals.zoom],pitch:[Nt,[],a=>a.globals.pitch||0],"distance-from-center":[Nt,[],a=>a.distanceFromCenter()],"heatmap-density":[Nt,[],a=>a.globals.heatmapDensity||0],"line-progress":[Nt,[],a=>a.globals.lineProgress||0],"sky-radial-progress":[Nt,[],a=>a.globals.skyRadialProgress||0],accumulated:[xr,[],a=>a.globals.accumulated===void 0?null:a.globals.accumulated],"+":[Nt,Po(Nt),(a,i)=>{let l=0;for(const d of i)l+=d.evaluate(a);return l}],"*":[Nt,Po(Nt),(a,i)=>{let l=1;for(const d of i)l*=d.evaluate(a);return l}],"-":{type:Nt,overloads:[[[Nt,Nt],(a,[i,l])=>i.evaluate(a)-l.evaluate(a)],[[Nt],(a,[i])=>-i.evaluate(a)]]},"/":[Nt,[Nt,Nt],(a,[i,l])=>i.evaluate(a)/l.evaluate(a)],"%":[Nt,[Nt,Nt],(a,[i,l])=>i.evaluate(a)%l.evaluate(a)],ln2:[Nt,[],()=>Math.LN2],pi:[Nt,[],()=>Math.PI],e:[Nt,[],()=>Math.E],"^":[Nt,[Nt,Nt],(a,[i,l])=>Math.pow(i.evaluate(a),l.evaluate(a))],sqrt:[Nt,[Nt],(a,[i])=>Math.sqrt(i.evaluate(a))],log10:[Nt,[Nt],(a,[i])=>Math.log(i.evaluate(a))/Math.LN10],ln:[Nt,[Nt],(a,[i])=>Math.log(i.evaluate(a))],log2:[Nt,[Nt],(a,[i])=>Math.log(i.evaluate(a))/Math.LN2],sin:[Nt,[Nt],(a,[i])=>Math.sin(i.evaluate(a))],cos:[Nt,[Nt],(a,[i])=>Math.cos(i.evaluate(a))],tan:[Nt,[Nt],(a,[i])=>Math.tan(i.evaluate(a))],asin:[Nt,[Nt],(a,[i])=>Math.asin(i.evaluate(a))],acos:[Nt,[Nt],(a,[i])=>Math.acos(i.evaluate(a))],atan:[Nt,[Nt],(a,[i])=>Math.atan(i.evaluate(a))],min:[Nt,Po(Nt),(a,i)=>Math.min(...i.map(l=>l.evaluate(a)))],max:[Nt,Po(Nt),(a,i)=>Math.max(...i.map(l=>l.evaluate(a)))],abs:[Nt,[Nt],(a,[i])=>Math.abs(i.evaluate(a))],round:[Nt,[Nt],(a,[i])=>{const l=i.evaluate(a);return l<0?-Math.round(-l):Math.round(l)}],floor:[Nt,[Nt],(a,[i])=>Math.floor(i.evaluate(a))],ceil:[Nt,[Nt],(a,[i])=>Math.ceil(i.evaluate(a))],"filter-==":[_r,[wr,xr],(a,[i,l])=>a.properties()[i.value]===l.value],"filter-id-==":[_r,[xr],(a,[i])=>a.id()===i.value],"filter-type-==":[_r,[wr],(a,[i])=>a.geometryType()===i.value],"filter-<":[_r,[wr,xr],(a,[i,l])=>{const d=a.properties()[i.value],p=l.value;return typeof d==typeof p&&d<p}],"filter-id-<":[_r,[xr],(a,[i])=>{const l=a.id(),d=i.value;return typeof l==typeof d&&l<d}],"filter->":[_r,[wr,xr],(a,[i,l])=>{const d=a.properties()[i.value],p=l.value;return typeof d==typeof p&&d>p}],"filter-id->":[_r,[xr],(a,[i])=>{const l=a.id(),d=i.value;return typeof l==typeof d&&l>d}],"filter-<=":[_r,[wr,xr],(a,[i,l])=>{const d=a.properties()[i.value],p=l.value;return typeof d==typeof p&&d<=p}],"filter-id-<=":[_r,[xr],(a,[i])=>{const l=a.id(),d=i.value;return typeof l==typeof d&&l<=d}],"filter->=":[_r,[wr,xr],(a,[i,l])=>{const d=a.properties()[i.value],p=l.value;return typeof d==typeof p&&d>=p}],"filter-id->=":[_r,[xr],(a,[i])=>{const l=a.id(),d=i.value;return typeof l==typeof d&&l>=d}],"filter-has":[_r,[xr],(a,[i])=>i.value in a.properties()],"filter-has-id":[_r,[],a=>a.id()!==null&&a.id()!==void 0],"filter-type-in":[_r,[To(wr)],(a,[i])=>i.value.indexOf(a.geometryType())>=0],"filter-id-in":[_r,[To(xr)],(a,[i])=>i.value.indexOf(a.id())>=0],"filter-in-small":[_r,[wr,To(xr)],(a,[i,l])=>l.value.indexOf(a.properties()[i.value])>=0],"filter-in-large":[_r,[wr,To(xr)],(a,[i,l])=>function(d,p,y,x){for(;y<=x;){const w=y+x>>1;if(p[w]===d)return!0;p[w]>d?x=w-1:y=w+1}return!1}(a.properties()[i.value],l.value,0,l.value.length-1)],all:{type:_r,overloads:[[[_r,_r],(a,[i,l])=>i.evaluate(a)&&l.evaluate(a)],[Po(_r),(a,i)=>{for(const l of i)if(!l.evaluate(a))return!1;return!0}]]},any:{type:_r,overloads:[[[_r,_r],(a,[i,l])=>i.evaluate(a)||l.evaluate(a)],[Po(_r),(a,i)=>{for(const l of i)if(l.evaluate(a))return!0;return!1}]]},"!":[_r,[_r],(a,[i])=>!i.evaluate(a)],"is-supported-script":[_r,[wr],(a,[i])=>{const l=a.globals&&a.globals.isSupportedScript;return!l||l(i.evaluate(a))}],upcase:[wr,[wr],(a,[i])=>i.evaluate(a).toUpperCase()],downcase:[wr,[wr],(a,[i])=>i.evaluate(a).toLowerCase()],concat:[wr,Po(xr),(a,i)=>i.map(l=>Ku(l.evaluate(a))).join("")],"resolved-locale":[wr,[uo],(a,[i])=>i.evaluate(a).resolvedLocale()]});var od=z_;function B_(a){return{result:"success",value:a}}function wl(a){return{result:"error",value:a}}function Sc(a){return a["property-type"]==="data-driven"}function jh(a){return!!a.expression&&a.expression.parameters.indexOf("zoom")>-1}function zh(a){return!!a.expression&&a.expression.interpolated}function Ir(a){return a instanceof Number?"number":a instanceof String?"string":a instanceof Boolean?"boolean":Array.isArray(a)?"array":a===null?"null":typeof a}function ad(a){return typeof a=="object"&&a!==null&&!Array.isArray(a)}function $_(a){return a}function Nh(a,i){const l=i.type==="color",d=a.stops&&typeof a.stops[0][0]=="object",p=d||!(d||a.property!==void 0),y=a.type||(zh(i)?"exponential":"interval");if(l&&((a=Qa({},a)).stops&&(a.stops=a.stops.map(C=>[C[0],Rn.parse(C[1])])),a.default=Rn.parse(a.default?a.default:i.default)),a.colorSpace&&a.colorSpace!=="rgb"&&!Fm[a.colorSpace])throw new Error(`Unknown color space: ${a.colorSpace}`);let x,w,P;if(y==="exponential")x=as;else if(y==="interval")x=Bh;else if(y==="categorical"){x=F_,w=Object.create(null);for(const C of a.stops)w[C[0]]=C[1];P=typeof a.stops[0][0]}else{if(y!=="identity")throw new Error(`Unknown function type "${y}"`);x=U_}if(d){const C={},j=[];for(let X=0;X<a.stops.length;X++){const K=a.stops[X],te=K[0].zoom;C[te]===void 0&&(C[te]={zoom:te,type:a.type,property:a.property,default:a.default,stops:[]},j.push(te)),C[te].stops.push([K[0].value,K[1]])}const $=[];for(const X of j)$.push([C[X].zoom,Nh(C[X],i)]);const G={name:"linear"};return{kind:"composite",interpolationType:G,interpolationFactor:xa.interpolationFactor.bind(void 0,G),zoomStops:$.map(X=>X[0]),evaluate:({zoom:X},K)=>as({stops:$,base:a.base},i,X).evaluate(X,K)}}if(p){const C=y==="exponential"?{name:"exponential",base:a.base!==void 0?a.base:1}:null;return{kind:"camera",interpolationType:C,interpolationFactor:xa.interpolationFactor.bind(void 0,C),zoomStops:a.stops.map(j=>j[0]),evaluate:({zoom:j})=>x(a,i,j,w,P)}}return{kind:"source",evaluate(C,j){const $=j&&j.properties?j.properties[a.property]:void 0;return $===void 0?Ec(a.default,i.default):x(a,i,$,w,P)}}}function Ec(a,i,l){return a!==void 0?a:i!==void 0?i:l!==void 0?l:void 0}function F_(a,i,l,d,p){return Ec(typeof l===p?d[l]:void 0,a.default,i.default)}function Bh(a,i,l){if(Ir(l)!=="number")return Ec(a.default,i.default);const d=a.stops.length;if(d===1||l<=a.stops[0][0])return a.stops[0][1];if(l>=a.stops[d-1][0])return a.stops[d-1][1];const p=Ph(a.stops.map(y=>y[0]),l);return a.stops[p][1]}function as(a,i,l){const d=a.base!==void 0?a.base:1;if(Ir(l)!=="number")return Ec(a.default,i.default);const p=a.stops.length;if(p===1||l<=a.stops[0][0])return a.stops[0][1];if(l>=a.stops[p-1][0])return a.stops[p-1][1];const y=Ph(a.stops.map(j=>j[0]),l),x=function(j,$,G,X){const K=X-G,te=j-G;return K===0?0:$===1?te/K:(Math.pow($,te)-1)/(Math.pow($,K)-1)}(l,d,a.stops[y][0],a.stops[y+1][0]),w=a.stops[y][1],P=a.stops[y+1][1];let C=ed[i.type]||$_;if(a.colorSpace&&a.colorSpace!=="rgb"){const j=Fm[a.colorSpace];C=($,G)=>j.reverse(j.interpolate(j.forward($),j.forward(G),x))}return typeof w.evaluate=="function"?{evaluate(...j){const $=w.evaluate.apply(void 0,j),G=P.evaluate.apply(void 0,j);if($!==void 0&&G!==void 0)return C($,G,x)}}:C(w,P,x)}function U_(a,i,l){return i.type==="color"?l=Rn.parse(l):i.type==="formatted"?l=Xi.fromString(l.toString()):i.type==="resolvedImage"?l=Ao.fromString(l.toString()):Ir(l)===i.type||i.type==="enum"&&i.values[l]||(l=void 0),Ec(l,a.default,i.default)}class $h{constructor(i,l){this.expression=i,this._warningHistory={},this._evaluator=new Pm,this._defaultValue=l?function(d){return d.type==="color"&&(ad(d.default)||Array.isArray(d.default))?new Rn(0,0,0,0):d.type==="color"?Rn.parse(d.default)||null:d.default===void 0?null:d.default}(l):null,this._enumValues=l&&l.type==="enum"?l.values:null}evaluateWithoutErrorHandling(i,l,d,p,y,x,w,P){return this._evaluator.globals=i,this._evaluator.feature=l,this._evaluator.featureState=d,this._evaluator.canonical=p||null,this._evaluator.availableImages=y||null,this._evaluator.formattedSection=x,this._evaluator.featureTileCoord=w||null,this._evaluator.featureDistanceData=P||null,this.expression.evaluate(this._evaluator)}evaluate(i,l,d,p,y,x,w,P){this._evaluator.globals=i,this._evaluator.feature=l||null,this._evaluator.featureState=d||null,this._evaluator.canonical=p||null,this._evaluator.availableImages=y||null,this._evaluator.formattedSection=x||null,this._evaluator.featureTileCoord=w||null,this._evaluator.featureDistanceData=P||null;try{const C=this.expression.evaluate(this._evaluator);if(C==null||typeof C=="number"&&C!=C)return this._defaultValue;if(this._enumValues&&!(C in this._enumValues))throw new yi(`Expected value to be one of ${Object.keys(this._enumValues).map(j=>JSON.stringify(j)).join(", ")}, but found ${JSON.stringify(C)} instead.`);return C}catch(C){return this._warningHistory[C.message]||(this._warningHistory[C.message]=!0,typeof console<"u"&&console.warn(C.message)),this._defaultValue}}}function Tc(a){return Array.isArray(a)&&a.length>0&&typeof a[0]=="string"&&a[0]in od}function Ac(a,i){const l=new Dm(od,[],i?function(p){const y={color:co,string:wr,number:Nt,enum:wr,boolean:_r,formatted:Gu,resolvedImage:yl};return p.type==="array"?To(y[p.value]||xr,p.length):y[p.type]}(i):void 0),d=l.parse(a,void 0,void 0,void 0,i&&i.type==="string"?{typeAnnotation:"coerce"}:void 0);return d?B_(new $h(d,i)):wl(l.errors)}class Xm{constructor(i,l){this.kind=i,this._styleExpression=l,this.isStateDependent=i!=="constant"&&!is(l.expression)}evaluateWithoutErrorHandling(i,l,d,p,y,x){return this._styleExpression.evaluateWithoutErrorHandling(i,l,d,p,y,x)}evaluate(i,l,d,p,y,x){return this._styleExpression.evaluate(i,l,d,p,y,x)}}class sd{constructor(i,l,d,p){this.kind=i,this.zoomStops=d,this._styleExpression=l,this.isStateDependent=i!=="camera"&&!is(l.expression),this.interpolationType=p}evaluateWithoutErrorHandling(i,l,d,p,y,x){return this._styleExpression.evaluateWithoutErrorHandling(i,l,d,p,y,x)}evaluate(i,l,d,p,y,x){return this._styleExpression.evaluate(i,l,d,p,y,x)}interpolationFactor(i,l,d){return this.interpolationType?xa.interpolationFactor(this.interpolationType,i,l,d):0}}function ld(a,i){if((a=Ac(a,i)).result==="error")return a;const l=a.value.expression,d=_c(l);if(!d&&!Sc(i))return wl([new va("","data expressions not supported")]);const p=xl(l,["zoom","pitch","distance-from-center"]);if(!p&&!jh(i))return wl([new va("","zoom expressions not supported")]);const y=Uh(l);return y||p?y instanceof va?wl([y]):y instanceof xa&&!zh(i)?wl([new va("",'"interpolate" expressions cannot be used with this property')]):B_(y?new sd(d?"camera":"composite",a.value,y.labels,y instanceof xa?y.interpolation:void 0):new Xm(d?"constant":"source",a.value)):wl([new va("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Fh{constructor(i,l){this._parameters=i,this._specification=l,Qa(this,Nh(this._parameters,this._specification))}static deserialize(i){return new Fh(i._parameters,i._specification)}static serialize(i){return{_parameters:i._parameters,_specification:i._specification}}}function Uh(a){let i=null;if(a instanceof O_)i=Uh(a.result);else if(a instanceof Vm){for(const l of a.args)if(i=Uh(l),i)break}else(a instanceof Lm||a instanceof xa)&&a.input instanceof rs&&a.input.name==="zoom"&&(i=a);return i instanceof va||a.eachChild(l=>{const d=Uh(l);d instanceof va?i=d:!i&&d?i=new va("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):i&&d&&i!==d&&(i=new va("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),i}class Bt{constructor(i,l,d,p){this.message=(i?`${i}: `:"")+d,p&&(this.identifier=p),l!=null&&l.__line__&&(this.line=l.__line__)}}function Ho(a){const i=a.key,l=a.value,d=a.valueSpec||{},p=a.objectElementValidators||{},y=a.style,x=a.styleSpec;let w=[];const P=Ir(l);if(P!=="object")return[new Bt(i,l,`object expected, ${P} found`)];for(const C in l){const j=C.split(".")[0];let $;p[j]?$=p[j]:d[j]?$=Ci:p["*"]?$=p["*"]:d["*"]&&($=Ci),$?w=w.concat($({key:(i&&`${i}.`)+C,value:l[C],valueSpec:d[j]||d["*"],style:y,styleSpec:x,object:l,objectKey:C},l)):w.push(new Bt(i,l[C],`unknown property "${C}"`))}for(const C in d)p[C]||d[C].required&&d[C].default===void 0&&l[C]===void 0&&w.push(new Bt(i,l,`missing required property "${C}"`));return w}function V_(a){const i=a.value,l=a.valueSpec,d=a.style,p=a.styleSpec,y=a.key,x=a.arrayElementValidator||Ci;if(Ir(i)!=="array")return[new Bt(y,i,`array expected, ${Ir(i)} found`)];if(l.length&&i.length!==l.length)return[new Bt(y,i,`array length ${l.length} expected, length ${i.length} found`)];if(l["min-length"]&&i.length<l["min-length"])return[new Bt(y,i,`array length at least ${l["min-length"]} expected, length ${i.length} found`)];let w={type:l.value,values:l.values,minimum:l.minimum,maximum:l.maximum,function:void 0};p.$version<7&&(w.function=l.function),Ir(l.value)==="object"&&(w=l.value);let P=[];for(let C=0;C<i.length;C++)P=P.concat(x({array:i,arrayIndex:C,value:i[C],valueSpec:w,style:d,styleSpec:p,key:`${y}[${C}]`}));return P}function cd(a){const i=a.key,l=a.value,d=a.valueSpec;let p=Ir(l);if(p==="number"&&l!=l&&(p="NaN"),p!=="number")return[new Bt(i,l,`number expected, ${p} found`)];if("minimum"in d){let y=d.minimum;if(Ir(d.minimum)==="array"&&(y=d.minimum[a.arrayIndex]),l<y)return[new Bt(i,l,`${l} is less than the minimum value ${y}`)]}if("maximum"in d){let y=d.maximum;if(Ir(d.maximum)==="array"&&(y=d.maximum[a.arrayIndex]),l>y)return[new Bt(i,l,`${l} is greater than the maximum value ${y}`)]}return[]}function ud(a){const i=a.valueSpec,l=Bn(a.value.type);let d,p,y,x={};const w=l!=="categorical"&&a.value.property===void 0,P=!w,C=Ir(a.value.stops)==="array"&&Ir(a.value.stops[0])==="array"&&Ir(a.value.stops[0][0])==="object",j=Ho({key:a.key,value:a.value,valueSpec:a.styleSpec.function,style:a.style,styleSpec:a.styleSpec,objectElementValidators:{stops:function(X){if(l==="identity")return[new Bt(X.key,X.value,'identity function may not have a "stops" property')];let K=[];const te=X.value;return K=K.concat(V_({key:X.key,value:te,valueSpec:X.valueSpec,style:X.style,styleSpec:X.styleSpec,arrayElementValidator:$})),Ir(te)==="array"&&te.length===0&&K.push(new Bt(X.key,te,"array must have at least one stop")),K},default:function(X){return Ci({key:X.key,value:X.value,valueSpec:i,style:X.style,styleSpec:X.styleSpec})}}});return l==="identity"&&w&&j.push(new Bt(a.key,a.value,'missing required property "property"')),l==="identity"||a.value.stops||j.push(new Bt(a.key,a.value,'missing required property "stops"')),l==="exponential"&&a.valueSpec.expression&&!zh(a.valueSpec)&&j.push(new Bt(a.key,a.value,"exponential functions not supported")),a.styleSpec.$version>=8&&(P&&!Sc(a.valueSpec)?j.push(new Bt(a.key,a.value,"property functions not supported")):w&&!jh(a.valueSpec)&&j.push(new Bt(a.key,a.value,"zoom functions not supported"))),l!=="categorical"&&!C||a.value.property!==void 0||j.push(new Bt(a.key,a.value,'"property" property is required')),j;function $(X){let K=[];const te=X.value,se=X.key;if(Ir(te)!=="array")return[new Bt(se,te,`array expected, ${Ir(te)} found`)];if(te.length!==2)return[new Bt(se,te,`array length 2 expected, length ${te.length} found`)];if(C){if(Ir(te[0])!=="object")return[new Bt(se,te,`object expected, ${Ir(te[0])} found`)];if(te[0].zoom===void 0)return[new Bt(se,te,"object stop key must have zoom")];if(te[0].value===void 0)return[new Bt(se,te,"object stop key must have value")];const me=Bn(te[0].zoom);if(typeof me!="number")return[new Bt(se,te[0].zoom,"stop zoom values must be numbers")];if(y&&y>me)return[new Bt(se,te[0].zoom,"stop zoom values must appear in ascending order")];me!==y&&(y=me,p=void 0,x={}),K=K.concat(Ho({key:`${se}[0]`,value:te[0],valueSpec:{zoom:{}},style:X.style,styleSpec:X.styleSpec,objectElementValidators:{zoom:cd,value:G}}))}else K=K.concat(G({key:`${se}[0]`,value:te[0],valueSpec:{},style:X.style,styleSpec:X.styleSpec},te));return Tc(ci(te[1]))?K.concat([new Bt(`${se}[1]`,te[1],"expressions are not allowed in function stops.")]):K.concat(Ci({key:`${se}[1]`,value:te[1],valueSpec:i,style:X.style,styleSpec:X.styleSpec}))}function G(X,K){const te=Ir(X.value),se=Bn(X.value),me=X.value!==null?X.value:K;if(d){if(te!==d)return[new Bt(X.key,me,`${te} stop domain type must match previous stop domain type ${d}`)]}else d=te;if(te!=="number"&&te!=="string"&&te!=="boolean"&&typeof se!="number"&&typeof se!="string"&&typeof se!="boolean")return[new Bt(X.key,me,"stop domain value must be a number, string, or boolean")];if(te!=="number"&&l!=="categorical"){let Ae=`number expected, ${te} found`;return Sc(i)&&l===void 0&&(Ae+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Bt(X.key,me,Ae)]}return l!=="categorical"||te!=="number"||typeof se=="number"&&isFinite(se)&&Math.floor(se)===se?l!=="categorical"&&te==="number"&&typeof se=="number"&&typeof p=="number"&&p!==void 0&&se<p?[new Bt(X.key,me,"stop domain values must appear in ascending order")]:(p=se,l==="categorical"&&se in x?[new Bt(X.key,me,"stop domain values must be unique")]:(x[se]=!0,[])):[new Bt(X.key,me,`integer expected, found ${String(se)}`)]}}function ui(a){const i=(a.expressionContext==="property"?ld:Ac)(ci(a.value),a.valueSpec);if(i.result==="error")return i.value.map(d=>new Bt(`${a.key}${d.key}`,a.value,d.message));const l=i.value.expression||i.value._styleExpression.expression;if(a.expressionContext==="property"&&a.propertyKey==="text-font"&&!l.outputDefined())return[new Bt(a.key,a.value,`Invalid data expression for "${a.propertyKey}". Output values must be contained as literals within the expression.`)];if(a.expressionContext==="property"&&a.propertyType==="layout"&&!is(l))return[new Bt(a.key,a.value,'"feature-state" data expressions are not supported with layout properties.')];if(a.expressionContext==="filter")return dd(l,a);if(a.expressionContext&&a.expressionContext.indexOf("cluster")===0){if(!xl(l,["zoom","feature-state"]))return[new Bt(a.key,a.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(a.expressionContext==="cluster-initial"&&!_c(l))return[new Bt(a.key,a.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function dd(a,i){const l=new Set(["zoom","feature-state","pitch","distance-from-center"]);if(i.valueSpec&&i.valueSpec.expression)for(const p of i.valueSpec.expression.parameters)l.delete(p);if(l.size===0)return[];const d=[];return a instanceof rs&&l.has(a.name)?[new Bt(i.key,i.value,`["${a.name}"] expression is not supported in a filter for a ${i.object.type} layer with id: ${i.object.id}`)]:(a.eachChild(p=>{d.push(...dd(p,i))}),d)}function Vh(a){const i=a.key,l=a.value,d=a.valueSpec,p=[];return Array.isArray(d.values)?d.values.indexOf(Bn(l))===-1&&p.push(new Bt(i,l,`expected one of [${d.values.join(", ")}], ${JSON.stringify(l)} found`)):Object.keys(d.values).indexOf(Bn(l))===-1&&p.push(new Bt(i,l,`expected one of [${Object.keys(d.values).join(", ")}], ${JSON.stringify(l)} found`)),p}function Zm(a){if(a===!0||a===!1)return!0;if(!Array.isArray(a)||a.length===0)return!1;switch(a[0]){case"has":return a.length>=2&&a[1]!=="$id"&&a[1]!=="$type";case"in":return a.length>=3&&(typeof a[1]!="string"||Array.isArray(a[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return a.length!==3||Array.isArray(a[1])||Array.isArray(a[2]);case"any":case"all":for(const i of a.slice(1))if(!Zm(i)&&typeof i!="boolean")return!1;return!0;default:return!0}}function Gh(a,i="fill"){if(a==null)return{filter:()=>!0,needGeometry:!1,needFeature:!1};Zm(a)||(a=Cc(a));const l=a;let d=!0;try{d=function(C){if(!Pc(C))return C;let j=ci(C);return Wh(j),j=G_(j),j}(l)}catch{console.warn(`Failed to extract static filter. Filter will continue working, but at higher memory usage and slower framerate.
This is most likely a bug, please report this via https://github.com/mapbox/mapbox-gl-js/issues/new?assignees=&labels=&template=Bug_report.md
and paste the contents of this message in the report.
Thank you!
Filter Expression:
${JSON.stringify(l,null,2)}
        `)}const p=it[`filter_${i}`],y=Ac(d,p);let x=null;if(y.result==="error")throw new Error(y.value.map(C=>`${C.key}: ${C.message}`).join(", "));x=(C,j,$)=>y.value.evaluate(C,j,{},$);let w=null,P=null;if(d!==l){const C=Ac(l,p);if(C.result==="error")throw new Error(C.value.map(j=>`${j.key}: ${j.message}`).join(", "));w=(j,$,G,X,K)=>C.value.evaluate(j,$,{},G,void 0,void 0,X,K),P=!_c(C.value.expression)}return{filter:x,dynamicFilter:w||void 0,needGeometry:W_(d),needFeature:!!P}}function G_(a){if(!Array.isArray(a))return a;const i=function(l){if(Km.has(l[0])){for(let d=1;d<l.length;d++)if(Pc(l[d]))return!0}return l}(a);return i===!0?i:i.map(l=>G_(l))}function Wh(a){let i=!1;const l=[];if(a[0]==="case"){for(let d=1;d<a.length-1;d+=2)i=i||Pc(a[d]),l.push(a[d+1]);l.push(a[a.length-1])}else if(a[0]==="match"){i=i||Pc(a[1]);for(let d=2;d<a.length-1;d+=2)l.push(a[d+1]);l.push(a[a.length-1])}else if(a[0]==="step"){i=i||Pc(a[1]);for(let d=1;d<a.length-1;d+=2)l.push(a[d+1])}i&&(a.length=0,a.push("any",...l));for(let d=1;d<a.length;d++)Wh(a[d])}function Pc(a){if(!Array.isArray(a))return!1;if((i=a[0])==="pitch"||i==="distance-from-center")return!0;var i;for(let l=1;l<a.length;l++)if(Pc(a[l]))return!0;return!1}const Km=new Set(["in","==","!=",">",">=","<","<=","to-boolean"]);function MS(a,i){return a<i?-1:a>i?1:0}function W_(a){if(!Array.isArray(a))return!1;if(a[0]==="within")return!0;for(let i=1;i<a.length;i++)if(W_(a[i]))return!0;return!1}function Cc(a){if(!a)return!0;const i=a[0];return a.length<=1?i!=="any":i==="=="?Ym(a[1],a[2],"=="):i==="!="?qh(Ym(a[1],a[2],"==")):i==="<"||i===">"||i==="<="||i===">="?Ym(a[1],a[2],i):i==="any"?(l=a.slice(1),["any"].concat(l.map(Cc))):i==="all"?["all"].concat(a.slice(1).map(Cc)):i==="none"?["all"].concat(a.slice(1).map(Cc).map(qh)):i==="in"?Jm(a[1],a.slice(2)):i==="!in"?qh(Jm(a[1],a.slice(2))):i==="has"?Qm(a[1]):i==="!has"?qh(Qm(a[1])):i!=="within"||a;var l}function Ym(a,i,l){switch(a){case"$type":return[`filter-type-${l}`,i];case"$id":return[`filter-id-${l}`,i];default:return[`filter-${l}`,a,i]}}function Jm(a,i){if(i.length===0)return!1;switch(a){case"$type":return["filter-type-in",["literal",i]];case"$id":return["filter-id-in",["literal",i]];default:return i.length>200&&!i.some(l=>typeof l!=typeof i[0])?["filter-in-large",a,["literal",i.sort(MS)]]:["filter-in-small",a,["literal",i]]}}function Qm(a){switch(a){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",a]}}function qh(a){return["!",a]}function hd(a){return Zm(ci(a.value))?ui(Qa({},a,{expressionContext:"filter",valueSpec:a.styleSpec[`filter_${a.layerType||"fill"}`]})):fd(a)}function fd(a){const i=a.value,l=a.key;if(Ir(i)!=="array")return[new Bt(l,i,`array expected, ${Ir(i)} found`)];const d=a.styleSpec;let p,y=[];if(i.length<1)return[new Bt(l,i,"filter array must have at least 1 element")];switch(y=y.concat(Vh({key:`${l}[0]`,value:i[0],valueSpec:d.filter_operator,style:a.style,styleSpec:a.styleSpec})),Bn(i[0])){case"<":case"<=":case">":case">=":i.length>=2&&Bn(i[1])==="$type"&&y.push(new Bt(l,i,`"$type" cannot be use with operator "${i[0]}"`));case"==":case"!=":i.length!==3&&y.push(new Bt(l,i,`filter array for operator "${i[0]}" must have 3 elements`));case"in":case"!in":i.length>=2&&(p=Ir(i[1]),p!=="string"&&y.push(new Bt(`${l}[1]`,i[1],`string expected, ${p} found`)));for(let x=2;x<i.length;x++)p=Ir(i[x]),Bn(i[1])==="$type"?y=y.concat(Vh({key:`${l}[${x}]`,value:i[x],valueSpec:d.geometry_type,style:a.style,styleSpec:a.styleSpec})):p!=="string"&&p!=="number"&&p!=="boolean"&&y.push(new Bt(`${l}[${x}]`,i[x],`string, number, or boolean expected, ${p} found`));break;case"any":case"all":case"none":for(let x=1;x<i.length;x++)y=y.concat(fd({key:`${l}[${x}]`,value:i[x],style:a.style,styleSpec:a.styleSpec}));break;case"has":case"!has":p=Ir(i[1]),i.length!==2?y.push(new Bt(l,i,`filter array for "${i[0]}" operator must have 2 elements`)):p!=="string"&&y.push(new Bt(`${l}[1]`,i[1],`string expected, ${p} found`));break;case"within":p=Ir(i[1]),i.length!==2?y.push(new Bt(l,i,`filter array for "${i[0]}" operator must have 2 elements`)):p!=="object"&&y.push(new Bt(`${l}[1]`,i[1],`object expected, ${p} found`))}return y}function eg(a,i){const l=a.key,d=a.style,p=a.styleSpec,y=a.value,x=a.objectKey,w=p[`${i}_${a.layerType}`];if(!w)return[];const P=x.match(/^(.*)-transition$/);if(i==="paint"&&P&&w[P[1]]&&w[P[1]].transition)return Ci({key:l,value:y,valueSpec:p.transition,style:d,styleSpec:p});const C=a.valueSpec||w[x];if(!C)return[new Bt(l,y,`unknown property "${x}"`)];let j;if(Ir(y)==="string"&&Sc(C)&&!C.tokens&&(j=/^{([^}]+)}$/.exec(y))){const G=`\`{ "type": "identity", "property": ${j?JSON.stringify(j[1]):'"_"'} }\``;return[new Bt(l,y,`"${x}" does not support interpolation syntax
Use an identity property function instead: ${G}.`)]}const $=[];return a.layerType==="symbol"&&(x==="text-field"&&d&&!d.glyphs&&$.push(new Bt(l,y,'use of "text-field" requires a style "glyphs" property')),x==="text-font"&&ad(ci(y))&&Bn(y.type)==="identity"&&$.push(new Bt(l,y,'"text-font" does not support identity functions'))),$.concat(Ci({key:a.key,value:y,valueSpec:C,style:d,styleSpec:p,expressionContext:"property",propertyType:i,propertyKey:x}))}function q_(a){return eg(a,"paint")}function tg(a){return eg(a,"layout")}function H_(a){let i=[];const l=a.value,d=a.key,p=a.style,y=a.styleSpec;l.type||l.ref||i.push(new Bt(d,l,'either "type" or "ref" is required'));let x=Bn(l.type);const w=Bn(l.ref);if(l.id){const P=Bn(l.id);for(let C=0;C<a.arrayIndex;C++){const j=p.layers[C];Bn(j.id)===P&&i.push(new Bt(d,l.id,`duplicate layer id "${l.id}", previously used at line ${j.id.__line__}`))}}if("ref"in l){let P;["type","source","source-layer","filter","layout"].forEach(C=>{C in l&&i.push(new Bt(d,l[C],`"${C}" is prohibited for ref layers`))}),p.layers.forEach(C=>{Bn(C.id)===w&&(P=C)}),P?P.ref?i.push(new Bt(d,l.ref,"ref cannot reference another ref layer")):x=Bn(P.type):typeof w=="string"&&i.push(new Bt(d,l.ref,`ref layer "${w}" not found`))}else if(x!=="background"&&x!=="sky")if(l.source){const P=p.sources&&p.sources[l.source],C=P&&Bn(P.type);P?C==="vector"&&x==="raster"?i.push(new Bt(d,l.source,`layer "${l.id}" requires a raster source`)):C==="raster"&&x!=="raster"?i.push(new Bt(d,l.source,`layer "${l.id}" requires a vector source`)):C!=="vector"||l["source-layer"]?C==="raster-dem"&&x!=="hillshade"?i.push(new Bt(d,l.source,"raster-dem source can only be used with layer type 'hillshade'.")):x!=="line"||!l.paint||!l.paint["line-gradient"]&&!l.paint["line-trim-offset"]||C==="geojson"&&P.lineMetrics||i.push(new Bt(d,l,`layer "${l.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):i.push(new Bt(d,l,`layer "${l.id}" must specify a "source-layer"`)):i.push(new Bt(d,l.source,`source "${l.source}" not found`))}else i.push(new Bt(d,l,'missing required property "source"'));return i=i.concat(Ho({key:d,value:l,valueSpec:y.layer,style:a.style,styleSpec:a.styleSpec,objectElementValidators:{"*":()=>[],type:()=>Ci({key:`${d}.type`,value:l.type,valueSpec:y.layer.type,style:a.style,styleSpec:a.styleSpec,object:l,objectKey:"type"}),filter:P=>hd(Qa({layerType:x},P)),layout:P=>Ho({layer:l,key:P.key,value:P.value,valueSpec:{},style:P.style,styleSpec:P.styleSpec,objectElementValidators:{"*":C=>tg(Qa({layerType:x},C))}}),paint:P=>Ho({layer:l,key:P.key,value:P.value,valueSpec:{},style:P.style,styleSpec:P.styleSpec,objectElementValidators:{"*":C=>q_(Qa({layerType:x},C))}})}})),i}function Ns(a){const i=a.value,l=a.key,d=Ir(i);return d!=="string"?[new Bt(l,i,`string expected, ${d} found`)]:[]}const X_={promoteId:function({key:a,value:i}){if(Ir(i)==="string")return Ns({key:a,value:i});{const l=[];for(const d in i)l.push(...Ns({key:`${a}.${d}`,value:i[d]}));return l}}};function Z_(a){const i=a.value,l=a.key,d=a.styleSpec,p=a.style;if(!i.type)return[new Bt(l,i,'"type" is required')];const y=Bn(i.type);let x;switch(y){case"vector":case"raster":case"raster-dem":return x=Ho({key:l,value:i,valueSpec:d[`source_${y.replace("-","_")}`],style:a.style,styleSpec:d,objectElementValidators:X_}),x;case"geojson":if(x=Ho({key:l,value:i,valueSpec:d.source_geojson,style:p,styleSpec:d,objectElementValidators:X_}),i.cluster)for(const w in i.clusterProperties){const[P,C]=i.clusterProperties[w],j=typeof P=="string"?[P,["accumulated"],["get",w]]:P;x.push(...ui({key:`${l}.${w}.map`,value:C,expressionContext:"cluster-map"})),x.push(...ui({key:`${l}.${w}.reduce`,value:j,expressionContext:"cluster-reduce"}))}return x;case"video":return Ho({key:l,value:i,valueSpec:d.source_video,style:p,styleSpec:d});case"image":return Ho({key:l,value:i,valueSpec:d.source_image,style:p,styleSpec:d});case"canvas":return[new Bt(l,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Vh({key:`${l}.type`,value:i.type,valueSpec:{values:IS(d)},style:p,styleSpec:d})}}function IS(a){return a.source.reduce((i,l)=>{const d=a[l];return d.type.type==="enum"&&(i=i.concat(Object.keys(d.type.values))),i},[])}function K_(a){const i=a.value,l=a.styleSpec,d=l.light,p=a.style;let y=[];const x=Ir(i);if(i===void 0)return y;if(x!=="object")return y=y.concat([new Bt("light",i,`object expected, ${x} found`)]),y;for(const w in i){const P=w.match(/^(.*)-transition$/);y=y.concat(P&&d[P[1]]&&d[P[1]].transition?Ci({key:w,value:i[w],valueSpec:l.transition,style:p,styleSpec:l}):d[w]?Ci({key:w,value:i[w],valueSpec:d[w],style:p,styleSpec:l}):[new Bt(w,i[w],`unknown property "${w}"`)])}return y}function rg(a){const i=a.value,l=a.key,d=a.style,p=a.styleSpec,y=p.terrain;let x=[];const w=Ir(i);if(i===void 0)return x;if(w!=="object")return x=x.concat([new Bt("terrain",i,`object expected, ${w} found`)]),x;for(const P in i){const C=P.match(/^(.*)-transition$/);x=x.concat(C&&y[C[1]]&&y[C[1]].transition?Ci({key:P,value:i[P],valueSpec:p.transition,style:d,styleSpec:p}):y[P]?Ci({key:P,value:i[P],valueSpec:y[P],style:d,styleSpec:p}):[new Bt(P,i[P],`unknown property "${P}"`)])}if(i.source){const P=d.sources&&d.sources[i.source],C=P&&Bn(P.type);P?C!=="raster-dem"&&x.push(new Bt(l,i.source,`terrain cannot be used with a source of type ${String(C)}, it only be used with a "raster-dem" source type`)):x.push(new Bt(l,i.source,`source "${i.source}" not found`))}else x.push(new Bt(l,i,'terrain is missing required property "source"'));return x}function Y_(a){const i=a.value,l=a.style,d=a.styleSpec,p=d.fog;let y=[];const x=Ir(i);if(i===void 0)return y;if(x!=="object")return y=y.concat([new Bt("fog",i,`object expected, ${x} found`)]),y;for(const w in i){const P=w.match(/^(.*)-transition$/);y=y.concat(P&&p[P[1]]&&p[P[1]].transition?Ci({key:w,value:i[w],valueSpec:d.transition,style:l,styleSpec:d}):p[w]?Ci({key:w,value:i[w],valueSpec:p[w],style:l,styleSpec:d}):[new Bt(w,i[w],`unknown property "${w}"`)])}return y}const J_={"*":()=>[],array:V_,boolean:function(a){const i=a.value,l=a.key,d=Ir(i);return d!=="boolean"?[new Bt(l,i,`boolean expected, ${d} found`)]:[]},number:cd,color:function(a){const i=a.key,l=a.value,d=Ir(l);return d!=="string"?[new Bt(i,l,`color expected, ${d} found`)]:xm(l)===null?[new Bt(i,l,`color expected, "${l}" found`)]:[]},enum:Vh,filter:hd,function:ud,layer:H_,object:Ho,source:Z_,light:K_,terrain:rg,fog:Y_,string:Ns,formatted:function(a){return Ns(a).length===0?[]:ui(a)},resolvedImage:function(a){return Ns(a).length===0?[]:ui(a)},projection:function(a){const i=a.value,l=a.styleSpec,d=l.projection,p=a.style;let y=[];const x=Ir(i);if(x==="object")for(const w in i)y=y.concat(Ci({key:w,value:i[w],valueSpec:d[w],style:p,styleSpec:l}));else x!=="string"&&(y=y.concat([new Bt("projection",i,`object or string expected, ${x} found`)]));return y}};function Ci(a){const i=a.value,l=a.valueSpec,d=a.styleSpec;return l.expression&&ad(Bn(i))?ud(a):l.expression&&Tc(ci(i))?ui(a):l.type&&J_[l.type]?J_[l.type](a):Ho(Qa({},a,{valueSpec:l.type?d[l.type]:l}))}function OS(a){const i=a.value,l=a.key,d=Ns(a);return d.length||(i.indexOf("{fontstack}")===-1&&d.push(new Bt(l,i,'"glyphs" url must include a "{fontstack}" token')),i.indexOf("{range}")===-1&&d.push(new Bt(l,i,'"glyphs" url must include a "{range}" token'))),d}function Q_(a,i=it){return Co(Ci({key:"",value:a,valueSpec:i.$root,styleSpec:i,style:a,objectElementValidators:{glyphs:OS,"*":()=>[]}}))}const kS=a=>Co(q_(a)),DS=a=>Co(tg(a));function Co(a){return a.slice().sort((i,l)=>i.line&&l.line?i.line-l.line:0)}function ex(a,i){let l=!1;if(i&&i.length)for(const d of i)a.fire(new Ja(new Error(d.message))),l=!0;return l}var RS=ba,Xo=3;function ba(a,i,l){var d=this.cells=[];if(a instanceof ArrayBuffer){this.arrayBuffer=a;var p=new Int32Array(this.arrayBuffer);a=p[0],this.d=(i=p[1])+2*(l=p[2]);for(var y=0;y<this.d*this.d;y++){var x=p[Xo+y],w=p[Xo+y+1];d.push(x===w?null:p.subarray(x,w))}var P=p[Xo+d.length+1];this.keys=p.subarray(p[Xo+d.length],P),this.bboxes=p.subarray(P),this.insert=this._insertReadonly}else{this.d=i+2*l;for(var C=0;C<this.d*this.d;C++)d.push([]);this.keys=[],this.bboxes=[]}this.n=i,this.extent=a,this.padding=l,this.scale=i/a,this.uid=0;var j=l/i*a;this.min=-j,this.max=a+j}ba.prototype.insert=function(a,i,l,d,p){this._forEachCell(i,l,d,p,this._insertCell,this.uid++),this.keys.push(a),this.bboxes.push(i),this.bboxes.push(l),this.bboxes.push(d),this.bboxes.push(p)},ba.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},ba.prototype._insertCell=function(a,i,l,d,p,y){this.cells[p].push(y)},ba.prototype.query=function(a,i,l,d,p){var y=this.min,x=this.max;if(a<=y&&i<=y&&x<=l&&x<=d&&!p)return Array.prototype.slice.call(this.keys);var w=[];return this._forEachCell(a,i,l,d,this._queryCell,w,{},p),w},ba.prototype._queryCell=function(a,i,l,d,p,y,x,w){var P=this.cells[p];if(P!==null)for(var C=this.keys,j=this.bboxes,$=0;$<P.length;$++){var G=P[$];if(x[G]===void 0){var X=4*G;(w?w(j[X+0],j[X+1],j[X+2],j[X+3]):a<=j[X+2]&&i<=j[X+3]&&l>=j[X+0]&&d>=j[X+1])?(x[G]=!0,y.push(C[G])):x[G]=!1}}},ba.prototype._forEachCell=function(a,i,l,d,p,y,x,w){for(var P=this._convertToCellCoord(a),C=this._convertToCellCoord(i),j=this._convertToCellCoord(l),$=this._convertToCellCoord(d),G=P;G<=j;G++)for(var X=C;X<=$;X++){var K=this.d*X+G;if((!w||w(this._convertFromCellCoord(G),this._convertFromCellCoord(X),this._convertFromCellCoord(G+1),this._convertFromCellCoord(X+1)))&&p.call(this,a,i,l,d,K,y,x,w))return}},ba.prototype._convertFromCellCoord=function(a){return(a-this.padding)/this.scale},ba.prototype._convertToCellCoord=function(a){return Math.max(0,Math.min(this.d-1,Math.floor(a*this.scale)+this.padding))},ba.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var a=this.cells,i=Xo+this.cells.length+1+1,l=0,d=0;d<this.cells.length;d++)l+=this.cells[d].length;var p=new Int32Array(i+l+this.keys.length+this.bboxes.length);p[0]=this.extent,p[1]=this.n,p[2]=this.padding;for(var y=i,x=0;x<a.length;x++){var w=a[x];p[Xo+x]=y,p.set(w,y),y+=w.length}return p[Xo+a.length]=y,p.set(this.keys,y),p[Xo+a.length+1]=y+=this.keys.length,p.set(this.bboxes,y),y+=this.bboxes.length,p.buffer};var Sl=U(RS);const Hh={};function $t(a,i,l={}){Object.defineProperty(a,"_classRegistryKey",{value:i,writeable:!1}),Hh[i]={klass:a,omit:l.omit||[]}}$t(Object,"Object"),Sl.serialize=function(a,i){const l=a.toArrayBuffer();return i&&i.push(l),{buffer:l}},Sl.deserialize=function(a){return new Sl(a.buffer)},Object.defineProperty(Sl,"name",{value:"Grid"}),$t(Sl,"Grid"),$t(Rn,"Color"),$t(Error,"Error"),$t(Eo,"AJAXError"),$t(Ao,"ResolvedImage"),$t(Fh,"StylePropertyFunction"),$t($h,"StyleExpression",{omit:["_evaluator"]}),$t(sd,"ZoomDependentExpression"),$t(Xm,"ZoomConstantExpression"),$t(rs,"CompoundExpression",{omit:["_evaluate"]});for(const a in od)Hh[od[a]._classRegistryKey]||$t(od[a],`Expression${a}`);function ng(a){return a&&typeof ArrayBuffer<"u"&&(a instanceof ArrayBuffer||a.constructor&&a.constructor.name==="ArrayBuffer")}function ig(a){return _.ImageBitmap&&a instanceof _.ImageBitmap}function Mc(a,i){if(a==null||typeof a=="boolean"||typeof a=="number"||typeof a=="string"||a instanceof Boolean||a instanceof Number||a instanceof String||a instanceof Date||a instanceof RegExp)return a;if(ng(a)||ig(a))return i&&i.push(a),a;if(ArrayBuffer.isView(a)){const l=a;return i&&i.push(l.buffer),l}if(a instanceof _.ImageData)return i&&i.push(a.data.buffer),a;if(Array.isArray(a)){const l=[];for(const d of a)l.push(Mc(d,i));return l}if(typeof a=="object"){const l=a.constructor,d=l._classRegistryKey;if(!d)throw new Error(`can't serialize object of unregistered class ${d}`);const p=l.serialize?l.serialize(a,i):{};if(!l.serialize){for(const y in a)a.hasOwnProperty(y)&&(Hh[d].omit.indexOf(y)>=0||(p[y]=Mc(a[y],i)));a instanceof Error&&(p.message=a.message)}if(p.$name)throw new Error("$name property is reserved for worker serialization logic.");return d!=="Object"&&(p.$name=d),p}throw new Error("can't serialize object of type "+typeof a)}function El(a){if(a==null||typeof a=="boolean"||typeof a=="number"||typeof a=="string"||a instanceof Boolean||a instanceof Number||a instanceof String||a instanceof Date||a instanceof RegExp||ng(a)||ig(a)||ArrayBuffer.isView(a)||a instanceof _.ImageData)return a;if(Array.isArray(a))return a.map(El);if(typeof a=="object"){const i=a.$name||"Object",{klass:l}=Hh[i];if(!l)throw new Error(`can't deserialize unregistered class ${i}`);if(l.deserialize)return l.deserialize(a);const d=Object.create(l.prototype);for(const p of Object.keys(a))p!=="$name"&&(d[p]=El(a[p]));return d}throw new Error("can't deserialize object of type "+typeof a)}const jt={"Latin-1 Supplement":a=>a>=128&&a<=255,Arabic:a=>a>=1536&&a<=1791,"Arabic Supplement":a=>a>=1872&&a<=1919,"Arabic Extended-A":a=>a>=2208&&a<=2303,"Hangul Jamo":a=>a>=4352&&a<=4607,"Unified Canadian Aboriginal Syllabics":a=>a>=5120&&a<=5759,Khmer:a=>a>=6016&&a<=6143,"Unified Canadian Aboriginal Syllabics Extended":a=>a>=6320&&a<=6399,"General Punctuation":a=>a>=8192&&a<=8303,"Letterlike Symbols":a=>a>=8448&&a<=8527,"Number Forms":a=>a>=8528&&a<=8591,"Miscellaneous Technical":a=>a>=8960&&a<=9215,"Control Pictures":a=>a>=9216&&a<=9279,"Optical Character Recognition":a=>a>=9280&&a<=9311,"Enclosed Alphanumerics":a=>a>=9312&&a<=9471,"Geometric Shapes":a=>a>=9632&&a<=9727,"Miscellaneous Symbols":a=>a>=9728&&a<=9983,"Miscellaneous Symbols and Arrows":a=>a>=11008&&a<=11263,"CJK Radicals Supplement":a=>a>=11904&&a<=12031,"Kangxi Radicals":a=>a>=12032&&a<=12255,"Ideographic Description Characters":a=>a>=12272&&a<=12287,"CJK Symbols and Punctuation":a=>a>=12288&&a<=12351,Hiragana:a=>a>=12352&&a<=12447,Katakana:a=>a>=12448&&a<=12543,Bopomofo:a=>a>=12544&&a<=12591,"Hangul Compatibility Jamo":a=>a>=12592&&a<=12687,Kanbun:a=>a>=12688&&a<=12703,"Bopomofo Extended":a=>a>=12704&&a<=12735,"CJK Strokes":a=>a>=12736&&a<=12783,"Katakana Phonetic Extensions":a=>a>=12784&&a<=12799,"Enclosed CJK Letters and Months":a=>a>=12800&&a<=13055,"CJK Compatibility":a=>a>=13056&&a<=13311,"CJK Unified Ideographs Extension A":a=>a>=13312&&a<=19903,"Yijing Hexagram Symbols":a=>a>=19904&&a<=19967,"CJK Unified Ideographs":a=>a>=19968&&a<=40959,"Yi Syllables":a=>a>=40960&&a<=42127,"Yi Radicals":a=>a>=42128&&a<=42191,"Hangul Jamo Extended-A":a=>a>=43360&&a<=43391,"Hangul Syllables":a=>a>=44032&&a<=55215,"Hangul Jamo Extended-B":a=>a>=55216&&a<=55295,"Private Use Area":a=>a>=57344&&a<=63743,"CJK Compatibility Ideographs":a=>a>=63744&&a<=64255,"Arabic Presentation Forms-A":a=>a>=64336&&a<=65023,"Vertical Forms":a=>a>=65040&&a<=65055,"CJK Compatibility Forms":a=>a>=65072&&a<=65103,"Small Form Variants":a=>a>=65104&&a<=65135,"Arabic Presentation Forms-B":a=>a>=65136&&a<=65279,"Halfwidth and Fullwidth Forms":a=>a>=65280&&a<=65519};function og(a){for(const i of a)if(ag(i.charCodeAt(0)))return!0;return!1}function LS(a){for(const i of a)if(!tx(i.charCodeAt(0)))return!1;return!0}function tx(a){return!(jt.Arabic(a)||jt["Arabic Supplement"](a)||jt["Arabic Extended-A"](a)||jt["Arabic Presentation Forms-A"](a)||jt["Arabic Presentation Forms-B"](a))}function ag(a){return!(a!==746&&a!==747&&(a<4352||!(jt["Bopomofo Extended"](a)||jt.Bopomofo(a)||jt["CJK Compatibility Forms"](a)&&!(a>=65097&&a<=65103)||jt["CJK Compatibility Ideographs"](a)||jt["CJK Compatibility"](a)||jt["CJK Radicals Supplement"](a)||jt["CJK Strokes"](a)||!(!jt["CJK Symbols and Punctuation"](a)||a>=12296&&a<=12305||a>=12308&&a<=12319||a===12336)||jt["CJK Unified Ideographs Extension A"](a)||jt["CJK Unified Ideographs"](a)||jt["Enclosed CJK Letters and Months"](a)||jt["Hangul Compatibility Jamo"](a)||jt["Hangul Jamo Extended-A"](a)||jt["Hangul Jamo Extended-B"](a)||jt["Hangul Jamo"](a)||jt["Hangul Syllables"](a)||jt.Hiragana(a)||jt["Ideographic Description Characters"](a)||jt.Kanbun(a)||jt["Kangxi Radicals"](a)||jt["Katakana Phonetic Extensions"](a)||jt.Katakana(a)&&a!==12540||!(!jt["Halfwidth and Fullwidth Forms"](a)||a===65288||a===65289||a===65293||a>=65306&&a<=65310||a===65339||a===65341||a===65343||a>=65371&&a<=65503||a===65507||a>=65512&&a<=65519)||!(!jt["Small Form Variants"](a)||a>=65112&&a<=65118||a>=65123&&a<=65126)||jt["Unified Canadian Aboriginal Syllabics"](a)||jt["Unified Canadian Aboriginal Syllabics Extended"](a)||jt["Vertical Forms"](a)||jt["Yijing Hexagram Symbols"](a)||jt["Yi Syllables"](a)||jt["Yi Radicals"](a))))}function rx(a){return!(ag(a)||function(i){return!!(jt["Latin-1 Supplement"](i)&&(i===167||i===169||i===174||i===177||i===188||i===189||i===190||i===215||i===247)||jt["General Punctuation"](i)&&(i===8214||i===8224||i===8225||i===8240||i===8241||i===8251||i===8252||i===8258||i===8263||i===8264||i===8265||i===8273)||jt["Letterlike Symbols"](i)||jt["Number Forms"](i)||jt["Miscellaneous Technical"](i)&&(i>=8960&&i<=8967||i>=8972&&i<=8991||i>=8996&&i<=9e3||i===9003||i>=9085&&i<=9114||i>=9150&&i<=9165||i===9167||i>=9169&&i<=9179||i>=9186&&i<=9215)||jt["Control Pictures"](i)&&i!==9251||jt["Optical Character Recognition"](i)||jt["Enclosed Alphanumerics"](i)||jt["Geometric Shapes"](i)||jt["Miscellaneous Symbols"](i)&&!(i>=9754&&i<=9759)||jt["Miscellaneous Symbols and Arrows"](i)&&(i>=11026&&i<=11055||i>=11088&&i<=11097||i>=11192&&i<=11243)||jt["CJK Symbols and Punctuation"](i)||jt.Katakana(i)||jt["Private Use Area"](i)||jt["CJK Compatibility Forms"](i)||jt["Small Form Variants"](i)||jt["Halfwidth and Fullwidth Forms"](i)||i===8734||i===8756||i===8757||i>=9984&&i<=10087||i>=10102&&i<=10131||i===65532||i===65533)}(a))}function nx(a){return a>=1424&&a<=2303||jt["Arabic Presentation Forms-A"](a)||jt["Arabic Presentation Forms-B"](a)}function jS(a,i){return!(!i&&nx(a)||a>=2304&&a<=3583||a>=3840&&a<=4255||jt.Khmer(a))}function zS(a){for(const i of a)if(nx(i.charCodeAt(0)))return!0;return!1}const sg="deferred",lg="loading",cg="loaded";let Ic=null,g="unavailable",c=null;const f=function(a){a&&typeof a=="string"&&a.indexOf("NetworkError")>-1&&(g="error"),Ic&&Ic(a)};function v(){b.fire(new gl("pluginStateChange",{pluginStatus:g,pluginURL:c}))}const b=new Vu,T=function(){return g},O=function(){if(g!==sg||!c)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");g=lg,v(),c&&cr({url:c},a=>{a?f(a):(g=cg,v())})},D={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>g===cg||D.applyArabicShaping!=null,isLoading:()=>g===lg,setState(a){g=a.pluginStatus,c=a.pluginURL},isParsed:()=>D.applyArabicShaping!=null&&D.processBidirectionalText!=null&&D.processStyledBidirectionalText!=null,getPluginURL:()=>c};class B{constructor(i,l){this.zoom=i,l?(this.now=l.now,this.fadeDuration=l.fadeDuration,this.transition=l.transition,this.pitch=l.pitch):(this.now=0,this.fadeDuration=0,this.transition={},this.pitch=0)}isSupportedScript(i){return function(l,d){for(const p of l)if(!jS(p.charCodeAt(0),d))return!1;return!0}(i,D.isLoaded())}}class H{constructor(i,l){this.property=i,this.value=l,this.expression=function(d,p){if(ad(d))return new Fh(d,p);if(Tc(d)){const y=ld(d,p);if(y.result==="error")throw new Error(y.value.map(x=>`${x.key}: ${x.message}`).join(", "));return y.value}{let y=d;return typeof d=="string"&&p.type==="color"&&(y=Rn.parse(d)),{kind:"constant",evaluate:()=>y}}}(l===void 0?i.specification.default:l,i.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(i,l,d){return this.property.possiblyEvaluate(this,i,l,d)}}class q{constructor(i){this.property=i,this.value=new H(i,void 0)}transitioned(i,l){return new ae(this.property,this.value,l,at({},i.transition,this.transition),i.now)}untransitioned(){return new ae(this.property,this.value,null,{},0)}}class J{constructor(i){this._properties=i,this._values=Object.create(i.defaultTransitionablePropertyValues)}getValue(i){return Ot(this._values[i].value.value)}setValue(i,l){this._values.hasOwnProperty(i)||(this._values[i]=new q(this._values[i].property)),this._values[i].value=new H(this._values[i].property,l===null?void 0:Ot(l))}getTransition(i){return Ot(this._values[i].transition)}setTransition(i,l){this._values.hasOwnProperty(i)||(this._values[i]=new q(this._values[i].property)),this._values[i].transition=Ot(l)||void 0}serialize(){const i={};for(const l of Object.keys(this._values)){const d=this.getValue(l);d!==void 0&&(i[l]=d);const p=this.getTransition(l);p!==void 0&&(i[`${l}-transition`]=p)}return i}transitioned(i,l){const d=new ce(this._properties);for(const p of Object.keys(this._values))d._values[p]=this._values[p].transitioned(i,l._values[p]);return d}untransitioned(){const i=new ce(this._properties);for(const l of Object.keys(this._values))i._values[l]=this._values[l].untransitioned();return i}}class ae{constructor(i,l,d,p,y){const x=p.delay||0,w=p.duration||0;y=y||0,this.property=i,this.value=l,this.begin=y+x,this.end=this.begin+w,i.specification.transition&&(p.delay||p.duration)&&(this.prior=d)}possiblyEvaluate(i,l,d){const p=i.now||0,y=this.value.possiblyEvaluate(i,l,d),x=this.prior;if(x){if(p>this.end)return this.prior=null,y;if(this.value.isDataDriven())return this.prior=null,y;if(p<this.begin)return x.possiblyEvaluate(i,l,d);{const w=(p-this.begin)/(this.end-this.begin);return this.property.interpolate(x.possiblyEvaluate(i,l,d),y,Le(w))}}return y}}class ce{constructor(i){this._properties=i,this._values=Object.create(i.defaultTransitioningPropertyValues)}possiblyEvaluate(i,l,d){const p=new pe(this._properties);for(const y of Object.keys(this._values))p._values[y]=this._values[y].possiblyEvaluate(i,l,d);return p}hasTransition(){for(const i of Object.keys(this._values))if(this._values[i].prior)return!0;return!1}}class he{constructor(i){this._properties=i,this._values=Object.create(i.defaultPropertyValues)}getValue(i){return Ot(this._values[i].value)}setValue(i,l){this._values[i]=new H(this._values[i].property,l===null?void 0:Ot(l))}serialize(){const i={};for(const l of Object.keys(this._values)){const d=this.getValue(l);d!==void 0&&(i[l]=d)}return i}possiblyEvaluate(i,l,d){const p=new pe(this._properties);for(const y of Object.keys(this._values))p._values[y]=this._values[y].possiblyEvaluate(i,l,d);return p}}class de{constructor(i,l,d){this.property=i,this.value=l,this.parameters=d}isConstant(){return this.value.kind==="constant"}constantOr(i){return this.value.kind==="constant"?this.value.value:i}evaluate(i,l,d,p){return this.property.evaluate(this.value,this.parameters,i,l,d,p)}}class pe{constructor(i){this._properties=i,this._values=Object.create(i.defaultPossiblyEvaluatedValues)}get(i){return this._values[i]}}class ee{constructor(i){this.specification=i}possiblyEvaluate(i,l){return i.expression.evaluate(l)}interpolate(i,l,d){const p=ed[this.specification.type];return p?p(i,l,d):i}}class le{constructor(i,l){this.specification=i,this.overrides=l}possiblyEvaluate(i,l,d,p){return new de(this,i.expression.kind==="constant"||i.expression.kind==="camera"?{kind:"constant",value:i.expression.evaluate(l,null,{},d,p)}:i.expression,l)}interpolate(i,l,d){if(i.value.kind!=="constant"||l.value.kind!=="constant")return i;if(i.value.value===void 0||l.value.value===void 0)return new de(this,{kind:"constant",value:void 0},i.parameters);const p=ed[this.specification.type];return p?new de(this,{kind:"constant",value:p(i.value.value,l.value.value,d)},i.parameters):i}evaluate(i,l,d,p,y,x){return i.kind==="constant"?i.value:i.evaluate(l,d,p,y,x)}}class ye{constructor(i){this.specification=i}possiblyEvaluate(i,l,d,p){return!!i.expression.evaluate(l,null,{},d,p)}interpolate(){return!1}}class _e{constructor(i){this.properties=i,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];const l=new B(0,{});for(const d in i){const p=i[d];p.specification.overridable&&this.overridableProperties.push(d);const y=this.defaultPropertyValues[d]=new H(p,void 0),x=this.defaultTransitionablePropertyValues[d]=new q(p);this.defaultTransitioningPropertyValues[d]=x.untransitioned(),this.defaultPossiblyEvaluatedValues[d]=y.possiblyEvaluate(l)}}}function Oe(a,i){return 256*(a=Pe(Math.floor(a),0,255))+Pe(Math.floor(i),0,255)}$t(le,"DataDrivenProperty"),$t(ee,"DataConstantProperty"),$t(ye,"ColorRampProperty");const De={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class ke{constructor(i,l){this._structArray=i,this._pos1=l*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class Ve{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(i,l){return i._trim(),l&&(i.isTransferred=!0,l.push(i.arrayBuffer)),{length:i.length,arrayBuffer:i.arrayBuffer}}static deserialize(i){const l=Object.create(this.prototype);return l.arrayBuffer=i.arrayBuffer,l.length=i.length,l.capacity=i.arrayBuffer.byteLength/l.bytesPerElement,l._refreshViews(),l}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(i){this.reserve(i),this.length=i}reserve(i){if(i>this.capacity){this.capacity=Math.max(i,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const l=this.uint8;this._refreshViews(),l&&this.uint8.set(l)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}destroy(){this.int8=this.uint8=this.int16=this.uint16=this.int32=this.uint32=this.float32=null,this.arrayBuffer=null}}function Fe(a,i=1){let l=0,d=0;return{members:a.map(p=>{const y=De[p.type].BYTES_PER_ELEMENT,x=l=Ke(l,Math.max(i,y)),w=p.components||1;return d=Math.max(d,y),l+=y*w,{name:p.name,type:p.type,components:w,offset:x}}),size:Ke(l,Math.max(d,i)),alignment:i}}function Ke(a,i){return Math.ceil(a/i)*i}class xt extends Ve{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,l){const d=this.length;return this.resize(d+1),this.emplace(d,i,l)}emplace(i,l,d){const p=2*i;return this.int16[p+0]=l,this.int16[p+1]=d,i}}xt.prototype.bytesPerElement=4,$t(xt,"StructArrayLayout2i4");class He extends Ve{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,l,d){const p=this.length;return this.resize(p+1),this.emplace(p,i,l,d)}emplace(i,l,d,p){const y=3*i;return this.int16[y+0]=l,this.int16[y+1]=d,this.int16[y+2]=p,i}}He.prototype.bytesPerElement=6,$t(He,"StructArrayLayout3i6");class ct extends Ve{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,l,d,p){const y=this.length;return this.resize(y+1),this.emplace(y,i,l,d,p)}emplace(i,l,d,p,y){const x=4*i;return this.int16[x+0]=l,this.int16[x+1]=d,this.int16[x+2]=p,this.int16[x+3]=y,i}}ct.prototype.bytesPerElement=8,$t(ct,"StructArrayLayout4i8");class Je extends Ve{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,l,d,p,y,x,w){const P=this.length;return this.resize(P+1),this.emplace(P,i,l,d,p,y,x,w)}emplace(i,l,d,p,y,x,w,P){const C=6*i,j=12*i,$=3*i;return this.int16[C+0]=l,this.int16[C+1]=d,this.uint8[j+4]=p,this.uint8[j+5]=y,this.uint8[j+6]=x,this.uint8[j+7]=w,this.float32[$+2]=P,i}}Je.prototype.bytesPerElement=12,$t(Je,"StructArrayLayout2i4ub1f12");class _t extends Ve{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,l,d,p){const y=this.length;return this.resize(y+1),this.emplace(y,i,l,d,p)}emplace(i,l,d,p,y){const x=4*i;return this.float32[x+0]=l,this.float32[x+1]=d,this.float32[x+2]=p,this.float32[x+3]=y,i}}_t.prototype.bytesPerElement=16,$t(_t,"StructArrayLayout4f16");class Ze extends Ve{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,l,d,p,y){const x=this.length;return this.resize(x+1),this.emplace(x,i,l,d,p,y)}emplace(i,l,d,p,y,x){const w=6*i,P=3*i;return this.uint16[w+0]=l,this.uint16[w+1]=d,this.uint16[w+2]=p,this.uint16[w+3]=y,this.float32[P+2]=x,i}}Ze.prototype.bytesPerElement=12,$t(Ze,"StructArrayLayout4ui1f12");class st extends Ve{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,l,d,p){const y=this.length;return this.resize(y+1),this.emplace(y,i,l,d,p)}emplace(i,l,d,p,y){const x=4*i;return this.uint16[x+0]=l,this.uint16[x+1]=d,this.uint16[x+2]=p,this.uint16[x+3]=y,i}}st.prototype.bytesPerElement=8,$t(st,"StructArrayLayout4ui8");class wt extends Ve{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,l,d,p,y,x){const w=this.length;return this.resize(w+1),this.emplace(w,i,l,d,p,y,x)}emplace(i,l,d,p,y,x,w){const P=6*i;return this.int16[P+0]=l,this.int16[P+1]=d,this.int16[P+2]=p,this.int16[P+3]=y,this.int16[P+4]=x,this.int16[P+5]=w,i}}wt.prototype.bytesPerElement=12,$t(wt,"StructArrayLayout6i12");class pt extends Ve{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,l,d,p,y,x,w,P,C,j,$,G){const X=this.length;return this.resize(X+1),this.emplace(X,i,l,d,p,y,x,w,P,C,j,$,G)}emplace(i,l,d,p,y,x,w,P,C,j,$,G,X){const K=12*i;return this.int16[K+0]=l,this.int16[K+1]=d,this.int16[K+2]=p,this.int16[K+3]=y,this.uint16[K+4]=x,this.uint16[K+5]=w,this.uint16[K+6]=P,this.uint16[K+7]=C,this.int16[K+8]=j,this.int16[K+9]=$,this.int16[K+10]=G,this.int16[K+11]=X,i}}pt.prototype.bytesPerElement=24,$t(pt,"StructArrayLayout4i4ui4i24");class St extends Ve{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,l,d,p,y,x){const w=this.length;return this.resize(w+1),this.emplace(w,i,l,d,p,y,x)}emplace(i,l,d,p,y,x,w){const P=10*i,C=5*i;return this.int16[P+0]=l,this.int16[P+1]=d,this.int16[P+2]=p,this.float32[C+2]=y,this.float32[C+3]=x,this.float32[C+4]=w,i}}St.prototype.bytesPerElement=20,$t(St,"StructArrayLayout3i3f20");class Ht extends Ve{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(i){const l=this.length;return this.resize(l+1),this.emplace(l,i)}emplace(i,l){return this.uint32[1*i+0]=l,i}}Ht.prototype.bytesPerElement=4,$t(Ht,"StructArrayLayout1ul4");class ir extends Ve{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,l,d,p,y,x,w,P,C,j,$,G,X){const K=this.length;return this.resize(K+1),this.emplace(K,i,l,d,p,y,x,w,P,C,j,$,G,X)}emplace(i,l,d,p,y,x,w,P,C,j,$,G,X,K){const te=20*i,se=10*i;return this.int16[te+0]=l,this.int16[te+1]=d,this.int16[te+2]=p,this.int16[te+3]=y,this.int16[te+4]=x,this.float32[se+3]=w,this.float32[se+4]=P,this.float32[se+5]=C,this.float32[se+6]=j,this.int16[te+14]=$,this.uint32[se+8]=G,this.uint16[te+18]=X,this.uint16[te+19]=K,i}}ir.prototype.bytesPerElement=40,$t(ir,"StructArrayLayout5i4f1i1ul2ui40");class Ft extends Ve{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,l,d,p,y,x,w){const P=this.length;return this.resize(P+1),this.emplace(P,i,l,d,p,y,x,w)}emplace(i,l,d,p,y,x,w,P){const C=8*i;return this.int16[C+0]=l,this.int16[C+1]=d,this.int16[C+2]=p,this.int16[C+4]=y,this.int16[C+5]=x,this.int16[C+6]=w,this.int16[C+7]=P,i}}Ft.prototype.bytesPerElement=16,$t(Ft,"StructArrayLayout3i2i2i16");class Qt extends Ve{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,l,d,p,y){const x=this.length;return this.resize(x+1),this.emplace(x,i,l,d,p,y)}emplace(i,l,d,p,y,x){const w=4*i,P=8*i;return this.float32[w+0]=l,this.float32[w+1]=d,this.float32[w+2]=p,this.int16[P+6]=y,this.int16[P+7]=x,i}}Qt.prototype.bytesPerElement=16,$t(Qt,"StructArrayLayout2f1f2i16");class br extends Ve{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,l,d,p){const y=this.length;return this.resize(y+1),this.emplace(y,i,l,d,p)}emplace(i,l,d,p,y){const x=12*i,w=3*i;return this.uint8[x+0]=l,this.uint8[x+1]=d,this.float32[w+1]=p,this.float32[w+2]=y,i}}br.prototype.bytesPerElement=12,$t(br,"StructArrayLayout2ub2f12");class yr extends Ve{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,l,d){const p=this.length;return this.resize(p+1),this.emplace(p,i,l,d)}emplace(i,l,d,p){const y=3*i;return this.float32[y+0]=l,this.float32[y+1]=d,this.float32[y+2]=p,i}}yr.prototype.bytesPerElement=12,$t(yr,"StructArrayLayout3f12");class Gt extends Ve{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,l,d){const p=this.length;return this.resize(p+1),this.emplace(p,i,l,d)}emplace(i,l,d,p){const y=3*i;return this.uint16[y+0]=l,this.uint16[y+1]=d,this.uint16[y+2]=p,i}}Gt.prototype.bytesPerElement=6,$t(Gt,"StructArrayLayout3ui6");class Nr extends Ve{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(i,l,d,p,y,x,w,P,C,j,$,G,X,K,te,se,me,Ae,ge,Te,Me){const Ce=this.length;return this.resize(Ce+1),this.emplace(Ce,i,l,d,p,y,x,w,P,C,j,$,G,X,K,te,se,me,Ae,ge,Te,Me)}emplace(i,l,d,p,y,x,w,P,C,j,$,G,X,K,te,se,me,Ae,ge,Te,Me,Ce){const Ye=30*i,Xe=15*i,ot=60*i;return this.int16[Ye+0]=l,this.int16[Ye+1]=d,this.int16[Ye+2]=p,this.float32[Xe+2]=y,this.float32[Xe+3]=x,this.uint16[Ye+8]=w,this.uint16[Ye+9]=P,this.uint32[Xe+5]=C,this.uint32[Xe+6]=j,this.uint32[Xe+7]=$,this.uint16[Ye+16]=G,this.uint16[Ye+17]=X,this.uint16[Ye+18]=K,this.float32[Xe+10]=te,this.float32[Xe+11]=se,this.uint8[ot+48]=me,this.uint8[ot+49]=Ae,this.uint8[ot+50]=ge,this.uint32[Xe+13]=Te,this.int16[Ye+28]=Me,this.uint8[ot+58]=Ce,i}}Nr.prototype.bytesPerElement=60,$t(Nr,"StructArrayLayout3i2f2ui3ul3ui2f3ub1ul1i1ub60");class Wr extends Ve{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(i,l,d,p,y,x,w,P,C,j,$,G,X,K,te,se,me,Ae,ge,Te,Me,Ce,Ye,Xe,ot,bt,Qe,ut,dt,yt){const Ct=this.length;return this.resize(Ct+1),this.emplace(Ct,i,l,d,p,y,x,w,P,C,j,$,G,X,K,te,se,me,Ae,ge,Te,Me,Ce,Ye,Xe,ot,bt,Qe,ut,dt,yt)}emplace(i,l,d,p,y,x,w,P,C,j,$,G,X,K,te,se,me,Ae,ge,Te,Me,Ce,Ye,Xe,ot,bt,Qe,ut,dt,yt,Ct){const nt=38*i,Rt=19*i;return this.int16[nt+0]=l,this.int16[nt+1]=d,this.int16[nt+2]=p,this.float32[Rt+2]=y,this.float32[Rt+3]=x,this.int16[nt+8]=w,this.int16[nt+9]=P,this.int16[nt+10]=C,this.int16[nt+11]=j,this.int16[nt+12]=$,this.int16[nt+13]=G,this.uint16[nt+14]=X,this.uint16[nt+15]=K,this.uint16[nt+16]=te,this.uint16[nt+17]=se,this.uint16[nt+18]=me,this.uint16[nt+19]=Ae,this.uint16[nt+20]=ge,this.uint16[nt+21]=Te,this.uint16[nt+22]=Me,this.uint16[nt+23]=Ce,this.uint16[nt+24]=Ye,this.uint16[nt+25]=Xe,this.uint16[nt+26]=ot,this.uint16[nt+27]=bt,this.uint16[nt+28]=Qe,this.uint32[Rt+15]=ut,this.float32[Rt+16]=dt,this.float32[Rt+17]=yt,this.float32[Rt+18]=Ct,i}}Wr.prototype.bytesPerElement=76,$t(Wr,"StructArrayLayout3i2f6i15ui1ul3f76");class qr extends Ve{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i){const l=this.length;return this.resize(l+1),this.emplace(l,i)}emplace(i,l){return this.float32[1*i+0]=l,i}}qr.prototype.bytesPerElement=4,$t(qr,"StructArrayLayout1f4");class Hr extends Ve{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,l,d,p,y){const x=this.length;return this.resize(x+1),this.emplace(x,i,l,d,p,y)}emplace(i,l,d,p,y,x){const w=5*i;return this.float32[w+0]=l,this.float32[w+1]=d,this.float32[w+2]=p,this.float32[w+3]=y,this.float32[w+4]=x,i}}Hr.prototype.bytesPerElement=20,$t(Hr,"StructArrayLayout5f20");class Mi extends Ve{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,l,d,p){const y=this.length;return this.resize(y+1),this.emplace(y,i,l,d,p)}emplace(i,l,d,p,y){const x=6*i;return this.uint32[3*i+0]=l,this.uint16[x+2]=d,this.uint16[x+3]=p,this.uint16[x+4]=y,i}}Mi.prototype.bytesPerElement=12,$t(Mi,"StructArrayLayout1ul3ui12");class di extends Ve{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,l){const d=this.length;return this.resize(d+1),this.emplace(d,i,l)}emplace(i,l,d){const p=2*i;return this.uint16[p+0]=l,this.uint16[p+1]=d,i}}di.prototype.bytesPerElement=4,$t(di,"StructArrayLayout2ui4");class Mo extends Ve{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i){const l=this.length;return this.resize(l+1),this.emplace(l,i)}emplace(i,l){return this.uint16[1*i+0]=l,i}}Mo.prototype.bytesPerElement=2,$t(Mo,"StructArrayLayout1ui2");class wa extends Ve{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,l){const d=this.length;return this.resize(d+1),this.emplace(d,i,l)}emplace(i,l,d){const p=2*i;return this.float32[p+0]=l,this.float32[p+1]=d,i}}wa.prototype.bytesPerElement=8,$t(wa,"StructArrayLayout2f8");class pn extends ke{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.int16[this._pos2+3]}get tileAnchorY(){return this._structArray.int16[this._pos2+4]}get x1(){return this._structArray.float32[this._pos4+3]}get y1(){return this._structArray.float32[this._pos4+4]}get x2(){return this._structArray.float32[this._pos4+5]}get y2(){return this._structArray.float32[this._pos4+6]}get padding(){return this._structArray.int16[this._pos2+14]}get featureIndex(){return this._structArray.uint32[this._pos4+8]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+18]}get bucketIndex(){return this._structArray.uint16[this._pos2+19]}}pn.prototype.size=40;class Xr extends ir{get(i){return new pn(this,i)}}$t(Xr,"CollisionBoxArray");class kr extends ke{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+8]}get numGlyphs(){return this._structArray.uint16[this._pos2+9]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+5]}get lineStartIndex(){return this._structArray.uint32[this._pos4+6]}get lineLength(){return this._structArray.uint32[this._pos4+7]}get segment(){return this._structArray.uint16[this._pos2+16]}get lowerSize(){return this._structArray.uint16[this._pos2+17]}get upperSize(){return this._structArray.uint16[this._pos2+18]}get lineOffsetX(){return this._structArray.float32[this._pos4+10]}get lineOffsetY(){return this._structArray.float32[this._pos4+11]}get writingMode(){return this._structArray.uint8[this._pos1+48]}get placedOrientation(){return this._structArray.uint8[this._pos1+49]}set placedOrientation(i){this._structArray.uint8[this._pos1+49]=i}get hidden(){return this._structArray.uint8[this._pos1+50]}set hidden(i){this._structArray.uint8[this._pos1+50]=i}get crossTileID(){return this._structArray.uint32[this._pos4+13]}set crossTileID(i){this._structArray.uint32[this._pos4+13]=i}get associatedIconIndex(){return this._structArray.int16[this._pos2+28]}get flipState(){return this._structArray.uint8[this._pos1+58]}set flipState(i){this._structArray.uint8[this._pos1+58]=i}}kr.prototype.size=60;class $n extends Nr{get(i){return new kr(this,i)}}$t($n,"PlacedSymbolArray");class Ni extends ke{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+8]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+9]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+10]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+11]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+12]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+13]}get key(){return this._structArray.uint16[this._pos2+14]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+17]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+18]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+19]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+20]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+21]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+22]}get featureIndex(){return this._structArray.uint16[this._pos2+23]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+24]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+25]}get numIconVertices(){return this._structArray.uint16[this._pos2+26]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+27]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+28]}get crossTileID(){return this._structArray.uint32[this._pos4+15]}set crossTileID(i){this._structArray.uint32[this._pos4+15]=i}get textOffset0(){return this._structArray.float32[this._pos4+16]}get textOffset1(){return this._structArray.float32[this._pos4+17]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+18]}}Ni.prototype.size=76;class cn extends Wr{get(i){return new Ni(this,i)}}$t(cn,"SymbolInstanceArray");class Zi extends qr{getoffsetX(i){return this.float32[1*i+0]}}$t(Zi,"GlyphOffsetArray");class Xh extends xt{getx(i){return this.int16[2*i+0]}gety(i){return this.int16[2*i+1]}}$t(Xh,"SymbolLineVertexArray");class Tl extends ke{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}get layoutVertexArrayOffset(){return this._structArray.uint16[this._pos2+4]}}Tl.prototype.size=12;class pd extends Mi{get(i){return new Tl(this,i)}}$t(pd,"FeatureIndexArray");class ss extends di{geta_centroid_pos0(i){return this.uint16[2*i+0]}geta_centroid_pos1(i){return this.uint16[2*i+1]}}$t(ss,"FillExtrusionCentroidArray");const Bs=Fe([{name:"a_pattern",components:4,type:"Uint16"},{name:"a_pixel_ratio",components:1,type:"Float32"}]),Al=Fe([{name:"a_dash",components:4,type:"Uint16"}]);var Zh={exports:{}},md={exports:{}};md.exports=function(a,i){var l,d,p,y,x,w,P,C;for(d=a.length-(l=3&a.length),p=i,x=3432918353,w=461845907,C=0;C<d;)P=255&a.charCodeAt(C)|(255&a.charCodeAt(++C))<<8|(255&a.charCodeAt(++C))<<16|(255&a.charCodeAt(++C))<<24,++C,p=27492+(65535&(y=5*(65535&(p=(p^=P=(65535&(P=(P=(65535&P)*x+(((P>>>16)*x&65535)<<16)&4294967295)<<15|P>>>17))*w+(((P>>>16)*w&65535)<<16)&4294967295)<<13|p>>>19))+((5*(p>>>16)&65535)<<16)&4294967295))+((58964+(y>>>16)&65535)<<16);switch(P=0,l){case 3:P^=(255&a.charCodeAt(C+2))<<16;case 2:P^=(255&a.charCodeAt(C+1))<<8;case 1:p^=P=(65535&(P=(P=(65535&(P^=255&a.charCodeAt(C)))*x+(((P>>>16)*x&65535)<<16)&4294967295)<<15|P>>>17))*w+(((P>>>16)*w&65535)<<16)&4294967295}return p^=a.length,p=2246822507*(65535&(p^=p>>>16))+((2246822507*(p>>>16)&65535)<<16)&4294967295,p=3266489909*(65535&(p^=p>>>13))+((3266489909*(p>>>16)&65535)<<16)&4294967295,(p^=p>>>16)>>>0};var ug=md.exports,XO={exports:{}};XO.exports=function(a,i){for(var l,d=a.length,p=i^d,y=0;d>=4;)l=1540483477*(65535&(l=255&a.charCodeAt(y)|(255&a.charCodeAt(++y))<<8|(255&a.charCodeAt(++y))<<16|(255&a.charCodeAt(++y))<<24))+((1540483477*(l>>>16)&65535)<<16),p=1540483477*(65535&p)+((1540483477*(p>>>16)&65535)<<16)^(l=1540483477*(65535&(l^=l>>>24))+((1540483477*(l>>>16)&65535)<<16)),d-=4,++y;switch(d){case 3:p^=(255&a.charCodeAt(y+2))<<16;case 2:p^=(255&a.charCodeAt(y+1))<<8;case 1:p=1540483477*(65535&(p^=255&a.charCodeAt(y)))+((1540483477*(p>>>16)&65535)<<16)}return p=1540483477*(65535&(p^=p>>>13))+((1540483477*(p>>>16)&65535)<<16),(p^=p>>>15)>>>0};var ZO=ug,aq=XO.exports;Zh.exports=ZO,Zh.exports.murmur3=ZO,Zh.exports.murmur2=aq;var NS=U(Zh.exports);class ix{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(i,l,d,p){this.ids.push(KO(i)),this.positions.push(l,d,p)}getPositions(i){const l=KO(i);let d=0,p=this.ids.length-1;for(;d<p;){const x=d+p>>1;this.ids[x]>=l?p=x:d=x+1}const y=[];for(;this.ids[d]===l;)y.push({index:this.positions[3*d],start:this.positions[3*d+1],end:this.positions[3*d+2]}),d++;return y}static serialize(i,l){const d=new Float64Array(i.ids),p=new Uint32Array(i.positions);return BS(d,p,0,d.length-1),l&&l.push(d.buffer,p.buffer),{ids:d,positions:p}}static deserialize(i){const l=new ix;return l.ids=i.ids,l.positions=i.positions,l.indexed=!0,l}}function KO(a){const i=+a;return!isNaN(i)&&Number.MIN_SAFE_INTEGER<=i&&i<=Number.MAX_SAFE_INTEGER?i:NS(String(a))}function BS(a,i,l,d){for(;l<d;){const p=a[l+d>>1];let y=l-1,x=d+1;for(;;){do y++;while(a[y]<p);do x--;while(a[x]>p);if(y>=x)break;ox(a,y,x),ox(i,3*y,3*x),ox(i,3*y+1,3*x+1),ox(i,3*y+2,3*x+2)}x-l<d-x?(BS(a,i,l,x),l=x+1):(BS(a,i,x+1,d),d=x)}}function ox(a,i,l){const d=a[i];a[i]=a[l],a[l]=d}$t(ix,"FeaturePositionMap");class Pl{constructor(i){this.gl=i.gl,this.initialized=!1}fetchUniformLocation(i,l){return this.location||this.initialized||(this.location=this.gl.getUniformLocation(i,l),this.initialized=!0),!!this.location}}class ax extends Pl{constructor(i){super(i),this.current=0}set(i,l,d){this.fetchUniformLocation(i,l)&&this.current!==d&&(this.current=d,this.gl.uniform1f(this.location,d))}}class YO extends Pl{constructor(i){super(i),this.current=[0,0,0,0]}set(i,l,d){this.fetchUniformLocation(i,l)&&(d[0]===this.current[0]&&d[1]===this.current[1]&&d[2]===this.current[2]&&d[3]===this.current[3]||(this.current=d,this.gl.uniform4f(this.location,d[0],d[1],d[2],d[3])))}}class JO extends Pl{constructor(i){super(i),this.current=Rn.transparent}set(i,l,d){this.fetchUniformLocation(i,l)&&(d.r===this.current.r&&d.g===this.current.g&&d.b===this.current.b&&d.a===this.current.a||(this.current=d,this.gl.uniform4f(this.location,d.r,d.g,d.b,d.a)))}}const sq=new Float32Array(16),lq=new Float32Array(9),cq=new Float32Array(4);function $S(a){return[Oe(255*a.r,255*a.g),Oe(255*a.b,255*a.a)]}class dg{constructor(i,l,d){this.value=i,this.uniformNames=l.map(p=>`u_${p}`),this.type=d}setUniform(i,l,d,p,y){l.set(i,y,p.constantOr(this.value))}getBinding(i,l){return this.type==="color"?new JO(i):new ax(i)}}class Kh{constructor(i,l){this.uniformNames=l.map(d=>`u_${d}`),this.pattern=null,this.pixelRatio=1}setConstantPatternPositions(i){this.pixelRatio=i.pixelRatio||1,this.pattern=i.tl.concat(i.br)}setUniform(i,l,d,p,y){const x=y==="u_pattern"||y==="u_dash"?this.pattern:y==="u_pixel_ratio"?this.pixelRatio:null;x&&l.set(i,y,x)}getBinding(i,l){return l==="u_pattern"||l==="u_dash"?new YO(i):new ax(i)}}class Cl{constructor(i,l,d,p){this.expression=i,this.type=d,this.maxValue=0,this.paintVertexAttributes=l.map(y=>({name:`a_${y}`,type:"Float32",components:d==="color"?2:1,offset:0})),this.paintVertexArray=new p}populatePaintArray(i,l,d,p,y,x){const w=this.paintVertexArray.length,P=this.expression.evaluate(new B(0),l,{},y,p,x);this.paintVertexArray.resize(i),this._setPaintValue(w,i,P)}updatePaintArray(i,l,d,p,y){const x=this.expression.evaluate({zoom:0},d,p,void 0,y);this._setPaintValue(i,l,x)}_setPaintValue(i,l,d){if(this.type==="color"){const p=$S(d);for(let y=i;y<l;y++)this.paintVertexArray.emplace(y,p[0],p[1])}else{for(let p=i;p<l;p++)this.paintVertexArray.emplace(p,d);this.maxValue=Math.max(this.maxValue,Math.abs(d))}}upload(i){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=i.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class ls{constructor(i,l,d,p,y,x){this.expression=i,this.uniformNames=l.map(w=>`u_${w}_t`),this.type=d,this.useIntegerZoom=p,this.zoom=y,this.maxValue=0,this.paintVertexAttributes=l.map(w=>({name:`a_${w}`,type:"Float32",components:d==="color"?4:2,offset:0})),this.paintVertexArray=new x}populatePaintArray(i,l,d,p,y,x){const w=this.expression.evaluate(new B(this.zoom),l,{},y,p,x),P=this.expression.evaluate(new B(this.zoom+1),l,{},y,p,x),C=this.paintVertexArray.length;this.paintVertexArray.resize(i),this._setPaintValue(C,i,w,P)}updatePaintArray(i,l,d,p,y){const x=this.expression.evaluate({zoom:this.zoom},d,p,void 0,y),w=this.expression.evaluate({zoom:this.zoom+1},d,p,void 0,y);this._setPaintValue(i,l,x,w)}_setPaintValue(i,l,d,p){if(this.type==="color"){const y=$S(d),x=$S(p);for(let w=i;w<l;w++)this.paintVertexArray.emplace(w,y[0],y[1],x[0],x[1])}else{for(let y=i;y<l;y++)this.paintVertexArray.emplace(y,d,p);this.maxValue=Math.max(this.maxValue,Math.abs(d),Math.abs(p))}}upload(i){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=i.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(i,l,d,p,y){const x=this.useIntegerZoom?Math.floor(d.zoom):d.zoom,w=Pe(this.expression.interpolationFactor(x,this.zoom,this.zoom+1),0,1);l.set(i,y,w)}getBinding(i,l){return new ax(i)}}class Oc{constructor(i,l,d,p,y){this.expression=i,this.layerId=y,this.paintVertexAttributes=(d==="array"?Al:Bs).members;for(let x=0;x<l.length;++x);this.paintVertexArray=new p}populatePaintArray(i,l,d){const p=this.paintVertexArray.length;this.paintVertexArray.resize(i),this._setPaintValues(p,i,l.patterns&&l.patterns[this.layerId],d)}updatePaintArray(i,l,d,p,y,x){this._setPaintValues(i,l,d.patterns&&d.patterns[this.layerId],x)}_setPaintValues(i,l,d,p){if(!p||!d)return;const y=p[d];if(!y)return;const{tl:x,br:w,pixelRatio:P}=y;for(let C=i;C<l;C++)this.paintVertexArray.emplace(C,x[0],x[1],w[0],w[1],P)}upload(i){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer=i.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class kc{constructor(i,l,d=()=>!0){this.binders={},this._buffers=[];const p=[];for(const y in i.paint._values){if(!d(y))continue;const x=i.paint.get(y);if(!(x instanceof de&&Sc(x.property.specification)))continue;const w=dq(y,i.type),P=x.value,C=x.property.specification.type,j=!!x.property.useIntegerZoom,$=y==="line-dasharray"||y.endsWith("pattern"),G=y==="line-dasharray"&&i.layout.get("line-cap").value.kind!=="constant";if(P.kind!=="constant"||G)if(P.kind==="source"||G||$){const X=QO(y,C,"source");this.binders[y]=$?new Oc(P,w,C,X,i.id):new Cl(P,w,C,X),p.push(`/a_${y}`)}else{const X=QO(y,C,"composite");this.binders[y]=new ls(P,w,C,j,l,X),p.push(`/z_${y}`)}else this.binders[y]=$?new Kh(P.value,w):new dg(P.value,w,C),p.push(`/u_${y}`)}this.cacheKey=p.sort().join("")}getMaxValue(i){const l=this.binders[i];return l instanceof Cl||l instanceof ls?l.maxValue:0}populatePaintArrays(i,l,d,p,y,x){for(const w in this.binders){const P=this.binders[w];(P instanceof Cl||P instanceof ls||P instanceof Oc)&&P.populatePaintArray(i,l,d,p,y,x)}}setConstantPatternPositions(i){for(const l in this.binders){const d=this.binders[l];d instanceof Kh&&d.setConstantPatternPositions(i)}}updatePaintArrays(i,l,d,p,y,x){let w=!1;for(const P in i){const C=l.getPositions(P);for(const j of C){const $=d.feature(j.index);for(const G in this.binders){const X=this.binders[G];if((X instanceof Cl||X instanceof ls||X instanceof Oc)&&X.expression.isStateDependent===!0){const K=p.paint.get(G);X.expression=K.value,X.updatePaintArray(j.start,j.end,$,i[P],y,x),w=!0}}}}return w}defines(){const i=[];for(const l in this.binders){const d=this.binders[l];(d instanceof dg||d instanceof Kh)&&i.push(...d.uniformNames.map(p=>`#define HAS_UNIFORM_${p}`))}return i}getBinderAttributes(){const i=[];for(const l in this.binders){const d=this.binders[l];if(d instanceof Cl||d instanceof ls||d instanceof Oc)for(let p=0;p<d.paintVertexAttributes.length;p++)i.push(d.paintVertexAttributes[p].name)}return i}getBinderUniforms(){const i=[];for(const l in this.binders){const d=this.binders[l];if(d instanceof dg||d instanceof Kh||d instanceof ls)for(const p of d.uniformNames)i.push(p)}return i}getPaintVertexBuffers(){return this._buffers}getUniforms(i){const l=[];for(const d in this.binders){const p=this.binders[d];if(p instanceof dg||p instanceof Kh||p instanceof ls)for(const y of p.uniformNames)l.push({name:y,property:d,binding:p.getBinding(i,y)})}return l}setUniforms(i,l,d,p,y){for(const{name:x,property:w,binding:P}of d)this.binders[w].setUniform(i,P,y,p.get(w),x)}updatePaintBuffers(){this._buffers=[];for(const i in this.binders){const l=this.binders[i];(l instanceof Cl||l instanceof ls||l instanceof Oc)&&l.paintVertexBuffer&&this._buffers.push(l.paintVertexBuffer)}}upload(i){for(const l in this.binders){const d=this.binders[l];(d instanceof Cl||d instanceof ls||d instanceof Oc)&&d.upload(i)}this.updatePaintBuffers()}destroy(){for(const i in this.binders){const l=this.binders[i];(l instanceof Cl||l instanceof ls||l instanceof Oc)&&l.destroy()}}}class gd{constructor(i,l,d=()=>!0){this.programConfigurations={};for(const p of i)this.programConfigurations[p.id]=new kc(p,l,d);this.needsUpload=!1,this._featureMap=new ix,this._bufferOffset=0}populatePaintArrays(i,l,d,p,y,x,w){for(const P in this.programConfigurations)this.programConfigurations[P].populatePaintArrays(i,l,p,y,x,w);l.id!==void 0&&this._featureMap.add(l.id,d,this._bufferOffset,i),this._bufferOffset=i,this.needsUpload=!0}updatePaintArrays(i,l,d,p,y){for(const x of d)this.needsUpload=this.programConfigurations[x.id].updatePaintArrays(i,this._featureMap,l,x,p,y)||this.needsUpload}get(i){return this.programConfigurations[i]}upload(i){if(this.needsUpload){for(const l in this.programConfigurations)this.programConfigurations[l].upload(i);this.needsUpload=!1}}destroy(){for(const i in this.programConfigurations)this.programConfigurations[i].destroy()}}const uq={"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern","pixel_ratio"],"fill-pattern":["pattern","pixel_ratio"],"fill-extrusion-pattern":["pattern","pixel_ratio"],"line-dasharray":["dash"]};function dq(a,i){return uq[a]||[a.replace(`${i}-`,"").replace(/-/g,"_")]}const hq={"line-pattern":{source:Ze,composite:Ze},"fill-pattern":{source:Ze,composite:Ze},"fill-extrusion-pattern":{source:Ze,composite:Ze},"line-dasharray":{source:st,composite:st}},fq={color:{source:wa,composite:_t},number:{source:qr,composite:wa}};function QO(a,i,l){const d=hq[a];return d&&d[l]||fq[i][l]}$t(dg,"ConstantBinder"),$t(Kh,"PatternConstantBinder"),$t(Cl,"SourceExpressionBinder"),$t(Oc,"PatternCompositeBinder"),$t(ls,"CompositeExpressionBinder"),$t(kc,"ProgramConfiguration",{omit:["_buffers"]}),$t(gd,"ProgramConfigurationSet");const ek="-transition";class cs extends Vu{constructor(i,l){if(super(),this.id=i.id,this.type=i.type,this._featureFilter={filter:()=>!0,needGeometry:!1,needFeature:!1},this._filterCompiled=!1,i.type!=="custom"&&(this.metadata=i.metadata,this.minzoom=i.minzoom,this.maxzoom=i.maxzoom,i.type!=="background"&&i.type!=="sky"&&(this.source=i.source,this.sourceLayer=i["source-layer"],this.filter=i.filter),l.layout&&(this._unevaluatedLayout=new he(l.layout)),l.paint)){this._transitionablePaint=new J(l.paint);for(const d in i.paint)this.setPaintProperty(d,i.paint[d],{validate:!1});for(const d in i.layout)this.setLayoutProperty(d,i.layout[d],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new pe(l.paint)}}getLayoutProperty(i){return i==="visibility"?this.visibility:this._unevaluatedLayout.getValue(i)}setLayoutProperty(i,l,d={}){l!=null&&this._validate(DS,`layers.${this.id}.layout.${i}`,i,l,d)||(i!=="visibility"?this._unevaluatedLayout.setValue(i,l):this.visibility=l)}getPaintProperty(i){return ht(i,ek)?this._transitionablePaint.getTransition(i.slice(0,-11)):this._transitionablePaint.getValue(i)}setPaintProperty(i,l,d={}){if(l!=null&&this._validate(kS,`layers.${this.id}.paint.${i}`,i,l,d))return!1;if(ht(i,ek))return this._transitionablePaint.setTransition(i.slice(0,-11),l||void 0),!1;{const p=this._transitionablePaint._values[i],y=p.value.isDataDriven(),x=p.value;this._transitionablePaint.setValue(i,l),this._handleSpecialPaintPropertyUpdate(i);const w=this._transitionablePaint._values[i].value,P=w.isDataDriven(),C=ht(i,"pattern")||i==="line-dasharray";return P||y||C||this._handleOverridablePaintPropertyUpdate(i,x,w)}}_handleSpecialPaintPropertyUpdate(i){}getProgramIds(){return null}getProgramConfiguration(i){return null}_handleOverridablePaintPropertyUpdate(i,l,d){return!1}isHidden(i){return!!(this.minzoom&&i<this.minzoom)||!!(this.maxzoom&&i>=this.maxzoom)||this.visibility==="none"}updateTransitions(i){this._transitioningPaint=this._transitionablePaint.transitioned(i,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(i,l){this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(i,void 0,l)),this.paint=this._transitioningPaint.possiblyEvaluate(i,void 0,l)}serialize(){const i={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(i.layout=i.layout||{},i.layout.visibility=this.visibility),zt(i,(l,d)=>!(l===void 0||d==="layout"&&!Object.keys(l).length||d==="paint"&&!Object.keys(l).length))}_validate(i,l,d,p,y={}){return(!y||y.validate!==!1)&&ex(this,i.call(Q_,{key:l,layerType:this.type,objectKey:d,value:p,styleSpec:it,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isSky(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const i in this.paint._values){const l=this.paint.get(i);if(l instanceof de&&Sc(l.property.specification)&&(l.value.kind==="source"||l.value.kind==="composite")&&l.value.isStateDependent)return!0}return!1}compileFilter(){this._filterCompiled||(this._featureFilter=Gh(this.filter),this._filterCompiled=!0)}invalidateCompiledFilter(){this._filterCompiled=!1}dynamicFilter(){return this._featureFilter.dynamicFilter}dynamicFilterNeedsFeature(){return this._featureFilter.needFeature}}const pq=Fe([{name:"a_pos",components:2,type:"Int16"}],4),mq=Fe([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]);class Fn{constructor(i=[]){this.segments=i}prepareSegment(i,l,d,p){let y=this.segments[this.segments.length-1];return i>Fn.MAX_VERTEX_ARRAY_LENGTH&&Pt(`Max vertices per segment is ${Fn.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${i}`),(!y||y.vertexLength+i>Fn.MAX_VERTEX_ARRAY_LENGTH||y.sortKey!==p)&&(y={vertexOffset:l.length,primitiveOffset:d.length,vertexLength:0,primitiveLength:0},p!==void 0&&(y.sortKey=p),this.segments.push(y)),y}get(){return this.segments}destroy(){for(const i of this.segments)for(const l in i.vaos)i.vaos[l].destroy()}static simpleSegment(i,l,d,p){return new Fn([{vertexOffset:i,primitiveOffset:l,vertexLength:d,primitiveLength:p,vaos:{},sortKey:0}])}}Fn.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,$t(Fn,"SegmentVector");var Jt=8192;class Dc{constructor(i,l){i&&(l?this.setSouthWest(i).setNorthEast(l):i.length===4?this.setSouthWest([i[0],i[1]]).setNorthEast([i[2],i[3]]):this.setSouthWest(i[0]).setNorthEast(i[1]))}setNorthEast(i){return this._ne=i instanceof Zr?new Zr(i.lng,i.lat):Zr.convert(i),this}setSouthWest(i){return this._sw=i instanceof Zr?new Zr(i.lng,i.lat):Zr.convert(i),this}extend(i){const l=this._sw,d=this._ne;let p,y;if(i instanceof Zr)p=i,y=i;else{if(!(i instanceof Dc))return Array.isArray(i)?i.length===4||i.every(Array.isArray)?this.extend(Dc.convert(i)):this.extend(Zr.convert(i)):typeof i=="object"&&i!==null&&i.hasOwnProperty("lat")&&(i.hasOwnProperty("lon")||i.hasOwnProperty("lng"))?this.extend(Zr.convert(i)):this;if(p=i._sw,y=i._ne,!p||!y)return this}return l||d?(l.lng=Math.min(p.lng,l.lng),l.lat=Math.min(p.lat,l.lat),d.lng=Math.max(y.lng,d.lng),d.lat=Math.max(y.lat,d.lat)):(this._sw=new Zr(p.lng,p.lat),this._ne=new Zr(y.lng,y.lat)),this}getCenter(){return new Zr((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new Zr(this.getWest(),this.getNorth())}getSouthEast(){return new Zr(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(i){const{lng:l,lat:d}=Zr.convert(i);let p=this._sw.lng<=l&&l<=this._ne.lng;return this._sw.lng>this._ne.lng&&(p=this._sw.lng>=l&&l>=this._ne.lng),this._sw.lat<=d&&d<=this._ne.lat&&p}static convert(i){return!i||i instanceof Dc?i:new Dc(i)}}var sx=1e-6,Io=typeof Float32Array<"u"?Float32Array:Array;function tk(){var a=new Io(9);return Io!=Float32Array&&(a[1]=0,a[2]=0,a[3]=0,a[5]=0,a[6]=0,a[7]=0),a[0]=1,a[4]=1,a[8]=1,a}function rk(a,i,l){var d=i[0],p=i[1],y=i[2],x=i[3],w=i[4],P=i[5],C=i[6],j=i[7],$=i[8],G=l[0],X=l[1],K=l[2],te=l[3],se=l[4],me=l[5],Ae=l[6],ge=l[7],Te=l[8];return a[0]=G*d+X*x+K*C,a[1]=G*p+X*w+K*j,a[2]=G*y+X*P+K*$,a[3]=te*d+se*x+me*C,a[4]=te*p+se*w+me*j,a[5]=te*y+se*P+me*$,a[6]=Ae*d+ge*x+Te*C,a[7]=Ae*p+ge*w+Te*j,a[8]=Ae*y+ge*P+Te*$,a}function us(a){return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=1,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=1,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a}function FS(a,i){var l=i[0],d=i[1],p=i[2],y=i[3],x=i[4],w=i[5],P=i[6],C=i[7],j=i[8],$=i[9],G=i[10],X=i[11],K=i[12],te=i[13],se=i[14],me=i[15],Ae=l*w-d*x,ge=l*P-p*x,Te=l*C-y*x,Me=d*P-p*w,Ce=d*C-y*w,Ye=p*C-y*P,Xe=j*te-$*K,ot=j*se-G*K,bt=j*me-X*K,Qe=$*se-G*te,ut=$*me-X*te,dt=G*me-X*se,yt=Ae*dt-ge*ut+Te*Qe+Me*bt-Ce*ot+Ye*Xe;return yt?(a[0]=(w*dt-P*ut+C*Qe)*(yt=1/yt),a[1]=(p*ut-d*dt-y*Qe)*yt,a[2]=(te*Ye-se*Ce+me*Me)*yt,a[3]=(G*Ce-$*Ye-X*Me)*yt,a[4]=(P*bt-x*dt-C*ot)*yt,a[5]=(l*dt-p*bt+y*ot)*yt,a[6]=(se*Te-K*Ye-me*ge)*yt,a[7]=(j*Ye-G*Te+X*ge)*yt,a[8]=(x*ut-w*bt+C*Xe)*yt,a[9]=(d*bt-l*ut-y*Xe)*yt,a[10]=(K*Ce-te*Te+me*Ae)*yt,a[11]=($*Te-j*Ce-X*Ae)*yt,a[12]=(w*ot-x*Qe-P*Xe)*yt,a[13]=(l*Qe-d*ot+p*Xe)*yt,a[14]=(te*ge-K*Me-se*Ae)*yt,a[15]=(j*Me-$*ge+G*Ae)*yt,a):null}function yd(a,i,l){var d=i[0],p=i[1],y=i[2],x=i[3],w=i[4],P=i[5],C=i[6],j=i[7],$=i[8],G=i[9],X=i[10],K=i[11],te=i[12],se=i[13],me=i[14],Ae=i[15],ge=l[0],Te=l[1],Me=l[2],Ce=l[3];return a[0]=ge*d+Te*w+Me*$+Ce*te,a[1]=ge*p+Te*P+Me*G+Ce*se,a[2]=ge*y+Te*C+Me*X+Ce*me,a[3]=ge*x+Te*j+Me*K+Ce*Ae,a[4]=(ge=l[4])*d+(Te=l[5])*w+(Me=l[6])*$+(Ce=l[7])*te,a[5]=ge*p+Te*P+Me*G+Ce*se,a[6]=ge*y+Te*C+Me*X+Ce*me,a[7]=ge*x+Te*j+Me*K+Ce*Ae,a[8]=(ge=l[8])*d+(Te=l[9])*w+(Me=l[10])*$+(Ce=l[11])*te,a[9]=ge*p+Te*P+Me*G+Ce*se,a[10]=ge*y+Te*C+Me*X+Ce*me,a[11]=ge*x+Te*j+Me*K+Ce*Ae,a[12]=(ge=l[12])*d+(Te=l[13])*w+(Me=l[14])*$+(Ce=l[15])*te,a[13]=ge*p+Te*P+Me*G+Ce*se,a[14]=ge*y+Te*C+Me*X+Ce*me,a[15]=ge*x+Te*j+Me*K+Ce*Ae,a}function hg(a,i,l){var d,p,y,x,w,P,C,j,$,G,X,K,te=l[0],se=l[1],me=l[2];return i===a?(a[12]=i[0]*te+i[4]*se+i[8]*me+i[12],a[13]=i[1]*te+i[5]*se+i[9]*me+i[13],a[14]=i[2]*te+i[6]*se+i[10]*me+i[14],a[15]=i[3]*te+i[7]*se+i[11]*me+i[15]):(p=i[1],y=i[2],x=i[3],w=i[4],P=i[5],C=i[6],j=i[7],$=i[8],G=i[9],X=i[10],K=i[11],a[0]=d=i[0],a[1]=p,a[2]=y,a[3]=x,a[4]=w,a[5]=P,a[6]=C,a[7]=j,a[8]=$,a[9]=G,a[10]=X,a[11]=K,a[12]=d*te+w*se+$*me+i[12],a[13]=p*te+P*se+G*me+i[13],a[14]=y*te+C*se+X*me+i[14],a[15]=x*te+j*se+K*me+i[15]),a}function vd(a,i,l){var d=l[0],p=l[1],y=l[2];return a[0]=i[0]*d,a[1]=i[1]*d,a[2]=i[2]*d,a[3]=i[3]*d,a[4]=i[4]*p,a[5]=i[5]*p,a[6]=i[6]*p,a[7]=i[7]*p,a[8]=i[8]*y,a[9]=i[9]*y,a[10]=i[10]*y,a[11]=i[11]*y,a[12]=i[12],a[13]=i[13],a[14]=i[14],a[15]=i[15],a}function US(a,i,l){var d=Math.sin(l),p=Math.cos(l),y=i[4],x=i[5],w=i[6],P=i[7],C=i[8],j=i[9],$=i[10],G=i[11];return i!==a&&(a[0]=i[0],a[1]=i[1],a[2]=i[2],a[3]=i[3],a[12]=i[12],a[13]=i[13],a[14]=i[14],a[15]=i[15]),a[4]=y*p+C*d,a[5]=x*p+j*d,a[6]=w*p+$*d,a[7]=P*p+G*d,a[8]=C*p-y*d,a[9]=j*p-x*d,a[10]=$*p-w*d,a[11]=G*p-P*d,a}function lx(a,i,l){var d=Math.sin(l),p=Math.cos(l),y=i[0],x=i[1],w=i[2],P=i[3],C=i[8],j=i[9],$=i[10],G=i[11];return i!==a&&(a[4]=i[4],a[5]=i[5],a[6]=i[6],a[7]=i[7],a[12]=i[12],a[13]=i[13],a[14]=i[14],a[15]=i[15]),a[0]=y*p-C*d,a[1]=x*p-j*d,a[2]=w*p-$*d,a[3]=P*p-G*d,a[8]=y*d+C*p,a[9]=x*d+j*p,a[10]=w*d+$*p,a[11]=P*d+G*p,a}function nk(a,i){return a[0]=i[0],a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=i[1],a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=i[2],a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a}function ik(a,i,l){var d,p,y,x=l[0],w=l[1],P=l[2],C=Math.hypot(x,w,P);return C<sx?null:(x*=C=1/C,w*=C,P*=C,d=Math.sin(i),p=Math.cos(i),a[0]=x*x*(y=1-p)+p,a[1]=w*x*y+P*d,a[2]=P*x*y-w*d,a[3]=0,a[4]=x*w*y-P*d,a[5]=w*w*y+p,a[6]=P*w*y+x*d,a[7]=0,a[8]=x*P*y+w*d,a[9]=w*P*y-x*d,a[10]=P*P*y+p,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a)}Math.hypot||(Math.hypot=function(){for(var a=0,i=arguments.length;i--;)a+=arguments[i]*arguments[i];return Math.sqrt(a)});var gq=yd;function VS(){var a=new Io(3);return Io!=Float32Array&&(a[0]=0,a[1]=0,a[2]=0),a}function ok(a){var i=new Io(3);return i[0]=a[0],i[1]=a[1],i[2]=a[2],i}function fg(a){return Math.hypot(a[0],a[1],a[2])}function Yh(a,i,l){var d=new Io(3);return d[0]=a,d[1]=i,d[2]=l,d}function Ml(a,i,l){return a[0]=i[0]+l[0],a[1]=i[1]+l[1],a[2]=i[2]+l[2],a}function GS(a,i,l){return a[0]=i[0]-l[0],a[1]=i[1]-l[1],a[2]=i[2]-l[2],a}function ak(a,i,l){return a[0]=i[0]*l[0],a[1]=i[1]*l[1],a[2]=i[2]*l[2],a}function pg(a,i,l){return a[0]=Math.min(i[0],l[0]),a[1]=Math.min(i[1],l[1]),a[2]=Math.min(i[2],l[2]),a}function mg(a,i,l){return a[0]=Math.max(i[0],l[0]),a[1]=Math.max(i[1],l[1]),a[2]=Math.max(i[2],l[2]),a}function Zo(a,i,l){return a[0]=i[0]*l,a[1]=i[1]*l,a[2]=i[2]*l,a}function gg(a,i,l,d){return a[0]=i[0]+l[0]*d,a[1]=i[1]+l[1]*d,a[2]=i[2]+l[2]*d,a}function Ki(a,i){var l=i[0],d=i[1],p=i[2],y=l*l+d*d+p*p;return y>0&&(y=1/Math.sqrt(y)),a[0]=i[0]*y,a[1]=i[1]*y,a[2]=i[2]*y,a}function Sa(a,i){return a[0]*i[0]+a[1]*i[1]+a[2]*i[2]}function WS(a,i,l){var d=i[0],p=i[1],y=i[2],x=l[0],w=l[1],P=l[2];return a[0]=p*P-y*w,a[1]=y*x-d*P,a[2]=d*w-p*x,a}function Ln(a,i,l){var d=i[0],p=i[1],y=i[2],x=l[3]*d+l[7]*p+l[11]*y+l[15];return a[0]=(l[0]*d+l[4]*p+l[8]*y+l[12])/(x=x||1),a[1]=(l[1]*d+l[5]*p+l[9]*y+l[13])/x,a[2]=(l[2]*d+l[6]*p+l[10]*y+l[14])/x,a}function sk(a,i,l){var d=l[0],p=l[1],y=l[2],x=i[0],w=i[1],P=i[2],C=p*P-y*w,j=y*x-d*P,$=d*w-p*x,G=p*$-y*j,X=y*C-d*$,K=d*j-p*C,te=2*l[3];return j*=te,$*=te,X*=2,K*=2,a[0]=x+(C*=te)+(G*=2),a[1]=w+j+X,a[2]=P+$+K,a}var yg,ds=GS,yq=ak,vq=fg;function lk(a,i,l){return a[0]=i[0]*l,a[1]=i[1]*l,a[2]=i[2]*l,a[3]=i[3]*l,a}function ck(a,i){var l=i[0],d=i[1],p=i[2],y=i[3],x=l*l+d*d+p*p+y*y;return x>0&&(x=1/Math.sqrt(x)),a[0]=l*x,a[1]=d*x,a[2]=p*x,a[3]=y*x,a}function _d(a,i,l){var d=i[0],p=i[1],y=i[2],x=i[3];return a[0]=l[0]*d+l[4]*p+l[8]*y+l[12]*x,a[1]=l[1]*d+l[5]*p+l[9]*y+l[13]*x,a[2]=l[2]*d+l[6]*p+l[10]*y+l[14]*x,a[3]=l[3]*d+l[7]*p+l[11]*y+l[15]*x,a}function uk(){var a=new Io(4);return Io!=Float32Array&&(a[0]=0,a[1]=0,a[2]=0),a[3]=1,a}function dk(a){return a[0]=0,a[1]=0,a[2]=0,a[3]=1,a}function hk(a,i,l){l*=.5;var d=i[0],p=i[1],y=i[2],x=i[3],w=Math.sin(l),P=Math.cos(l);return a[0]=d*P+x*w,a[1]=p*P+y*w,a[2]=y*P-p*w,a[3]=x*P-d*w,a}function fk(a,i,l){l*=.5;var d=i[0],p=i[1],y=i[2],x=i[3],w=Math.sin(l),P=Math.cos(l);return a[0]=d*P-y*w,a[1]=p*P+x*w,a[2]=y*P+d*w,a[3]=x*P-p*w,a}VS(),yg=new Io(4),Io!=Float32Array&&(yg[0]=0,yg[1]=0,yg[2]=0,yg[3]=0);var _q=ck;VS(),Yh(1,0,0),Yh(0,1,0),uk(),uk(),tk();const xq=Fe([{type:"Float32",name:"a_globe_pos",components:3},{type:"Float32",name:"a_uv",components:2}]),{members:pk}=xq,mk=Fe([{name:"a_pos_3",components:3,type:"Int16"}]);var vg=Fe([{name:"a_pos",type:"Int16",components:2}]);class qS{constructor(i,l){this.pos=i,this.dir=l}intersectsPlane(i,l,d){const p=Sa(l,this.dir);if(Math.abs(p)<1e-6)return!1;const y=((i[0]-this.pos[0])*l[0]+(i[1]-this.pos[1])*l[1]+(i[2]-this.pos[2])*l[2])/p;return d[0]=this.pos[0]+this.dir[0]*y,d[1]=this.pos[1]+this.dir[1]*y,d[2]=this.pos[2]+this.dir[2]*y,!0}closestPointOnSphere(i,l,d){if(function(X,K){var te=X[0],se=X[1],me=X[2],Ae=K[0],ge=K[1],Te=K[2];return Math.abs(te-Ae)<=sx*Math.max(1,Math.abs(te),Math.abs(Ae))&&Math.abs(se-ge)<=sx*Math.max(1,Math.abs(se),Math.abs(ge))&&Math.abs(me-Te)<=sx*Math.max(1,Math.abs(me),Math.abs(Te))}(this.pos,i)||l===0)return d[0]=d[1]=d[2]=0,!1;const[p,y,x]=this.dir,w=this.pos[0]-i[0],P=this.pos[1]-i[1],C=this.pos[2]-i[2],j=p*p+y*y+x*x,$=2*(w*p+P*y+C*x),G=$*$-4*j*(w*w+P*P+C*C-l*l);if(G<0){const X=Math.max(-$/2,0),K=w+p*X,te=P+y*X,se=C+x*X,me=Math.hypot(K,te,se);return d[0]=K*l/me,d[1]=te*l/me,d[2]=se*l/me,!1}{const X=(-$-Math.sqrt(G))/(2*j);if(X<0){const K=Math.hypot(w,P,C);return d[0]=w*l/K,d[1]=P*l/K,d[2]=C*l/K,!1}return d[0]=w+p*X,d[1]=P+y*X,d[2]=C+x*X,!0}}}class HS{constructor(i,l,d,p,y){this.TL=i,this.TR=l,this.BR=d,this.BL=p,this.horizon=y}static fromInvProjectionMatrix(i,l,d){const p=[-1,1,1],y=[1,1,1],x=[1,-1,1],w=[-1,-1,1],P=Ln(p,p,i),C=Ln(y,y,i),j=Ln(x,x,i),$=Ln(w,w,i);return new HS(P,C,j,$,l/d)}}class XS{constructor(i,l){this.points=i,this.planes=l}static fromInvProjectionMatrix(i,l,d,p){const y=Math.pow(2,d),x=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(P=>{const C=_d([],P,i),j=1/C[3]/l*y;return function($,G,X){return $[0]=G[0]*X[0],$[1]=G[1]*X[1],$[2]=G[2]*X[2],$[3]=G[3]*X[3],$}(C,C,[j,j,p?1/C[3]:j,j])}),w=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(P=>{const C=Ki([],WS([],ds([],x[P[0]],x[P[1]]),ds([],x[P[2]],x[P[1]]))),j=-Sa(C,x[P[1]]);return C.concat(j)});return new XS(x,w)}}class Yi{static fromPoints(i){const l=[1/0,1/0,1/0],d=[-1/0,-1/0,-1/0];for(const p of i)pg(l,l,p),mg(d,d,p);return new Yi(l,d)}static applyTransform(i,l){const d=i.getCorners();for(let p=0;p<d.length;++p)Ln(d[p],d[p],l);return Yi.fromPoints(d)}constructor(i,l){this.min=i,this.max=l,this.center=Zo([],Ml([],this.min,this.max),.5)}quadrant(i){const l=[i%2==0,i<2],d=ok(this.min),p=ok(this.max);for(let y=0;y<l.length;y++)d[y]=l[y]?this.min[y]:this.center[y],p[y]=l[y]?this.center[y]:this.max[y];return p[2]=this.max[2],new Yi(d,p)}distanceX(i){return Math.max(Math.min(this.max[0],i[0]),this.min[0])-i[0]}distanceY(i){return Math.max(Math.min(this.max[1],i[1]),this.min[1])-i[1]}distanceZ(i){return Math.max(Math.min(this.max[2],i[2]),this.min[2])-i[2]}getCorners(){const i=this.min,l=this.max;return[[i[0],i[1],i[2]],[l[0],i[1],i[2]],[l[0],l[1],i[2]],[i[0],l[1],i[2]],[i[0],i[1],l[2]],[l[0],i[1],l[2]],[l[0],l[1],l[2]],[i[0],l[1],l[2]]]}intersects(i){const l=this.getCorners();let d=!0;for(let p=0;p<i.planes.length;p++){const y=i.planes[p];let x=0;for(let w=0;w<l.length;w++)x+=Sa(y,l[w])+y[3]>=0;if(x===0)return 0;x!==l.length&&(d=!1)}if(d)return 2;for(let p=0;p<3;p++){let y=Number.MAX_VALUE,x=-Number.MAX_VALUE;for(let w=0;w<i.points.length;w++){const P=i.points[w][p]-this.min[p];y=Math.min(y,P),x=Math.max(x,P)}if(x<0||y>this.max[p]-this.min[p])return 0}return 1}}const ZS=5,gk=6,$s=Jt/Math.PI/2,bq=16383,xd=64,_g=[xd,32,16],Ea=-$s,Ta=$s,wq=[new Yi([Ea,Ea,Ea],[Ta,Ta,Ta]),new Yi([Ea,Ea,Ea],[0,0,Ta]),new Yi([0,Ea,Ea],[Ta,0,Ta]),new Yi([Ea,0,Ea],[0,Ta,Ta]),new Yi([0,0,Ea],[Ta,Ta,Ta])];function cx(a){return a*$s/wg}function yk(a,i,l,d=!0){const p=Zo([],a._camera.position,a.worldSize),y=[i,l,1,1];_d(y,y,a.pixelMatrixInverse),lk(y,y,1/y[3]);const x=Ki([],ds([],y,p)),w=a.globeMatrix,P=[w[12],w[13],w[14]],C=ds([],P,p),j=fg(C),$=Ki([],C),G=a.worldSize/(2*Math.PI),X=Sa($,x),K=Math.asin(G/j);if(K<Math.acos(X)){if(!d)return null;const bt=[],Qe=[];Zo(bt,x,j/X),Ki(Qe,ds(Qe,bt,C)),Ki(x,Ml(x,C,Zo(x,Qe,Math.tan(K)*j)))}const te=[];new qS(p,x).closestPointOnSphere(P,G,te);const se=Ki([],Vr(w,0)),me=Ki([],Vr(w,1)),Ae=Ki([],Vr(w,2)),ge=Sa(se,te),Te=Sa(me,te),Me=Sa(Ae,te),Ce=Se(Math.asin(-Te/G));let Ye=Se(Math.atan2(ge,Me));Ye=a.center.lng+function(bt,Qe){const ut=(Qe-bt+180)%360-180;return ut<-180?ut+360:ut}(a.center.lng,Ye);const Xe=Us(Ye),ot=Pe(Vs(Ce),0,1);return new tf(Xe,ot)}class Sq{constructor(i,l,d){this.a=ds([],i,d),this.b=ds([],l,d),this.center=d;const p=Ki([],this.a),y=Ki([],this.b);this.angle=Math.acos(Sa(p,y))}}function KS(a,i){if(a.angle===0)return null;let l;return l=a.a[i]===0?1/a.angle*.5*Math.PI:1/a.angle*Math.atan(a.b[i]/a.a[i]/Math.sin(a.angle)-1/Math.tan(a.angle)),l<0||l>1?null:function(d,p,y,x){const w=Math.sin(y);return d*(Math.sin((1-x)*y)/w)+p*(Math.sin(x*y)/w)}(a.a[i],a.b[i],a.angle,Pe(l,0,1))+a.center[i]}function Fs(a){if(a.z<=1)return wq[a.z+2*a.y+a.x];const i=YS(ux(a));return Yi.fromPoints(i)}function bd(a,i,l){return Zo(a,a,1-l),gg(a,a,i,l)}function vk(a,i){const l=ef(i.zoom);if(l===0)return Fs(a);const d=ux(a),p=YS(d),y=Us(d.getWest())*i.worldSize,x=Us(d.getEast())*i.worldSize,w=Vs(d.getNorth())*i.worldSize,P=Vs(d.getSouth())*i.worldSize,C=[y,w,0],j=[x,w,0],$=[y,P,0],G=[x,P,0],X=FS([],i.globeMatrix);return Ln(C,C,X),Ln(j,j,X),Ln($,$,X),Ln(G,G,X),p[0]=bd(p[0],$,l),p[1]=bd(p[1],G,l),p[2]=bd(p[2],j,l),p[3]=bd(p[3],C,l),Yi.fromPoints(p)}function _k(a,i,l){for(const d of a)Ln(d,d,i),Zo(d,d,l)}function Eq(a,i,l){const d=i/a.worldSize,p=a.globeMatrix;if(l.z<=1){const Xe=Fs(l).getCorners();return _k(Xe,p,d),Yi.fromPoints(Xe)}const y=ux(l),x=YS(y);_k(x,p,d);const w=Number.MAX_VALUE,P=[-w,-w,-w],C=[w,w,w];if(y.contains(a.center)){for(const bt of x)pg(C,C,bt),mg(P,P,bt);P[2]=0;const Xe=a.point,ot=[Xe.x*d,Xe.y*d,0];return pg(C,C,ot),mg(P,P,ot),new Yi(C,P)}const j=[p[12]*d,p[13]*d,p[14]*d],$=y.getCenter(),G=Pe(a.center.lat,-Oi,Oi),X=Pe($.lat,-Oi,Oi),K=Us(a.center.lng),te=Vs(G);let se=K-Us($.lng);const me=te-Vs(X);se>.5?se-=1:se<-.5&&(se+=1);let Ae=0;Math.abs(se)>Math.abs(me)?Ae=se>=0?1:3:(Ae=me>=0?0:2,gg(j,j,[p[4]*d,p[5]*d,p[6]*d],-Math.sin(Ee(me>=0?y.getSouth():y.getNorth()))*$s));const ge=x[Ae],Te=x[(Ae+1)%4],Me=new Sq(ge,Te,j),Ce=[KS(Me,0)||ge[0],KS(Me,1)||ge[1],KS(Me,2)||ge[2]],Ye=ef(a.zoom);if(Ye>0){const Xe=function({x:bt,y:Qe,z:ut},dt,yt,Ct,nt){const Rt=1/(1<<ut);let Ut=bt*Rt,Lt=Ut+Rt,ar=Qe*Rt,Mt=ar+Rt,Xt=0;const sr=(Ut+Lt)/2-Ct;return sr>.5?Xt=-1:sr<-.5&&(Xt=1),Ut=((Ut+Xt)*dt-(Ct*=dt))*yt+Ct,Lt=((Lt+Xt)*dt-Ct)*yt+Ct,ar=(ar*dt-(nt*=dt))*yt+nt,Mt=(Mt*dt-nt)*yt+nt,[[Ut,Mt,0],[Lt,Mt,0],[Lt,ar,0],[Ut,ar,0]]}(l,i,a._pixelsPerMercatorPixel,K,te);for(let bt=0;bt<x.length;bt++)bd(x[bt],Xe[bt],Ye);const ot=Ml([],Xe[Ae],Xe[(Ae+1)%4]);Zo(ot,ot,.5),bd(Ce,ot,Ye)}for(const Xe of x)pg(C,C,Xe),mg(P,P,Xe);return C[2]=Math.min(ge[2],Te[2]),pg(C,C,Ce),mg(P,P,Ce),new Yi(C,P)}function ux({x:a,y:i,z:l}){const d=1/(1<<l),p=new Zr(Ko(a*d),Ii((i+1)*d)),y=new Zr(Ko((a+1)*d),Ii(i*d));return new Dc(p,y)}function YS(a){const i=Ee(a.getNorth()),l=Ee(a.getSouth()),d=Math.cos(i),p=Math.cos(l),y=Math.sin(i),x=Math.sin(l),w=a.getWest(),P=a.getEast();return[Jh(p,x,w),Jh(p,x,P),Jh(d,y,P),Jh(d,y,w)]}function Jh(a,i,l,d=$s){return l=Ee(l),[a*Math.sin(l)*d,-i*d,a*Math.cos(l)*d]}function Qh(a,i,l){return Jh(Math.cos(Ee(a)),Math.sin(Ee(a)),i,l)}function xg(a,i,l,d){const p=1<<l.z,y=(a/Jt+l.x)/p;return Qh(Ii((i/Jt+l.y)/p),Ko(y),d)}function dx({min:a,max:i}){return bq/Math.max(i[0]-a[0],i[1]-a[1],i[2]-a[2])}const xk=new Float64Array(16);function bg(a){const i=dx(a),l=nk(xk,[i,i,i]);return hg(l,l,((d=[])[0]=-(p=a.min)[0],d[1]=-p[1],d[2]=-p[2],d));var d,p}function JS(a){const i=(d=a.min,(l=xk)[0]=1,l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[5]=1,l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[10]=1,l[11]=0,l[12]=d[0],l[13]=d[1],l[14]=d[2],l[15]=1,l);var l,d;const p=1/dx(a);return vd(i,i,[p,p,p])}function bk(a,i,l,d,p){const y=function(P){const C=Jt/(2*Math.PI);return P/(2*Math.PI)/C}(l),x=[a,i,-l/(2*Math.PI)],w=us(new Float64Array(16));return hg(w,w,x),vd(w,w,[y,y,y]),US(w,w,Ee(-p)),lx(w,w,Ee(-d)),w}function ef(a){return rt(ZS,gk,a)}function wk(a,i){const l=Qh(i.lat,i.lng),d=function(K){const te=Qh(K._center.lat,K._center.lng);let se=WS([],Yh(0,1,0),te);const me=ik([],-K.angle,te);se=Ln(se,se,me),ik(me,-K._pitch,se);const Ae=Ki([],te);return Zo(Ae,Ae,cx(K.cameraToCenterDistance/K.pixelsPerMeter)),Ln(Ae,Ae,me),Ml([],te,Ae)}(a);return x=(p=GS([],d,l))[0],w=p[1],P=p[2],C=(y=l)[0],j=y[1],$=y[2],X=(G=Math.sqrt(x*x+w*w+P*P)*Math.sqrt(C*C+j*j+$*$))&&Sa(p,y)/G,Math.acos(Math.min(Math.max(X,-1),1));var p,y,x,w,P,C,j,$,G,X}function QS(a,i){return wk(a,i)>Math.PI/2*1.01}const Sk=Ee(85),Tq=Math.cos(Sk),Aq=Math.sin(Sk),wg=63710088e-1,Ek=2*Math.PI*wg;class Rc{constructor(i,l){if(isNaN(i)||isNaN(l))throw new Error(`Invalid LngLat object: (${i}, ${l})`);if(this.lng=+i,this.lat=+l,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Rc($e(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(i){const l=Math.PI/180,d=this.lat*l,p=i.lat*l,y=Math.sin(d)*Math.sin(p)+Math.cos(d)*Math.cos(p)*Math.cos((i.lng-this.lng)*l);return wg*Math.acos(Math.min(y,1))}toBounds(i=0){const l=360*i/40075017,d=l/Math.cos(Math.PI/180*this.lat);return new Dc(new Rc(this.lng-d,this.lat-l),new Rc(this.lng+d,this.lat+l))}toEcef(i){const l=cx(i);return Qh(this.lat,this.lng,$s+l)}static convert(i){if(i instanceof Rc)return i;if(Array.isArray(i)&&(i.length===2||i.length===3))return new Rc(Number(i[0]),Number(i[1]));if(!Array.isArray(i)&&typeof i=="object"&&i!==null)return new Rc(Number("lng"in i?i.lng:i.lon),Number(i.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}var Zr=Rc;function eE(a){return Ek*Math.cos(a*Math.PI/180)}function Us(a){return(180+a)/360}function Vs(a){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+a*Math.PI/360)))/360}function hs(a,i){return a/eE(i)}function Ko(a){return 360*a-180}function Ii(a){return 360/Math.PI*Math.atan(Math.exp((180-360*a)*Math.PI/180))-90}function Tk(a,i){return a*eE(Ii(i))}const Oi=85.051129;function Ak(a){return 1/Math.cos(a*Math.PI/180)}class tf{constructor(i,l,d=0){this.x=+i,this.y=+l,this.z=+d}static fromLngLat(i,l=0){const d=Zr.convert(i);return new tf(Us(d.lng),Vs(d.lat),hs(l,d.lat))}toLngLat(){return new Zr(Ko(this.x),Ii(this.y))}toAltitude(){return Tk(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/Ek*Ak(Ii(this.y))}}function tE(a,i,l,d,p,y,x,w,P){const C=(i+d)/2,j=(l+p)/2,$=new ne(C,j);w($),function(G,X,K,te,se,me){const Ae=K-se,ge=te-me;return Math.abs((te-X)*Ae-(K-G)*ge)/Math.hypot(Ae,ge)}($.x,$.y,y.x,y.y,x.x,x.y)>=P?(tE(a,i,l,C,j,y,$,w,P),tE(a,C,j,d,p,$,x,w,P)):a.push(x)}function Pk(a,i,l){let d=a[0],p=d.x,y=d.y;i(d);const x=[d];for(let w=1;w<a.length;w++){const P=a[w],{x:C,y:j}=P;i(P),tE(x,p,y,C,j,d,P,i,l),p=C,y=j,d=P}return x}function rE(a,i,l,d){if(d(i,l)){const p=i.add(l)._mult(.5);rE(a,i,p,d),rE(a,p,l,d)}else a.push(l)}function Pq(a,i){let l=a[0];const d=[l];for(let p=1;p<a.length;p++){const y=a[p];rE(d,l,y,i),l=y}return d}const nE=Math.pow(2,14)-1,Ck=-nE-1;function Cq(a,i){const l=Math.round(a.x*i),d=Math.round(a.y*i);return a.x=Pe(l,Ck,nE),a.y=Pe(d,Ck,nE),(l<a.x||l>a.x+1||d<a.y||d>a.y+1)&&Pt("Geometry exceeds allowed extent, reduce your vector tile buffer size"),a}function Il(a,i,l){const d=a.loadGeometry(),p=a.extent,y=Jt/p;if(i&&l&&l.projection.isReprojectedInTileSpace){const x=1<<i.z,{scale:w,x:P,y:C,projection:j}=l,$=G=>{const X=Ko((i.x+G.x/p)/x),K=Ii((i.y+G.y/p)/x),te=j.project(X,K);G.x=(te.x*w-P)*p,G.y=(te.y*w-C)*p};for(let G=0;G<d.length;G++)if(a.type!==1)d[G]=Pk(d[G],$,1);else{const X=[];for(const K of d[G])K.x<0||K.x>=p||K.y<0||K.y>=p||($(K),X.push(K));d[G]=X}}for(const x of d)for(const w of x)Cq(w,y);return d}function wd(a,i){return{type:a.type,id:a.id,properties:a.properties,geometry:i?Il(a):[]}}function hx(a,i,l,d,p){a.emplaceBack(2*i+(d+1)/2,2*l+(p+1)/2)}function fx(a,i,l){a.emplaceBack(i.x,i.y,i.z,l[0]*16384,l[1]*16384,l[2]*16384)}class iE{constructor(i){this.zoom=i.zoom,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map(l=>l.id),this.index=i.index,this.hasPattern=!1,this.projection=i.projection,this.layoutVertexArray=new xt,this.indexArray=new Gt,this.segments=new Fn,this.programConfigurations=new gd(i.layers,i.zoom),this.stateDependentLayerIds=this.layers.filter(l=>l.isStateDependent()).map(l=>l.id)}populate(i,l,d,p){const y=this.layers[0],x=[];let w=null;y.type==="circle"&&(w=y.layout.get("circle-sort-key"));for(const{feature:C,id:j,index:$,sourceLayerIndex:G}of i){const X=this.layers[0]._featureFilter.needGeometry,K=wd(C,X);if(!this.layers[0]._featureFilter.filter(new B(this.zoom),K,d))continue;const te=w?w.evaluate(K,{},d):void 0,se={id:j,properties:C.properties,type:C.type,sourceLayerIndex:G,index:$,geometry:X?K.geometry:Il(C,d,p),patterns:{},sortKey:te};x.push(se)}w&&x.sort((C,j)=>C.sortKey-j.sortKey);let P=null;p.projection.name==="globe"&&(this.globeExtVertexArray=new wt,P=p.projection);for(const C of x){const{geometry:j,index:$,sourceLayerIndex:G}=C,X=i[$].feature;this.addFeature(C,j,$,l.availableImages,d,P),l.featureIndex.insert(X,j,$,G,this.index)}}update(i,l,d,p){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(i,l,this.stateDependentLayers,d,p)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(i){this.uploaded||(this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,pq.members),this.indexBuffer=i.createIndexBuffer(this.indexArray),this.globeExtVertexArray&&(this.globeExtVertexBuffer=i.createVertexBuffer(this.globeExtVertexArray,mq.members))),this.programConfigurations.upload(i),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}addFeature(i,l,d,p,y,x){for(const w of l)for(const P of w){const C=P.x,j=P.y;if(C<0||C>=Jt||j<0||j>=Jt)continue;if(x){const X=x.projectTilePoint(C,j,y),K=x.upVector(y,C,j),te=this.globeExtVertexArray;fx(te,X,K),fx(te,X,K),fx(te,X,K),fx(te,X,K)}const $=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,i.sortKey),G=$.vertexLength;hx(this.layoutVertexArray,C,j,-1,-1),hx(this.layoutVertexArray,C,j,1,-1),hx(this.layoutVertexArray,C,j,1,1),hx(this.layoutVertexArray,C,j,-1,1),this.indexArray.emplaceBack(G,G+1,G+2),this.indexArray.emplaceBack(G,G+2,G+3),$.vertexLength+=4,$.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,i,d,{},p,y)}}function Mk(a,i){for(let l=0;l<a.length;l++)if(Sd(i,a[l]))return!0;for(let l=0;l<i.length;l++)if(Sd(a,i[l]))return!0;return!!oE(a,i)}function Mq(a,i,l){return!!Sd(a,i)||!!aE(i,a,l)}function Ik(a,i){if(a.length===1)return kk(i,a[0]);for(let l=0;l<i.length;l++){const d=i[l];for(let p=0;p<d.length;p++)if(Sd(a,d[p]))return!0}for(let l=0;l<a.length;l++)if(kk(i,a[l]))return!0;for(let l=0;l<i.length;l++)if(oE(a,i[l]))return!0;return!1}function Iq(a,i,l){if(a.length>1){if(oE(a,i))return!0;for(let d=0;d<i.length;d++)if(aE(i[d],a,l))return!0}for(let d=0;d<a.length;d++)if(aE(a[d],i,l))return!0;return!1}function oE(a,i){if(a.length===0||i.length===0)return!1;for(let l=0;l<a.length-1;l++){const d=a[l],p=a[l+1];for(let y=0;y<i.length-1;y++)if(Oq(d,p,i[y],i[y+1]))return!0}return!1}function Oq(a,i,l,d){return nr(a,l,d)!==nr(i,l,d)&&nr(a,i,l)!==nr(a,i,d)}function aE(a,i,l){const d=l*l;if(i.length===1)return a.distSqr(i[0])<d;for(let p=1;p<i.length;p++)if(Ok(a,i[p-1],i[p])<d)return!0;return!1}function Ok(a,i,l){const d=i.distSqr(l);if(d===0)return a.distSqr(i);const p=((a.x-i.x)*(l.x-i.x)+(a.y-i.y)*(l.y-i.y))/d;return a.distSqr(p<0?i:p>1?l:l.sub(i)._mult(p)._add(i))}function kk(a,i){let l,d,p,y=!1;for(let x=0;x<a.length;x++){l=a[x];for(let w=0,P=l.length-1;w<l.length;P=w++)d=l[w],p=l[P],d.y>i.y!=p.y>i.y&&i.x<(p.x-d.x)*(i.y-d.y)/(p.y-d.y)+d.x&&(y=!y)}return y}function Sd(a,i){let l=!1;for(let d=0,p=a.length-1;d<a.length;p=d++){const y=a[d],x=a[p];y.y>i.y!=x.y>i.y&&i.x<(x.x-y.x)*(i.y-y.y)/(x.y-y.y)+y.x&&(l=!l)}return l}function Dk(a,i,l,d,p){for(const x of a)if(i<=x.x&&l<=x.y&&d>=x.x&&p>=x.y)return!0;const y=[new ne(i,l),new ne(i,p),new ne(d,p),new ne(d,l)];if(a.length>2){for(const x of y)if(Sd(a,x))return!0}for(let x=0;x<a.length-1;x++)if(kq(a[x],a[x+1],y))return!0;return!1}function kq(a,i,l){const d=l[0],p=l[2];if(a.x<d.x&&i.x<d.x||a.x>p.x&&i.x>p.x||a.y<d.y&&i.y<d.y||a.y>p.y&&i.y>p.y)return!1;const y=nr(a,i,l[0]);return y!==nr(a,i,l[1])||y!==nr(a,i,l[2])||y!==nr(a,i,l[3])}function rf(a,i,l){const d=i.paint.get(a).value;return d.kind==="constant"?d.value:l.programConfigurations.get(i.id).getMaxValue(a)}function px(a){return Math.sqrt(a[0]*a[0]+a[1]*a[1])}function Rk(a,i,l,d,p){if(!i[0]&&!i[1])return a;const y=ne.convert(i)._mult(p);l==="viewport"&&y._rotate(-d);const x=[];for(let w=0;w<a.length;w++)x.push(a[w].sub(y));return x}function Lk(a,i,l,d){const p=ne.convert(a)._mult(d);return i==="viewport"&&p._rotate(-l),p}$t(iE,"CircleBucket",{omit:["layers"]});const Dq=new _e({"circle-sort-key":new le(it.layout_circle["circle-sort-key"])});var Rq={paint:new _e({"circle-radius":new le(it.paint_circle["circle-radius"]),"circle-color":new le(it.paint_circle["circle-color"]),"circle-blur":new le(it.paint_circle["circle-blur"]),"circle-opacity":new le(it.paint_circle["circle-opacity"]),"circle-translate":new ee(it.paint_circle["circle-translate"]),"circle-translate-anchor":new ee(it.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new ee(it.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new ee(it.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new le(it.paint_circle["circle-stroke-width"]),"circle-stroke-color":new le(it.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new le(it.paint_circle["circle-stroke-opacity"])}),layout:Dq};function jk(a,i,l,d,p,y,x,w,P){if(y&&a.queryGeometry.isAboveHorizon)return!1;y&&(P*=a.pixelToTileUnitsFactor);const C=a.tileID.canonical,j=l.projection.upVectorScale(C,l.center.lat,l.worldSize).metersToTile;for(const $ of i)for(const G of $){const X=G.add(w),K=p&&l.elevation?l.elevation.exaggeration()*p.getElevationAt(X.x,X.y,!0):0,te=l.projection.projectTilePoint(X.x,X.y,C);if(K>0){const ge=l.projection.upVector(C,X.x,X.y);te.x+=ge[0]*j*K,te.y+=ge[1]*j*K,te.z+=ge[2]*j*K}const se=y?X:Lq(te.x,te.y,te.z,d),me=y?a.tilespaceRays.map(ge=>zq(ge,K)):a.queryGeometry.screenGeometry,Ae=_d([],[te.x,te.y,te.z,1],d);if(!x&&y?P*=Ae[3]/l.cameraToCenterDistance:x&&!y&&(P*=l.cameraToCenterDistance/Ae[3]),y){const ge=Ii((G.y/Jt+C.y)/(1<<C.z));P/=l.projection.pixelsPerMeter(ge,1)/hs(1,ge)}if(Mq(me,se,P))return!0}return!1}function Lq(a,i,l,d){const p=_d([],[a,i,l,1],d);return new ne(p[0]/p[3],p[1]/p[3])}const zk=Yh(0,0,0),jq=Yh(0,0,1);function zq(a,i){const l=VS();return zk[2]=i,a.intersectsPlane(zk,jq,l),new ne(l[0],l[1])}class Nk extends iE{}function Bk(a,{width:i,height:l},d,p){if(p){if(p instanceof Uint8ClampedArray)p=new Uint8Array(p.buffer);else if(p.length!==i*l*d)throw new RangeError("mismatched image size")}else p=new Uint8Array(i*l*d);return a.width=i,a.height=l,a.data=p,a}function $k(a,i,l){const{width:d,height:p}=i;d===a.width&&p===a.height||(sE(a,i,{x:0,y:0},{x:0,y:0},{width:Math.min(a.width,d),height:Math.min(a.height,p)},l),a.width=d,a.height=p,a.data=i.data)}function sE(a,i,l,d,p,y){if(p.width===0||p.height===0)return i;if(p.width>a.width||p.height>a.height||l.x>a.width-p.width||l.y>a.height-p.height)throw new RangeError("out of range source coordinates for image copy");if(p.width>i.width||p.height>i.height||d.x>i.width-p.width||d.y>i.height-p.height)throw new RangeError("out of range destination coordinates for image copy");const x=a.data,w=i.data;for(let P=0;P<p.height;P++){const C=((l.y+P)*a.width+l.x)*y,j=((d.y+P)*i.width+d.x)*y;for(let $=0;$<p.width*y;$++)w[j+$]=x[C+$]}return i}$t(Nk,"HeatmapBucket",{omit:["layers"]});class Ol{constructor(i,l){Bk(this,i,1,l)}resize(i){$k(this,new Ol(i),1)}clone(){return new Ol({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(i,l,d,p,y){sE(i,l,d,p,y,1)}}class Oo{constructor(i,l){Bk(this,i,4,l)}resize(i){$k(this,new Oo(i),4)}replace(i,l){l?this.data.set(i):this.data=i instanceof Uint8ClampedArray?new Uint8Array(i.buffer):i}clone(){return new Oo({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(i,l,d,p,y){sE(i,l,d,p,y,4)}}$t(Ol,"AlphaImage"),$t(Oo,"RGBAImage");var Nq={paint:new _e({"heatmap-radius":new le(it.paint_heatmap["heatmap-radius"]),"heatmap-weight":new le(it.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new ee(it.paint_heatmap["heatmap-intensity"]),"heatmap-color":new ye(it.paint_heatmap["heatmap-color"]),"heatmap-opacity":new ee(it.paint_heatmap["heatmap-opacity"])})};function lE(a){const i={},l=a.resolution||256,d=a.clips?a.clips.length:1,p=a.image||new Oo({width:l,height:d}),y=(x,w,P)=>{i[a.evaluationKey]=P;const C=a.expression.evaluate(i);p.data[x+w+0]=Math.floor(255*C.r/C.a),p.data[x+w+1]=Math.floor(255*C.g/C.a),p.data[x+w+2]=Math.floor(255*C.b/C.a),p.data[x+w+3]=Math.floor(255*C.a)};if(a.clips)for(let x=0,w=0;x<d;++x,w+=4*l)for(let P=0,C=0;P<l;P++,C+=4){const j=P/(l-1),{start:$,end:G}=a.clips[x];y(w,C,$*(1-j)+G*j)}else for(let x=0,w=0;x<l;x++,w+=4)y(0,w,x/(l-1));return p}var Bq={paint:new _e({"hillshade-illumination-direction":new ee(it.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new ee(it.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new ee(it.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new ee(it.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new ee(it.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new ee(it.paint_hillshade["hillshade-accent-color"])})};const $q=Fe([{name:"a_pos",components:2,type:"Int16"}],4),{members:Fq}=$q;var cE={exports:{}};function mx(a,i,l){l=l||2;var d,p,y,x,w,P,C,j=i&&i.length,$=j?i[0]*l:a.length,G=Fk(a,0,$,l,!0),X=[];if(!G||G.next===G.prev)return X;if(j&&(G=function(te,se,me,Ae){var ge,Te,Me,Ce=[];for(ge=0,Te=se.length;ge<Te;ge++)(Me=Fk(te,se[ge]*Ae,ge<Te-1?se[ge+1]*Ae:te.length,Ae,!1))===Me.next&&(Me.steiner=!0),Ce.push(Zq(Me));for(Ce.sort(qq),ge=0;ge<Ce.length;ge++)me=Hq(Ce[ge],me);return me}(a,i,G,l)),a.length>80*l){d=y=a[0],p=x=a[1];for(var K=l;K<$;K+=l)(w=a[K])<d&&(d=w),(P=a[K+1])<p&&(p=P),w>y&&(y=w),P>x&&(x=P);C=(C=Math.max(y-d,x-p))!==0?32767/C:0}return Sg(G,X,l,d,p,C,0),X}function Fk(a,i,l,d,p){var y,x;if(p===hE(a,i,l,d)>0)for(y=i;y<l;y+=d)x=Gk(y,a[y],a[y+1],x);else for(y=l-d;y>=i;y-=d)x=Gk(y,a[y],a[y+1],x);return x&&gx(x,x.next)&&(Tg(x),x=x.next),x}function Ed(a,i){if(!a)return a;i||(i=a);var l,d=a;do if(l=!1,d.steiner||!gx(d,d.next)&&Un(d.prev,d,d.next)!==0)d=d.next;else{if(Tg(d),(d=i=d.prev)===d.next)break;l=!0}while(l||d!==i);return i}function Sg(a,i,l,d,p,y,x){if(a){!x&&y&&function(j,$,G,X){var K=j;do K.z===0&&(K.z=uE(K.x,K.y,$,G,X)),K.prevZ=K.prev,K.nextZ=K.next,K=K.next;while(K!==j);K.prevZ.nextZ=null,K.prevZ=null,function(te){var se,me,Ae,ge,Te,Me,Ce,Ye,Xe=1;do{for(me=te,te=null,Te=null,Me=0;me;){for(Me++,Ae=me,Ce=0,se=0;se<Xe&&(Ce++,Ae=Ae.nextZ);se++);for(Ye=Xe;Ce>0||Ye>0&&Ae;)Ce!==0&&(Ye===0||!Ae||me.z<=Ae.z)?(ge=me,me=me.nextZ,Ce--):(ge=Ae,Ae=Ae.nextZ,Ye--),Te?Te.nextZ=ge:te=ge,ge.prevZ=Te,Te=ge;me=Ae}Te.nextZ=null,Xe*=2}while(Me>1)}(K)}(a,d,p,y);for(var w,P,C=a;a.prev!==a.next;)if(w=a.prev,P=a.next,y?Vq(a,d,p,y):Uq(a))i.push(w.i/l|0),i.push(a.i/l|0),i.push(P.i/l|0),Tg(a),a=P.next,C=P.next;else if((a=P)===C){x?x===1?Sg(a=Gq(Ed(a),i,l),i,l,d,p,y,2):x===2&&Wq(a,i,l,d,p,y):Sg(Ed(a),i,l,d,p,y,1);break}}}function Uq(a){var i=a.prev,l=a,d=a.next;if(Un(i,l,d)>=0)return!1;for(var p=i.x,y=l.x,x=d.x,w=i.y,P=l.y,C=d.y,j=p<y?p<x?p:x:y<x?y:x,$=w<P?w<C?w:C:P<C?P:C,G=p>y?p>x?p:x:y>x?y:x,X=w>P?w>C?w:C:P>C?P:C,K=d.next;K!==i;){if(K.x>=j&&K.x<=G&&K.y>=$&&K.y<=X&&nf(p,w,y,P,x,C,K.x,K.y)&&Un(K.prev,K,K.next)>=0)return!1;K=K.next}return!0}function Vq(a,i,l,d){var p=a.prev,y=a,x=a.next;if(Un(p,y,x)>=0)return!1;for(var w=p.x,P=y.x,C=x.x,j=p.y,$=y.y,G=x.y,X=w<P?w<C?w:C:P<C?P:C,K=j<$?j<G?j:G:$<G?$:G,te=w>P?w>C?w:C:P>C?P:C,se=j>$?j>G?j:G:$>G?$:G,me=uE(X,K,i,l,d),Ae=uE(te,se,i,l,d),ge=a.prevZ,Te=a.nextZ;ge&&ge.z>=me&&Te&&Te.z<=Ae;){if(ge.x>=X&&ge.x<=te&&ge.y>=K&&ge.y<=se&&ge!==p&&ge!==x&&nf(w,j,P,$,C,G,ge.x,ge.y)&&Un(ge.prev,ge,ge.next)>=0||(ge=ge.prevZ,Te.x>=X&&Te.x<=te&&Te.y>=K&&Te.y<=se&&Te!==p&&Te!==x&&nf(w,j,P,$,C,G,Te.x,Te.y)&&Un(Te.prev,Te,Te.next)>=0))return!1;Te=Te.nextZ}for(;ge&&ge.z>=me;){if(ge.x>=X&&ge.x<=te&&ge.y>=K&&ge.y<=se&&ge!==p&&ge!==x&&nf(w,j,P,$,C,G,ge.x,ge.y)&&Un(ge.prev,ge,ge.next)>=0)return!1;ge=ge.prevZ}for(;Te&&Te.z<=Ae;){if(Te.x>=X&&Te.x<=te&&Te.y>=K&&Te.y<=se&&Te!==p&&Te!==x&&nf(w,j,P,$,C,G,Te.x,Te.y)&&Un(Te.prev,Te,Te.next)>=0)return!1;Te=Te.nextZ}return!0}function Gq(a,i,l){var d=a;do{var p=d.prev,y=d.next.next;!gx(p,y)&&Uk(p,d,d.next,y)&&Eg(p,y)&&Eg(y,p)&&(i.push(p.i/l|0),i.push(d.i/l|0),i.push(y.i/l|0),Tg(d),Tg(d.next),d=a=y),d=d.next}while(d!==a);return Ed(d)}function Wq(a,i,l,d,p,y){var x=a;do{for(var w=x.next.next;w!==x.prev;){if(x.i!==w.i&&Kq(x,w)){var P=Vk(x,w);return x=Ed(x,x.next),P=Ed(P,P.next),Sg(x,i,l,d,p,y,0),void Sg(P,i,l,d,p,y,0)}w=w.next}x=x.next}while(x!==a)}function qq(a,i){return a.x-i.x}function Hq(a,i){var l=function(p,y){var x,w=y,P=p.x,C=p.y,j=-1/0;do{if(C<=w.y&&C>=w.next.y&&w.next.y!==w.y){var $=w.x+(C-w.y)*(w.next.x-w.x)/(w.next.y-w.y);if($<=P&&$>j&&(j=$,x=w.x<w.next.x?w:w.next,$===P))return x}w=w.next}while(w!==y);if(!x)return null;var G,X=x,K=x.x,te=x.y,se=1/0;w=x;do P>=w.x&&w.x>=K&&P!==w.x&&nf(C<te?P:j,C,K,te,C<te?j:P,C,w.x,w.y)&&(G=Math.abs(C-w.y)/(P-w.x),Eg(w,p)&&(G<se||G===se&&(w.x>x.x||w.x===x.x&&Xq(x,w)))&&(x=w,se=G)),w=w.next;while(w!==X);return x}(a,i);if(!l)return i;var d=Vk(l,a);return Ed(d,d.next),Ed(l,l.next)}function Xq(a,i){return Un(a.prev,a,i.prev)<0&&Un(i.next,a,a.next)<0}function uE(a,i,l,d,p){return(a=1431655765&((a=858993459&((a=252645135&((a=16711935&((a=(a-l)*p|0)|a<<8))|a<<4))|a<<2))|a<<1))|(i=1431655765&((i=858993459&((i=252645135&((i=16711935&((i=(i-d)*p|0)|i<<8))|i<<4))|i<<2))|i<<1))<<1}function Zq(a){var i=a,l=a;do(i.x<l.x||i.x===l.x&&i.y<l.y)&&(l=i),i=i.next;while(i!==a);return l}function nf(a,i,l,d,p,y,x,w){return(p-x)*(i-w)>=(a-x)*(y-w)&&(a-x)*(d-w)>=(l-x)*(i-w)&&(l-x)*(y-w)>=(p-x)*(d-w)}function Kq(a,i){return a.next.i!==i.i&&a.prev.i!==i.i&&!function(l,d){var p=l;do{if(p.i!==l.i&&p.next.i!==l.i&&p.i!==d.i&&p.next.i!==d.i&&Uk(p,p.next,l,d))return!0;p=p.next}while(p!==l);return!1}(a,i)&&(Eg(a,i)&&Eg(i,a)&&function(l,d){var p=l,y=!1,x=(l.x+d.x)/2,w=(l.y+d.y)/2;do p.y>w!=p.next.y>w&&p.next.y!==p.y&&x<(p.next.x-p.x)*(w-p.y)/(p.next.y-p.y)+p.x&&(y=!y),p=p.next;while(p!==l);return y}(a,i)&&(Un(a.prev,a,i.prev)||Un(a,i.prev,i))||gx(a,i)&&Un(a.prev,a,a.next)>0&&Un(i.prev,i,i.next)>0)}function Un(a,i,l){return(i.y-a.y)*(l.x-i.x)-(i.x-a.x)*(l.y-i.y)}function gx(a,i){return a.x===i.x&&a.y===i.y}function Uk(a,i,l,d){var p=vx(Un(a,i,l)),y=vx(Un(a,i,d)),x=vx(Un(l,d,a)),w=vx(Un(l,d,i));return p!==y&&x!==w||!(p!==0||!yx(a,l,i))||!(y!==0||!yx(a,d,i))||!(x!==0||!yx(l,a,d))||!(w!==0||!yx(l,i,d))}function yx(a,i,l){return i.x<=Math.max(a.x,l.x)&&i.x>=Math.min(a.x,l.x)&&i.y<=Math.max(a.y,l.y)&&i.y>=Math.min(a.y,l.y)}function vx(a){return a>0?1:a<0?-1:0}function Eg(a,i){return Un(a.prev,a,a.next)<0?Un(a,i,a.next)>=0&&Un(a,a.prev,i)>=0:Un(a,i,a.prev)<0||Un(a,a.next,i)<0}function Vk(a,i){var l=new dE(a.i,a.x,a.y),d=new dE(i.i,i.x,i.y),p=a.next,y=i.prev;return a.next=i,i.prev=a,l.next=p,p.prev=l,d.next=l,l.prev=d,y.next=d,d.prev=y,d}function Gk(a,i,l,d){var p=new dE(a,i,l);return d?(p.next=d.next,p.prev=d,d.next.prev=p,d.next=p):(p.prev=p,p.next=p),p}function Tg(a){a.next.prev=a.prev,a.prev.next=a.next,a.prevZ&&(a.prevZ.nextZ=a.nextZ),a.nextZ&&(a.nextZ.prevZ=a.prevZ)}function dE(a,i,l){this.i=a,this.x=i,this.y=l,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function hE(a,i,l,d){for(var p=0,y=i,x=l-d;y<l;y+=d)p+=(a[x]-a[y])*(a[y+1]+a[x+1]),x=y;return p}cE.exports=mx,cE.exports.default=mx,mx.deviation=function(a,i,l,d){var p=i&&i.length,y=Math.abs(hE(a,0,p?i[0]*l:a.length,l));if(p)for(var x=0,w=i.length;x<w;x++)y-=Math.abs(hE(a,i[x]*l,x<w-1?i[x+1]*l:a.length,l));var P=0;for(x=0;x<d.length;x+=3){var C=d[x]*l,j=d[x+1]*l,$=d[x+2]*l;P+=Math.abs((a[C]-a[$])*(a[j+1]-a[C+1])-(a[C]-a[j])*(a[$+1]-a[C+1]))}return y===0&&P===0?0:Math.abs((P-y)/y)},mx.flatten=function(a){for(var i=a[0][0].length,l={vertices:[],holes:[],dimensions:i},d=0,p=0;p<a.length;p++){for(var y=0;y<a[p].length;y++)for(var x=0;x<i;x++)l.vertices.push(a[p][y][x]);p>0&&l.holes.push(d+=a[p-1].length)}return l};var fE=U(cE.exports);function Yq(a,i,l,d,p){Wk(a,i,l,d||a.length-1,p||Jq)}function Wk(a,i,l,d,p){for(;d>l;){if(d-l>600){var y=d-l+1,x=i-l+1,w=Math.log(y),P=.5*Math.exp(2*w/3),C=.5*Math.sqrt(w*P*(y-P)/y)*(x-y/2<0?-1:1);Wk(a,i,Math.max(l,Math.floor(i-x*P/y+C)),Math.min(d,Math.floor(i+(y-x)*P/y+C)),p)}var j=a[i],$=l,G=d;for(Ag(a,l,i),p(a[d],j)>0&&Ag(a,l,d);$<G;){for(Ag(a,$,G),$++,G--;p(a[$],j)<0;)$++;for(;p(a[G],j)>0;)G--}p(a[l],j)===0?Ag(a,l,G):Ag(a,++G,d),G<=i&&(l=G+1),i<=G&&(d=G-1)}}function Ag(a,i,l){var d=a[i];a[i]=a[l],a[l]=d}function Jq(a,i){return a<i?-1:a>i?1:0}function pE(a,i){const l=a.length;if(l<=1)return[a];const d=[];let p,y;for(let x=0;x<l;x++){const w=tr(a[x]);w!==0&&(a[x].area=Math.abs(w),y===void 0&&(y=w<0),y===w<0?(p&&d.push(p),p=[a[x]]):p.push(a[x]))}if(p&&d.push(p),i>1)for(let x=0;x<d.length;x++)d[x].length<=i||(Yq(d[x],i,1,d[x].length-1,Qq),d[x]=d[x].slice(0,i));return d}function Qq(a,i){return i.area-a.area}function mE(a,i,l){const d=l.patternDependencies;let p=!1;for(const y of i){const x=y.paint.get(`${a}-pattern`);x.isConstant()||(p=!0);const w=x.constantOr(null);w&&(p=!0,d[w]=!0)}return p}function gE(a,i,l,d,p){const y=p.patternDependencies;for(const x of i){const w=x.paint.get(`${a}-pattern`).value;if(w.kind!=="constant"){let P=w.evaluate({zoom:d},l,{},p.availableImages);P=P&&P.name?P.name:P,y[P]=!0,l.patterns[x.id]=P}}return l}class _x{constructor(i){this.zoom=i.zoom,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map(l=>l.id),this.index=i.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new xt,this.indexArray=new Gt,this.indexArray2=new di,this.programConfigurations=new gd(i.layers,i.zoom),this.segments=new Fn,this.segments2=new Fn,this.stateDependentLayerIds=this.layers.filter(l=>l.isStateDependent()).map(l=>l.id),this.projection=i.projection}populate(i,l,d,p){this.hasPattern=mE("fill",this.layers,l);const y=this.layers[0].layout.get("fill-sort-key"),x=[];for(const{feature:w,id:P,index:C,sourceLayerIndex:j}of i){const $=this.layers[0]._featureFilter.needGeometry,G=wd(w,$);if(!this.layers[0]._featureFilter.filter(new B(this.zoom),G,d))continue;const X=y?y.evaluate(G,{},d,l.availableImages):void 0,K={id:P,properties:w.properties,type:w.type,sourceLayerIndex:j,index:C,geometry:$?G.geometry:Il(w,d,p),patterns:{},sortKey:X};x.push(K)}y&&x.sort((w,P)=>w.sortKey-P.sortKey);for(const w of x){const{geometry:P,index:C,sourceLayerIndex:j}=w;if(this.hasPattern){const $=gE("fill",this.layers,w,this.zoom,l);this.patternFeatures.push($)}else this.addFeature(w,P,C,d,{},l.availableImages);l.featureIndex.insert(i[C].feature,P,C,j,this.index)}}update(i,l,d,p){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(i,l,this.stateDependentLayers,d,p)}addFeatures(i,l,d,p,y){for(const x of this.patternFeatures)this.addFeature(x,x.geometry,x.index,l,d,p)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(i){this.uploaded||(this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,Fq),this.indexBuffer=i.createIndexBuffer(this.indexArray),this.indexBuffer2=i.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(i),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(i,l,d,p,y,x=[]){for(const w of pE(l,500)){let P=0;for(const K of w)P+=K.length;const C=this.segments.prepareSegment(P,this.layoutVertexArray,this.indexArray),j=C.vertexLength,$=[],G=[];for(const K of w){if(K.length===0)continue;K!==w[0]&&G.push($.length/2);const te=this.segments2.prepareSegment(K.length,this.layoutVertexArray,this.indexArray2),se=te.vertexLength;this.layoutVertexArray.emplaceBack(K[0].x,K[0].y),this.indexArray2.emplaceBack(se+K.length-1,se),$.push(K[0].x),$.push(K[0].y);for(let me=1;me<K.length;me++)this.layoutVertexArray.emplaceBack(K[me].x,K[me].y),this.indexArray2.emplaceBack(se+me-1,se+me),$.push(K[me].x),$.push(K[me].y);te.vertexLength+=K.length,te.primitiveLength+=K.length}const X=fE($,G);for(let K=0;K<X.length;K+=3)this.indexArray.emplaceBack(j+X[K],j+X[K+1],j+X[K+2]);C.vertexLength+=P,C.primitiveLength+=X.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,i,d,y,x,p)}}$t(_x,"FillBucket",{omit:["layers","patternFeatures"]});const eH=new _e({"fill-sort-key":new le(it.layout_fill["fill-sort-key"])});var tH={paint:new _e({"fill-antialias":new ee(it.paint_fill["fill-antialias"]),"fill-opacity":new le(it.paint_fill["fill-opacity"]),"fill-color":new le(it.paint_fill["fill-color"]),"fill-outline-color":new le(it.paint_fill["fill-outline-color"]),"fill-translate":new ee(it.paint_fill["fill-translate"]),"fill-translate-anchor":new ee(it.paint_fill["fill-translate-anchor"]),"fill-pattern":new le(it.paint_fill["fill-pattern"])}),layout:eH};const rH=Fe([{name:"a_pos_normal_ed",components:4,type:"Int16"}]),nH=Fe([{name:"a_centroid_pos",components:2,type:"Uint16"}]),iH=Fe([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]),{members:oH}=rH;var xx={},aH=Z,qk=of;function of(a,i,l,d,p){this.properties={},this.extent=l,this.type=0,this._pbf=a,this._geometry=-1,this._keys=d,this._values=p,a.readFields(sH,this,i)}function sH(a,i,l){a==1?i.id=l.readVarint():a==2?function(d,p){for(var y=d.readVarint()+d.pos;d.pos<y;){var x=p._keys[d.readVarint()],w=p._values[d.readVarint()];p.properties[x]=w}}(l,i):a==3?i.type=l.readVarint():a==4&&(i._geometry=l.pos)}function lH(a){for(var i,l,d=0,p=0,y=a.length,x=y-1;p<y;x=p++)d+=((l=a[x]).x-(i=a[p]).x)*(i.y+l.y);return d}of.types=["Unknown","Point","LineString","Polygon"],of.prototype.loadGeometry=function(){var a=this._pbf;a.pos=this._geometry;for(var i,l=a.readVarint()+a.pos,d=1,p=0,y=0,x=0,w=[];a.pos<l;){if(p<=0){var P=a.readVarint();d=7&P,p=P>>3}if(p--,d===1||d===2)y+=a.readSVarint(),x+=a.readSVarint(),d===1&&(i&&w.push(i),i=[]),i.push(new aH(y,x));else{if(d!==7)throw new Error("unknown command "+d);i&&i.push(i[0].clone())}}return i&&w.push(i),w},of.prototype.bbox=function(){var a=this._pbf;a.pos=this._geometry;for(var i=a.readVarint()+a.pos,l=1,d=0,p=0,y=0,x=1/0,w=-1/0,P=1/0,C=-1/0;a.pos<i;){if(d<=0){var j=a.readVarint();l=7&j,d=j>>3}if(d--,l===1||l===2)(p+=a.readSVarint())<x&&(x=p),p>w&&(w=p),(y+=a.readSVarint())<P&&(P=y),y>C&&(C=y);else if(l!==7)throw new Error("unknown command "+l)}return[x,P,w,C]},of.prototype.toGeoJSON=function(a,i,l){var d,p,y=this.extent*Math.pow(2,l),x=this.extent*a,w=this.extent*i,P=this.loadGeometry(),C=of.types[this.type];function j(X){for(var K=0;K<X.length;K++){var te=X[K];X[K]=[360*(te.x+x)/y-180,360/Math.PI*Math.atan(Math.exp((180-360*(te.y+w)/y)*Math.PI/180))-90]}}switch(this.type){case 1:var $=[];for(d=0;d<P.length;d++)$[d]=P[d][0];j(P=$);break;case 2:for(d=0;d<P.length;d++)j(P[d]);break;case 3:for(P=function(X){var K=X.length;if(K<=1)return[X];for(var te,se,me=[],Ae=0;Ae<K;Ae++){var ge=lH(X[Ae]);ge!==0&&(se===void 0&&(se=ge<0),se===ge<0?(te&&me.push(te),te=[X[Ae]]):te.push(X[Ae]))}return te&&me.push(te),me}(P),d=0;d<P.length;d++)for(p=0;p<P[d].length;p++)j(P[d][p])}P.length===1?P=P[0]:C="Multi"+C;var G={type:"Feature",geometry:{type:C,coordinates:P},properties:this.properties};return"id"in this&&(G.id=this.id),G};var cH=qk,Hk=Xk;function Xk(a,i){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=a,this._keys=[],this._values=[],this._features=[],a.readFields(uH,this,i),this.length=this._features.length}function uH(a,i,l){a===15?i.version=l.readVarint():a===1?i.name=l.readString():a===5?i.extent=l.readVarint():a===2?i._features.push(l.pos):a===3?i._keys.push(l.readString()):a===4&&i._values.push(function(d){for(var p=null,y=d.readVarint()+d.pos;d.pos<y;){var x=d.readVarint()>>3;p=x===1?d.readString():x===2?d.readFloat():x===3?d.readDouble():x===4?d.readVarint64():x===5?d.readVarint():x===6?d.readSVarint():x===7?d.readBoolean():null}return p}(l))}Xk.prototype.feature=function(a){if(a<0||a>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[a];var i=this._pbf.readVarint()+this._pbf.pos;return new cH(this._pbf,i,this.extent,this._keys,this._values)};var dH=Hk;function hH(a,i,l){if(a===3){var d=new dH(l,l.readVarint()+l.pos);d.length&&(i[d.name]=d)}}var yE=xx.VectorTile=function(a,i){this.layers=a.readFields(hH,{},i)},bx=xx.VectorTileFeature=qk;function wx(a,i,l,d){const p=[],y=d===0?(x,w,P,C,j,$)=>{x.push(new ne($,P+($-w)/(C-w)*(j-P)))}:(x,w,P,C,j,$)=>{x.push(new ne(w+($-P)/(j-P)*(C-w),$))};for(const x of a){const w=[];for(const P of x){if(P.length<=2)continue;const C=[];for(let G=0;G<P.length-1;G++){const X=P[G].x,K=P[G].y,te=P[G+1].x,se=P[G+1].y,me=d===0?X:K,Ae=d===0?te:se;me<i?Ae>i&&y(C,X,K,te,se,i):me>l?Ae<l&&y(C,X,K,te,se,l):C.push(P[G]),Ae<i&&me>=i&&y(C,X,K,te,se,i),Ae>l&&me<=l&&y(C,X,K,te,se,l)}let j=P[P.length-1];const $=d===0?j.x:j.y;$>=i&&$<=l&&C.push(j),C.length&&(j=C[C.length-1],C[0].x===j.x&&C[0].y===j.y||C.push(C[0]),w.push(C))}w.length&&p.push(w)}return p}xx.VectorTileLayer=Hk;const fH=bx.types,pH=Math.pow(2,13);function Pg(a,i,l,d,p,y,x,w){a.emplaceBack((i<<1)+x,(l<<1)+y,(Math.floor(d*pH)<<1)+p,Math.round(w))}function Cg(a,i,l){a.emplaceBack(i.x,i.y,i.z,l[0]*16384,l[1]*16384,l[2]*16384)}class Zk{constructor(){this.acc=new ne(0,0),this.polyCount=[]}startRing(i){this.currentPolyCount={edges:0,top:0},this.polyCount.push(this.currentPolyCount),this.min||(this.min=new ne(i.x,i.y),this.max=new ne(i.x,i.y))}append(i,l){this.currentPolyCount.edges++,this.acc._add(i);const d=this.min,p=this.max;i.x<d.x?d.x=i.x:i.x>p.x&&(p.x=i.x),i.y<d.y?d.y=i.y:i.y>p.y&&(p.y=i.y),((i.x===0||i.x===Jt)&&i.x===l.x)!=((i.y===0||i.y===Jt)&&i.y===l.y)&&this.processBorderOverlap(i,l),l.x<0!=i.x<0&&this.addBorderIntersection(0,Cr(l.y,i.y,(0-l.x)/(i.x-l.x))),l.x>Jt!=i.x>Jt&&this.addBorderIntersection(1,Cr(l.y,i.y,(Jt-l.x)/(i.x-l.x))),l.y<0!=i.y<0&&this.addBorderIntersection(2,Cr(l.x,i.x,(0-l.y)/(i.y-l.y))),l.y>Jt!=i.y>Jt&&this.addBorderIntersection(3,Cr(l.x,i.x,(Jt-l.y)/(i.y-l.y)))}addBorderIntersection(i,l){this.borders||(this.borders=[[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE]]);const d=this.borders[i];l<d[0]&&(d[0]=l),l>d[1]&&(d[1]=l)}processBorderOverlap(i,l){if(i.x===l.x){if(i.y===l.y)return;const d=i.x===0?0:1;this.addBorderIntersection(d,l.y),this.addBorderIntersection(d,i.y)}else{const d=i.y===0?2:3;this.addBorderIntersection(d,l.x),this.addBorderIntersection(d,i.x)}}centroid(){const i=this.polyCount.reduce((l,d)=>l+d.edges,0);return i!==0?this.acc.div(i)._round():new ne(0,0)}span(){return new ne(this.max.x-this.min.x,this.max.y-this.min.y)}intersectsCount(){return this.borders.reduce((i,l)=>i+ +(l[0]!==Number.MAX_VALUE),0)}}class Mg{constructor(i){this.zoom=i.zoom,this.canonical=i.canonical,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map(l=>l.id),this.index=i.index,this.hasPattern=!1,this.edgeRadius=0,this.projection=i.projection,this.layoutVertexArray=new ct,this.centroidVertexArray=new ss,this.indexArray=new Gt,this.programConfigurations=new gd(i.layers,i.zoom),this.segments=new Fn,this.stateDependentLayerIds=this.layers.filter(l=>l.isStateDependent()).map(l=>l.id),this.enableTerrain=i.enableTerrain}populate(i,l,d,p){this.features=[],this.hasPattern=mE("fill-extrusion",this.layers,l),this.featuresOnBorder=[],this.borders=[[],[],[],[]],this.borderDoneWithNeighborZ=[-1,-1,-1,-1],this.tileToMeter=function(y){const x=Math.exp(Math.PI*(1-y.y/(1<<y.z)*2));return 80150034*x/(x*x+1)/Jt/(1<<y.z)}(d),this.edgeRadius=this.layers[0].layout.get("fill-extrusion-edge-radius")/this.tileToMeter;for(const{feature:y,id:x,index:w,sourceLayerIndex:P}of i){const C=this.layers[0]._featureFilter.needGeometry,j=wd(y,C);if(!this.layers[0]._featureFilter.filter(new B(this.zoom),j,d))continue;const $={id:x,sourceLayerIndex:P,index:w,geometry:C?j.geometry:Il(y,d,p),properties:y.properties,type:y.type,patterns:{}},G=this.layoutVertexArray.length;this.hasPattern?this.features.push(gE("fill-extrusion",this.layers,$,this.zoom,l)):this.addFeature($,$.geometry,w,d,{},l.availableImages,p),l.featureIndex.insert(y,$.geometry,w,P,this.index,G)}this.sortBorders()}addFeatures(i,l,d,p,y){for(const x of this.features){const{geometry:w}=x;this.addFeature(x,w,x.index,l,d,p,y)}this.sortBorders()}update(i,l,d,p){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(i,l,this.stateDependentLayers,d,p)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(i){this.uploaded||(this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,oH),this.indexBuffer=i.createIndexBuffer(this.indexArray),this.layoutVertexExtArray&&(this.layoutVertexExtBuffer=i.createVertexBuffer(this.layoutVertexExtArray,iH.members,!0))),this.programConfigurations.upload(i),this.uploaded=!0}uploadCentroid(i){this.centroidVertexArray.length!==0&&(this.centroidVertexBuffer?this.needsCentroidUpdate&&this.centroidVertexBuffer.updateData(this.centroidVertexArray):this.centroidVertexBuffer=i.createVertexBuffer(this.centroidVertexArray,nH.members,!0),this.needsCentroidUpdate=!1)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.centroidVertexBuffer&&this.centroidVertexBuffer.destroy(),this.layoutVertexExtBuffer&&this.layoutVertexExtBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(i,l,d,p,y,x,w){const P=[new ne(0,0),new ne(Jt,Jt)],C=w.projection,j=C.name==="globe",$=this.enableTerrain&&!j?new Zk:null,G=fH[i.type]==="Polygon";j&&!this.layoutVertexExtArray&&(this.layoutVertexExtArray=new wt);const X=pE(l,500);for(let me=X.length-1;me>=0;me--){const Ae=X[me];(Ae.length===0||(K=Ae[0]).every(ge=>ge.x<=0)||K.every(ge=>ge.x>=Jt)||K.every(ge=>ge.y<=0)||K.every(ge=>ge.y>=Jt))&&X.splice(me,1)}var K;let te;if(j)te=rD(X,P,p);else{te=[];for(const me of X)te.push({polygon:me,bounds:P})}const se=G?this.edgeRadius:0;for(const{polygon:me,bounds:Ae}of te){let ge=0,Te=0;for(const Ce of me)G&&!Ce[0].equals(Ce[Ce.length-1])&&Ce.push(Ce[0]),Te+=G?Ce.length-1:Ce.length;const Me=this.segments.prepareSegment((G?5:4)*Te,this.layoutVertexArray,this.indexArray);if(G){const Ce=[],Ye=[];ge=Me.vertexLength;for(const ot of me){let bt,Qe;ot.length&&ot!==me[0]&&Ye.push(Ce.length/2),bt=ot[1].sub(ot[0])._perp()._unit();for(let ut=1;ut<ot.length;ut++){const dt=ot[ut],yt=ot[ut===ot.length-1?1:ut+1];let{x:Ct,y:nt}=dt;if(se){Qe=yt.sub(dt)._perp()._unit();const Rt=bt.add(Qe)._unit(),Ut=se*Math.min(4,1/(bt.x*Rt.x+bt.y*Rt.y));Ct+=Ut*Rt.x,nt+=Ut*Rt.y,bt=Qe}Pg(this.layoutVertexArray,Ct,nt,0,0,1,1,0),Me.vertexLength++,Ce.push(dt.x,dt.y),j&&Cg(this.layoutVertexExtArray,C.projectTilePoint(Ct,nt,p),C.upVector(p,Ct,nt))}}const Xe=fE(Ce,Ye);for(let ot=0;ot<Xe.length;ot+=3)this.indexArray.emplaceBack(ge+Xe[ot],ge+Xe[ot+2],ge+Xe[ot+1]),Me.primitiveLength++}for(const Ce of me){$&&Ce.length&&$.startRing(Ce[0]);let Ye,Xe,ot,bt=Ce.length>4&&Qk(Ce[Ce.length-2],Ce[0],Ce[1]),Qe=se?mH(Ce[Ce.length-2],Ce[0],Ce[1],se):0;Xe=Ce[1].sub(Ce[0])._perp()._unit();let ut=!0;for(let dt=1,yt=0;dt<Ce.length;dt++){let Ct=Ce[dt-1],nt=Ce[dt];const Rt=Ce[dt===Ce.length-1?1:dt+1];if($&&G&&$.currentPolyCount.top++,Jk(nt,Ct,Ae)){se&&(Xe=Rt.sub(nt)._perp()._unit(),ut=!ut);continue}$&&$.append(nt,Ct);const Ut=nt.sub(Ct)._perp(),Lt=Ut.x/(Math.abs(Ut.x)+Math.abs(Ut.y)),ar=Ut.y>0?1:0,Mt=Ct.dist(nt);if(yt+Mt>32768&&(yt=0),se){ot=Rt.sub(nt)._perp()._unit();let lr=Yk(Ct,nt,Rt,Kk(Xe,ot),se);isNaN(lr)&&(lr=0);const er=nt.sub(Ct)._unit();Ct=Ct.add(er.mult(Qe))._round(),nt=nt.add(er.mult(-lr))._round(),Qe=lr,Xe=ot}const Xt=Me.vertexLength,sr=Ce.length>4&&Qk(Ct,nt,Rt);let Or=eD(yt,bt,ut);if(Pg(this.layoutVertexArray,Ct.x,Ct.y,Lt,ar,0,0,Or),Pg(this.layoutVertexArray,Ct.x,Ct.y,Lt,ar,0,1,Or),yt+=Mt,Or=eD(yt,sr,!ut),bt=sr,Pg(this.layoutVertexArray,nt.x,nt.y,Lt,ar,0,0,Or),Pg(this.layoutVertexArray,nt.x,nt.y,Lt,ar,0,1,Or),Me.vertexLength+=4,this.indexArray.emplaceBack(Xt+0,Xt+1,Xt+2),this.indexArray.emplaceBack(Xt+1,Xt+3,Xt+2),Me.primitiveLength+=2,se){const lr=ge+(dt===1?Ce.length-2:dt-2),er=dt===1?ge:lr+1;if(this.indexArray.emplaceBack(Xt+1,lr,Xt+3),this.indexArray.emplaceBack(lr,er,Xt+3),Me.primitiveLength+=2,Ye===void 0&&(Ye=Xt),!Jk(Rt,Ce[dt],Ae)){const on=dt===Ce.length-1?Ye:Me.vertexLength;this.indexArray.emplaceBack(Xt+2,Xt+3,on),this.indexArray.emplaceBack(Xt+3,on+1,on),this.indexArray.emplaceBack(Xt+3,er,on+1),Me.primitiveLength+=3}ut=!ut}if(j){const lr=this.layoutVertexExtArray,er=C.projectTilePoint(Ct.x,Ct.y,p),on=C.projectTilePoint(nt.x,nt.y,p),hr=C.upVector(p,Ct.x,Ct.y),fr=C.upVector(p,nt.x,nt.y);Cg(lr,er,hr),Cg(lr,er,hr),Cg(lr,on,fr),Cg(lr,on,fr)}}G&&(ge+=Ce.length-1)}}if($&&$.polyCount.length>0){if($.borders){$.vertexArrayOffset=this.centroidVertexArray.length;const me=$.borders,Ae=this.featuresOnBorder.push($)-1;for(let ge=0;ge<4;ge++)me[ge][0]!==Number.MAX_VALUE&&this.borders[ge].push(Ae)}this.encodeCentroid($.borders?void 0:$.centroid(),$)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,i,d,y,x,p)}sortBorders(){for(let i=0;i<4;i++)this.borders[i].sort((l,d)=>this.featuresOnBorder[l].borders[i][0]-this.featuresOnBorder[d].borders[i][0])}encodeCentroid(i,l,d=!0){let p,y;if(i)if(i.y!==0){const w=l.span()._mult(this.tileToMeter);p=(Math.max(i.x,1)<<3)+Math.min(7,Math.round(w.x/10)),y=(Math.max(i.y,1)<<3)+Math.min(7,Math.round(w.y/10))}else p=Math.ceil(7*(i.x+450)),y=0;else p=0,y=+d;let x=d?this.centroidVertexArray.length:l.vertexArrayOffset;for(const w of l.polyCount){d&&this.centroidVertexArray.resize(this.centroidVertexArray.length+4*w.edges+w.top);for(let P=0;P<w.top;P++)this.centroidVertexArray.emplace(x++,p,y);for(let P=0;P<2*w.edges;P++)this.centroidVertexArray.emplace(x++,0,y),this.centroidVertexArray.emplace(x++,p,y)}}}function Kk(a,i){const l=a.add(i)._unit();return a.x*l.x+a.y*l.y}function mH(a,i,l,d){const p=i.sub(a)._perp()._unit(),y=l.sub(i)._perp()._unit();return Yk(a,i,l,Kk(p,y),d)}function Yk(a,i,l,d,p){const y=Math.sqrt(1-d*d);return Math.min(a.dist(i)/3,i.dist(l)/3,p*y/d)}function Jk(a,i,l){return a.x<l[0].x&&i.x<l[0].x||a.x>l[1].x&&i.x>l[1].x||a.y<l[0].y&&i.y<l[0].y||a.y>l[1].y&&i.y>l[1].y}function Qk(a,i,l){if(a.x<0||a.x>=Jt||i.x<0||i.x>=Jt||l.x<0||l.x>=Jt)return!1;const d=l.sub(i),p=d.perp(),y=a.sub(i);return(d.x*y.x+d.y*y.y)/Math.sqrt((d.x*d.x+d.y*d.y)*(y.x*y.x+y.y*y.y))>-.866&&p.x*y.x+p.y*y.y<0}function eD(a,i,l){const d=i?2|a:-3&a;return l?1|d:-2&d}function tD(){const a=Math.PI/32,i=Math.tan(a),l=wg;return l*Math.sqrt(1+2*i*i)-l}function rD(a,i,l){const d=1<<l.z,p=Ko(l.x/d),y=Ko((l.x+1)/d),x=Ii(l.y/d),w=Ii((l.y+1)/d);return function(P,C,j,$,G=0,X){const K=[];if(!P.length||!j||!$)return K;const te=(Ce,Ye)=>{for(const Xe of Ce)K.push({polygon:Xe,bounds:Ye})},se=Math.ceil(Math.log2(j)),me=Math.ceil(Math.log2($)),Ae=se-me,ge=[];for(let Ce=0;Ce<Math.abs(Ae);Ce++)ge.push(Ae>0?0:1);for(let Ce=0;Ce<Math.min(se,me);Ce++)ge.push(0),ge.push(1);let Te=P;if(Te=wx(Te,C[0].y-G,C[1].y+G,1),Te=wx(Te,C[0].x-G,C[1].x+G,0),!Te.length)return K;const Me=[];for(ge.length?Me.push({polygons:Te,bounds:C,depth:0}):te(Te,C);Me.length;){const Ce=Me.pop(),Ye=Ce.depth,Xe=ge[Ye],ot=Ce.bounds[0],bt=Ce.bounds[1],Qe=Xe===0?ot.x:ot.y,ut=Xe===0?bt.x:bt.y,dt=X?X(Xe,Qe,ut):.5*(Qe+ut),yt=wx(Ce.polygons,Qe-G,dt+G,Xe),Ct=wx(Ce.polygons,dt-G,ut+G,Xe);if(yt.length){const nt=[ot,new ne(Xe===0?dt:bt.x,Xe===1?dt:bt.y)];ge.length>Ye+1?Me.push({polygons:yt,bounds:nt,depth:Ye+1}):te(yt,nt)}if(Ct.length){const nt=[new ne(Xe===0?dt:ot.x,Xe===1?dt:ot.y),bt];ge.length>Ye+1?Me.push({polygons:Ct,bounds:nt,depth:Ye+1}):te(Ct,nt)}}return K}(a,i,Math.ceil((y-p)/11.25),Math.ceil((x-w)/11.25),1,(P,C,j)=>{if(P===0)return .5*(C+j);{const $=Ii((l.y+C/Jt)/d);return(Vs(.5*(Ii((l.y+j/Jt)/d)+$))*d-l.y)*Jt}})}$t(Mg,"FillExtrusionBucket",{omit:["layers","features"]}),$t(Zk,"PartMetadata");const gH=new _e({"fill-extrusion-edge-radius":new ee(it["layout_fill-extrusion"]["fill-extrusion-edge-radius"])});var yH={paint:new _e({"fill-extrusion-opacity":new ee(it["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new le(it["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new ee(it["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new ee(it["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new le(it["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new le(it["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new le(it["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new ee(it["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"]),"fill-extrusion-ambient-occlusion-intensity":new ee(it["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-intensity"]),"fill-extrusion-ambient-occlusion-radius":new ee(it["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-radius"]),"fill-extrusion-rounded-roof":new ee(it["paint_fill-extrusion"]["fill-extrusion-rounded-roof"])}),layout:gH};function nD(a,i,l){var d=2*Math.PI*6378137/256/Math.pow(2,l);return[a*d-2*Math.PI*6378137/2,i*d-2*Math.PI*6378137/2]}class Sx{constructor(i,l,d){this.z=i,this.x=l,this.y=d,this.key=Ig(0,i,i,l,d)}equals(i){return this.z===i.z&&this.x===i.x&&this.y===i.y}url(i,l){const d=function(y,x,w){var P=nD(256*y,256*(x=Math.pow(2,w)-x-1),w),C=nD(256*(y+1),256*(x+1),w);return P[0]+","+P[1]+","+C[0]+","+C[1]}(this.x,this.y,this.z),p=function(y,x,w){let P,C="";for(let j=y;j>0;j--)P=1<<j-1,C+=(x&P?1:0)+(w&P?2:0);return C}(this.z,this.x,this.y);return i[(this.x+this.y)%i.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(l==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",p).replace("{bbox-epsg-3857}",d)}toString(){return`${this.z}/${this.x}/${this.y}`}}class iD{constructor(i,l){this.wrap=i,this.canonical=l,this.key=Ig(i,l.z,l.z,l.x,l.y)}}class Ji{constructor(i,l,d,p,y){this.overscaledZ=i,this.wrap=l,this.canonical=new Sx(d,+p,+y),this.key=l===0&&i===d?this.canonical.key:Ig(l,i,d,p,y)}equals(i){return this.overscaledZ===i.overscaledZ&&this.wrap===i.wrap&&this.canonical.equals(i.canonical)}scaledTo(i){const l=this.canonical.z-i;return i>this.canonical.z?new Ji(i,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Ji(i,this.wrap,i,this.canonical.x>>l,this.canonical.y>>l)}calculateScaledKey(i,l=!0){if(this.overscaledZ===i&&l)return this.key;if(i>this.canonical.z)return Ig(this.wrap*+l,i,this.canonical.z,this.canonical.x,this.canonical.y);{const d=this.canonical.z-i;return Ig(this.wrap*+l,i,i,this.canonical.x>>d,this.canonical.y>>d)}}isChildOf(i){if(i.wrap!==this.wrap)return!1;const l=this.canonical.z-i.canonical.z;return i.overscaledZ===0||i.overscaledZ<this.overscaledZ&&i.canonical.x===this.canonical.x>>l&&i.canonical.y===this.canonical.y>>l}children(i){if(this.overscaledZ>=i)return[new Ji(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const l=this.canonical.z+1,d=2*this.canonical.x,p=2*this.canonical.y;return[new Ji(l,this.wrap,l,d,p),new Ji(l,this.wrap,l,d+1,p),new Ji(l,this.wrap,l,d,p+1),new Ji(l,this.wrap,l,d+1,p+1)]}isLessThan(i){return this.wrap<i.wrap||!(this.wrap>i.wrap)&&(this.overscaledZ<i.overscaledZ||!(this.overscaledZ>i.overscaledZ)&&(this.canonical.x<i.canonical.x||!(this.canonical.x>i.canonical.x)&&this.canonical.y<i.canonical.y))}wrapped(){return new Ji(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(i){return new Ji(this.overscaledZ,i,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new iD(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}}function Ig(a,i,l,d,p){const y=1<<Math.min(l,22);let x=y*(p%y)+d%y;return a&&l<22&&(x+=y*y*((a<0?-2*a-1:2*a)%(1<<2*(22-l)))),16*(32*x+l)+(i-l)}$t(Sx,"CanonicalTileID"),$t(Ji,"OverscaledTileID",{omit:["projMatrix"]});class af extends ne{constructor(i,l,d){super(i,l),this.z=d}}function Og(a,i){return a.x*i.x+a.y*i.y}function oD(a,i){if(a.length===1){let l=0;const d=i[l++];let p;for(;!p||d.equals(p);)if(p=i[l++],!p)return 1/0;for(;l<i.length;l++){const y=i[l],x=a[0],w=p.sub(d),P=y.sub(d),C=x.sub(d),j=Og(w,w),$=Og(w,P),G=Og(P,P),X=Og(C,w),K=Og(C,P),te=j*G-$*$,se=(G*X-$*K)/te,me=(j*K-$*X)/te,Ae=d.z*(1-se-me)+p.z*se+y.z*me;if(isFinite(Ae))return Ae}return 1/0}{let l=1/0;for(const d of i)l=Math.min(l,d.z);return l}}function aD(a,i,l,d,p,y,x,w){const P=x*p.getElevationAt(a,i,!0,!0),C=y[0]!==0,j=C?y[1]===0?x*(y[0]/7-450):x*function($,G,X){const K=Math.floor(G[0]/8),te=Math.floor(G[1]/8),se=10*(G[0]-8*K),me=10*(G[1]-8*te),Ae=$.getElevationAt(K,te,!0,!0),ge=$.getMeterToDEM(X),Te=Math.floor(.5*(se*ge-1)),Me=Math.floor(.5*(me*ge-1)),Ce=$.tileCoordToPixel(K,te),Ye=2*Te+1,Xe=2*Me+1,ot=function(Ct,nt,Rt,Ut,Lt){return[Ct.getElevationAtPixel(nt,Rt,!0),Ct.getElevationAtPixel(nt+Lt,Rt,!0),Ct.getElevationAtPixel(nt,Rt+Lt,!0),Ct.getElevationAtPixel(nt+Ut,Rt+Lt,!0)]}($,Ce.x-Te,Ce.y-Me,Ye,Xe),bt=Math.abs(ot[0]-ot[1]),Qe=Math.abs(ot[2]-ot[3]),ut=Math.abs(ot[0]-ot[2])+Math.abs(ot[1]-ot[3]),dt=Math.min(.25,.5*ge*(bt+Qe)/Ye),yt=Math.min(.25,.5*ge*ut/Xe);return Ae+Math.max(dt*se,yt*me)}(p,y,w):P;return{base:P+(l===0)?-1:l,top:C?Math.max(j+d,P+l+2):P+d}}const vH=Fe([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"},{name:"a_linesofar",components:1,type:"Float32"}],4),{members:_H}=vH,xH=Fe([{name:"a_packed",components:4,type:"Float32"}]),{members:bH}=xH,wH=bx.types,SH=Math.cos(Math.PI/180*37.5);class Ex{constructor(i){this.zoom=i.zoom,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map(l=>l.id),this.index=i.index,this.projection=i.projection,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(l=>{this.gradients[l.id]={}}),this.layoutVertexArray=new Je,this.layoutVertexArray2=new _t,this.indexArray=new Gt,this.programConfigurations=new gd(i.layers,i.zoom),this.segments=new Fn,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(l=>l.isStateDependent()).map(l=>l.id)}populate(i,l,d,p){this.hasPattern=mE("line",this.layers,l);const y=this.layers[0].layout.get("line-sort-key"),x=[];for(const{feature:j,id:$,index:G,sourceLayerIndex:X}of i){const K=this.layers[0]._featureFilter.needGeometry,te=wd(j,K);if(!this.layers[0]._featureFilter.filter(new B(this.zoom),te,d))continue;const se=y?y.evaluate(te,{},d):void 0,me={id:$,properties:j.properties,type:j.type,sourceLayerIndex:X,index:G,geometry:K?te.geometry:Il(j,d,p),patterns:{},sortKey:se};x.push(me)}y&&x.sort((j,$)=>j.sortKey-$.sortKey);const{lineAtlas:w,featureIndex:P}=l,C=this.addConstantDashes(w);for(const j of x){const{geometry:$,index:G,sourceLayerIndex:X}=j;if(C&&this.addFeatureDashes(j,w),this.hasPattern){const K=gE("line",this.layers,j,this.zoom,l);this.patternFeatures.push(K)}else this.addFeature(j,$,G,d,w.positions,l.availableImages);P.insert(i[G].feature,$,G,X,this.index)}}addConstantDashes(i){let l=!1;for(const d of this.layers){const p=d.paint.get("line-dasharray").value,y=d.layout.get("line-cap").value;if(p.kind!=="constant"||y.kind!=="constant")l=!0;else{const x=y.value,w=p.value;if(!w)continue;i.addDash(w,x)}}return l}addFeatureDashes(i,l){const d=this.zoom;for(const p of this.layers){const y=p.paint.get("line-dasharray").value,x=p.layout.get("line-cap").value;if(y.kind==="constant"&&x.kind==="constant")continue;let w,P;if(y.kind==="constant"){if(w=y.value,!w)continue}else w=y.evaluate({zoom:d},i);P=x.kind==="constant"?x.value:x.evaluate({zoom:d},i),l.addDash(w,P),i.patterns[p.id]=l.getKey(w,P)}}update(i,l,d,p){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(i,l,this.stateDependentLayers,d,p)}addFeatures(i,l,d,p,y){for(const x of this.patternFeatures)this.addFeature(x,x.geometry,x.index,l,d,p)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(i){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=i.createVertexBuffer(this.layoutVertexArray2,bH)),this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,_H),this.indexBuffer=i.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(i),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(i){if(i.properties&&i.properties.hasOwnProperty("mapbox_clip_start")&&i.properties.hasOwnProperty("mapbox_clip_end"))return{start:+i.properties.mapbox_clip_start,end:+i.properties.mapbox_clip_end}}addFeature(i,l,d,p,y,x){const w=this.layers[0].layout,P=w.get("line-join").evaluate(i,{}),C=w.get("line-cap").evaluate(i,{}),j=w.get("line-miter-limit"),$=w.get("line-round-limit");this.lineClips=this.lineFeatureClips(i);for(const G of l)this.addLine(G,i,P,C,j,$);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,i,d,y,x,p)}addLine(i,l,d,p,y,x){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineSoFar=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let me=0;me<i.length-1;me++)this.totalDistance+=i[me].dist(i[me+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const w=wH[l.type]==="Polygon";let P=i.length;for(;P>=2&&i[P-1].equals(i[P-2]);)P--;let C=0;for(;C<P-1&&i[C].equals(i[C+1]);)C++;if(P<(w?3:2))return;d==="bevel"&&(y=1.05);const j=this.overscaling<=16?15*Jt/(512*this.overscaling):0,$=this.segments.prepareSegment(10*P,this.layoutVertexArray,this.indexArray);let G,X,K,te,se;this.e1=this.e2=-1,w&&(G=i[P-2],se=i[C].sub(G)._unit()._perp());for(let me=C;me<P;me++){if(K=me===P-1?w?i[C+1]:void 0:i[me+1],K&&i[me].equals(K))continue;se&&(te=se),G&&(X=G),G=i[me],se=K?K.sub(G)._unit()._perp():te,te=te||se;let Ae=te.add(se);Ae.x===0&&Ae.y===0||Ae._unit();const ge=te.x*se.x+te.y*se.y,Te=Ae.x*se.x+Ae.y*se.y,Me=Te!==0?1/Te:1/0,Ce=2*Math.sqrt(2-2*Te),Ye=Te<SH&&X&&K,Xe=te.x*se.y-te.y*se.x>0;if(Ye&&me>C){const Qe=G.dist(X);if(Qe>2*j){const ut=G.sub(G.sub(X)._mult(j/Qe)._round());this.updateDistance(X,ut),this.addCurrentVertex(ut,te,0,0,$),X=ut}}const ot=X&&K;let bt=ot?d:w?"butt":p;if(ot&&bt==="round"&&(Me<x?bt="miter":Me<=2&&(bt="fakeround")),bt==="miter"&&Me>y&&(bt="bevel"),bt==="bevel"&&(Me>2&&(bt="flipbevel"),Me<y&&(bt="miter")),X&&this.updateDistance(X,G),bt==="miter")Ae._mult(Me),this.addCurrentVertex(G,Ae,0,0,$);else if(bt==="flipbevel"){if(Me>100)Ae=se.mult(-1);else{const Qe=Me*te.add(se).mag()/te.sub(se).mag();Ae._perp()._mult(Qe*(Xe?-1:1))}this.addCurrentVertex(G,Ae,0,0,$),this.addCurrentVertex(G,Ae.mult(-1),0,0,$)}else if(bt==="bevel"||bt==="fakeround"){const Qe=-Math.sqrt(Me*Me-1),ut=Xe?Qe:0,dt=Xe?0:Qe;if(X&&this.addCurrentVertex(G,te,ut,dt,$),bt==="fakeround"){const yt=Math.round(180*Ce/Math.PI/20);for(let Ct=1;Ct<yt;Ct++){let nt=Ct/yt;if(nt!==.5){const Ut=nt-.5;nt+=nt*Ut*(nt-1)*((1.0904+ge*(ge*(3.55645-1.43519*ge)-3.2452))*Ut*Ut+(.848013+ge*(.215638*ge-1.06021)))}const Rt=se.sub(te)._mult(nt)._add(te)._unit()._mult(Xe?-1:1);this.addHalfVertex(G,Rt.x,Rt.y,!1,Xe,0,$)}}K&&this.addCurrentVertex(G,se,-ut,-dt,$)}else if(bt==="butt")this.addCurrentVertex(G,Ae,0,0,$);else if(bt==="square"){const Qe=X?1:-1;X||this.addCurrentVertex(G,Ae,Qe,Qe,$),this.addCurrentVertex(G,Ae,0,0,$),X&&this.addCurrentVertex(G,Ae,Qe,Qe,$)}else bt==="round"&&(X&&(this.addCurrentVertex(G,te,0,0,$),this.addCurrentVertex(G,te,1,1,$,!0)),K&&(this.addCurrentVertex(G,se,-1,-1,$,!0),this.addCurrentVertex(G,se,0,0,$)));if(Ye&&me<P-1){const Qe=G.dist(K);if(Qe>2*j){const ut=G.add(K.sub(G)._mult(j/Qe)._round());this.updateDistance(G,ut),this.addCurrentVertex(ut,se,0,0,$),G=ut}}}}addCurrentVertex(i,l,d,p,y,x=!1){const w=l.y*p-l.x,P=-l.y-l.x*p;this.addHalfVertex(i,l.x+l.y*d,l.y-l.x*d,x,!1,d,y),this.addHalfVertex(i,w,P,x,!0,-p,y)}addHalfVertex({x:i,y:l},d,p,y,x,w,P){this.layoutVertexArray.emplaceBack((i<<1)+(y?1:0),(l<<1)+(x?1:0),Math.round(63*d)+128,Math.round(63*p)+128,1+(w===0?0:w<0?-1:1),0,this.lineSoFar),this.lineClips&&this.layoutVertexArray2.emplaceBack(this.scaledDistance,this.lineClipsArray.length,this.lineClips.start,this.lineClips.end);const C=P.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,C),P.primitiveLength++),x?this.e2=C:this.e1=C}updateScaledDistance(){if(this.lineClips){const i=this.totalDistance/(this.lineClips.end-this.lineClips.start);this.scaledDistance=this.distance/this.totalDistance,this.lineSoFar=i*this.lineClips.start+this.distance}else this.lineSoFar=this.distance}updateDistance(i,l){this.distance+=i.dist(l),this.updateScaledDistance()}}$t(Ex,"LineBucket",{omit:["layers","patternFeatures"]});const EH=new _e({"line-cap":new le(it.layout_line["line-cap"]),"line-join":new le(it.layout_line["line-join"]),"line-miter-limit":new ee(it.layout_line["line-miter-limit"]),"line-round-limit":new ee(it.layout_line["line-round-limit"]),"line-sort-key":new le(it.layout_line["line-sort-key"])});var sD={paint:new _e({"line-opacity":new le(it.paint_line["line-opacity"]),"line-color":new le(it.paint_line["line-color"]),"line-translate":new ee(it.paint_line["line-translate"]),"line-translate-anchor":new ee(it.paint_line["line-translate-anchor"]),"line-width":new le(it.paint_line["line-width"]),"line-gap-width":new le(it.paint_line["line-gap-width"]),"line-offset":new le(it.paint_line["line-offset"]),"line-blur":new le(it.paint_line["line-blur"]),"line-dasharray":new le(it.paint_line["line-dasharray"]),"line-pattern":new le(it.paint_line["line-pattern"]),"line-gradient":new ye(it.paint_line["line-gradient"]),"line-trim-offset":new ee(it.paint_line["line-trim-offset"])}),layout:EH};const lD=new class extends le{possiblyEvaluate(a,i){return i=new B(Math.floor(i.zoom),{now:i.now,fadeDuration:i.fadeDuration,transition:i.transition}),super.possiblyEvaluate(a,i)}evaluate(a,i,l,d){return i=at({},i,{zoom:Math.floor(i.zoom)}),super.evaluate(a,i,l,d)}}(sD.paint.properties["line-width"].specification);function cD(a,i){return i>0?i+2*a:a}lD.useIntegerZoom=!0;const TH=Fe([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_tex_size",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),AH=Fe([{name:"a_globe_anchor",components:3,type:"Int16"},{name:"a_globe_normal",components:3,type:"Float32"}],4),PH=Fe([{name:"a_projected_pos",components:4,type:"Float32"}],4);Fe([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const CH=Fe([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]),MH=Fe([{name:"a_size_scale",components:1,type:"Float32"},{name:"a_padding",components:2,type:"Float32"}]);Fe([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Int16",name:"tileAnchorX"},{type:"Int16",name:"tileAnchorY"},{type:"Float32",name:"x1"},{type:"Float32",name:"y1"},{type:"Float32",name:"x2"},{type:"Float32",name:"y2"},{type:"Int16",name:"padding"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const uD=Fe([{name:"a_pos",components:3,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),IH=Fe([{name:"a_pos_2f",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);Fe([{name:"triangle",components:3,type:"Uint16"}]),Fe([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"},{type:"Uint8",name:"flipState"}]),Fe([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),Fe([{type:"Float32",name:"offsetX"}]),Fe([{type:"Int16",name:"x"},{type:"Int16",name:"y"}]);var vi=24;const fs=128;function vE(a,i){const{expression:l}=i;if(l.kind==="constant")return{kind:"constant",layoutSize:l.evaluate(new B(a+1))};if(l.kind==="source")return{kind:"source"};{const{zoomStops:d,interpolationType:p}=l;let y=0;for(;y<d.length&&d[y]<=a;)y++;y=Math.max(0,y-1);let x=y;for(;x<d.length&&d[x]<a+1;)x++;x=Math.min(d.length-1,x);const w=d[y],P=d[x];return l.kind==="composite"?{kind:"composite",minZoom:w,maxZoom:P,interpolationType:p}:{kind:"camera",minZoom:w,maxZoom:P,minSize:l.evaluate(new B(w)),maxSize:l.evaluate(new B(P)),interpolationType:p}}}function Tx(a,{uSize:i,uSizeT:l},{lowerSize:d,upperSize:p}){return a.kind==="source"?d/fs:a.kind==="composite"?Cr(d/fs,p/fs,l):i}function sf(a,i){let l=0,d=0;if(a.kind==="constant")d=a.layoutSize;else if(a.kind!=="source"){const{interpolationType:p,minZoom:y,maxZoom:x}=a,w=p?Pe(xa.interpolationFactor(p,i,y,x),0,1):0;a.kind==="camera"?d=Cr(a.minSize,a.maxSize,w):l=w}return{uSizeT:l,uSize:d}}var OH=Object.freeze({__proto__:null,SIZE_PACK_FACTOR:fs,evaluateSizeForFeature:Tx,evaluateSizeForZoom:sf,getSizeData:vE});function kH(a,i,l){return a.sections.forEach(d=>{d.text=function(p,y,x){const w=y.layout.get("text-transform").evaluate(x,{});return w==="uppercase"?p=p.toLocaleUpperCase():w==="lowercase"&&(p=p.toLocaleLowerCase()),D.applyArabicShaping&&(p=D.applyArabicShaping(p)),p}(d.text,i,l)}),a}const kg={"!":"︕","#":"＃",$:"＄","%":"％","&":"＆","(":"︵",")":"︶","*":"＊","+":"＋",",":"︐","-":"︲",".":"・","/":"／",":":"︓",";":"︔","<":"︿","=":"＝",">":"﹀","?":"︖","@":"＠","[":"﹇","\\":"＼","]":"﹈","^":"＾",_:"︳","`":"｀","{":"︷","|":"―","}":"︸","~":"～","¢":"￠","£":"￡","¥":"￥","¦":"￤","¬":"￢","¯":"￣","–":"︲","—":"︱","‘":"﹃","’":"﹄","“":"﹁","”":"﹂","…":"︙","‧":"・","₩":"￦","、":"︑","。":"︒","〈":"︿","〉":"﹀","《":"︽","》":"︾","「":"﹁","」":"﹂","『":"﹃","』":"﹄","【":"︻","】":"︼","〔":"︹","〕":"︺","〖":"︗","〗":"︘","！":"︕","（":"︵","）":"︶","，":"︐","－":"︲","．":"・","：":"︓","；":"︔","＜":"︿","＞":"﹀","？":"︖","［":"﹇","］":"﹈","＿":"︳","｛":"︷","｜":"―","｝":"︸","｟":"︵","｠":"︶","｡":"︒","｢":"﹁","｣":"﹂","←":"↑","→":"↓"};function DH(a){return a==="︶"||a==="﹈"||a==="︸"||a==="﹄"||a==="﹂"||a==="︾"||a==="︼"||a==="︺"||a==="︘"||a==="﹀"||a==="︐"||a==="︓"||a==="︔"||a==="｀"||a==="￣"||a==="︑"||a==="︒"}function RH(a){return a==="︵"||a==="﹇"||a==="︷"||a==="﹃"||a==="﹁"||a==="︽"||a==="︻"||a==="︹"||a==="︗"||a==="︿"}var dD=en,hD=function(a,i,l,d,p){var y,x,w=8*p-d-1,P=(1<<w)-1,C=P>>1,j=-7,$=p-1,G=-1,X=a[i+$];for($+=G,y=X&(1<<-j)-1,X>>=-j,j+=w;j>0;y=256*y+a[i+$],$+=G,j-=8);for(x=y&(1<<-j)-1,y>>=-j,j+=d;j>0;x=256*x+a[i+$],$+=G,j-=8);if(y===0)y=1-C;else{if(y===P)return x?NaN:1/0*(X?-1:1);x+=Math.pow(2,d),y-=C}return(X?-1:1)*x*Math.pow(2,y-d)},fD=function(a,i,l,d,p,y){var x,w,P,C=8*y-p-1,j=(1<<C)-1,$=j>>1,G=p===23?Math.pow(2,-24)-Math.pow(2,-77):0,X=0,K=1,te=i<0||i===0&&1/i<0?1:0;for(i=Math.abs(i),isNaN(i)||i===1/0?(w=isNaN(i)?1:0,x=j):(x=Math.floor(Math.log(i)/Math.LN2),i*(P=Math.pow(2,-x))<1&&(x--,P*=2),(i+=x+$>=1?G/P:G*Math.pow(2,1-$))*P>=2&&(x++,P/=2),x+$>=j?(w=0,x=j):x+$>=1?(w=(i*P-1)*Math.pow(2,p),x+=$):(w=i*Math.pow(2,$-1)*Math.pow(2,p),x=0));p>=8;a[l+X]=255&w,X+=K,w/=256,p-=8);for(x=x<<p|w,C+=p;C>0;a[l+X]=255&x,X+=K,x/=256,C-=8);a[l+X-K]|=128*te};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */function en(a){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(a)?a:new Uint8Array(a||0),this.pos=0,this.type=0,this.length=this.buf.length}en.Varint=0,en.Fixed64=1,en.Bytes=2,en.Fixed32=5;var _E=4294967296,pD=1/_E,mD=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function kl(a){return a.type===en.Bytes?a.readVarint()+a.pos:a.pos+1}function lf(a,i,l){return l?4294967296*i+(a>>>0):4294967296*(i>>>0)+(a>>>0)}function gD(a,i,l){var d=i<=16383?1:i<=2097151?2:i<=268435455?3:Math.floor(Math.log(i)/(7*Math.LN2));l.realloc(d);for(var p=l.pos-1;p>=a;p--)l.buf[p+d]=l.buf[p]}function LH(a,i){for(var l=0;l<a.length;l++)i.writeVarint(a[l])}function jH(a,i){for(var l=0;l<a.length;l++)i.writeSVarint(a[l])}function zH(a,i){for(var l=0;l<a.length;l++)i.writeFloat(a[l])}function NH(a,i){for(var l=0;l<a.length;l++)i.writeDouble(a[l])}function BH(a,i){for(var l=0;l<a.length;l++)i.writeBoolean(a[l])}function $H(a,i){for(var l=0;l<a.length;l++)i.writeFixed32(a[l])}function FH(a,i){for(var l=0;l<a.length;l++)i.writeSFixed32(a[l])}function UH(a,i){for(var l=0;l<a.length;l++)i.writeFixed64(a[l])}function VH(a,i){for(var l=0;l<a.length;l++)i.writeSFixed64(a[l])}function Ax(a,i){return(a[i]|a[i+1]<<8|a[i+2]<<16)+16777216*a[i+3]}function cf(a,i,l){a[l]=i,a[l+1]=i>>>8,a[l+2]=i>>>16,a[l+3]=i>>>24}function yD(a,i){return(a[i]|a[i+1]<<8|a[i+2]<<16)+(a[i+3]<<24)}en.prototype={destroy:function(){this.buf=null},readFields:function(a,i,l){for(l=l||this.length;this.pos<l;){var d=this.readVarint(),p=d>>3,y=this.pos;this.type=7&d,a(p,i,this),this.pos===y&&this.skip(d)}return i},readMessage:function(a,i){return this.readFields(a,i,this.readVarint()+this.pos)},readFixed32:function(){var a=Ax(this.buf,this.pos);return this.pos+=4,a},readSFixed32:function(){var a=yD(this.buf,this.pos);return this.pos+=4,a},readFixed64:function(){var a=Ax(this.buf,this.pos)+Ax(this.buf,this.pos+4)*_E;return this.pos+=8,a},readSFixed64:function(){var a=Ax(this.buf,this.pos)+yD(this.buf,this.pos+4)*_E;return this.pos+=8,a},readFloat:function(){var a=hD(this.buf,this.pos,!0,23,4);return this.pos+=4,a},readDouble:function(){var a=hD(this.buf,this.pos,!0,52,8);return this.pos+=8,a},readVarint:function(a){var i,l,d=this.buf;return i=127&(l=d[this.pos++]),l<128?i:(i|=(127&(l=d[this.pos++]))<<7,l<128?i:(i|=(127&(l=d[this.pos++]))<<14,l<128?i:(i|=(127&(l=d[this.pos++]))<<21,l<128?i:function(p,y,x){var w,P,C=x.buf;if(w=(112&(P=C[x.pos++]))>>4,P<128||(w|=(127&(P=C[x.pos++]))<<3,P<128)||(w|=(127&(P=C[x.pos++]))<<10,P<128)||(w|=(127&(P=C[x.pos++]))<<17,P<128)||(w|=(127&(P=C[x.pos++]))<<24,P<128)||(w|=(1&(P=C[x.pos++]))<<31,P<128))return lf(p,w,y);throw new Error("Expected varint not more than 10 bytes")}(i|=(15&(l=d[this.pos]))<<28,a,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var a=this.readVarint();return a%2==1?(a+1)/-2:a/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var a=this.readVarint()+this.pos,i=this.pos;return this.pos=a,a-i>=12&&mD?function(l,d,p){return mD.decode(l.subarray(d,p))}(this.buf,i,a):function(l,d,p){for(var y="",x=d;x<p;){var w,P,C,j=l[x],$=null,G=j>239?4:j>223?3:j>191?2:1;if(x+G>p)break;G===1?j<128&&($=j):G===2?(192&(w=l[x+1]))==128&&($=(31&j)<<6|63&w)<=127&&($=null):G===3?(P=l[x+2],(192&(w=l[x+1]))==128&&(192&P)==128&&(($=(15&j)<<12|(63&w)<<6|63&P)<=2047||$>=55296&&$<=57343)&&($=null)):G===4&&(P=l[x+2],C=l[x+3],(192&(w=l[x+1]))==128&&(192&P)==128&&(192&C)==128&&(($=(15&j)<<18|(63&w)<<12|(63&P)<<6|63&C)<=65535||$>=1114112)&&($=null)),$===null?($=65533,G=1):$>65535&&($-=65536,y+=String.fromCharCode($>>>10&1023|55296),$=56320|1023&$),y+=String.fromCharCode($),x+=G}return y}(this.buf,i,a)},readBytes:function(){var a=this.readVarint()+this.pos,i=this.buf.subarray(this.pos,a);return this.pos=a,i},readPackedVarint:function(a,i){if(this.type!==en.Bytes)return a.push(this.readVarint(i));var l=kl(this);for(a=a||[];this.pos<l;)a.push(this.readVarint(i));return a},readPackedSVarint:function(a){if(this.type!==en.Bytes)return a.push(this.readSVarint());var i=kl(this);for(a=a||[];this.pos<i;)a.push(this.readSVarint());return a},readPackedBoolean:function(a){if(this.type!==en.Bytes)return a.push(this.readBoolean());var i=kl(this);for(a=a||[];this.pos<i;)a.push(this.readBoolean());return a},readPackedFloat:function(a){if(this.type!==en.Bytes)return a.push(this.readFloat());var i=kl(this);for(a=a||[];this.pos<i;)a.push(this.readFloat());return a},readPackedDouble:function(a){if(this.type!==en.Bytes)return a.push(this.readDouble());var i=kl(this);for(a=a||[];this.pos<i;)a.push(this.readDouble());return a},readPackedFixed32:function(a){if(this.type!==en.Bytes)return a.push(this.readFixed32());var i=kl(this);for(a=a||[];this.pos<i;)a.push(this.readFixed32());return a},readPackedSFixed32:function(a){if(this.type!==en.Bytes)return a.push(this.readSFixed32());var i=kl(this);for(a=a||[];this.pos<i;)a.push(this.readSFixed32());return a},readPackedFixed64:function(a){if(this.type!==en.Bytes)return a.push(this.readFixed64());var i=kl(this);for(a=a||[];this.pos<i;)a.push(this.readFixed64());return a},readPackedSFixed64:function(a){if(this.type!==en.Bytes)return a.push(this.readSFixed64());var i=kl(this);for(a=a||[];this.pos<i;)a.push(this.readSFixed64());return a},skip:function(a){var i=7&a;if(i===en.Varint)for(;this.buf[this.pos++]>127;);else if(i===en.Bytes)this.pos=this.readVarint()+this.pos;else if(i===en.Fixed32)this.pos+=4;else{if(i!==en.Fixed64)throw new Error("Unimplemented type: "+i);this.pos+=8}},writeTag:function(a,i){this.writeVarint(a<<3|i)},realloc:function(a){for(var i=this.length||16;i<this.pos+a;)i*=2;if(i!==this.length){var l=new Uint8Array(i);l.set(this.buf),this.buf=l,this.length=i}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(a){this.realloc(4),cf(this.buf,a,this.pos),this.pos+=4},writeSFixed32:function(a){this.realloc(4),cf(this.buf,a,this.pos),this.pos+=4},writeFixed64:function(a){this.realloc(8),cf(this.buf,-1&a,this.pos),cf(this.buf,Math.floor(a*pD),this.pos+4),this.pos+=8},writeSFixed64:function(a){this.realloc(8),cf(this.buf,-1&a,this.pos),cf(this.buf,Math.floor(a*pD),this.pos+4),this.pos+=8},writeVarint:function(a){(a=+a||0)>268435455||a<0?function(i,l){var d,p;if(i>=0?(d=i%4294967296|0,p=i/4294967296|0):(p=~(-i/4294967296),4294967295^(d=~(-i%4294967296))?d=d+1|0:(d=0,p=p+1|0)),i>=18446744073709552e3||i<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");l.realloc(10),function(y,x,w){w.buf[w.pos++]=127&y|128,y>>>=7,w.buf[w.pos++]=127&y|128,y>>>=7,w.buf[w.pos++]=127&y|128,y>>>=7,w.buf[w.pos++]=127&y|128,w.buf[w.pos]=127&(y>>>=7)}(d,0,l),function(y,x){var w=(7&y)<<4;x.buf[x.pos++]|=w|((y>>>=3)?128:0),y&&(x.buf[x.pos++]=127&y|((y>>>=7)?128:0),y&&(x.buf[x.pos++]=127&y|((y>>>=7)?128:0),y&&(x.buf[x.pos++]=127&y|((y>>>=7)?128:0),y&&(x.buf[x.pos++]=127&y|((y>>>=7)?128:0),y&&(x.buf[x.pos++]=127&y)))))}(p,l)}(a,this):(this.realloc(4),this.buf[this.pos++]=127&a|(a>127?128:0),a<=127||(this.buf[this.pos++]=127&(a>>>=7)|(a>127?128:0),a<=127||(this.buf[this.pos++]=127&(a>>>=7)|(a>127?128:0),a<=127||(this.buf[this.pos++]=a>>>7&127))))},writeSVarint:function(a){this.writeVarint(a<0?2*-a-1:2*a)},writeBoolean:function(a){this.writeVarint(!!a)},writeString:function(a){a=String(a),this.realloc(4*a.length),this.pos++;var i=this.pos;this.pos=function(d,p,y){for(var x,w,P=0;P<p.length;P++){if((x=p.charCodeAt(P))>55295&&x<57344){if(!w){x>56319||P+1===p.length?(d[y++]=239,d[y++]=191,d[y++]=189):w=x;continue}if(x<56320){d[y++]=239,d[y++]=191,d[y++]=189,w=x;continue}x=w-55296<<10|x-56320|65536,w=null}else w&&(d[y++]=239,d[y++]=191,d[y++]=189,w=null);x<128?d[y++]=x:(x<2048?d[y++]=x>>6|192:(x<65536?d[y++]=x>>12|224:(d[y++]=x>>18|240,d[y++]=x>>12&63|128),d[y++]=x>>6&63|128),d[y++]=63&x|128)}return y}(this.buf,a,this.pos);var l=this.pos-i;l>=128&&gD(i,l,this),this.pos=i-1,this.writeVarint(l),this.pos+=l},writeFloat:function(a){this.realloc(4),fD(this.buf,a,this.pos,!0,23,4),this.pos+=4},writeDouble:function(a){this.realloc(8),fD(this.buf,a,this.pos,!0,52,8),this.pos+=8},writeBytes:function(a){var i=a.length;this.writeVarint(i),this.realloc(i);for(var l=0;l<i;l++)this.buf[this.pos++]=a[l]},writeRawMessage:function(a,i){this.pos++;var l=this.pos;a(i,this);var d=this.pos-l;d>=128&&gD(l,d,this),this.pos=l-1,this.writeVarint(d),this.pos+=d},writeMessage:function(a,i,l){this.writeTag(a,en.Bytes),this.writeRawMessage(i,l)},writePackedVarint:function(a,i){i.length&&this.writeMessage(a,LH,i)},writePackedSVarint:function(a,i){i.length&&this.writeMessage(a,jH,i)},writePackedBoolean:function(a,i){i.length&&this.writeMessage(a,BH,i)},writePackedFloat:function(a,i){i.length&&this.writeMessage(a,zH,i)},writePackedDouble:function(a,i){i.length&&this.writeMessage(a,NH,i)},writePackedFixed32:function(a,i){i.length&&this.writeMessage(a,$H,i)},writePackedSFixed32:function(a,i){i.length&&this.writeMessage(a,FH,i)},writePackedFixed64:function(a,i){i.length&&this.writeMessage(a,UH,i)},writePackedSFixed64:function(a,i){i.length&&this.writeMessage(a,VH,i)},writeBytesField:function(a,i){this.writeTag(a,en.Bytes),this.writeBytes(i)},writeFixed32Field:function(a,i){this.writeTag(a,en.Fixed32),this.writeFixed32(i)},writeSFixed32Field:function(a,i){this.writeTag(a,en.Fixed32),this.writeSFixed32(i)},writeFixed64Field:function(a,i){this.writeTag(a,en.Fixed64),this.writeFixed64(i)},writeSFixed64Field:function(a,i){this.writeTag(a,en.Fixed64),this.writeSFixed64(i)},writeVarintField:function(a,i){this.writeTag(a,en.Varint),this.writeVarint(i)},writeSVarintField:function(a,i){this.writeTag(a,en.Varint),this.writeSVarint(i)},writeStringField:function(a,i){this.writeTag(a,en.Bytes),this.writeString(i)},writeFloatField:function(a,i){this.writeTag(a,en.Fixed32),this.writeFloat(i)},writeDoubleField:function(a,i){this.writeTag(a,en.Fixed64),this.writeDouble(i)},writeBooleanField:function(a,i){this.writeVarintField(a,!!i)}};var Px=U(dD);const xE=3;function GH(a,i,l){i.glyphs=[],a===1&&l.readMessage(WH,i)}function WH(a,i,l){if(a===3){const{id:d,bitmap:p,width:y,height:x,left:w,top:P,advance:C}=l.readMessage(qH,{});i.glyphs.push({id:d,bitmap:new Ol({width:y+2*xE,height:x+2*xE},p),metrics:{width:y,height:x,left:w,top:P,advance:C}})}else a===4?i.ascender=l.readSVarint():a===5&&(i.descender=l.readSVarint())}function qH(a,i,l){a===1?i.id=l.readVarint():a===2?i.bitmap=l.readBytes():a===3?i.width=l.readVarint():a===4?i.height=l.readVarint():a===5?i.left=l.readSVarint():a===6?i.top=l.readSVarint():a===7&&(i.advance=l.readVarint())}const vD=xE;function bE(a){let i=0,l=0;for(const x of a)i+=x.w*x.h,l=Math.max(l,x.w);a.sort((x,w)=>w.h-x.h);const d=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(i/.95)),l),h:1/0}];let p=0,y=0;for(const x of a)for(let w=d.length-1;w>=0;w--){const P=d[w];if(!(x.w>P.w||x.h>P.h)){if(x.x=P.x,x.y=P.y,y=Math.max(y,x.y+x.h),p=Math.max(p,x.x+x.w),x.w===P.w&&x.h===P.h){const C=d.pop();w<d.length&&(d[w]=C)}else x.h===P.h?(P.x+=x.w,P.w-=x.w):x.w===P.w?(P.y+=x.h,P.h-=x.h):(d.push({x:P.x+x.w,y:P.y,w:P.w-x.w,h:x.h}),P.y+=x.h,P.h-=x.h);break}}return{w:p,h:y,fill:i/(p*y)||0}}const ho=1;class wE{constructor(i,{pixelRatio:l,version:d,stretchX:p,stretchY:y,content:x}){this.paddedRect=i,this.pixelRatio=l,this.stretchX=p,this.stretchY=y,this.content=x,this.version=d}get tl(){return[this.paddedRect.x+ho,this.paddedRect.y+ho]}get br(){return[this.paddedRect.x+this.paddedRect.w-ho,this.paddedRect.y+this.paddedRect.h-ho]}get displaySize(){return[(this.paddedRect.w-2*ho)/this.pixelRatio,(this.paddedRect.h-2*ho)/this.pixelRatio]}}class _D{constructor(i,l){const d={},p={};this.haveRenderCallbacks=[];const y=[];this.addImages(i,d,y),this.addImages(l,p,y);const{w:x,h:w}=bE(y),P=new Oo({width:x||1,height:w||1});for(const C in i){const j=i[C],$=d[C].paddedRect;Oo.copy(j.data,P,{x:0,y:0},{x:$.x+ho,y:$.y+ho},j.data)}for(const C in l){const j=l[C],$=p[C].paddedRect,G=$.x+ho,X=$.y+ho,K=j.data.width,te=j.data.height;Oo.copy(j.data,P,{x:0,y:0},{x:G,y:X},j.data),Oo.copy(j.data,P,{x:0,y:te-1},{x:G,y:X-1},{width:K,height:1}),Oo.copy(j.data,P,{x:0,y:0},{x:G,y:X+te},{width:K,height:1}),Oo.copy(j.data,P,{x:K-1,y:0},{x:G-1,y:X},{width:1,height:te}),Oo.copy(j.data,P,{x:0,y:0},{x:G+K,y:X},{width:1,height:te})}this.image=P,this.iconPositions=d,this.patternPositions=p}addImages(i,l,d){for(const p in i){const y=i[p],x={x:0,y:0,w:y.data.width+2*ho,h:y.data.height+2*ho};d.push(x),l[p]=new wE(x,y),y.hasRenderCallback&&this.haveRenderCallbacks.push(p)}}patchUpdatedImages(i,l){this.haveRenderCallbacks=this.haveRenderCallbacks.filter(d=>i.hasImage(d)),i.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const d in i.updatedImages)this.patchUpdatedImage(this.iconPositions[d],i.getImage(d),l),this.patchUpdatedImage(this.patternPositions[d],i.getImage(d),l)}patchUpdatedImage(i,l,d){if(!i||!l||i.version===l.version)return;i.version=l.version;const[p,y]=i.tl;d.update(l.data,void 0,{x:p,y})}}$t(wE,"ImagePosition"),$t(_D,"ImageAtlas");const Yo={horizontal:1,vertical:2,horizontalOnly:3},xD=-17;class Dg{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(i,l){const d=new Dg;return d.scale=i||1,d.fontStack=l,d}static forImage(i){const l=new Dg;return l.imageName=i,l}}class uf{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(i,l){const d=new uf;for(let p=0;p<i.sections.length;p++){const y=i.sections[p];y.image?d.addImageSection(y):d.addTextSection(y,l)}return d}length(){return this.text.length}getSection(i){return this.sections[this.sectionIndex[i]]}getSections(){return this.sections}getSectionIndex(i){return this.sectionIndex[i]}getCharCode(i){return this.text.charCodeAt(i)}verticalizePunctuation(i){this.text=function(l,d){let p="";for(let y=0;y<l.length;y++){const x=l.charCodeAt(y+1)||null,w=l.charCodeAt(y-1)||null;p+=!d&&(x&&rx(x)&&!kg[l[y+1]]||w&&rx(w)&&!kg[l[y-1]])||!kg[l[y]]?l[y]:kg[l[y]]}return p}(this.text,i)}trim(){let i=0;for(let d=0;d<this.text.length&&Cx[this.text.charCodeAt(d)];d++)i++;let l=this.text.length;for(let d=this.text.length-1;d>=0&&d>=i&&Cx[this.text.charCodeAt(d)];d--)l--;this.text=this.text.substring(i,l),this.sectionIndex=this.sectionIndex.slice(i,l)}substring(i,l){const d=new uf;return d.text=this.text.substring(i,l),d.sectionIndex=this.sectionIndex.slice(i,l),d.sections=this.sections,d}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((i,l)=>Math.max(i,this.sections[l].scale),0)}addTextSection(i,l){this.text+=i.text,this.sections.push(Dg.forText(i.scale,i.fontStack||l));const d=this.sections.length-1;for(let p=0;p<i.text.length;++p)this.sectionIndex.push(d)}addImageSection(i){const l=i.image?i.image.name:"";if(l.length===0)return void Pt("Can't add FormattedSection with an empty image.");const d=this.getNextImageSectionCharCode();d?(this.text+=String.fromCharCode(d),this.sections.push(Dg.forImage(l)),this.sectionIndex.push(this.sections.length-1)):Pt("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function SE(a,i,l,d,p,y,x,w,P,C,j,$,G,X,K){const te=uf.fromFeature(a,p);$===Yo.vertical&&te.verticalizePunctuation(G);let se=[];const me=function(Ce,Ye,Xe,ot,bt,Qe){if(!Ce)return[];const ut=[],dt=function(Rt,Ut,Lt,ar,Mt,Xt){let sr=0;for(let Or=0;Or<Rt.length();Or++){const lr=Rt.getSection(Or);sr+=bD(Rt.getCharCode(Or),lr,ar,Mt,Ut,Xt)}return sr/Math.max(1,Math.ceil(sr/Lt))}(Ce,Ye,Xe,ot,bt,Qe),yt=Ce.text.indexOf("​")>=0;let Ct=0;for(let Rt=0;Rt<Ce.length();Rt++){const Ut=Ce.getSection(Rt),Lt=Ce.getCharCode(Rt);if(Cx[Lt]||(Ct+=bD(Lt,Ut,ot,bt,Ye,Qe)),Rt<Ce.length()-1){const ar=!((nt=Lt)<11904||!(jt["Bopomofo Extended"](nt)||jt.Bopomofo(nt)||jt["CJK Compatibility Forms"](nt)||jt["CJK Compatibility Ideographs"](nt)||jt["CJK Compatibility"](nt)||jt["CJK Radicals Supplement"](nt)||jt["CJK Strokes"](nt)||jt["CJK Symbols and Punctuation"](nt)||jt["CJK Unified Ideographs Extension A"](nt)||jt["CJK Unified Ideographs"](nt)||jt["Enclosed CJK Letters and Months"](nt)||jt["Halfwidth and Fullwidth Forms"](nt)||jt.Hiragana(nt)||jt["Ideographic Description Characters"](nt)||jt["Kangxi Radicals"](nt)||jt["Katakana Phonetic Extensions"](nt)||jt.Katakana(nt)||jt["Vertical Forms"](nt)||jt["Yi Radicals"](nt)||jt["Yi Syllables"](nt)));(HH[Lt]||ar||Ut.imageName)&&ut.push(SD(Rt+1,Ct,dt,ut,XH(Lt,Ce.getCharCode(Rt+1),ar&&yt),!1))}}var nt;return ED(SD(Ce.length(),Ct,dt,ut,0,!0))}(te,C,y,i,d,X),{processBidirectionalText:Ae,processStyledBidirectionalText:ge}=D;if(Ae&&te.sections.length===1){const Ce=Ae(te.toString(),me);for(const Ye of Ce){const Xe=new uf;Xe.text=Ye,Xe.sections=te.sections;for(let ot=0;ot<Ye.length;ot++)Xe.sectionIndex.push(0);se.push(Xe)}}else if(ge){const Ce=ge(te.text,te.sectionIndex,me);for(const Ye of Ce){const Xe=new uf;Xe.text=Ye[0],Xe.sectionIndex=Ye[1],Xe.sections=te.sections,se.push(Xe)}}else se=function(Ce,Ye){const Xe=[],ot=Ce.text;let bt=0;for(const Qe of Ye)Xe.push(Ce.substring(bt,Qe)),bt=Qe;return bt<ot.length&&Xe.push(Ce.substring(bt,ot.length)),Xe}(te,me);const Te=[],Me={positionedLines:Te,text:te.toString(),top:j[1],bottom:j[1],left:j[0],right:j[0],writingMode:$,iconsInText:!1,verticalizable:!1,hasBaseline:!1};return function(Ce,Ye,Xe,ot,bt,Qe,ut,dt,yt,Ct,nt,Rt){let Ut=0,Lt=0,ar=0;const Mt=dt==="right"?1:dt==="left"?0:.5;let Xt=!1;for(const hr of bt){const fr=hr.getSections();for(const Kr of fr){if(Kr.imageName)continue;const tn=Ye[Kr.fontStack];if(tn&&(Xt=tn.ascender!==void 0&&tn.descender!==void 0,!Xt))break}if(!Xt)break}let sr=0;for(const hr of bt){hr.trim();const fr=hr.getMaxScale(),Kr=(fr-1)*vi,tn={positionedGlyphs:[],lineOffset:0};Ce.positionedLines[sr]=tn;const rn=tn.positionedGlyphs;let Yr=0;if(!hr.length()){Lt+=Qe,++sr;continue}let vn=0,Cn=0;for(let Jr=0;Jr<hr.length();Jr++){const ei=hr.getSection(Jr),Gn=hr.getSectionIndex(Jr),Sn=hr.getCharCode(Jr);let Dr=ei.scale,Wn=null,nn=null,Qi=null,qn=vi,_i=0;const hi=!(yt===Yo.horizontal||!nt&&!ag(Sn)||nt&&(Cx[Sn]||(Or=Sn,jt.Arabic(Or)||jt["Arabic Supplement"](Or)||jt["Arabic Extended-A"](Or)||jt["Arabic Presentation Forms-A"](Or)||jt["Arabic Presentation Forms-B"](Or))));if(ei.imageName){const eo=ot[ei.imageName];if(!eo)continue;Qi=ei.imageName,Ce.iconsInText=Ce.iconsInText||!0,nn=eo.paddedRect;const fi=eo.displaySize;Dr=Dr*vi/Rt,Wn={width:fi[0],height:fi[1],left:ho,top:-vD,advance:hi?fi[1]:fi[0],localGlyph:!1},_i=Xt?-Wn.height*Dr:xD+fr*vi-fi[1]*Dr,qn=Wn.advance;const gs=(hi?fi[0]:fi[1])*Dr-vi*fr;gs>0&&gs>Yr&&(Yr=gs)}else{const eo=Xe[ei.fontStack];if(!eo)continue;eo[Sn]&&(nn=eo[Sn]);const fi=Ye[ei.fontStack];if(!fi)continue;const gs=fi.glyphs[Sn];if(!gs)continue;if(Wn=gs.metrics,qn=Sn!==8203?vi:0,Xt){const yf=fi.ascender!==void 0?Math.abs(fi.ascender):0,Vg=fi.descender!==void 0?Math.abs(fi.descender):0,Gg=(yf+Vg)*Dr;vn<Gg&&(vn=Gg,Cn=(yf-Vg)/2*Dr),_i=-yf*Dr}else _i=xD+(fr-Dr)*vi}hi?(Ce.verticalizable=!0,rn.push({glyph:Sn,imageName:Qi,x:Ut,y:Lt+_i,vertical:hi,scale:Dr,localGlyph:Wn.localGlyph,fontStack:ei.fontStack,sectionIndex:Gn,metrics:Wn,rect:nn}),Ut+=qn*Dr+Ct):(rn.push({glyph:Sn,imageName:Qi,x:Ut,y:Lt+_i,vertical:hi,scale:Dr,localGlyph:Wn.localGlyph,fontStack:ei.fontStack,sectionIndex:Gn,metrics:Wn,rect:nn}),Ut+=Wn.advance*Dr+Ct)}rn.length!==0&&(ar=Math.max(Ut-Ct,ar),Xt?TD(rn,Mt,Yr,Cn,Qe*fr/2):TD(rn,Mt,Yr,0,Qe/2)),Ut=0;const Vn=Qe*fr+Yr;tn.lineOffset=Math.max(Yr,Kr),Lt+=Vn,++sr}var Or;const lr=Lt,{horizontalAlign:er,verticalAlign:on}=EE(ut);(function(hr,fr,Kr,tn,rn,Yr){const vn=(fr-Kr)*rn,Cn=-Yr*tn;for(const Vn of hr)for(const Jr of Vn.positionedGlyphs)Jr.x+=vn,Jr.y+=Cn})(Ce.positionedLines,Mt,er,on,ar,lr),Ce.top+=-on*lr,Ce.bottom=Ce.top+lr,Ce.left+=-er*ar,Ce.right=Ce.left+ar,Ce.hasBaseline=Xt}(Me,i,l,d,se,x,w,P,$,C,G,K),!function(Ce){for(const Ye of Ce)if(Ye.positionedGlyphs.length!==0)return!1;return!0}(Te)&&Me}const Cx={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},HH={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function bD(a,i,l,d,p,y){if(i.imageName){const x=d[i.imageName];return x?x.displaySize[0]*i.scale*vi/y+p:0}{const x=l[i.fontStack],w=x&&x.glyphs[a];return w?w.metrics.advance*i.scale+p:0}}function wD(a,i,l,d){const p=Math.pow(a-i,2);return d?a<i?p/2:2*p:p+Math.abs(l)*l}function XH(a,i,l){let d=0;return a===10&&(d-=1e4),l&&(d+=150),a!==40&&a!==65288||(d+=50),i!==41&&i!==65289||(d+=50),d}function SD(a,i,l,d,p,y){let x=null,w=wD(i,l,p,y);for(const P of d){const C=wD(i-P.x,l,p,y)+P.badness;C<=w&&(x=P,w=C)}return{index:a,x:i,priorBreak:x,badness:w}}function ED(a){return a?ED(a.priorBreak).concat(a.index):[]}function EE(a){let i=.5,l=.5;switch(a){case"right":case"top-right":case"bottom-right":i=1;break;case"left":case"top-left":case"bottom-left":i=0}switch(a){case"bottom":case"bottom-right":case"bottom-left":l=1;break;case"top":case"top-right":case"top-left":l=0}return{horizontalAlign:i,verticalAlign:l}}function TD(a,i,l,d,p){if(!(i||l||d||p))return;const y=a.length-1,x=a[y],w=(x.x+x.metrics.advance*x.scale)*i;for(let P=0;P<=y;P++)a[P].x-=w,a[P].y+=l+d+p}function ZH(a,i,l){const{horizontalAlign:d,verticalAlign:p}=EE(l),y=i[0]-a.displaySize[0]*d,x=i[1]-a.displaySize[1]*p;return{image:a,top:x,bottom:x+a.displaySize[1],left:y,right:y+a.displaySize[0]}}function AD(a,i,l,d,p,y){const x=a.image;let w;if(x.content){const se=x.content,me=x.pixelRatio||1;w=[se[0]/me,se[1]/me,x.displaySize[0]-se[2]/me,x.displaySize[1]-se[3]/me]}const P=i.left*y,C=i.right*y;let j,$,G,X;l==="width"||l==="both"?(X=p[0]+P-d[3],$=p[0]+C+d[1]):(X=p[0]+(P+C-x.displaySize[0])/2,$=X+x.displaySize[0]);const K=i.top*y,te=i.bottom*y;return l==="height"||l==="both"?(j=p[1]+K-d[0],G=p[1]+te+d[2]):(j=p[1]+(K+te-x.displaySize[1])/2,G=j+x.displaySize[1]),{image:x,top:j,right:$,bottom:G,left:X,collisionPadding:w}}class Dl extends ne{constructor(i,l,d,p,y){super(i,l),this.angle=p,this.z=d,y!==void 0&&(this.segment=y)}clone(){return new Dl(this.x,this.y,this.z,this.angle,this.segment)}}function PD(a,i,l,d,p){if(i.segment===void 0)return!0;let y=i,x=i.segment+1,w=0;for(;w>-l/2;){if(x--,x<0)return!1;w-=a[x].dist(y),y=a[x]}w+=a[x].dist(a[x+1]),x++;const P=[];let C=0;for(;w<l/2;){const j=a[x],$=a[x+1];if(!$)return!1;let G=a[x-1].angleTo(j)-j.angleTo($);for(G=Math.abs((G+3*Math.PI)%(2*Math.PI)-Math.PI),P.push({distance:w,angleDelta:G}),C+=G;w-P[0].distance>d;)C-=P.shift().angleDelta;if(C>p)return!1;x++,w+=j.dist($)}return!0}function CD(a){let i=0;for(let l=0;l<a.length-1;l++)i+=a[l].dist(a[l+1]);return i}function MD(a,i,l){return a?.6*i*l:0}function ID(a,i){return Math.max(a?a.right-a.left:0,i?i.right-i.left:0)}function KH(a,i,l,d,p,y){const x=MD(l,p,y),w=ID(l,d)*y;let P=0;const C=CD(a)/2;for(let j=0;j<a.length-1;j++){const $=a[j],G=a[j+1],X=$.dist(G);if(P+X>C){const K=(C-P)/X,te=Cr($.x,G.x,K),se=Cr($.y,G.y,K),me=new Dl(te,se,0,G.angleTo($),j);return!x||PD(a,me,w,x,i)?me:void 0}P+=X}}function YH(a,i,l,d,p,y,x,w,P){const C=MD(d,y,x),j=ID(d,p),$=j*x,G=a[0].x===0||a[0].x===P||a[0].y===0||a[0].y===P;return i-$<i/4&&(i=$+i/4),OD(a,G?i/2*w%i:(j/2+2*y)*x*w%i,i,C,l,$,G,!1,P)}function OD(a,i,l,d,p,y,x,w,P){const C=y/2,j=CD(a);let $=0,G=i-l,X=[];for(let K=0;K<a.length-1;K++){const te=a[K],se=a[K+1],me=te.dist(se),Ae=se.angleTo(te);for(;G+l<$+me;){G+=l;const ge=(G-$)/me,Te=Cr(te.x,se.x,ge),Me=Cr(te.y,se.y,ge);if(Te>=0&&Te<P&&Me>=0&&Me<P&&G-C>=0&&G+C<=j){const Ce=new Dl(Te,Me,0,Ae,K);Ce._round(),d&&!PD(a,Ce,y,d,p)||X.push(Ce)}}$+=me}return w||X.length||x||(X=OD(a,$/2,l,d,p,y,x,!0,P)),X}function kD(a,i,l,d,p){const y=[];for(let x=0;x<a.length;x++){const w=a[x];let P;for(let C=0;C<w.length-1;C++){let j=w[C],$=w[C+1];j.x<i&&$.x<i||(j.x<i?j=new ne(i,j.y+(i-j.x)/($.x-j.x)*($.y-j.y))._round():$.x<i&&($=new ne(i,j.y+(i-j.x)/($.x-j.x)*($.y-j.y))._round()),j.y<l&&$.y<l||(j.y<l?j=new ne(j.x+(l-j.y)/($.y-j.y)*($.x-j.x),l)._round():$.y<l&&($=new ne(j.x+(l-j.y)/($.y-j.y)*($.x-j.x),l)._round()),j.x>=d&&$.x>=d||(j.x>=d?j=new ne(d,j.y+(d-j.x)/($.x-j.x)*($.y-j.y))._round():$.x>=d&&($=new ne(d,j.y+(d-j.x)/($.x-j.x)*($.y-j.y))._round()),j.y>=p&&$.y>=p||(j.y>=p?j=new ne(j.x+(p-j.y)/($.y-j.y)*($.x-j.x),p)._round():$.y>=p&&($=new ne(j.x+(p-j.y)/($.y-j.y)*($.x-j.x),p)._round()),P&&j.equals(P[P.length-1])||(P=[j],y.push(P)),P.push($)))))}}return y}$t(Dl,"Anchor");const Rg=1e20;function DD(a,i,l,d,p,y,x,w,P){for(let C=i;C<i+d;C++)RD(a,l*y+C,y,p,x,w,P);for(let C=l;C<l+p;C++)RD(a,C*y+i,1,d,x,w,P)}function RD(a,i,l,d,p,y,x){y[0]=0,x[0]=-Rg,x[1]=Rg,p[0]=a[i];for(let w=1,P=0,C=0;w<d;w++){p[w]=a[i+w*l];const j=w*w;do{const $=y[P];C=(p[w]-p[$]+j-$*$)/(w-$)/2}while(C<=x[P]&&--P>-1);P++,y[P]=w,x[P]=C,x[P+1]=Rg}for(let w=0,P=0;w<d;w++){for(;x[P+1]<w;)P++;const C=y[P],j=w-C;a[i+w*l]=p[C]+j*j}}const ps=2,TE={none:0,ideographs:1,all:2};class df{constructor(i,l,d){this.requestManager=i,this.localGlyphMode=l,this.localFontFamily=d,this.entries={},this.localGlyphs={200:{},400:{},500:{},900:{}}}setURL(i){this.url=i}getGlyphs(i,l){const d=[];for(const p in i)for(const y of i[p])d.push({stack:p,id:y});Ge(d,({stack:p,id:y},x)=>{let w=this.entries[p];w||(w=this.entries[p]={glyphs:{},requests:{},ranges:{},ascender:void 0,descender:void 0});let P=w.glyphs[y];if(P!==void 0)return void x(null,{stack:p,id:y,glyph:P});if(P=this._tinySDF(w,p,y),P)return w.glyphs[y]=P,void x(null,{stack:p,id:y,glyph:P});const C=Math.floor(y/256);if(256*C>65535)return void x(new Error("glyphs > 65535 not supported"));if(w.ranges[C])return void x(null,{stack:p,id:y,glyph:P});let j=w.requests[C];j||(j=w.requests[C]=[],df.loadGlyphRange(p,C,this.url,this.requestManager,($,G)=>{if(G){w.ascender=G.ascender,w.descender=G.descender;for(const X in G.glyphs)this._doesCharSupportLocalGlyph(+X)||(w.glyphs[+X]=G.glyphs[+X]);w.ranges[C]=!0}for(const X of j)X($,G);delete w.requests[C]})),j.push(($,G)=>{$?x($):G&&x(null,{stack:p,id:y,glyph:G.glyphs[y]||null})})},(p,y)=>{if(p)l(p);else if(y){const x={};for(const{stack:w,id:P,glyph:C}of y)x[w]===void 0&&(x[w]={}),x[w].glyphs===void 0&&(x[w].glyphs={}),x[w].glyphs[P]=C&&{id:C.id,bitmap:C.bitmap.clone(),metrics:C.metrics},x[w].ascender=this.entries[w].ascender,x[w].descender=this.entries[w].descender;l(null,x)}})}_doesCharSupportLocalGlyph(i){return this.localGlyphMode!==TE.none&&(this.localGlyphMode===TE.all?!!this.localFontFamily:!!this.localFontFamily&&(jt["CJK Unified Ideographs"](i)||jt["Hangul Syllables"](i)||jt.Hiragana(i)||jt.Katakana(i)||jt["CJK Symbols and Punctuation"](i)))}_tinySDF(i,l,d){const p=this.localFontFamily;if(!p||!this._doesCharSupportLocalGlyph(d))return;let y=i.tinySDF;if(!y){let te="400";/bold/i.test(l)?te="900":/medium/i.test(l)?te="500":/light/i.test(l)&&(te="200"),y=i.tinySDF=new df.TinySDF({fontFamily:p,fontWeight:te,fontSize:24*ps,buffer:3*ps,radius:8*ps}),y.fontWeight=te}if(this.localGlyphs[y.fontWeight][d])return this.localGlyphs[y.fontWeight][d];const x=String.fromCharCode(d),{data:w,width:P,height:C,glyphWidth:j,glyphHeight:$,glyphLeft:G,glyphTop:X,glyphAdvance:K}=y.draw(x);return this.localGlyphs[y.fontWeight][d]={id:d,bitmap:new Ol({width:P,height:C},w),metrics:{width:j/ps,height:$/ps,left:G/ps,top:X/ps-27,advance:K/ps,localGlyph:!0}}}}df.loadGlyphRange=function(a,i,l,d,p){const y=256*i,x=y+255,w=d.transformRequest(d.normalizeGlyphsURL(l).replace("{fontstack}",a).replace("{range}",`${y}-${x}`),So.Glyphs);cr(w,(P,C)=>{if(P)p(P);else if(C){const j={},$=function(G){return new Px(G).readFields(GH,{})}(C);for(const G of $.glyphs)j[G.id]=G;p(null,{glyphs:j,ascender:$.ascender,descender:$.descender})}})},df.TinySDF=class{constructor({fontSize:a=24,buffer:i=3,radius:l=8,cutoff:d=.25,fontFamily:p="sans-serif",fontWeight:y="normal",fontStyle:x="normal"}={}){this.buffer=i,this.cutoff=d,this.radius=l;const w=this.size=a+4*i,P=this._createCanvas(w),C=this.ctx=P.getContext("2d",{willReadFrequently:!0});C.font=`${x} ${y} ${a}px ${p}`,C.textBaseline="alphabetic",C.textAlign="left",C.fillStyle="black",this.gridOuter=new Float64Array(w*w),this.gridInner=new Float64Array(w*w),this.f=new Float64Array(w),this.z=new Float64Array(w+1),this.v=new Uint16Array(w)}_createCanvas(a){const i=document.createElement("canvas");return i.width=i.height=a,i}draw(a){const{width:i,actualBoundingBoxAscent:l,actualBoundingBoxDescent:d,actualBoundingBoxLeft:p,actualBoundingBoxRight:y}=this.ctx.measureText(a),x=Math.ceil(l),w=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(y-p))),P=Math.min(this.size-this.buffer,x+Math.ceil(d)),C=w+2*this.buffer,j=P+2*this.buffer,$=Math.max(C*j,0),G=new Uint8ClampedArray($),X={data:G,width:C,height:j,glyphWidth:w,glyphHeight:P,glyphTop:x,glyphLeft:0,glyphAdvance:i};if(w===0||P===0)return X;const{ctx:K,buffer:te,gridInner:se,gridOuter:me}=this;K.clearRect(te,te,w,P),K.fillText(a,te,te+x);const Ae=K.getImageData(te,te,w,P);me.fill(Rg,0,$),se.fill(0,0,$);for(let ge=0;ge<P;ge++)for(let Te=0;Te<w;Te++){const Me=Ae.data[4*(ge*w+Te)+3]/255;if(Me===0)continue;const Ce=(ge+te)*C+Te+te;if(Me===1)me[Ce]=0,se[Ce]=Rg;else{const Ye=.5-Me;me[Ce]=Ye>0?Ye*Ye:0,se[Ce]=Ye<0?Ye*Ye:0}}DD(me,0,0,C,j,C,this.f,this.v,this.z),DD(se,te,te,w,P,C,this.f,this.v,this.z);for(let ge=0;ge<$;ge++){const Te=Math.sqrt(me[ge])-Math.sqrt(se[ge]);G[ge]=Math.round(255-255*(Te/this.radius+this.cutoff))}return X}};const hf=ho;function LD(a,i,l,d){const p=[],y=a.image,x=y.pixelRatio,w=y.paddedRect.w-2*hf,P=y.paddedRect.h-2*hf,C=a.right-a.left,j=a.bottom-a.top,$=y.stretchX||[[0,w]],G=y.stretchY||[[0,P]],X=(Qe,ut)=>Qe+ut[1]-ut[0],K=$.reduce(X,0),te=G.reduce(X,0),se=w-K,me=P-te;let Ae=0,ge=K,Te=0,Me=te,Ce=0,Ye=se,Xe=0,ot=me;if(y.content&&d){const Qe=y.content;Ae=Mx($,0,Qe[0]),Te=Mx(G,0,Qe[1]),ge=Mx($,Qe[0],Qe[2]),Me=Mx(G,Qe[1],Qe[3]),Ce=Qe[0]-Ae,Xe=Qe[1]-Te,Ye=Qe[2]-Qe[0]-ge,ot=Qe[3]-Qe[1]-Me}const bt=(Qe,ut,dt,yt)=>{const Ct=Ix(Qe.stretch-Ae,ge,C,a.left),nt=Ox(Qe.fixed-Ce,Ye,Qe.stretch,K),Rt=Ix(ut.stretch-Te,Me,j,a.top),Ut=Ox(ut.fixed-Xe,ot,ut.stretch,te),Lt=Ix(dt.stretch-Ae,ge,C,a.left),ar=Ox(dt.fixed-Ce,Ye,dt.stretch,K),Mt=Ix(yt.stretch-Te,Me,j,a.top),Xt=Ox(yt.fixed-Xe,ot,yt.stretch,te),sr=new ne(Ct,Rt),Or=new ne(Lt,Rt),lr=new ne(Lt,Mt),er=new ne(Ct,Mt),on=new ne(nt/x,Ut/x),hr=new ne(ar/x,Xt/x),fr=i*Math.PI/180;if(fr){const rn=Math.sin(fr),Yr=Math.cos(fr),vn=[Yr,-rn,rn,Yr];sr._matMult(vn),Or._matMult(vn),er._matMult(vn),lr._matMult(vn)}const Kr=Qe.stretch+Qe.fixed,tn=ut.stretch+ut.fixed;return{tl:sr,tr:Or,bl:er,br:lr,tex:{x:y.paddedRect.x+hf+Kr,y:y.paddedRect.y+hf+tn,w:dt.stretch+dt.fixed-Kr,h:yt.stretch+yt.fixed-tn},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:on,pixelOffsetBR:hr,minFontScaleX:Ye/x/C,minFontScaleY:ot/x/j,isSDF:l}};if(d&&(y.stretchX||y.stretchY)){const Qe=jD($,se,K),ut=jD(G,me,te);for(let dt=0;dt<Qe.length-1;dt++){const yt=Qe[dt],Ct=Qe[dt+1];for(let nt=0;nt<ut.length-1;nt++)p.push(bt(yt,ut[nt],Ct,ut[nt+1]))}}else p.push(bt({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:w+1},{fixed:0,stretch:P+1}));return p}function Mx(a,i,l){let d=0;for(const p of a)d+=Math.max(i,Math.min(l,p[1]))-Math.max(i,Math.min(l,p[0]));return d}function jD(a,i,l){const d=[{fixed:-hf,stretch:0}];for(const[p,y]of a){const x=d[d.length-1];d.push({fixed:p-x.stretch,stretch:x.stretch}),d.push({fixed:p-x.stretch,stretch:x.stretch+(y-p)})}return d.push({fixed:i+hf,stretch:l}),d}function Ix(a,i,l,d){return a/i*l+d}function Ox(a,i,l,d){return a-i*l/d}function JH(a,i,l,d){const p=i+a.positionedLines[d].lineOffset;return d===0?l+p/2:l+(p+(i+a.positionedLines[d-1].lineOffset))/2}class QH{constructor(i=[],l=e9){if(this.data=i,this.length=this.data.length,this.compare=l,this.length>0)for(let d=(this.length>>1)-1;d>=0;d--)this._down(d)}push(i){this.data.push(i),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const i=this.data[0],l=this.data.pop();return this.length--,this.length>0&&(this.data[0]=l,this._down(0)),i}peek(){return this.data[0]}_up(i){const{data:l,compare:d}=this,p=l[i];for(;i>0;){const y=i-1>>1,x=l[y];if(d(p,x)>=0)break;l[i]=x,i=y}l[i]=p}_down(i){const{data:l,compare:d}=this,p=this.length>>1,y=l[i];for(;i<p;){let x=1+(i<<1),w=l[x];const P=x+1;if(P<this.length&&d(l[P],w)<0&&(x=P,w=l[P]),d(w,y)>=0)break;l[i]=w,i=x}l[i]=y}}function e9(a,i){return a<i?-1:a>i?1:0}function t9(a,i=1,l=!1){let d=1/0,p=1/0,y=-1/0,x=-1/0;const w=a[0];for(let X=0;X<w.length;X++){const K=w[X];(!X||K.x<d)&&(d=K.x),(!X||K.y<p)&&(p=K.y),(!X||K.x>y)&&(y=K.x),(!X||K.y>x)&&(x=K.y)}const P=Math.min(y-d,x-p);let C=P/2;const j=new QH([],r9);if(P===0)return new ne(d,p);for(let X=d;X<y;X+=P)for(let K=p;K<x;K+=P)j.push(new ff(X+C,K+C,C,a));let $=function(X){let K=0,te=0,se=0;const me=X[0];for(let Ae=0,ge=me.length,Te=ge-1;Ae<ge;Te=Ae++){const Me=me[Ae],Ce=me[Te],Ye=Me.x*Ce.y-Ce.x*Me.y;te+=(Me.x+Ce.x)*Ye,se+=(Me.y+Ce.y)*Ye,K+=3*Ye}return new ff(te/K,se/K,0,X)}(a),G=j.length;for(;j.length;){const X=j.pop();(X.d>$.d||!$.d)&&($=X,l&&console.log("found best %d after %d probes",Math.round(1e4*X.d)/1e4,G)),X.max-$.d<=i||(C=X.h/2,j.push(new ff(X.p.x-C,X.p.y-C,C,a)),j.push(new ff(X.p.x+C,X.p.y-C,C,a)),j.push(new ff(X.p.x-C,X.p.y+C,C,a)),j.push(new ff(X.p.x+C,X.p.y+C,C,a)),G+=4)}return l&&(console.log(`num probes: ${G}`),console.log(`best distance: ${$.d}`)),$.p}function r9(a,i){return i.max-a.max}class ff{constructor(i,l,d,p){this.p=new ne(i,l),this.h=d,this.d=function(y,x){let w=!1,P=1/0;for(let C=0;C<x.length;C++){const j=x[C];for(let $=0,G=j.length,X=G-1;$<G;X=$++){const K=j[$],te=j[X];K.y>y.y!=te.y>y.y&&y.x<(te.x-K.x)*(y.y-K.y)/(te.y-K.y)+K.x&&(w=!w),P=Math.min(P,Ok(y,K,te))}}return(w?1:-1)*Math.sqrt(P)}(this.p,p),this.max=this.d+this.h*Math.SQRT2}}const pf=7,AE=Number.POSITIVE_INFINITY,n9=Math.sqrt(2);function zD(a,[i,l]){let d=0,p=0;if(l===AE){i<0&&(i=0);const y=i/n9;switch(a){case"top-right":case"top-left":p=y-pf;break;case"bottom-right":case"bottom-left":p=-y+pf;break;case"bottom":p=-i+pf;break;case"top":p=i-pf}switch(a){case"top-right":case"bottom-right":d=-y;break;case"top-left":case"bottom-left":d=y;break;case"left":d=i;break;case"right":d=-i}}else{switch(i=Math.abs(i),l=Math.abs(l),a){case"top-right":case"top-left":case"top":p=l-pf;break;case"bottom-right":case"bottom-left":case"bottom":p=-l+pf}switch(a){case"top-right":case"bottom-right":case"right":d=-i;break;case"top-left":case"bottom-left":case"left":d=i}}return[d,p]}function i9(a,i,l,d,p,y,x,w,P,C){a.createArrays(),a.tilePixelRatio=Jt/(512*a.overscaling),a.compareText={},a.iconsNeedLinear=!1;const j=a.layers[0].layout,$=a.layers[0]._unevaluatedLayout._values,G={};if(a.textSizeData.kind==="composite"){const{minZoom:te,maxZoom:se}=a.textSizeData;G.compositeTextSizes=[$["text-size"].possiblyEvaluate(new B(te),w),$["text-size"].possiblyEvaluate(new B(se),w)]}if(a.iconSizeData.kind==="composite"){const{minZoom:te,maxZoom:se}=a.iconSizeData;G.compositeIconSizes=[$["icon-size"].possiblyEvaluate(new B(te),w),$["icon-size"].possiblyEvaluate(new B(se),w)]}G.layoutTextSize=$["text-size"].possiblyEvaluate(new B(P+1),w),G.layoutIconSize=$["icon-size"].possiblyEvaluate(new B(P+1),w),G.textMaxSize=$["text-size"].possiblyEvaluate(new B(18),w);const X=j.get("text-rotation-alignment")==="map"&&j.get("symbol-placement")!=="point",K=j.get("text-size");for(const te of a.features){const se=j.get("text-font").evaluate(te,{},w).join(","),me=K.evaluate(te,{},w),Ae=G.layoutTextSize.evaluate(te,{},w),ge=(G.layoutIconSize.evaluate(te,{},w),{horizontal:{},vertical:void 0}),Te=te.text;let Me,Ce=[0,0];if(Te){const ot=Te.toString(),bt=j.get("text-letter-spacing").evaluate(te,{},w)*vi,Qe=j.get("text-line-height").evaluate(te,{},w)*vi,ut=LS(ot)?bt:0,dt=j.get("text-anchor").evaluate(te,{},w),yt=j.get("text-variable-anchor");if(!yt){const Lt=j.get("text-radial-offset").evaluate(te,{},w);Ce=Lt?zD(dt,[Lt*vi,AE]):j.get("text-offset").evaluate(te,{},w).map(ar=>ar*vi)}let Ct=X?"center":j.get("text-justify").evaluate(te,{},w);const nt=j.get("symbol-placement")==="point",Rt=nt?j.get("text-max-width").evaluate(te,{},w)*vi:1/0,Ut=Lt=>{a.allowVerticalPlacement&&og(ot)&&(ge.vertical=SE(Te,i,l,p,se,Rt,Qe,dt,Lt,ut,Ce,Yo.vertical,!0,Ae,me))};if(!X&&yt){const Lt=Ct==="auto"?yt.map(Mt=>PE(Mt)):[Ct];let ar=!1;for(let Mt=0;Mt<Lt.length;Mt++){const Xt=Lt[Mt];if(!ge.horizontal[Xt])if(ar)ge.horizontal[Xt]=ge.horizontal[0];else{const sr=SE(Te,i,l,p,se,Rt,Qe,"center",Xt,ut,Ce,Yo.horizontal,!1,Ae,me);sr&&(ge.horizontal[Xt]=sr,ar=sr.positionedLines.length===1)}}Ut("left")}else{if(Ct==="auto"&&(Ct=PE(dt)),nt||j.get("text-writing-mode").indexOf("horizontal")>=0||!og(ot)){const Lt=SE(Te,i,l,p,se,Rt,Qe,dt,Ct,ut,Ce,Yo.horizontal,!1,Ae,me);Lt&&(ge.horizontal[Ct]=Lt)}Ut(nt?"left":Ct)}}let Ye=!1;if(te.icon&&te.icon.name){const ot=d[te.icon.name];ot&&(Me=ZH(p[te.icon.name],j.get("icon-offset").evaluate(te,{},w),j.get("icon-anchor").evaluate(te,{},w)),Ye=ot.sdf,a.sdfIcons===void 0?a.sdfIcons=ot.sdf:a.sdfIcons!==ot.sdf&&Pt("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(ot.pixelRatio!==a.pixelRatio||j.get("icon-rotate").constantOr(1)!==0)&&(a.iconsNeedLinear=!0))}const Xe=BD(ge.horizontal)||ge.vertical;a.iconsInText||(a.iconsInText=!!Xe&&Xe.iconsInText),(Xe||Me)&&o9(a,te,ge,Me,d,G,Ae,0,Ce,Ye,x,w,C)}y&&a.generateCollisionDebugBuffers(P,a.collisionBoxArray)}function PE(a){switch(a){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function o9(a,i,l,d,p,y,x,w,P,C,j,$,G){let X=y.textMaxSize.evaluate(i,{},$);X===void 0&&(X=x);const K=a.layers[0].layout,te=K.get("icon-offset").evaluate(i,{},$),se=BD(l.horizontal)||l.vertical,me=G.name==="globe",Ae=vi,ge=x/Ae,Te=a.tilePixelRatio*X/Ae,Me=(dt=a.overscaling,a.zoom>18&&dt>2&&(dt>>=1),Math.max(Jt/(512*dt),1)*K.get("symbol-spacing")),Ce=K.get("text-padding")*a.tilePixelRatio,Ye=K.get("icon-padding")*a.tilePixelRatio,Xe=Ee(K.get("text-max-angle")),ot=K.get("text-rotation-alignment")==="map"&&K.get("symbol-placement")!=="point",bt=K.get("icon-rotation-alignment")==="map"&&K.get("symbol-placement")!=="point",Qe=K.get("symbol-placement"),ut=Me/2;var dt;const yt=K.get("icon-text-fit");let Ct;d&&yt!=="none"&&(a.allowVerticalPlacement&&l.vertical&&(Ct=AD(d,l.vertical,yt,K.get("icon-text-fit-padding"),te,ge)),se&&(d=AD(d,se,yt,K.get("icon-text-fit-padding"),te,ge)));const nt=(Rt,Ut,Lt)=>{if(Ut.x<0||Ut.x>=Jt||Ut.y<0||Ut.y>=Jt)return;let ar=null;if(me){const{x:Mt,y:Xt,z:sr}=G.projectTilePoint(Ut.x,Ut.y,Lt);ar={anchor:new Dl(Mt,Xt,sr,0,void 0),up:G.upVector(Lt,Ut.x,Ut.y)}}(function(Mt,Xt,sr,Or,lr,er,on,hr,fr,Kr,tn,rn,Yr,vn,Cn,Vn,Jr,ei,Gn,Sn,Dr,Wn,nn,Qi,qn){const _i=Mt.addToLineVertexArray(Xt,Or);let hi,eo,fi,gs,yf,Vg,Gg,vR=0,_R=0,xR=0,bR=0,UE=-1,VE=-1;const Hs={};let wR=NS("");const Pd=sr?sr.anchor:Xt;let GE=0,WE=0;if(fr._unevaluatedLayout.getValue("text-radial-offset")===void 0?[GE,WE]=fr.layout.get("text-offset").evaluate(Dr,{},qn).map(ko=>ko*vi):(GE=fr.layout.get("text-radial-offset").evaluate(Dr,{},qn)*vi,WE=AE),Mt.allowVerticalPlacement&&lr.vertical){const ko=lr.vertical;if(Cn)Vg=CE(ko),hr&&(Gg=CE(hr));else{const Do=fr.layout.get("text-rotate").evaluate(Dr,{},qn)+90;fi=kx(Kr,Pd,Xt,tn,rn,Yr,ko,vn,Do,Vn),hr&&(gs=kx(Kr,Pd,Xt,tn,rn,Yr,hr,ei,Do))}}if(er){const ko=fr.layout.get("icon-rotate").evaluate(Dr,{},qn),Do=fr.layout.get("icon-text-fit")!=="none",Wg=LD(er,ko,nn,Do),HE=hr?LD(hr,ko,nn,Do):void 0;eo=kx(Kr,Pd,Xt,tn,rn,Yr,er,ei,ko),vR=4*Wg.length;const SR=Mt.iconSizeData;let Cd=null;SR.kind==="source"?(Cd=[fs*fr.layout.get("icon-size").evaluate(Dr,{},qn)],Cd[0]>Lc&&Pt(`${Mt.layerIds[0]}: Value for "icon-size" is >= ${Lg}. Reduce your "icon-size".`)):SR.kind==="composite"&&(Cd=[fs*Wn.compositeIconSizes[0].evaluate(Dr,{},qn),fs*Wn.compositeIconSizes[1].evaluate(Dr,{},qn)],(Cd[0]>Lc||Cd[1]>Lc)&&Pt(`${Mt.layerIds[0]}: Value for "icon-size" is >= ${Lg}. Reduce your "icon-size".`)),Mt.addSymbols(Mt.icon,Wg,Cd,Sn,Gn,Dr,!1,sr,Xt,_i.lineStartIndex,_i.lineLength,-1,Qi,qn),UE=Mt.icon.placedSymbolArray.length-1,HE&&(_R=4*HE.length,Mt.addSymbols(Mt.icon,HE,Cd,Sn,Gn,Dr,Yo.vertical,sr,Xt,_i.lineStartIndex,_i.lineLength,-1,Qi,qn),VE=Mt.icon.placedSymbolArray.length-1)}for(const ko in lr.horizontal){const Do=lr.horizontal[ko];hi||(wR=NS(Do.text),Cn?yf=CE(Do):hi=kx(Kr,Pd,Xt,tn,rn,Yr,Do,vn,fr.layout.get("text-rotate").evaluate(Dr,{},qn),Vn));const Wg=Do.positionedLines.length===1;if(xR+=ND(Mt,sr,Xt,Do,on,fr,Cn,Dr,Vn,_i,lr.vertical?Yo.horizontal:Yo.horizontalOnly,Wg?Object.keys(lr.horizontal):[ko],Hs,UE,Wn,Qi,qn),Wg)break}lr.vertical&&(bR+=ND(Mt,sr,Xt,lr.vertical,on,fr,Cn,Dr,Vn,_i,Yo.vertical,["vertical"],Hs,VE,Wn,Qi,qn));let Fc=-1;const qE=(ko,Do)=>ko?Math.max(ko,Do):Do;Fc=qE(yf,Fc),Fc=qE(Vg,Fc),Fc=qE(Gg,Fc);const D9=Fc>-1?1:0;Mt.glyphOffsetArray.length>=zc.MAX_GLYPHS&&Pt("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Dr.sortKey!==void 0&&Mt.addToSortKeyRanges(Mt.symbolInstances.length,Dr.sortKey),Mt.symbolInstances.emplaceBack(Pd.x,Pd.y,Pd.z,Xt.x,Xt.y,Hs.right>=0?Hs.right:-1,Hs.center>=0?Hs.center:-1,Hs.left>=0?Hs.left:-1,Hs.vertical>=0?Hs.vertical:-1,UE,VE,wR,hi!==void 0?hi:Mt.collisionBoxArray.length,hi!==void 0?hi+1:Mt.collisionBoxArray.length,fi!==void 0?fi:Mt.collisionBoxArray.length,fi!==void 0?fi+1:Mt.collisionBoxArray.length,eo!==void 0?eo:Mt.collisionBoxArray.length,eo!==void 0?eo+1:Mt.collisionBoxArray.length,gs||Mt.collisionBoxArray.length,gs?gs+1:Mt.collisionBoxArray.length,tn,xR,bR,vR,_R,D9,0,GE,WE,Fc)})(a,Ut,ar,Rt,l,d,p,Ct,a.layers[0],a.collisionBoxArray,i.index,i.sourceLayerIndex,a.index,Ce,ot,P,0,Ye,bt,te,i,y,C,j,$)};if(Qe==="line")for(const Rt of kD(i.geometry,0,0,Jt,Jt)){const Ut=YH(Rt,Me,Xe,l.vertical||se,d,Ae,Te,a.overscaling,Jt);for(const Lt of Ut)se&&a9(a,se.text,ut,Lt)||nt(Rt,Lt,$)}else if(Qe==="line-center"){for(const Rt of i.geometry)if(Rt.length>1){const Ut=KH(Rt,Xe,l.vertical||se,d,Ae,Te);Ut&&nt(Rt,Ut,$)}}else if(i.type==="Polygon")for(const Rt of pE(i.geometry,0)){const Ut=t9(Rt,16);nt(Rt[0],new Dl(Ut.x,Ut.y,0,0,void 0),$)}else if(i.type==="LineString")for(const Rt of i.geometry)nt(Rt,new Dl(Rt[0].x,Rt[0].y,0,0,void 0),$);else if(i.type==="Point")for(const Rt of i.geometry)for(const Ut of Rt)nt([Ut],new Dl(Ut.x,Ut.y,0,0,void 0),$)}const Lg=255,Lc=Lg*fs;function ND(a,i,l,d,p,y,x,w,P,C,j,$,G,X,K,te,se){const me=function(Te,Me,Ce,Ye,Xe,ot,bt,Qe){const ut=[];if(Me.positionedLines.length===0)return ut;const dt=Ye.layout.get("text-rotate").evaluate(ot,{})*Math.PI/180,yt=function(Lt){const ar=Lt[0],Mt=Lt[1],Xt=ar*Mt;return Xt>0?[ar,-Mt]:Xt<0?[-ar,Mt]:ar===0?[Mt,ar]:[Mt,-ar]}(Ce);let Ct=Math.abs(Me.top-Me.bottom);for(const Lt of Me.positionedLines)Ct-=Lt.lineOffset;const nt=Me.positionedLines.length,Rt=Ct/nt;let Ut=Me.top-Ce[1];for(let Lt=0;Lt<nt;++Lt){const ar=Me.positionedLines[Lt];Ut=JH(Me,Rt,Ut,Lt);for(const Mt of ar.positionedGlyphs){if(!Mt.rect)continue;const Xt=Mt.rect||{};let sr=vD+1,Or=!0,lr=1,er=0;if(Mt.imageName){const nn=bt[Mt.imageName];if(!nn)continue;if(nn.sdf){Pt("SDF images are not supported in formatted text and will be ignored.");continue}Or=!1,lr=nn.pixelRatio,sr=ho/lr}const on=(Xe||Qe)&&Mt.vertical,hr=Mt.metrics.advance*Mt.scale/2,fr=Mt.metrics,Kr=Mt.rect;if(Kr===null)continue;Qe&&Me.verticalizable&&(er=Mt.imageName?hr-Mt.metrics.width*Mt.scale/2:0);const tn=Xe?[Mt.x+hr,Mt.y]:[0,0];let rn=[0,0],Yr=[0,0],vn=!1;Xe||(on?(Yr=[Mt.x+hr+yt[0],Mt.y+yt[1]-er],vn=!0):rn=[Mt.x+hr+Ce[0],Mt.y+Ce[1]-er]);const Cn=Kr.w*Mt.scale/(lr*(Mt.localGlyph?ps:1)),Vn=Kr.h*Mt.scale/(lr*(Mt.localGlyph?ps:1));let Jr,ei,Gn,Sn;if(on){const nn=Mt.y-Ut,Qi=new ne(-hr,hr-nn),qn=-Math.PI/2,_i=new ne(...Yr);Jr=new ne(-hr+rn[0],rn[1]),Jr._rotateAround(qn,Qi)._add(_i),Jr.x+=-nn+hr,Jr.y-=(fr.left-sr)*Mt.scale;const hi=Mt.imageName?fr.advance*Mt.scale:vi*Mt.scale,eo=String.fromCharCode(Mt.glyph);DH(eo)?Jr.x+=(1-sr)*Mt.scale:RH(eo)?Jr.x+=hi-fr.height*Mt.scale+(-sr-1)*Mt.scale:Jr.x+=Mt.imageName||fr.width+2*sr===Kr.w&&fr.height+2*sr===Kr.h?(hi-Vn)/2:(hi-(fr.height+2*sr)*Mt.scale)/2,ei=new ne(Jr.x,Jr.y-Cn),Gn=new ne(Jr.x+Vn,Jr.y),Sn=new ne(Jr.x+Vn,Jr.y-Cn)}else{const nn=(fr.left-sr)*Mt.scale-hr+rn[0],Qi=(-fr.top-sr)*Mt.scale+rn[1],qn=nn+Cn,_i=Qi+Vn;Jr=new ne(nn,Qi),ei=new ne(qn,Qi),Gn=new ne(nn,_i),Sn=new ne(qn,_i)}if(dt){let nn;nn=Xe?new ne(0,0):vn?new ne(yt[0],yt[1]):new ne(Ce[0],Ce[1]),Jr._rotateAround(dt,nn),ei._rotateAround(dt,nn),Gn._rotateAround(dt,nn),Sn._rotateAround(dt,nn)}const Dr=new ne(0,0),Wn=new ne(0,0);ut.push({tl:Jr,tr:ei,bl:Gn,br:Sn,tex:Xt,writingMode:Me.writingMode,glyphOffset:tn,sectionIndex:Mt.sectionIndex,isSDF:Or,pixelOffsetTL:Dr,pixelOffsetBR:Wn,minFontScaleX:0,minFontScaleY:0})}}return ut}(0,d,P,y,x,w,p,a.allowVerticalPlacement),Ae=a.textSizeData;let ge=null;Ae.kind==="source"?(ge=[fs*y.layout.get("text-size").evaluate(w,{},se)],ge[0]>Lc&&Pt(`${a.layerIds[0]}: Value for "text-size" is >= ${Lg}. Reduce your "text-size".`)):Ae.kind==="composite"&&(ge=[fs*K.compositeTextSizes[0].evaluate(w,{},se),fs*K.compositeTextSizes[1].evaluate(w,{},se)],(ge[0]>Lc||ge[1]>Lc)&&Pt(`${a.layerIds[0]}: Value for "text-size" is >= ${Lg}. Reduce your "text-size".`)),a.addSymbols(a.text,me,ge,P,x,w,j,i,l,C.lineStartIndex,C.lineLength,X,te,se);for(const Te of $)G[Te]=a.text.placedSymbolArray.length-1;return 4*me.length}function BD(a){for(const i in a)return a[i];return null}function kx(a,i,l,d,p,y,x,w,P,C){let j=x.top,$=x.bottom,G=x.left,X=x.right;const K=x.collisionPadding;if(K&&(G-=K[0],j-=K[1],X+=K[2],$+=K[3]),P){const te=new ne(G,j),se=new ne(X,j),me=new ne(G,$),Ae=new ne(X,$),ge=Ee(P);let Te=new ne(0,0);C&&(Te=new ne(C[0],C[1])),te._rotateAround(ge,Te),se._rotateAround(ge,Te),me._rotateAround(ge,Te),Ae._rotateAround(ge,Te),G=Math.min(te.x,se.x,me.x,Ae.x),X=Math.max(te.x,se.x,me.x,Ae.x),j=Math.min(te.y,se.y,me.y,Ae.y),$=Math.max(te.y,se.y,me.y,Ae.y)}return a.emplaceBack(i.x,i.y,i.z,l.x,l.y,G,j,X,$,w,d,p,y),a.length-1}function CE(a){a.collisionPadding&&(a.top-=a.collisionPadding[1],a.bottom+=a.collisionPadding[3]);const i=a.bottom-a.top;return i>0?Math.max(10,i):null}function a9(a,i,l,d){const p=a.compareText;if(i in p){const y=p[i];for(let x=y.length-1;x>=0;x--)if(d.dist(y[x])<l)return!0}else p[i]=[];return p[i].push(d),!1}function $D(a,i){const l=a.fovAboveCenter,d=a.elevation?a.elevation.getMinElevationBelowMSL()*i:0,p=(a._camera.position[2]*a.worldSize-d)/Math.cos(a._pitch),y=Math.sin(l)*p/Math.sin(Math.max(Math.PI/2-a._pitch-l,.01)),x=Math.sin(a._pitch)*y+p;return Math.min(1.01*x,p*(1/a._horizonShift))}function Td(a,i){if(!i.isReprojectedInTileSpace)return{scale:1<<a.z,x:a.x,y:a.y,x2:a.x+1,y2:a.y+1,projection:i};const l=Math.pow(2,-a.z),d=a.x*l,p=(a.x+1)*l,y=a.y*l,x=(a.y+1)*l,w=Ko(d),P=Ko(p),C=Ii(y),j=Ii(x),$=i.project(w,C),G=i.project(P,C),X=i.project(P,j),K=i.project(w,j);let te=Math.min($.x,G.x,X.x,K.x),se=Math.min($.y,G.y,X.y,K.y),me=Math.max($.x,G.x,X.x,K.x),Ae=Math.max($.y,G.y,X.y,K.y);const ge=l/16;function Te(Ce,Ye,Xe,ot,bt,Qe){const ut=(Xe+bt)/2,dt=(ot+Qe)/2,yt=i.project(Ko(ut),Ii(dt)),Ct=Math.max(0,te-yt.x,se-yt.y,yt.x-me,yt.y-Ae);te=Math.min(te,yt.x),me=Math.max(me,yt.x),se=Math.min(se,yt.y),Ae=Math.max(Ae,yt.y),Ct>ge&&(Te(Ce,yt,Xe,ot,ut,dt),Te(yt,Ye,ut,dt,bt,Qe))}Te($,G,d,y,p,y),Te(G,X,p,y,p,x),Te(X,K,p,x,d,x),Te(K,$,d,x,d,y),te-=ge,se-=ge,me+=ge,Ae+=ge;const Me=1/Math.max(me-te,Ae-se);return{scale:Me,x:te*Me,y:se*Me,x2:me*Me,y2:Ae*Me,projection:i}}const s9=us(new Float32Array(16));class jc{constructor(i){this.spec=i,this.name=i.name,this.wrap=!1,this.requiresDraping=!1,this.supportsWorldCopies=!1,this.supportsTerrain=!1,this.supportsFog=!1,this.supportsFreeCamera=!1,this.zAxisUnit="meters",this.isReprojectedInTileSpace=!0,this.unsupportedLayers=["custom"],this.center=[0,0],this.range=[3.5,7]}project(i,l){return{x:0,y:0,z:0}}unproject(i,l){return new Zr(0,0)}projectTilePoint(i,l,d){return{x:i,y:l,z:0}}locationPoint(i,l,d=!0){return i._coordinatePoint(i.locationCoordinate(l),d)}pixelsPerMeter(i,l){return hs(1,i)*l}pixelSpaceConversion(i,l,d){return 1}farthestPixelDistance(i){return $D(i,i.pixelsPerMeter)}pointCoordinate(i,l,d,p){const y=i.horizonLineFromTop(!1),x=new ne(l,Math.max(y,d));return i.rayIntersectionCoordinate(i.pointRayIntersection(x,p))}pointCoordinate3D(i,l,d){const p=new ne(l,d);if(i.elevation)return i.elevation.pointCoordinate(p);{const y=this.pointCoordinate(i,p.x,p.y,0);return[y.x,y.y,y.z]}}isPointAboveHorizon(i,l){if(i.elevation)return!this.pointCoordinate3D(i,l.x,l.y);const d=i.horizonLineFromTop();return l.y<d}createInversionMatrix(i,l){return s9}createTileMatrix(i,l,d){let p,y,x;const w=d.canonical,P=us(new Float64Array(16));if(this.isReprojectedInTileSpace){const C=Td(w,this);p=1,y=C.x+d.wrap*C.scale,x=C.y,vd(P,P,[p/C.scale,p/C.scale,i.pixelsPerMeter/l])}else p=l/i.zoomScale(w.z),y=(w.x+Math.pow(2,w.z)*d.wrap)*p,x=w.y*p;return hg(P,P,[y,x,0]),vd(P,P,[p/Jt,p/Jt,1]),P}upVector(i,l,d){return[0,0,1]}upVectorScale(i,l,d){return{metersToTile:1}}}class l9 extends jc{constructor(i){super(i),this.range=[4,7],this.center=i.center||[-96,37.5];const[l,d]=this.parallels=i.parallels||[29.5,45.5],p=Math.sin(Ee(l));this.n=(p+Math.sin(Ee(d)))/2,this.c=1+p*(2*this.n-p),this.r0=Math.sqrt(this.c)/this.n}project(i,l){const{n:d,c:p,r0:y}=this,x=Ee(i-this.center[0]),w=Ee(l),P=Math.sqrt(p-2*d*Math.sin(w))/d;return{x:P*Math.sin(x*d),y:P*Math.cos(x*d)-y,z:0}}unproject(i,l){const{n:d,c:p,r0:y}=this,x=y+l;let w=Math.atan2(i,Math.abs(x))*Math.sign(x);x*d<0&&(w-=Math.PI*Math.sign(i)*Math.sign(x));const P=Ee(this.center[0])*d;w=$e(w,-Math.PI-P,Math.PI-P);const C=Pe(Se(w/d)+this.center[0],-180,180),j=Math.asin(Pe((p-(i*i+x*x)*d*d)/(2*d),-1,1)),$=Pe(Se(j),-Oi,Oi);return new Zr(C,$)}}const jg=1.340264,zg=-.081106,Ng=893e-6,Bg=.003796,Dx=Math.sqrt(3)/2;class c9 extends jc{project(i,l){l=l/180*Math.PI,i=i/180*Math.PI;const d=Math.asin(Dx*Math.sin(l)),p=d*d,y=p*p*p;return{x:.5*(i*Math.cos(d)/(Dx*(jg+3*zg*p+y*(7*Ng+9*Bg*p)))/Math.PI+.5),y:1-.5*(d*(jg+zg*p+y*(Ng+Bg*p))/Math.PI+1),z:0}}unproject(i,l){i=(2*i-.5)*Math.PI;let d=l=(2*(1-l)-1)*Math.PI,p=d*d,y=p*p*p;for(let j,$,G,X=0;X<12&&($=d*(jg+zg*p+y*(Ng+Bg*p))-l,G=jg+3*zg*p+y*(7*Ng+9*Bg*p),j=$/G,d=Pe(d-j,-Math.PI/3,Math.PI/3),p=d*d,y=p*p*p,!(Math.abs(j)<1e-12));++X);const x=Dx*i*(jg+3*zg*p+y*(7*Ng+9*Bg*p))/Math.cos(d),w=Math.asin(Math.sin(d)/Dx),P=Pe(180*x/Math.PI,-180,180),C=Pe(180*w/Math.PI,-Oi,Oi);return new Zr(P,C)}}class u9 extends jc{constructor(i){super(i),this.wrap=!0,this.supportsWorldCopies=!0}project(i,l){return{x:.5+i/360,y:.5-l/360,z:0}}unproject(i,l){const d=360*(i-.5),p=Pe(360*(.5-l),-Oi,Oi);return new Zr(d,p)}}const mf=Math.PI/2;function Rx(a){return Math.tan((mf+a)/2)}class d9 extends jc{constructor(i){super(i),this.center=i.center||[0,30];const[l,d]=this.parallels=i.parallels||[30,30];let p=Ee(l),y=Ee(d);this.southernCenter=p+y<0,this.southernCenter&&(p=-p,y=-y);const x=Math.cos(p),w=Rx(p);this.n=p===y?Math.sin(p):Math.log(x/Math.cos(y))/Math.log(Rx(y)/w),this.f=x*Math.pow(Rx(p),this.n)/this.n}project(i,l){l=Ee(l),this.southernCenter&&(l=-l),i=Ee(i-this.center[0]);const d=1e-6,{n:p,f:y}=this;y>0?l<-mf+d&&(l=-mf+d):l>mf-d&&(l=mf-d);const x=y/Math.pow(Rx(l),p);let w=x*Math.sin(p*i),P=y-x*Math.cos(p*i);return w=.5*(w/Math.PI+.5),P=.5*(P/Math.PI+.5),{x:w,y:this.southernCenter?P:1-P,z:0}}unproject(i,l){i=(2*i-.5)*Math.PI,this.southernCenter&&(l=1-l),l=(2*(1-l)-.5)*Math.PI;const{n:d,f:p}=this,y=p-l,x=Math.sign(y),w=Math.sign(d)*Math.sqrt(i*i+y*y);let P=Math.atan2(i,Math.abs(y))*x;y*d<0&&(P-=Math.PI*Math.sign(i)*x);const C=Pe(Se(P/d)+this.center[0],-180,180),j=Pe(Se(2*Math.atan(Math.pow(p/w,1/d))-mf),-Oi,Oi);return new Zr(C,this.southernCenter?-j:j)}}class FD extends jc{constructor(i){super(i),this.wrap=!0,this.supportsWorldCopies=!0,this.supportsTerrain=!0,this.supportsFog=!0,this.supportsFreeCamera=!0,this.isReprojectedInTileSpace=!1,this.unsupportedLayers=[],this.range=null}project(i,l){return{x:Us(i),y:Vs(l),z:0}}unproject(i,l){const d=Ko(i),p=Ii(l);return new Zr(d,p)}}const UD=Ee(Oi);class h9 extends jc{project(i,l){const d=(l=Ee(l))*l,p=d*d;return{x:.5*((i=Ee(i))*(.8707-.131979*d+p*(p*(.003971*d-.001529*p)-.013791))/Math.PI+.5),y:1-.5*(l*(1.007226+d*(.015085+p*(.028874*d-.044475-.005916*p)))/Math.PI+1),z:0}}unproject(i,l){i=(2*i-.5)*Math.PI;let d=l=(2*(1-l)-1)*Math.PI,p=25,y=0,x=d*d;do{x=d*d;const C=x*x;y=(d*(1.007226+x*(.015085+C*(.028874*x-.044475-.005916*C)))-l)/(1.007226+x*(.045255+C*(.259866*x-.311325-.005916*11*C))),d=Pe(d-y,-UD,UD)}while(Math.abs(y)>1e-6&&--p>0);x=d*d;const w=Pe(Se(i/(.8707+x*(x*(x*x*x*(.003971-.001529*x)-.013791)-.131979))),-180,180),P=Se(d);return new Zr(w,P)}}const VD=Ee(Oi);class f9 extends jc{project(i,l){l=Ee(l),i=Ee(i);const d=Math.cos(l),p=2/Math.PI,y=Math.acos(d*Math.cos(i/2)),x=Math.sin(y)/y,w=.5*(i*p+2*d*Math.sin(i/2)/x)||0,P=.5*(l+Math.sin(l)/x)||0;return{x:.5*(w/Math.PI+.5),y:1-.5*(P/Math.PI+1),z:0}}unproject(i,l){let d=i=(2*i-.5)*Math.PI,p=l=(2*(1-l)-1)*Math.PI,y=25;const x=1e-6;let w=0,P=0;do{const C=Math.cos(p),j=Math.sin(p),$=2*j*C,G=j*j,X=C*C,K=Math.cos(d/2),te=Math.sin(d/2),se=2*K*te,me=te*te,Ae=1-X*K*K,ge=Ae?1/Ae:0,Te=Ae?Math.acos(C*K)*Math.sqrt(1/Ae):0,Me=.5*(2*Te*C*te+2*d/Math.PI)-i,Ce=.5*(Te*j+p)-l,Ye=.5*ge*(X*me+Te*C*K*G)+1/Math.PI,Xe=ge*(se*$/4-Te*j*te),ot=.125*ge*($*te-Te*j*X*se),bt=.5*ge*(G*K+Te*me*C)+.5,Qe=Xe*ot-bt*Ye;w=(Ce*Xe-Me*bt)/Qe,P=(Me*ot-Ce*Ye)/Qe,d=Pe(d-w,-Math.PI,Math.PI),p=Pe(p-P,-VD,VD)}while((Math.abs(w)>x||Math.abs(P)>x)&&--y>0);return new Zr(Se(d),Se(p))}}class GD extends jc{constructor(i){super(i),this.center=i.center||[0,0],this.parallels=i.parallels||[0,0],this.cosPhi=Math.max(.01,Math.cos(Ee(this.parallels[0]))),this.scale=1/(2*Math.max(Math.PI*this.cosPhi,1/this.cosPhi)),this.wrap=!0,this.supportsWorldCopies=!0}project(i,l){const{scale:d,cosPhi:p}=this;return{x:Ee(i)*p*d+.5,y:-Math.sin(Ee(l))/p*d+.5,z:0}}unproject(i,l){const{scale:d,cosPhi:p}=this,y=-(l-.5)/d,x=Pe(Se((i-.5)/d)/p,-180,180),w=Math.asin(Pe(y*p,-1,1)),P=Pe(Se(w),-Oi,Oi);return new Zr(x,P)}}class p9 extends FD{constructor(i){super(i),this.requiresDraping=!0,this.supportsWorldCopies=!1,this.supportsFog=!0,this.zAxisUnit="pixels",this.unsupportedLayers=["debug"],this.range=[3,5]}projectTilePoint(i,l,d){const p=xg(i,l,d);return Ln(p,p,bg(Fs(d))),{x:p[0],y:p[1],z:p[2]}}locationPoint(i,l){const d=Qh(l.lat,l.lng),p=Ki([],d),y=i.elevation?i.elevation.getAtPointOrZero(i.locationCoordinate(l),i._centerAltitude):i._centerAltitude;gg(d,d,p,hs(1,0)*Jt*y);const x=us(new Float64Array(16));return yd(x,i.pixelMatrix,i.globeMatrix),Ln(d,d,x),new ne(d[0],d[1])}pixelsPerMeter(i,l){return hs(1,0)*l}pixelSpaceConversion(i,l,d){const p=hs(1,i)*l,y=Cr(hs(1,45)*l,p,d);return this.pixelsPerMeter(i,l)/y}createTileMatrix(i,l,d){const p=JS(Fs(d.canonical));return yd(new Float64Array(16),i.globeMatrix,p)}createInversionMatrix(i,l){const{center:d}=i,p=bg(Fs(l));return lx(p,p,Ee(d.lng)),US(p,p,Ee(d.lat)),vd(p,p,[i._pixelsPerMercatorPixel,i._pixelsPerMercatorPixel,1]),Float32Array.from(p)}pointCoordinate(i,l,d,p){return yk(i,l,d,!0)||new tf(0,0)}pointCoordinate3D(i,l,d){const p=this.pointCoordinate(i,l,d,0);return[p.x,p.y,p.z]}isPointAboveHorizon(i,l){return!yk(i,l.x,l.y,!1)}farthestPixelDistance(i){const l=function(p,y){const x=p.cameraToCenterDistance,w=p._centerAltitude*y,P=p._camera,C=p._camera.forward(),j=Ml([],Zo([],C,-x),[0,0,w]),$=p.worldSize/(2*Math.PI),G=[0,0,-$],X=p.width/p.height,K=Math.tan(p.fovAboveCenter),te=Zo([],P.up(),K),se=Zo([],P.right(),K*X),me=Ki([],Ml([],Ml([],C,te),se)),Ae=[];let ge;if(new qS(j,me).closestPointOnSphere(G,$,Ae)){const Te=Ml([],Ae,G),Me=ds([],Te,j);ge=Math.cos(p.fovAboveCenter)*fg(Me)}else{const Te=ds([],j,G),Me=ds([],G,j);Ki(Me,Me);const Ce=fg(Te)-$;ge=Math.sqrt(Ce*(Ce+2*$));const Ye=Math.acos(ge/($+Ce))-Math.acos(Sa(C,Me));ge*=Math.cos(Ye)}return 1.01*ge}(i,this.pixelsPerMeter(i.center.lat,i.worldSize)),d=ef(i.zoom);if(d>0){const p=$D(i,hs(1,i.center.lat)*i.worldSize),y=i.worldSize/(2*Math.PI),x=Math.max(i.width,i.height)/i.worldSize*Math.PI;return Cr(l,p+y*(1-Math.cos(x)),Math.pow(d,10))}return l}upVector(i,l,d){return xg(l,d,i,1)}upVectorScale(i){return{metersToTile:cx(dx(Fs(i)))}}}function WD(a){const i=a.parallels,l=!!i&&Math.abs(i[0]+i[1])<.01;switch(a.name){case"mercator":return new FD(a);case"equirectangular":return new u9(a);case"naturalEarth":return new h9(a);case"equalEarth":return new c9(a);case"winkelTripel":return new f9(a);case"albers":return l?new GD(a):new l9(a);case"lambertConformalConic":return l?new GD(a):new d9(a);case"globe":return new p9(a)}throw new Error(`Invalid projection name: ${a.name}`)}const m9=bx.types,g9=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Lx(a,i,l,d,p,y,x,w,P,C,j,$,G){const X=w?Math.min(Lc,Math.round(w[0])):0,K=w?Math.min(Lc,Math.round(w[1])):0;a.emplaceBack(i,l,Math.round(32*d),Math.round(32*p),y,x,(X<<1)+(P?1:0),K,16*C,16*j,256*$,256*G)}function jx(a,i,l,d,p,y,x){a.emplaceBack(i,l,d,p,y,x)}function zx(a,i,l,d,p){a.emplaceBack(i,l,d,p),a.emplaceBack(i,l,d,p),a.emplaceBack(i,l,d,p),a.emplaceBack(i,l,d,p)}function y9(a){for(const i of a.sections)if(zS(i.text))return!0;return!1}class ME{constructor(i){this.layoutVertexArray=new pt,this.indexArray=new Gt,this.programConfigurations=i,this.segments=new Fn,this.dynamicLayoutVertexArray=new _t,this.opacityVertexArray=new Ht,this.placedSymbolArray=new $n,this.globeExtVertexArray=new St}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(i,l,d,p){this.isEmpty()||(d&&(this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,TH.members),this.indexBuffer=i.createIndexBuffer(this.indexArray,l),this.dynamicLayoutVertexBuffer=i.createVertexBuffer(this.dynamicLayoutVertexArray,PH.members,!0),this.opacityVertexBuffer=i.createVertexBuffer(this.opacityVertexArray,g9,!0),this.globeExtVertexArray.length>0&&(this.globeExtVertexBuffer=i.createVertexBuffer(this.globeExtVertexArray,AH.members,!0)),this.opacityVertexBuffer.itemSize=1),(d||p)&&this.programConfigurations.upload(i))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}}$t(ME,"SymbolBuffers");class IE{constructor(i,l,d){this.layoutVertexArray=new i,this.layoutAttributes=l,this.indexArray=new d,this.segments=new Fn,this.collisionVertexArray=new br,this.collisionVertexArrayExt=new yr}upload(i){this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=i.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=i.createVertexBuffer(this.collisionVertexArray,CH.members,!0),this.collisionVertexBufferExt=i.createVertexBuffer(this.collisionVertexArrayExt,MH.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy(),this.collisionVertexBufferExt.destroy())}}$t(IE,"CollisionBuffers");class zc{constructor(i){this.collisionBoxArray=i.collisionBoxArray,this.zoom=i.zoom,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map(x=>x.id),this.index=i.index,this.pixelRatio=i.pixelRatio,this.sourceLayerIndex=i.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.fullyClipped=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=us([]),this.placementViewportMatrix=us([]);const l=this.layers[0]._unevaluatedLayout._values;this.textSizeData=vE(this.zoom,l["text-size"]),this.iconSizeData=vE(this.zoom,l["icon-size"]);const d=this.layers[0].layout,p=d.get("symbol-sort-key"),y=d.get("symbol-z-order");this.canOverlap=d.get("text-allow-overlap")||d.get("icon-allow-overlap")||d.get("text-ignore-placement")||d.get("icon-ignore-placement"),this.sortFeaturesByKey=y!=="viewport-y"&&p.constantOr(1)!==void 0,this.sortFeaturesByY=(y==="viewport-y"||y==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,this.writingModes=d.get("text-writing-mode").map(x=>Yo[x]),this.stateDependentLayerIds=this.layers.filter(x=>x.isStateDependent()).map(x=>x.id),this.sourceID=i.sourceID,this.projection=i.projection}createArrays(){this.text=new ME(new gd(this.layers,this.zoom,i=>/^text/.test(i))),this.icon=new ME(new gd(this.layers,this.zoom,i=>/^icon/.test(i))),this.glyphOffsetArray=new Zi,this.lineVertexArray=new Xh,this.symbolInstances=new cn}calculateGlyphDependencies(i,l,d,p,y){for(let x=0;x<i.length;x++)if(l[i.charCodeAt(x)]=!0,p&&y){const w=kg[i.charAt(x)];w&&(l[w.charCodeAt(0)]=!0)}}populate(i,l,d,p){const y=this.layers[0],x=y.layout,w=this.projection.name==="globe",P=x.get("text-font"),C=x.get("text-field"),j=x.get("icon-image"),$=(C.value.kind!=="constant"||C.value.value instanceof Xi&&!C.value.value.isEmpty()||C.value.value.toString().length>0)&&(P.value.kind!=="constant"||P.value.value.length>0),G=j.value.kind!=="constant"||!!j.value.value||Object.keys(j.parameters).length>0,X=x.get("symbol-sort-key");if(this.features=[],!$&&!G)return;const K=l.iconDependencies,te=l.glyphDependencies,se=l.availableImages,me=new B(this.zoom);for(const{feature:Ae,id:ge,index:Te,sourceLayerIndex:Me}of i){const Ce=y._featureFilter.needGeometry,Ye=wd(Ae,Ce);if(!y._featureFilter.filter(me,Ye,d))continue;if(Ce||(Ye.geometry=Il(Ae,d,p)),w&&Ae.type!==1&&d.z<=5){const Qe=Ye.geometry,ut=.98078528056,dt=(yt,Ct)=>Sa(xg(yt.x,yt.y,d,1),xg(Ct.x,Ct.y,d,1))<ut;for(let yt=0;yt<Qe.length;yt++)Qe[yt]=Pq(Qe[yt],dt)}let Xe,ot;if($){const Qe=y.getValueAndResolveTokens("text-field",Ye,d,se),ut=Xi.factory(Qe);y9(ut)&&(this.hasRTLText=!0),(!this.hasRTLText||T()==="unavailable"||this.hasRTLText&&D.isParsed())&&(Xe=kH(ut,y,Ye))}if(G){const Qe=y.getValueAndResolveTokens("icon-image",Ye,d,se);ot=Qe instanceof Ao?Qe:Ao.fromString(Qe)}if(!Xe&&!ot)continue;const bt=this.sortFeaturesByKey?X.evaluate(Ye,{},d):void 0;if(this.features.push({id:ge,text:Xe,icon:ot,index:Te,sourceLayerIndex:Me,geometry:Ye.geometry,properties:Ae.properties,type:m9[Ae.type],sortKey:bt}),ot&&(K[ot.name]=!0),Xe){const Qe=P.evaluate(Ye,{},d).join(","),ut=x.get("text-rotation-alignment")==="map"&&x.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(Yo.vertical)>=0;for(const dt of Xe.sections)if(dt.image)K[dt.image.name]=!0;else{const yt=og(Xe.toString()),Ct=dt.fontStack||Qe,nt=te[Ct]=te[Ct]||{};this.calculateGlyphDependencies(dt.text,nt,ut,this.allowVerticalPlacement,yt)}}}x.get("symbol-placement")==="line"&&(this.features=function(Ae){const ge={},Te={},Me=[];let Ce=0;function Ye(Qe){Me.push(Ae[Qe]),Ce++}function Xe(Qe,ut,dt){const yt=Te[Qe];return delete Te[Qe],Te[ut]=yt,Me[yt].geometry[0].pop(),Me[yt].geometry[0]=Me[yt].geometry[0].concat(dt[0]),yt}function ot(Qe,ut,dt){const yt=ge[ut];return delete ge[ut],ge[Qe]=yt,Me[yt].geometry[0].shift(),Me[yt].geometry[0]=dt[0].concat(Me[yt].geometry[0]),yt}function bt(Qe,ut,dt){const yt=dt?ut[0][ut[0].length-1]:ut[0][0];return`${Qe}:${yt.x}:${yt.y}`}for(let Qe=0;Qe<Ae.length;Qe++){const ut=Ae[Qe],dt=ut.geometry,yt=ut.text?ut.text.toString():null;if(!yt){Ye(Qe);continue}const Ct=bt(yt,dt),nt=bt(yt,dt,!0);if(Ct in Te&&nt in ge&&Te[Ct]!==ge[nt]){const Rt=ot(Ct,nt,dt),Ut=Xe(Ct,nt,Me[Rt].geometry);delete ge[Ct],delete Te[nt],Te[bt(yt,Me[Ut].geometry,!0)]=Ut,Me[Rt].geometry=null}else Ct in Te?Xe(Ct,nt,dt):nt in ge?ot(Ct,nt,dt):(Ye(Qe),ge[Ct]=Ce-1,Te[nt]=Ce-1)}return Me.filter(Qe=>Qe.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((Ae,ge)=>Ae.sortKey-ge.sortKey)}update(i,l,d,p){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(i,l,this.layers,d,p),this.icon.programConfigurations.updatePaintArrays(i,l,this.layers,d,p))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(i){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(i),this.iconCollisionBox.upload(i)),this.text.upload(i,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(i,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}getProjection(){return this.projectionInstance||(this.projectionInstance=WD(this.projection)),this.projectionInstance}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(i,l){const d=this.lineVertexArray.length;if(i.segment!==void 0)for(const{x:p,y}of l)this.lineVertexArray.emplaceBack(p,y);return{lineStartIndex:d,lineLength:this.lineVertexArray.length-d}}addSymbols(i,l,d,p,y,x,w,P,C,j,$,G,X,K){const te=i.indexArray,se=i.layoutVertexArray,me=i.globeExtVertexArray,Ae=i.segments.prepareSegment(4*l.length,se,te,this.canOverlap?x.sortKey:void 0),ge=this.glyphOffsetArray.length,Te=Ae.vertexLength,Me=this.allowVerticalPlacement&&w===Yo.vertical?Math.PI/2:0,Ce=x.text&&x.text.sections;for(let Xe=0;Xe<l.length;Xe++){const{tl:ot,tr:bt,bl:Qe,br:ut,tex:dt,pixelOffsetTL:yt,pixelOffsetBR:Ct,minFontScaleX:nt,minFontScaleY:Rt,glyphOffset:Ut,isSDF:Lt,sectionIndex:ar}=l[Xe],Mt=Ae.vertexLength,Xt=Ut[1];if(Lx(se,C.x,C.y,ot.x,Xt+ot.y,dt.x,dt.y,d,Lt,yt.x,yt.y,nt,Rt),Lx(se,C.x,C.y,bt.x,Xt+bt.y,dt.x+dt.w,dt.y,d,Lt,Ct.x,yt.y,nt,Rt),Lx(se,C.x,C.y,Qe.x,Xt+Qe.y,dt.x,dt.y+dt.h,d,Lt,yt.x,Ct.y,nt,Rt),Lx(se,C.x,C.y,ut.x,Xt+ut.y,dt.x+dt.w,dt.y+dt.h,d,Lt,Ct.x,Ct.y,nt,Rt),P){const{x:sr,y:Or,z:lr}=P.anchor,[er,on,hr]=P.up;jx(me,sr,Or,lr,er,on,hr),jx(me,sr,Or,lr,er,on,hr),jx(me,sr,Or,lr,er,on,hr),jx(me,sr,Or,lr,er,on,hr),zx(i.dynamicLayoutVertexArray,sr,Or,lr,Me)}else zx(i.dynamicLayoutVertexArray,C.x,C.y,C.z,Me);te.emplaceBack(Mt,Mt+1,Mt+2),te.emplaceBack(Mt+1,Mt+2,Mt+3),Ae.vertexLength+=4,Ae.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Ut[0]),Xe!==l.length-1&&ar===l[Xe+1].sectionIndex||i.programConfigurations.populatePaintArrays(se.length,x,x.index,{},X,K,Ce&&Ce[ar])}const Ye=P?P.anchor:C;i.placedSymbolArray.emplaceBack(Ye.x,Ye.y,Ye.z,C.x,C.y,ge,this.glyphOffsetArray.length-ge,Te,j,$,C.segment,d?d[0]:0,d?d[1]:0,p[0],p[1],w,0,!1,0,G,0)}_commitLayoutVertex(i,l,d,p,y,x,w){i.emplaceBack(l,d,p,y,x,Math.round(w.x),Math.round(w.y))}_addCollisionDebugVertices(i,l,d,p,y,x,w){const P=d.segments.prepareSegment(4,d.layoutVertexArray,d.indexArray),C=P.vertexLength,j=w.tileAnchorX,$=w.tileAnchorY;for(let X=0;X<4;X++)d.collisionVertexArray.emplaceBack(0,0,0,0);d.collisionVertexArrayExt.emplaceBack(l,-i.padding,-i.padding),d.collisionVertexArrayExt.emplaceBack(l,i.padding,-i.padding),d.collisionVertexArrayExt.emplaceBack(l,i.padding,i.padding),d.collisionVertexArrayExt.emplaceBack(l,-i.padding,i.padding),this._commitLayoutVertex(d.layoutVertexArray,p,y,x,j,$,new ne(i.x1,i.y1)),this._commitLayoutVertex(d.layoutVertexArray,p,y,x,j,$,new ne(i.x2,i.y1)),this._commitLayoutVertex(d.layoutVertexArray,p,y,x,j,$,new ne(i.x2,i.y2)),this._commitLayoutVertex(d.layoutVertexArray,p,y,x,j,$,new ne(i.x1,i.y2)),P.vertexLength+=4;const G=d.indexArray;G.emplaceBack(C,C+1),G.emplaceBack(C+1,C+2),G.emplaceBack(C+2,C+3),G.emplaceBack(C+3,C),P.primitiveLength+=4}_addTextDebugCollisionBoxes(i,l,d,p,y,x){for(let w=p;w<y;w++){const P=d.get(w),C=this.getSymbolInstanceTextSize(i,x,l,w);this._addCollisionDebugVertices(P,C,this.textCollisionBox,P.projectedAnchorX,P.projectedAnchorY,P.projectedAnchorZ,x)}}_addIconDebugCollisionBoxes(i,l,d,p,y,x){for(let w=p;w<y;w++){const P=d.get(w),C=this.getSymbolInstanceIconSize(i,l,x.placedIconSymbolIndex);this._addCollisionDebugVertices(P,C,this.iconCollisionBox,P.projectedAnchorX,P.projectedAnchorY,P.projectedAnchorZ,x)}}generateCollisionDebugBuffers(i,l){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new IE(Ft,uD.members,di),this.iconCollisionBox=new IE(Ft,uD.members,di);const d=sf(this.iconSizeData,i),p=sf(this.textSizeData,i);for(let y=0;y<this.symbolInstances.length;y++){const x=this.symbolInstances.get(y);this._addTextDebugCollisionBoxes(p,i,l,x.textBoxStartIndex,x.textBoxEndIndex,x),this._addTextDebugCollisionBoxes(p,i,l,x.verticalTextBoxStartIndex,x.verticalTextBoxEndIndex,x),this._addIconDebugCollisionBoxes(d,i,l,x.iconBoxStartIndex,x.iconBoxEndIndex,x),this._addIconDebugCollisionBoxes(d,i,l,x.verticalIconBoxStartIndex,x.verticalIconBoxEndIndex,x)}}getSymbolInstanceTextSize(i,l,d,p){const y=this.text.placedSymbolArray.get(l.rightJustifiedTextSymbolIndex>=0?l.rightJustifiedTextSymbolIndex:l.centerJustifiedTextSymbolIndex>=0?l.centerJustifiedTextSymbolIndex:l.leftJustifiedTextSymbolIndex>=0?l.leftJustifiedTextSymbolIndex:l.verticalPlacedTextSymbolIndex>=0?l.verticalPlacedTextSymbolIndex:p),x=Tx(this.textSizeData,i,y)/vi;return this.tilePixelRatio*x}getSymbolInstanceIconSize(i,l,d){const p=this.icon.placedSymbolArray.get(d),y=Tx(this.iconSizeData,i,p);return this.tilePixelRatio*y}_commitDebugCollisionVertexUpdate(i,l,d){i.emplaceBack(l,-d,-d),i.emplaceBack(l,d,-d),i.emplaceBack(l,d,d),i.emplaceBack(l,-d,d)}_updateTextDebugCollisionBoxes(i,l,d,p,y,x){for(let w=p;w<y;w++){const P=d.get(w),C=this.getSymbolInstanceTextSize(i,x,l,w);this._commitDebugCollisionVertexUpdate(this.textCollisionBox.collisionVertexArrayExt,C,P.padding)}}_updateIconDebugCollisionBoxes(i,l,d,p,y,x){for(let w=p;w<y;w++){const P=d.get(w),C=this.getSymbolInstanceIconSize(i,l,x);this._commitDebugCollisionVertexUpdate(this.iconCollisionBox.collisionVertexArrayExt,C,P.padding)}}updateCollisionDebugBuffers(i,l){if(!this.hasDebugData())return;this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexArrayExt.clear(),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexArrayExt.clear();const d=sf(this.iconSizeData,i),p=sf(this.textSizeData,i);for(let y=0;y<this.symbolInstances.length;y++){const x=this.symbolInstances.get(y);this._updateTextDebugCollisionBoxes(p,i,l,x.textBoxStartIndex,x.textBoxEndIndex,x),this._updateTextDebugCollisionBoxes(p,i,l,x.verticalTextBoxStartIndex,x.verticalTextBoxEndIndex,x),this._updateIconDebugCollisionBoxes(d,i,l,x.iconBoxStartIndex,x.iconBoxEndIndex,x.placedIconSymbolIndex),this._updateIconDebugCollisionBoxes(d,i,l,x.verticalIconBoxStartIndex,x.verticalIconBoxEndIndex,x.placedIconSymbolIndex)}this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexBufferExt&&this.textCollisionBox.collisionVertexBufferExt.updateData(this.textCollisionBox.collisionVertexArrayExt),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexBufferExt&&this.iconCollisionBox.collisionVertexBufferExt.updateData(this.iconCollisionBox.collisionVertexArrayExt)}_deserializeCollisionBoxesForSymbol(i,l,d,p,y,x,w,P,C){const j={};if(l<d){const{x1:$,y1:G,x2:X,y2:K,padding:te,projectedAnchorX:se,projectedAnchorY:me,projectedAnchorZ:Ae,tileAnchorX:ge,tileAnchorY:Te,featureIndex:Me}=i.get(l);j.textBox={x1:$,y1:G,x2:X,y2:K,padding:te,projectedAnchorX:se,projectedAnchorY:me,projectedAnchorZ:Ae,tileAnchorX:ge,tileAnchorY:Te},j.textFeatureIndex=Me}if(p<y){const{x1:$,y1:G,x2:X,y2:K,padding:te,projectedAnchorX:se,projectedAnchorY:me,projectedAnchorZ:Ae,tileAnchorX:ge,tileAnchorY:Te,featureIndex:Me}=i.get(p);j.verticalTextBox={x1:$,y1:G,x2:X,y2:K,padding:te,projectedAnchorX:se,projectedAnchorY:me,projectedAnchorZ:Ae,tileAnchorX:ge,tileAnchorY:Te},j.verticalTextFeatureIndex=Me}if(x<w){const{x1:$,y1:G,x2:X,y2:K,padding:te,projectedAnchorX:se,projectedAnchorY:me,projectedAnchorZ:Ae,tileAnchorX:ge,tileAnchorY:Te,featureIndex:Me}=i.get(x);j.iconBox={x1:$,y1:G,x2:X,y2:K,padding:te,projectedAnchorX:se,projectedAnchorY:me,projectedAnchorZ:Ae,tileAnchorX:ge,tileAnchorY:Te},j.iconFeatureIndex=Me}if(P<C){const{x1:$,y1:G,x2:X,y2:K,padding:te,projectedAnchorX:se,projectedAnchorY:me,projectedAnchorZ:Ae,tileAnchorX:ge,tileAnchorY:Te,featureIndex:Me}=i.get(P);j.verticalIconBox={x1:$,y1:G,x2:X,y2:K,padding:te,projectedAnchorX:se,projectedAnchorY:me,projectedAnchorZ:Ae,tileAnchorX:ge,tileAnchorY:Te},j.verticalIconFeatureIndex=Me}return j}deserializeCollisionBoxes(i){this.collisionArrays=[];for(let l=0;l<this.symbolInstances.length;l++){const d=this.symbolInstances.get(l);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(i,d.textBoxStartIndex,d.textBoxEndIndex,d.verticalTextBoxStartIndex,d.verticalTextBoxEndIndex,d.iconBoxStartIndex,d.iconBoxEndIndex,d.verticalIconBoxStartIndex,d.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(i,l){const d=i.placedSymbolArray.get(l),p=d.vertexStartIndex+4*d.numGlyphs;for(let y=d.vertexStartIndex;y<p;y+=4)i.indexArray.emplaceBack(y,y+1,y+2),i.indexArray.emplaceBack(y+1,y+2,y+3)}getSortedSymbolIndexes(i){if(this.sortedAngle===i&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const l=Math.sin(i),d=Math.cos(i),p=[],y=[],x=[];for(let w=0;w<this.symbolInstances.length;++w){x.push(w);const P=this.symbolInstances.get(w);p.push(0|Math.round(l*P.tileAnchorX+d*P.tileAnchorY)),y.push(P.featureIndex)}return x.sort((w,P)=>p[w]-p[P]||y[P]-y[w]),x}addToSortKeyRanges(i,l){const d=this.sortKeyRanges[this.sortKeyRanges.length-1];d&&d.sortKey===l?d.symbolInstanceEnd=i+1:this.sortKeyRanges.push({sortKey:l,symbolInstanceStart:i,symbolInstanceEnd:i+1})}sortFeatures(i){if(this.sortFeaturesByY&&this.sortedAngle!==i&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(i),this.sortedAngle=i,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const l of this.symbolInstanceIndexes){const d=this.symbolInstances.get(l);this.featureSortOrder.push(d.featureIndex);const{rightJustifiedTextSymbolIndex:p,centerJustifiedTextSymbolIndex:y,leftJustifiedTextSymbolIndex:x,verticalPlacedTextSymbolIndex:w,placedIconSymbolIndex:P,verticalPlacedIconSymbolIndex:C}=d;p>=0&&this.addIndicesForPlacedSymbol(this.text,p),y>=0&&y!==p&&this.addIndicesForPlacedSymbol(this.text,y),x>=0&&x!==y&&x!==p&&this.addIndicesForPlacedSymbol(this.text,x),w>=0&&this.addIndicesForPlacedSymbol(this.text,w),P>=0&&this.addIndicesForPlacedSymbol(this.icon,P),C>=0&&this.addIndicesForPlacedSymbol(this.icon,C)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}$t(zc,"SymbolBucket",{omit:["layers","collisionBoxArray","features","compareText"]}),zc.MAX_GLYPHS=65535,zc.addDynamicAttributes=zx;const v9=new _e({"symbol-placement":new ee(it.layout_symbol["symbol-placement"]),"symbol-spacing":new ee(it.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new ee(it.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new le(it.layout_symbol["symbol-sort-key"]),"symbol-z-order":new ee(it.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new ee(it.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new ee(it.layout_symbol["icon-ignore-placement"]),"icon-optional":new ee(it.layout_symbol["icon-optional"]),"icon-rotation-alignment":new ee(it.layout_symbol["icon-rotation-alignment"]),"icon-size":new le(it.layout_symbol["icon-size"]),"icon-text-fit":new ee(it.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new ee(it.layout_symbol["icon-text-fit-padding"]),"icon-image":new le(it.layout_symbol["icon-image"]),"icon-rotate":new le(it.layout_symbol["icon-rotate"]),"icon-padding":new ee(it.layout_symbol["icon-padding"]),"icon-keep-upright":new ee(it.layout_symbol["icon-keep-upright"]),"icon-offset":new le(it.layout_symbol["icon-offset"]),"icon-anchor":new le(it.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new ee(it.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new ee(it.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new ee(it.layout_symbol["text-rotation-alignment"]),"text-field":new le(it.layout_symbol["text-field"]),"text-font":new le(it.layout_symbol["text-font"]),"text-size":new le(it.layout_symbol["text-size"]),"text-max-width":new le(it.layout_symbol["text-max-width"]),"text-line-height":new le(it.layout_symbol["text-line-height"]),"text-letter-spacing":new le(it.layout_symbol["text-letter-spacing"]),"text-justify":new le(it.layout_symbol["text-justify"]),"text-radial-offset":new le(it.layout_symbol["text-radial-offset"]),"text-variable-anchor":new ee(it.layout_symbol["text-variable-anchor"]),"text-anchor":new le(it.layout_symbol["text-anchor"]),"text-max-angle":new ee(it.layout_symbol["text-max-angle"]),"text-writing-mode":new ee(it.layout_symbol["text-writing-mode"]),"text-rotate":new le(it.layout_symbol["text-rotate"]),"text-padding":new ee(it.layout_symbol["text-padding"]),"text-keep-upright":new ee(it.layout_symbol["text-keep-upright"]),"text-transform":new le(it.layout_symbol["text-transform"]),"text-offset":new le(it.layout_symbol["text-offset"]),"text-allow-overlap":new ee(it.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new ee(it.layout_symbol["text-ignore-placement"]),"text-optional":new ee(it.layout_symbol["text-optional"])});var OE={paint:new _e({"icon-opacity":new le(it.paint_symbol["icon-opacity"]),"icon-color":new le(it.paint_symbol["icon-color"]),"icon-halo-color":new le(it.paint_symbol["icon-halo-color"]),"icon-halo-width":new le(it.paint_symbol["icon-halo-width"]),"icon-halo-blur":new le(it.paint_symbol["icon-halo-blur"]),"icon-translate":new ee(it.paint_symbol["icon-translate"]),"icon-translate-anchor":new ee(it.paint_symbol["icon-translate-anchor"]),"text-opacity":new le(it.paint_symbol["text-opacity"]),"text-color":new le(it.paint_symbol["text-color"],{runtimeType:co,getOverride:a=>a.textColor,hasOverride:a=>!!a.textColor}),"text-halo-color":new le(it.paint_symbol["text-halo-color"]),"text-halo-width":new le(it.paint_symbol["text-halo-width"]),"text-halo-blur":new le(it.paint_symbol["text-halo-blur"]),"text-translate":new ee(it.paint_symbol["text-translate"]),"text-translate-anchor":new ee(it.paint_symbol["text-translate-anchor"])}),layout:v9};class qD{constructor(i){this.type=i.property.overrides?i.property.overrides.runtimeType:fc,this.defaultValue=i}evaluate(i){if(i.formattedSection){const l=this.defaultValue.property.overrides;if(l&&l.hasOverride(i.formattedSection))return l.getOverride(i.formattedSection)}return i.feature&&i.featureState?this.defaultValue.evaluate(i.feature,i.featureState):this.defaultValue.property.specification.default}eachChild(i){this.defaultValue.isConstant()||i(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}$t(qD,"FormatSectionOverride",{omit:["defaultValue"]});class Nx extends cs{constructor(i){super(i,OE)}recalculate(i,l){super.recalculate(i,l),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment"));const d=this.layout.get("text-writing-mode");if(d){const p=[];for(const y of d)p.indexOf(y)<0&&p.push(y);this.layout._values["text-writing-mode"]=p}else this.layout._values["text-writing-mode"]=this.layout.get("symbol-placement")==="point"?["horizontal"]:["horizontal","vertical"];this._setPaintOverrides()}getValueAndResolveTokens(i,l,d,p){const y=this.layout.get(i).evaluate(l,{},d,p),x=this._unevaluatedLayout._values[i];return x.isDataDriven()||Tc(x.value)||!y?y:function(w,P){return P.replace(/{([^{}]+)}/g,(C,j)=>j in w?String(w[j]):"")}(l.properties,y)}createBucket(i){return new zc(i)}queryRadius(){return 0}queryIntersectsFeature(){return!1}_setPaintOverrides(){for(const i of OE.paint.overridableProperties){if(!Nx.hasPaintOverride(this.layout,i))continue;const l=this.paint.get(i),d=new qD(l),p=new $h(d,l.property.specification);let y=null;y=l.value.kind==="constant"||l.value.kind==="source"?new Xm("source",p):new sd("composite",p,l.value.zoomStops,l.value._interpolationType),this.paint._values[i]=new de(l.property,y,l.parameters)}}_handleOverridablePaintPropertyUpdate(i,l,d){return!(!this.layout||l.isDataDriven()||d.isDataDriven())&&Nx.hasPaintOverride(this.layout,i)}static hasPaintOverride(i,l){const d=i.get("text-field"),p=OE.paint.properties[l];let y=!1;const x=w=>{for(const P of w)if(p.overrides&&p.overrides.hasOverride(P))return void(y=!0)};if(d.value.kind==="constant"&&d.value.value instanceof Xi)x(d.value.value.sections);else if(d.value.kind==="source"){const w=C=>{y||(C instanceof vl&&Pn(C.value)===Gu?x(C.value.sections):C instanceof zs?x(C.sections):C.eachChild(w))},P=d.value;P._styleExpression&&w(P._styleExpression.expression)}return y}getProgramConfiguration(i){return new kc(this,i)}}var _9={paint:new _e({"background-color":new ee(it.paint_background["background-color"]),"background-pattern":new ee(it.paint_background["background-pattern"]),"background-opacity":new ee(it.paint_background["background-opacity"])})},x9={paint:new _e({"raster-opacity":new ee(it.paint_raster["raster-opacity"]),"raster-hue-rotate":new ee(it.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new ee(it.paint_raster["raster-brightness-min"]),"raster-brightness-max":new ee(it.paint_raster["raster-brightness-max"]),"raster-saturation":new ee(it.paint_raster["raster-saturation"]),"raster-contrast":new ee(it.paint_raster["raster-contrast"]),"raster-resampling":new ee(it.paint_raster["raster-resampling"]),"raster-fade-duration":new ee(it.paint_raster["raster-fade-duration"])})};class b9 extends cs{constructor(i){super(i,{}),this.implementation=i}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}isLayerDraped(){return this.implementation.renderToTile!==void 0}shouldRedrape(){return!!this.implementation.shouldRerenderTiles&&this.implementation.shouldRerenderTiles()}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){}onAdd(i){this.implementation.onAdd&&this.implementation.onAdd(i,i.painter.context.gl)}onRemove(i){this.implementation.onRemove&&this.implementation.onRemove(i,i.painter.context.gl)}}var w9={paint:new _e({"sky-type":new ee(it.paint_sky["sky-type"]),"sky-atmosphere-sun":new ee(it.paint_sky["sky-atmosphere-sun"]),"sky-atmosphere-sun-intensity":new ee(it.paint_sky["sky-atmosphere-sun-intensity"]),"sky-gradient-center":new ee(it.paint_sky["sky-gradient-center"]),"sky-gradient-radius":new ee(it.paint_sky["sky-gradient-radius"]),"sky-gradient":new ye(it.paint_sky["sky-gradient"]),"sky-atmosphere-halo-color":new ee(it.paint_sky["sky-atmosphere-halo-color"]),"sky-atmosphere-color":new ee(it.paint_sky["sky-atmosphere-color"]),"sky-opacity":new ee(it.paint_sky["sky-opacity"])})};function kE(a,i,l){const d=[0,0,1],p=dk([]);return fk(p,p,l?-Ee(a)+Math.PI:Ee(a)),hk(p,p,-Ee(i)),sk(d,d,p),Ki(d,d)}const S9={circle:class extends cs{constructor(a){super(a,Rq)}createBucket(a){return new iE(a)}queryRadius(a){const i=a;return rf("circle-radius",this,i)+rf("circle-stroke-width",this,i)+px(this.paint.get("circle-translate"))}queryIntersectsFeature(a,i,l,d,p,y,x,w){const P=Lk(this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),y.angle,a.pixelToTileUnitsFactor),C=this.paint.get("circle-radius").evaluate(i,l)+this.paint.get("circle-stroke-width").evaluate(i,l);return jk(a,d,y,x,w,this.paint.get("circle-pitch-alignment")==="map",this.paint.get("circle-pitch-scale")==="map",P,C)}getProgramIds(){return["circle"]}getProgramConfiguration(a){return new kc(this,a)}},heatmap:class extends cs{createBucket(a){return new Nk(a)}constructor(a){super(a,Nq),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(a){a==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=lE({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(a){return rf("heatmap-radius",this,a)}queryIntersectsFeature(a,i,l,d,p,y,x,w){const P=this.paint.get("heatmap-radius").evaluate(i,l);return jk(a,d,y,x,w,!0,!0,new ne(0,0),P)}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}getProgramIds(){return["heatmap","heatmapTexture"]}getProgramConfiguration(a){return new kc(this,a)}},hillshade:class extends cs{constructor(a){super(a,Bq)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}getProgramIds(){return["hillshade","hillshadePrepare"]}},fill:class extends cs{constructor(a){super(a,tH)}getProgramIds(){const a=this.paint.get("fill-pattern"),i=a&&a.constantOr(1),l=[i?"fillPattern":"fill"];return this.paint.get("fill-antialias")&&l.push(i&&!this.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline"),l}getProgramConfiguration(a){return new kc(this,a)}recalculate(a,i){super.recalculate(a,i);const l=this.paint._values["fill-outline-color"];l.value.kind==="constant"&&l.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(a){return new _x(a)}queryRadius(){return px(this.paint.get("fill-translate"))}queryIntersectsFeature(a,i,l,d,p,y){return!a.queryGeometry.isAboveHorizon&&Ik(Rk(a.tilespaceGeometry,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),y.angle,a.pixelToTileUnitsFactor),d)}isTileClipped(){return!0}},"fill-extrusion":class extends cs{constructor(a){super(a,yH)}createBucket(a){return new Mg(a)}queryRadius(){return px(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}getProgramIds(){return[this.paint.get("fill-extrusion-pattern").constantOr(1)?"fillExtrusionPattern":"fillExtrusion"]}getProgramConfiguration(a){return new kc(this,a)}queryIntersectsFeature(a,i,l,d,p,y,x,w,P){const C=Lk(this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),y.angle,a.pixelToTileUnitsFactor),j=this.paint.get("fill-extrusion-height").evaluate(i,l),$=this.paint.get("fill-extrusion-base").evaluate(i,l),G=[0,0],X=w&&y.elevation,K=y.elevation?y.elevation.exaggeration():1,te=a.tile.getBucket(this);if(X&&te instanceof Mg){const Te=te.centroidVertexArray,Me=P+1;Me<Te.length&&(G[0]=Te.geta_centroid_pos0(Me),G[1]=Te.geta_centroid_pos1(Me))}if(G[0]===0&&G[1]===1)return!1;y.projection.name==="globe"&&(d=rD([d],[new ne(0,0),new ne(Jt,Jt)],a.tileID.canonical).map(Te=>Te.polygon).flat());const se=X?w:null,[me,Ae]=function(Te,Me,Ce,Ye,Xe,ot,bt,Qe,ut,dt,yt){return Te.projection.name==="globe"?function(Ct,nt,Rt,Ut,Lt,ar,Mt,Xt,sr,Or,lr){const er=[],on=[],hr=Ct.projection.upVectorScale(lr,Ct.center.lat,Ct.worldSize).metersToTile,fr=[0,0,0,1],Kr=[0,0,0,1],tn=(Yr,vn,Cn,Vn)=>{Yr[0]=vn,Yr[1]=Cn,Yr[2]=Vn,Yr[3]=1},rn=tD();Rt>0&&(Rt+=rn),Ut+=rn;for(const Yr of nt){const vn=[],Cn=[];for(const Vn of Yr){const Jr=Vn.x+Lt.x,ei=Vn.y+Lt.y,Gn=Ct.projection.projectTilePoint(Jr,ei,lr),Sn=Ct.projection.upVector(lr,Vn.x,Vn.y);let Dr=Rt,Wn=Ut;if(Mt){const nn=aD(Jr,ei,Rt,Ut,Mt,Xt,sr,Or);Dr+=nn.base,Wn+=nn.top}Rt!==0?tn(fr,Gn.x+Sn[0]*hr*Dr,Gn.y+Sn[1]*hr*Dr,Gn.z+Sn[2]*hr*Dr):tn(fr,Gn.x,Gn.y,Gn.z),tn(Kr,Gn.x+Sn[0]*hr*Wn,Gn.y+Sn[1]*hr*Wn,Gn.z+Sn[2]*hr*Wn),Ln(fr,fr,ar),Ln(Kr,Kr,ar),vn.push(new af(fr[0],fr[1],fr[2])),Cn.push(new af(Kr[0],Kr[1],Kr[2]))}er.push(vn),on.push(Cn)}return[er,on]}(Te,Me,Ce,Ye,Xe,ot,bt,Qe,ut,dt,yt):bt?function(Ct,nt,Rt,Ut,Lt,ar,Mt,Xt,sr){const Or=[],lr=[],er=[0,0,0,1];for(const on of Ct){const hr=[],fr=[];for(const Kr of on){const tn=Kr.x+Ut.x,rn=Kr.y+Ut.y,Yr=aD(tn,rn,nt,Rt,ar,Mt,Xt,sr);er[0]=tn,er[1]=rn,er[2]=Yr.base,er[3]=1,_d(er,er,Lt),er[3]=Math.max(er[3],1e-5);const vn=new af(er[0]/er[3],er[1]/er[3],er[2]/er[3]);er[0]=tn,er[1]=rn,er[2]=Yr.top,er[3]=1,_d(er,er,Lt),er[3]=Math.max(er[3],1e-5);const Cn=new af(er[0]/er[3],er[1]/er[3],er[2]/er[3]);hr.push(vn),fr.push(Cn)}Or.push(hr),lr.push(fr)}return[Or,lr]}(Me,Ce,Ye,Xe,ot,bt,Qe,ut,dt):function(Ct,nt,Rt,Ut,Lt){const ar=[],Mt=[],Xt=Lt[8]*nt,sr=Lt[9]*nt,Or=Lt[10]*nt,lr=Lt[11]*nt,er=Lt[8]*Rt,on=Lt[9]*Rt,hr=Lt[10]*Rt,fr=Lt[11]*Rt;for(const Kr of Ct){const tn=[],rn=[];for(const Yr of Kr){const vn=Yr.x+Ut.x,Cn=Yr.y+Ut.y,Vn=Lt[0]*vn+Lt[4]*Cn+Lt[12],Jr=Lt[1]*vn+Lt[5]*Cn+Lt[13],ei=Lt[2]*vn+Lt[6]*Cn+Lt[14],Gn=Lt[3]*vn+Lt[7]*Cn+Lt[15],Sn=Vn+Xt,Dr=Jr+sr,Wn=ei+Or,nn=Math.max(Gn+lr,1e-5),Qi=Vn+er,qn=Jr+on,_i=ei+hr,hi=Math.max(Gn+fr,1e-5);tn.push(new af(Sn/nn,Dr/nn,Wn/nn)),rn.push(new af(Qi/hi,qn/hi,_i/hi))}ar.push(tn),Mt.push(rn)}return[ar,Mt]}(Me,Ce,Ye,Xe,ot)}(y,d,$,j,C,x,se,G,K,y.center.lat,a.tileID.canonical),ge=a.queryGeometry;return function(Te,Me,Ce){let Ye=1/0;Ik(Ce,Me)&&(Ye=oD(Ce,Me[0]));for(let Xe=0;Xe<Me.length;Xe++){const ot=Me[Xe],bt=Te[Xe];for(let Qe=0;Qe<ot.length-1;Qe++){const ut=ot[Qe],dt=[ut,ot[Qe+1],bt[Qe+1],bt[Qe],ut];Mk(Ce,dt)&&(Ye=Math.min(Ye,oD(Ce,dt)))}}return Ye!==1/0&&Ye}(me,Ae,ge.isPointQuery()?ge.screenBounds:ge.screenGeometry)}},line:class extends cs{constructor(a){super(a,sD),this.gradientVersion=0}_handleSpecialPaintPropertyUpdate(a){if(a==="line-gradient"){const i=this._transitionablePaint._values["line-gradient"].value.expression;this.stepInterpolant=i._styleExpression&&i._styleExpression.expression instanceof Lm,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}widthExpression(){return this._transitionablePaint._values["line-width"].value.expression}recalculate(a,i){super.recalculate(a,i),this.paint._values["line-floorwidth"]=lD.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,a)}createBucket(a){return new Ex(a)}getProgramIds(){return[this.paint.get("line-pattern").constantOr(1)?"linePattern":"line"]}getProgramConfiguration(a){return new kc(this,a)}queryRadius(a){const i=a,l=cD(rf("line-width",this,i),rf("line-gap-width",this,i)),d=rf("line-offset",this,i);return l/2+Math.abs(d)+px(this.paint.get("line-translate"))}queryIntersectsFeature(a,i,l,d,p,y){if(a.queryGeometry.isAboveHorizon)return!1;const x=Rk(a.tilespaceGeometry,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),y.angle,a.pixelToTileUnitsFactor),w=a.pixelToTileUnitsFactor/2*cD(this.paint.get("line-width").evaluate(i,l),this.paint.get("line-gap-width").evaluate(i,l)),P=this.paint.get("line-offset").evaluate(i,l);return P&&(d=function(C,j){const $=[],G=new ne(0,0);for(let X=0;X<C.length;X++){const K=C[X],te=[];for(let se=0;se<K.length;se++){const me=K[se],Ae=K[se+1],ge=se===0?G:me.sub(K[se-1])._unit()._perp(),Te=se===K.length-1?G:Ae.sub(me)._unit()._perp(),Me=ge._add(Te)._unit();Me._mult(1/(Me.x*Te.x+Me.y*Te.y)),te.push(Me._mult(j)._add(me))}$.push(te)}return $}(d,P*a.pixelToTileUnitsFactor)),function(C,j,$){for(let G=0;G<j.length;G++){const X=j[G];if(C.length>=3){for(let K=0;K<X.length;K++)if(Sd(C,X[K]))return!0}if(Iq(C,X,$))return!0}return!1}(x,d,w)}isTileClipped(){return!0}},symbol:Nx,background:class extends cs{constructor(a){super(a,_9)}getProgramIds(){return[this.paint.get("background-pattern")?"backgroundPattern":"background"]}},raster:class extends cs{constructor(a){super(a,x9)}getProgramIds(){return["raster"]}},sky:class extends cs{constructor(a){super(a,w9),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(a){a==="sky-gradient"?this._updateColorRamp():a!=="sky-atmosphere-sun"&&a!=="sky-atmosphere-halo-color"&&a!=="sky-atmosphere-color"&&a!=="sky-atmosphere-sun-intensity"||(this._skyboxInvalidated=!0)}_updateColorRamp(){this.colorRamp=lE({expression:this._transitionablePaint._values["sky-gradient"].value.expression,evaluationKey:"skyRadialProgress"}),this.colorRampTexture&&(this.colorRampTexture.destroy(),this.colorRampTexture=null)}needsSkyboxCapture(a){if(this._skyboxInvalidated||!this.skyboxTexture||!this.skyboxGeometry)return!0;if(!this.paint.get("sky-atmosphere-sun")){const i=a.style.light.properties.get("position");return this._lightPosition.azimuthal!==i.azimuthal||this._lightPosition.polar!==i.polar}return!1}getCenter(a,i){if(this.paint.get("sky-type")==="atmosphere"){const d=this.paint.get("sky-atmosphere-sun"),p=!d,y=a.style.light,x=y.properties.get("position");return p&&y.properties.get("anchor")==="viewport"&&Pt("The sun direction is attached to a light with viewport anchor, lighting may behave unexpectedly."),p?kE(x.azimuthal,90-x.polar,i):kE(d[0],90-d[1],i)}const l=this.paint.get("sky-gradient-center");return kE(l[0],90-l[1],i)}is3D(){return!1}isSky(){return!0}markSkyboxValid(a){this._skyboxInvalidated=!1,this._lightPosition=a.style.light.properties.get("position")}hasOffscreenPass(){return!0}getProgramIds(){const a=this.paint.get("sky-type");return a==="atmosphere"?["skyboxCapture","skybox"]:a==="gradient"?["skyboxGradient"]:null}}};class $g{constructor(i,l,d,p){this.context=i,this.format=d,this.texture=i.gl.createTexture(),this.update(l,p)}update(i,l,d){const{width:p,height:y}=i,{context:x}=this,{gl:w}=x,{HTMLImageElement:P,HTMLCanvasElement:C,HTMLVideoElement:j,ImageData:$,ImageBitmap:G}=_;if(w.bindTexture(w.TEXTURE_2D,this.texture),x.pixelStoreUnpackFlipY.set(!1),x.pixelStoreUnpack.set(1),x.pixelStoreUnpackPremultiplyAlpha.set(this.format===w.RGBA&&(!l||l.premultiply!==!1)),d||this.size&&this.size[0]===p&&this.size[1]===y){const{x:X,y:K}=d||{x:0,y:0};i instanceof P||i instanceof C||i instanceof j||i instanceof $||G&&i instanceof G?w.texSubImage2D(w.TEXTURE_2D,0,X,K,w.RGBA,w.UNSIGNED_BYTE,i):w.texSubImage2D(w.TEXTURE_2D,0,X,K,p,y,w.RGBA,w.UNSIGNED_BYTE,i.data)}else this.size=[p,y],i instanceof P||i instanceof C||i instanceof j||i instanceof $||G&&i instanceof G?w.texImage2D(w.TEXTURE_2D,0,this.format,this.format,w.UNSIGNED_BYTE,i):w.texImage2D(w.TEXTURE_2D,0,this.format,p,y,0,this.format,w.UNSIGNED_BYTE,i.data);this.useMipmap=!!(l&&l.useMipmap&&this.isSizePowerOfTwo()),this.useMipmap&&w.generateMipmap(w.TEXTURE_2D)}bind(i,l){const{context:d}=this,{gl:p}=d;p.bindTexture(p.TEXTURE_2D,this.texture),i!==this.filter&&(p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MAG_FILTER,i),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MIN_FILTER,this.useMipmap?i===p.NEAREST?p.NEAREST_MIPMAP_NEAREST:p.LINEAR_MIPMAP_NEAREST:i),this.filter=i),l!==this.wrap&&(p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_S,l),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_T,l),this.wrap=l)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:i}=this.context;i.deleteTexture(this.texture),this.texture=null}}class E9{constructor(i){this._callback=i,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){this._channel=void 0,this._callback=()=>{}}}class T9{constructor(){this.tasks={},this.taskQueue=[],ft(["process"],this),this.invoker=new E9(this.process),this.nextId=0}add(i,l){const d=this.nextId++,p=function({type:y,isSymbolTile:x,zoom:w}){return w=w||0,y==="message"?0:y!=="maybePrepare"||x?y!=="parseTile"||x?y==="parseTile"&&x?300-w:y==="maybePrepare"&&x?400-w:500:200-w:100-w}(l);if(p===0){Yt();try{i()}finally{}return{cancel:()=>{}}}return this.tasks[d]={fn:i,metadata:l,priority:p,id:d},this.taskQueue.push(d),this.invoker.trigger(),{cancel:()=>{delete this.tasks[d]}}}process(){Yt();try{if(this.taskQueue=this.taskQueue.filter(d=>!!this.tasks[d]),!this.taskQueue.length)return;const i=this.pick();if(i===null)return;const l=this.tasks[i];if(delete this.tasks[i],this.taskQueue.length&&this.invoker.trigger(),!l)return;l.fn()}finally{}}pick(){let i=null,l=1/0;for(let p=0;p<this.taskQueue.length;p++){const y=this.tasks[this.taskQueue[p]];y.priority<l&&(l=y.priority,i=p)}if(i===null)return null;const d=this.taskQueue[i];return this.taskQueue.splice(i,1),d}remove(){this.invoker.remove()}}class HD{constructor(i){this._stringToNumber={},this._numberToString=[];for(let l=0;l<i.length;l++){const d=i[l];this._stringToNumber[d]=l,this._numberToString[l]=d}}encode(i){return this._stringToNumber[i]}decode(i){return this._numberToString[i]}}const A9=["tile","layer","source","sourceLayer","state"];class XD{constructor(i,l,d,p,y){this.type="Feature",this._vectorTileFeature=i,this._z=l,this._x=d,this._y=p,this.properties=i.properties,this.id=y}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._x,this._y,this._z).geometry),this._geometry}set geometry(i){this._geometry=i}toJSON(){const i={type:"Feature",state:void 0,geometry:this.geometry,properties:this.properties};this.id!==void 0&&(i.id=this.id);for(const l of A9)this[l]!==void 0&&(i[l]=this[l]);return i}}const Aa=32,Gs=33,Nc=new Uint16Array(8184);for(let a=0;a<2046;a++){let i=a+2,l=0,d=0,p=0,y=0,x=0,w=0;for(1&i?p=y=x=Aa:l=d=w=Aa;(i>>=1)>1;){const C=l+p>>1,j=d+y>>1;1&i?(p=l,y=d,l=x,d=w):(l=p,d=y,p=x,y=w),x=C,w=j}const P=4*a;Nc[P+0]=l,Nc[P+1]=d,Nc[P+2]=p,Nc[P+3]=y}const Ws=new Uint16Array(2178),Bc=new Uint8Array(1089),Bx=new Uint16Array(1089);function ZD(a){return a===0?-.03125:a===32?.03125:0}var KD=Fe([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);const YD={type:2,extent:Jt,loadGeometry:()=>[[new ne(0,0),new ne(Jt+1,0),new ne(Jt+1,Jt+1),new ne(0,Jt+1),new ne(0,0)]]};class DE{constructor(i,l,d,p,y){this.tileID=i,this.uid=vt(),this.uses=0,this.tileSize=l,this.tileZoom=d,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.isRaster=y,this.expiredRequestCount=0,this.state="loading",p&&p.transform&&(this.projection=p.transform.projection)}registerFadeDuration(i){const l=i+this.timeAdded;l<Ya.now()||this.fadeEndTime&&l<this.fadeEndTime||(this.fadeEndTime=l)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}get tileTransform(){return this._tileTransform||(this._tileTransform=Td(this.tileID.canonical,this.projection)),this._tileTransform}loadVectorData(i,l,d){if(this.unloadVectorData(),this.state="loaded",i){i.featureIndex&&(this.latestFeatureIndex=i.featureIndex,i.rawTileData?(this.latestRawTileData=i.rawTileData,this.latestFeatureIndex.rawTileData=i.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=i.collisionBoxArray,this.buckets=function(p,y){const x={};if(!y)return x;for(const w of p){const P=w.layerIds.map(C=>y.getLayer(C)).filter(Boolean);if(P.length!==0){w.layers=P,w.stateDependentLayerIds&&(w.stateDependentLayers=w.stateDependentLayerIds.map(C=>P.filter(j=>j.id===C)[0]));for(const C of P)x[C.id]=w}}return x}(i.buckets,l.style),this.hasSymbolBuckets=!1;for(const p in this.buckets){const y=this.buckets[p];if(y instanceof zc){if(this.hasSymbolBuckets=!0,!d)break;y.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const p in this.buckets){const y=this.buckets[p];if(y instanceof zc&&y.hasRTLText){this.hasRTLText=!0,D.isLoading()||D.isLoaded()||T()!=="deferred"||O();break}}this.queryPadding=0;for(const p in this.buckets){const y=this.buckets[p];this.queryPadding=Math.max(this.queryPadding,l.style.getLayer(p).queryRadius(y))}i.imageAtlas&&(this.imageAtlas=i.imageAtlas),i.glyphAtlasImage&&(this.glyphAtlasImage=i.glyphAtlasImage),i.lineAtlas&&(this.lineAtlas=i.lineAtlas)}else this.collisionBoxArray=new Xr}unloadVectorData(){if(this.hasData()){for(const i in this.buckets)this.buckets[i].destroy();this.buckets={},this.imageAtlas&&(this.imageAtlas=null),this.lineAtlas&&(this.lineAtlas=null),this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.lineAtlasTexture&&this.lineAtlasTexture.destroy(),this._tileBoundsBuffer&&(this._tileBoundsBuffer.destroy(),this._tileBoundsIndexBuffer.destroy(),this._tileBoundsSegments.destroy(),this._tileBoundsBuffer=null),this._tileDebugBuffer&&(this._tileDebugBuffer.destroy(),this._tileDebugSegments.destroy(),this._tileDebugBuffer=null),this._tileDebugIndexBuffer&&(this._tileDebugIndexBuffer.destroy(),this._tileDebugIndexBuffer=null),this._globeTileDebugBorderBuffer&&(this._globeTileDebugBorderBuffer.destroy(),this._globeTileDebugBorderBuffer=null),this._tileDebugTextBuffer&&(this._tileDebugTextBuffer.destroy(),this._tileDebugTextSegments.destroy(),this._tileDebugTextIndexBuffer.destroy(),this._tileDebugTextBuffer=null),this._globeTileDebugTextBuffer&&(this._globeTileDebugTextBuffer.destroy(),this._globeTileDebugTextBuffer=null),this.latestFeatureIndex=null,this.state="unloaded"}}getBucket(i){return this.buckets[i.id]}upload(i){for(const d in this.buckets){const p=this.buckets[d];p.uploadPending()&&p.upload(i)}const l=i.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new $g(i,this.imageAtlas.image,l.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new $g(i,this.glyphAtlasImage,l.ALPHA),this.glyphAtlasImage=null),this.lineAtlas&&!this.lineAtlas.uploaded&&(this.lineAtlasTexture=new $g(i,this.lineAtlas.image,l.ALPHA),this.lineAtlas.uploaded=!0)}prepare(i){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(i,this.imageAtlasTexture)}queryRenderedFeatures(i,l,d,p,y,x,w,P){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({tileResult:p,pixelPosMatrix:w,transform:x,params:y,tileTransform:this.tileTransform},i,l,d):{}}querySourceFeatures(i,l){const d=this.latestFeatureIndex;if(!d||!d.rawTileData)return;const p=d.loadVTLayers(),y=l?l.sourceLayer:"",x=p._geojsonTileLayer||p[y];if(!x)return;const w=Gh(l&&l.filter),{z:P,x:C,y:j}=this.tileID.canonical,$={z:P,x:C,y:j};for(let G=0;G<x.length;G++){const X=x.feature(G);if(w.needGeometry){const se=wd(X,!0);if(!w.filter(new B(this.tileID.overscaledZ),se,this.tileID.canonical))continue}else if(!w.filter(new B(this.tileID.overscaledZ),X))continue;const K=d.getId(X,y),te=new XD(X,P,C,j,K);te.tile=$,i.push(te)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return!!this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(i){const l=this.expirationTime;if(i.cacheControl){const d=or(i.cacheControl);d["max-age"]&&(this.expirationTime=Date.now()+1e3*d["max-age"])}else i.expires&&(this.expirationTime=new Date(i.expires).getTime());if(this.expirationTime){const d=Date.now();let p=!1;if(this.expirationTime>d)p=!1;else if(l)if(this.expirationTime<l)p=!0;else{const y=this.expirationTime-l;y?this.expirationTime=d+Math.max(y,3e4):p=!0}else p=!0;p?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(i,l){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(i).length===0||!l)return;const d=this.latestFeatureIndex.loadVTLayers(),p=l.style.listImages();for(const y in this.buckets){if(!l.style.hasLayer(y))continue;const x=this.buckets[y],w=x.layers[0].sourceLayer||"_geojsonTileLayer",P=d[w],C=i[w];if(!P||!C||Object.keys(C).length===0)continue;if(x.update(C,P,p,this.imageAtlas&&this.imageAtlas.patternPositions||{}),x instanceof Ex||x instanceof _x){const $=l.style._getSourceCache(x.layers[0].source);l._terrain&&l._terrain.enabled&&$&&x.programConfigurations.needsUpload&&l._terrain._clearRenderCacheForTile($.id,this.tileID)}const j=l&&l.style&&l.style.getLayer(y);j&&(this.queryPadding=Math.max(this.queryPadding,j.queryRadius(x)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<Ya.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(i){this.symbolFadeHoldUntil=Ya.now()+i}setTexture(i,l){const d=l.context,p=d.gl;this.texture=this.texture||l.getTileTexture(i.width),this.texture?this.texture.update(i,{useMipmap:!0}):(this.texture=new $g(d,i,p.RGBA,{useMipmap:!0}),this.texture.bind(p.LINEAR,p.CLAMP_TO_EDGE))}setDependencies(i,l){const d={};for(const p of l)d[p]=!0;this.dependencies[i]=d}hasDependency(i,l){for(const d of i){const p=this.dependencies[d];if(p){for(const y of l)if(p[y])return!0}}return!1}clearQueryDebugViz(){}_makeDebugTileBoundsBuffers(i,l){if(!l||l.name==="mercator"||this._tileDebugBuffer)return;const d=Il(YD,this.tileID.canonical,this.tileTransform)[0],p=new xt,y=new Mo;for(let x=0;x<d.length;x++){const{x:w,y:P}=d[x];p.emplaceBack(w,P),y.emplaceBack(x)}y.emplaceBack(0),this._tileDebugIndexBuffer=i.createIndexBuffer(y),this._tileDebugBuffer=i.createVertexBuffer(p,vg.members),this._tileDebugSegments=Fn.simpleSegment(0,0,p.length,y.length)}_makeTileBoundsBuffers(i,l){if(this._tileBoundsBuffer||!l||l.name==="mercator")return;const d=Il(YD,this.tileID.canonical,this.tileTransform)[0];let p,y;if(this.isRaster){const x=function(w,P){const C=Td(w,P),j=Math.pow(2,w.z);for(let se=0;se<Gs;se++)for(let me=0;me<Gs;me++){const Ae=Ko((w.x+(me+ZD(me))/Aa)/j),ge=Ii((w.y+(se+ZD(se))/Aa)/j),Te=P.project(Ae,ge),Me=se*Gs+me;Ws[2*Me+0]=Math.round((Te.x*C.scale-C.x)*Jt),Ws[2*Me+1]=Math.round((Te.y*C.scale-C.y)*Jt)}Bc.fill(0),Bx.fill(0);for(let se=2045;se>=0;se--){const me=4*se,Ae=Nc[me+0],ge=Nc[me+1],Te=Nc[me+2],Me=Nc[me+3],Ce=Ae+Te>>1,Ye=ge+Me>>1,Xe=Ce+Ye-ge,ot=Ye+Ae-Ce,bt=ge*Gs+Ae,Qe=Me*Gs+Te,ut=Ye*Gs+Ce,dt=Math.hypot((Ws[2*bt+0]+Ws[2*Qe+0])/2-Ws[2*ut+0],(Ws[2*bt+1]+Ws[2*Qe+1])/2-Ws[2*ut+1])>=16;Bc[ut]=Bc[ut]||(dt?1:0),se<1022&&(Bc[ut]=Bc[ut]||Bc[(ge+ot>>1)*Gs+(Ae+Xe>>1)]||Bc[(Me+ot>>1)*Gs+(Te+Xe>>1)])}const $=new ct,G=new Gt;let X=0;function K(se,me){const Ae=me*Gs+se;return Bx[Ae]===0&&($.emplaceBack(Ws[2*Ae+0],Ws[2*Ae+1],se*Jt/Aa,me*Jt/Aa),Bx[Ae]=++X),Bx[Ae]-1}function te(se,me,Ae,ge,Te,Me){const Ce=se+Ae>>1,Ye=me+ge>>1;if(Math.abs(se-Te)+Math.abs(me-Me)>1&&Bc[Ye*Gs+Ce])te(Te,Me,se,me,Ce,Ye),te(Ae,ge,Te,Me,Ce,Ye);else{const Xe=K(se,me),ot=K(Ae,ge),bt=K(Te,Me);G.emplaceBack(Xe,ot,bt)}}return te(0,0,Aa,Aa,Aa,0),te(Aa,Aa,0,0,0,Aa),{vertices:$,indices:G}}(this.tileID.canonical,l);p=x.vertices,y=x.indices}else{p=new ct,y=new Gt;for(const{x:w,y:P}of d)p.emplaceBack(w,P,0,0);const x=fE(p.int16,void 0,4);for(let w=0;w<x.length;w+=3)y.emplaceBack(x[w],x[w+1],x[w+2])}this._tileBoundsBuffer=i.createVertexBuffer(p,KD.members),this._tileBoundsIndexBuffer=i.createIndexBuffer(y),this._tileBoundsSegments=Fn.simpleSegment(0,0,p.length,y.length)}_makeGlobeTileDebugBuffers(i,l){const d=l.projection;if(!d||d.name!=="globe"||l.freezeTileCoverage)return;const p=this.tileID.canonical,y=bg(vk(p,l)),x=ef(l.zoom);let w;x>0&&(w=FS(new Float64Array(16),l.globeMatrix)),this._makeGlobeTileDebugBorderBuffer(i,p,l,y,w,x),this._makeGlobeTileDebugTextBuffer(i,p,l,y,w,x)}_globePoint(i,l,d,p,y,x,w){let P=xg(i,l,d);if(x){const C=1<<d.z,j=Us(p.center.lng),$=Vs(p.center.lat),G=(d.x+.5)/C-j;let X=0;G>.5?X=-1:G<-.5&&(X=1);let K=(i/Jt+d.x)/C+X,te=(l/Jt+d.y)/C;K=(K-j)*p._pixelsPerMercatorPixel+j,te=(te-$)*p._pixelsPerMercatorPixel+$;const se=[K*p.worldSize,te*p.worldSize,0];Ln(se,se,x),P=bd(P,se,w)}return Ln(P,P,y)}_makeGlobeTileDebugBorderBuffer(i,l,d,p,y,x){const w=new xt,P=new Mo,C=new He,j=(G,X,K,te,se)=>{const me=(K-G)/(se-1),Ae=(te-X)/(se-1),ge=w.length;for(let Te=0;Te<se;Te++){const Me=G+Te*me,Ce=X+Te*Ae;w.emplaceBack(Me,Ce);const Ye=this._globePoint(Me,Ce,l,d,p,y,x);C.emplaceBack(Ye[0],Ye[1],Ye[2]),P.emplaceBack(ge+Te)}},$=Jt;j(0,0,$,0,16),j($,0,$,$,16),j($,$,0,$,16),j(0,$,0,0,16),this._tileDebugIndexBuffer=i.createIndexBuffer(P),this._tileDebugBuffer=i.createVertexBuffer(w,vg.members),this._globeTileDebugBorderBuffer=i.createVertexBuffer(C,mk.members),this._tileDebugSegments=Fn.simpleSegment(0,0,w.length,P.length)}_makeGlobeTileDebugTextBuffer(i,l,d,p,y,x){const w=Jt/4,P=new xt,C=new Gt,j=new He,$=25;C.reserve(32),P.reserve($),j.reserve($);const G=(X,K)=>$*X+K;for(let X=0;X<$;X++){const K=X*w;for(let te=0;te<$;te++){const se=te*w;P.emplaceBack(se,K);const me=this._globePoint(se,K,l,d,p,y,x);j.emplaceBack(me[0],me[1],me[2])}}for(let X=0;X<4;X++)for(let K=0;K<4;K++){const te=G(X,K),se=G(X,K+1),me=G(X+1,K),Ae=G(X+1,K+1);C.emplaceBack(te,se,me),C.emplaceBack(me,se,Ae)}this._tileDebugTextIndexBuffer=i.createIndexBuffer(C),this._tileDebugTextBuffer=i.createVertexBuffer(P,vg.members),this._globeTileDebugTextBuffer=i.createVertexBuffer(j,mk.members),this._tileDebugTextSegments=Fn.simpleSegment(0,0,$,32)}}class P9{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(i,l,d){const p=String(l);if(this.stateChanges[i]=this.stateChanges[i]||{},this.stateChanges[i][p]=this.stateChanges[i][p]||{},at(this.stateChanges[i][p],d),this.deletedStates[i]===null){this.deletedStates[i]={};for(const y in this.state[i])y!==p&&(this.deletedStates[i][y]=null)}else if(this.deletedStates[i]&&this.deletedStates[i][p]===null){this.deletedStates[i][p]={};for(const y in this.state[i][p])d[y]||(this.deletedStates[i][p][y]=null)}else for(const y in d)this.deletedStates[i]&&this.deletedStates[i][p]&&this.deletedStates[i][p][y]===null&&delete this.deletedStates[i][p][y]}removeFeatureState(i,l,d){if(this.deletedStates[i]===null)return;const p=String(l);if(this.deletedStates[i]=this.deletedStates[i]||{},d&&l!==void 0)this.deletedStates[i][p]!==null&&(this.deletedStates[i][p]=this.deletedStates[i][p]||{},this.deletedStates[i][p][d]=null);else if(l!==void 0)if(this.stateChanges[i]&&this.stateChanges[i][p])for(d in this.deletedStates[i][p]={},this.stateChanges[i][p])this.deletedStates[i][p][d]=null;else this.deletedStates[i][p]=null;else this.deletedStates[i]=null}getState(i,l){const d=String(l),p=at({},(this.state[i]||{})[d],(this.stateChanges[i]||{})[d]);if(this.deletedStates[i]===null)return{};if(this.deletedStates[i]){const y=this.deletedStates[i][l];if(y===null)return{};for(const x in y)delete p[x]}return p}initializeTileState(i,l){i.setFeatureState(this.state,l)}coalesceChanges(i,l){const d={};for(const p in this.stateChanges){this.state[p]=this.state[p]||{};const y={};for(const x in this.stateChanges[p])this.state[p][x]||(this.state[p][x]={}),at(this.state[p][x],this.stateChanges[p][x]),y[x]=this.state[p][x];d[p]=y}for(const p in this.deletedStates){this.state[p]=this.state[p]||{};const y={};if(this.deletedStates[p]===null)for(const x in this.state[p])y[x]={},this.state[p][x]={};else for(const x in this.deletedStates[p]){if(this.deletedStates[p][x]===null)this.state[p][x]={};else if(this.state[p][x])for(const w of Object.keys(this.deletedStates[p][x]))delete this.state[p][x][w];y[x]=this.state[p][x]}d[p]=d[p]||{},at(d[p],y)}if(this.stateChanges={},this.deletedStates={},Object.keys(d).length!==0)for(const p in i)i[p].setFeatureState(d,l)}}class JD{constructor(i){this.size=i,this.minimums=[],this.maximums=[],this.leaves=[]}getElevation(i,l){const d=this.toIdx(i,l);return{min:this.minimums[d],max:this.maximums[d]}}isLeaf(i,l){return this.leaves[this.toIdx(i,l)]}toIdx(i,l){return l*this.size+i}}function QD(a,i,l,d){let p=0,y=Number.MAX_VALUE;for(let x=0;x<3;x++)if(Math.abs(d[x])<1e-15){if(l[x]<a[x]||l[x]>i[x])return null}else{const w=1/d[x];let P=(a[x]-l[x])*w,C=(i[x]-l[x])*w;if(P>C){const j=P;P=C,C=j}if(P>p&&(p=P),C<y&&(y=C),p>y)return null}return p}function eR(a,i,l,d,p,y,x,w,P,C,j){const $=d-a,G=p-i,X=y-l,K=x-a,te=w-i,se=P-l,me=j[1]*se-j[2]*te,Ae=j[2]*K-j[0]*se,ge=j[0]*te-j[1]*K,Te=$*me+G*Ae+X*ge;if(Math.abs(Te)<1e-15)return null;const Me=1/Te,Ce=C[0]-a,Ye=C[1]-i,Xe=C[2]-l,ot=(Ce*me+Ye*Ae+Xe*ge)*Me;if(ot<0||ot>1)return null;const bt=Ye*X-Xe*G,Qe=Xe*$-Ce*X,ut=Ce*G-Ye*$,dt=(j[0]*bt+j[1]*Qe+j[2]*ut)*Me;return dt<0||ot+dt>1?null:(K*bt+te*Qe+se*ut)*Me}function tR(a,i,l){return(a-i)/(l-i)}function rR(a,i,l,d,p,y,x,w,P){const C=1<<l,j=y-d,$=x-p,G=(a+1)/C*j+d,X=(i+0)/C*$+p,K=(i+1)/C*$+p;w[0]=(a+0)/C*j+d,w[1]=X,P[0]=G,P[1]=K}class nR{constructor(i){if(this.maximums=[],this.minimums=[],this.leaves=[],this.childOffsets=[],this.nodeCount=0,this.dem=i,this._siblingOffset=[[0,0],[1,0],[0,1],[1,1]],!this.dem)return;const l=function(y){const x=Math.ceil(Math.log2(y.dim/8)),w=[];let P=Math.ceil(Math.pow(2,x));const C=1/P,j=(X,K,te,se,me)=>{const Ae=se?1:0,ge=(X+1)*te-Ae,Te=K*te,Me=(K+1)*te-Ae;me[0]=X*te,me[1]=Te,me[2]=ge,me[3]=Me};let $=new JD(P);const G=[];for(let X=0;X<P*P;X++){j(X%P,Math.floor(X/P),C,!1,G);const K=$c(G[0],G[1],y),te=$c(G[2],G[1],y),se=$c(G[2],G[3],y),me=$c(G[0],G[3],y);$.minimums.push(Math.min(K,te,se,me)),$.maximums.push(Math.max(K,te,se,me)),$.leaves.push(1)}for(w.push($),P/=2;P>=1;P/=2){const X=w[w.length-1];$=new JD(P);for(let K=0;K<P*P;K++){j(K%P,Math.floor(K/P),2,!0,G);const te=X.getElevation(G[0],G[1]),se=X.getElevation(G[2],G[1]),me=X.getElevation(G[2],G[3]),Ae=X.getElevation(G[0],G[3]),ge=X.isLeaf(G[0],G[1]),Te=X.isLeaf(G[2],G[1]),Me=X.isLeaf(G[2],G[3]),Ce=X.isLeaf(G[0],G[3]),Ye=Math.min(te.min,se.min,me.min,Ae.min),Xe=Math.max(te.max,se.max,me.max,Ae.max),ot=ge&&Te&&Me&&Ce;$.maximums.push(Xe),$.minimums.push(Ye),$.leaves.push(Xe-Ye<=5&&ot?1:0)}w.push($)}return w}(this.dem),d=l.length-1,p=l[d];this._addNode(p.minimums[0],p.maximums[0],p.leaves[0]),this._construct(l,0,0,d,0)}raycastRoot(i,l,d,p,y,x,w=1){return QD([i,l,-100],[d,p,this.maximums[0]*w],y,x)}raycast(i,l,d,p,y,x,w=1){if(!this.nodeCount)return null;const P=this.raycastRoot(i,l,d,p,y,x,w);if(P==null)return null;const C=[],j=[],$=[],G=[],X=[{idx:0,t:P,nodex:0,nodey:0,depth:0}];for(;X.length>0;){const{idx:K,t:te,nodex:se,nodey:me,depth:Ae}=X.pop();if(this.leaves[K]){rR(se,me,Ae,i,l,d,p,$,G);const Te=1<<Ae,Me=(se+0)/Te,Ce=(se+1)/Te,Ye=(me+0)/Te,Xe=(me+1)/Te,ot=$c(Me,Ye,this.dem)*w,bt=$c(Ce,Ye,this.dem)*w,Qe=$c(Ce,Xe,this.dem)*w,ut=$c(Me,Xe,this.dem)*w,dt=eR($[0],$[1],ot,G[0],$[1],bt,G[0],G[1],Qe,y,x),yt=eR(G[0],G[1],Qe,$[0],G[1],ut,$[0],$[1],ot,y,x),Ct=Math.min(dt!==null?dt:Number.MAX_VALUE,yt!==null?yt:Number.MAX_VALUE);if(Ct!==Number.MAX_VALUE)return Ct;{const nt=gg([],y,x,te);if(iR(ot,bt,ut,Qe,tR(nt[0],$[0],G[0]),tR(nt[1],$[1],G[1]))>=nt[2])return te}continue}let ge=0;for(let Te=0;Te<this._siblingOffset.length;Te++){rR((se<<1)+this._siblingOffset[Te][0],(me<<1)+this._siblingOffset[Te][1],Ae+1,i,l,d,p,$,G),$[2]=-100,G[2]=this.maximums[this.childOffsets[K]+Te]*w;const Me=QD($,G,y,x);if(Me!=null){const Ce=Me;C[Te]=Ce;let Ye=!1;for(let Xe=0;Xe<ge&&!Ye;Xe++)Ce>=C[j[Xe]]&&(j.splice(Xe,0,Te),Ye=!0);Ye||(j[ge]=Te),ge++}}for(let Te=0;Te<ge;Te++){const Me=j[Te];X.push({idx:this.childOffsets[K]+Me,t:C[Me],nodex:(se<<1)+this._siblingOffset[Me][0],nodey:(me<<1)+this._siblingOffset[Me][1],depth:Ae+1})}}return null}_addNode(i,l,d){return this.minimums.push(i),this.maximums.push(l),this.leaves.push(d),this.childOffsets.push(0),this.nodeCount++}_construct(i,l,d,p,y){if(i[p].isLeaf(l,d)===1)return;this.childOffsets[y]||(this.childOffsets[y]=this.nodeCount);const x=p-1,w=i[x];let P=0,C=0;for(let j=0;j<this._siblingOffset.length;j++){const $=2*l+this._siblingOffset[j][0],G=2*d+this._siblingOffset[j][1],X=w.getElevation($,G),K=w.isLeaf($,G),te=this._addNode(X.min,X.max,K);K&&(P|=1<<j),C||(C=te)}for(let j=0;j<this._siblingOffset.length;j++)P&1<<j||this._construct(i,2*l+this._siblingOffset[j][0],2*d+this._siblingOffset[j][1],x,C+j)}}function iR(a,i,l,d,p,y){return Cr(Cr(a,l,y),Cr(i,d,y),p)}function $c(a,i,l){const d=l.dim,p=Pe(a*d-.5,0,d-1),y=Pe(i*d-.5,0,d-1),x=Math.floor(p),w=Math.floor(y),P=Math.min(x+1,d-1),C=Math.min(w+1,d-1);return iR(l.get(x,w),l.get(P,w),l.get(x,C),l.get(P,C),p-x,y-w)}const oR={mapbox:[6553.6,25.6,.1,1e4],terrarium:[256,1,1/256,32768]};function C9(a,i,l){return(256*a*256+256*i+l)/10-1e4}function M9(a,i,l){return 256*a+i+l/256-32768}class $x{get tree(){return this._tree||this._buildQuadTree(),this._tree}constructor(i,l,d,p=!1,y=!1){if(this.uid=i,l.height!==l.width)throw new RangeError("DEM tiles must be square");if(d&&d!=="mapbox"&&d!=="terrarium")return Pt(`"${d}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=l.height;const x=this.dim=l.height-2,w=new Uint32Array(l.data.buffer);if(this.pixels=new Uint8Array(l.data.buffer),this.encoding=d||"mapbox",this.borderReady=p,!p){for(let P=0;P<x;P++)w[this._idx(-1,P)]=w[this._idx(0,P)],w[this._idx(x,P)]=w[this._idx(x-1,P)],w[this._idx(P,-1)]=w[this._idx(P,0)],w[this._idx(P,x)]=w[this._idx(P,x-1)];w[this._idx(-1,-1)]=w[this._idx(0,0)],w[this._idx(x,-1)]=w[this._idx(x-1,0)],w[this._idx(-1,x)]=w[this._idx(0,x-1)],w[this._idx(x,x)]=w[this._idx(x-1,x-1)],y&&this._buildQuadTree()}}_buildQuadTree(){this._tree=new nR(this)}get(i,l,d=!1){d&&(i=Pe(i,-1,this.dim),l=Pe(l,-1,this.dim));const p=4*this._idx(i,l);return(this.encoding==="terrarium"?M9:C9)(this.pixels[p],this.pixels[p+1],this.pixels[p+2])}static getUnpackVector(i){return oR[i]}get unpackVector(){return oR[this.encoding]}_idx(i,l){if(i<-1||i>=this.dim+1||l<-1||l>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(l+1)*this.stride+(i+1)}static pack(i,l){const d=[0,0,0,0],p=$x.getUnpackVector(l);let y=Math.floor((i+p[3])/p[2]);return d[2]=y%256,y=Math.floor(y/256),d[1]=y%256,y=Math.floor(y/256),d[0]=y,d}getPixels(){return new Oo({width:this.stride,height:this.stride},this.pixels)}backfillBorder(i,l,d){if(this.dim!==i.dim)throw new Error("dem dimension mismatch");let p=l*this.dim,y=l*this.dim+this.dim,x=d*this.dim,w=d*this.dim+this.dim;switch(l){case-1:p=y-1;break;case 1:y=p+1}switch(d){case-1:x=w-1;break;case 1:w=x+1}const P=-l*this.dim,C=-d*this.dim;for(let j=x;j<w;j++)for(let $=p;$<y;$++){const G=4*this._idx($,j),X=4*this._idx($+P,j+C);this.pixels[G+0]=i.pixels[X+0],this.pixels[G+1]=i.pixels[X+1],this.pixels[G+2]=i.pixels[X+2],this.pixels[G+3]=i.pixels[X+3]}}onDeserialize(){this._tree&&(this._tree.dem=this)}}$t($x,"DEMData"),$t(nR,"DemMinMaxQuadTree",{omit:["dem"]});class I9{constructor(i,l){this.max=i,this.onRemove=l,this.reset()}reset(){for(const i in this.data)for(const l of this.data[i])l.timeout&&clearTimeout(l.timeout),this.onRemove(l.value);return this.data={},this.order=[],this}add(i,l,d){const p=i.wrapped().key;this.data[p]===void 0&&(this.data[p]=[]);const y={value:l,timeout:void 0};if(d!==void 0&&(y.timeout=setTimeout(()=>{this.remove(i,y)},d)),this.data[p].push(y),this.order.push(p),this.order.length>this.max){const x=this._getAndRemoveByKey(this.order[0]);x&&this.onRemove(x)}return this}has(i){return i.wrapped().key in this.data}getAndRemove(i){return this.has(i)?this._getAndRemoveByKey(i.wrapped().key):null}_getAndRemoveByKey(i){const l=this.data[i].shift();return l.timeout&&clearTimeout(l.timeout),this.data[i].length===0&&delete this.data[i],this.order.splice(this.order.indexOf(i),1),l.value}getByKey(i){const l=this.data[i];return l?l[0].value:null}get(i){return this.has(i)?this.data[i.wrapped().key][0].value:null}remove(i,l){if(!this.has(i))return this;const d=i.wrapped().key,p=l===void 0?0:this.data[d].indexOf(l),y=this.data[d][p];return this.data[d].splice(p,1),y.timeout&&clearTimeout(y.timeout),this.data[d].length===0&&delete this.data[d],this.onRemove(y.value),this.order.splice(this.order.indexOf(d),1),this}setMaxSize(i){for(this.max=i;this.order.length>this.max;){const l=this._getAndRemoveByKey(this.order[0]);l&&this.onRemove(l)}return this}filter(i){const l=[];for(const d in this.data)for(const p of this.data[d])i(p.value)||l.push(p);for(const d of l)this.remove(d.value.tileID,d)}}class gf{constructor(i,l,d){this.func=i,this.mask=l,this.range=d}}gf.ReadOnly=!1,gf.ReadWrite=!0,gf.disabled=new gf(519,gf.ReadOnly,[0,1]);const RE=7680;class LE{constructor(i,l,d,p,y,x){this.test=i,this.ref=l,this.mask=d,this.fail=p,this.depthFail=y,this.pass=x}}LE.disabled=new LE({func:519,mask:0},0,0,RE,RE,RE);class qs{constructor(i,l,d){this.blendFunction=i,this.blendColor=l,this.mask=d}}qs.Replace=[1,0],qs.disabled=new qs(qs.Replace,Rn.transparent,[!1,!1,!1,!1]),qs.unblended=new qs(qs.Replace,Rn.transparent,[!0,!0,!0,!0]),qs.alphaBlended=new qs([1,771],Rn.transparent,[!0,!0,!0,!0]);const jE=1029,zE=2305;class ms{constructor(i,l,d){this.enable=i,this.mode=l,this.frontFace=d}}ms.disabled=new ms(!1,jE,zE),ms.backCCW=new ms(!0,jE,zE),ms.backCW=new ms(!0,jE,2304),ms.frontCW=new ms(!0,1028,2304),ms.frontCCW=new ms(!0,1028,zE);class Ad extends Vu{constructor(i,l,d){super(),this.id=i,this._onlySymbols=d,l.on("data",p=>{p.dataType==="source"&&p.sourceDataType==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&p.dataType==="source"&&p.sourceDataType==="content"&&(this.reload(),this.transform&&this.update(this.transform))}),l.on("error",()=>{this._sourceErrored=!0}),this._source=l,this._tiles={},this._cache=new I9(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._minTileCacheSize=l.minTileCacheSize,this._maxTileCacheSize=l.maxTileCacheSize,this._loadedParentTiles={},this._coveredTiles={},this._state=new P9,this._isRaster=this._source.type==="raster"||this._source.type==="raster-dem"||this._source.type==="custom"&&this._source._dataType==="raster"}onAdd(i){this.map=i,this._minTileCacheSize=this._minTileCacheSize===void 0&&i?i._minTileCacheSize:this._minTileCacheSize,this._maxTileCacheSize=this._maxTileCacheSize===void 0&&i?i._maxTileCacheSize:this._maxTileCacheSize}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(const i in this._tiles){const l=this._tiles[i];if(l.state!=="loaded"&&l.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const i=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,i&&this.reload(),this.transform&&this.update(this.transform)}_loadTile(i,l){return i.isSymbolTile=this._onlySymbols,this._source.loadTile(i,l)}_unloadTile(i){if(this._source.unloadTile)return this._source.unloadTile(i,()=>{})}_abortTile(i){if(this._source.abortTile)return this._source.abortTile(i,()=>{})}serialize(){return this._source.serialize()}prepare(i){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const l in this._tiles){const d=this._tiles[l];d.upload(i),d.prepare(this.map.style.imageManager)}}getIds(){return Re(this._tiles).map(i=>i.tileID).sort(aR).map(i=>i.key)}getRenderableIds(i){const l=[];for(const d in this._tiles)this._isIdRenderable(+d,i)&&l.push(this._tiles[d]);return i?l.sort((d,p)=>{const y=d.tileID,x=p.tileID,w=new ne(y.canonical.x,y.canonical.y)._rotate(this.transform.angle),P=new ne(x.canonical.x,x.canonical.y)._rotate(this.transform.angle);return y.overscaledZ-x.overscaledZ||P.y-w.y||P.x-w.x}).map(d=>d.tileID.key):l.map(d=>d.tileID).sort(aR).map(d=>d.key)}hasRenderableParent(i){const l=this.findLoadedParent(i,0);return!!l&&this._isIdRenderable(l.tileID.key)}_isIdRenderable(i,l){return this._tiles[i]&&this._tiles[i].hasData()&&!this._coveredTiles[i]&&(l||!this._tiles[i].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const i in this._tiles)this._tiles[i].state!=="errored"&&this._reloadTile(+i,"reloading")}}_reloadTile(i,l){const d=this._tiles[i];d&&(d.state!=="loading"&&(d.state=l),this._loadTile(d,this._tileLoaded.bind(this,d,i,l)))}_tileLoaded(i,l,d,p){if(p)if(i.state="errored",p.status!==404)this._source.fire(new Ja(p,{tile:i}));else if(this._source.type==="raster-dem"&&this.usedForTerrain&&this.map.painter.terrain){const y=this.map.painter.terrain;this.update(this.transform,y.getScaledDemTileSize(),!0),y.resetTileLookupCache(this.id)}else this.update(this.transform);else i.timeAdded=Ya.now(),d==="expired"&&(i.refreshedUponExpiration=!0),this._setTileReloadTimer(l,i),this._source.type==="raster-dem"&&i.dem&&this._backfillDEM(i),this._state.initializeTileState(i,this.map?this.map.painter:null),this._source.fire(new gl("data",{dataType:"source",tile:i,coord:i.tileID,sourceCacheId:this.id}))}_backfillDEM(i){const l=this.getRenderableIds();for(let p=0;p<l.length;p++){const y=l[p];if(i.neighboringTiles&&i.neighboringTiles[y]){const x=this.getTileByID(y);d(i,x),d(x,i)}}function d(p,y){if(!p.dem||p.dem.borderReady)return;p.needsHillshadePrepare=!0,p.needsDEMTextureUpload=!0;let x=y.tileID.canonical.x-p.tileID.canonical.x;const w=y.tileID.canonical.y-p.tileID.canonical.y,P=Math.pow(2,p.tileID.canonical.z),C=y.tileID.key;x===0&&w===0||Math.abs(w)>1||(Math.abs(x)>1&&(Math.abs(x+P)===1?x+=P:Math.abs(x-P)===1&&(x-=P)),y.dem&&p.dem&&(p.dem.backfillBorder(y.dem,x,w),p.neighboringTiles&&p.neighboringTiles[C]&&(p.neighboringTiles[C].backfilled=!0)))}}getTile(i){return this.getTileByID(i.key)}getTileByID(i){return this._tiles[i]}_retainLoadedChildren(i,l,d,p){for(const y in this._tiles){let x=this._tiles[y];if(p[y]||!x.hasData()||x.tileID.overscaledZ<=l||x.tileID.overscaledZ>d)continue;let w=x.tileID;for(;x&&x.tileID.overscaledZ>l+1;){const C=x.tileID.scaledTo(x.tileID.overscaledZ-1);x=this._tiles[C.key],x&&x.hasData()&&(w=C)}let P=w;for(;P.overscaledZ>l;)if(P=P.scaledTo(P.overscaledZ-1),i[P.key]){p[w.key]=w;break}}}findLoadedParent(i,l){if(i.key in this._loadedParentTiles){const d=this._loadedParentTiles[i.key];return d&&d.tileID.overscaledZ>=l?d:null}for(let d=i.overscaledZ-1;d>=l;d--){const p=i.scaledTo(d),y=this._getLoadedTile(p);if(y)return y}}_getLoadedTile(i){const l=this._tiles[i.key];return l&&l.hasData()?l:this._cache.getByKey(this._source.reparseOverscaled?i.wrapped().key:i.canonical.key)}updateCacheSize(i,l){l=l||this._source.tileSize;const d=Math.ceil(i.width/l)+1,p=Math.ceil(i.height/l)+1,y=Math.floor(d*p*5),x=typeof this._minTileCacheSize=="number"?Math.max(this._minTileCacheSize,y):y,w=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,x):x;this._cache.setMaxSize(w)}handleWrapJump(i){const l=Math.round((i-(this._prevLng===void 0?i:this._prevLng))/360);if(this._prevLng=i,l){const d={};for(const p in this._tiles){const y=this._tiles[p];y.tileID=y.tileID.unwrapTo(y.tileID.wrap+l),d[y.tileID.key]=y}this._tiles=d;for(const p in this._timers)clearTimeout(this._timers[p]),delete this._timers[p];for(const p in this._tiles)this._setTileReloadTimer(+p,this._tiles[p])}}update(i,l,d){if(this.transform=i,!this._sourceLoaded||this._paused||this.transform.freezeTileCoverage||this.usedForTerrain&&!d)return;let p;this.updateCacheSize(i,l),this.transform.projection.name!=="globe"&&this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?p=i.getVisibleUnwrappedCoordinates(this._source.tileID).map(w=>new Ji(w.canonical.z,w.wrap,w.canonical.z,w.canonical.x,w.canonical.y)):(p=i.coveringTiles({tileSize:l||this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!d,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain}),this._source.hasTile&&(p=p.filter(w=>this._source.hasTile(w)))):p=[];const y=this._updateRetainedTiles(p);if(sR(this._source.type)&&p.length!==0){const w={},P={},C=Object.keys(y);for(const $ of C){const G=y[$],X=this._tiles[$];if(!X||X.fadeEndTime&&X.fadeEndTime<=Ya.now())continue;const K=this.findLoadedParent(G,Math.max(G.overscaledZ-Ad.maxOverzooming,this._source.minzoom));K&&(this._addTile(K.tileID),w[K.tileID.key]=K.tileID),P[$]=G}const j=p[p.length-1].overscaledZ;for(const $ in this._tiles){const G=this._tiles[$];if(y[$]||!G.hasData())continue;let X=G.tileID;for(;X.overscaledZ>j;){X=X.scaledTo(X.overscaledZ-1);const K=this._tiles[X.key];if(K&&K.hasData()&&P[X.key]){y[$]=G.tileID;break}}}for(const $ in w)y[$]||(this._coveredTiles[$]=!0,y[$]=w[$])}for(const w in y)this._tiles[w].clearFadeHold();const x=function(w,P){const C=[];for(const j in w)j in P||C.push(j);return C}(this._tiles,y);for(const w of x){const P=this._tiles[w];P.hasSymbolBuckets&&!P.holdingForFade()?P.setHoldDuration(this.map._fadeDuration):P.hasSymbolBuckets&&!P.symbolFadeFinished()||this._removeTile(+w)}this._updateLoadedParentTileCache(),this._onlySymbols&&this._source.afterUpdate&&this._source.afterUpdate()}releaseSymbolFadeTiles(){for(const i in this._tiles)this._tiles[i].holdingForFade()&&this._removeTile(+i)}_updateRetainedTiles(i){const l={};if(i.length===0)return l;const d={},p=i.reduce((C,j)=>Math.min(C,j.overscaledZ),1/0),y=i[0].overscaledZ,x=Math.max(y-Ad.maxOverzooming,this._source.minzoom),w=Math.max(y+Ad.maxUnderzooming,this._source.minzoom),P={};for(const C of i){const j=this._addTile(C);l[C.key]=C,j.hasData()||p<this._source.maxzoom&&(P[C.key]=C)}this._retainLoadedChildren(P,p,w,l);for(const C of i){let j=this._tiles[C.key];if(j.hasData())continue;if(C.canonical.z>=this._source.maxzoom){const G=C.children(this._source.maxzoom)[0],X=this.getTile(G);if(X&&X.hasData()){l[G.key]=G;continue}}else{const G=C.children(this._source.maxzoom);if(l[G[0].key]&&l[G[1].key]&&l[G[2].key]&&l[G[3].key])continue}let $=j.wasRequested();for(let G=C.overscaledZ-1;G>=x;--G){const X=C.scaledTo(G);if(d[X.key]||(d[X.key]=!0,j=this.getTile(X),!j&&$&&(j=this._addTile(X)),j&&(l[X.key]=X,$=j.wasRequested(),j.hasData())))break}}return l}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const i in this._tiles){const l=[];let d,p=this._tiles[i].tileID;for(;p.overscaledZ>0;){if(p.key in this._loadedParentTiles){d=this._loadedParentTiles[p.key];break}l.push(p.key);const y=p.scaledTo(p.overscaledZ-1);if(d=this._getLoadedTile(y),d)break;p=y}for(const y of l)this._loadedParentTiles[y]=d}}_addTile(i){let l=this._tiles[i.key];if(l)return l;l=this._cache.getAndRemove(i),l&&(this._setTileReloadTimer(i.key,l),l.tileID=i,this._state.initializeTileState(l,this.map?this.map.painter:null),this._cacheTimers[i.key]&&(clearTimeout(this._cacheTimers[i.key]),delete this._cacheTimers[i.key],this._setTileReloadTimer(i.key,l)));const d=!!l;if(!d){const p=this.map?this.map.painter:null;l=new DE(i,this._source.tileSize*i.overscaleFactor(),this.transform.tileZoom,p,this._isRaster),this._loadTile(l,this._tileLoaded.bind(this,l,i.key,l.state))}return l?(l.uses++,this._tiles[i.key]=l,d||this._source.fire(new gl("dataloading",{tile:l,coord:l.tileID,dataType:"source"})),l):null}_setTileReloadTimer(i,l){i in this._timers&&(clearTimeout(this._timers[i]),delete this._timers[i]);const d=l.getExpiryTimeout();d&&(this._timers[i]=setTimeout(()=>{this._reloadTile(i,"expired"),delete this._timers[i]},d))}_removeTile(i){const l=this._tiles[i];l&&(l.uses--,delete this._tiles[i],this._timers[i]&&(clearTimeout(this._timers[i]),delete this._timers[i]),l.uses>0||(l.hasData()&&l.state!=="reloading"?this._cache.add(l.tileID,l,l.getExpiryTimeout()):(l.aborted=!0,this._abortTile(l),this._unloadTile(l))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const i in this._tiles)this._removeTile(+i);this._source._clear&&this._source._clear(),this._cache.reset(),this.map&&this.usedForTerrain&&this.map.painter.terrain&&this.map.painter.terrain.resetTileLookupCache(this.id)}tilesIn(i,l,d){const p=[],y=this.transform;if(!y)return p;const x=y.projection.name==="globe",w=Us(y.center.lng);for(const P in this._tiles){const C=this._tiles[P];if(d&&C.clearQueryDebugViz(),C.holdingForFade())continue;let j;if(x){const $=C.tileID.canonical;if($.z===0){const G=[Math.abs(Pe(w,...Fg($,-1))-w),Math.abs(Pe(w,...Fg($,1))-w)];j=[0,2*G.indexOf(Math.min(...G))-1]}else{const G=[Math.abs(Pe(w,...Fg($,-1))-w),Math.abs(Pe(w,...Fg($,0))-w),Math.abs(Pe(w,...Fg($,1))-w)];j=[G.indexOf(Math.min(...G))-1]}}else j=[0];for(const $ of j){const G=i.containsTile(C,y,l,$);G&&p.push(G)}}return p}getVisibleCoordinates(i){const l=this.getRenderableIds(i).map(d=>this._tiles[d].tileID);for(const d of l)d.projMatrix=this.transform.calculateProjMatrix(d.toUnwrapped());return l}hasTransition(){if(this._source.hasTransition())return!0;if(sR(this._source.type))for(const i in this._tiles){const l=this._tiles[i];if(l.fadeEndTime!==void 0&&l.fadeEndTime>=Ya.now())return!0}return!1}setFeatureState(i,l,d){this._state.updateState(i=i||"_geojsonTileLayer",l,d)}removeFeatureState(i,l,d){this._state.removeFeatureState(i=i||"_geojsonTileLayer",l,d)}getFeatureState(i,l){return this._state.getState(i=i||"_geojsonTileLayer",l)}setDependencies(i,l,d){const p=this._tiles[i];p&&p.setDependencies(l,d)}reloadTilesForDependencies(i,l){for(const d in this._tiles)this._tiles[d].hasDependency(i,l)&&this._reloadTile(+d,"reloading");this._cache.filter(d=>!d.hasDependency(i,l))}_preloadTiles(i,l){if(!this._sourceLoaded){const w=()=>{this._sourceLoaded&&(this._source.off("data",w),this._preloadTiles(i,l))};return void this._source.on("data",w)}const d=new Map,p=Array.isArray(i)?i:[i],y=this.map.painter.terrain,x=this.usedForTerrain&&y?y.getScaledDemTileSize():this._source.tileSize;for(const w of p){const P=w.coveringTiles({tileSize:x,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!this.usedForTerrain,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain});for(const C of P)d.set(C.key,C);this.usedForTerrain&&w.updateElevation(!1)}Ge(Array.from(d.values()),(w,P)=>{const C=new DE(w,this._source.tileSize*w.overscaleFactor(),this.transform.tileZoom,this.map.painter,this._isRaster);this._loadTile(C,j=>{this._source.type==="raster-dem"&&C.dem&&this._backfillDEM(C),P(j,C)})},l)}}function aR(a,i){const l=Math.abs(2*a.wrap)-+(a.wrap<0),d=Math.abs(2*i.wrap)-+(i.wrap<0);return a.overscaledZ-i.overscaledZ||d-l||i.canonical.y-a.canonical.y||i.canonical.x-a.canonical.x}function sR(a){return a==="raster"||a==="image"||a==="video"||a==="custom"}function Fg(a,i){const l=1<<a.z;return[a.x/l+i,(a.x+1)/l+i]}Ad.maxOverzooming=10,Ad.maxUnderzooming=3;class Fx{constructor(i,l,d){this._demTile=i,this._dem=this._demTile.dem,this._scale=l,this._offset=d}static create(i,l,d){const p=d||i.findDEMTileFor(l);if(!p||!p.dem)return;const y=p.dem,x=p.tileID,w=1<<l.canonical.z-x.canonical.z;return new Fx(p,p.tileSize/Jt/w,[(l.canonical.x/w-x.canonical.x)*y.dim,(l.canonical.y/w-x.canonical.y)*y.dim])}tileCoordToPixel(i,l){const d=l*this._scale+this._offset[1],p=Math.floor(i*this._scale+this._offset[0]),y=Math.floor(d);return new ne(p,y)}getElevationAt(i,l,d,p){const y=i*this._scale+this._offset[0],x=l*this._scale+this._offset[1],w=Math.floor(y),P=Math.floor(x),C=this._dem;return p=!!p,d?Cr(Cr(C.get(w,P,p),C.get(w,P+1,p),x-P),Cr(C.get(w+1,P,p),C.get(w+1,P+1,p),x-P),y-w):C.get(w,P,p)}getElevationAtPixel(i,l,d){return this._dem.get(i,l,!!d)}getMeterToDEM(i){return(1<<this._demTile.tileID.canonical.z)*hs(1,i)*this._dem.stride}}class lR{constructor(i,l){this.tileID=i,this.x=i.canonical.x,this.y=i.canonical.y,this.z=i.canonical.z,this.grid=new Sl(Jt,16,0),this.featureIndexArray=new pd,this.promoteId=l}insert(i,l,d,p,y,x=0){const w=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(d,p,y,x);const P=this.grid;for(let C=0;C<l.length;C++){const j=l[C],$=[1/0,1/0,-1/0,-1/0];for(let G=0;G<j.length;G++){const X=j[G];$[0]=Math.min($[0],X.x),$[1]=Math.min($[1],X.y),$[2]=Math.max($[2],X.x),$[3]=Math.max($[3],X.y)}$[0]<Jt&&$[1]<Jt&&$[2]>=0&&$[3]>=0&&P.insert(w,$[0],$[1],$[2],$[3])}}loadVTLayers(){if(!this.vtLayers){this.vtLayers=new yE(new Px(this.rawTileData)).layers,this.sourceLayerCoder=new HD(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"]),this.vtFeatures={};for(const i in this.vtLayers)this.vtFeatures[i]=[]}return this.vtLayers}query(i,l,d,p){this.loadVTLayers();const y=i.params||{},x=Gh(y.filter),w=i.tileResult,P=i.transform,C=w.bufferedTilespaceBounds,j=this.grid.query(C.min.x,C.min.y,C.max.x,C.max.y,(K,te,se,me)=>Dk(w.bufferedTilespaceGeometry,K,te,se,me));j.sort(O9);let $=null;P.elevation&&j.length>0&&($=Fx.create(P.elevation,this.tileID));const G={};let X;for(let K=0;K<j.length;K++){const te=j[K];if(te===X)continue;X=te;const se=this.featureIndexArray.get(te);let me=null;this.loadMatchingFeature(G,se,x,y.layers,y.availableImages,l,d,p,(Ae,ge,Te,Me=0)=>(me||(me=Il(Ae,this.tileID.canonical,i.tileTransform)),ge.queryIntersectsFeature(w,Ae,Te,me,this.z,i.transform,i.pixelPosMatrix,$,Me)))}return G}loadMatchingFeature(i,l,d,p,y,x,w,P,C){const{featureIndex:j,bucketIndex:$,sourceLayerIndex:G,layoutVertexArrayOffset:X}=l,K=this.bucketLayerIDs[$];if(p&&!function(Ae,ge){for(let Te=0;Te<Ae.length;Te++)if(ge.indexOf(Ae[Te])>=0)return!0;return!1}(p,K))return;const te=this.sourceLayerCoder.decode(G),se=this.vtLayers[te].feature(j);if(d.needGeometry){const Ae=wd(se,!0);if(!d.filter(new B(this.tileID.overscaledZ),Ae,this.tileID.canonical))return}else if(!d.filter(new B(this.tileID.overscaledZ),se))return;const me=this.getId(se,te);for(let Ae=0;Ae<K.length;Ae++){const ge=K[Ae];if(p&&p.indexOf(ge)<0)continue;const Te=x[ge];if(!Te)continue;let Me={};me!==void 0&&P&&(Me=P.getState(Te.sourceLayer||"_geojsonTileLayer",me));const Ce=at({},w[ge]);Ce.paint=cR(Ce.paint,Te.paint,se,Me,y),Ce.layout=cR(Ce.layout,Te.layout,se,Me,y);const Ye=!C||C(se,Te,Me,X);if(!Ye)continue;const Xe=new XD(se,this.z,this.x,this.y,me);Xe.layer=Ce;let ot=i[ge];ot===void 0&&(ot=i[ge]=[]),ot.push({featureIndex:j,feature:Xe,intersectionZ:Ye})}}lookupSymbolFeatures(i,l,d,p,y,x,w,P){const C={};this.loadVTLayers();const j=Gh(y);for(const $ of i)this.loadMatchingFeature(C,{bucketIndex:d,sourceLayerIndex:p,featureIndex:$,layoutVertexArrayOffset:0},j,x,w,P,l);return C}loadFeature(i){const{featureIndex:l,sourceLayerIndex:d}=i;this.loadVTLayers();const p=this.sourceLayerCoder.decode(d),y=this.vtFeatures[p];if(y[l])return y[l];const x=this.vtLayers[p].feature(l);return y[l]=x,x}hasLayer(i){for(const l of this.bucketLayerIDs)for(const d of l)if(i===d)return!0;return!1}getId(i,l){let d=i.id;if(this.promoteId){const p=typeof this.promoteId=="string"?this.promoteId:this.promoteId[l];p!=null&&(d=i.properties[p]),typeof d=="boolean"&&(d=Number(d))}return d}}function cR(a,i,l,d,p){return Be(a,(y,x)=>{const w=i instanceof pe?i.get(x):null;return w&&w.evaluate?w.evaluate(l,d,p):w})}function O9(a,i){return i-a}$t(lR,"FeatureIndex",{omit:["rawTileData","sourceLayerCoder"]});class uR{constructor(i,l){this.width=i,this.height=l,this.nextRow=0,this.image=new Ol({width:i,height:l}),this.positions={},this.uploaded=!1}getDash(i,l){const d=this.getKey(i,l);return this.positions[d]}trim(){const i=this.width,l=this.height=gt(this.nextRow);this.image.resize({width:i,height:l})}getKey(i,l){return i.join(",")+l}getDashRanges(i,l,d){const p=[];let y=i.length%2==1?-i[i.length-1]*d:0,x=i[0]*d,w=!0;p.push({left:y,right:x,isDash:w,zeroLength:i[0]===0});let P=i[0];for(let C=1;C<i.length;C++){w=!w;const j=i[C];y=P*d,P+=j,x=P*d,p.push({left:y,right:x,isDash:w,zeroLength:j===0})}return p}addRoundDash(i,l,d){const p=l/2;for(let y=-d;y<=d;y++){const x=this.width*(this.nextRow+d+y);let w=0,P=i[w];for(let C=0;C<this.width;C++){C/P.right>1&&(P=i[++w]);const j=Math.abs(C-P.left),$=Math.abs(C-P.right),G=Math.min(j,$);let X;const K=y/d*(p+1);if(P.isDash){const te=p-Math.abs(K);X=Math.sqrt(G*G+te*te)}else X=p-Math.sqrt(G*G+K*K);this.image.data[x+C]=Math.max(0,Math.min(255,X+128))}}}addRegularDash(i,l){for(let P=i.length-1;P>=0;--P){const C=i[P],j=i[P+1];C.zeroLength?i.splice(P,1):j&&j.isDash===C.isDash&&(j.left=C.left,i.splice(P,1))}const d=i[0],p=i[i.length-1];d.isDash===p.isDash&&(d.left=p.left-this.width,p.right=d.right+this.width);const y=this.width*this.nextRow;let x=0,w=i[x];for(let P=0;P<this.width;P++){P/w.right>1&&(w=i[++x]);const C=Math.abs(P-w.left),j=Math.abs(P-w.right),$=Math.min(C,j);this.image.data[y+P]=Math.max(0,Math.min(255,(w.isDash?$:-$)+l+128))}}addDash(i,l){const d=this.getKey(i,l);if(this.positions[d])return this.positions[d];const p=l==="round",y=p?7:0,x=2*y+1;if(this.nextRow+x>this.height)return Pt("LineAtlas out of space"),null;i.length===0&&i.push(1);let w=0;for(let j=0;j<i.length;j++)i[j]<0&&(Pt("Negative value is found in line dasharray, replacing values with 0"),i[j]=0),w+=i[j];if(w!==0){const j=this.width/w,$=this.getDashRanges(i,this.width,j);p?this.addRoundDash($,j,y):this.addRegularDash($,l==="square"?.5*j:0)}const P=this.nextRow+y;this.nextRow+=x;const C={tl:[P,y],br:[w,0]};return this.positions[d]=C,C}}$t(uR,"LineAtlas");const dR=1*ps;class hR{constructor(i){const l={},d=[];for(const w in i){const P=i[w],C=l[w]={};for(const j in P.glyphs){const $=P.glyphs[+j];if(!$||$.bitmap.width===0||$.bitmap.height===0)continue;const G=$.metrics.localGlyph?dR:1,X={x:0,y:0,w:$.bitmap.width+2*G,h:$.bitmap.height+2*G};d.push(X),C[j]=X}}const{w:p,h:y}=bE(d),x=new Ol({width:p||1,height:y||1});for(const w in i){const P=i[w];for(const C in P.glyphs){const j=P.glyphs[+C];if(!j||j.bitmap.width===0||j.bitmap.height===0)continue;const $=l[w][C],G=j.metrics.localGlyph?dR:1;Ol.copy(j.bitmap,x,{x:0,y:0},{x:$.x+G,y:$.y+G},j.bitmap)}}this.image=x,this.positions=l}}$t(hR,"GlyphAtlas");class k9{constructor(i){this.tileID=new Ji(i.tileID.overscaledZ,i.tileID.wrap,i.tileID.canonical.z,i.tileID.canonical.x,i.tileID.canonical.y),this.tileZoom=i.tileZoom,this.uid=i.uid,this.zoom=i.zoom,this.canonical=i.tileID.canonical,this.pixelRatio=i.pixelRatio,this.tileSize=i.tileSize,this.source=i.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=i.showCollisionBoxes,this.collectResourceTiming=!!i.collectResourceTiming,this.returnDependencies=!!i.returnDependencies,this.promoteId=i.promoteId,this.enableTerrain=!!i.enableTerrain,this.isSymbolTile=i.isSymbolTile,this.tileTransform=Td(i.tileID.canonical,i.projection),this.projection=i.projection}parse(i,l,d,p,y){this.status="parsing",this.data=i,this.collisionBoxArray=new Xr;const x=new HD(Object.keys(i.layers).sort()),w=new lR(this.tileID,this.promoteId);w.bucketLayerIDs=[];const P={},C=new uR(256,256),j={featureIndex:w,iconDependencies:{},patternDependencies:{},glyphDependencies:{},lineAtlas:C,availableImages:d},$=l.familiesBySource[this.source];for(const Me in $){const Ce=i.layers[Me];if(!Ce)continue;let Ye=!1,Xe=!1;for(const Qe of $[Me])Qe[0].type==="symbol"?Ye=!0:Xe=!0;if(this.isSymbolTile===!0&&!Ye||this.isSymbolTile===!1&&!Xe)continue;Ce.version===1&&Pt(`Vector tile source "${this.source}" layer "${Me}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const ot=x.encode(Me),bt=[];for(let Qe=0;Qe<Ce.length;Qe++){const ut=Ce.feature(Qe),dt=w.getId(ut,Me);bt.push({feature:ut,id:dt,index:Qe,sourceLayerIndex:ot})}for(const Qe of $[Me]){const ut=Qe[0];this.isSymbolTile!==void 0&&ut.type==="symbol"!==this.isSymbolTile||ut.minzoom&&this.zoom<Math.floor(ut.minzoom)||ut.maxzoom&&this.zoom>=ut.maxzoom||ut.visibility!=="none"&&(NE(Qe,this.zoom,d),(P[ut.id]=ut.createBucket({index:w.bucketLayerIDs.length,layers:Qe,zoom:this.zoom,canonical:this.canonical,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:ot,sourceID:this.source,enableTerrain:this.enableTerrain,projection:this.projection.spec,availableImages:d})).populate(bt,j,this.tileID.canonical,this.tileTransform),w.bucketLayerIDs.push(Qe.map(dt=>dt.id)))}}let G,X,K,te;C.trim();const se={type:"maybePrepare",isSymbolTile:this.isSymbolTile,zoom:this.zoom},me=()=>{if(G)return y(G);if(X&&K&&te){const Me=new hR(X),Ce=new _D(K,te);for(const Ye in P){const Xe=P[Ye];Xe instanceof zc?(NE(Xe.layers,this.zoom,d),i9(Xe,X,Me.positions,K,Ce.iconPositions,this.showCollisionBoxes,d,this.tileID.canonical,this.tileZoom,this.projection)):Xe.hasPattern&&(Xe instanceof Ex||Xe instanceof _x||Xe instanceof Mg)&&(NE(Xe.layers,this.zoom,d),Xe.addFeatures(j,this.tileID.canonical,Ce.patternPositions,d,this.tileTransform))}this.status="done",y(null,{buckets:Re(P).filter(Ye=>!Ye.isEmpty()),featureIndex:w,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Me.image,lineAtlas:C,imageAtlas:Ce,glyphMap:this.returnDependencies?X:null,iconMap:this.returnDependencies?K:null,glyphPositions:this.returnDependencies?Me.positions:null})}},Ae=Be(j.glyphDependencies,Me=>Object.keys(Me).map(Number));Object.keys(Ae).length?p.send("getGlyphs",{uid:this.uid,stacks:Ae},(Me,Ce)=>{G||(G=Me,X=Ce,me())},void 0,!1,se):X={};const ge=Object.keys(j.iconDependencies);ge.length?p.send("getImages",{icons:ge,source:this.source,tileID:this.tileID,type:"icons"},(Me,Ce)=>{G||(G=Me,K=Ce,me())},void 0,!1,se):K={};const Te=Object.keys(j.patternDependencies);Te.length?p.send("getImages",{icons:Te,source:this.source,tileID:this.tileID,type:"patterns"},(Me,Ce)=>{G||(G=Me,te=Ce,me())},void 0,!1,se):te={},me()}}function NE(a,i,l){const d=new B(i);for(const p of a)p.recalculate(d,l)}class fR{constructor(i){this.entries={},this.scheduler=i}request(i,l,d,p){const y=this.entries[i]=this.entries[i]||{callbacks:[]};if(y.result){const[x,w]=y.result;return this.scheduler?this.scheduler.add(()=>{p(x,w)},l):p(x,w),()=>{}}return y.callbacks.push(p),y.cancel||(y.cancel=d((x,w)=>{y.result=[x,w];for(const P of y.callbacks)this.scheduler?this.scheduler.add(()=>{P(x,w)},l):P(x,w);setTimeout(()=>delete this.entries[i],3e3)})),()=>{y.result||(y.callbacks=y.callbacks.filter(x=>x!==p),y.callbacks.length||(y.cancel(),delete this.entries[i]))}}}function pR(a,i,l){const d=JSON.stringify(a.request);return a.data&&(this.deduped.entries[d]={result:[null,a.data]}),this.deduped.request(d,{type:"parseTile",isSymbolTile:a.isSymbolTile,zoom:a.tileZoom},p=>{const y=cr(a.request,(x,w,P,C)=>{x?p(x):w&&p(null,{vectorTile:l?void 0:new yE(new Px(w)),rawData:w,cacheControl:P,expires:C})});return()=>{y.cancel(),p()}},i)}const mR=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class BE{static from(i){if(!(i instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[l,d]=new Uint8Array(i,0,2);if(l!==219)throw new Error("Data does not appear to be in a KDBush format.");const p=d>>4;if(p!==1)throw new Error(`Got v${p} data when expected v1.`);const y=mR[15&d];if(!y)throw new Error("Unrecognized array type.");const[x]=new Uint16Array(i,2,1),[w]=new Uint32Array(i,4,1);return new BE(w,x,y,i)}constructor(i,l=64,d=Float64Array,p){if(isNaN(i)||i<0)throw new Error(`Unpexpected numItems value: ${i}.`);this.numItems=+i,this.nodeSize=Math.min(Math.max(+l,2),65535),this.ArrayType=d,this.IndexArrayType=i<65536?Uint16Array:Uint32Array;const y=mR.indexOf(this.ArrayType),x=2*i*this.ArrayType.BYTES_PER_ELEMENT,w=i*this.IndexArrayType.BYTES_PER_ELEMENT,P=(8-w%8)%8;if(y<0)throw new Error(`Unexpected typed array class: ${d}.`);p&&p instanceof ArrayBuffer?(this.data=p,this.ids=new this.IndexArrayType(this.data,8,i),this.coords=new this.ArrayType(this.data,8+w+P,2*i),this._pos=2*i,this._finished=!0):(this.data=new ArrayBuffer(8+x+w+P),this.ids=new this.IndexArrayType(this.data,8,i),this.coords=new this.ArrayType(this.data,8+w+P,2*i),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+y]),new Uint16Array(this.data,2,1)[0]=l,new Uint32Array(this.data,4,1)[0]=i)}add(i,l){const d=this._pos>>1;return this.ids[d]=d,this.coords[this._pos++]=i,this.coords[this._pos++]=l,d}finish(){const i=this._pos>>1;if(i!==this.numItems)throw new Error(`Added ${i} items when expected ${this.numItems}.`);return $E(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(i,l,d,p){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:y,coords:x,nodeSize:w}=this,P=[0,y.length-1,0],C=[];for(;P.length;){const j=P.pop()||0,$=P.pop()||0,G=P.pop()||0;if($-G<=w){for(let se=G;se<=$;se++){const me=x[2*se],Ae=x[2*se+1];me>=i&&me<=d&&Ae>=l&&Ae<=p&&C.push(y[se])}continue}const X=G+$>>1,K=x[2*X],te=x[2*X+1];K>=i&&K<=d&&te>=l&&te<=p&&C.push(y[X]),(j===0?i<=K:l<=te)&&(P.push(G),P.push(X-1),P.push(1-j)),(j===0?d>=K:p>=te)&&(P.push(X+1),P.push($),P.push(1-j))}return C}within(i,l,d){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:p,coords:y,nodeSize:x}=this,w=[0,p.length-1,0],P=[],C=d*d;for(;w.length;){const j=w.pop()||0,$=w.pop()||0,G=w.pop()||0;if($-G<=x){for(let se=G;se<=$;se++)yR(y[2*se],y[2*se+1],i,l)<=C&&P.push(p[se]);continue}const X=G+$>>1,K=y[2*X],te=y[2*X+1];yR(K,te,i,l)<=C&&P.push(p[X]),(j===0?i-d<=K:l-d<=te)&&(w.push(G),w.push(X-1),w.push(1-j)),(j===0?i+d>=K:l+d>=te)&&(w.push(X+1),w.push($),w.push(1-j))}return P}}function $E(a,i,l,d,p,y){if(p-d<=l)return;const x=d+p>>1;gR(a,i,x,d,p,y),$E(a,i,l,d,x-1,1-y),$E(a,i,l,x+1,p,1-y)}function gR(a,i,l,d,p,y){for(;p>d;){if(p-d>600){const C=p-d+1,j=l-d+1,$=Math.log(C),G=.5*Math.exp(2*$/3),X=.5*Math.sqrt($*G*(C-G)/C)*(j-C/2<0?-1:1);gR(a,i,l,Math.max(d,Math.floor(l-j*G/C+X)),Math.min(p,Math.floor(l+(C-j)*G/C+X)),y)}const x=i[2*l+y];let w=d,P=p;for(Ug(a,i,d,l),i[2*p+y]>x&&Ug(a,i,d,p);w<P;){for(Ug(a,i,w,P),w++,P--;i[2*w+y]<x;)w++;for(;i[2*P+y]>x;)P--}i[2*d+y]===x?Ug(a,i,d,P):(P++,Ug(a,i,P,p)),P<=l&&(d=P+1),l<=P&&(p=P-1)}}function Ug(a,i,l,d){FE(a,l,d),FE(i,2*l,2*d),FE(i,2*l+1,2*d+1)}function FE(a,i,l){const d=a[i];a[i]=a[l],a[l]=d}function yR(a,i,l,d){const p=a-l,y=i-d;return p*p+y*y}o.ARRAY_TYPE=Io,o.AUTH_ERR_MSG=Ie,o.Aabb=Yi,o.Actor=class{constructor(a,i,l){this.target=a,this.parent=i,this.mapId=l,this.callbacks={},this.cancelCallbacks={},ft(["receive"],this),this.target.addEventListener("message",this.receive,!1),this.globalScope=Yt()?a:_,this.scheduler=new T9}send(a,i,l,d,p=!1,y){const x=Math.round(1e18*Math.random()).toString(36).substring(0,10);l&&(l.metadata=y,this.callbacks[x]=l);const w=An(this.globalScope)?void 0:[];return this.target.postMessage({id:x,type:a,hasCallback:!!l,targetMapId:d,mustQueue:p,sourceMapId:this.mapId,data:Mc(i,w)},w),{cancel:()=>{l&&delete this.callbacks[x],this.target.postMessage({id:x,type:"<cancel>",targetMapId:d,sourceMapId:this.mapId})}}}receive(a){const i=a.data,l=i.id;if(l&&(!i.targetMapId||this.mapId===i.targetMapId))if(i.type==="<cancel>"){const d=this.cancelCallbacks[l];delete this.cancelCallbacks[l],d&&d.cancel()}else if(i.mustQueue||Yt()){const d=this.callbacks[l];this.cancelCallbacks[l]=this.scheduler.add(()=>this.processTask(l,i),d&&d.metadata||{type:"message"})}else this.processTask(l,i)}processTask(a,i){if(i.type==="<response>"){const l=this.callbacks[a];delete this.callbacks[a],l&&(i.error?l(El(i.error)):l(null,El(i.data)))}else{const l=An(this.globalScope)?void 0:[],d=i.hasCallback?(y,x)=>{delete this.cancelCallbacks[a],this.target.postMessage({id:a,type:"<response>",sourceMapId:this.mapId,error:y?Mc(y):null,data:Mc(x,l)},l)}:y=>{},p=El(i.data);if(this.parent[i.type])this.parent[i.type](i.sourceMapId,p,d);else if(this.parent.getWorkerSource){const y=i.type.split(".");this.parent.getWorkerSource(i.sourceMapId,y[0],p.source)[y[1]](p,d)}else d(new Error(`Could not find function ${i.type}`))}}remove(){this.scheduler.remove(),this.target.removeEventListener("message",this.receive,!1)}},o.CanonicalTileID=Sx,o.Color=Rn,o.ColorMode=qs,o.CullFaceMode=ms,o.DEMData=$x,o.DataConstantProperty=ee,o.DedupedRequest=fR,o.DepthMode=gf,o.EXTENT=Jt,o.Elevation=class{isDataAvailableAtPoint(a){const i=this._source();if(this.isUsingMockSource()||!i||a.y<0||a.y>1)return!1;const l=i.getSource().maxzoom,d=1<<l,p=Math.floor(a.x),y=Math.floor((a.x-p)*d),x=Math.floor(a.y*d),w=this.findDEMTileFor(new Ji(l,p,l,y,x));return!(!w||!w.dem)}getAtPointOrZero(a,i=0){return this.getAtPoint(a,i)||0}getAtPoint(a,i,l=!0){if(this.isUsingMockSource())return null;i==null&&(i=null);const d=this._source();if(!d||a.y<0||a.y>1)return i;const p=d.getSource().maxzoom,y=1<<p,x=Math.floor(a.x),w=a.x-x,P=new Ji(p,x,p,Math.floor(w*y),Math.floor(a.y*y)),C=this.findDEMTileFor(P);if(!C||!C.dem)return i;const j=C.dem,$=1<<C.tileID.canonical.z,G=(w*$-C.tileID.canonical.x)*j.dim,X=(a.y*$-C.tileID.canonical.y)*j.dim,K=Math.floor(G),te=Math.floor(X);return(l?this.exaggeration():1)*Cr(Cr(j.get(K,te),j.get(K,te+1),X-te),Cr(j.get(K+1,te),j.get(K+1,te+1),X-te),G-K)}getAtTileOffset(a,i,l){const d=1<<a.canonical.z;return this.getAtPointOrZero(new tf(a.wrap+(a.canonical.x+i/Jt)/d,(a.canonical.y+l/Jt)/d))}getAtTileOffsetFunc(a,i,l,d){return p=>{const y=this.getAtTileOffset(a,p.x,p.y),x=d.upVector(a.canonical,p.x,p.y);return Zo(x,x,y*d.upVectorScale(a.canonical,i,l).metersToTile),x}}getForTilePoints(a,i,l,d){if(this.isUsingMockSource())return!1;const p=Fx.create(this,a,d);return!!p&&(i.forEach(y=>{y[2]=this.exaggeration()*p.getElevationAt(y[0],y[1],l)}),!0)}getMinMaxForTile(a){if(this.isUsingMockSource())return null;const i=this.findDEMTileFor(a);if(!i||!i.dem)return null;const l=i.dem.tree,d=i.tileID,p=1<<a.canonical.z-d.canonical.z;let y=a.canonical.x/p-d.canonical.x,x=a.canonical.y/p-d.canonical.y,w=0;for(let P=0;P<a.canonical.z-d.canonical.z&&!l.leaves[w];P++){y*=2,x*=2;const C=2*Math.floor(x)+Math.floor(y);w=l.childOffsets[w]+C,y%=1,x%=1}return{min:this.exaggeration()*l.minimums[w],max:this.exaggeration()*l.maximums[w]}}getMinElevationBelowMSL(){throw new Error("Pure virtual method called.")}raycast(a,i,l){throw new Error("Pure virtual method called.")}pointCoordinate(a){throw new Error("Pure virtual method called.")}_source(){throw new Error("Pure virtual method called.")}isUsingMockSource(){throw new Error("Pure virtual method called.")}exaggeration(){throw new Error("Pure virtual method called.")}findDEMTileFor(a){throw new Error("Pure virtual method called.")}get visibleDemTiles(){throw new Error("Getter must be implemented in subclass.")}},o.ErrorEvent=Ja,o.EvaluationParameters=B,o.Event=gl,o.Evented=Vu,o.FillExtrusionBucket=Mg,o.Frustum=XS,o.FrustumCorners=HS,o.GLOBE_RADIUS=$s,o.GLOBE_SCALE_MATCH_LATITUDE=45,o.GLOBE_ZOOM_THRESHOLD_MAX=gk,o.GLOBE_ZOOM_THRESHOLD_MIN=ZS,o.GlobeSharedBuffers=class{constructor(a){this._createGrid(a),this._createPoles(a)}destroy(){this._poleIndexBuffer.destroy(),this._gridBuffer.destroy(),this._gridIndexBuffer.destroy(),this._poleNorthVertexBuffer.destroy(),this._poleSouthVertexBuffer.destroy();for(const a of this._poleSegments)a.destroy();for(const a of this._gridSegments)a.withSkirts.destroy(),a.withoutSkirts.destroy();if(this._wireframeIndexBuffer){this._wireframeIndexBuffer.destroy();for(const a of this._wireframeSegments)a.destroy()}}_fillGridMeshWithLods(a,i){const l=new xt,d=new Gt,p=[],y=a+1+2,x=i[0]+1,w=i[0]+1+(1+i.length),P=(C,j,$)=>{let G=C===y-1?C-2:C===0?C:C-1;return G+=$?24575:0,[G,j]};for(let C=0;C<y;++C)l.emplaceBack(...P(C,0,!0));for(let C=0;C<x;++C)for(let j=0;j<y;++j)l.emplaceBack(...P(j,C,(j===0||j===y-1)&&!0));for(let C=0;C<i.length;++C){const j=i[C];for(let $=0;$<y;++$)l.emplaceBack(...P($,j,!0))}for(let C=0;C<i.length;++C){const j=d.length,$=i[C]+1+2,G=new Gt;for(let te=0;te<$-1;te++){const se=te===$-2,me=se?y*(w-i.length+C-te):y;for(let Ae=0;Ae<y-1;Ae++){const ge=te*y+Ae;te===0||se||Ae===0||Ae===y-2?(G.emplaceBack(ge+1,ge,ge+me),G.emplaceBack(ge+me,ge+me+1,ge+1)):(d.emplaceBack(ge+1,ge,ge+me),d.emplaceBack(ge+me,ge+me+1,ge+1))}}const X=Fn.simpleSegment(0,j,l.length,d.length-j);for(let te=0;te<G.uint16.length;te+=3)d.emplaceBack(G.uint16[te],G.uint16[te+1],G.uint16[te+2]);const K=Fn.simpleSegment(0,j,l.length,d.length-j);p.push({withoutSkirts:X,withSkirts:K})}return{vertices:l,indices:d,segments:p}}_createGrid(a){const i=this._fillGridMeshWithLods(xd,_g);this._gridSegments=i.segments,this._gridBuffer=a.createVertexBuffer(i.vertices,vg.members),this._gridIndexBuffer=a.createIndexBuffer(i.indices,!0)}_createPoles(a){const i=new Gt;for(let p=0;p<=xd;p++)i.emplaceBack(0,p+1,p+2);this._poleIndexBuffer=a.createIndexBuffer(i,!0);const l=new Hr,d=new Hr;this._poleSegments=[];for(let p=0,y=0;p<ZS;p++){const x=360/(1<<p);l.emplaceBack(0,-$s,0,.5,0),d.emplaceBack(0,-$s,0,.5,1);for(let w=0;w<=xd;w++){const P=w/xd,C=Cr(0,x,P),[j,$,G]=Jh(Tq,Aq,C,$s);l.emplaceBack(j,$,G,P,0),d.emplaceBack(j,$,G,P,1)}this._poleSegments.push(Fn.simpleSegment(y,0,66,64)),y+=66}this._poleNorthVertexBuffer=a.createVertexBuffer(l,pk,!1),this._poleSouthVertexBuffer=a.createVertexBuffer(d,pk,!1)}getGridBuffers(a,i){return[this._gridBuffer,this._gridIndexBuffer,i?this._gridSegments[a].withSkirts:this._gridSegments[a].withoutSkirts]}getPoleBuffers(a){return[this._poleNorthVertexBuffer,this._poleSouthVertexBuffer,this._poleIndexBuffer,this._poleSegments[a]]}getWirefameBuffers(a,i){if(!this._wireframeSegments){const l=new di,d=xd,p=d+1+2,y=1;this._wireframeSegments=[];for(let x=0,w=0;x<_g.length;x++){const P=_g[x];for(let j=y;j<P+y;j++)for(let $=y;$<d+y;$++){const G=j*p+$;l.emplaceBack(G,G+1),l.emplaceBack(G,G+p),l.emplaceBack(G,G+p+1)}const C=P*d*3;this._wireframeSegments.push(Fn.simpleSegment(0,w,(P+1)*p,C)),w+=C}this._wireframeIndexBuffer=a.createIndexBuffer(l)}return[this._gridBuffer,this._wireframeIndexBuffer,this._wireframeSegments[i]]}},o.GlyphManager=df,o.ImagePosition=wE,o.KDBush=BE,o.LivePerformanceUtils=mS,o.LngLat=Zr,o.LngLatBounds=Dc,o.LocalGlyphMode=TE,o.MAX_MERCATOR_LATITUDE=Oi,o.MercatorCoordinate=tf,o.ONE_EM=vi,o.OverscaledTileID=Ji,o.PerformanceMarkers=hc,o.Point=ne,o.Properties=_e,o.RGBAImage=Oo,o.Ray=qS,o.RequestManager=class{constructor(a,i,l){this._transformRequestFn=a,this._customAccessToken=i,this._silenceAuthErrors=!!l,this._createSkuToken()}_createSkuToken(){const a=function(){let i="";for(let l=0;l<10;l++)i+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",F,i].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=a.token,this._skuTokenExpiresAt=a.tokenExpiresAt}_isSkuTokenExpired(){return Date.now()>this._skuTokenExpiresAt}transformRequest(a,i){return this._transformRequestFn&&this._transformRequestFn(a,i)||{url:a}}normalizeStyleURL(a,i){if(!Ne(a))return a;const l=kt(a);return l.path=`/styles/v1${l.path}`,this._makeAPIURL(l,this._customAccessToken||i)}normalizeGlyphsURL(a,i){if(!Ne(a))return a;const l=kt(a);return l.path=`/fonts/v1${l.path}`,this._makeAPIURL(l,this._customAccessToken||i)}normalizeSourceURL(a,i,l,d){if(!Ne(a))return a;const p=kt(a);return p.path=`/v4/${p.authority}.json`,p.params.push("secure"),l&&p.params.push(`language=${l}`),d&&p.params.push(`worldview=${d}`),this._makeAPIURL(p,this._customAccessToken||i)}normalizeSpriteURL(a,i,l,d){const p=kt(a);return Ne(a)?(p.path=`/styles/v1${p.path}/sprite${i}${l}`,this._makeAPIURL(p,this._customAccessToken||d)):(p.path+=`${i}${l}`,Tt(p))}normalizeTileURL(a,i,l){if(this._isSkuTokenExpired()&&this._createSkuToken(),a&&!Ne(a))return a;const d=kt(a);d.path=d.path.replace(/(\.(png|jpg)\d*)(?=$)/,`${i||l&&d.authority!=="raster"&&l===512?"@2x":""}${I.supported?".webp":"$1"}`),d.authority==="raster"?d.path=`/${A.RASTER_URL_PREFIX}${d.path}`:(d.path=d.path.replace(/^.+\/v4\//,"/"),d.path=`/${A.TILE_URL_VERSION}${d.path}`);const p=this._customAccessToken||function(y){for(const x of y){const w=x.match(/^access_token=(.*)$/);if(w)return w[1]}return null}(d.params)||A.ACCESS_TOKEN;return A.REQUIRE_ACCESS_TOKEN&&p&&this._skuToken&&d.params.push(`sku=${this._skuToken}`),this._makeAPIURL(d,p)}canonicalizeTileURL(a,i){const l=kt(a);if(!l.path.match(/^(\/v4\/|\/raster\/v1\/)/)||!l.path.match(/\.[\w]+$/))return a;let d="mapbox://";l.path.match(/^\/raster\/v1\//)?d+=`raster/${l.path.replace(`/${A.RASTER_URL_PREFIX}/`,"")}`:d+=`tiles/${l.path.replace(`/${A.TILE_URL_VERSION}/`,"")}`;let p=l.params;return i&&(p=p.filter(y=>!y.match(/^access_token=/))),p.length&&(d+=`?${p.join("&")}`),d}canonicalizeTileset(a,i){const l=!!i&&Ne(i),d=[];for(const p of a.tiles||[])qe(p)?d.push(this.canonicalizeTileURL(p,l)):d.push(p);return d}_makeAPIURL(a,i){const l="See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes",d=kt(A.API_URL);if(a.protocol=d.protocol,a.authority=d.authority,a.protocol==="http"){const p=a.params.indexOf("secure");p>=0&&a.params.splice(p,1)}if(d.path!=="/"&&(a.path=`${d.path}${a.path}`),!A.REQUIRE_ACCESS_TOKEN)return Tt(a);if(i=i||A.ACCESS_TOKEN,!this._silenceAuthErrors){if(!i)throw new Error(`An API access token is required to use Mapbox GL. ${l}`);if(i[0]==="s")throw new Error(`Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). ${l}`)}return a.params=a.params.filter(p=>p.indexOf("access_token")===-1),a.params.push(`access_token=${i||""}`),Tt(a)}},o.ResourceType=So,o.SegmentVector=Fn,o.SourceCache=Ad,o.StencilMode=LE,o.StructArrayLayout1ui2=Mo,o.StructArrayLayout2f1f2i16=Qt,o.StructArrayLayout2i4=xt,o.StructArrayLayout2ui4=di,o.StructArrayLayout3f12=yr,o.StructArrayLayout3ui6=Gt,o.StructArrayLayout4i8=ct,o.StructArrayLayout5f20=Hr,o.Texture=$g,o.Tile=DE,o.Transitionable=J,o.Uniform1f=ax,o.Uniform1i=class extends Pl{constructor(a){super(a),this.current=0}set(a,i,l){this.fetchUniformLocation(a,i)&&this.current!==l&&(this.current=l,this.gl.uniform1i(this.location,l))}},o.Uniform2f=class extends Pl{constructor(a){super(a),this.current=[0,0]}set(a,i,l){this.fetchUniformLocation(a,i)&&(l[0]===this.current[0]&&l[1]===this.current[1]||(this.current=l,this.gl.uniform2f(this.location,l[0],l[1])))}},o.Uniform3f=class extends Pl{constructor(a){super(a),this.current=[0,0,0]}set(a,i,l){this.fetchUniformLocation(a,i)&&(l[0]===this.current[0]&&l[1]===this.current[1]&&l[2]===this.current[2]||(this.current=l,this.gl.uniform3f(this.location,l[0],l[1],l[2])))}},o.Uniform4f=YO,o.UniformColor=JO,o.UniformMatrix2f=class extends Pl{constructor(a){super(a),this.current=cq}set(a,i,l){if(this.fetchUniformLocation(a,i)){for(let d=0;d<4;d++)if(l[d]!==this.current[d]){this.current=l,this.gl.uniformMatrix2fv(this.location,!1,l);break}}}},o.UniformMatrix3f=class extends Pl{constructor(a){super(a),this.current=lq}set(a,i,l){if(this.fetchUniformLocation(a,i)){for(let d=0;d<9;d++)if(l[d]!==this.current[d]){this.current=l,this.gl.uniformMatrix3fv(this.location,!1,l);break}}}},o.UniformMatrix4f=class extends Pl{constructor(a){super(a),this.current=sq}set(a,i,l){if(this.fetchUniformLocation(a,i)){if(l[12]!==this.current[12]||l[0]!==this.current[0])return this.current=l,void this.gl.uniformMatrix4fv(this.location,!1,l);for(let d=1;d<16;d++)if(l[d]!==this.current[d]){this.current=l,this.gl.uniformMatrix4fv(this.location,!1,l);break}}}},o.UnwrappedTileID=iD,o.ValidationError=Bt,o.VectorTileFeature=bx,o.VectorTileWorkerSource=class extends Vu{constructor(a,i,l,d,p){super(),this.actor=a,this.layerIndex=i,this.availableImages=l,this.loadVectorData=p||pR,this.loading={},this.loaded={},this.deduped=new fR(a.scheduler),this.isSpriteLoaded=d,this.scheduler=a.scheduler}loadTile(a,i){const l=a.uid,d=a&&a.request,p=d&&d.collectResourceTiming,y=this.loading[l]=new k9(a);y.abort=this.loadVectorData(a,(x,w)=>{const P=!this.loading[l];if(delete this.loading[l],P||x||!w)return y.status="done",P||(this.loaded[l]=y),i(x);const C=w.rawData,j={};w.expires&&(j.expires=w.expires),w.cacheControl&&(j.cacheControl=w.cacheControl),y.vectorTile=w.vectorTile||new yE(new Px(C));const $=()=>{y.parse(y.vectorTile,this.layerIndex,this.availableImages,this.actor,(G,X)=>{if(G||!X)return i(G);const K={};if(p){const te=mm(d);te.length>0&&(K.resourceTiming=JSON.parse(JSON.stringify(te)))}i(null,at({rawTileData:C.slice(0)},X,j,K))})};this.isSpriteLoaded?$():this.once("isSpriteLoaded",()=>{this.scheduler?this.scheduler.add($,{type:"parseTile",isSymbolTile:a.isSymbolTile,zoom:a.tileZoom}):$()}),this.loaded=this.loaded||{},this.loaded[l]=y})}reloadTile(a,i){const l=this.loaded,d=a.uid,p=this;if(l&&l[d]){const y=l[d];y.showCollisionBoxes=a.showCollisionBoxes,y.enableTerrain=!!a.enableTerrain,y.projection=a.projection,y.tileTransform=Td(a.tileID.canonical,a.projection);const x=(w,P)=>{const C=y.reloadCallback;C&&(delete y.reloadCallback,y.parse(y.vectorTile,p.layerIndex,this.availableImages,p.actor,C)),i(w,P)};y.status==="parsing"?y.reloadCallback=x:y.status==="done"&&(y.vectorTile?y.parse(y.vectorTile,this.layerIndex,this.availableImages,this.actor,x):x())}}abortTile(a,i){const l=a.uid,d=this.loading[l];d&&(d.abort&&d.abort(),delete this.loading[l]),i()}removeTile(a,i){const l=this.loaded,d=a.uid;l&&l[d]&&delete l[d],i()}},o.WritingMode=Yo,o.ZoomDependentExpression=sd,o.add=Ml,o.addDynamicAttributes=zx,o.adjoint=function(a,i){var l=i[0],d=i[1],p=i[2],y=i[3],x=i[4],w=i[5],P=i[6],C=i[7],j=i[8];return a[0]=x*j-w*C,a[1]=p*C-d*j,a[2]=d*w-p*x,a[3]=w*P-y*j,a[4]=l*j-p*P,a[5]=p*y-l*w,a[6]=y*C-x*P,a[7]=d*P-l*C,a[8]=l*x-d*y,a},o.asyncAll=Ge,o.bezier=Ue,o.bindAll=ft,o.boundsAttributes=KD,o.bufferConvexPolygon=function(a,i){const l=[];for(let d=0;d<a.length;d++){const p=$e(d-1,-1,a.length-1),y=$e(d+1,-1,a.length-1),x=a[d],w=a[y],P=a[p].sub(x).unit(),C=w.sub(x).unit(),j=C.angleWithSep(P.x,P.y),$=P.add(C).unit().mult(-1*i/Math.sin(j/2));l.push(x.add($))}return l},o.cacheEntryPossiblyAdded=function(a){qi++,qi>hn&&(a.getActor().send("enforceCacheSizeLimit",ln),qi=0)},o.calculateGlobeLabelMatrix=function(a,i){const{x:l,y:d}=a.point,p=bk(l,d,a.worldSize/a._pixelsPerMercatorPixel,0,0);return yd(p,p,JS(Fs(i)))},o.calculateGlobeMatrix=function(a){const{x:i,y:l}=a.point,{lng:d,lat:p}=a._center;return bk(i,l,a.worldSize,d,p)},o.calculateGlobeMercatorMatrix=function(a){const i=a.pixelsPerMeter,l=i/hs(1,a.center.lat),d=us(new Float64Array(16));return hg(d,d,[a.point.x,a.point.y,0]),vd(d,d,[l,l,i]),Float32Array.from(d)},o.circumferenceAtLatitude=eE,o.clamp=Pe,o.clearTileCache=function(a){if(!Wo())return;const i=_.caches.delete(Yn);a&&i.catch(a).then(()=>a())},o.clipLine=kD,o.clone=function(a){var i=new Io(16);return i[0]=a[0],i[1]=a[1],i[2]=a[2],i[3]=a[3],i[4]=a[4],i[5]=a[5],i[6]=a[6],i[7]=a[7],i[8]=a[8],i[9]=a[9],i[10]=a[10],i[11]=a[11],i[12]=a[12],i[13]=a[13],i[14]=a[14],i[15]=a[15],i},o.clone$1=Ot,o.collisionCircleLayout=IH,o.config=A,o.conjugate=function(a,i){return a[0]=-i[0],a[1]=-i[1],a[2]=-i[2],a[3]=i[3],a},o.create=function(){var a=new Io(16);return Io!=Float32Array&&(a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[11]=0,a[12]=0,a[13]=0,a[14]=0),a[0]=1,a[5]=1,a[10]=1,a[15]=1,a},o.create$1=tk,o.createExpression=Ac,o.createLayout=Fe,o.createStyleLayer=function(a){return a.type==="custom"?new b9(a):new S9[a.type](a)},o.cross=WS,o.degToRad=Ee,o.distance=function(a,i){return Math.hypot(i[0]-a[0],i[1]-a[1],i[2]-a[2])},o.div=function(a,i,l){return a[0]=i[0]/l[0],a[1]=i[1]/l[1],a[2]=i[2]/l[2],a},o.dot=Sa,o.earthRadius=wg,o.ease=we,o.easeCubicInOut=Le,o.ecefToLatLng=function([a,i,l]){const d=Math.hypot(a,i,l),p=Math.atan2(a,l),y=.5*Math.PI-Math.acos(-i/d);return new Zr(Se(p),Se(y))},o.emitValidationErrors=ex,o.endsWith=ht,o.enforceCacheSizeLimit=function(a){Ti(),gn&&gn.then(i=>{i.keys().then(l=>{for(let d=0;d<l.length-a;d++)i.delete(l[d])})})},o.evaluateSizeForFeature=Tx,o.evaluateSizeForZoom=sf,o.evaluateVariableOffset=zD,o.evented=b,o.exactEquals=function(a,i){return a[0]===i[0]&&a[1]===i[1]&&a[2]===i[2]&&a[3]===i[3]},o.exactEquals$1=function(a,i){return a[0]===i[0]&&a[1]===i[1]&&a[2]===i[2]},o.exported=Ya,o.exported$1=I,o.extend=at,o.extend$1=Qa,o.fillExtrusionHeightLift=tD,o.filterObject=zt,o.fromMat4=function(a,i){return a[0]=i[0],a[1]=i[1],a[2]=i[2],a[3]=i[4],a[4]=i[5],a[5]=i[6],a[6]=i[8],a[7]=i[9],a[8]=i[10],a},o.fromQuat=function(a,i){var l=i[0],d=i[1],p=i[2],y=i[3],x=l+l,w=d+d,P=p+p,C=l*x,j=d*x,$=d*w,G=p*x,X=p*w,K=p*P,te=y*x,se=y*w,me=y*P;return a[0]=1-$-K,a[1]=j+me,a[2]=G-se,a[3]=0,a[4]=j-me,a[5]=1-C-K,a[6]=X+te,a[7]=0,a[8]=G+se,a[9]=X-te,a[10]=1-C-$,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a},o.fromRotation=function(a,i){var l=Math.sin(i),d=Math.cos(i);return a[0]=d,a[1]=l,a[2]=0,a[3]=-l,a[4]=d,a[5]=0,a[6]=0,a[7]=0,a[8]=1,a},o.fromScaling=nk,o.furthestTileCorner=function(a){const i=Math.round((a+45+360)%360/90)%4;return je[i]},o.getAABBPointSquareDist=function(a,i,l){let d=0;for(let p=0;p<2;++p){const y=l?l[p]:0;a[p]>y&&(d+=(a[p]-y)*(a[p]-y)),i[p]<y&&(d+=(y-i[p])*(y-i[p]))}return d},o.getAnchorAlignment=EE,o.getAnchorJustification=PE,o.getBounds=function(a){let i=1/0,l=1/0,d=-1/0,p=-1/0;for(const y of a)i=Math.min(i,y.x),l=Math.min(l,y.y),d=Math.max(d,y.x),p=Math.max(p,y.y);return{min:new ne(i,l),max:new ne(d,p)}},o.getColumn=Vr,o.getDefaultExportFromCjs=U,o.getGridMatrix=function(a,i,l,d){const p=i.getNorth(),y=i.getSouth(),x=i.getWest(),w=i.getEast(),P=1<<a.z,C=w-x,j=p-y,$=C/xd,G=-j/_g[l],X=[0,$,0,G,0,0,p,x,0];if(a.z>0){const K=180/d;rk(X,X,[K/C+1,0,0,0,K/j+1,0,-.5*K/$,.5*K/G,1])}return X[2]=P,X[5]=a.x,X[8]=a.y,X},o.getImage=xe,o.getJSON=function(a,i){return Ka(at(a,{type:"json"}),i)},o.getLatitudinalLod=function(a){const i=Oi-5;a=Pe(a,-i,i)/i*90;const l=Math.pow(Math.abs(Math.sin(Ee(a))),3);return Math.round(l*(_g.length-1))},o.getMapSessionAPI=li,o.getPerformanceMeasurement=mm,o.getProjection=WD,o.getRTLTextPluginStatus=T,o.getReferrer=Ai,o.getTilePoint=function(a,{x:i,y:l},d=0){return new ne(((i-d)*a.scale-a.x)*Jt,(l*a.scale-a.y)*Jt)},o.getTileVec3=function(a,i,l=0){return Yh(((i.x-l)*a.scale-a.x)*Jt,(i.y*a.scale-a.y)*Jt,Tk(i.z,i.y))},o.getVideo=function(a,i){const l=_.document.createElement("video");l.muted=!0,l.onloadstart=function(){i(null,l)};for(let d=0;d<a.length;d++){const p=_.document.createElement("source");Gr(a[d])||(l.crossOrigin="Anonymous"),p.src=a[d],l.appendChild(p)}return{cancel:()=>{}}},o.globeCenterToScreenPoint=function(a){const i=[0,0,0],l=us(new Float64Array(16));return yd(l,a.pixelMatrix,a.globeMatrix),Ln(i,i,l),new ne(i[0],i[1])},o.globeDenormalizeECEF=JS,o.globeECEFOrigin=function(a,i){const l=[0,0,0];return Ln(l,l,bg(Fs(i.canonical))),Ln(l,l,a),l},o.globeMetersToEcef=cx,o.globeNormalizeECEF=bg,o.globePixelsToTileUnits=function(a,i){return Jt/(512*Math.pow(2,a))*dx(Fs(i))},o.globePoleMatrixForTile=function(a,i,l){const d=us(new Float64Array(16)),p=(i/(1<<a)-.5)*Math.PI*2;return lx(d,l.globeMatrix,p),Float32Array.from(d)},o.globeTileBounds=Fs,o.globeTiltAtLngLat=wk,o.globeToMercatorTransition=ef,o.globeUseCustomAntiAliasing=function(a,i,l){const d=ef(l.zoom),p=a.style.map._antialias,y=!!i.extStandardDerivatives,x=i.extStandardDerivativesForceOff||a.terrain&&a.terrain.exaggeration()>0;return d===0&&!p&&!x&&y},o.identity=us,o.identity$1=dk,o.invert=FS,o.isFullscreen=function(){return!!_.document.fullscreenElement||!!_.document.webkitFullscreenElement},o.isLngLatBehindGlobe=QS,o.isMapAuthenticated=function(a){return zi.has(a)},o.isMapboxURL=Ne,o.isSafariWithAntialiasingBug=function(a){const i=a.navigator?a.navigator.userAgent:null;return!!An(a)&&i&&(i.match("Version/15.4")||i.match("Version/15.5")||i.match(/CPU (OS|iPhone OS) (15_4|15_5) like Mac OS X/))},o.latFromMercatorY=Ii,o.latLngToECEF=Qh,o.len=vq,o.length=fg,o.length$1=function(a){return Math.hypot(a[0],a[1],a[2],a[3])},o.lngFromMercatorX=Ko,o.loadVectorTile=pR,o.makeRequest=Ka,o.mapValue=function(a,i,l,d,p){return Pe((a-i)/(l-i)*(p-d)+d,d,p)},o.mercatorScale=Ak,o.mercatorXfromLng=Us,o.mercatorYfromLat=Vs,o.mercatorZfromAltitude=hs,o.mul=gq,o.mul$1=yq,o.multiply=yd,o.multiply$1=rk,o.multiply$2=ak,o.nextPowerOfTwo=gt,o.normalize=Ki,o.normalize$1=_q,o.normalize$2=ck,o.number=Cr,o.ortho=function(a,i,l,d,p,y,x){var w=1/(i-l),P=1/(d-p),C=1/(y-x);return a[0]=-2*w,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=-2*P,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=2*C,a[11]=0,a[12]=(i+l)*w,a[13]=(p+d)*P,a[14]=(x+y)*C,a[15]=1,a},o.pbf=dD,o.perspective=function(a,i,l,d,p){var y,x=1/Math.tan(i/2);return a[0]=x/l,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=x,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[11]=-1,a[12]=0,a[13]=0,a[15]=0,p!=null&&p!==1/0?(a[10]=(p+d)*(y=1/(d-p)),a[14]=2*p*d*y):(a[10]=-1,a[14]=-2*d),a},o.pick=function(a,i){const l={};for(let d=0;d<i.length;d++){const p=i[d];p in a&&(l[p]=a[p])}return l},o.plugin=D,o.pointGeometry=Z,o.polesInViewport=function(a){const i=us(new Float64Array(16));yd(i,a.pixelMatrix,a.globeMatrix);const l=[0,Ea,0],d=[0,Ta,0];return Ln(l,l,i),Ln(d,d,i),[l[0]>0&&l[0]<=a.width&&l[1]>0&&l[1]<=a.height&&!QS(a,new Zr(a.center.lat,90)),d[0]>0&&d[0]<=a.width&&d[1]>0&&d[1]<=a.height&&!QS(a,new Zr(a.center.lat,-90))]},o.polygonContainsPoint=Sd,o.polygonIntersectsBox=Dk,o.polygonIntersectsPolygon=Mk,o.polygonizeBounds=function(a,i,l=0,d=!0){const p=new ne(l,l),y=a.sub(p),x=i.add(p),w=[y,new ne(x.x,y.y),x,new ne(y.x,x.y)];return d&&w.push(y.clone()),w},o.posAttributes=vg,o.postMapLoadEvent=Nn,o.postPerformanceEvent=Qn,o.postTurnstileEvent=Sr,o.potpack=bE,o.prevPowerOfTwo=function(a){return a<=1?1:Math.pow(2,Math.floor(Math.log(a)/Math.LN2))},o.radToDeg=Se,o.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],o.registerForPluginStateChange=function(a){return a({pluginStatus:g,pluginURL:c}),b.on("pluginStateChange",a),a},o.removeAuthState=function(a){zi.delete(a)},o.renderColorRamp=lE,o.resample=Pk,o.rotateX=US,o.rotateX$1=hk,o.rotateY=lx,o.rotateY$1=fk,o.rotateZ=function(a,i,l){var d=Math.sin(l),p=Math.cos(l),y=i[0],x=i[1],w=i[2],P=i[3],C=i[4],j=i[5],$=i[6],G=i[7];return i!==a&&(a[8]=i[8],a[9]=i[9],a[10]=i[10],a[11]=i[11],a[12]=i[12],a[13]=i[13],a[14]=i[14],a[15]=i[15]),a[0]=y*p+C*d,a[1]=x*p+j*d,a[2]=w*p+$*d,a[3]=P*p+G*d,a[4]=C*p-y*d,a[5]=j*p-x*d,a[6]=$*p-w*d,a[7]=G*p-P*d,a},o.rotateZ$1=function(a,i,l){l*=.5;var d=i[0],p=i[1],y=i[2],x=i[3],w=Math.sin(l),P=Math.cos(l);return a[0]=d*P+p*w,a[1]=p*P-d*w,a[2]=y*P+x*w,a[3]=x*P-y*w,a},o.scale=vd,o.scale$1=lk,o.scale$2=Zo,o.scaleAndAdd=gg,o.set=function(a,i,l,d){return a[0]=i,a[1]=l,a[2]=d,a},o.setCacheLimits=function(a,i){ln=a,hn=i},o.setColumn=function(a,i,l){a[4*i+0]=l[0],a[4*i+1]=l[1],a[4*i+2]=l[2],a[4*i+3]=l[3]},o.setRTLTextPlugin=function(a,i,l=!1){if(g===sg||g===lg||g===cg)throw new Error("setRTLTextPlugin cannot be called multiple times.");c=Ya.resolveURL(a),g=sg,Ic=i,v(),l||O()},o.smoothstep=rt,o.spec=it,o.squaredLength=function(a){var i=a[0],l=a[1],d=a[2];return i*i+l*l+d*d},o.storeAuthState=function(a,i){i?zi.add(a):zi.delete(a)},o.sub=ds,o.subtract=GS,o.symbolSize=OH,o.tileAABB=function(a,i,l,d,p,y,x,w,P){if(P.name==="globe")return Eq(a,i,new Sx(l,d,p));const C=Td({z:l,x:d,y:p},P);return new Yi([(y+C.x/C.scale)*i,i*(C.y/C.scale),x],[(y+C.x2/C.scale)*i,i*(C.y2/C.scale),w])},o.tileCornersToBounds=ux,o.tileTransform=Td,o.transformMat3=function(a,i,l){var d=i[0],p=i[1],y=i[2];return a[0]=d*l[0]+p*l[3]+y*l[6],a[1]=d*l[1]+p*l[4]+y*l[7],a[2]=d*l[2]+p*l[5]+y*l[8],a},o.transformMat4=Ln,o.transformMat4$1=_d,o.transformQuat=sk,o.transitionTileAABBinECEF=vk,o.translate=hg,o.transpose=function(a,i){if(a===i){var l=i[1],d=i[2],p=i[5];a[1]=i[3],a[2]=i[6],a[3]=l,a[5]=i[7],a[6]=d,a[7]=p}else a[0]=i[0],a[1]=i[3],a[2]=i[6],a[3]=i[1],a[4]=i[4],a[5]=i[7],a[6]=i[2],a[7]=i[5],a[8]=i[8];return a},o.triggerPluginCompletionEvent=f,o.uniqueId=vt,o.updateGlobeVertexNormal=function(a,i,l,d,p){const y=5*i+2;a.float32[y+0]=l,a.float32[y+1]=d,a.float32[y+2]=p},o.validateCustomStyleLayer=function(a){const i=[],l=a.id;return l===void 0&&i.push({message:`layers.${l}: missing required property "id"`}),a.render===void 0&&i.push({message:`layers.${l}: missing required method "render"`}),a.renderingMode&&a.renderingMode!=="2d"&&a.renderingMode!=="3d"&&i.push({message:`layers.${l}: property "renderingMode" must be either "2d" or "3d"`}),i},o.validateFilter=a=>Co(hd(a)),o.validateFog=a=>Co(Y_(a)),o.validateLayer=a=>Co(H_(a)),o.validateLight=a=>Co(K_(a)),o.validateSource=a=>Co(Z_(a)),o.validateStyle=Q_,o.validateTerrain=a=>Co(rg(a)),o.values=Re,o.vectorTile=xx,o.version=E,o.warnOnce=Pt,o.window=_,o.wrap=$e}),h(["./shared"],function(o){function _(ve){if(typeof ve=="number"||typeof ve=="boolean"||typeof ve=="string"||ve==null)return JSON.stringify(ve);if(Array.isArray(ve)){let oe="[";for(const xe of ve)oe+=`${_(xe)},`;return`${oe}]`}let ie="{";for(const oe of Object.keys(ve).sort())ie+=`${oe}:${_(ve[oe])},`;return`${ie}}`}function E(ve){let ie="";for(const oe of o.refProperties)ie+=`/${_(ve[oe])}`;return ie}class S{constructor(ie){this.keyCache={},ie&&this.replace(ie)}replace(ie){this._layerConfigs={},this._layers={},this.update(ie,[])}update(ie,oe){for(const Ie of ie)this._layerConfigs[Ie.id]=Ie,(this._layers[Ie.id]=o.createStyleLayer(Ie)).compileFilter(),this.keyCache[Ie.id]&&delete this.keyCache[Ie.id];for(const Ie of oe)delete this.keyCache[Ie],delete this._layerConfigs[Ie],delete this._layers[Ie];this.familiesBySource={};const xe=function(Ie,Ne){const qe={};for(let ze=0;ze<Ie.length;ze++){const et=Ne&&Ne[Ie[ze].id]||E(Ie[ze]);Ne&&(Ne[Ie[ze].id]=et);let It=qe[et];It||(It=qe[et]=[]),It.push(Ie[ze])}const We=[];for(const ze in qe)We.push(qe[ze]);return We}(o.values(this._layerConfigs),this.keyCache);for(const Ie of xe){const Ne=Ie.map(kt=>this._layers[kt.id]),qe=Ne[0];if(qe.visibility==="none")continue;const We=qe.source||"";let ze=this.familiesBySource[We];ze||(ze=this.familiesBySource[We]={});const et=qe.sourceLayer||"_geojsonTileLayer";let It=ze[et];It||(It=ze[et]=[]),It.push(Ne)}}}class A{loadTile(ie,oe){const{uid:xe,encoding:Ie,rawImageData:Ne,padding:qe,buildQuadTree:We}=ie,ze=o.window.ImageBitmap&&Ne instanceof o.window.ImageBitmap?this.getImageData(Ne,qe):Ne;oe(null,new o.DEMData(xe,ze,Ie,qe<1,We))}getImageData(ie,oe){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(ie.width,ie.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d",{willReadFrequently:!0})),this.offscreenCanvas.width=ie.width,this.offscreenCanvas.height=ie.height,this.offscreenCanvasContext.drawImage(ie,0,0,ie.width,ie.height);const xe=this.offscreenCanvasContext.getImageData(-oe,-oe,ie.width+2*oe,ie.height+2*oe);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),xe}}function I(ve,ie){if(ve.length!==0){R(ve[0],ie);for(var oe=1;oe<ve.length;oe++)R(ve[oe],!ie)}}function R(ve,ie){for(var oe=0,xe=0,Ie=0,Ne=ve.length,qe=Ne-1;Ie<Ne;qe=Ie++){var We=(ve[Ie][0]-ve[qe][0])*(ve[qe][1]+ve[Ie][1]),ze=oe+We;xe+=Math.abs(oe)>=Math.abs(We)?oe-ze+We:We-ze+oe,oe=ze}oe+xe>=0!=!!ie&&ve.reverse()}var k=o.getDefaultExportFromCjs(function ve(ie,oe){var xe,Ie=ie&&ie.type;if(Ie==="FeatureCollection")for(xe=0;xe<ie.features.length;xe++)ve(ie.features[xe],oe);else if(Ie==="GeometryCollection")for(xe=0;xe<ie.geometries.length;xe++)ve(ie.geometries[xe],oe);else if(Ie==="Feature")ve(ie.geometry,oe);else if(Ie==="Polygon")I(ie.coordinates,oe);else if(Ie==="MultiPolygon")for(xe=0;xe<ie.coordinates.length;xe++)I(ie.coordinates[xe],oe);return ie});const L=o.VectorTileFeature.prototype.toGeoJSON;var N={exports:{}},z=o.pointGeometry,F=o.vectorTile.VectorTileFeature,U=W;function W(ve,ie){this.options=ie||{},this.features=ve,this.length=ve.length}function Y(ve,ie){this.id=typeof ve.id=="number"?ve.id:void 0,this.type=ve.type,this.rawGeometry=ve.type===1?[ve.geometry]:ve.geometry,this.properties=ve.tags,this.extent=ie||4096}W.prototype.feature=function(ve){return new Y(this.features[ve],this.options.extent)},Y.prototype.loadGeometry=function(){var ve=this.rawGeometry;this.geometry=[];for(var ie=0;ie<ve.length;ie++){for(var oe=ve[ie],xe=[],Ie=0;Ie<oe.length;Ie++)xe.push(new z(oe[Ie][0],oe[Ie][1]));this.geometry.push(xe)}return this.geometry},Y.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var ve=this.geometry,ie=1/0,oe=-1/0,xe=1/0,Ie=-1/0,Ne=0;Ne<ve.length;Ne++)for(var qe=ve[Ne],We=0;We<qe.length;We++){var ze=qe[We];ie=Math.min(ie,ze.x),oe=Math.max(oe,ze.x),xe=Math.min(xe,ze.y),Ie=Math.max(Ie,ze.y)}return[ie,xe,oe,Ie]},Y.prototype.toGeoJSON=F.prototype.toGeoJSON;var Q=o.pbf,Z=U;function re(ve){var ie=new Q;return function(oe,xe){for(var Ie in oe.layers)xe.writeMessage(3,ne,oe.layers[Ie])}(ve,ie),ie.finish()}function ne(ve,ie){var oe;ie.writeVarintField(15,ve.version||1),ie.writeStringField(1,ve.name||""),ie.writeVarintField(5,ve.extent||4096);var xe={keys:[],values:[],keycache:{},valuecache:{}};for(oe=0;oe<ve.length;oe++)xe.feature=ve.feature(oe),ie.writeMessage(2,ue,xe);var Ie=xe.keys;for(oe=0;oe<Ie.length;oe++)ie.writeStringField(3,Ie[oe]);var Ne=xe.values;for(oe=0;oe<Ne.length;oe++)ie.writeMessage(4,Le,Ne[oe])}function ue(ve,ie){var oe=ve.feature;oe.id!==void 0&&ie.writeVarintField(1,oe.id),ie.writeMessage(2,fe,ve),ie.writeVarintField(3,oe.type),ie.writeMessage(4,je,oe)}function fe(ve,ie){var oe=ve.feature,xe=ve.keys,Ie=ve.values,Ne=ve.keycache,qe=ve.valuecache;for(var We in oe.properties){var ze=oe.properties[We],et=Ne[We];if(ze!==null){et===void 0&&(xe.push(We),Ne[We]=et=xe.length-1),ie.writeVarint(et);var It=typeof ze;It!=="string"&&It!=="boolean"&&It!=="number"&&(ze=JSON.stringify(ze));var kt=It+":"+ze,Tt=qe[kt];Tt===void 0&&(Ie.push(ze),qe[kt]=Tt=Ie.length-1),ie.writeVarint(Tt)}}}function Ee(ve,ie){return(ie<<3)+(7&ve)}function Se(ve){return ve<<1^ve>>31}function je(ve,ie){for(var oe=ve.loadGeometry(),xe=ve.type,Ie=0,Ne=0,qe=oe.length,We=0;We<qe;We++){var ze=oe[We],et=1;xe===1&&(et=ze.length),ie.writeVarint(Ee(1,et));for(var It=xe===3?ze.length-1:ze.length,kt=0;kt<It;kt++){kt===1&&xe!==1&&ie.writeVarint(Ee(2,It-1));var Tt=ze[kt].x-Ie,ur=ze[kt].y-Ne;ie.writeVarint(Se(Tt)),ie.writeVarint(Se(ur)),Ie+=Tt,Ne+=ur}xe===3&&ie.writeVarint(Ee(7,1))}}function Le(ve,ie){var oe=typeof ve;oe==="string"?ie.writeStringField(1,ve):oe==="boolean"?ie.writeBooleanField(7,ve):oe==="number"&&(ve%1!=0?ie.writeDoubleField(3,ve):ve<0?ie.writeSVarintField(6,ve):ie.writeVarintField(5,ve))}N.exports=re,N.exports.fromVectorTileJs=re,N.exports.fromGeojsonVt=function(ve,ie){ie=ie||{};var oe={};for(var xe in ve)oe[xe]=new Z(ve[xe].features,ie),oe[xe].name=xe,oe[xe].version=ie.version,oe[xe].extent=ie.extent;return re({layers:oe})},N.exports.GeoJSONWrapper=Z;var Ue=o.getDefaultExportFromCjs(N.exports);const we={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:ve=>ve},Pe=Math.fround||(rt=new Float32Array(1),ve=>(rt[0]=+ve,rt[0]));var rt;const $e=3,Ge=5,Re=6;class at{constructor(ie){this.options=Object.assign(Object.create(we),ie),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(ie){const{log:oe,minZoom:xe,maxZoom:Ie}=this.options;oe&&console.time("total time");const Ne=`prepare ${ie.length} points`;oe&&console.time(Ne),this.points=ie;const qe=[];for(let ze=0;ze<ie.length;ze++){const et=ie[ze];if(!et.geometry)continue;const[It,kt]=et.geometry.coordinates,Tt=Pe(lt(It)),ur=Pe(gt(kt));qe.push(Tt,ur,1/0,ze,-1,1),this.options.reduce&&qe.push(0)}let We=this.trees[Ie+1]=this._createTree(qe);oe&&console.timeEnd(Ne);for(let ze=Ie;ze>=xe;ze--){const et=+Date.now();We=this.trees[ze]=this._createTree(this._cluster(We,ze)),oe&&console.log("z%d: %d clusters in %dms",ze,We.numItems,+Date.now()-et)}return oe&&console.timeEnd("total time"),this}getClusters(ie,oe){let xe=((ie[0]+180)%360+360)%360-180;const Ie=Math.max(-90,Math.min(90,ie[1]));let Ne=ie[2]===180?180:((ie[2]+180)%360+360)%360-180;const qe=Math.max(-90,Math.min(90,ie[3]));if(ie[2]-ie[0]>=360)xe=-180,Ne=180;else if(xe>Ne){const kt=this.getClusters([xe,Ie,180,qe],oe),Tt=this.getClusters([-180,Ie,Ne,qe],oe);return kt.concat(Tt)}const We=this.trees[this._limitZoom(oe)],ze=We.range(lt(xe),gt(qe),lt(Ne),gt(Ie)),et=We.data,It=[];for(const kt of ze){const Tt=this.stride*kt;It.push(et[Tt+Ge]>1?Et(et,Tt,this.clusterProps):this.points[et[Tt+$e]])}return It}getChildren(ie){const oe=this._getOriginId(ie),xe=this._getOriginZoom(ie),Ie="No cluster with the specified id.",Ne=this.trees[xe];if(!Ne)throw new Error(Ie);const qe=Ne.data;if(oe*this.stride>=qe.length)throw new Error(Ie);const We=this.options.radius/(this.options.extent*Math.pow(2,xe-1)),ze=Ne.within(qe[oe*this.stride],qe[oe*this.stride+1],We),et=[];for(const It of ze){const kt=It*this.stride;qe[kt+4]===ie&&et.push(qe[kt+Ge]>1?Et(qe,kt,this.clusterProps):this.points[qe[kt+$e]])}if(et.length===0)throw new Error(Ie);return et}getLeaves(ie,oe,xe){const Ie=[];return this._appendLeaves(Ie,ie,oe=oe||10,xe=xe||0,0),Ie}getTile(ie,oe,xe){const Ie=this.trees[this._limitZoom(ie)],Ne=Math.pow(2,ie),{extent:qe,radius:We}=this.options,ze=We/qe,et=(xe-ze)/Ne,It=(xe+1+ze)/Ne,kt={features:[]};return this._addTileFeatures(Ie.range((oe-ze)/Ne,et,(oe+1+ze)/Ne,It),Ie.data,oe,xe,Ne,kt),oe===0&&this._addTileFeatures(Ie.range(1-ze/Ne,et,1,It),Ie.data,Ne,xe,Ne,kt),oe===Ne-1&&this._addTileFeatures(Ie.range(0,et,ze/Ne,It),Ie.data,-1,xe,Ne,kt),kt.features.length?kt:null}getClusterExpansionZoom(ie){let oe=this._getOriginZoom(ie)-1;for(;oe<=this.options.maxZoom;){const xe=this.getChildren(ie);if(oe++,xe.length!==1)break;ie=xe[0].properties.cluster_id}return oe}_appendLeaves(ie,oe,xe,Ie,Ne){const qe=this.getChildren(oe);for(const We of qe){const ze=We.properties;if(ze&&ze.cluster?Ne+ze.point_count<=Ie?Ne+=ze.point_count:Ne=this._appendLeaves(ie,ze.cluster_id,xe,Ie,Ne):Ne<Ie?Ne++:ie.push(We),ie.length===xe)break}return Ne}_createTree(ie){const oe=new o.KDBush(ie.length/this.stride|0,this.options.nodeSize,Float32Array);for(let xe=0;xe<ie.length;xe+=this.stride)oe.add(ie[xe],ie[xe+1]);return oe.finish(),oe.data=ie,oe}_addTileFeatures(ie,oe,xe,Ie,Ne,qe){for(const We of ie){const ze=We*this.stride,et=oe[ze+Ge]>1;let It,kt,Tt;if(et)It=vt(oe,ze,this.clusterProps),kt=oe[ze],Tt=oe[ze+1];else{const dr=this.points[oe[ze+$e]];It=dr.properties;const[gr,Sr]=dr.geometry.coordinates;kt=lt(gr),Tt=gt(Sr)}const ur={type:1,geometry:[[Math.round(this.options.extent*(kt*Ne-xe)),Math.round(this.options.extent*(Tt*Ne-Ie))]],tags:It};let mr;mr=et||this.options.generateId?oe[ze+$e]:this.points[oe[ze+$e]].id,mr!==void 0&&(ur.id=mr),qe.features.push(ur)}}_limitZoom(ie){return Math.max(this.options.minZoom,Math.min(Math.floor(+ie),this.options.maxZoom+1))}_cluster(ie,oe){const{radius:xe,extent:Ie,reduce:Ne,minPoints:qe}=this.options,We=xe/(Ie*Math.pow(2,oe)),ze=ie.data,et=[],It=this.stride;for(let kt=0;kt<ze.length;kt+=It){if(ze[kt+2]<=oe)continue;ze[kt+2]=oe;const Tt=ze[kt],ur=ze[kt+1],mr=ie.within(ze[kt],ze[kt+1],We),dr=ze[kt+Ge];let gr=dr;for(const Sr of mr){const yn=Sr*It;ze[yn+2]>oe&&(gr+=ze[yn+Ge])}if(gr>dr&&gr>=qe){let Sr,yn=Tt*dr,Nn=ur*dr,Pi=-1;const Qn=((kt/It|0)<<5)+(oe+1)+this.points.length;for(const ga of mr){const li=ga*It;if(ze[li+2]<=oe)continue;ze[li+2]=oe;const zi=ze[li+Ge];yn+=ze[li]*zi,Nn+=ze[li+1]*zi,ze[li+4]=Qn,Ne&&(Sr||(Sr=this._map(ze,kt,!0),Pi=this.clusterProps.length,this.clusterProps.push(Sr)),Ne(Sr,this._map(ze,li)))}ze[kt+4]=Qn,et.push(yn/gr,Nn/gr,1/0,Qn,-1,gr),Ne&&et.push(Pi)}else{for(let Sr=0;Sr<It;Sr++)et.push(ze[kt+Sr]);if(gr>1)for(const Sr of mr){const yn=Sr*It;if(!(ze[yn+2]<=oe)){ze[yn+2]=oe;for(let Nn=0;Nn<It;Nn++)et.push(ze[yn+Nn])}}}}return et}_getOriginId(ie){return ie-this.points.length>>5}_getOriginZoom(ie){return(ie-this.points.length)%32}_map(ie,oe,xe){if(ie[oe+Ge]>1){const qe=this.clusterProps[ie[oe+Re]];return xe?Object.assign({},qe):qe}const Ie=this.points[ie[oe+$e]].properties,Ne=this.options.map(Ie);return xe&&Ne===Ie?Object.assign({},Ne):Ne}}function Et(ve,ie,oe){return{type:"Feature",id:ve[ie+$e],properties:vt(ve,ie,oe),geometry:{type:"Point",coordinates:[(xe=ve[ie],360*(xe-.5)),tt(ve[ie+1])]}};var xe}function vt(ve,ie,oe){const xe=ve[ie+Ge],Ie=xe>=1e4?`${Math.round(xe/1e3)}k`:xe>=1e3?Math.round(xe/100)/10+"k":xe,Ne=ve[ie+Re],qe=Ne===-1?{}:Object.assign({},oe[Ne]);return Object.assign(qe,{cluster:!0,cluster_id:ve[ie+$e],point_count:xe,point_count_abbreviated:Ie})}function lt(ve){return ve/360+.5}function gt(ve){const ie=Math.sin(ve*Math.PI/180),oe=.5-.25*Math.log((1+ie)/(1-ie))/Math.PI;return oe<0?0:oe>1?1:oe}function tt(ve){const ie=(180-360*ve)*Math.PI/180;return 360*Math.atan(Math.exp(ie))/Math.PI-90}function ft(ve,ie,oe,xe){for(var Ie,Ne=xe,qe=oe-ie>>1,We=oe-ie,ze=ve[ie],et=ve[ie+1],It=ve[oe],kt=ve[oe+1],Tt=ie+3;Tt<oe;Tt+=3){var ur=ht(ve[Tt],ve[Tt+1],ze,et,It,kt);if(ur>Ne)Ie=Tt,Ne=ur;else if(ur===Ne){var mr=Math.abs(Tt-qe);mr<We&&(Ie=Tt,We=mr)}}Ne>xe&&(Ie-ie>3&&ft(ve,ie,Ie,xe),ve[Ie+2]=Ne,oe-Ie>3&&ft(ve,Ie,oe,xe))}function ht(ve,ie,oe,xe,Ie,Ne){var qe=Ie-oe,We=Ne-xe;if(qe!==0||We!==0){var ze=((ve-oe)*qe+(ie-xe)*We)/(qe*qe+We*We);ze>1?(oe=Ie,xe=Ne):ze>0&&(oe+=qe*ze,xe+=We*ze)}return(qe=ve-oe)*qe+(We=ie-xe)*We}function Be(ve,ie,oe,xe){var Ie={id:ve===void 0?null:ve,type:ie,geometry:oe,tags:xe,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(Ne){var qe=Ne.geometry,We=Ne.type;if(We==="Point"||We==="MultiPoint"||We==="LineString")zt(Ne,qe);else if(We==="Polygon"||We==="MultiLineString")for(var ze=0;ze<qe.length;ze++)zt(Ne,qe[ze]);else if(We==="MultiPolygon")for(ze=0;ze<qe.length;ze++)for(var et=0;et<qe[ze].length;et++)zt(Ne,qe[ze][et])}(Ie),Ie}function zt(ve,ie){for(var oe=0;oe<ie.length;oe+=3)ve.minX=Math.min(ve.minX,ie[oe]),ve.minY=Math.min(ve.minY,ie[oe+1]),ve.maxX=Math.max(ve.maxX,ie[oe]),ve.maxY=Math.max(ve.maxY,ie[oe+1])}function Ot(ve,ie,oe,xe){if(ie.geometry){var Ie=ie.geometry.coordinates,Ne=ie.geometry.type,qe=Math.pow(oe.tolerance/((1<<oe.maxZoom)*oe.extent),2),We=[],ze=ie.id;if(oe.promoteId?ze=ie.properties[oe.promoteId]:oe.generateId&&(ze=xe||0),Ne==="Point")qt(Ie,We);else if(Ne==="MultiPoint")for(var et=0;et<Ie.length;et++)qt(Ie[et],We);else if(Ne==="LineString")Pt(Ie,We,qe,!1);else if(Ne==="MultiLineString"){if(oe.lineMetrics){for(et=0;et<Ie.length;et++)Pt(Ie[et],We=[],qe,!1),ve.push(Be(ze,"LineString",We,ie.properties));return}nr(Ie,We,qe,!1)}else if(Ne==="Polygon")nr(Ie,We,qe,!0);else{if(Ne!=="MultiPolygon"){if(Ne==="GeometryCollection"){for(et=0;et<ie.geometry.geometries.length;et++)Ot(ve,{id:ze,geometry:ie.geometry.geometries[et],properties:ie.properties},oe,xe);return}throw new Error("Input data is not a valid GeoJSON object.")}for(et=0;et<Ie.length;et++){var It=[];nr(Ie[et],It,qe,!0),We.push(It)}}ve.push(Be(ze,Ne,We,ie.properties))}}function qt(ve,ie){ie.push(tr(ve[0])),ie.push(Yt(ve[1])),ie.push(0)}function Pt(ve,ie,oe,xe){for(var Ie,Ne,qe=0,We=0;We<ve.length;We++){var ze=tr(ve[We][0]),et=Yt(ve[We][1]);ie.push(ze),ie.push(et),ie.push(0),We>0&&(qe+=xe?(Ie*et-ze*Ne)/2:Math.sqrt(Math.pow(ze-Ie,2)+Math.pow(et-Ne,2))),Ie=ze,Ne=et}var It=ie.length-3;ie[2]=1,ft(ie,0,It,oe),ie[It+2]=1,ie.size=Math.abs(qe),ie.start=0,ie.end=ie.size}function nr(ve,ie,oe,xe){for(var Ie=0;Ie<ve.length;Ie++){var Ne=[];Pt(ve[Ie],Ne,oe,xe),ie.push(Ne)}}function tr(ve){return ve/360+.5}function Yt(ve){var ie=Math.sin(ve*Math.PI/180),oe=.5-.25*Math.log((1+ie)/(1-ie))/Math.PI;return oe<0?0:oe>1?1:oe}function or(ve,ie,oe,xe,Ie,Ne,qe,We){if(xe/=ie,Ne>=(oe/=ie)&&qe<xe)return ve;if(qe<oe||Ne>=xe)return null;for(var ze=[],et=0;et<ve.length;et++){var It=ve[et],kt=It.geometry,Tt=It.type,ur=Ie===0?It.minX:It.minY,mr=Ie===0?It.maxX:It.maxY;if(ur>=oe&&mr<xe)ze.push(It);else if(!(mr<oe||ur>=xe)){var dr=[];if(Tt==="Point"||Tt==="MultiPoint")wn(kt,dr,oe,xe,Ie);else if(Tt==="LineString")An(kt,dr,oe,xe,Ie,!1,We.lineMetrics);else if(Tt==="MultiLineString")Vr(kt,dr,oe,xe,Ie,!1);else if(Tt==="Polygon")Vr(kt,dr,oe,xe,Ie,!0);else if(Tt==="MultiPolygon")for(var gr=0;gr<kt.length;gr++){var Sr=[];Vr(kt[gr],Sr,oe,xe,Ie,!0),Sr.length&&dr.push(Sr)}if(dr.length){if(We.lineMetrics&&Tt==="LineString"){for(gr=0;gr<dr.length;gr++)ze.push(Be(It.id,Tt,dr[gr],It.tags));continue}Tt!=="LineString"&&Tt!=="MultiLineString"||(dr.length===1?(Tt="LineString",dr=dr[0]):Tt="MultiLineString"),Tt!=="Point"&&Tt!=="MultiPoint"||(Tt=dr.length===3?"Point":"MultiPoint"),ze.push(Be(It.id,Tt,dr,It.tags))}}}return ze.length?ze:null}function wn(ve,ie,oe,xe,Ie){for(var Ne=0;Ne<ve.length;Ne+=3){var qe=ve[Ne+Ie];qe>=oe&&qe<=xe&&(ie.push(ve[Ne]),ie.push(ve[Ne+1]),ie.push(ve[Ne+2]))}}function An(ve,ie,oe,xe,Ie,Ne,qe){for(var We,ze,et=ii(ve),It=Ie===0?ln:hn,kt=ve.start,Tt=0;Tt<ve.length-3;Tt+=3){var ur=ve[Tt],mr=ve[Tt+1],dr=ve[Tt+2],gr=ve[Tt+3],Sr=ve[Tt+4],yn=Ie===0?ur:mr,Nn=Ie===0?gr:Sr,Pi=!1;qe&&(We=Math.sqrt(Math.pow(ur-gr,2)+Math.pow(mr-Sr,2))),yn<oe?Nn>oe&&(ze=It(et,ur,mr,gr,Sr,oe),qe&&(et.start=kt+We*ze)):yn>xe?Nn<xe&&(ze=It(et,ur,mr,gr,Sr,xe),qe&&(et.start=kt+We*ze)):Yn(et,ur,mr,dr),Nn<oe&&yn>=oe&&(ze=It(et,ur,mr,gr,Sr,oe),Pi=!0),Nn>xe&&yn<=xe&&(ze=It(et,ur,mr,gr,Sr,xe),Pi=!0),!Ne&&Pi&&(qe&&(et.end=kt+We*ze),ie.push(et),et=ii(ve)),qe&&(kt+=We)}var Qn=ve.length-3;ur=ve[Qn],mr=ve[Qn+1],dr=ve[Qn+2],(yn=Ie===0?ur:mr)>=oe&&yn<=xe&&Yn(et,ur,mr,dr),Qn=et.length-3,Ne&&Qn>=3&&(et[Qn]!==et[0]||et[Qn+1]!==et[1])&&Yn(et,et[0],et[1],et[2]),et.length&&ie.push(et)}function ii(ve){var ie=[];return ie.size=ve.size,ie.start=ve.start,ie.end=ve.end,ie}function Vr(ve,ie,oe,xe,Ie,Ne){for(var qe=0;qe<ve.length;qe++)An(ve[qe],ie,oe,xe,Ie,Ne,!1)}function Yn(ve,ie,oe,xe){ve.push(ie),ve.push(oe),ve.push(xe)}function ln(ve,ie,oe,xe,Ie,Ne){var qe=(Ne-ie)/(xe-ie);return ve.push(Ne),ve.push(oe+(Ie-oe)*qe),ve.push(1),qe}function hn(ve,ie,oe,xe,Ie,Ne){var qe=(Ne-oe)/(Ie-oe);return ve.push(ie+(xe-ie)*qe),ve.push(Ne),ve.push(1),qe}function gn(ve,ie){for(var oe=[],xe=0;xe<ve.length;xe++){var Ie,Ne=ve[xe],qe=Ne.type;if(qe==="Point"||qe==="MultiPoint"||qe==="LineString")Ie=oi(Ne.geometry,ie);else if(qe==="MultiLineString"||qe==="Polygon"){Ie=[];for(var We=0;We<Ne.geometry.length;We++)Ie.push(oi(Ne.geometry[We],ie))}else if(qe==="MultiPolygon")for(Ie=[],We=0;We<Ne.geometry.length;We++){for(var ze=[],et=0;et<Ne.geometry[We].length;et++)ze.push(oi(Ne.geometry[We][et],ie));Ie.push(ze)}oe.push(Be(Ne.id,qe,Ie,Ne.tags))}return oe}function oi(ve,ie){var oe=[];oe.size=ve.size,ve.start!==void 0&&(oe.start=ve.start,oe.end=ve.end);for(var xe=0;xe<ve.length;xe+=3)oe.push(ve[xe]+ie,ve[xe+1],ve[xe+2]);return oe}function Wo(ve,ie){if(ve.transformed)return ve;var oe,xe,Ie,Ne=1<<ve.z,qe=ve.x,We=ve.y;for(oe=0;oe<ve.features.length;oe++){var ze=ve.features[oe],et=ze.geometry,It=ze.type;if(ze.geometry=[],It===1)for(xe=0;xe<et.length;xe+=2)ze.geometry.push(Ti(et[xe],et[xe+1],ie,Ne,qe,We));else for(xe=0;xe<et.length;xe++){var kt=[];for(Ie=0;Ie<et[xe].length;Ie+=2)kt.push(Ti(et[xe][Ie],et[xe][Ie+1],ie,Ne,qe,We));ze.geometry.push(kt)}}return ve.transformed=!0,ve}function Ti(ve,ie,oe,xe,Ie,Ne){return[Math.round(oe*(ve*xe-Ie)),Math.round(oe*(ie*xe-Ne))]}function Jn(ve,ie,oe,xe,Ie){for(var Ne=ie===Ie.maxZoom?0:Ie.tolerance/((1<<ie)*Ie.extent),qe={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:oe,y:xe,z:ie,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},We=0;We<ve.length;We++){qe.numFeatures++,qi(qe,ve[We],Ne,Ie);var ze=ve[We].minX,et=ve[We].minY,It=ve[We].maxX,kt=ve[We].maxY;ze<qe.minX&&(qe.minX=ze),et<qe.minY&&(qe.minY=et),It>qe.maxX&&(qe.maxX=It),kt>qe.maxY&&(qe.maxY=kt)}return qe}function qi(ve,ie,oe,xe){var Ie=ie.geometry,Ne=ie.type,qe=[];if(Ne==="Point"||Ne==="MultiPoint")for(var We=0;We<Ie.length;We+=3)qe.push(Ie[We]),qe.push(Ie[We+1]),ve.numPoints++,ve.numSimplified++;else if(Ne==="LineString")So(qe,Ie,ve,oe,!1,!1);else if(Ne==="MultiLineString"||Ne==="Polygon")for(We=0;We<Ie.length;We++)So(qe,Ie[We],ve,oe,Ne==="Polygon",We===0);else if(Ne==="MultiPolygon")for(var ze=0;ze<Ie.length;ze++){var et=Ie[ze];for(We=0;We<et.length;We++)So(qe,et[We],ve,oe,!0,We===0)}if(qe.length){var It=ie.tags||null;if(Ne==="LineString"&&xe.lineMetrics){for(var kt in It={},ie.tags)It[kt]=ie.tags[kt];It.mapbox_clip_start=Ie.start/Ie.size,It.mapbox_clip_end=Ie.end/Ie.size}var Tt={geometry:qe,type:Ne==="Polygon"||Ne==="MultiPolygon"?3:Ne==="LineString"||Ne==="MultiLineString"?2:1,tags:It};ie.id!==null&&(Tt.id=ie.id),ve.features.push(Tt)}}function So(ve,ie,oe,xe,Ie,Ne){var qe=xe*xe;if(xe>0&&ie.size<(Ie?qe:xe))oe.numPoints+=ie.length/3;else{for(var We=[],ze=0;ze<ie.length;ze+=3)(xe===0||ie[ze+2]>qe)&&(oe.numSimplified++,We.push(ie[ze]),We.push(ie[ze+1])),oe.numPoints++;Ie&&function(et,It){for(var kt=0,Tt=0,ur=et.length,mr=ur-2;Tt<ur;mr=Tt,Tt+=2)kt+=(et[Tt]-et[mr])*(et[Tt+1]+et[mr+1]);if(kt>0===It)for(Tt=0,ur=et.length;Tt<ur/2;Tt+=2){var dr=et[Tt],gr=et[Tt+1];et[Tt]=et[ur-2-Tt],et[Tt+1]=et[ur-1-Tt],et[ur-2-Tt]=dr,et[ur-1-Tt]=gr}}(We,Ne),ve.push(We)}}function Eo(ve,ie){var oe=(ie=this.options=function(Ie,Ne){for(var qe in Ne)Ie[qe]=Ne[qe];return Ie}(Object.create(this.options),ie)).debug;if(oe&&console.time("preprocess data"),ie.maxZoom<0||ie.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(ie.promoteId&&ie.generateId)throw new Error("promoteId and generateId cannot be used together.");var xe=function(Ie,Ne){var qe=[];if(Ie.type==="FeatureCollection")for(var We=0;We<Ie.features.length;We++)Ot(qe,Ie.features[We],Ne,We);else Ot(qe,Ie.type==="Feature"?Ie:{geometry:Ie},Ne);return qe}(ve,ie);this.tiles={},this.tileCoords=[],oe&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",ie.indexMaxZoom,ie.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),xe=function(Ie,Ne){var qe=Ne.buffer/Ne.extent,We=Ie,ze=or(Ie,1,-1-qe,qe,0,-1,2,Ne),et=or(Ie,1,1-qe,2+qe,0,-1,2,Ne);return(ze||et)&&(We=or(Ie,1,-qe,1+qe,0,-1,2,Ne)||[],ze&&(We=gn(ze,1).concat(We)),et&&(We=We.concat(gn(et,-1)))),We}(xe,ie),xe.length&&this.splitTile(xe,0,0,0),oe&&(xe.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function Ai(ve,ie,oe){return 32*((1<<ve)*oe+ie)+ve}function Ka(ve,ie){const oe=ve.tileID.canonical;if(!this._geoJSONIndex)return ie(null,null);const xe=this._geoJSONIndex.getTile(oe.z,oe.x,oe.y);if(!xe)return ie(null,null);const Ie=new class{constructor(qe){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=o.EXTENT,this.length=qe.length,this._features=qe}feature(qe){return new class{constructor(We){this._feature=We,this.extent=o.EXTENT,this.type=We.type,this.properties=We.tags,"id"in We&&!isNaN(We.id)&&(this.id=parseInt(We.id,10))}loadGeometry(){if(this._feature.type===1){const We=[];for(const ze of this._feature.geometry)We.push([new o.Point(ze[0],ze[1])]);return We}{const We=[];for(const ze of this._feature.geometry){const et=[];for(const It of ze)et.push(new o.Point(It[0],It[1]));We.push(et)}return We}}toGeoJSON(We,ze,et){return L.call(this,We,ze,et)}}(this._features[qe])}}(xe.features);let Ne=Ue(Ie);Ne.byteOffset===0&&Ne.byteLength===Ne.buffer.byteLength||(Ne=new Uint8Array(Ne)),ie(null,{vectorTile:Ie,rawData:Ne.buffer})}Eo.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},Eo.prototype.splitTile=function(ve,ie,oe,xe,Ie,Ne,qe){for(var We=[ve,ie,oe,xe],ze=this.options,et=ze.debug;We.length;){xe=We.pop(),oe=We.pop(),ie=We.pop(),ve=We.pop();var It=1<<ie,kt=Ai(ie,oe,xe),Tt=this.tiles[kt];if(!Tt&&(et>1&&console.time("creation"),Tt=this.tiles[kt]=Jn(ve,ie,oe,xe,ze),this.tileCoords.push({z:ie,x:oe,y:xe}),et)){et>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",ie,oe,xe,Tt.numFeatures,Tt.numPoints,Tt.numSimplified),console.timeEnd("creation"));var ur="z"+ie;this.stats[ur]=(this.stats[ur]||0)+1,this.total++}if(Tt.source=ve,Ie){if(ie===ze.maxZoom||ie===Ie)continue;var mr=1<<Ie-ie;if(oe!==Math.floor(Ne/mr)||xe!==Math.floor(qe/mr))continue}else if(ie===ze.indexMaxZoom||Tt.numPoints<=ze.indexMaxPoints)continue;if(Tt.source=null,ve.length!==0){et>1&&console.time("clipping");var dr,gr,Sr,yn,Nn,Pi,Qn=.5*ze.buffer/ze.extent,ga=.5-Qn,li=.5+Qn,zi=1+Qn;dr=gr=Sr=yn=null,Nn=or(ve,It,oe-Qn,oe+li,0,Tt.minX,Tt.maxX,ze),Pi=or(ve,It,oe+ga,oe+zi,0,Tt.minX,Tt.maxX,ze),ve=null,Nn&&(dr=or(Nn,It,xe-Qn,xe+li,1,Tt.minY,Tt.maxY,ze),gr=or(Nn,It,xe+ga,xe+zi,1,Tt.minY,Tt.maxY,ze),Nn=null),Pi&&(Sr=or(Pi,It,xe-Qn,xe+li,1,Tt.minY,Tt.maxY,ze),yn=or(Pi,It,xe+ga,xe+zi,1,Tt.minY,Tt.maxY,ze),Pi=null),et>1&&console.timeEnd("clipping"),We.push(dr||[],ie+1,2*oe,2*xe),We.push(gr||[],ie+1,2*oe,2*xe+1),We.push(Sr||[],ie+1,2*oe+1,2*xe),We.push(yn||[],ie+1,2*oe+1,2*xe+1)}}},Eo.prototype.getTile=function(ve,ie,oe){var xe=this.options,Ie=xe.extent,Ne=xe.debug;if(ve<0||ve>24)return null;var qe=1<<ve,We=Ai(ve,ie=(ie%qe+qe)%qe,oe);if(this.tiles[We])return Wo(this.tiles[We],Ie);Ne>1&&console.log("drilling down to z%d-%d-%d",ve,ie,oe);for(var ze,et=ve,It=ie,kt=oe;!ze&&et>0;)et--,It=Math.floor(It/2),kt=Math.floor(kt/2),ze=this.tiles[Ai(et,It,kt)];return ze&&ze.source?(Ne>1&&console.log("found parent tile z%d-%d-%d",et,It,kt),Ne>1&&console.time("drilling down"),this.splitTile(ze.source,et,It,kt,ve,ie,oe),Ne>1&&console.timeEnd("drilling down"),this.tiles[We]?Wo(this.tiles[We],Ie):null):null};class cr extends o.VectorTileWorkerSource{constructor(ie,oe,xe,Ie,Ne){super(ie,oe,xe,Ie,Ka),Ne&&(this.loadGeoJSON=Ne)}loadData(ie,oe){const xe=ie&&ie.request,Ie=xe&&xe.collectResourceTiming;this.loadGeoJSON(ie,(Ne,qe)=>{if(Ne||!qe)return oe(Ne);if(typeof qe!="object")return oe(new Error(`Input data given to '${ie.source}' is not a valid GeoJSON object.`));{k(qe,!0);try{if(ie.filter){const ze=o.createExpression(ie.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(ze.result==="error")throw new Error(ze.value.map(It=>`${It.key}: ${It.message}`).join(", "));qe={type:"FeatureCollection",features:qe.features.filter(It=>ze.value.evaluate({zoom:0},It))}}this._geoJSONIndex=ie.cluster?new at(function({superclusterOptions:ze,clusterProperties:et}){if(!et||!ze)return ze;const It={},kt={},Tt={accumulated:null,zoom:0},ur={properties:null},mr=Object.keys(et);for(const dr of mr){const[gr,Sr]=et[dr],yn=o.createExpression(Sr),Nn=o.createExpression(typeof gr=="string"?[gr,["accumulated"],["get",dr]]:gr);It[dr]=yn.value,kt[dr]=Nn.value}return ze.map=dr=>{ur.properties=dr;const gr={};for(const Sr of mr)gr[Sr]=It[Sr].evaluate(Tt,ur);return gr},ze.reduce=(dr,gr)=>{ur.properties=gr;for(const Sr of mr)Tt.accumulated=dr[Sr],dr[Sr]=kt[Sr].evaluate(Tt,ur)},ze}(ie)).load(qe.features):function(ze,et){return new Eo(ze,et)}(qe,ie.geojsonVtOptions)}catch(ze){return oe(ze)}this.loaded={};const We={};if(Ie){const ze=o.getPerformanceMeasurement(xe);ze&&(We.resourceTiming={},We.resourceTiming[ie.source]=JSON.parse(JSON.stringify(ze)))}oe(null,We)}})}reloadTile(ie,oe){const xe=this.loaded;return xe&&xe[ie.uid]?super.reloadTile(ie,oe):this.loadTile(ie,oe)}loadGeoJSON(ie,oe){if(ie.request)o.getJSON(ie.request,oe);else{if(typeof ie.data!="string")return oe(new Error(`Input data given to '${ie.source}' is not a valid GeoJSON object.`));try{return oe(null,JSON.parse(ie.data))}catch{return oe(new Error(`Input data given to '${ie.source}' is not a valid GeoJSON object.`))}}}getClusterExpansionZoom(ie,oe){try{oe(null,this._geoJSONIndex.getClusterExpansionZoom(ie.clusterId))}catch(xe){oe(xe)}}getClusterChildren(ie,oe){try{oe(null,this._geoJSONIndex.getChildren(ie.clusterId))}catch(xe){oe(xe)}}getClusterLeaves(ie,oe){try{oe(null,this._geoJSONIndex.getLeaves(ie.clusterId,ie.limit,ie.offset))}catch(xe){oe(xe)}}}class Gr{constructor(ie){this.self=ie,this.actor=new o.Actor(ie,this),this.layerIndexes={},this.availableImages={},this.isSpriteLoaded={},this.projections={},this.defaultProjection=o.getProjection({name:"mercator"}),this.workerSourceTypes={vector:o.VectorTileWorkerSource,geojson:cr},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(oe,xe)=>{if(this.workerSourceTypes[oe])throw new Error(`Worker source with name "${oe}" already registered.`);this.workerSourceTypes[oe]=xe},this.self.registerRTLTextPlugin=oe=>{if(o.plugin.isParsed())throw new Error("RTL text plugin already registered.");o.plugin.applyArabicShaping=oe.applyArabicShaping,o.plugin.processBidirectionalText=oe.processBidirectionalText,o.plugin.processStyledBidirectionalText=oe.processStyledBidirectionalText}}clearCaches(ie,oe,xe){delete this.layerIndexes[ie],delete this.availableImages[ie],delete this.workerSources[ie],delete this.demWorkerSources[ie],xe()}checkIfReady(ie,oe,xe){xe()}setReferrer(ie,oe){this.referrer=oe}spriteLoaded(ie,oe){this.isSpriteLoaded[ie]=oe;for(const xe in this.workerSources[ie]){const Ie=this.workerSources[ie][xe];for(const Ne in Ie)Ie[Ne]instanceof o.VectorTileWorkerSource&&(Ie[Ne].isSpriteLoaded=oe,Ie[Ne].fire(new o.Event("isSpriteLoaded")))}}setImages(ie,oe,xe){this.availableImages[ie]=oe;for(const Ie in this.workerSources[ie]){const Ne=this.workerSources[ie][Ie];for(const qe in Ne)Ne[qe].availableImages=oe}xe()}enableTerrain(ie,oe,xe){this.terrain=oe,xe()}setProjection(ie,oe){this.projections[ie]=o.getProjection(oe)}setLayers(ie,oe,xe){this.getLayerIndex(ie).replace(oe),xe()}updateLayers(ie,oe,xe){this.getLayerIndex(ie).update(oe.layers,oe.removedIds),xe()}loadTile(ie,oe,xe){const Ie=this.enableTerrain?o.extend({enableTerrain:this.terrain},oe):oe;Ie.projection=this.projections[ie]||this.defaultProjection,this.getWorkerSource(ie,oe.type,oe.source).loadTile(Ie,xe)}loadDEMTile(ie,oe,xe){const Ie=this.enableTerrain?o.extend({buildQuadTree:this.terrain},oe):oe;this.getDEMWorkerSource(ie,oe.source).loadTile(Ie,xe)}reloadTile(ie,oe,xe){const Ie=this.enableTerrain?o.extend({enableTerrain:this.terrain},oe):oe;Ie.projection=this.projections[ie]||this.defaultProjection,this.getWorkerSource(ie,oe.type,oe.source).reloadTile(Ie,xe)}abortTile(ie,oe,xe){this.getWorkerSource(ie,oe.type,oe.source).abortTile(oe,xe)}removeTile(ie,oe,xe){this.getWorkerSource(ie,oe.type,oe.source).removeTile(oe,xe)}removeSource(ie,oe,xe){if(!this.workerSources[ie]||!this.workerSources[ie][oe.type]||!this.workerSources[ie][oe.type][oe.source])return;const Ie=this.workerSources[ie][oe.type][oe.source];delete this.workerSources[ie][oe.type][oe.source],Ie.removeSource!==void 0?Ie.removeSource(oe,xe):xe()}loadWorkerSource(ie,oe,xe){try{this.self.importScripts(oe.url),xe()}catch(Ie){xe(Ie.toString())}}syncRTLPluginState(ie,oe,xe){try{o.plugin.setState(oe);const Ie=o.plugin.getPluginURL();if(o.plugin.isLoaded()&&!o.plugin.isParsed()&&Ie!=null){this.self.importScripts(Ie);const Ne=o.plugin.isParsed();xe(Ne?void 0:new Error(`RTL Text Plugin failed to import scripts from ${Ie}`),Ne)}}catch(Ie){xe(Ie.toString())}}getAvailableImages(ie){let oe=this.availableImages[ie];return oe||(oe=[]),oe}getLayerIndex(ie){let oe=this.layerIndexes[ie];return oe||(oe=this.layerIndexes[ie]=new S),oe}getWorkerSource(ie,oe,xe){if(this.workerSources[ie]||(this.workerSources[ie]={}),this.workerSources[ie][oe]||(this.workerSources[ie][oe]={}),!this.workerSources[ie][oe][xe]){const Ie={send:(Ne,qe,We,ze,et,It)=>{this.actor.send(Ne,qe,We,ie,et,It)},scheduler:this.actor.scheduler};this.workerSources[ie][oe][xe]=new this.workerSourceTypes[oe](Ie,this.getLayerIndex(ie),this.getAvailableImages(ie),this.isSpriteLoaded[ie])}return this.workerSources[ie][oe][xe]}getDEMWorkerSource(ie,oe){return this.demWorkerSources[ie]||(this.demWorkerSources[ie]={}),this.demWorkerSources[ie][oe]||(this.demWorkerSources[ie][oe]=new A),this.demWorkerSources[ie][oe]}enforceCacheSizeLimit(ie,oe){o.enforceCacheSizeLimit(oe)}getWorkerPerformanceMetrics(ie,oe,xe){xe(void 0,void 0)}}return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope&&(self.worker=new Gr(self)),Gr}),h(["./shared"],function(o){function _(g,c){if(Array.isArray(g)){if(!Array.isArray(c)||g.length!==c.length)return!1;for(let f=0;f<g.length;f++)if(!_(g[f],c[f]))return!1;return!0}if(typeof g=="object"&&g!==null&&c!==null){if(typeof c!="object"||Object.keys(g).length!==Object.keys(c).length)return!1;for(const f in g)if(!_(g[f],c[f]))return!1;return!0}return g===c}var E=S;function S(g){return!function(c){return typeof window>"u"||typeof document>"u"?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var v,b,T=new Blob([""],{type:"text/javascript"}),O=URL.createObjectURL(T);try{b=new Worker(O),v=!0}catch{v=!1}return b&&b.terminate(),URL.revokeObjectURL(O),v}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var v=document.createElement("canvas");v.width=v.height=1;var b=v.getContext("2d");if(!b)return!1;var T=b.getImageData(0,0,1,1);return T&&T.width===v.width}()?(A[f=c&&c.failIfMajorPerformanceCaveat]===void 0&&(A[f]=function(v){var b,T=function(O){var D=document.createElement("canvas"),B=Object.create(S.webGLContextAttributes);return B.failIfMajorPerformanceCaveat=O,D.getContext("webgl",B)||D.getContext("experimental-webgl",B)}(v);if(!T)return!1;try{b=T.createShader(T.VERTEX_SHADER)}catch{return!1}return!(!b||T.isContextLost())&&(T.shaderSource(b,"void main() {}"),T.compileShader(b),T.getShaderParameter(b,T.COMPILE_STATUS)===!0)}(f)),A[f]?document.documentMode?"insufficient ECMAScript 6 support":void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var f}(g)}var A={};function I(g,c,f){const v=o.window.document.createElement(g);return c!==void 0&&(v.className=c),f&&f.appendChild(v),v}function R(g,c,f){const v=o.window.document.createElementNS("http://www.w3.org/2000/svg",g);for(const b of Object.keys(c))v.setAttributeNS(null,b,c[b]);return f&&f.appendChild(v),v}S.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};const k=o.window.document&&o.window.document.documentElement.style,L=k&&k.userSelect!==void 0?"userSelect":"WebkitUserSelect";let N;function z(){k&&L&&(N=k[L],k[L]="none")}function F(){k&&L&&(k[L]=N)}function U(g){g.preventDefault(),g.stopPropagation(),o.window.removeEventListener("click",U,!0)}function W(){o.window.addEventListener("click",U,!0),o.window.setTimeout(()=>{o.window.removeEventListener("click",U,!0)},0)}function Y(g,c){const f=g.getBoundingClientRect();return re(g,f,c)}function Q(g,c){const f=g.getBoundingClientRect(),v=[];for(let b=0;b<c.length;b++)v.push(re(g,f,c[b]));return v}function Z(g){return o.window.InstallTrigger!==void 0&&g.button===2&&g.ctrlKey&&o.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:g.button}function re(g,c,f){const v=g.offsetWidth===c.width?1:g.offsetWidth/c.width;return new o.Point((f.clientX-c.left)*v,(f.clientY-c.top)*v)}function ne(g,c){var f=c[0],v=c[1],b=c[2],T=c[3],O=f*T-b*v;return O?(g[0]=T*(O=1/O),g[1]=-v*O,g[2]=-b*O,g[3]=f*O,g):null}function ue(g){const{userImage:c}=g;return!!(c&&c.render&&c.render())&&(g.data.replace(new Uint8Array(c.data.buffer)),!0)}class fe extends o.Evented{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new o.RGBAImage({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(c){if(this.loaded!==c&&(this.loaded=c,c)){for(const{ids:f,callback:v}of this.requestors)this._notify(f,v);this.requestors=[]}}hasImage(c){return!!this.getImage(c)}getImage(c){return this.images[c]}addImage(c,f){this._validate(c,f)&&(this.images[c]=f)}_validate(c,f){let v=!0;return this._validateStretch(f.stretchX,f.data&&f.data.width)||(this.fire(new o.ErrorEvent(new Error(`Image "${c}" has invalid "stretchX" value`))),v=!1),this._validateStretch(f.stretchY,f.data&&f.data.height)||(this.fire(new o.ErrorEvent(new Error(`Image "${c}" has invalid "stretchY" value`))),v=!1),this._validateContent(f.content,f)||(this.fire(new o.ErrorEvent(new Error(`Image "${c}" has invalid "content" value`))),v=!1),v}_validateStretch(c,f){if(!c)return!0;let v=0;for(const b of c){if(b[0]<v||b[1]<b[0]||f<b[1])return!1;v=b[1]}return!0}_validateContent(c,f){return!(c&&(c.length!==4||c[0]<0||f.data.width<c[0]||c[1]<0||f.data.height<c[1]||c[2]<0||f.data.width<c[2]||c[3]<0||f.data.height<c[3]||c[2]<c[0]||c[3]<c[1]))}updateImage(c,f){f.version=this.images[c].version+1,this.images[c]=f,this.updatedImages[c]=!0}removeImage(c){const f=this.images[c];delete this.images[c],delete this.patterns[c],f.userImage&&f.userImage.onRemove&&f.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(c,f){let v=!0;if(!this.isLoaded())for(const b of c)this.images[b]||(v=!1);this.isLoaded()||v?this._notify(c,f):this.requestors.push({ids:c,callback:f})}_notify(c,f){const v={};for(const b of c){this.images[b]||this.fire(new o.Event("styleimagemissing",{id:b}));const T=this.images[b];T?v[b]={data:T.data.clone(),pixelRatio:T.pixelRatio,sdf:T.sdf,version:T.version,stretchX:T.stretchX,stretchY:T.stretchY,content:T.content,hasRenderCallback:!!(T.userImage&&T.userImage.render)}:o.warnOnce(`Image "${b}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}f(null,v)}getPixelSize(){const{width:c,height:f}=this.atlasImage;return{width:c,height:f}}getPattern(c){const f=this.patterns[c],v=this.getImage(c);if(!v)return null;if(f&&f.position.version===v.version)return f.position;if(f)f.position.version=v.version;else{const b={w:v.data.width+2,h:v.data.height+2,x:0,y:0},T=new o.ImagePosition(b,v);this.patterns[c]={bin:b,position:T}}return this._updatePatternAtlas(),this.patterns[c].position}bind(c){const f=c.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new o.Texture(c,this.atlasImage,f.RGBA),this.atlasTexture&&this.atlasTexture.bind(f.LINEAR,f.CLAMP_TO_EDGE)}_updatePatternAtlas(){const c=[];for(const T in this.patterns)c.push(this.patterns[T].bin);const{w:f,h:v}=o.potpack(c),b=this.atlasImage;b.resize({width:f||1,height:v||1});for(const T in this.patterns){const{bin:O}=this.patterns[T],D=O.x+1,B=O.y+1,H=this.images[T].data,q=H.width,J=H.height;o.RGBAImage.copy(H,b,{x:0,y:0},{x:D,y:B},{width:q,height:J}),o.RGBAImage.copy(H,b,{x:0,y:J-1},{x:D,y:B-1},{width:q,height:1}),o.RGBAImage.copy(H,b,{x:0,y:0},{x:D,y:B+J},{width:q,height:1}),o.RGBAImage.copy(H,b,{x:q-1,y:0},{x:D-1,y:B},{width:1,height:J}),o.RGBAImage.copy(H,b,{x:0,y:0},{x:D+q,y:B},{width:1,height:J})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(c){for(const f of c){if(this.callbackDispatchedThisFrame[f])continue;this.callbackDispatchedThisFrame[f]=!0;const v=this.images[f];ue(v)&&this.updateImage(f,v)}}}const Ee=new o.Properties({anchor:new o.DataConstantProperty(o.spec.light.anchor),position:new class{constructor(){this.specification=o.spec.light.position}possiblyEvaluate(g,c){return function([f,v,b]){const T=o.degToRad(v+90),O=o.degToRad(b);return{x:f*Math.cos(T)*Math.sin(O),y:f*Math.sin(T)*Math.sin(O),z:f*Math.cos(O),azimuthal:v,polar:b}}(g.expression.evaluate(c))}interpolate(g,c,f){return{x:o.number(g.x,c.x,f),y:o.number(g.y,c.y,f),z:o.number(g.z,c.z,f),azimuthal:o.number(g.azimuthal,c.azimuthal,f),polar:o.number(g.polar,c.polar,f)}}},color:new o.DataConstantProperty(o.spec.light.color),intensity:new o.DataConstantProperty(o.spec.light.intensity)});class Se extends o.Evented{constructor(c){super(),this._transitionable=new o.Transitionable(Ee),this.setLight(c),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(c,f={}){if(!this._validate(o.validateLight,c,f))for(const v in c){const b=c[v];o.endsWith(v,"-transition")?this._transitionable.setTransition(v.slice(0,-11),b):this._transitionable.setValue(v,b)}}updateTransitions(c){this._transitioning=this._transitionable.transitioned(c,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(c){this.properties=this._transitioning.possiblyEvaluate(c)}_validate(c,f,v){return(!v||v.validate!==!1)&&o.emitValidationErrors(this,c.call(o.validateStyle,o.extend({value:f,style:{glyphs:!0,sprite:!0},styleSpec:o.spec})))}}const je=new o.Properties({source:new o.DataConstantProperty(o.spec.terrain.source),exaggeration:new o.DataConstantProperty(o.spec.terrain.exaggeration)});let Le=class extends o.Evented{constructor(g,c){super(),this._transitionable=new o.Transitionable(je),this.set(g),this._transitioning=this._transitionable.untransitioned(),this.drapeRenderMode=c}get(){return this._transitionable.serialize()}set(g){for(const c in g){const f=g[c];o.endsWith(c,"-transition")?this._transitionable.setTransition(c.slice(0,-11),f):this._transitionable.setValue(c,f)}}updateTransitions(g){this._transitioning=this._transitionable.transitioned(g,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(g){this.properties=this._transitioning.possiblyEvaluate(g)}};function Ue(g,c,f,v){const b=o.smoothstep(45,65,f),[T,O]=we(g,v),D=o.length(c);let B=1-Math.min(1,Math.exp((D-T)/(O-T)*-6));return B*=B*B,B=Math.min(1,1.00747*B),B*b*g.alpha}function we(g,c){const f=.5/Math.tan(.5*c);return[g.range[0]+f,g.range[1]+f]}const Pe=new o.Properties({range:new o.DataConstantProperty(o.spec.fog.range),color:new o.DataConstantProperty(o.spec.fog.color),"high-color":new o.DataConstantProperty(o.spec.fog["high-color"]),"space-color":new o.DataConstantProperty(o.spec.fog["space-color"]),"horizon-blend":new o.DataConstantProperty(o.spec.fog["horizon-blend"]),"star-intensity":new o.DataConstantProperty(o.spec.fog["star-intensity"])});class rt extends o.Evented{constructor(c,f){super(),this._transitionable=new o.Transitionable(Pe),this.set(c),this._transitioning=this._transitionable.untransitioned(),this._transform=f}get state(){const c=this._transform,f=c.projection.name==="globe",v=o.globeToMercatorTransition(c.zoom),b=this.properties.get("range"),T=[.5,3];return{range:f?[o.number(T[0],b[0],v),o.number(T[1],b[1],v)]:b,horizonBlend:this.properties.get("horizon-blend"),alpha:this.properties.get("color").a}}get(){return this._transitionable.serialize()}set(c,f={}){if(!this._validate(o.validateFog,c,f)){for(const v of Object.keys(o.spec.fog))c&&c[v]===void 0&&(c[v]=o.spec.fog[v].default);for(const v in c){const b=c[v];o.endsWith(v,"-transition")?this._transitionable.setTransition(v.slice(0,-11),b):this._transitionable.setValue(v,b)}}}getOpacity(c){if(!this._transform.projection.supportsFog)return 0;const f=this.properties&&this.properties.get("color")||1;return(this._transform.projection.name==="globe"?1:o.smoothstep(45,65,c))*f.a}getOpacityAtLatLng(c,f){return this._transform.projection.supportsFog?function(v,b,T){const O=o.MercatorCoordinate.fromLngLat(b),D=T.elevation?T.elevation.getAtPointOrZero(O):0,B=[O.x,O.y,D];return o.transformMat4(B,B,T.mercatorFogMatrix),Ue(v,B,T.pitch,T._fov)}(this.state,c,f):0}getFovAdjustedRange(c){return this._transform.projection.supportsFog?we(this.state,c):[0,1]}updateTransitions(c){this._transitioning=this._transitionable.transitioned(c,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(c){this.properties=this._transitioning.possiblyEvaluate(c)}_validate(c,f,v){return(!v||v.validate!==!1)&&o.emitValidationErrors(this,c.call(o.validateStyle,o.extend({value:f,style:{glyphs:!0,sprite:!0},styleSpec:o.spec})))}}class $e{constructor(c,f){this.workerPool=c,this.actors=[],this.currentActor=0,this.id=o.uniqueId();const v=this.workerPool.acquire(this.id);for(let b=0;b<v.length;b++){const T=new $e.Actor(v[b],f,this.id);T.name=`Worker ${b}`,this.actors.push(T)}this.ready=!1,this.broadcast("checkIfReady",null,()=>{this.ready=!0})}broadcast(c,f,v){o.asyncAll(this.actors,(b,T)=>{b.send(c,f,T)},v=v||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach(c=>{c.remove()}),this.actors=[],this.workerPool.release(this.id)}}function Ge(g,c,f){return c*(o.EXTENT/(g.tileSize*Math.pow(2,f-g.tileID.overscaledZ)))}$e.Actor=o.Actor;class Re{constructor(c,f,v,b){this.screenBounds=c,this.cameraPoint=f,this._screenRaycastCache={},this._cameraRaycastCache={},this.isAboveHorizon=v,this.screenGeometry=this.bufferedScreenGeometry(0),this.screenGeometryMercator=this._bufferedScreenMercator(0,b)}static createFromScreenPoints(c,f){let v,b;if(c instanceof o.Point||typeof c[0]=="number"){const T=o.Point.convert(c);v=[T],b=f.isPointAboveHorizon(T)}else{const T=o.Point.convert(c[0]),O=o.Point.convert(c[1]);v=[T,O],b=o.polygonizeBounds(T,O).every(D=>f.isPointAboveHorizon(D))}return new Re(v,f.getCameraPoint(),b,f)}isPointQuery(){return this.screenBounds.length===1}bufferedScreenGeometry(c){return o.polygonizeBounds(this.screenBounds[0],this.screenBounds.length===1?this.screenBounds[0]:this.screenBounds[1],c)}bufferedCameraGeometry(c){const f=this.screenBounds[0],v=this.screenBounds.length===1?this.screenBounds[0].add(new o.Point(1,1)):this.screenBounds[1],b=o.polygonizeBounds(f,v,0,!1);return this.cameraPoint.y>v.y&&(this.cameraPoint.x>f.x&&this.cameraPoint.x<v.x?b.splice(3,0,this.cameraPoint):this.cameraPoint.x>=v.x?b[2]=this.cameraPoint:this.cameraPoint.x<=f.x&&(b[3]=this.cameraPoint)),o.bufferConvexPolygon(b,c)}bufferedCameraGeometryGlobe(c){const f=this.screenBounds[0],v=this.screenBounds.length===1?this.screenBounds[0].add(new o.Point(1,1)):this.screenBounds[1],b=o.polygonizeBounds(f,v,c),T=this.cameraPoint.clone();switch(3*((T.y>f.y)+(T.y>v.y))+((T.x>f.x)+(T.x>v.x))){case 0:b[0]=T,b[4]=T.clone();break;case 1:b.splice(1,0,T);break;case 2:b[1]=T;break;case 3:b.splice(4,0,T);break;case 5:b.splice(2,0,T);break;case 6:b[3]=T;break;case 7:b.splice(3,0,T);break;case 8:b[2]=T}return b}containsTile(c,f,v,b=0){const T=c.queryPadding/f._pixelsPerMercatorPixel+1,O=v?this._bufferedCameraMercator(T,f):this._bufferedScreenMercator(T,f);let D=c.tileID.wrap+(O.unwrapped?b:0);const B=O.polygon.map(pe=>o.getTilePoint(c.tileTransform,pe,D));if(!o.polygonIntersectsBox(B,0,0,o.EXTENT,o.EXTENT))return;D=c.tileID.wrap+(this.screenGeometryMercator.unwrapped?b:0);const H=this.screenGeometryMercator.polygon.map(pe=>o.getTileVec3(c.tileTransform,pe,D)),q=H.map(pe=>new o.Point(pe[0],pe[1])),J=f.getFreeCameraOptions().position||new o.MercatorCoordinate(0,0,0),ae=o.getTileVec3(c.tileTransform,J,D),ce=H.map(pe=>{const ee=o.sub(pe,pe,ae);return o.normalize(ee,ee),new o.Ray(ae,ee)}),he=Ge(c,1,f.zoom)*f._pixelsPerMercatorPixel;return{queryGeometry:this,tilespaceGeometry:q,tilespaceRays:ce,bufferedTilespaceGeometry:B,bufferedTilespaceBounds:(de=o.getBounds(B),de.min.x=o.clamp(de.min.x,0,o.EXTENT),de.min.y=o.clamp(de.min.y,0,o.EXTENT),de.max.x=o.clamp(de.max.x,0,o.EXTENT),de.max.y=o.clamp(de.max.y,0,o.EXTENT),de),tile:c,tileID:c.tileID,pixelToTileUnitsFactor:he};var de}_bufferedScreenMercator(c,f){const v=vt(c);if(this._screenRaycastCache[v])return this._screenRaycastCache[v];{let b;return b=f.projection.name==="globe"?this._projectAndResample(this.bufferedScreenGeometry(c),f):{polygon:this.bufferedScreenGeometry(c).map(T=>f.pointCoordinate3D(T)),unwrapped:!0},this._screenRaycastCache[v]=b,b}}_bufferedCameraMercator(c,f){const v=vt(c);if(this._cameraRaycastCache[v])return this._cameraRaycastCache[v];{let b;return b=f.projection.name==="globe"?this._projectAndResample(this.bufferedCameraGeometryGlobe(c),f):{polygon:this.bufferedCameraGeometry(c).map(T=>f.pointCoordinate3D(T)),unwrapped:!0},this._cameraRaycastCache[v]=b,b}}_projectAndResample(c,f){const v=function(T,O){const D=o.multiply([],O.pixelMatrix,O.globeMatrix),B=[0,-o.GLOBE_RADIUS,0,1],H=[0,o.GLOBE_RADIUS,0,1],q=[0,0,0,1];o.transformMat4$1(B,B,D),o.transformMat4$1(H,H,D),o.transformMat4$1(q,q,D);const J=new o.Point(B[0]/B[3],B[1]/B[3]),ae=new o.Point(H[0]/H[3],H[1]/H[3]),ce=o.polygonContainsPoint(T,J)&&B[3]<q[3],he=o.polygonContainsPoint(T,ae)&&H[3]<q[3];if(!ce&&!he)return null;const de=function(ke,Ve,Fe){for(let Ke=1;Ke<ke.length;Ke++){const xt=Et(Ve.pointCoordinate3D(ke[Ke-1]).x),He=Et(Ve.pointCoordinate3D(ke[Ke]).x);if(Fe<0){if(xt<He)return{idx:Ke,t:-xt/(He-1-xt)}}else if(He<xt)return{idx:Ke,t:(1-xt)/(He+1-xt)}}return null}(T,O,ce?-1:1);if(!de)return null;const{idx:pe,t:ee}=de;let le=pe>1?at(T.slice(0,pe),O):[],ye=pe<T.length?at(T.slice(pe),O):[];le=le.map(ke=>new o.Point(Et(ke.x),ke.y)),ye=ye.map(ke=>new o.Point(Et(ke.x),ke.y));const _e=[...le];_e.length===0&&_e.push(ye[ye.length-1]);const Oe=o.number(_e[_e.length-1].y,(ye.length===0?le[0]:ye[0]).y,ee);let De;return De=ce?[new o.Point(0,Oe),new o.Point(0,0),new o.Point(1,0),new o.Point(1,Oe)]:[new o.Point(1,Oe),new o.Point(1,1),new o.Point(0,1),new o.Point(0,Oe)],_e.push(...De),ye.length===0?_e.push(le[0]):_e.push(...ye),{polygon:_e.map(ke=>new o.MercatorCoordinate(ke.x,ke.y)),unwrapped:!1}}(c,f);if(v)return v;const b=function(T,O){let D=!1,B=-1/0,H=0;for(let J=0;J<T.length-1;J++)T[J].x>B&&(B=T[J].x,H=J);for(let J=0;J<T.length-1;J++){const ae=(H+J)%(T.length-1),ce=T[ae],he=T[ae+1];Math.abs(ce.x-he.x)>.5&&(ce.x<he.x?(ce.x+=1,ae===0&&(T[T.length-1].x+=1)):(he.x+=1,ae+1===T.length-1&&(T[0].x+=1)),D=!0)}const q=o.mercatorXfromLng(O.center.lng);return D&&q<Math.abs(q-1)&&T.forEach(J=>{J.x-=1}),{polygon:T,unwrapped:D}}(at(c,f).map(T=>new o.Point(Et(T.x),T.y)),f);return{polygon:b.polygon.map(T=>new o.MercatorCoordinate(T.x,T.y)),unwrapped:b.unwrapped}}}function at(g,c){return o.resample(g,f=>{const v=c.pointCoordinate3D(f);f.x=v.x,f.y=v.y},1/256)}function Et(g){return g<0?1+g%1:g%1}function vt(g){return 100*g|0}function lt(g,c,f,v,b){const T=function(O,D){if(O)return b(O);if(D){g.url&&D.tiles&&g.tiles&&delete g.tiles;const B=o.pick(o.extend(D,g),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);D.vector_layers&&(B.vectorLayers=D.vector_layers,B.vectorLayerIds=B.vectorLayers.map(H=>H.id)),B.tiles=c.canonicalizeTileset(B,g.url),b(null,B)}};return g.url?o.getJSON(c.transformRequest(c.normalizeSourceURL(g.url,null,f,v),o.ResourceType.Source),T):o.exported.frame(()=>T(null,g))}class gt{constructor(c,f,v){this.bounds=o.LngLatBounds.convert(this.validateBounds(c)),this.minzoom=f||0,this.maxzoom=v||24}validateBounds(c){return Array.isArray(c)&&c.length===4?[Math.max(-180,c[0]),Math.max(-90,c[1]),Math.min(180,c[2]),Math.min(90,c[3])]:[-180,-90,180,90]}contains(c){const f=Math.pow(2,c.z),v=Math.floor(o.mercatorXfromLng(this.bounds.getWest())*f),b=Math.floor(o.mercatorYfromLat(this.bounds.getNorth())*f),T=Math.ceil(o.mercatorXfromLng(this.bounds.getEast())*f),O=Math.ceil(o.mercatorYfromLat(this.bounds.getSouth())*f);return c.x>=v&&c.x<T&&c.y>=b&&c.y<O}}class tt{constructor(c,f,v){this.context=c;const b=c.gl;this.buffer=b.createBuffer(),this.dynamicDraw=!!v,this.context.unbindVAO(),c.bindElementBuffer.set(this.buffer),b.bufferData(b.ELEMENT_ARRAY_BUFFER,f.arrayBuffer,this.dynamicDraw?b.DYNAMIC_DRAW:b.STATIC_DRAW),this.dynamicDraw||f.destroy()}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(c){const f=this.context.gl;this.context.unbindVAO(),this.bind(),f.bufferSubData(f.ELEMENT_ARRAY_BUFFER,0,c.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const ft={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class ht{constructor(c,f,v,b){this.length=f.length,this.attributes=v,this.itemSize=f.bytesPerElement,this.dynamicDraw=b,this.context=c;const T=c.gl;this.buffer=T.createBuffer(),c.bindVertexBuffer.set(this.buffer),T.bufferData(T.ARRAY_BUFFER,f.arrayBuffer,this.dynamicDraw?T.DYNAMIC_DRAW:T.STATIC_DRAW),this.dynamicDraw||f.destroy()}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(c){const f=this.context.gl;this.bind(),f.bufferSubData(f.ARRAY_BUFFER,0,c.arrayBuffer)}enableAttributes(c,f){for(let v=0;v<this.attributes.length;v++){const b=f.attributes[this.attributes[v].name];b!==void 0&&c.enableVertexAttribArray(b)}}setVertexAttribPointers(c,f,v){for(let b=0;b<this.attributes.length;b++){const T=this.attributes[b],O=f.attributes[T.name];O!==void 0&&c.vertexAttribPointer(O,T.components,c[ft[T.type]],!1,this.itemSize,T.offset+this.itemSize*(v||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class Be{constructor(c){this.gl=c.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(c){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class zt extends Be{getDefault(){return o.Color.transparent}set(c){const f=this.current;(c.r!==f.r||c.g!==f.g||c.b!==f.b||c.a!==f.a||this.dirty)&&(this.gl.clearColor(c.r,c.g,c.b,c.a),this.current=c,this.dirty=!1)}}class Ot extends Be{getDefault(){return 1}set(c){(c!==this.current||this.dirty)&&(this.gl.clearDepth(c),this.current=c,this.dirty=!1)}}class qt extends Be{getDefault(){return 0}set(c){(c!==this.current||this.dirty)&&(this.gl.clearStencil(c),this.current=c,this.dirty=!1)}}class Pt extends Be{getDefault(){return[!0,!0,!0,!0]}set(c){const f=this.current;(c[0]!==f[0]||c[1]!==f[1]||c[2]!==f[2]||c[3]!==f[3]||this.dirty)&&(this.gl.colorMask(c[0],c[1],c[2],c[3]),this.current=c,this.dirty=!1)}}class nr extends Be{getDefault(){return!0}set(c){(c!==this.current||this.dirty)&&(this.gl.depthMask(c),this.current=c,this.dirty=!1)}}class tr extends Be{getDefault(){return 255}set(c){(c!==this.current||this.dirty)&&(this.gl.stencilMask(c),this.current=c,this.dirty=!1)}}class Yt extends Be{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(c){const f=this.current;(c.func!==f.func||c.ref!==f.ref||c.mask!==f.mask||this.dirty)&&(this.gl.stencilFunc(c.func,c.ref,c.mask),this.current=c,this.dirty=!1)}}class or extends Be{getDefault(){const c=this.gl;return[c.KEEP,c.KEEP,c.KEEP]}set(c){const f=this.current;(c[0]!==f[0]||c[1]!==f[1]||c[2]!==f[2]||this.dirty)&&(this.gl.stencilOp(c[0],c[1],c[2]),this.current=c,this.dirty=!1)}}class wn extends Be{getDefault(){return!1}set(c){if(c===this.current&&!this.dirty)return;const f=this.gl;c?f.enable(f.STENCIL_TEST):f.disable(f.STENCIL_TEST),this.current=c,this.dirty=!1}}class An extends Be{getDefault(){return[0,1]}set(c){const f=this.current;(c[0]!==f[0]||c[1]!==f[1]||this.dirty)&&(this.gl.depthRange(c[0],c[1]),this.current=c,this.dirty=!1)}}class ii extends Be{getDefault(){return!1}set(c){if(c===this.current&&!this.dirty)return;const f=this.gl;c?f.enable(f.DEPTH_TEST):f.disable(f.DEPTH_TEST),this.current=c,this.dirty=!1}}class Vr extends Be{getDefault(){return this.gl.LESS}set(c){(c!==this.current||this.dirty)&&(this.gl.depthFunc(c),this.current=c,this.dirty=!1)}}class Yn extends Be{getDefault(){return!1}set(c){if(c===this.current&&!this.dirty)return;const f=this.gl;c?f.enable(f.BLEND):f.disable(f.BLEND),this.current=c,this.dirty=!1}}class ln extends Be{getDefault(){const c=this.gl;return[c.ONE,c.ZERO]}set(c){const f=this.current;(c[0]!==f[0]||c[1]!==f[1]||this.dirty)&&(this.gl.blendFunc(c[0],c[1]),this.current=c,this.dirty=!1)}}class hn extends Be{getDefault(){return o.Color.transparent}set(c){const f=this.current;(c.r!==f.r||c.g!==f.g||c.b!==f.b||c.a!==f.a||this.dirty)&&(this.gl.blendColor(c.r,c.g,c.b,c.a),this.current=c,this.dirty=!1)}}class gn extends Be{getDefault(){return this.gl.FUNC_ADD}set(c){(c!==this.current||this.dirty)&&(this.gl.blendEquation(c),this.current=c,this.dirty=!1)}}class oi extends Be{getDefault(){return!1}set(c){if(c===this.current&&!this.dirty)return;const f=this.gl;c?f.enable(f.CULL_FACE):f.disable(f.CULL_FACE),this.current=c,this.dirty=!1}}class Wo extends Be{getDefault(){return this.gl.BACK}set(c){(c!==this.current||this.dirty)&&(this.gl.cullFace(c),this.current=c,this.dirty=!1)}}class Ti extends Be{getDefault(){return this.gl.CCW}set(c){(c!==this.current||this.dirty)&&(this.gl.frontFace(c),this.current=c,this.dirty=!1)}}let Jn,qi=class extends Be{getDefault(){return null}set(g){(g!==this.current||this.dirty)&&(this.gl.useProgram(g),this.current=g,this.dirty=!1)}};class So extends Be{getDefault(){return this.gl.TEXTURE0}set(c){(c!==this.current||this.dirty)&&(this.gl.activeTexture(c),this.current=c,this.dirty=!1)}}class Eo extends Be{getDefault(){const c=this.gl;return[0,0,c.drawingBufferWidth,c.drawingBufferHeight]}set(c){const f=this.current;(c[0]!==f[0]||c[1]!==f[1]||c[2]!==f[2]||c[3]!==f[3]||this.dirty)&&(this.gl.viewport(c[0],c[1],c[2],c[3]),this.current=c,this.dirty=!1)}}class Ai extends Be{getDefault(){return null}set(c){if(c===this.current&&!this.dirty)return;const f=this.gl;f.bindFramebuffer(f.FRAMEBUFFER,c),this.current=c,this.dirty=!1}}class Ka extends Be{getDefault(){return null}set(c){if(c===this.current&&!this.dirty)return;const f=this.gl;f.bindRenderbuffer(f.RENDERBUFFER,c),this.current=c,this.dirty=!1}}class cr extends Be{getDefault(){return null}set(c){if(c===this.current&&!this.dirty)return;const f=this.gl;f.bindTexture(f.TEXTURE_2D,c),this.current=c,this.dirty=!1}}class Gr extends Be{getDefault(){return null}set(c){if(c===this.current&&!this.dirty)return;const f=this.gl;f.bindBuffer(f.ARRAY_BUFFER,c),this.current=c,this.dirty=!1}}class ve extends Be{getDefault(){return null}set(c){const f=this.gl;f.bindBuffer(f.ELEMENT_ARRAY_BUFFER,c),this.current=c,this.dirty=!1}}class ie extends Be{constructor(c){super(c),this.vao=c.extVertexArrayObject}getDefault(){return null}set(c){this.vao&&(c!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(c),this.current=c,this.dirty=!1)}}class oe extends Be{getDefault(){return 4}set(c){if(c===this.current&&!this.dirty)return;const f=this.gl;f.pixelStorei(f.UNPACK_ALIGNMENT,c),this.current=c,this.dirty=!1}}class xe extends Be{getDefault(){return!1}set(c){if(c===this.current&&!this.dirty)return;const f=this.gl;f.pixelStorei(f.UNPACK_PREMULTIPLY_ALPHA_WEBGL,c),this.current=c,this.dirty=!1}}class Ie extends Be{getDefault(){return!1}set(c){if(c===this.current&&!this.dirty)return;const f=this.gl;f.pixelStorei(f.UNPACK_FLIP_Y_WEBGL,c),this.current=c,this.dirty=!1}}class Ne extends Be{constructor(c,f){super(c),this.context=c,this.parent=f}getDefault(){return null}}class qe extends Ne{setDirty(){this.dirty=!0}set(c){if(c===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const f=this.gl;f.framebufferTexture2D(f.FRAMEBUFFER,f.COLOR_ATTACHMENT0,f.TEXTURE_2D,c,0),this.current=c,this.dirty=!1}}class We extends Ne{attachment(){return this.gl.DEPTH_ATTACHMENT}set(c){if(c===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const f=this.gl;f.framebufferRenderbuffer(f.FRAMEBUFFER,this.attachment(),f.RENDERBUFFER,c),this.current=c,this.dirty=!1}}class ze extends We{attachment(){return this.gl.DEPTH_STENCIL_ATTACHMENT}}class et{constructor(c,f,v,b){this.context=c,this.width=f,this.height=v;const T=this.framebuffer=c.gl.createFramebuffer();this.colorAttachment=new qe(c,T),b&&(this.depthAttachment=new We(c,T))}destroy(){const c=this.context.gl,f=this.colorAttachment.get();if(f&&c.deleteTexture(f),this.depthAttachment){const v=this.depthAttachment.get();v&&c.deleteRenderbuffer(v)}c.deleteFramebuffer(this.framebuffer)}}class It{constructor(c,f=!1){if(this.gl=c,this.isWebGL2=f,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),f){const v=c;this.extVertexArrayObject={createVertexArrayOES:v.createVertexArray.bind(c),deleteVertexArrayOES:v.deleteVertexArray.bind(c),bindVertexArrayOES:v.bindVertexArray.bind(c)}}this.clearColor=new zt(this),this.clearDepth=new Ot(this),this.clearStencil=new qt(this),this.colorMask=new Pt(this),this.depthMask=new nr(this),this.stencilMask=new tr(this),this.stencilFunc=new Yt(this),this.stencilOp=new or(this),this.stencilTest=new wn(this),this.depthRange=new An(this),this.depthTest=new ii(this),this.depthFunc=new Vr(this),this.blend=new Yn(this),this.blendFunc=new ln(this),this.blendColor=new hn(this),this.blendEquation=new gn(this),this.cullFace=new oi(this),this.cullFaceSide=new Wo(this),this.frontFace=new Ti(this),this.program=new qi(this),this.activeTexture=new So(this),this.viewport=new Eo(this),this.bindFramebuffer=new Ai(this),this.bindRenderbuffer=new Ka(this),this.bindTexture=new cr(this),this.bindVertexBuffer=new Gr(this),this.bindElementBuffer=new ve(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new ie(this),this.pixelStoreUnpack=new oe(this),this.pixelStoreUnpackPremultiplyAlpha=new xe(this),this.pixelStoreUnpackFlipY=new Ie(this),this.extTextureFilterAnisotropic=c.getExtension("EXT_texture_filter_anisotropic")||c.getExtension("MOZ_EXT_texture_filter_anisotropic")||c.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=c.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureFilterAnisotropicForceOff=!1,this.extStandardDerivativesForceOff=!1,this.extDebugRendererInfo=c.getExtension("WEBGL_debug_renderer_info"),this.extDebugRendererInfo&&(this.renderer=c.getParameter(this.extDebugRendererInfo.UNMASKED_RENDERER_WEBGL),this.vendor=c.getParameter(this.extDebugRendererInfo.UNMASKED_VENDOR_WEBGL)),f||(this.extTextureHalfFloat=c.getExtension("OES_texture_half_float")),(f||this.extTextureHalfFloat&&c.getExtension("OES_texture_half_float_linear"))&&(this.extRenderToTextureHalfFloat=c.getExtension("EXT_color_buffer_half_float")),this.extStandardDerivatives=f||c.getExtension("OES_standard_derivatives"),this.extTimerQuery=c.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=c.getParameter(c.MAX_TEXTURE_SIZE)}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(c,f){return new tt(this,c,f)}createVertexBuffer(c,f,v){return new ht(this,c,f,v)}createRenderbuffer(c,f,v){const b=this.gl,T=b.createRenderbuffer();return this.bindRenderbuffer.set(T),b.renderbufferStorage(b.RENDERBUFFER,c,f,v),this.bindRenderbuffer.set(null),T}createFramebuffer(c,f,v){return new et(this,c,f,v)}clear({color:c,depth:f,stencil:v}){const b=this.gl;let T=0;c&&(T|=b.COLOR_BUFFER_BIT,this.clearColor.set(c),this.colorMask.set([!0,!0,!0,!0])),f!==void 0&&(T|=b.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(f),this.depthMask.set(!0)),v!==void 0&&(T|=b.STENCIL_BUFFER_BIT,this.clearStencil.set(v),this.stencilMask.set(255)),b.clear(T)}setCullFace(c){c.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(c.mode),this.frontFace.set(c.frontFace))}setDepthMode(c){c.func!==this.gl.ALWAYS||c.mask?(this.depthTest.set(!0),this.depthFunc.set(c.func),this.depthMask.set(c.mask),this.depthRange.set(c.range)):this.depthTest.set(!1)}setStencilMode(c){c.test.func!==this.gl.ALWAYS||c.mask?(this.stencilTest.set(!0),this.stencilMask.set(c.mask),this.stencilOp.set([c.fail,c.depthFail,c.pass]),this.stencilFunc.set({func:c.test.func,ref:c.ref,mask:c.test.mask})):this.stencilTest.set(!1)}setColorMode(c){_(c.blendFunction,o.ColorMode.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(c.blendFunction),this.blendColor.set(c.blendColor)),this.colorMask.set(c.mask)}unbindVAO(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)}}class kt extends o.Evented{constructor(c,f,v,b){if(super(),this.id=c,this.dispatcher=v,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,o.extend(this,o.pick(f,["url","scheme","tileSize","promoteId"])),this._options=o.extend({type:"vector"},f),this._collectResourceTiming=f.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(b),this._tileWorkers={},this._deduped=new o.DedupedRequest}load(c){this._loaded=!1,this.fire(new o.Event("dataloading",{dataType:"source"}));const f=Array.isArray(this.map._language)?this.map._language.join():this.map._language,v=this.map._worldview;this._tileJSONRequest=lt(this._options,this.map._requestManager,f,v,(b,T)=>{this._tileJSONRequest=null,this._loaded=!0,b?(f&&console.warn(`Ensure that your requested language string is a valid BCP-47 code or list of codes. Found: ${f}`),v&&v.length!==2&&console.warn(`Requested worldview strings must be a valid ISO alpha-2 code. Found: ${v}`),this.fire(new o.ErrorEvent(b))):T&&(o.extend(this,T),T.bounds&&(this.tileBounds=new gt(T.bounds,this.minzoom,this.maxzoom)),o.postTurnstileEvent(T.tiles,this.map._requestManager._customAccessToken),this.fire(new o.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new o.Event("data",{dataType:"source",sourceDataType:"content"}))),c&&c(b)})}loaded(){return this._loaded}hasTile(c){return!this.tileBounds||this.tileBounds.contains(c.canonical)}onAdd(c){this.map=c,this.load()}reload(){this.cancelTileJSONRequest(),this.load(()=>this.map.style._clearSource(this.id))}setTiles(c){return this._options.tiles=c,this.reload(),this}setUrl(c){return this.url=c,this._options.url=c,this.reload(),this}onRemove(){this.cancelTileJSONRequest()}serialize(){return o.extend({},this._options)}loadTile(c,f){const v=this.map._requestManager.normalizeTileURL(c.tileID.canonical.url(this.tiles,this.scheme)),b={request:this.map._requestManager.transformRequest(v,o.ResourceType.Tile),data:void 0,uid:c.uid,tileID:c.tileID,tileZoom:c.tileZoom,zoom:c.tileID.overscaledZ,tileSize:this.tileSize*c.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:o.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,isSymbolTile:c.isSymbolTile};if(b.request.collectResourceTiming=this._collectResourceTiming,c.actor&&c.state!=="expired")c.state==="loading"?c.reloadCallback=f:c.request=c.actor.send("reloadTile",b,T.bind(this));else if(c.actor=this._tileWorkers[v]=this._tileWorkers[v]||this.dispatcher.getActor(),this.dispatcher.ready)c.request=c.actor.send("loadTile",b,T.bind(this),void 0,!0);else{const O=o.loadVectorTile.call({deduped:this._deduped},b,(D,B)=>{D||!B?T.call(this,D):(b.data={cacheControl:B.cacheControl,expires:B.expires,rawData:B.rawData.slice(0)},c.actor&&c.actor.send("loadTile",b,T.bind(this),void 0,!0))},!0);c.request={cancel:O}}function T(O,D){return delete c.request,c.aborted?f(null):O&&O.status!==404?f(O):(D&&D.resourceTiming&&(c.resourceTiming=D.resourceTiming),this.map._refreshExpiredTiles&&D&&c.setExpiryData(D),c.loadVectorData(D,this.map.painter),o.cacheEntryPossiblyAdded(this.dispatcher),f(null),void(c.reloadCallback&&(this.loadTile(c,c.reloadCallback),c.reloadCallback=null)))}}abortTile(c){c.request&&(c.request.cancel(),delete c.request),c.actor&&c.actor.send("abortTile",{uid:c.uid,type:this.type,source:this.id})}unloadTile(c){c.unloadVectorData(),c.actor&&c.actor.send("removeTile",{uid:c.uid,type:this.type,source:this.id})}hasTransition(){return!1}afterUpdate(){this._tileWorkers={}}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}class Tt extends o.Evented{constructor(c,f,v,b){super(),this.id=c,this.dispatcher=v,this.setEventedParent(b),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=o.extend({type:"raster"},f),o.extend(this,o.pick(f,["url","scheme","tileSize"]))}load(c){this._loaded=!1,this.fire(new o.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=lt(this._options,this.map._requestManager,null,null,(f,v)=>{this._tileJSONRequest=null,this._loaded=!0,f?this.fire(new o.ErrorEvent(f)):v&&(o.extend(this,v),v.bounds&&(this.tileBounds=new gt(v.bounds,this.minzoom,this.maxzoom)),o.postTurnstileEvent(v.tiles),this.fire(new o.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new o.Event("data",{dataType:"source",sourceDataType:"content"}))),c&&c(f)})}loaded(){return this._loaded}onAdd(c){this.map=c,this.load()}reload(){this.cancelTileJSONRequest(),this.load(()=>this.map.style._clearSource(this.id))}setTiles(c){return this._options.tiles=c,this.reload(),this}setUrl(c){return this.url=c,this._options.url=c,this.reload(),this}onRemove(){this.cancelTileJSONRequest()}serialize(){return o.extend({},this._options)}hasTile(c){return!this.tileBounds||this.tileBounds.contains(c.canonical)}loadTile(c,f){const v=o.exported.devicePixelRatio>=2,b=this.map._requestManager.normalizeTileURL(c.tileID.canonical.url(this.tiles,this.scheme),v,this.tileSize);c.request=o.getImage(this.map._requestManager.transformRequest(b,o.ResourceType.Tile),(T,O,D,B)=>(delete c.request,c.aborted?(c.state="unloaded",f(null)):T?(c.state="errored",f(T)):O?(this.map._refreshExpiredTiles&&c.setExpiryData({cacheControl:D,expires:B}),c.setTexture(O,this.map.painter),c.state="loaded",o.cacheEntryPossiblyAdded(this.dispatcher),void f(null)):f(null)))}static loadTileData(c,f,v){c.setTexture(f,v)}static unloadTileData(c,f){c.texture&&f.saveTileTexture(c.texture)}abortTile(c,f){c.request&&(c.request.cancel(),delete c.request),f()}unloadTile(c,f){c.texture&&this.map.painter.saveTileTexture(c.texture),f()}hasTransition(){return!1}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}function ur(g,c,f,v,b,T,O,D){const B=[g,f,b,c,v,T,1,1,1],H=[O,D,1],q=o.adjoint([],B),[J,ae,ce]=o.transformMat3(H,H,o.transpose(q,q));return o.multiply$1(B,[J,0,0,0,ae,0,0,0,ce],B)}class mr extends o.Evented{constructor(c,f,v,b){super(),this.id=c,this.dispatcher=v,this.coordinates=f.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(b),this.options=f,this._dirty=!1}load(c,f){this._loaded=f||!1,this.fire(new o.Event("dataloading",{dataType:"source"})),this.url=this.options.url,this._imageRequest=o.getImage(this.map._requestManager.transformRequest(this.url,o.ResourceType.Image),(v,b)=>{if(this._imageRequest=null,this._loaded=!0,v)this.fire(new o.ErrorEvent(v));else if(b){const{HTMLImageElement:T}=o.window;this.image=b instanceof T?o.exported.getImageData(b):b,this._dirty=!0,this.width=this.image.width,this.height=this.image.height,c&&(this.coordinates=c),this._finishLoading()}})}loaded(){return this._loaded}updateImage(c){return this.image&&c.url?(this._imageRequest&&c.url!==this.options.url&&(this._imageRequest.cancel(),this._imageRequest=null),this.options.url=c.url,this.load(c.coordinates,this._loaded),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new o.Event("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(c){this.map=c,this.load()}onRemove(){this._imageRequest&&(this._imageRequest.cancel(),this._imageRequest=null),this.texture&&this.texture.destroy()}setCoordinates(c){this.coordinates=c,this._boundsArray=void 0;const f=c.map(o.MercatorCoordinate.fromLngLat);return this.tileID=function(v){let b=1/0,T=1/0,O=-1/0,D=-1/0;for(const J of v)b=Math.min(b,J.x),T=Math.min(T,J.y),O=Math.max(O,J.x),D=Math.max(D,J.y);const B=Math.max(O-b,D-T),H=Math.max(0,Math.floor(-Math.log(B)/Math.LN2)),q=Math.pow(2,H);return new o.CanonicalTileID(H,Math.floor((b+O)/2*q),Math.floor((T+D)/2*q))}(f),this.minzoom=this.maxzoom=this.tileID.z,this.fire(new o.Event("data",{dataType:"source",sourceDataType:"content"})),this}_clear(){this._boundsArray=void 0}_prepareData(c){for(const B in this.tiles){const H=this.tiles[B];H.state!=="loaded"&&(H.state="loaded",H.texture=this.texture)}if(this._boundsArray)return;const f=o.tileTransform(this.tileID,this.map.transform.projection),[v,b,T,O]=this.coordinates.map(B=>{const H=f.projection.project(B[0],B[1]);return o.getTilePoint(f,H)._round()});this.perspectiveTransform=function(B,H,q,J,ae,ce,he,de,pe,ee){const le=ur(0,0,B,0,0,H,B,H),ye=ur(q,J,ae,ce,he,de,pe,ee);return o.multiply$1(ye,o.adjoint(le,le),ye),[ye[6]/ye[8]*B/o.EXTENT,ye[7]/ye[8]*H/o.EXTENT]}(this.width,this.height,v.x,v.y,b.x,b.y,O.x,O.y,T.x,T.y);const D=this._boundsArray=new o.StructArrayLayout4i8;D.emplaceBack(v.x,v.y,0,0),D.emplaceBack(b.x,b.y,o.EXTENT,0),D.emplaceBack(O.x,O.y,0,o.EXTENT),D.emplaceBack(T.x,T.y,o.EXTENT,o.EXTENT),this.boundsBuffer&&this.boundsBuffer.destroy(),this.boundsBuffer=c.createVertexBuffer(D,o.boundsAttributes.members),this.boundsSegments=o.SegmentVector.simpleSegment(0,0,4,2)}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const c=this.map.painter.context,f=c.gl;this._dirty&&(this.texture?this.texture.update(this.image):(this.texture=new o.Texture(c,this.image,f.RGBA),this.texture.bind(f.LINEAR,f.CLAMP_TO_EDGE)),this._dirty=!1),this._prepareData(c)}loadTile(c,f){this.tileID&&this.tileID.equals(c.tileID.canonical)?(this.tiles[String(c.tileID.wrap)]=c,c.buckets={},f(null)):(c.state="errored",f(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}const dr={vector:kt,raster:Tt,"raster-dem":class extends Tt{constructor(g,c,f,v){super(g,c,f,v),this.type="raster-dem",this.maxzoom=22,this._options=o.extend({type:"raster-dem"},c),this.encoding=c.encoding||"mapbox"}loadTile(g,c){const f=this.map._requestManager.normalizeTileURL(g.tileID.canonical.url(this.tiles,this.scheme),!1,this.tileSize);function v(b,T){b&&(g.state="errored",c(b)),T&&(g.dem=T,g.dem.onDeserialize(),g.needsHillshadePrepare=!0,g.needsDEMTextureUpload=!0,g.state="loaded",c(null))}g.request=o.getImage(this.map._requestManager.transformRequest(f,o.ResourceType.Tile),(function(b,T,O,D){if(delete g.request,g.aborted)g.state="unloaded",c(null);else if(b)g.state="errored",c(b);else if(T){this.map._refreshExpiredTiles&&g.setExpiryData({cacheControl:O,expires:D});const B=o.window.ImageBitmap&&T instanceof o.window.ImageBitmap&&(Jn==null&&(Jn=o.window.OffscreenCanvas&&new o.window.OffscreenCanvas(1,1).getContext("2d")&&typeof o.window.createImageBitmap=="function"),Jn),H=1-(T.width-o.prevPowerOfTwo(T.width))/2;H<1||g.neighboringTiles||(g.neighboringTiles=this._getNeighboringTiles(g.tileID));const q=B?T:o.exported.getImageData(T,H),J={uid:g.uid,coord:g.tileID,source:this.id,rawImageData:q,encoding:this.encoding,padding:H};g.actor&&g.state!=="expired"||(g.actor=this.dispatcher.getActor(),g.actor.send("loadDEMTile",J,v.bind(this),void 0,!0))}}).bind(this))}_getNeighboringTiles(g){const c=g.canonical,f=Math.pow(2,c.z),v=(c.x-1+f)%f,b=c.x===0?g.wrap-1:g.wrap,T=(c.x+1+f)%f,O=c.x+1===f?g.wrap+1:g.wrap,D={};return D[new o.OverscaledTileID(g.overscaledZ,b,c.z,v,c.y).key]={backfilled:!1},D[new o.OverscaledTileID(g.overscaledZ,O,c.z,T,c.y).key]={backfilled:!1},c.y>0&&(D[new o.OverscaledTileID(g.overscaledZ,b,c.z,v,c.y-1).key]={backfilled:!1},D[new o.OverscaledTileID(g.overscaledZ,g.wrap,c.z,c.x,c.y-1).key]={backfilled:!1},D[new o.OverscaledTileID(g.overscaledZ,O,c.z,T,c.y-1).key]={backfilled:!1}),c.y+1<f&&(D[new o.OverscaledTileID(g.overscaledZ,b,c.z,v,c.y+1).key]={backfilled:!1},D[new o.OverscaledTileID(g.overscaledZ,g.wrap,c.z,c.x,c.y+1).key]={backfilled:!1},D[new o.OverscaledTileID(g.overscaledZ,O,c.z,T,c.y+1).key]={backfilled:!1}),D}unloadTile(g){g.demTexture&&this.map.painter.saveTileTexture(g.demTexture),g.fbo&&(g.fbo.destroy(),delete g.fbo),g.dem&&delete g.dem,delete g.neighboringTiles,g.state="unloaded"}},geojson:class extends o.Evented{constructor(g,c,f,v){super(),this.id=g,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._loaded=!1,this.actor=f.getActor(),this.setEventedParent(v),this._data=c.data,this._options=o.extend({},c),this._collectResourceTiming=c.collectResourceTiming,c.maxzoom!==void 0&&(this.maxzoom=c.maxzoom),c.type&&(this.type=c.type),c.attribution&&(this.attribution=c.attribution),this.promoteId=c.promoteId;const b=o.EXTENT/this.tileSize;this.workerOptions=o.extend({source:this.id,cluster:c.cluster||!1,geojsonVtOptions:{buffer:(c.buffer!==void 0?c.buffer:128)*b,tolerance:(c.tolerance!==void 0?c.tolerance:.375)*b,extent:o.EXTENT,maxZoom:this.maxzoom,lineMetrics:c.lineMetrics||!1,generateId:c.generateId||!1},superclusterOptions:{maxZoom:c.clusterMaxZoom!==void 0?c.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,c.clusterMinPoints||2),extent:o.EXTENT,radius:(c.clusterRadius!==void 0?c.clusterRadius:50)*b,log:!1,generateId:c.generateId||!1},clusterProperties:c.clusterProperties,filter:c.filter},c.workerOptions)}onAdd(g){this.map=g,this.setData(this._data)}setData(g){return this._data=g,this._updateWorkerData(),this}getClusterExpansionZoom(g,c){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:g,source:this.id},c),this}getClusterChildren(g,c){return this.actor.send("geojson.getClusterChildren",{clusterId:g,source:this.id},c),this}getClusterLeaves(g,c,f,v){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:g,limit:c,offset:f},v),this}_updateWorkerData(){if(this._pendingLoad)return void(this._coalesce=!0);this.fire(new o.Event("dataloading",{dataType:"source"})),this._loaded=!1;const g=o.extend({},this.workerOptions),c=this._data;typeof c=="string"?(g.request=this.map._requestManager.transformRequest(o.exported.resolveURL(c),o.ResourceType.Source),g.request.collectResourceTiming=this._collectResourceTiming):g.data=JSON.stringify(c),this._pendingLoad=this.actor.send(`${this.type}.loadData`,g,(f,v)=>{if(this._loaded=!0,this._pendingLoad=null,f)this.fire(new o.ErrorEvent(f));else{const b={dataType:"source",sourceDataType:this._metadataFired?"content":"metadata"};this._collectResourceTiming&&v&&v.resourceTiming&&v.resourceTiming[this.id]&&(b.resourceTiming=v.resourceTiming[this.id]),this.fire(new o.Event("data",b)),this._metadataFired=!0}this._coalesce&&(this._updateWorkerData(),this._coalesce=!1)})}loaded(){return this._loaded}loadTile(g,c){const f=g.actor?"reloadTile":"loadTile";g.actor=this.actor,g.request=this.actor.send(f,{type:this.type,uid:g.uid,tileID:g.tileID,tileZoom:g.tileZoom,zoom:g.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:o.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},(v,b)=>(delete g.request,g.unloadVectorData(),g.aborted?c(null):v?c(v):(g.loadVectorData(b,this.map.painter,f==="reloadTile"),c(null))),void 0,f==="loadTile")}abortTile(g){g.request&&(g.request.cancel(),delete g.request),g.aborted=!0}unloadTile(g){g.unloadVectorData(),this.actor.send("removeTile",{uid:g.uid,type:this.type,source:this.id})}onRemove(){this._pendingLoad&&this._pendingLoad.cancel()}serialize(){return o.extend({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}},video:class extends mr{constructor(g,c,f,v){super(g,c,f,v),this.roundZoom=!0,this.type="video",this.options=c}load(){this._loaded=!1;const g=this.options;this.urls=[];for(const c of g.urls)this.urls.push(this.map._requestManager.transformRequest(c,o.ResourceType.Source).url);o.getVideo(this.urls,(c,f)=>{this._loaded=!0,c?this.fire(new o.ErrorEvent(c)):f&&(this.video=f,this.video.loop=!0,this.video.setAttribute("playsinline",""),this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(g){if(this.video){const c=this.video.seekable;g<c.start(0)||g>c.end(0)?this.fire(new o.ErrorEvent(new o.ValidationError(`sources.${this.id}`,null,`Playback for this video can be set only between the ${c.start(0)} and ${c.end(0)}-second mark.`))):this.video.currentTime=g}}getVideo(){return this.video}onAdd(g){this.map||(this.map=g,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const g=this.map.painter.context,c=g.gl;this.texture?this.video.paused||(this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE),c.texSubImage2D(c.TEXTURE_2D,0,0,0,c.RGBA,c.UNSIGNED_BYTE,this.video)):(this.texture=new o.Texture(g,this.video,c.RGBA),this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE),this.width=this.video.videoWidth,this.height=this.video.videoHeight),this._prepareData(g)}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}},image:mr,canvas:class extends mr{constructor(g,c,f,v){super(g,c,f,v),c.coordinates?Array.isArray(c.coordinates)&&c.coordinates.length===4&&!c.coordinates.some(b=>!Array.isArray(b)||b.length!==2||b.some(T=>typeof T!="number"))||this.fire(new o.ErrorEvent(new o.ValidationError(`sources.${g}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new o.ErrorEvent(new o.ValidationError(`sources.${g}`,null,'missing required property "coordinates"'))),c.animate&&typeof c.animate!="boolean"&&this.fire(new o.ErrorEvent(new o.ValidationError(`sources.${g}`,null,'optional "animate" property must be a boolean value'))),c.canvas?typeof c.canvas=="string"||c.canvas instanceof o.window.HTMLCanvasElement||this.fire(new o.ErrorEvent(new o.ValidationError(`sources.${g}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new o.ErrorEvent(new o.ValidationError(`sources.${g}`,null,'missing required property "canvas"'))),this.options=c,this.animate=c.animate===void 0||c.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof o.window.HTMLCanvasElement?this.options.canvas:o.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new o.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(g){this.map=g,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let g=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,g=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,g=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const c=this.map.painter.context;this.texture?(g||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new o.Texture(c,this.canvas,c.gl.RGBA,{premultiply:!0}),this._prepareData(c)}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const g of[this.canvas.width,this.canvas.height])if(isNaN(g)||g<=0)return!0;return!1}},custom:class extends o.Evented{constructor(g,c,f,v){super(),this.id=g,this.type="custom",this._dataType="raster",this._dispatcher=f,this._implementation=c,this.setEventedParent(v),this.scheme="xyz",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this._loaded=!1,this.roundZoom=!0,this._implementation||this.fire(new o.ErrorEvent(new Error(`Missing implementation for ${this.id} custom source`))),this._implementation.loadTile||this.fire(new o.ErrorEvent(new Error(`Missing loadTile implementation for ${this.id} custom source`))),this._implementation.bounds&&(this.tileBounds=new gt(this._implementation.bounds,this.minzoom,this.maxzoom)),c.update=this._update.bind(this),c.clearTiles=this._clearTiles.bind(this),c.coveringTiles=this._coveringTiles.bind(this),o.extend(this,o.pick(c,["dataType","scheme","minzoom","maxzoom","tileSize","attribution","minTileCacheSize","maxTileCacheSize"]))}serialize(){return o.pick(this,["type","scheme","minzoom","maxzoom","tileSize","attribution"])}load(){this._loaded=!0,this.fire(new o.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new o.Event("data",{dataType:"source",sourceDataType:"content"}))}loaded(){return this._loaded}onAdd(g){this._map=g,this._loaded=!1,this.fire(new o.Event("dataloading",{dataType:"source"})),this._implementation.onAdd&&this._implementation.onAdd(g),this.load()}onRemove(g){this._implementation.onRemove&&this._implementation.onRemove(g)}hasTile(g){if(this._implementation.hasTile){const{x:c,y:f,z:v}=g.canonical;return this._implementation.hasTile({x:c,y:f,z:v})}return!this.tileBounds||this.tileBounds.contains(g.canonical)}loadTile(g,c){const{x:f,y:v,z:b}=g.tileID.canonical,T=new o.window.AbortController;g.request=Promise.resolve(this._implementation.loadTile({x:f,y:v,z:b},{signal:T.signal})).then((function(O){return delete g.request,g.aborted?(g.state="unloaded",c(null)):O===void 0?(g.state="errored",c(null)):O===null?(this.loadTileData(g,{width:this.tileSize,height:this.tileSize,data:null}),g.state="loaded",c(null)):function(D){return D instanceof o.window.ImageData||D instanceof o.window.HTMLCanvasElement||D instanceof o.window.ImageBitmap||D instanceof o.window.HTMLImageElement}(O)?(this.loadTileData(g,O),g.state="loaded",void c(null)):(g.state="errored",c(new Error(`Can't infer data type for ${this.id}, only raster data supported at the moment`)))}).bind(this)).catch(O=>{O.code!==20&&(g.state="errored",c(O))}),g.request.cancel=()=>T.abort()}loadTileData(g,c){Tt.loadTileData(g,c,this._map.painter)}unloadTileData(g){Tt.unloadTileData(g,this._map.painter)}unloadTile(g,c){if(this.unloadTileData(g),this._implementation.unloadTile){const{x:f,y:v,z:b}=g.tileID.canonical;this._implementation.unloadTile({x:f,y:v,z:b})}c()}abortTile(g,c){g.request&&g.request.cancel&&(g.request.cancel(),delete g.request),c()}hasTransition(){return!1}_coveringTiles(){return this._map.transform.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,roundZoom:this.roundZoom}).map(g=>({x:g.canonical.x,y:g.canonical.y,z:g.canonical.z}))}_clearTiles(){this._map.style._clearSource(this.id)}_update(){this.fire(new o.Event("data",{dataType:"source",sourceDataType:"content"}))}}},gr=function(g,c,f,v){const b=new dr[c.type](g,c,f,v);if(b.id!==g)throw new Error(`Expected Source id to be ${g} instead of ${b.id}`);return o.bindAll(["load","abort","unload","serialize","prepare"],b),b};function Sr(g,c){const f=o.identity([]);return o.scale(f,f,[.5*g.width,.5*-g.height,1]),o.translate(f,f,[1,-1,0]),o.multiply(f,f,g.calculateProjMatrix(c.toUnwrapped())),Float32Array.from(f)}function yn(g,c,f,v,b,T,O,D=!1){const B=g.tilesIn(v,O,D);B.sort(Pi);const H=[];for(const J of B)H.push({wrappedTileID:J.tile.tileID.wrapped().key,queryResults:J.tile.queryRenderedFeatures(c,f,g._state,J,b,T,Sr(g.transform,J.tile.tileID),D)});const q=function(J){const ae={},ce={};for(const he of J){const de=he.queryResults,pe=he.wrappedTileID,ee=ce[pe]=ce[pe]||{};for(const le in de){const ye=de[le],_e=ee[le]=ee[le]||{},Oe=ae[le]=ae[le]||[];for(const De of ye)_e[De.featureIndex]||(_e[De.featureIndex]=!0,Oe.push(De))}}return ae}(H);for(const J in q)q[J].forEach(ae=>{const ce=ae.feature,he=ce.layer;he&&he.type!=="background"&&he.type!=="sky"&&(ce.source=he.source,he["source-layer"]&&(ce.sourceLayer=he["source-layer"]),ce.state=ce.id!==void 0?g.getFeatureState(he["source-layer"],ce.id):{})});return q}function Nn(g,c){const f=g.getRenderableIds().map(T=>g.getTileByID(T)),v=[],b={};for(let T=0;T<f.length;T++){const O=f[T],D=O.tileID.canonical.key;b[D]||(b[D]=!0,O.querySourceFeatures(v,c))}return v}function Pi(g,c){const f=g.tileID,v=c.tileID;return f.overscaledZ-v.overscaledZ||f.canonical.y-v.canonical.y||f.wrap-v.wrap||f.canonical.x-v.canonical.x}function Qn(){return Ic.workerClass!=null?new Ic.workerClass:new o.window.Worker(Ic.workerUrl)}const ga="mapboxgl_preloaded_worker_pool";class li{constructor(){this.active={}}acquire(c){if(!this.workers)for(this.workers=[];this.workers.length<li.workerCount;)this.workers.push(new Qn);return this.active[c]=!0,this.workers.slice()}release(c){delete this.active[c],this.numActive()===0&&(this.workers.forEach(f=>{f.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[ga]}numActive(){return Object.keys(this.active).length}}let zi;function hc(){return zi||(zi=new li),zi}function mS(g,c){const f={};for(const v in g)v!=="ref"&&(f[v]=g[v]);return o.refProperties.forEach(v=>{v in c&&(f[v]=c[v])}),f}function y_(g){g=g.slice();const c=Object.create(null);for(let f=0;f<g.length;f++)c[g[f].id]=g[f];for(let f=0;f<g.length;f++)"ref"in g[f]&&(g[f]=mS(g[f],c[g[f].ref]));return g}li.workerCount=2;const jr={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight",setTerrain:"setTerrain",setFog:"setFog",setProjection:"setProjection"};function mm(g,c,f){f.push({command:jr.addSource,args:[g,c[g]]})}function Uu(g,c,f){c.push({command:jr.removeSource,args:[g]}),f[g]=!0}function gm(g,c,f,v){Uu(g,f,v),mm(g,c,f)}function xh(g,c,f){let v;for(v in g[f])if(g[f].hasOwnProperty(v)&&v!=="data"&&!_(g[f][v],c[f][v]))return!1;for(v in c[f])if(c[f].hasOwnProperty(v)&&v!=="data"&&!_(g[f][v],c[f][v]))return!1;return!0}function ya(g,c,f,v,b,T){let O;for(O in c=c||{},g=g||{})g.hasOwnProperty(O)&&(_(g[O],c[O])||f.push({command:T,args:[v,O,c[O],b]}));for(O in c)c.hasOwnProperty(O)&&!g.hasOwnProperty(O)&&(_(g[O],c[O])||f.push({command:T,args:[v,O,c[O],b]}))}function Ya(g){return g.id}function ym(g,c){return g[c.id]=c,g}class vm{constructor(c,f){this.reset(c,f)}reset(c,f){this.points=c||[],this._distances=[0];for(let v=1;v<this.points.length;v++)this._distances[v]=this._distances[v-1]+this.points[v].dist(this.points[v-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(f||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(c){if(this.points.length===1)return this.points[0];c=o.clamp(c,0,1);let f=1,v=this._distances[f];const b=c*this.paddedLength+this.padding;for(;v<b&&f<this._distances.length;)v=this._distances[++f];const T=f-1,O=this._distances[T],D=v-O,B=D>0?(b-O)/D:0;return this.points[T].mult(1-B).add(this.points[f].mult(B))}}class gl{constructor(c,f,v){const b=this.boxCells=[],T=this.circleCells=[];this.xCellCount=Math.ceil(c/v),this.yCellCount=Math.ceil(f/v);for(let O=0;O<this.xCellCount*this.yCellCount;O++)b.push([]),T.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=c,this.height=f,this.xScale=this.xCellCount/c,this.yScale=this.yCellCount/f,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(c,f,v,b,T){this._forEachCell(f,v,b,T,this._insertBoxCell,this.boxUid++),this.boxKeys.push(c),this.bboxes.push(f),this.bboxes.push(v),this.bboxes.push(b),this.bboxes.push(T)}insertCircle(c,f,v,b){this._forEachCell(f-b,v-b,f+b,v+b,this._insertCircleCell,this.circleUid++),this.circleKeys.push(c),this.circles.push(f),this.circles.push(v),this.circles.push(b)}_insertBoxCell(c,f,v,b,T,O){this.boxCells[T].push(O)}_insertCircleCell(c,f,v,b,T,O){this.circleCells[T].push(O)}_query(c,f,v,b,T,O){if(v<0||c>this.width||b<0||f>this.height)return!T&&[];const D=[];if(c<=0&&f<=0&&this.width<=v&&this.height<=b){if(T)return!0;for(let B=0;B<this.boxKeys.length;B++)D.push({key:this.boxKeys[B],x1:this.bboxes[4*B],y1:this.bboxes[4*B+1],x2:this.bboxes[4*B+2],y2:this.bboxes[4*B+3]});for(let B=0;B<this.circleKeys.length;B++){const H=this.circles[3*B],q=this.circles[3*B+1],J=this.circles[3*B+2];D.push({key:this.circleKeys[B],x1:H-J,y1:q-J,x2:H+J,y2:q+J})}return O?D.filter(O):D}return this._forEachCell(c,f,v,b,this._queryCell,D,{hitTest:T,seenUids:{box:{},circle:{}}},O),T?D.length>0:D}_queryCircle(c,f,v,b,T){const O=c-v,D=c+v,B=f-v,H=f+v;if(D<0||O>this.width||H<0||B>this.height)return!b&&[];const q=[];return this._forEachCell(O,B,D,H,this._queryCellCircle,q,{hitTest:b,circle:{x:c,y:f,radius:v},seenUids:{box:{},circle:{}}},T),b?q.length>0:q}query(c,f,v,b,T){return this._query(c,f,v,b,!1,T)}hitTest(c,f,v,b,T){return this._query(c,f,v,b,!0,T)}hitTestCircle(c,f,v,b){return this._queryCircle(c,f,v,!0,b)}_queryCell(c,f,v,b,T,O,D,B){const H=D.seenUids,q=this.boxCells[T];if(q!==null){const ae=this.bboxes;for(const ce of q)if(!H.box[ce]){H.box[ce]=!0;const he=4*ce;if(c<=ae[he+2]&&f<=ae[he+3]&&v>=ae[he+0]&&b>=ae[he+1]&&(!B||B(this.boxKeys[ce]))){if(D.hitTest)return O.push(!0),!0;O.push({key:this.boxKeys[ce],x1:ae[he],y1:ae[he+1],x2:ae[he+2],y2:ae[he+3]})}}}const J=this.circleCells[T];if(J!==null){const ae=this.circles;for(const ce of J)if(!H.circle[ce]){H.circle[ce]=!0;const he=3*ce;if(this._circleAndRectCollide(ae[he],ae[he+1],ae[he+2],c,f,v,b)&&(!B||B(this.circleKeys[ce]))){if(D.hitTest)return O.push(!0),!0;{const de=ae[he],pe=ae[he+1],ee=ae[he+2];O.push({key:this.circleKeys[ce],x1:de-ee,y1:pe-ee,x2:de+ee,y2:pe+ee})}}}}}_queryCellCircle(c,f,v,b,T,O,D,B){const H=D.circle,q=D.seenUids,J=this.boxCells[T];if(J!==null){const ce=this.bboxes;for(const he of J)if(!q.box[he]){q.box[he]=!0;const de=4*he;if(this._circleAndRectCollide(H.x,H.y,H.radius,ce[de+0],ce[de+1],ce[de+2],ce[de+3])&&(!B||B(this.boxKeys[he])))return O.push(!0),!0}}const ae=this.circleCells[T];if(ae!==null){const ce=this.circles;for(const he of ae)if(!q.circle[he]){q.circle[he]=!0;const de=3*he;if(this._circlesCollide(ce[de],ce[de+1],ce[de+2],H.x,H.y,H.radius)&&(!B||B(this.circleKeys[he])))return O.push(!0),!0}}}_forEachCell(c,f,v,b,T,O,D,B){const H=this._convertToXCellCoord(c),q=this._convertToYCellCoord(f),J=this._convertToXCellCoord(v),ae=this._convertToYCellCoord(b);for(let ce=H;ce<=J;ce++)for(let he=q;he<=ae;he++)if(T.call(this,c,f,v,b,this.xCellCount*he+ce,O,D,B))return}_convertToXCellCoord(c){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(c*this.xScale)))}_convertToYCellCoord(c){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(c*this.yScale)))}_circlesCollide(c,f,v,b,T,O){const D=b-c,B=T-f,H=v+O;return H*H>D*D+B*B}_circleAndRectCollide(c,f,v,b,T,O,D){const B=(O-b)/2,H=Math.abs(c-(b+B));if(H>B+v)return!1;const q=(D-T)/2,J=Math.abs(f-(T+q));if(J>q+v)return!1;if(H<=B||J<=q)return!0;const ae=H-B,ce=J-q;return ae*ae+ce*ce<=v*v}}const Ja={unknown:0,flipRequired:1,flipNotRequired:2},Vu=Math.tan(85*Math.PI/180);function it(g,c,f,v,b,T,O){const D=o.create();if(f)if(T.name==="globe"){const B=o.calculateGlobeLabelMatrix(b,c);o.multiply(D,D,B)}else{const B=ne([],O);D[0]=B[0],D[1]=B[1],D[4]=B[2],D[5]=B[3],v||o.rotateZ(D,D,b.angle)}else o.multiply(D,b.labelPlaneMatrix,g);return D}function Qa(g,c,f,v,b,T,O){const D=it(g,c,f,v,b,T,O);return T.name==="globe"&&f||(D[2]=D[6]=D[10]=D[14]=0),D}function Bn(g,c,f,v,b,T,O){if(f){if(T.name==="globe"){const D=it(g,c,f,v,b,T,O);return o.invert(D,D),o.multiply(D,g,D),D}{const D=o.clone(g),B=o.identity([]);return B[0]=O[0],B[1]=O[1],B[4]=O[2],B[5]=O[3],o.multiply(D,D,B),v||o.rotateZ(D,D,-b.angle),D}}return b.glCoordMatrix}function ci(g,c,f,v){const b=[g,c,f,1];f?o.transformMat4$1(b,b,v):xr(b,b,v);const T=b[3];return b[0]/=T,b[1]/=T,b[2]/=T,b}function v_(g,c){return Math.min(.5+g/c*.5,1.5)}function va(g,c){const f=g[0]/g[3],v=g[1]/g[3];return f>=-c[0]&&f<=c[0]&&v>=-c[1]&&v<=c[1]}function _m(g,c,f,v,b,T,O,D,B,H){const q=f.transform,J=v?g.textSizeData:g.iconSizeData,ae=o.evaluateSizeForZoom(J,f.transform.zoom),ce=q.projection.name==="globe",he=[256/f.width*2+1,256/f.height*2+1],de=v?g.text.dynamicLayoutVertexArray:g.icon.dynamicLayoutVertexArray;de.clear();let pe=null;ce&&(pe=v?g.text.globeExtVertexArray:g.icon.globeExtVertexArray);const ee=g.lineVertexArray,le=v?g.text.placedSymbolArray:g.icon.placedSymbolArray,ye=f.transform.width/f.transform.height;let _e,Oe=!1;for(let De=0;De<le.length;De++){const ke=le.get(De),{numGlyphs:Ve,writingMode:Fe}=ke;if(Fe!==o.WritingMode.vertical||Oe||_e===o.WritingMode.horizontal||(Oe=!0),_e=Fe,(ke.hidden||Fe===o.WritingMode.vertical)&&!Oe){qo(Ve,de);continue}Oe=!1;const Ke=new o.Point(ke.tileAnchorX,ke.tileAnchorY);let{x:xt,y:He,z:ct}=q.projection.projectTilePoint(Ke.x,Ke.y,H.canonical);if(B){const[ir,Ft,Qt]=B(Ke);xt+=ir,He+=Ft,ct+=Qt}const Je=[xt,He,ct,1];if(o.transformMat4$1(Je,Je,c),!va(Je,he)){qo(Ve,de);continue}const _t=v_(f.transform.cameraToCenterDistance,Je[3]),Ze=o.evaluateSizeForFeature(J,ae,ke),st=O?Ze/_t:Ze*_t,wt=ci(xt,He,ct,b);if(wt[3]<=0){qo(Ve,de);continue}let pt={};const St=O?null:B,Ht=Nt(ke,st,!1,D,c,b,T,g.glyphOffsetArray,ee,de,pe,wt,Ke,pt,ye,St,q.projection,H,O);Oe=Ht.useVertical,St&&Ht.needsFlipping&&(pt={}),(Ht.notEnoughRoom||Oe||Ht.needsFlipping&&Nt(ke,st,!0,D,c,b,T,g.glyphOffsetArray,ee,de,pe,wt,Ke,pt,ye,St,q.projection,H,O).notEnoughRoom)&&qo(Ve,de)}v?(g.text.dynamicLayoutVertexBuffer.updateData(de),pe&&g.text.globeExtVertexBuffer.updateData(pe)):(g.icon.dynamicLayoutVertexBuffer.updateData(de),pe&&g.icon.globeExtVertexBuffer.updateData(pe))}function __(g,c,f,v,b,T,O,D,B,H,q,J,ae,ce,he,de){const{lineStartIndex:pe,glyphStartIndex:ee,segment:le}=D,ye=ee+D.numGlyphs,_e=pe+D.lineLength,Oe=c.getoffsetX(ee),De=c.getoffsetX(ye-1),ke=co(g*Oe,f,v,b,T,O,le,pe,_e,B,H,q,J,ae,!0,ce,he,de);if(!ke)return null;const Ve=co(g*De,f,v,b,T,O,le,pe,_e,B,H,q,J,ae,!0,ce,he,de);return Ve?{first:ke,last:Ve}:null}function fc(g,c,f,v){return g===o.WritingMode.horizontal&&Math.abs(v)>Math.abs(f)?{useVertical:!0}:g===o.WritingMode.vertical?v>0?{needsFlipping:!0}:null:c!==Ja.unknown&&function(b,T){return b===0||Math.abs(T/b)>Vu}(f,v)?c===Ja.flipRequired?{needsFlipping:!0}:null:f<0?{needsFlipping:!0}:null}function Nt(g,c,f,v,b,T,O,D,B,H,q,J,ae,ce,he,de,pe,ee,le){const ye=c/24,_e=g.lineOffsetX*ye,Oe=g.lineOffsetY*ye,{lineStartIndex:De,glyphStartIndex:ke,numGlyphs:Ve,segment:Fe,writingMode:Ke,flipState:xt}=g,He=De+g.lineLength,ct=Je=>{if(q){const[wt,pt,St]=Je.up,Ht=H.length;o.updateGlobeVertexNormal(q,Ht+0,wt,pt,St),o.updateGlobeVertexNormal(q,Ht+1,wt,pt,St),o.updateGlobeVertexNormal(q,Ht+2,wt,pt,St),o.updateGlobeVertexNormal(q,Ht+3,wt,pt,St)}const[_t,Ze,st]=Je.point;o.addDynamicAttributes(H,_t,Ze,st,Je.angle)};if(Ve>1){const Je=__(ye,D,_e,Oe,f,J,ae,g,B,T,ce,de,!1,pe,ee,le);if(!Je)return{notEnoughRoom:!0};if(v&&!f){let[_t,Ze,st]=Je.first.point,[wt,pt,St]=Je.last.point;[_t,Ze]=ci(_t,Ze,st,O),[wt,pt]=ci(wt,pt,St,O);const Ht=fc(Ke,xt,(wt-_t)*he,pt-Ze);if(g.flipState=Ht&&Ht.needsFlipping?Ja.flipRequired:Ja.flipNotRequired,Ht)return Ht}ct(Je.first);for(let _t=ke+1;_t<ke+Ve-1;_t++){const Ze=co(ye*D.getoffsetX(_t),_e,Oe,f,J,ae,Fe,De,He,B,T,ce,de,!1,!1,pe,ee,le);if(!Ze)return H.length-=4*(_t-ke),{notEnoughRoom:!0};ct(Ze)}ct(Je.last)}else{if(v&&!f){const _t=ci(ae.x,ae.y,0,b),Ze=De+Fe+1,st=new o.Point(B.getx(Ze),B.gety(Ze)),wt=ci(st.x,st.y,0,b),pt=wt[3]>0?wt:_r(ae,st,_t,1,b,void 0,pe,ee.canonical),St=fc(Ke,xt,(pt[0]-_t[0])*he,pt[1]-_t[1]);if(g.flipState=St&&St.needsFlipping?Ja.flipRequired:Ja.flipNotRequired,St)return St}const Je=co(ye*D.getoffsetX(ke),_e,Oe,f,J,ae,Fe,De,He,B,T,ce,de,!1,!1,pe,ee,le);if(!Je)return{notEnoughRoom:!0};ct(Je)}return{}}function wr(g,c,f,v,b){const{x:T,y:O,z:D}=v.projectTilePoint(g.x,g.y,c);if(!b)return ci(T,O,D,f);const[B,H,q]=b(g);return ci(T+B,O+H,D+q,f)}function _r(g,c,f,v,b,T,O,D){const B=wr(g.sub(c)._unit()._add(g),D,b,O,T);return o.sub(B,f,B),o.normalize(B,B),o.scaleAndAdd(B,f,B,v)}function co(g,c,f,v,b,T,O,D,B,H,q,J,ae,ce,he,de,pe,ee){const le=v?g-c:g+c;let ye=le>0?1:-1,_e=0;v&&(ye*=-1,_e=Math.PI),ye<0&&(_e+=Math.PI);let Oe=D+O+(ye>0?0:1)|0,De=b,ke=b,Ve=0,Fe=0;const Ke=Math.abs(le),xt=[],He=[];let ct=T,Je=ct;const _t=()=>_r(Je,ct,ke,Ke-Ve+1,q,ae,de,pe.canonical);for(;Ve+Fe<=Ke;){if(Oe+=ye,Oe<D||Oe>=B)return null;if(ke=De,Je=ct,xt.push(ke),ce&&He.push(Je),ct=new o.Point(H.getx(Oe),H.gety(Oe)),De=J[Oe],!De){const Qt=wr(ct,pe.canonical,q,de,ae);De=Qt[3]>0?J[Oe]=Qt:_t()}Ve+=Fe,Fe=o.distance(ke,De)}he&&ae&&(J[Oe]&&(De=_t(),Fe=o.distance(ke,De)),J[Oe]=De);const Ze=(Ke-Ve)/Fe,st=ct.sub(Je)._mult(Ze)._add(Je),wt=o.sub([],De,ke),pt=o.scaleAndAdd([],ke,wt,Ze);let St=[0,0,1],Ht=wt[0],ir=wt[1];if(ee&&(St=de.upVector(pe.canonical,st.x,st.y),St[0]!==0||St[1]!==0||St[2]!==1)){const Qt=[St[2],0,-St[0]],br=o.cross([],St,Qt);o.normalize(Qt,Qt),o.normalize(br,br),Ht=o.dot(wt,Qt),ir=o.dot(wt,br)}if(f){const Qt=o.cross([],St,wt);o.normalize(Qt,Qt),o.scaleAndAdd(pt,pt,Qt,f*ye)}const Ft=_e+Math.atan2(ir,Ht);return xt.push(pt),ce&&He.push(st),{point:pt,angle:Ft,path:xt,tilePath:He,up:St}}function qo(g,c){const f=c.length,v=f+4*g;c.resize(v),c.float32.fill(-1/0,4*f,4*v)}function xr(g,c,f){const v=c[0],b=c[1];return g[0]=f[0]*v+f[4]*b+f[12],g[1]=f[1]*v+f[5]*b+f[13],g[3]=f[3]*v+f[7]*b+f[15],g}const uo=100;class Gu{constructor(c,f,v=new gl(c.width+200,c.height+200,25),b=new gl(c.width+200,c.height+200,25)){this.transform=c,this.grid=v,this.ignoredGrid=b,this.pitchfactor=Math.cos(c._pitch)*c.cameraToCenterDistance,this.screenRightBoundary=c.width+uo,this.screenBottomBoundary=c.height+uo,this.gridRightBoundary=c.width+200,this.gridBottomBoundary=c.height+200,this.fogState=f}placeCollisionBox(c,f,v,b,T,O,D,B){let H=v.projectedAnchorX,q=v.projectedAnchorY,J=v.projectedAnchorZ;const ae=v.elevation,ce=v.tileID,he=c.getProjection();if(ae&&ce){const[De,ke,Ve]=he.upVector(ce.canonical,v.tileAnchorX,v.tileAnchorY),Fe=he.upVectorScale(ce.canonical,this.transform.center.lat,this.transform.worldSize).metersToTile;H+=De*ae*Fe,q+=ke*ae*Fe,J+=Ve*ae*Fe}const de=this.projectAndGetPerspectiveRatio(D,H,q,J,v.tileID,he.name==="globe"||!!ae||this.transform.pitch>0,he),pe=O*de.perspectiveRatio,ee=(v.x1*f+b.x-v.padding)*pe+de.point.x,le=(v.y1*f+b.y-v.padding)*pe+de.point.y,ye=(v.x2*f+b.x+v.padding)*pe+de.point.x,_e=(v.y2*f+b.y+v.padding)*pe+de.point.y,Oe=de.perspectiveRatio<=.55||de.occluded;return!this.isInsideGrid(ee,le,ye,_e)||!T&&this.grid.hitTest(ee,le,ye,_e,B)||Oe?{box:[],offscreen:!1,occluded:de.occluded}:{box:[ee,le,ye,_e],offscreen:this.isOffscreen(ee,le,ye,_e),occluded:!1}}placeCollisionCircles(c,f,v,b,T,O,D,B,H,q,J,ae,ce,he,de){const pe=[],ee=this.transform.elevation,le=c.getProjection(),ye=ee?ee.getAtTileOffsetFunc(de,this.transform.center.lat,this.transform.worldSize,le):null,_e=new o.Point(v.tileAnchorX,v.tileAnchorY);let{x:Oe,y:De,z:ke}=le.projectTilePoint(_e.x,_e.y,de.canonical);if(ye){const[st,wt,pt]=ye(_e);Oe+=st,De+=wt,ke+=pt}const Ve=le.name==="globe",Fe=this.projectAndGetPerspectiveRatio(D,Oe,De,ke,de,Ve||!!ee||this.transform.pitch>0,le),{perspectiveRatio:Ke}=Fe,xt=(J?O/Ke:O*Ke)/o.ONE_EM,He=ci(Oe,De,ke,B),ct=Fe.signedDistanceFromCamera>0?__(xt,T,v.lineOffsetX*xt,v.lineOffsetY*xt,!1,He,_e,v,b,B,{},ee&&!J?ye:null,J&&!!ee,le,de,J):null;let Je=!1,_t=!1,Ze=!0;if(ct&&!Fe.occluded){const st=.5*ce*Ke+he,wt=new o.Point(-100,-100),pt=new o.Point(this.screenRightBoundary,this.screenBottomBoundary),St=new vm,{first:Ht,last:ir}=ct,Ft=Ht.path.length;let Qt=[];for(let Gt=Ft-1;Gt>=1;Gt--)Qt.push(Ht.path[Gt]);for(let Gt=1;Gt<ir.path.length;Gt++)Qt.push(ir.path[Gt]);const br=2.5*st;H&&(Qt=Qt.map(([Gt,Nr,Wr],qr)=>(ye&&!Ve&&(Wr=ye(qr<Ft-1?Ht.tilePath[Ft-1-qr]:ir.tilePath[qr-Ft+2])[2]),ci(Gt,Nr,Wr,H))),Qt.some(Gt=>Gt[3]<=0)&&(Qt=[]));let yr=[];if(Qt.length>0){let Gt=1/0,Nr=-1/0,Wr=1/0,qr=-1/0;for(const Hr of Qt)Gt=Math.min(Gt,Hr[0]),Wr=Math.min(Wr,Hr[1]),Nr=Math.max(Nr,Hr[0]),qr=Math.max(qr,Hr[1]);Nr>=wt.x&&Gt<=pt.x&&qr>=wt.y&&Wr<=pt.y&&(yr=[Qt.map(Hr=>new o.Point(Hr[0],Hr[1]))],(Gt<wt.x||Nr>pt.x||Wr<wt.y||qr>pt.y)&&(yr=o.clipLine(yr,wt.x,wt.y,pt.x,pt.y)))}for(const Gt of yr){St.reset(Gt,.25*st);let Nr=0;Nr=St.length<=.5*st?1:Math.ceil(St.paddedLength/br)+1;for(let Wr=0;Wr<Nr;Wr++){const qr=Wr/Math.max(Nr-1,1),Hr=St.lerp(qr),Mi=Hr.x+uo,di=Hr.y+uo;pe.push(Mi,di,st,0);const Mo=Mi-st,wa=di-st,pn=Mi+st,Xr=di+st;if(Ze=Ze&&this.isOffscreen(Mo,wa,pn,Xr),_t=_t||this.isInsideGrid(Mo,wa,pn,Xr),!f&&this.grid.hitTestCircle(Mi,di,st,ae)&&(Je=!0,!q))return{circles:[],offscreen:!1,collisionDetected:Je,occluded:!1}}}}return{circles:!q&&Je||!_t?[]:pe,offscreen:Ze,collisionDetected:Je,occluded:Fe.occluded}}queryRenderedSymbols(c){if(c.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const f=[];let v=1/0,b=1/0,T=-1/0,O=-1/0;for(const q of c){const J=new o.Point(q.x+uo,q.y+uo);v=Math.min(v,J.x),b=Math.min(b,J.y),T=Math.max(T,J.x),O=Math.max(O,J.y),f.push(J)}const D=this.grid.query(v,b,T,O).concat(this.ignoredGrid.query(v,b,T,O)),B={},H={};for(const q of D){const J=q.key;if(B[J.bucketInstanceId]===void 0&&(B[J.bucketInstanceId]={}),B[J.bucketInstanceId][J.featureIndex])continue;const ae=[new o.Point(q.x1,q.y1),new o.Point(q.x2,q.y1),new o.Point(q.x2,q.y2),new o.Point(q.x1,q.y2)];o.polygonIntersectsPolygon(f,ae)&&(B[J.bucketInstanceId][J.featureIndex]=!0,H[J.bucketInstanceId]===void 0&&(H[J.bucketInstanceId]=[]),H[J.bucketInstanceId].push(J.featureIndex))}return H}insertCollisionBox(c,f,v,b,T){(f?this.ignoredGrid:this.grid).insert({bucketInstanceId:v,featureIndex:b,collisionGroupID:T},c[0],c[1],c[2],c[3])}insertCollisionCircles(c,f,v,b,T){const O=f?this.ignoredGrid:this.grid,D={bucketInstanceId:v,featureIndex:b,collisionGroupID:T};for(let B=0;B<c.length;B+=4)O.insertCircle(D,c[B],c[B+1],c[B+2])}projectAndGetPerspectiveRatio(c,f,v,b,T,O,D){const B=[f,v,b,1];let H=!1;b||this.transform.pitch>0?(o.transformMat4$1(B,B,c),this.fogState&&T&&D.name!=="globe"&&(H=function(ae,ce,he,de,pe,ee){const le=ee.calculateFogTileMatrix(pe),ye=[ce,he,de];return o.transformMat4(ye,ye,le),Ue(ae,ye,ee.pitch,ee._fov)}(this.fogState,f,v,b,T.toUnwrapped(),this.transform)>.9)):xr(B,B,c);const q=B[3];return{point:new o.Point((B[0]/q+1)/2*this.transform.width+uo,(-B[1]/q+1)/2*this.transform.height+uo),perspectiveRatio:Math.min(.5+this.transform.getCameraToCenterDistance(D)/q*.5,1.5),signedDistanceFromCamera:q,occluded:O&&B[2]>q||H}}isOffscreen(c,f,v,b){return v<uo||c>=this.screenRightBoundary||b<uo||f>this.screenBottomBoundary}isInsideGrid(c,f,v,b){return v>=0&&c<this.gridRightBoundary&&b>=0&&f<this.gridBottomBoundary}getViewportMatrix(){const c=o.identity([]);return o.translate(c,c,[-100,-100,0]),c}}function yl(g,c,f){const v=c.createTileMatrix(g,g.worldSize,f.toUnwrapped());return o.multiply(new Float32Array(16),g.projMatrix,v)}function To(g,c,f){if(c.projection.name===f.projection.name)return g.projMatrix;const v=f.clone();return v.setProjection(c.projection),yl(v,c.getProjection(),g)}function fn(g,c,f){return c.name===f.projection.name?g.projMatrix:yl(f,c,g)}class x_{constructor(c,f,v,b){this.opacity=c?Math.max(0,Math.min(1,c.opacity+(c.placed?f:-f))):b&&v?1:0,this.placed=v}isHidden(){return this.opacity===0&&!this.placed}}class es{constructor(c,f,v,b,T,O=!1){this.text=new x_(c?c.text:null,f,v,T),this.icon=new x_(c?c.icon:null,f,b,T),this.clipped=O}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Wu{constructor(c,f,v,b=!1){this.text=c,this.icon=f,this.skipFade=v,this.clipped=b}}class qu{constructor(){this.invProjMatrix=o.create(),this.viewportMatrix=o.create(),this.circles=[]}}class xm{constructor(c,f,v,b,T){this.bucketInstanceId=c,this.featureIndex=f,this.sourceLayerIndex=v,this.bucketIndex=b,this.tileID=T}}class b_{constructor(c){this.crossSourceCollisions=c,this.maxGroupID=0,this.collisionGroups={}}get(c){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[c]){const f=++this.maxGroupID;this.collisionGroups[c]={ID:f,predicate:v=>v.collisionGroupID===f}}return this.collisionGroups[c]}}function Hu(g,c,f,v,b){const{horizontalAlign:T,verticalAlign:O}=o.getAnchorAlignment(g),D=-(T-.5)*c,B=-(O-.5)*f,H=o.evaluateVariableOffset(g,v);return new o.Point(D+H[0]*b,B+H[1]*b)}function Xu(g,c,f,v,b){const T=new o.Point(g,c);return f&&T._rotate(v?b:-b),T}class bh{constructor(c,f,v,b,T){this.transform=c.clone(),this.projection=c.projection.name,this.collisionIndex=new Gu(this.transform,T),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=f,this.retainedQueryData={},this.collisionGroups=new b_(v),this.collisionCircleArrays={},this.prevPlacement=b,b&&(b.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(c,f,v,b){const T=v.getBucket(f),O=v.latestFeatureIndex;if(!T||!O||f.id!==T.layerIds[0])return;const D=T.layers[0].layout,B=v.collisionBoxArray,H=Math.pow(2,this.transform.zoom-v.tileID.overscaledZ),q=v.tileSize/o.EXTENT,J=v.tileID.toUnwrapped();this.transform.setProjection(T.projection);const ae=(ce=v.tileID,he=T.getProjection(),de=this.transform,he.name===this.projection?de.calculateProjMatrix(ce.toUnwrapped()):yl(de,he,ce));var ce,he,de;const pe=D.get("text-pitch-alignment")==="map",ee=D.get("text-rotation-alignment")==="map";f.compileFilter();const le=f.dynamicFilter(),ye=f.dynamicFilterNeedsFeature(),_e=this.transform.calculatePixelsToTileUnitsMatrix(v),Oe=Qa(ae,v.tileID.canonical,pe,ee,this.transform,T.getProjection(),_e);let De=null;if(pe){const Fe=Bn(ae,v.tileID.canonical,pe,ee,this.transform,T.getProjection(),_e);De=o.multiply([],this.transform.labelPlaneMatrix,Fe)}let ke=null;le&&v.latestFeatureIndex&&(ke={unwrappedTileID:J,dynamicFilter:le,dynamicFilterNeedsFeature:ye,featureIndex:v.latestFeatureIndex}),this.retainedQueryData[T.bucketInstanceId]=new xm(T.bucketInstanceId,O,T.sourceLayerIndex,T.index,v.tileID);const Ve={bucket:T,layout:D,posMatrix:ae,textLabelPlaneMatrix:Oe,labelToScreenMatrix:De,clippingData:ke,scale:H,textPixelRatio:q,holdingForFade:v.holdingForFade(),collisionBoxArray:B,partiallyEvaluatedTextSize:o.evaluateSizeForZoom(T.textSizeData,this.transform.zoom),partiallyEvaluatedIconSize:o.evaluateSizeForZoom(T.iconSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(T.sourceID)};if(b)for(const Fe of T.sortKeyRanges){const{sortKey:Ke,symbolInstanceStart:xt,symbolInstanceEnd:He}=Fe;c.push({sortKey:Ke,symbolInstanceStart:xt,symbolInstanceEnd:He,parameters:Ve})}else c.push({symbolInstanceStart:0,symbolInstanceEnd:T.symbolInstances.length,parameters:Ve})}attemptAnchorPlacement(c,f,v,b,T,O,D,B,H,q,J,ae,ce,he,de,pe,ee,le){const{textOffset0:ye,textOffset1:_e,crossTileID:Oe}=ae,De=[ye,_e],ke=Hu(c,v,b,De,T),Ve=this.collisionIndex.placeCollisionBox(he,T,f,Xu(ke.x,ke.y,O,D,this.transform.angle),J,B,H,q.predicate);if(pe){const Fe=he.getSymbolInstanceIconSize(le,this.transform.zoom,ae.placedIconSymbolIndex);if(this.collisionIndex.placeCollisionBox(he,Fe,pe,Xu(ke.x,ke.y,O,D,this.transform.angle),J,B,H,q.predicate).box.length===0)return}if(Ve.box.length>0){let Fe;return this.prevPlacement&&this.prevPlacement.variableOffsets[Oe]&&this.prevPlacement.placements[Oe]&&this.prevPlacement.placements[Oe].text&&(Fe=this.prevPlacement.variableOffsets[Oe].anchor),this.variableOffsets[Oe]={textOffset:De,width:v,height:b,anchor:c,textScale:T,prevAnchor:Fe},this.markUsedJustification(he,c,ae,de),he.allowVerticalPlacement&&(this.markUsedOrientation(he,de,ae),this.placedOrientations[Oe]=de),{shift:ke,placedGlyphBoxes:Ve}}}placeLayerBucketPart(c,f,v,b){const{bucket:T,layout:O,posMatrix:D,textLabelPlaneMatrix:B,labelToScreenMatrix:H,clippingData:q,textPixelRatio:J,holdingForFade:ae,collisionBoxArray:ce,partiallyEvaluatedTextSize:he,partiallyEvaluatedIconSize:de,collisionGroup:pe}=c.parameters,ee=O.get("text-optional"),le=O.get("icon-optional"),ye=O.get("text-allow-overlap"),_e=O.get("icon-allow-overlap"),Oe=O.get("text-rotation-alignment")==="map",De=O.get("text-pitch-alignment")==="map",ke=O.get("icon-text-fit")!=="none",Ve=O.get("symbol-z-order")==="viewport-y";this.transform.setProjection(T.projection);let Fe=ye&&(_e||!T.hasIconData()||le),Ke=_e&&(ye||!T.hasTextData()||ee);!T.collisionArrays&&ce&&T.deserializeCollisionBoxes(ce),v&&b&&T.updateCollisionDebugBuffers(this.transform.zoom,ce);const xt=(He,ct,Je)=>{const{crossTileID:_t,numVerticalGlyphVertices:Ze}=He;if(q){const pn={zoom:this.transform.zoom,pitch:this.transform.pitch};let Xr=null;if(q.dynamicFilterNeedsFeature){const kr=this.retainedQueryData[T.bucketInstanceId];Xr=q.featureIndex.loadFeature({featureIndex:He.featureIndex,bucketIndex:kr.bucketIndex,sourceLayerIndex:kr.sourceLayerIndex,layoutVertexArrayOffset:0})}if(!(0,q.dynamicFilter)(pn,Xr,this.retainedQueryData[T.bucketInstanceId].tileID.canonical,new o.Point(He.tileAnchorX,He.tileAnchorY),this.transform.calculateDistanceTileData(q.unwrappedTileID)))return this.placements[_t]=new Wu(!1,!1,!1,!0),void f.add(_t)}if(f.has(_t))return;if(ae)return void(this.placements[_t]=new Wu(!1,!1,!1));let st=!1,wt=!1,pt=!0,St=!1,Ht=!1,ir=null,Ft={box:null,offscreen:null,occluded:null},Qt={box:null,offscreen:null,occluded:null},br=null,yr=null,Gt=null,Nr=0,Wr=0,qr=0;Je.textFeatureIndex?Nr=Je.textFeatureIndex:He.useRuntimeCollisionCircles&&(Nr=He.featureIndex),Je.verticalTextFeatureIndex&&(Wr=Je.verticalTextFeatureIndex);const Hr=pn=>{pn.tileID=this.retainedQueryData[T.bucketInstanceId].tileID;const Xr=this.transform.elevation;(Xr||pn.elevation)&&(pn.elevation=Xr?Xr.getAtTileOffset(pn.tileID,pn.tileAnchorX,pn.tileAnchorY):0)},Mi=Je.textBox;if(Mi){Hr(Mi);const pn=kr=>{let $n=o.WritingMode.horizontal;if(T.allowVerticalPlacement&&!kr&&this.prevPlacement){const Ni=this.prevPlacement.placedOrientations[_t];Ni&&(this.placedOrientations[_t]=Ni,$n=Ni,this.markUsedOrientation(T,$n,He))}return $n},Xr=(kr,$n)=>{if(T.allowVerticalPlacement&&Ze>0&&Je.verticalTextBox){for(const Ni of T.writingModes)if(Ni===o.WritingMode.vertical?(Ft=$n(),Qt=Ft):Ft=kr(),Ft&&Ft.box&&Ft.box.length)break}else Ft=kr()};if(O.get("text-variable-anchor")){let kr=O.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[_t]){const cn=this.prevPlacement.variableOffsets[_t];kr.indexOf(cn.anchor)>0&&(kr=kr.filter(Zi=>Zi!==cn.anchor),kr.unshift(cn.anchor))}const $n=(cn,Zi,Xh)=>{const Tl=T.getSymbolInstanceTextSize(he,He,this.transform.zoom,ct),pd=(cn.x2-cn.x1)*Tl+2*cn.padding,ss=(cn.y2-cn.y1)*Tl+2*cn.padding,Bs=ke&&!_e?Zi:null;Bs&&Hr(Bs);let Al={box:[],offscreen:!1,occluded:!1};const Zh=ye?2*kr.length:kr.length;for(let md=0;md<Zh;++md){const ug=this.attemptAnchorPlacement(kr[md%kr.length],cn,pd,ss,Tl,Oe,De,J,D,pe,md>=kr.length,He,ct,T,Xh,Bs,he,de);if(ug&&(Al=ug.placedGlyphBoxes,Al&&Al.box&&Al.box.length)){st=!0,ir=ug.shift;break}}return Al};Xr(()=>$n(Mi,Je.iconBox,o.WritingMode.horizontal),()=>{const cn=Je.verticalTextBox;return cn&&Hr(cn),T.allowVerticalPlacement&&!(Ft&&Ft.box&&Ft.box.length)&&Ze>0&&cn?$n(cn,Je.verticalIconBox,o.WritingMode.vertical):{box:null,offscreen:null,occluded:null}}),Ft&&(st=Ft.box,pt=Ft.offscreen,St=Ft.occluded);const Ni=pn(!(!Ft||!Ft.box));if(!st&&this.prevPlacement){const cn=this.prevPlacement.variableOffsets[_t];cn&&(this.variableOffsets[_t]=cn,this.markUsedJustification(T,cn.anchor,He,Ni))}}else{const kr=($n,Ni)=>{const cn=T.getSymbolInstanceTextSize(he,He,this.transform.zoom,ct),Zi=this.collisionIndex.placeCollisionBox(T,cn,$n,new o.Point(0,0),ye,J,D,pe.predicate);return Zi&&Zi.box&&Zi.box.length&&(this.markUsedOrientation(T,Ni,He),this.placedOrientations[_t]=Ni),Zi};Xr(()=>kr(Mi,o.WritingMode.horizontal),()=>{const $n=Je.verticalTextBox;return T.allowVerticalPlacement&&Ze>0&&$n?(Hr($n),kr($n,o.WritingMode.vertical)):{box:null,offscreen:null,occluded:null}}),pn(!!(Ft&&Ft.box&&Ft.box.length))}}if(br=Ft,st=br&&br.box&&br.box.length>0,pt=br&&br.offscreen,St=br&&br.occluded,He.useRuntimeCollisionCircles){const pn=T.text.placedSymbolArray.get(He.centerJustifiedTextSymbolIndex>=0?He.centerJustifiedTextSymbolIndex:He.verticalPlacedTextSymbolIndex),Xr=o.evaluateSizeForFeature(T.textSizeData,he,pn),kr=O.get("text-padding");yr=this.collisionIndex.placeCollisionCircles(T,ye,pn,T.lineVertexArray,T.glyphOffsetArray,Xr,D,B,H,v,De,pe.predicate,He.collisionCircleDiameter*Xr/o.ONE_EM,kr,this.retainedQueryData[T.bucketInstanceId].tileID),st=ye||yr.circles.length>0&&!yr.collisionDetected,pt=pt&&yr.offscreen,St=yr.occluded}if(Je.iconFeatureIndex&&(qr=Je.iconFeatureIndex),Je.iconBox){const pn=Xr=>{Hr(Xr);const kr=ke&&ir?Xu(ir.x,ir.y,Oe,De,this.transform.angle):new o.Point(0,0),$n=T.getSymbolInstanceIconSize(de,this.transform.zoom,He.placedIconSymbolIndex);return this.collisionIndex.placeCollisionBox(T,$n,Xr,kr,_e,J,D,pe.predicate)};Qt&&Qt.box&&Qt.box.length&&Je.verticalIconBox?(Gt=pn(Je.verticalIconBox),wt=Gt.box.length>0):(Gt=pn(Je.iconBox),wt=Gt.box.length>0),pt=pt&&Gt.offscreen,Ht=Gt.occluded}const di=ee||He.numHorizontalGlyphVertices===0&&Ze===0,Mo=le||He.numIconVertices===0;if(di||Mo?Mo?di||(wt=wt&&st):st=wt&&st:wt=st=wt&&st,st&&br&&br.box&&this.collisionIndex.insertCollisionBox(br.box,O.get("text-ignore-placement"),T.bucketInstanceId,Qt&&Qt.box&&Wr?Wr:Nr,pe.ID),wt&&Gt&&this.collisionIndex.insertCollisionBox(Gt.box,O.get("icon-ignore-placement"),T.bucketInstanceId,qr,pe.ID),yr&&(st&&this.collisionIndex.insertCollisionCircles(yr.circles,O.get("text-ignore-placement"),T.bucketInstanceId,Nr,pe.ID),v)){const pn=T.bucketInstanceId;let Xr=this.collisionCircleArrays[pn];Xr===void 0&&(Xr=this.collisionCircleArrays[pn]=new qu);for(let kr=0;kr<yr.circles.length;kr+=4)Xr.circles.push(yr.circles[kr+0]),Xr.circles.push(yr.circles[kr+1]),Xr.circles.push(yr.circles[kr+2]),Xr.circles.push(yr.collisionDetected?1:0)}const wa=T.projection.name!=="globe";Fe=Fe&&(wa||!St),Ke=Ke&&(wa||!Ht),this.placements[_t]=new Wu(st||Fe,wt||Ke,pt||T.justReloaded),f.add(_t)};if(Ve){const He=T.getSortedSymbolIndexes(this.transform.angle);for(let ct=He.length-1;ct>=0;--ct){const Je=He[ct];xt(T.symbolInstances.get(Je),Je,T.collisionArrays[Je])}}else for(let He=c.symbolInstanceStart;He<c.symbolInstanceEnd;He++)xt(T.symbolInstances.get(He),He,T.collisionArrays[He]);if(v&&T.bucketInstanceId in this.collisionCircleArrays){const He=this.collisionCircleArrays[T.bucketInstanceId];o.invert(He.invProjMatrix,D),He.viewportMatrix=this.collisionIndex.getViewportMatrix()}T.justReloaded=!1}markUsedJustification(c,f,v,b){const{leftJustifiedTextSymbolIndex:T,centerJustifiedTextSymbolIndex:O,rightJustifiedTextSymbolIndex:D,verticalPlacedTextSymbolIndex:B,crossTileID:H}=v,q=o.getAnchorJustification(f),J=b===o.WritingMode.vertical?B:q==="left"?T:q==="center"?O:q==="right"?D:-1;T>=0&&(c.text.placedSymbolArray.get(T).crossTileID=J>=0&&T!==J?0:H),O>=0&&(c.text.placedSymbolArray.get(O).crossTileID=J>=0&&O!==J?0:H),D>=0&&(c.text.placedSymbolArray.get(D).crossTileID=J>=0&&D!==J?0:H),B>=0&&(c.text.placedSymbolArray.get(B).crossTileID=J>=0&&B!==J?0:H)}markUsedOrientation(c,f,v){const b=f===o.WritingMode.horizontal||f===o.WritingMode.horizontalOnly?f:0,T=f===o.WritingMode.vertical?f:0,{leftJustifiedTextSymbolIndex:O,centerJustifiedTextSymbolIndex:D,rightJustifiedTextSymbolIndex:B,verticalPlacedTextSymbolIndex:H}=v,q=c.text.placedSymbolArray;O>=0&&(q.get(O).placedOrientation=b),D>=0&&(q.get(D).placedOrientation=b),B>=0&&(q.get(B).placedOrientation=b),H>=0&&(q.get(H).placedOrientation=T)}commit(c){this.commitTime=c,this.zoomAtLastRecencyCheck=this.transform.zoom;const f=this.prevPlacement;let v=!1;this.prevZoomAdjustment=f?f.zoomAdjustment(this.transform.zoom):0;const b=f?f.symbolFadeChange(c):1,T=f?f.opacities:{},O=f?f.variableOffsets:{},D=f?f.placedOrientations:{};for(const B in this.placements){const H=this.placements[B],q=T[B];q?(this.opacities[B]=new es(q,b,H.text,H.icon,null,H.clipped),v=v||H.text!==q.text.placed||H.icon!==q.icon.placed):(this.opacities[B]=new es(null,b,H.text,H.icon,H.skipFade,H.clipped),v=v||H.text||H.icon)}for(const B in T){const H=T[B];if(!this.opacities[B]){const q=new es(H,b,!1,!1);q.isHidden()||(this.opacities[B]=q,v=v||H.text.placed||H.icon.placed)}}for(const B in O)this.variableOffsets[B]||!this.opacities[B]||this.opacities[B].isHidden()||(this.variableOffsets[B]=O[B]);for(const B in D)this.placedOrientations[B]||!this.opacities[B]||this.opacities[B].isHidden()||(this.placedOrientations[B]=D[B]);v?this.lastPlacementChangeTime=c:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=f?f.lastPlacementChangeTime:c)}updateLayerOpacities(c,f){const v=new Set;for(const b of f){const T=b.getBucket(c);T&&b.latestFeatureIndex&&c.id===T.layerIds[0]&&this.updateBucketOpacities(T,v,b.collisionBoxArray)}}updateBucketOpacities(c,f,v){c.hasTextData()&&c.text.opacityVertexArray.clear(),c.hasIconData()&&c.icon.opacityVertexArray.clear(),c.hasIconCollisionBoxData()&&c.iconCollisionBox.collisionVertexArray.clear(),c.hasTextCollisionBoxData()&&c.textCollisionBox.collisionVertexArray.clear();const b=c.layers[0].layout,T=!!c.layers[0].dynamicFilter(),O=new es(null,0,!1,!1,!0),D=b.get("text-allow-overlap"),B=b.get("icon-allow-overlap"),H=b.get("text-variable-anchor"),q=b.get("text-rotation-alignment")==="map",J=b.get("text-pitch-alignment")==="map",ae=b.get("icon-text-fit")!=="none",ce=new es(null,0,D&&(B||!c.hasIconData()||b.get("icon-optional")),B&&(D||!c.hasTextData()||b.get("text-optional")),!0);!c.collisionArrays&&v&&(c.hasIconCollisionBoxData()||c.hasTextCollisionBoxData())&&c.deserializeCollisionBoxes(v);const he=(pe,ee,le)=>{for(let ye=0;ye<ee/4;ye++)pe.opacityVertexArray.emplaceBack(le)};let de=0;for(let pe=0;pe<c.symbolInstances.length;pe++){const ee=c.symbolInstances.get(pe),{numHorizontalGlyphVertices:le,numVerticalGlyphVertices:ye,crossTileID:_e,numIconVertices:Oe}=ee,De=f.has(_e);let ke=this.opacities[_e];De?ke=O:ke||(ke=ce,this.opacities[_e]=ke),f.add(_e);const Ve=le>0||ye>0,Fe=Oe>0,Ke=this.placedOrientations[_e],xt=Ke===o.WritingMode.vertical,He=Ke===o.WritingMode.horizontal||Ke===o.WritingMode.horizontalOnly;if(!Ve&&!Fe||ke.isHidden()||de++,Ve){const ct=Zu(ke.text);he(c.text,le,xt?Pn:ct),he(c.text,ye,He?Pn:ct);const Je=ke.text.isHidden(),{leftJustifiedTextSymbolIndex:_t,centerJustifiedTextSymbolIndex:Ze,rightJustifiedTextSymbolIndex:st,verticalPlacedTextSymbolIndex:wt}=ee,pt=c.text.placedSymbolArray,St=Je||xt?1:0;_t>=0&&(pt.get(_t).hidden=St),Ze>=0&&(pt.get(Ze).hidden=St),st>=0&&(pt.get(st).hidden=St),wt>=0&&(pt.get(wt).hidden=Je||He?1:0);const Ht=this.variableOffsets[_e];Ht&&this.markUsedJustification(c,Ht.anchor,ee,Ke);const ir=this.placedOrientations[_e];ir&&(this.markUsedJustification(c,"left",ee,ir),this.markUsedOrientation(c,ir,ee))}if(Fe){const ct=Zu(ke.icon),{placedIconSymbolIndex:Je,verticalPlacedIconSymbolIndex:_t}=ee,Ze=c.icon.placedSymbolArray,st=ke.icon.isHidden()?1:0;Je>=0&&(he(c.icon,Oe,xt?Pn:ct),Ze.get(Je).hidden=st),_t>=0&&(he(c.icon,ee.numVerticalIconVertices,He?Pn:ct),Ze.get(_t).hidden=st)}if(c.hasIconCollisionBoxData()||c.hasTextCollisionBoxData()){const ct=c.collisionArrays[pe];if(ct){let Je=new o.Point(0,0),_t=!0;if(ct.textBox||ct.verticalTextBox){if(H){const st=this.variableOffsets[_e];st?(Je=Hu(st.anchor,st.width,st.height,st.textOffset,st.textScale),q&&Je._rotate(J?this.transform.angle:-this.transform.angle)):_t=!1}T&&(_t=!ke.clipped),ct.textBox&&pc(c.textCollisionBox.collisionVertexArray,ke.text.placed,!_t||xt,Je.x,Je.y),ct.verticalTextBox&&pc(c.textCollisionBox.collisionVertexArray,ke.text.placed,!_t||He,Je.x,Je.y)}const Ze=_t&&!!(!He&&ct.verticalIconBox);ct.iconBox&&pc(c.iconCollisionBox.collisionVertexArray,ke.icon.placed,Ze,ae?Je.x:0,ae?Je.y:0),ct.verticalIconBox&&pc(c.iconCollisionBox.collisionVertexArray,ke.icon.placed,!Ze,ae?Je.x:0,ae?Je.y:0)}}}if(c.fullyClipped=de===0,c.sortFeatures(this.transform.angle),this.retainedQueryData[c.bucketInstanceId]&&(this.retainedQueryData[c.bucketInstanceId].featureSortOrder=c.featureSortOrder),c.hasTextData()&&c.text.opacityVertexBuffer&&c.text.opacityVertexBuffer.updateData(c.text.opacityVertexArray),c.hasIconData()&&c.icon.opacityVertexBuffer&&c.icon.opacityVertexBuffer.updateData(c.icon.opacityVertexArray),c.hasIconCollisionBoxData()&&c.iconCollisionBox.collisionVertexBuffer&&c.iconCollisionBox.collisionVertexBuffer.updateData(c.iconCollisionBox.collisionVertexArray),c.hasTextCollisionBoxData()&&c.textCollisionBox.collisionVertexBuffer&&c.textCollisionBox.collisionVertexBuffer.updateData(c.textCollisionBox.collisionVertexArray),c.bucketInstanceId in this.collisionCircleArrays){const pe=this.collisionCircleArrays[c.bucketInstanceId];c.placementInvProjMatrix=pe.invProjMatrix,c.placementViewportMatrix=pe.viewportMatrix,c.collisionCircleArray=pe.circles,delete this.collisionCircleArrays[c.bucketInstanceId]}}symbolFadeChange(c){return this.fadeDuration===0?1:(c-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(c){return Math.max(0,(this.transform.zoom-c)/1.5)}hasTransitions(c){return this.stale||c-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(c,f){const v=this.zoomAtLastRecencyCheck===f?1-this.zoomAdjustment(f):1;return this.zoomAtLastRecencyCheck=f,this.commitTime+this.fadeDuration*v>c}setStale(){this.stale=!0}}function pc(g,c,f,v,b){g.emplaceBack(c?1:0,f?1:0,v||0,b||0),g.emplaceBack(c?1:0,f?1:0,v||0,b||0),g.emplaceBack(c?1:0,f?1:0,v||0,b||0),g.emplaceBack(c?1:0,f?1:0,v||0,b||0)}const Hi=Math.pow(2,25),Rn=Math.pow(2,24),bm=Math.pow(2,17),wm=Math.pow(2,16),Xi=Math.pow(2,9),Ao=Math.pow(2,8),w_=Math.pow(2,1);function Zu(g){if(g.opacity===0&&!g.placed)return 0;if(g.opacity===1&&g.placed)return 4294967295;const c=g.placed?1:0,f=Math.floor(127*g.opacity);return f*Hi+c*Rn+f*bm+c*wm+f*Xi+c*Ao+f*w_+c}const Pn=0;class Ku{constructor(c){this._sortAcrossTiles=c.layout.get("symbol-z-order")!=="viewport-y"&&c.layout.get("symbol-sort-key").constantOr(1)!==void 0,this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs=new Set,this._bucketParts=[]}continuePlacement(c,f,v,b,T){const O=this._bucketParts;for(;this._currentTileIndex<c.length;)if(f.getBucketParts(O,b,c[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,T())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,O.sort((D,B)=>D.sortKey-B.sortKey));this._currentPartIndex<O.length;){const D=O[this._currentPartIndex];if(f.placeLayerBucketPart(D,this._seenCrossTileIDs,v,D.symbolInstanceStart===0),this._currentPartIndex++,T())return!0}return!1}}class Sm{constructor(c,f,v,b,T,O,D,B){this.placement=new bh(c,T,O,D,B),this._currentPlacementIndex=f.length-1,this._forceFullPlacement=v,this._showCollisionBoxes=b,this._done=!1}isDone(){return this._done}continuePlacement(c,f,v){const b=o.exported.now(),T=()=>{const O=o.exported.now()-b;return!this._forceFullPlacement&&O>2};for(;this._currentPlacementIndex>=0;){const O=f[c[this._currentPlacementIndex]],D=this.placement.collisionIndex.transform.zoom;if(O.type==="symbol"&&(!O.minzoom||O.minzoom<=D)&&(!O.maxzoom||O.maxzoom>D)){if(this._inProgressLayer||(this._inProgressLayer=new Ku(O)),this._inProgressLayer.continuePlacement(v[O.source],this.placement,this._showCollisionBoxes,O,T))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(c){return this.placement.commit(c),this.placement}}const vl=512/o.EXTENT/2;class yi{constructor(c,f,v){this.tileID=c,this.bucketInstanceId=v,this.index=new o.KDBush(f.length,16,Int32Array),this.keys=[],this.crossTileIDs=[];const b=c.canonical.x*o.EXTENT,T=c.canonical.y*o.EXTENT;for(let O=0;O<f.length;O++){const{key:D,crossTileID:B,tileAnchorX:H,tileAnchorY:q}=f.get(O),J=Math.floor((b+H)*vl),ae=Math.floor((T+q)*vl);this.index.add(J,ae),this.keys.push(D),this.crossTileIDs.push(B)}this.index.finish()}findMatches(c,f,v){const b=this.tileID.canonical.z<f.canonical.z?1:Math.pow(2,this.tileID.canonical.z-f.canonical.z),T=vl/Math.pow(2,f.canonical.z-this.tileID.canonical.z),O=f.canonical.x*o.EXTENT,D=f.canonical.y*o.EXTENT;for(let B=0;B<c.length;B++){const H=c.get(B);if(H.crossTileID)continue;const{key:q,tileAnchorX:J,tileAnchorY:ae}=H,ce=Math.floor((O+J)*T),he=Math.floor((D+ae)*T),de=this.index.range(ce-b,he-b,ce+b,he+b);for(const pe of de){const ee=this.crossTileIDs[pe];if(this.keys[pe]===q&&!v.has(ee)){v.add(ee),H.crossTileID=ee;break}}}}}class Em{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Tm{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(c){const f=Math.round((c-this.lng)/360);if(f!==0)for(const v in this.indexes){const b=this.indexes[v],T={};for(const O in b){const D=b[O];D.tileID=D.tileID.unwrapTo(D.tileID.wrap+f),T[D.tileID.key]=D}this.indexes[v]=T}this.lng=c}addBucket(c,f,v){if(this.indexes[c.overscaledZ]&&this.indexes[c.overscaledZ][c.key]){if(this.indexes[c.overscaledZ][c.key].bucketInstanceId===f.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(c.overscaledZ,this.indexes[c.overscaledZ][c.key])}for(let T=0;T<f.symbolInstances.length;T++)f.symbolInstances.get(T).crossTileID=0;this.usedCrossTileIDs[c.overscaledZ]||(this.usedCrossTileIDs[c.overscaledZ]=new Set);const b=this.usedCrossTileIDs[c.overscaledZ];for(const T in this.indexes){const O=this.indexes[T];if(Number(T)>c.overscaledZ)for(const D in O){const B=O[D];B.tileID.isChildOf(c)&&B.findMatches(f.symbolInstances,c,b)}else{const D=O[c.scaledTo(Number(T)).key];D&&D.findMatches(f.symbolInstances,c,b)}}for(let T=0;T<f.symbolInstances.length;T++){const O=f.symbolInstances.get(T);O.crossTileID||(O.crossTileID=v.generate(),b.add(O.crossTileID))}return this.indexes[c.overscaledZ]===void 0&&(this.indexes[c.overscaledZ]={}),this.indexes[c.overscaledZ][c.key]=new yi(c,f.symbolInstances,f.bucketInstanceId),!0}removeBucketCrossTileIDs(c,f){for(const v of f.crossTileIDs)this.usedCrossTileIDs[c].delete(v)}removeStaleBuckets(c){let f=!1;for(const v in this.indexes){const b=this.indexes[v];for(const T in b)c[b[T].bucketInstanceId]||(this.removeBucketCrossTileIDs(v,b[T]),delete b[T],f=!0)}return f}}class ts{constructor(){this.layerIndexes={},this.crossTileIDs=new Em,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(c,f,v,b){let T=this.layerIndexes[c.id];T===void 0&&(T=this.layerIndexes[c.id]=new Tm);let O=!1;const D={};b.name!=="globe"&&T.handleWrapJump(v);for(const B of f){const H=B.getBucket(c);H&&c.id===H.layerIds[0]&&(H.bucketInstanceId||(H.bucketInstanceId=++this.maxBucketInstanceId),T.addBucket(B.tileID,H,this.crossTileIDs)&&(O=!0),D[H.bucketInstanceId]=!0)}return T.removeStaleBuckets(D)&&(O=!0),O}pruneUnusedLayers(c){const f={};c.forEach(v=>{f[v]=!0});for(const v in this.layerIndexes)f[v]||delete this.layerIndexes[v]}}const zs=(g,c)=>o.emitValidationErrors(g,c&&c.filter(f=>f.identifier!=="source.canvas")),wh=o.pick(jr,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setTerrain","setFog","setProjection"]),gS=o.pick(jr,["setCenter","setZoom","setBearing","setPitch"]),Am={version:8,layers:[],sources:{}},mc={fill:!0,line:!0,background:!0,hillshade:!0,raster:!0};class _a extends o.Evented{constructor(c,f={}){super(),this.map=c,this.dispatcher=new $e(hc(),this),this.imageManager=new fe,this.imageManager.setEventedParent(this),this.glyphManager=new o.GlyphManager(c._requestManager,f.localFontFamily?o.LocalGlyphMode.all:f.localIdeographFontFamily?o.LocalGlyphMode.ideographs:o.LocalGlyphMode.none,f.localFontFamily||f.localIdeographFontFamily),this.crossTileSymbolIndex=new ts,this._layers={},this._num3DLayers=0,this._numSymbolLayers=0,this._numCircleLayers=0,this._serializedLayers={},this._sourceCaches={},this._otherSourceCaches={},this._symbolSourceCaches={},this._loaded=!1,this._availableImages=[],this._order=[],this._drapedFirstOrder=[],this._markersNeedUpdate=!1,this._resetUpdates(),this.dispatcher.broadcast("setReferrer",o.getReferrer());const v=this;this._rtlTextPluginCallback=_a.registerForPluginStateChange(b=>{v.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:b.pluginStatus,pluginURL:b.pluginURL},(T,O)=>{if(o.triggerPluginCompletionEvent(T),O&&O.every(D=>D))for(const D in v._sourceCaches){const B=v._sourceCaches[D],H=B.getSource().type;H!=="vector"&&H!=="geojson"||B.reload()}})}),this.on("data",b=>{if(b.dataType!=="source"||b.sourceDataType!=="metadata")return;const T=this.getSource(b.sourceId);if(T&&T.vectorLayerIds)for(const O in this._layers){const D=this._layers[O];D.source===T.id&&this._validateLayer(D)}})}loadURL(c,f={}){this.fire(new o.Event("dataloading",{dataType:"style"}));const v=typeof f.validate=="boolean"?f.validate:!o.isMapboxURL(c);c=this.map._requestManager.normalizeStyleURL(c,f.accessToken);const b=this.map._requestManager.transformRequest(c,o.ResourceType.Style);this._request=o.getJSON(b,(T,O)=>{this._request=null,T?this.fire(new o.ErrorEvent(T)):O&&this._load(O,v)})}loadJSON(c,f={}){this.fire(new o.Event("dataloading",{dataType:"style"})),this._request=o.exported.frame(()=>{this._request=null,this._load(c,f.validate!==!1)})}loadEmpty(){this.fire(new o.Event("dataloading",{dataType:"style"})),this._load(Am,!1)}_updateLayerCount(c,f){const v=f?1:-1;c.is3D()&&(this._num3DLayers+=v),c.type==="circle"&&(this._numCircleLayers+=v),c.type==="symbol"&&(this._numSymbolLayers+=v)}_load(c,f){if(f&&zs(this,o.validateStyle(c)))return;this._loaded=!0,this.stylesheet=o.clone$1(c),this._updateMapProjection();for(const b in c.sources)this.addSource(b,c.sources[b],{validate:!1});this._changed=!1,c.sprite?this._loadSprite(c.sprite):(this.imageManager.setLoaded(!0),this.dispatcher.broadcast("spriteLoaded",!0)),this.glyphManager.setURL(c.glyphs);const v=y_(this.stylesheet.layers);this._order=v.map(b=>b.id),this._layers={},this._serializedLayers={};for(const b of v){const T=o.createStyleLayer(b);T.setEventedParent(this,{layer:{id:T.id}}),this._layers[T.id]=T,this._serializedLayers[T.id]=T.serialize(),this._updateLayerCount(T,!0)}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new Se(this.stylesheet.light),this.stylesheet.terrain&&!this.terrainSetForDrapingOnly()&&this._createTerrain(this.stylesheet.terrain,1),this.stylesheet.fog&&this._createFog(this.stylesheet.fog),this._updateDrapeFirstLayers(),this.fire(new o.Event("data",{dataType:"style"})),this.fire(new o.Event("style.load"))}terrainSetForDrapingOnly(){return!!this.terrain&&this.terrain.drapeRenderMode===0}setProjection(c){c?this.stylesheet.projection=c:delete this.stylesheet.projection,this._updateMapProjection()}applyProjectionUpdate(){this._loaded&&(this.dispatcher.broadcast("setProjection",this.map.transform.projectionOptions),this.map.transform.projection.requiresDraping?this.getTerrain()||this.stylesheet.terrain||this.setTerrainForDraping():this.terrainSetForDrapingOnly()&&this.setTerrain(null))}_updateMapProjection(){this.map._useExplicitProjection?this.applyProjectionUpdate():this.map._prioritizeAndUpdateProjection(null,this.stylesheet.projection)}_loadSprite(c){this._spriteRequest=function(f,v,b){let T,O,D;const B=o.exported.devicePixelRatio>1?"@2x":"";let H=o.getJSON(v.transformRequest(v.normalizeSpriteURL(f,B,".json"),o.ResourceType.SpriteJSON),(ae,ce)=>{H=null,D||(D=ae,T=ce,J())}),q=o.getImage(v.transformRequest(v.normalizeSpriteURL(f,B,".png"),o.ResourceType.SpriteImage),(ae,ce)=>{q=null,D||(D=ae,O=ce,J())});function J(){if(D)b(D);else if(T&&O){const ae=o.exported.getImageData(O),ce={};for(const he in T){const{width:de,height:pe,x:ee,y:le,sdf:ye,pixelRatio:_e,stretchX:Oe,stretchY:De,content:ke}=T[he],Ve=new o.RGBAImage({width:de,height:pe});o.RGBAImage.copy(ae,Ve,{x:ee,y:le},{x:0,y:0},{width:de,height:pe}),ce[he]={data:Ve,pixelRatio:_e,sdf:ye,stretchX:Oe,stretchY:De,content:ke}}b(null,ce)}}return{cancel(){H&&(H.cancel(),H=null),q&&(q.cancel(),q=null)}}}(c,this.map._requestManager,(f,v)=>{if(this._spriteRequest=null,f)this.fire(new o.ErrorEvent(f));else if(v)for(const b in v)this.imageManager.addImage(b,v[b]);this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),this.dispatcher.broadcast("setImages",this._availableImages),this.dispatcher.broadcast("spriteLoaded",!0),this.fire(new o.Event("data",{dataType:"style"}))})}_validateLayer(c){const f=this.getSource(c.source);if(!f)return;const v=c.sourceLayer;v&&(f.type==="geojson"||f.vectorLayerIds&&f.vectorLayerIds.indexOf(v)===-1)&&this.fire(new o.ErrorEvent(new Error(`Source layer "${v}" does not exist on source "${f.id}" as specified by style layer "${c.id}"`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const c in this._sourceCaches)if(!this._sourceCaches[c].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeLayers(c){const f=[];for(const v of c){const b=this._layers[v];b.type!=="custom"&&f.push(b.serialize())}return f}hasTransitions(){if(this.light&&this.light.hasTransition()||this.fog&&this.fog.hasTransition())return!0;for(const c in this._sourceCaches)if(this._sourceCaches[c].hasTransition())return!0;for(const c in this._layers)if(this._layers[c].hasTransition())return!0;return!1}get order(){return this.map._optimizeForTerrain&&this.terrain?this._drapedFirstOrder:this._order}isLayerDraped(c){return!!this.terrain&&(typeof c.isLayerDraped=="function"?c.isLayerDraped():mc[c.type])}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading")}update(c){if(!this._loaded)return;const f=this._changed;if(this._changed){const b=Object.keys(this._updatedLayers),T=Object.keys(this._removedLayers);(b.length||T.length)&&this._updateWorkerLayers(b,T);for(const O in this._updatedSources){const D=this._updatedSources[O];D==="reload"?this._reloadSource(O):D==="clear"&&this._clearSource(O)}this._updateTilesForChangedImages();for(const O in this._updatedPaintProps)this._layers[O].updateTransitions(c);this.light.updateTransitions(c),this.fog&&this.fog.updateTransitions(c),this._resetUpdates()}const v={};for(const b in this._sourceCaches){const T=this._sourceCaches[b];v[b]=T.used,T.used=!1}for(const b of this._order){const T=this._layers[b];if(T.recalculate(c,this._availableImages),!T.isHidden(c.zoom)){const D=this._getLayerSourceCache(T);D&&(D.used=!0)}const O=this.map.painter;if(O){const D=T.getProgramIds();if(!D)continue;const B=T.getProgramConfiguration(c.zoom);for(const H of D)O.useProgram(H,B)}}for(const b in v){const T=this._sourceCaches[b];v[b]!==T.used&&T.getSource().fire(new o.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:T.getSource().id}))}this.light.recalculate(c),this.terrain&&this.terrain.recalculate(c),this.fog&&this.fog.recalculate(c),this.z=c.zoom,this._markersNeedUpdate&&(this._updateMarkersOpacity(),this._markersNeedUpdate=!1),f&&this.fire(new o.Event("data",{dataType:"style"}))}_updateTilesForChangedImages(){const c=Object.keys(this._changedImages);if(c.length){for(const f in this._sourceCaches)this._sourceCaches[f].reloadTilesForDependencies(["icons","patterns"],c);this._changedImages={}}}_updateWorkerLayers(c,f){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(c),removedIds:f})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}}setState(c){if(this._checkLoaded(),zs(this,o.validateStyle(c)))return!1;(c=o.clone$1(c)).layers=y_(c.layers);const f=function(b,T){if(!b)return[{command:jr.setStyle,args:[T]}];let O=[];try{if(!_(b.version,T.version))return[{command:jr.setStyle,args:[T]}];_(b.center,T.center)||O.push({command:jr.setCenter,args:[T.center]}),_(b.zoom,T.zoom)||O.push({command:jr.setZoom,args:[T.zoom]}),_(b.bearing,T.bearing)||O.push({command:jr.setBearing,args:[T.bearing]}),_(b.pitch,T.pitch)||O.push({command:jr.setPitch,args:[T.pitch]}),_(b.sprite,T.sprite)||O.push({command:jr.setSprite,args:[T.sprite]}),_(b.glyphs,T.glyphs)||O.push({command:jr.setGlyphs,args:[T.glyphs]}),_(b.transition,T.transition)||O.push({command:jr.setTransition,args:[T.transition]}),_(b.light,T.light)||O.push({command:jr.setLight,args:[T.light]}),_(b.fog,T.fog)||O.push({command:jr.setFog,args:[T.fog]}),_(b.projection,T.projection)||O.push({command:jr.setProjection,args:[T.projection]});const D={},B=[];(function(J,ae,ce,he){let de;for(de in ae=ae||{},J=J||{})J.hasOwnProperty(de)&&(ae.hasOwnProperty(de)||Uu(de,ce,he));for(de in ae){if(!ae.hasOwnProperty(de))continue;const pe=ae[de];J.hasOwnProperty(de)?_(J[de],pe)||(J[de].type==="geojson"&&pe.type==="geojson"&&xh(J,ae,de)?ce.push({command:jr.setGeoJSONSourceData,args:[de,pe.data]}):gm(de,ae,ce,he)):mm(de,ae,ce)}})(b.sources,T.sources,B,D);const H=[];b.layers&&b.layers.forEach(J=>{J.source&&D[J.source]?O.push({command:jr.removeLayer,args:[J.id]}):H.push(J)});let q=b.terrain;q&&D[q.source]&&(O.push({command:jr.setTerrain,args:[void 0]}),q=void 0),O=O.concat(B),_(q,T.terrain)||O.push({command:jr.setTerrain,args:[T.terrain]}),function(J,ae,ce){ae=ae||[];const he=(J=J||[]).map(Ya),de=ae.map(Ya),pe=J.reduce(ym,{}),ee=ae.reduce(ym,{}),le=he.slice(),ye=Object.create(null);let _e,Oe,De,ke,Ve,Fe,Ke;for(_e=0,Oe=0;_e<he.length;_e++)De=he[_e],ee.hasOwnProperty(De)?Oe++:(ce.push({command:jr.removeLayer,args:[De]}),le.splice(le.indexOf(De,Oe),1));for(_e=0,Oe=0;_e<de.length;_e++)De=de[de.length-1-_e],le[le.length-1-_e]!==De&&(pe.hasOwnProperty(De)?(ce.push({command:jr.removeLayer,args:[De]}),le.splice(le.lastIndexOf(De,le.length-Oe),1)):Oe++,Fe=le[le.length-_e],ce.push({command:jr.addLayer,args:[ee[De],Fe]}),le.splice(le.length-_e,0,De),ye[De]=!0);for(_e=0;_e<de.length;_e++)if(De=de[_e],ke=pe[De],Ve=ee[De],!ye[De]&&!_(ke,Ve))if(_(ke.source,Ve.source)&&_(ke["source-layer"],Ve["source-layer"])&&_(ke.type,Ve.type)){for(Ke in ya(ke.layout,Ve.layout,ce,De,null,jr.setLayoutProperty),ya(ke.paint,Ve.paint,ce,De,null,jr.setPaintProperty),_(ke.filter,Ve.filter)||ce.push({command:jr.setFilter,args:[De,Ve.filter]}),_(ke.minzoom,Ve.minzoom)&&_(ke.maxzoom,Ve.maxzoom)||ce.push({command:jr.setLayerZoomRange,args:[De,Ve.minzoom,Ve.maxzoom]}),ke)ke.hasOwnProperty(Ke)&&Ke!=="layout"&&Ke!=="paint"&&Ke!=="filter"&&Ke!=="metadata"&&Ke!=="minzoom"&&Ke!=="maxzoom"&&(Ke.indexOf("paint.")===0?ya(ke[Ke],Ve[Ke],ce,De,Ke.slice(6),jr.setPaintProperty):_(ke[Ke],Ve[Ke])||ce.push({command:jr.setLayerProperty,args:[De,Ke,Ve[Ke]]}));for(Ke in Ve)Ve.hasOwnProperty(Ke)&&!ke.hasOwnProperty(Ke)&&Ke!=="layout"&&Ke!=="paint"&&Ke!=="filter"&&Ke!=="metadata"&&Ke!=="minzoom"&&Ke!=="maxzoom"&&(Ke.indexOf("paint.")===0?ya(ke[Ke],Ve[Ke],ce,De,Ke.slice(6),jr.setPaintProperty):_(ke[Ke],Ve[Ke])||ce.push({command:jr.setLayerProperty,args:[De,Ke,Ve[Ke]]}))}else ce.push({command:jr.removeLayer,args:[De]}),Fe=le[le.lastIndexOf(De)+1],ce.push({command:jr.addLayer,args:[Ve,Fe]})}(H,T.layers,O)}catch(D){console.warn("Unable to compute style diff:",D),O=[{command:jr.setStyle,args:[T]}]}return O}(this.serialize(),c).filter(b=>!(b.command in gS));if(f.length===0)return!1;const v=f.filter(b=>!(b.command in wh));if(v.length>0)throw new Error(`Unimplemented: ${v.map(b=>b.command).join(", ")}.`);return f.forEach(b=>{b.command!=="setTransition"&&b.command!=="setProjection"&&this[b.command].apply(this,b.args)}),this.stylesheet=c,this._updateMapProjection(),!0}addImage(c,f){return this.getImage(c)?this.fire(new o.ErrorEvent(new Error("An image with this name already exists."))):(this.imageManager.addImage(c,f),this._afterImageUpdated(c),this)}updateImage(c,f){this.imageManager.updateImage(c,f)}getImage(c){return this.imageManager.getImage(c)}removeImage(c){return this.getImage(c)?(this.imageManager.removeImage(c),this._afterImageUpdated(c),this):this.fire(new o.ErrorEvent(new Error("No image with this name exists.")))}_afterImageUpdated(c){this._availableImages=this.imageManager.listImages(),this._changedImages[c]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new o.Event("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this._availableImages.slice()}addSource(c,f,v={}){if(this._checkLoaded(),this.getSource(c)!==void 0)throw new Error("There is already a source with this ID");if(!f.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(f).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(f.type)>=0&&this._validate(o.validateSource,`sources.${c}`,f,null,v))return;this.map&&this.map._collectResourceTiming&&(f.collectResourceTiming=!0);const b=gr(c,f,this.dispatcher,this);b.setEventedParent(this,()=>({isSourceLoaded:this._isSourceCacheLoaded(c),source:b.serialize(),sourceId:c}));const T=O=>{const D=(O?"symbol:":"other:")+c,B=this._sourceCaches[D]=new o.SourceCache(D,b,O);(O?this._symbolSourceCaches:this._otherSourceCaches)[c]=B,B.style=this,B.onAdd(this.map)};T(!1),f.type!=="vector"&&f.type!=="geojson"||T(!0),b.onAdd&&b.onAdd(this.map),this._changed=!0}removeSource(c){this._checkLoaded();const f=this.getSource(c);if(!f)throw new Error("There is no source with this ID");for(const b in this._layers)if(this._layers[b].source===c)return this.fire(new o.ErrorEvent(new Error(`Source "${c}" cannot be removed while layer "${b}" is using it.`)));if(this.terrain&&this.terrain.get().source===c)return this.fire(new o.ErrorEvent(new Error(`Source "${c}" cannot be removed while terrain is using it.`)));const v=this._getSourceCaches(c);for(const b of v)delete this._sourceCaches[b.id],delete this._updatedSources[b.id],b.fire(new o.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:b.getSource().id})),b.setEventedParent(null),b.clearTiles();return delete this._otherSourceCaches[c],delete this._symbolSourceCaches[c],f.setEventedParent(null),f.onRemove&&f.onRemove(this.map),this._changed=!0,this}setGeoJSONSourceData(c,f){this._checkLoaded(),this.getSource(c).setData(f),this._changed=!0}getSource(c){const f=this._getSourceCache(c);return f&&f.getSource()}_getSources(){const c=[];for(const f in this._otherSourceCaches){const v=this._getSourceCache(f);v&&c.push(v.getSource())}return c}addLayer(c,f,v={}){this._checkLoaded();const b=c.id;if(this.getLayer(b))return void this.fire(new o.ErrorEvent(new Error(`Layer with id "${b}" already exists on this map`)));let T;if(c.type==="custom"){if(zs(this,o.validateCustomStyleLayer(c)))return;T=o.createStyleLayer(c)}else{if(typeof c.source=="object"&&(this.addSource(b,c.source),c=o.clone$1(c),c=o.extend(c,{source:b})),this._validate(o.validateLayer,`layers.${b}`,c,{arrayIndex:-1},v))return;T=o.createStyleLayer(c),this._validateLayer(T),T.setEventedParent(this,{layer:{id:b}}),this._serializedLayers[T.id]=T.serialize(),this._updateLayerCount(T,!0)}const O=f?this._order.indexOf(f):this._order.length;if(f&&O===-1)return void this.fire(new o.ErrorEvent(new Error(`Layer with id "${f}" does not exist on this map.`)));this._order.splice(O,0,b),this._layerOrderChanged=!0,this._layers[b]=T;const D=this._getLayerSourceCache(T);if(this._removedLayers[b]&&T.source&&D&&T.type!=="custom"){const B=this._removedLayers[b];delete this._removedLayers[b],B.type!==T.type?this._updatedSources[T.source]="clear":(this._updatedSources[T.source]="reload",D.pause())}this._updateLayer(T),T.onAdd&&T.onAdd(this.map),this._updateDrapeFirstLayers()}moveLayer(c,f){if(this._checkLoaded(),this._changed=!0,!this._layers[c])return void this.fire(new o.ErrorEvent(new Error(`The layer '${c}' does not exist in the map's style and cannot be moved.`)));if(c===f)return;const v=this._order.indexOf(c);this._order.splice(v,1);const b=f?this._order.indexOf(f):this._order.length;f&&b===-1?this.fire(new o.ErrorEvent(new Error(`Layer with id "${f}" does not exist on this map.`))):(this._order.splice(b,0,c),this._layerOrderChanged=!0,this._updateDrapeFirstLayers())}removeLayer(c){this._checkLoaded();const f=this._layers[c];if(!f)return void this.fire(new o.ErrorEvent(new Error(`The layer '${c}' does not exist in the map's style and cannot be removed.`)));f.setEventedParent(null),this._updateLayerCount(f,!1);const v=this._order.indexOf(c);this._order.splice(v,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[c]=f,delete this._layers[c],delete this._serializedLayers[c],delete this._updatedLayers[c],delete this._updatedPaintProps[c],f.onRemove&&f.onRemove(this.map),this._updateDrapeFirstLayers()}getLayer(c){return this._layers[c]}hasLayer(c){return c in this._layers}hasLayerType(c){for(const f in this._layers)if(this._layers[f].type===c)return!0;return!1}setLayerZoomRange(c,f,v){this._checkLoaded();const b=this.getLayer(c);b?b.minzoom===f&&b.maxzoom===v||(f!=null&&(b.minzoom=f),v!=null&&(b.maxzoom=v),this._updateLayer(b)):this.fire(new o.ErrorEvent(new Error(`The layer '${c}' does not exist in the map's style and cannot have zoom extent.`)))}setFilter(c,f,v={}){this._checkLoaded();const b=this.getLayer(c);if(b){if(!_(b.filter,f))return f==null?(b.filter=void 0,void this._updateLayer(b)):void(this._validate(o.validateFilter,`layers.${b.id}.filter`,f,{layerType:b.type},v)||(b.filter=o.clone$1(f),this._updateLayer(b)))}else this.fire(new o.ErrorEvent(new Error(`The layer '${c}' does not exist in the map's style and cannot be filtered.`)))}getFilter(c){const f=this.getLayer(c);return f&&o.clone$1(f.filter)}setLayoutProperty(c,f,v,b={}){this._checkLoaded();const T=this.getLayer(c);T?_(T.getLayoutProperty(f),v)||(T.setLayoutProperty(f,v,b),this._updateLayer(T)):this.fire(new o.ErrorEvent(new Error(`The layer '${c}' does not exist in the map's style and cannot be styled.`)))}getLayoutProperty(c,f){const v=this.getLayer(c);if(v)return v.getLayoutProperty(f);this.fire(new o.ErrorEvent(new Error(`The layer '${c}' does not exist in the map's style.`)))}setPaintProperty(c,f,v,b={}){this._checkLoaded();const T=this.getLayer(c);T?_(T.getPaintProperty(f),v)||(T.setPaintProperty(f,v,b)&&this._updateLayer(T),this._changed=!0,this._updatedPaintProps[c]=!0):this.fire(new o.ErrorEvent(new Error(`The layer '${c}' does not exist in the map's style and cannot be styled.`)))}getPaintProperty(c,f){const v=this.getLayer(c);return v&&v.getPaintProperty(f)}setFeatureState(c,f){this._checkLoaded();const v=c.source,b=c.sourceLayer,T=this.getSource(v);if(!T)return void this.fire(new o.ErrorEvent(new Error(`The source '${v}' does not exist in the map's style.`)));const O=T.type;if(O==="geojson"&&b)return void this.fire(new o.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter.")));if(O==="vector"&&!b)return void this.fire(new o.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));c.id===void 0&&this.fire(new o.ErrorEvent(new Error("The feature id parameter must be provided.")));const D=this._getSourceCaches(v);for(const B of D)B.setFeatureState(b,c.id,f)}removeFeatureState(c,f){this._checkLoaded();const v=c.source,b=this.getSource(v);if(!b)return void this.fire(new o.ErrorEvent(new Error(`The source '${v}' does not exist in the map's style.`)));const T=b.type,O=T==="vector"?c.sourceLayer:void 0;if(T==="vector"&&!O)return void this.fire(new o.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));if(f&&typeof c.id!="string"&&typeof c.id!="number")return void this.fire(new o.ErrorEvent(new Error("A feature id is required to remove its specific state property.")));const D=this._getSourceCaches(v);for(const B of D)B.removeFeatureState(O,c.id,f)}getFeatureState(c){this._checkLoaded();const f=c.source,v=c.sourceLayer,b=this.getSource(f);if(b){if(b.type!=="vector"||v)return c.id===void 0&&this.fire(new o.ErrorEvent(new Error("The feature id parameter must be provided."))),this._getSourceCaches(f)[0].getFeatureState(v,c.id);this.fire(new o.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new o.ErrorEvent(new Error(`The source '${f}' does not exist in the map's style.`)))}getTransition(){return o.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){const c={};for(const f in this._sourceCaches){const v=this._sourceCaches[f].getSource();c[v.id]||(c[v.id]=v.serialize())}return o.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,terrain:this.getTerrain()||void 0,fog:this.stylesheet.fog,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,projection:this.stylesheet.projection,sources:c,layers:this._serializeLayers(this._order)},f=>f!==void 0)}_updateLayer(c){this._updatedLayers[c.id]=!0;const f=this._getLayerSourceCache(c);c.source&&!this._updatedSources[c.source]&&f&&f.getSource().type!=="raster"&&(this._updatedSources[c.source]="reload",f.pause()),this._changed=!0,c.invalidateCompiledFilter()}_flattenAndSortRenderedFeatures(c){const f=O=>this._layers[O].type==="fill-extrusion",v={},b=[];for(let O=this._order.length-1;O>=0;O--){const D=this._order[O];if(f(D)){v[D]=O;for(const B of c){const H=B[D];if(H)for(const q of H)b.push(q)}}}b.sort((O,D)=>D.intersectionZ-O.intersectionZ);const T=[];for(let O=this._order.length-1;O>=0;O--){const D=this._order[O];if(f(D))for(let B=b.length-1;B>=0;B--){const H=b[B].feature;if(v[H.layer.id]<O)break;T.push(H),b.pop()}else for(const B of c){const H=B[D];if(H)for(const q of H)T.push(q.feature)}}return T}queryRenderedFeatures(c,f,v){f&&f.filter&&this._validate(o.validateFilter,"queryRenderedFeatures.filter",f.filter,null,f);const b={};if(f&&f.layers){if(!Array.isArray(f.layers))return this.fire(new o.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(const B of f.layers){const H=this._layers[B];if(!H)return this.fire(new o.ErrorEvent(new Error(`The layer '${B}' does not exist in the map's style and cannot be queried for features.`))),[];b[H.source]=!0}}const T=[];f.availableImages=this._availableImages;const O=f&&f.layers?f.layers.some(B=>{const H=this.getLayer(B);return H&&H.is3D()}):this.has3DLayers(),D=Re.createFromScreenPoints(c,v);for(const B in this._sourceCaches){const H=this._sourceCaches[B].getSource().id;f.layers&&!b[H]||T.push(yn(this._sourceCaches[B],this._layers,this._serializedLayers,D,f,v,O,!!this.map._showQueryGeometry))}return this.placement&&T.push(function(B,H,q,J,ae,ce,he){const de={},pe=ce.queryRenderedSymbols(J),ee=[];for(const le of Object.keys(pe).map(Number))ee.push(he[le]);ee.sort(Pi);for(const le of ee){const ye=le.featureIndex.lookupSymbolFeatures(pe[le.bucketInstanceId],H,le.bucketIndex,le.sourceLayerIndex,ae.filter,ae.layers,ae.availableImages,B);for(const _e in ye){const Oe=de[_e]=de[_e]||[],De=ye[_e];De.sort((ke,Ve)=>{const Fe=le.featureSortOrder;if(Fe){const Ke=Fe.indexOf(ke.featureIndex);return Fe.indexOf(Ve.featureIndex)-Ke}return Ve.featureIndex-ke.featureIndex});for(const ke of De)Oe.push(ke)}}for(const le in de)de[le].forEach(ye=>{const _e=ye.feature,Oe=q(B[le]);if(!Oe)return;const De=Oe.getFeatureState(_e.layer["source-layer"],_e.id);_e.source=_e.layer.source,_e.layer["source-layer"]&&(_e.sourceLayer=_e.layer["source-layer"]),_e.state=De});return de}(this._layers,this._serializedLayers,this._getLayerSourceCache.bind(this),D.screenGeometry,f,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(T)}querySourceFeatures(c,f){f&&f.filter&&this._validate(o.validateFilter,"querySourceFeatures.filter",f.filter,null,f);const v=this._getSourceCaches(c);let b=[];for(const T of v)b=b.concat(Nn(T,f));return b}addSourceType(c,f,v){return _a.getSourceType(c)?v(new Error(`A source type called "${c}" already exists.`)):(_a.setSourceType(c,f),f.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:c,url:f.workerSourceURL},v):v(null,null))}getLight(){return this.light.getLight()}setLight(c,f={}){this._checkLoaded();const v=this.light.getLight();let b=!1;for(const O in c)if(!_(c[O],v[O])){b=!0;break}if(!b)return;const T=this._setTransitionParameters({duration:300,delay:0});this.light.setLight(c,f),this.light.updateTransitions(T)}getTerrain(){return this.terrain&&this.terrain.drapeRenderMode===1?this.terrain.get():null}setTerrainForDraping(){this.setTerrain({source:"",exaggeration:0},0)}setTerrain(c,f=1){if(this._checkLoaded(),!c)return delete this.terrain,delete this.stylesheet.terrain,this.dispatcher.broadcast("enableTerrain",!1),this._force3DLayerUpdate(),void(this._markersNeedUpdate=!0);let v=c;if(f===1){if(typeof v.source=="object"){const b="terrain-dem-src";this.addSource(b,v.source),v=o.clone$1(v),v=o.extend(v,{source:b})}if(this._validate(o.validateTerrain,"terrain",v))return}if(!this.terrain||this.terrain&&f!==this.terrain.drapeRenderMode){if(!v)return;this._createTerrain(v,f)}else{const b=this.terrain,T=b.get();for(const O of Object.keys(o.spec.terrain))!v.hasOwnProperty(O)&&o.spec.terrain[O].default&&(v[O]=o.spec.terrain[O].default);for(const O in v)if(!_(v[O],T[O])){b.set(v),this.stylesheet.terrain=v;const D=this._setTransitionParameters({duration:0});b.updateTransitions(D);break}}this._updateDrapeFirstLayers(),this._markersNeedUpdate=!0}_createFog(c){const f=this.fog=new rt(c,this.map.transform);this.stylesheet.fog=c;const v=this._setTransitionParameters({duration:0});f.updateTransitions(v)}_updateMarkersOpacity(){this.map._markers.length!==0&&this.map._requestDomTask(()=>{for(const c of this.map._markers)c._evaluateOpacity()})}getFog(){return this.fog?this.fog.get():null}setFog(c){if(this._checkLoaded(),!c)return delete this.fog,delete this.stylesheet.fog,void(this._markersNeedUpdate=!0);if(this.fog){const f=this.fog,v=f.get();Object.keys(c).length===0&&f.set(c);for(const b in c)if(!_(c[b],v[b])){f.set(c),this.stylesheet.fog=c;const T=this._setTransitionParameters({duration:0});f.updateTransitions(T);break}}else this._createFog(c);this._markersNeedUpdate=!0}_setTransitionParameters(c){return{now:o.exported.now(),transition:o.extend(c,this.stylesheet.transition)}}_updateDrapeFirstLayers(){if(!this.map._optimizeForTerrain||!this.terrain)return;const c=this._order.filter(v=>this.isLayerDraped(this._layers[v])),f=this._order.filter(v=>!this.isLayerDraped(this._layers[v]));this._drapedFirstOrder=[],this._drapedFirstOrder.push(...c),this._drapedFirstOrder.push(...f)}_createTerrain(c,f){const v=this.terrain=new Le(c,f);this.stylesheet.terrain=c,this.dispatcher.broadcast("enableTerrain",!this.terrainSetForDrapingOnly()),this._force3DLayerUpdate();const b=this._setTransitionParameters({duration:0});v.updateTransitions(b)}_force3DLayerUpdate(){for(const c in this._layers){const f=this._layers[c];f.type==="fill-extrusion"&&this._updateLayer(f)}}_forceSymbolLayerUpdate(){for(const c in this._layers){const f=this._layers[c];f.type==="symbol"&&this._updateLayer(f)}}_validate(c,f,v,b,T={}){return(!T||T.validate!==!1)&&zs(this,c.call(o.validateStyle,o.extend({key:f,style:this.serialize(),value:v,styleSpec:o.spec},b)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),o.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(const c in this._layers)this._layers[c].setEventedParent(null);for(const c in this._sourceCaches)this._sourceCaches[c].clearTiles(),this._sourceCaches[c].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()}_clearSource(c){const f=this._getSourceCaches(c);for(const v of f)v.clearTiles()}_reloadSource(c){const f=this._getSourceCaches(c);for(const v of f)v.resume(),v.reload()}_reloadSources(){for(const c of this._getSources())c.reload&&c.reload()}_updateSources(c){for(const f in this._sourceCaches)this._sourceCaches[f].update(c)}_generateCollisionBoxes(){for(const c in this._sourceCaches){const f=this._sourceCaches[c];f.resume(),f.reload()}}_updatePlacement(c,f,v,b,T=!1){let O=!1,D=!1;const B={};for(const H of this._order){const q=this._layers[H];if(q.type!=="symbol")continue;if(!B[q.source]){const ae=this._getLayerSourceCache(q);if(!ae)continue;B[q.source]=ae.getRenderableIds(!0).map(ce=>ae.getTileByID(ce)).sort((ce,he)=>he.tileID.overscaledZ-ce.tileID.overscaledZ||(ce.tileID.isLessThan(he.tileID)?-1:1))}const J=this.crossTileSymbolIndex.addLayer(q,B[q.source],c.center.lng,c.projection);O=O||J}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),T=T||this._layerOrderChanged||v===0,this._layerOrderChanged&&this.fire(new o.Event("neworder")),(T||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(o.exported.now(),c.zoom))&&(this.pauseablePlacement=new Sm(c,this._order,T,f,v,b,this.placement,this.fog&&c.projection.supportsFog?this.fog.state:null),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,B),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(o.exported.now()),D=!0),O&&this.pauseablePlacement.placement.setStale()),D||O)for(const H of this._order){const q=this._layers[H];q.type==="symbol"&&this.placement.updateLayerOpacities(q,B[q.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(o.exported.now())}_releaseSymbolFadeTiles(){for(const c in this._sourceCaches)this._sourceCaches[c].releaseSymbolFadeTiles()}getImages(c,f,v){this.imageManager.getImages(f.icons,v),this._updateTilesForChangedImages();const b=T=>{T&&T.setDependencies(f.tileID.key,f.type,f.icons)};b(this._otherSourceCaches[f.source]),b(this._symbolSourceCaches[f.source])}getGlyphs(c,f,v){this.glyphManager.getGlyphs(f.stacks,v)}getResource(c,f,v){return o.makeRequest(f,v)}_getSourceCache(c){return this._otherSourceCaches[c]}_getLayerSourceCache(c){return c.type==="symbol"?this._symbolSourceCaches[c.source]:this._otherSourceCaches[c.source]}_getSourceCaches(c){const f=[];return this._otherSourceCaches[c]&&f.push(this._otherSourceCaches[c]),this._symbolSourceCaches[c]&&f.push(this._symbolSourceCaches[c]),f}_isSourceCacheLoaded(c){const f=this._getSourceCaches(c);return f.length===0?(this.fire(new o.ErrorEvent(new Error(`There is no source with ID '${c}'`))),!1):f.every(v=>v.loaded())}has3DLayers(){return this._num3DLayers>0}hasSymbolLayers(){return this._numSymbolLayers>0}hasCircleLayers(){return this._numCircleLayers>0}_clearWorkerCaches(){this.dispatcher.broadcast("clearCaches")}destroy(){this._clearWorkerCaches(),this.terrainSetForDrapingOnly()&&(delete this.terrain,delete this.stylesheet.terrain)}}_a.getSourceType=function(g){return dr[g]},_a.setSourceType=function(g,c){dr[g]=c},_a.registerForPluginStateChange=o.registerForPluginStateChange;var Pm=`
#define EPSILON 0.0000001
#define PI 3.141592653589793
#define EXTENT 8192.0
#define HALF_PI PI/2.0
#define QUARTER_PI PI/4.0
#define RAD_TO_DEG 180.0/PI
#define DEG_TO_RAD PI/180.0
#define GLOBE_RADIUS EXTENT/PI/2.0`,_l="attribute highp vec3 a_pos_3f;uniform lowp mat4 u_matrix;varying highp vec3 v_uv;void main() {const mat3 half_neg_pi_around_x=mat3(1.0,0.0, 0.0,0.0,0.0,-1.0,0.0,1.0, 0.0);v_uv=half_neg_pi_around_x*a_pos_3f;vec4 pos=u_matrix*vec4(a_pos_3f,1.0);gl_Position=pos.xyww;}",rs=`
#define ELEVATION_SCALE 7.0
#define ELEVATION_OFFSET 450.0
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_tl_up;uniform vec3 u_tile_tr_up;uniform vec3 u_tile_br_up;uniform vec3 u_tile_bl_up;uniform float u_tile_up_scale;vec3 elevationVector(vec2 pos) {vec2 uv=pos/EXTENT;vec3 up=normalize(mix(
mix(u_tile_tl_up,u_tile_tr_up,uv.xxx),mix(u_tile_bl_up,u_tile_br_up,uv.xxx),uv.yyy));return up*u_tile_up_scale;}
#else
vec3 elevationVector(vec2 pos) { return vec3(0,0,1); }
#endif
const float skirtOffset=24575.0;vec3 decomposeToPosAndSkirt(vec2 posWithComposedSkirt)
{float skirt=float(posWithComposedSkirt.x >=skirtOffset);vec2 pos=posWithComposedSkirt-vec2(skirt*skirtOffset,0.0);return vec3(pos,skirt);}
#ifdef TERRAIN
#ifdef TERRAIN_DEM_FLOAT_FORMAT
uniform highp sampler2D u_dem;uniform highp sampler2D u_dem_prev;
#else
uniform sampler2D u_dem;uniform sampler2D u_dem_prev;
#endif
uniform vec4 u_dem_unpack;uniform vec2 u_dem_tl;uniform vec2 u_dem_tl_prev;uniform float u_dem_scale;uniform float u_dem_scale_prev;uniform float u_dem_size;uniform float u_dem_lerp;uniform float u_exaggeration;uniform float u_meter_to_dem;uniform mat4 u_label_plane_matrix_inv;uniform sampler2D u_depth;uniform vec2 u_depth_size_inv;vec4 tileUvToDemSample(vec2 uv,float dem_size,float dem_scale,vec2 dem_tl) {vec2 pos=dem_size*(uv*dem_scale+dem_tl)+1.0;vec2 f=fract(pos);return vec4((pos-f+0.5)/(dem_size+2.0),f);}float decodeElevation(vec4 v) {return dot(vec4(v.xyz*255.0,-1.0),u_dem_unpack);}float currentElevation(vec2 apos) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
vec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale+u_dem_tl)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem,pos).a;
#else
float dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale,u_dem_tl);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem,pos));
#ifdef TERRAIN_DEM_NEAREST_FILTER
return u_exaggeration*tl;
#endif
float tr=decodeElevation(texture2D(u_dem,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);
#endif
}float prevElevation(vec2 apos) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
vec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale_prev+u_dem_tl_prev)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem_prev,pos).a;
#else
float dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale_prev,u_dem_tl_prev);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem_prev,pos));float tr=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem_prev,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);
#endif
}
#ifdef TERRAIN_VERTEX_MORPHING
float elevation(vec2 apos) {
#ifdef ZERO_EXAGGERATION
return 0.0;
#endif
float nextElevation=currentElevation(apos);float prevElevation=prevElevation(apos);return mix(prevElevation,nextElevation,u_dem_lerp);}
#else
float elevation(vec2 apos) {
#ifdef ZERO_EXAGGERATION
return 0.0;
#endif
return currentElevation(apos);}
#endif
highp float unpack_depth(highp vec4 rgba_depth)
{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}bool isOccluded(vec4 frag) {vec3 coord=frag.xyz/frag.w;float depth=unpack_depth(texture2D(u_depth,(coord.xy+1.0)*0.5));return coord.z > depth+0.0005;}float occlusionFade(vec4 frag) {vec3 coord=frag.xyz/frag.w;vec3 df=vec3(5.0*u_depth_size_inv,0.0);vec2 uv=0.5*coord.xy+0.5;vec4 depth=vec4(
unpack_depth(texture2D(u_depth,uv-df.xz)),unpack_depth(texture2D(u_depth,uv+df.xz)),unpack_depth(texture2D(u_depth,uv-df.zy)),unpack_depth(texture2D(u_depth,uv+df.zy))
);return dot(vec4(0.25),vec4(1.0)-clamp(300.0*(vec4(coord.z-0.001)-depth),0.0,1.0));}vec4 fourSample(vec2 pos,vec2 off) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
float tl=texture2D(u_dem,pos).a;float tr=texture2D(u_dem,pos+vec2(off.x,0.0)).a;float bl=texture2D(u_dem,pos+vec2(0.0,off.y)).a;float br=texture2D(u_dem,pos+off).a;
#else
vec4 demtl=vec4(texture2D(u_dem,pos).xyz*255.0,-1.0);float tl=dot(demtl,u_dem_unpack);vec4 demtr=vec4(texture2D(u_dem,pos+vec2(off.x,0.0)).xyz*255.0,-1.0);float tr=dot(demtr,u_dem_unpack);vec4 dembl=vec4(texture2D(u_dem,pos+vec2(0.0,off.y)).xyz*255.0,-1.0);float bl=dot(dembl,u_dem_unpack);vec4 dembr=vec4(texture2D(u_dem,pos+off).xyz*255.0,-1.0);float br=dot(dembr,u_dem_unpack);
#endif
return vec4(tl,tr,bl,br);}float flatElevation(vec2 pack) {vec2 apos=floor(pack/8.0);vec2 span=10.0*(pack-apos*8.0);vec2 uvTex=(apos-vec2(1.0,1.0))/8190.0;float size=u_dem_size+2.0;float dd=1.0/size;vec2 pos=u_dem_size*(uvTex*u_dem_scale+u_dem_tl)+1.0;vec2 f=fract(pos);pos=(pos-f+0.5)*dd;vec4 h=fourSample(pos,vec2(dd));float z=mix(mix(h.x,h.y,f.x),mix(h.z,h.w,f.x),f.y);vec2 w=floor(0.5*(span*u_meter_to_dem-1.0));vec2 d=dd*w;h=fourSample(pos-d,2.0*d+vec2(dd));vec4 diff=abs(h.xzxy-h.ywzw);vec2 slope=min(vec2(0.25),u_meter_to_dem*0.5*(diff.xz+diff.yw)/(2.0*w+vec2(1.0)));vec2 fix=slope*span;float base=z+max(fix.x,fix.y);return u_exaggeration*base;}float elevationFromUint16(float word) {return u_exaggeration*(word/ELEVATION_SCALE-ELEVATION_OFFSET);}
#else
float elevation(vec2 pos) { return 0.0; }bool isOccluded(vec4 frag) { return false; }float occlusionFade(vec4 frag) { return 1.0; }
#endif`,Yu=`#ifdef FOG
uniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump mat4 u_fog_matrix;varying vec3 v_fog_pos;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}vec3 fog_position(vec3 pos) {return (u_fog_matrix*vec4(pos,1.0)).xyz;}vec3 fog_position(vec2 pos) {return fog_position(vec3(pos,0.0));}float fog(vec3 pos) {float depth=length(pos);float opacity=fog_opacity(fog_range(depth));return opacity*fog_horizon_blending(pos/depth);}
#endif`,ns=`#ifdef FOG
uniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump float u_fog_temporal_offset;varying vec3 v_fog_pos;uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform highp vec2 u_viewport;uniform float u_globe_transition;uniform int u_is_globe;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}float globe_glow_progress() {highp vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);highp vec3 dir=normalize(ray_dir);highp vec3 closest_point=dot(u_globe_pos,dir)*dir;highp float sdf=length(closest_point-u_globe_pos)/u_globe_radius;return sdf+PI*0.5;}float fog_opacity(vec3 pos) {float depth=length(pos);return fog_opacity(fog_range(depth));}vec3 fog_apply(vec3 color,vec3 pos) {float depth=length(pos);float opacity;if (u_is_globe==1) {float glow_progress=globe_glow_progress();float t=mix(glow_progress,depth,u_globe_transition);opacity=fog_opacity(fog_range(t));} else {opacity=fog_opacity(fog_range(depth));opacity*=fog_horizon_blending(pos/depth);}return mix(color,u_fog_color.rgb,opacity);}vec4 fog_apply_from_vert(vec4 color,float fog_opac) {float alpha=EPSILON+color.a;color.rgb=mix(color.rgb/alpha,u_fog_color.rgb,fog_opac)*alpha;return color;}vec3 fog_apply_sky_gradient(vec3 camera_ray,vec3 sky_color) {float horizon_blend=fog_horizon_blending(normalize(camera_ray));return mix(sky_color,u_fog_color.rgb,horizon_blend);}vec4 fog_apply_premultiplied(vec4 color,vec3 pos) {float alpha=EPSILON+color.a;color.rgb=fog_apply(color.rgb/alpha,pos)*alpha;return color;}vec3 fog_dither(vec3 color) {vec2 dither_seed=gl_FragCoord.xy+u_fog_temporal_offset;return dither(color,dither_seed);}vec4 fog_dither(vec4 color) {return vec4(fog_dither(color.rgb),color.a);}
#endif`;let Sh={},gc={};const Ju=[];yc(Pm,Ju),yc(rs,Ju),yc(Yu,Ju),yc(ns,Ju),Sh=zr("",rs),gc=zr(ns,Yu);const S_=zr(`
#if __VERSION__ >=300
#define varying in
#define gl_FragColor glFragColor
#define texture2D texture
#define textureCube texture
out vec4 glFragColor;
#endif
highp vec3 hash(highp vec2 p) {highp vec3 p3=fract(p.xyx*vec3(443.8975,397.2973,491.1871));p3+=dot(p3,p3.yxz+19.19);return fract((p3.xxy+p3.yzz)*p3.zyx);}vec3 dither(vec3 color,highp vec2 seed) {vec3 rnd=hash(seed)+hash(seed+0.59374)-0.5;return color+rnd/255.0;}highp float unpack_depth(highp vec4 rgba_depth)
{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}highp vec4 pack_depth(highp float ndc_z) {highp float depth=ndc_z*0.5+0.5;const highp vec4 bit_shift=vec4(255.0*255.0*255.0,255.0*255.0,255.0,1.0);const highp vec4 bit_mask =vec4(0.0,1.0/255.0,1.0/255.0,1.0/255.0);highp vec4 res=fract(depth*bit_shift);res-=res.xxyz*bit_mask;return res;}`,`
#if __VERSION__ >=300
#define attribute in
#define varying out
#define texture2D texture
#endif
float wrap(float n,float min,float max) {float d=max-min;float w=mod(mod(n-min,d)+d,d)+min;return (w==min) ? max : w;}
#ifdef PROJECTION_GLOBE_VIEW
vec3 mercator_tile_position(mat4 matrix,vec2 tile_anchor,vec3 tile_id,vec2 mercator_center) {
#ifndef PROJECTED_POS_ON_VIEWPORT
float tiles=tile_id.z;vec2 mercator=(tile_anchor/EXTENT+tile_id.xy)/tiles;mercator-=mercator_center;mercator.x=wrap(mercator.x,-0.5,0.5);vec4 mercator_tile=vec4(mercator.xy*EXTENT,EXTENT/(2.0*PI),1.0);mercator_tile=matrix*mercator_tile;return mercator_tile.xyz;
#else
return vec3(0.0);
#endif
}vec3 mix_globe_mercator(vec3 globe,vec3 mercator,float t) {return mix(globe,mercator,t);}mat3 globe_mercator_surface_vectors(vec3 pos_normal,vec3 up_dir,float zoom_transition) {vec3 normal=zoom_transition==0.0 ? pos_normal : normalize(mix(pos_normal,up_dir,zoom_transition));vec3 xAxis=normalize(vec3(normal.z,0.0,-normal.x));vec3 yAxis=normalize(cross(normal,xAxis));return mat3(xAxis,yAxis,normal);}
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(
unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}const vec4 AWAY=vec4(-1000.0,-1000.0,-1000.0,1);//Normalized device coordinate that is not rendered.`),Eh=Pm,Cm=`
#ifdef GL_ES
precision mediump float;
#else

#if !defined(lowp)
#define lowp
#endif

#if !defined(mediump)
#define mediump
#endif

#if !defined(highp)
#define highp
#endif

#endif`;var Mm={background:zr(`uniform vec4 u_color;uniform float u_opacity;
#ifdef LIGHTING_3D_MODE
varying vec4 v_color;
#endif
void main() {vec4 out_color;
#ifdef LIGHTING_3D_MODE
out_color=v_color;
#else
out_color=u_color;
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#ifdef LIGHTING_3D_MODE
uniform vec4 u_color;varying vec4 v_color;
#endif
void main() {gl_Position=u_matrix*vec4(a_pos,0,1);
#ifdef LIGHTING_3D_MODE
v_color=apply_lighting(u_color);
#endif
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),backgroundPattern:zr(`uniform vec2 u_pattern_tl;uniform vec2 u_pattern_br;uniform vec2 u_texsize;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos;void main() {vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(u_pattern_tl/u_texsize,u_pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pattern_size;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_pattern_size,u_tile_units_to_pixels,a_pos);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),circle:zr(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(
antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width)
);vec4 out_color=mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_apply_premultiplied(out_color,v_fog_pos);
#endif
gl_FragColor=out_color*(v_visibility*opacity_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`#define NUM_VISIBILITY_RINGS 2
#define INV_SQRT2 0.70710678
#define ELEVATION_BIAS 0.0001
#define NUM_SAMPLES_PER_RING 16
uniform mat4 u_matrix;uniform mat2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;
#endif
varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
vec2 calc_offset(vec2 extrusion,float radius,float stroke_width, float view_scale) {return extrusion*(radius+stroke_width)*u_extrude_scale*view_scale;}float cantilevered_elevation(vec2 pos,float radius,float stroke_width,float view_scale) {vec2 c1=pos+calc_offset(vec2(-1,-1),radius,stroke_width,view_scale);vec2 c2=pos+calc_offset(vec2(1,-1),radius,stroke_width,view_scale);vec2 c3=pos+calc_offset(vec2(1,1),radius,stroke_width,view_scale);vec2 c4=pos+calc_offset(vec2(-1,1),radius,stroke_width,view_scale);float h1=elevation(c1)+ELEVATION_BIAS;float h2=elevation(c2)+ELEVATION_BIAS;float h3=elevation(c3)+ELEVATION_BIAS;float h4=elevation(c4)+ELEVATION_BIAS;return max(h4,max(h3,max(h1,h2)));}float circle_elevation(vec2 pos) {
#if defined(TERRAIN)
return elevation(pos)+ELEVATION_BIAS;
#else
return 0.0;
#endif
}vec4 project_vertex(vec2 extrusion,vec4 world_center,vec4 projected_center,float radius,float stroke_width, float view_scale,mat3 surface_vectors) {vec2 sample_offset=calc_offset(extrusion,radius,stroke_width,view_scale);
#ifdef PITCH_WITH_MAP
#ifdef PROJECTION_GLOBE_VIEW
return u_matrix*( world_center+vec4(sample_offset.x*surface_vectors[0]+sample_offset.y*surface_vectors[1],0) );
#else
return u_matrix*( world_center+vec4(sample_offset,0,0) );
#endif
#else
return projected_center+vec4(sample_offset,0,0);
#endif
}float get_sample_step() {
#ifdef PITCH_WITH_MAP
return 2.0*PI/float(NUM_SAMPLES_PER_RING);
#else
return PI/float(NUM_SAMPLES_PER_RING);
#endif
}void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);vec4 world_center;mat3 surface_vectors;
#ifdef PROJECTION_GLOBE_VIEW
vec3 pos_normal_3=a_pos_normal_3/16384.0;surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(circle_center)*circle_elevation(circle_center);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*circle_elevation(circle_center);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,circle_center,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;vec3 pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);world_center=vec4(pos,1);
#else 
surface_vectors=mat3(1.0);float height=circle_elevation(circle_center);world_center=vec4(circle_center,height,1);
#endif
vec4 projected_center=u_matrix*world_center;float view_scale=0.0;
#ifdef PITCH_WITH_MAP
#ifdef SCALE_WITH_MAP
view_scale=1.0;
#else
view_scale=projected_center.w/u_camera_to_center_distance;
#endif
#else
#ifdef SCALE_WITH_MAP
view_scale=u_camera_to_center_distance;
#else
view_scale=projected_center.w;
#endif
#endif
gl_Position=project_vertex(extrude,world_center,projected_center,radius,stroke_width,view_scale,surface_vectors);float visibility=0.0;
#ifdef TERRAIN
float step=get_sample_step();vec4 occlusion_world_center;vec4 occlusion_projected_center;
#ifdef PITCH_WITH_MAP
float cantilevered_height=cantilevered_elevation(circle_center,radius,stroke_width,view_scale);occlusion_world_center=vec4(circle_center,cantilevered_height,1);occlusion_projected_center=u_matrix*occlusion_world_center;
#else
occlusion_world_center=world_center;occlusion_projected_center=projected_center;
#endif
for(int ring=0; ring < NUM_VISIBILITY_RINGS; ring++) {float scale=(float(ring)+1.0)/float(NUM_VISIBILITY_RINGS);for(int i=0; i < NUM_SAMPLES_PER_RING; i++) {vec2 extrusion=vec2(cos(step*float(i)),-sin(step*float(i)))*scale;vec4 frag_pos=project_vertex(extrusion,occlusion_world_center,occlusion_projected_center,radius,stroke_width,view_scale,surface_vectors);visibility+=float(!isOccluded(frag_pos));}}visibility/=float(NUM_VISIBILITY_RINGS)*float(NUM_SAMPLES_PER_RING);
#else
visibility=1.0;
#endif
#ifdef PROJECTION_GLOBE_VIEW
visibility=1.0;
#endif
v_visibility=visibility;lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);
#ifdef FOG
v_fog_pos=fog_position(world_center.xyz);
#endif
}`),clippingMask:zr("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:zr(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef FOG
if (u_is_globe==0) {gl_FragColor.r*=pow(1.0-fog_opacity(v_fog_pos),2.0);}
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;
#endif
varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 tilePos=floor(a_pos*0.5);vec3 pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 pos_normal_3=a_pos_normal_3/16384.0;mat3 surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(tilePos)*elevation(tilePos);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*elevation(tilePos);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,tilePos,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#else
pos=vec3(tilePos+extrude,elevation(tilePos));
#endif
gl_Position=u_matrix*vec4(pos,1);
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),heatmapTexture:zr(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=vec4(a_pos,0,1);v_pos=a_pos*0.5+0.5;}"),collisionBox:zr("varying float v_placed;varying float v_notUsed;void main() {vec4 red =vec4(1.0,0.0,0.0,1.0);vec4 blue=vec4(0.0,0.0,1.0,0.5);gl_FragColor =mix(red,blue,step(0.5,v_placed))*0.5;gl_FragColor*=mix(1.0,0.1,step(0.5,v_notUsed));}",`attribute vec3 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;attribute float a_size_scale;attribute vec2 a_padding;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_pos+elevationVector(a_anchor_pos)*elevation(a_anchor_pos),1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(
0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,1.5);gl_Position=projectedPoint;gl_Position.xy+=(a_extrude*a_size_scale+a_shift+a_padding)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}`),collisionCircle:zr("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}",`attribute vec2 a_pos_2f;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos_2f;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(
mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(
0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}`),debug:zr("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}",`attribute vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;
#endif
varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {float h=elevation(a_pos);v_uv=a_pos/8192.0;
#ifdef PROJECTION_GLOBE_VIEW
gl_Position=u_matrix*vec4(a_pos_3+elevationVector(a_pos)*h,1);
#else
gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,h,1);
#endif
}`),fill:zr(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
vec4 out_color=color;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillOutline:zr(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=outline_color;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillOutlinePattern:zr(`uniform vec2 u_texsize;uniform sampler2D u_image;varying vec2 v_pos;varying vec2 v_pos_world;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);float dist=length(v_pos_world-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=texture2D(u_image,pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;varying vec2 v_pos_world;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);v_pos_world=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillPattern:zr(`uniform vec2 u_texsize;uniform sampler2D u_image;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillExtrusion:zr(`varying vec4 v_color;
#ifdef RENDER_SHADOWS
varying highp vec4 v_pos_light_view_0;varying highp vec4 v_pos_light_view_1;varying float v_depth;
#endif
#ifdef FAUX_AO
uniform lowp vec2 u_ao;varying vec3 v_ao;
#endif
#ifdef ZERO_ROOF_RADIUS
varying vec4 v_roof_color;
#endif
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)
varying highp vec3 v_normal;
#endif
void main() {
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)
vec3 normal=v_normal;
#endif
float z;vec4 color;
#ifdef ZERO_ROOF_RADIUS
z=float(normal.z > 0.00001);color=mix(v_color,v_roof_color,z);
#else
color=v_color;
#endif
#ifdef FAUX_AO
float intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;
#ifdef ZERO_ROOF_RADIUS
concave*=(1.0-z);
#endif
float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);color.rgb=color.rgb*shade;
#endif
#ifdef RENDER_SHADOWS
#ifdef ZERO_ROOF_RADIUS
normal=mix(normal,vec3(0.0,0.0,1.0),z);
#endif
color.xyz=shadowed_color_normal(color.xyz,normalize(normal),v_pos_light_view_0,v_pos_light_view_1,v_depth);
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
gl_FragColor=color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform float u_edge_radius;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;
#endif
varying vec4 v_color;
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;varying highp vec4 v_pos_light_view_0;varying highp vec4 v_pos_light_view_1;varying float v_depth;
#endif
#ifdef ZERO_ROOF_RADIUS
varying vec4 v_roof_color;
#endif
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)
varying highp vec3 v_normal;
#endif
#ifdef FAUX_AO
uniform lowp vec2 u_ao;varying vec3 v_ao;
#endif
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec4 pos_nx=floor(a_pos_normal_ed*0.5);vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)
v_normal=normal;
#endif
base=max(0.0,base);height=max(0.0,top_up_ny.y==0.0 && top_up_ny.x==1.0 ? height-u_edge_radius : height);float t=top_up_ny.x;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
float ele=0.0;float h=0.0;float c_ele;vec3 pos;
#ifdef TERRAIN
bool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);pos=vec3(pos_nx.xy,h);
#else
h=t > 0.0 ? height : base;pos=vec3(pos_nx.xy,h);
#endif
#ifdef PROJECTION_GLOBE_VIEW
float lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*h);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,pos.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*pos.z;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#endif
float hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(pos,1),AWAY,hidden);
#ifdef RENDER_SHADOWS
v_pos_light_view_0=u_light_matrix_0*vec4(pos,1);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1);v_depth=gl_Position.w;
#endif
float NdotL=0.0;float colorvalue=0.0;
#ifdef LIGHTING_3D_MODE
NdotL=calculate_NdotL(normal);
#else
colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;NdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),NdotL);
#endif
if (normal.y !=0.0) {float r=0.84;
#ifndef LIGHTING_3D_MODE
r=mix(0.7,0.98,1.0-u_lightintensity);
#endif
NdotL*=(
(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}v_color=vec4(0.0,0.0,0.0,1.0);
#ifdef FAUX_AO
float concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;
#ifdef TERRAIN
top_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);
#endif
v_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);
#ifdef PROJECTION_GLOBE_VIEW
top_height+=u_height_lift;
#endif
gl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;
#endif
#ifdef LIGHTING_3D_MODE
v_color=apply_lighting(color,NdotL);
#else
v_color.rgb+=clamp(color.rgb*NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));
#endif
v_color*=u_opacity;
#ifdef ZERO_ROOF_RADIUS
v_roof_color=vec4(0.0,0.0,0.0,1.0);
#ifdef LIGHTING_3D_MODE
v_roof_color=apply_lighting(color,calculate_NdotL(vec3(0.0,0.0,1.0)));
#else
float roofNdotL=clamp(u_lightpos.z,0.0,1.0);roofNdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),roofNdotL);v_roof_color.rgb+=clamp(color.rgb*roofNdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));
#endif
v_roof_color*=u_opacity;
#endif
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),fillExtrusionPattern:zr(`uniform vec2 u_texsize;uniform sampler2D u_image;
#ifdef FAUX_AO
uniform lowp vec2 u_ao;varying vec3 v_ao;
#endif
#ifdef LIGHTING_3D_MODE
varying float v_NdotL;
#endif
varying vec2 v_pos;varying vec4 v_lighting;uniform lowp float u_opacity;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color,v_NdotL)*u_opacity;
#else
out_color=out_color*v_lighting;
#endif
#ifdef FAUX_AO
float intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);out_color.rgb=out_color.rgb*shade;
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform float u_tile_units_to_pixels;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;
#endif
varying vec2 v_pos;varying vec4 v_lighting;
#ifdef FAUX_AO
uniform lowp vec2 u_ao;varying vec3 v_ao;
#endif
#ifdef LIGHTING_3D_MODE
varying float v_NdotL;
#endif
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec4 pos_nx=floor(a_pos_normal_ed*0.5);mediump vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;mediump vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));float edgedistance=a_pos_normal_ed.w;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;base=max(0.0,base);height=max(0.0,height);float t=top_up_ny.x;float z=t > 0.0 ? height : base;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
float ele=0.0;float h=z;vec3 p;float c_ele;
#ifdef TERRAIN
bool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);p=vec3(pos_nx.xy,h);
#else
p=vec3(pos_nx.xy,z);
#endif
#ifdef PROJECTION_GLOBE_VIEW
float lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*(p.z+lift));vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,p.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*p.z;p=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#endif
float hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(p,1),AWAY,hidden);vec2 pos=normal.z==1.0
? pos_nx.xy
: vec2(edgedistance,z*u_height_factor);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float NdotL=0.0;
#ifdef LIGHTING_3D_MODE
NdotL=calculate_NdotL(normal);
#else
NdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),NdotL);
#endif
if (normal.y !=0.0) {float r=0.84;
#ifndef LIGHTING_3D_MODE
r=mix(0.7,0.98,1.0-u_lightintensity);
#endif
NdotL*=(
(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}
#ifdef FAUX_AO
float concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;
#ifdef TERRAIN
top_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);
#endif
v_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);
#ifdef PROJECTION_GLOBE_VIEW
top_height+=u_height_lift;
#endif
gl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;
#endif
#ifdef LIGHTING_3D_MODE
v_NdotL=NdotL;
#else
v_lighting.rgb+=clamp(NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;
#endif 
#ifdef FOG
v_fog_pos=fog_position(p);
#endif
}`),hillshadePrepare:zr(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
return texture2D(u_image,coord).a/4.0;
#else
vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;
#endif
}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y));float b=getElevation(v_pos+vec2(0,-epsilon.y));float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y));float d=getElevation(v_pos+vec2(-epsilon.x,0));float e=getElevation(v_pos+vec2(epsilon.x,0));float f=getElevation(v_pos+vec2(-epsilon.x,epsilon.y));float g=getElevation(v_pos+vec2(0,epsilon.y));float h=getElevation(v_pos+vec2(epsilon.x,epsilon.y));float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2(
(c+e+e+h)-(a+d+d+f),(f+g+g+h)-(a+b+b+c)
)/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(
deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:zr(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef LIGHTING_3D_MODE
gl_FragColor=apply_lighting(gl_FragColor);
#endif
#ifdef FOG
gl_FragColor=fog_dither(fog_apply_premultiplied(gl_FragColor,v_fog_pos));
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),line:zr(`uniform lowp float u_device_pixel_ratio;uniform float u_alpha_discard_threshold;uniform highp vec2 u_trim_offset;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec4 v_uv;
#ifdef RENDER_LINE_DASH
uniform sampler2D u_dash_image;varying vec2 v_tex;
#endif
#ifdef RENDER_LINE_GRADIENT
uniform sampler2D u_gradient_image;
#endif
uniform float u_border_width;uniform vec4 u_border_color;float luminance(vec3 c) {return (c.r+c.r+c.b+c.g+c.g+c.g)*0.1667;}
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 dash
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
float linearstep(float edge0,float edge1,float x) {return  clamp((x-edge0)/(edge1-edge0),0.0,1.0);}void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize lowp vec4 dash
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);
#ifdef RENDER_LINE_DASH
float sdfdist=texture2D(u_dash_image,v_tex).a;float sdfgamma=1.0/(2.0*u_device_pixel_ratio)/dash.z;alpha*=linearstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);
#endif
highp vec4 out_color;
#ifdef RENDER_LINE_GRADIENT
out_color=texture2D(u_gradient_image,v_uv.xy);
#else
out_color=color;
#endif
float trimmed=1.0;
#ifdef RENDER_LINE_TRIM_OFFSET
highp float start=v_uv[2];highp float end=v_uv[3];highp float trim_start=u_trim_offset[0];highp float trim_end=u_trim_offset[1];highp float line_progress=(start+(v_uv.x)*(end-start));if (trim_end > trim_start) {if (line_progress <=trim_end && line_progress >=trim_start) {out_color=vec4(0,0,0,0);trimmed=0.0;}}
#endif
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
#ifdef RENDER_LINE_ALPHA_DISCARD
if (alpha < u_alpha_discard_threshold) {discard;}
#endif
#ifdef RENDER_LINE_BORDER
float edgeBlur=(u_border_width+1.0/u_device_pixel_ratio);float alpha2=clamp(min(dist-(v_width2.t-edgeBlur),v_width2.s-dist)/edgeBlur,0.0,1.0);if (alpha2 < 1.) {float smoothAlpha=smoothstep(0.6,1.0,alpha2);
#ifdef RENDER_LINE_BORDER_AUTO
float Y=(out_color.a > 0.01) ? luminance(out_color.rgb/out_color.a) : 1.;float adjustment=(Y > 0.) ? 0.5/Y : 0.45;if (out_color.a > 0.25 && Y < 0.25) {vec3 borderColor=(Y > 0.) ? out_color.rgb : vec3(1,1,1)*out_color.a;out_color.rgb=out_color.rgb+borderColor*(adjustment*(1.0-smoothAlpha));} else {out_color.rgb*=(0.6 +0.4*smoothAlpha);}
#else
out_color.rgb=mix(u_border_color.rgb*u_border_color.a*trimmed,out_color.rgb,smoothAlpha);
#endif
}
#endif
gl_FragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define EXTRUDE_SCALE 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;
#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)
attribute highp vec4 a_packed;
#endif
#ifdef RENDER_LINE_DASH
attribute float a_linesofar;
#endif
uniform mat4 u_matrix;uniform mat2 u_pixels_to_tile_units;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec4 v_uv;
#ifdef RENDER_LINE_DASH
uniform vec2 u_texsize;uniform float u_tile_units_to_pixels;varying vec2 v_tex;
#endif
#ifdef RENDER_LINE_GRADIENT
uniform float u_image_height;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 dash
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize lowp vec4 dash
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*EXTRUDE_SCALE;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*EXTRUDE_SCALE*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;
#ifndef RENDER_TO_TEXTURE
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#else
v_gamma_scale=1.0;
#endif
#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)
float a_uv_x=a_packed[0];float a_split_index=a_packed[1];highp float a_clip_start=a_packed[2];highp float a_clip_end=a_packed[3];
#ifdef RENDER_LINE_GRADIENT
highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec4(a_uv_x,a_split_index*texel_height-half_texel_height,a_clip_start,a_clip_end);
#else
v_uv=vec4(a_uv_x,0.0,a_clip_start,a_clip_end);
#endif
#endif
#ifdef RENDER_LINE_DASH
float scale=dash.z==0.0 ? 0.0 : u_tile_units_to_pixels/dash.z;float height=dash.y;v_tex=vec2(a_linesofar*scale/floorwidth,(-normal.y*height+dash.x+0.5)/u_texsize.y);
#endif
v_width2=vec2(outset,inset);
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),linePattern:zr(`uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_tile_units_to_pixels;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;vec2 pattern_size=vec2(display_size.x/u_tile_units_to_pixels,display_size.y);float aspect=display_size.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x=mod(v_linesofar/pattern_size.x*aspect,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos=mix(pattern_tl*texel_size-texel_size,pattern_br*texel_size+texel_size,vec2(x,y));vec4 color=texture2D(u_image,pos);
#ifdef LIGHTING_3D_MODE
color=apply_lighting(color);
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_linesofar;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mat2 u_pixels_to_tile_units;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;
#ifndef RENDER_TO_TEXTURE
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#else
v_gamma_scale=1.0;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),raster:zr(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(
dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);vec3 out_color=mix(u_high_vec,u_low_vec,rgb);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply(out_color,v_fog_pos));
#endif
gl_FragColor=vec4(out_color*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform vec2 u_perspective_transform;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {float w=1.0+dot(a_texture_pos,u_perspective_transform);gl_Position=u_matrix*vec4(a_pos*w,0,w);v_pos0=a_texture_pos/8192.0;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),symbolIcon:zr(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_projected_pos;attribute float a_fade_opacity;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;
#endif
uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform vec3 u_up_vector;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_min_font_scale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;
#ifdef PROJECTION_GLOBE_VIEW
mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
world_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjected_point;
#ifdef PROJECTION_GLOBE_VIEW
vec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetProjected_point=u_matrix*vec4(a_globe_anchor+displacement,1);
#else
offsetProjected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);
#endif
vec2 a=projected_point.xy/projected_point.w;vec2 b=offsetProjected_point.xy/offsetProjected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);
#else
projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*max(a_min_font_scale,font_scale)+a_pxoffset/16.0);
#ifdef TERRAIN
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
#endif
float occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;
#ifdef PROJECTION_GLOBE_VIEW
vec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#else
gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#endif
float projection_transition_fade=1.0;
#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)
projection_transition_fade=1.0-step(EPSILON,u_zoom_transition);
#endif
v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change))*projection_transition_fade;}`),symbolSDF:zr(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_projected_pos;attribute float a_fade_opacity;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;
#endif
uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;
#ifdef PROJECTION_GLOBE_VIEW
mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
world_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetprojected_point;
#ifdef PROJECTION_GLOBE_VIEW
vec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetprojected_point=u_matrix*vec4(a_globe_anchor+displacement,1);
#else
offsetprojected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);
#endif
vec2 a=projected_point.xy/projected_point.w;vec2 b=offsetprojected_point.xy/offsetprojected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);
#else
projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset);
#ifdef TERRAIN
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
#endif
float occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;
#ifdef PROJECTION_GLOBE_VIEW
vec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#else
gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#endif
float gamma_scale=gl_Position.w;float projection_transition_fade=1.0;
#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)
projection_transition_fade=1.0-step(EPSILON,u_zoom_transition);
#endif
vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity*projection_transition_fade);}`),symbolTextAndIcon:zr(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_projected_pos;attribute float a_fade_opacity;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;
#endif
uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;uniform vec2 u_texsize_icon;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;
#ifdef PROJECTION_GLOBE_VIEW
mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
world_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offset_projected_point=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projected_point.xy/projected_point.w;vec2 b=offset_projected_point.xy/offset_projected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);
#else
projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*font_scale);
#ifdef TERRAIN
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
#endif
float occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;
#ifdef PROJECTION_GLOBE_VIEW
vec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#else
gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#endif
float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));float projection_transition_fade=1.0;
#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)
projection_transition_fade=1.0-step(EPSILON,u_zoom_transition);
#endif
v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity*projection_transition_fade,is_sdf);}`),terrainRaster:zr(`uniform sampler2D u_image0;varying vec2 v_pos0;
#ifdef FOG
varying float v_fog_opacity;
#endif
#ifdef RENDER_SHADOWS
varying vec4 v_pos_light_view_0;varying vec4 v_pos_light_view_1;varying float v_depth;
#endif
void main() {vec4 color=texture2D(u_image0,v_pos0);
#ifdef RENDER_SHADOWS
color.xyz=shadowed_color(color.xyz,v_pos_light_view_0,v_pos_light_view_1,v_depth);
#endif
#ifdef FOG
#ifdef ZERO_EXAGGERATION
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#else
color=fog_dither(fog_apply_from_vert(color,v_fog_opacity));
#endif
#endif
gl_FragColor=color;
#ifdef TERRAIN_WIREFRAME
gl_FragColor=vec4(1.0,0.0,0.0,0.8);
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_skirt_height;attribute vec2 a_pos;varying vec2 v_pos0;
#ifdef FOG
varying float v_fog_opacity;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;varying vec4 v_pos_light_view_0;varying vec4 v_pos_light_view_1;varying float v_depth;
#endif
const float wireframeOffset=0.00015;void main() {vec3 decomposedPosAndSkirt=decomposeToPosAndSkirt(a_pos);float skirt=decomposedPosAndSkirt.z;vec2 decodedPos=decomposedPosAndSkirt.xy;float elevation=elevation(decodedPos)-skirt*u_skirt_height;
#ifdef TERRAIN_WIREFRAME
elevation+=wireframeOffset;
#endif
v_pos0=decodedPos/8192.0;gl_Position=u_matrix*vec4(decodedPos,elevation,1.0);
#ifdef FOG
#ifdef ZERO_EXAGGERATION
v_fog_pos=fog_position(decodedPos);
#else
v_fog_opacity=fog(fog_position(vec3(decodedPos,elevation)));
#endif
#endif
#ifdef RENDER_SHADOWS
vec3 pos=vec3(decodedPos,elevation);v_pos_light_view_0=u_light_matrix_0*vec4(pos,1.);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1.);v_depth=gl_Position.w;
#endif
}`),terrainDepth:zr(`#ifdef GL_ES
precision highp float;
#endif
varying float v_depth;void main() {gl_FragColor=pack_depth(v_depth);}`,"uniform mat4 u_matrix;attribute vec2 a_pos;varying float v_depth;void main() {float elevation=elevation(a_pos);gl_Position=u_matrix*vec4(a_pos,elevation,1.0);v_depth=gl_Position.z/gl_Position.w;}"),skybox:zr(`
varying lowp vec3 v_uv;uniform lowp samplerCube u_cubemap;uniform lowp float u_opacity;uniform highp float u_temporal_offset;uniform highp vec3 u_sun_direction;float sun_disk(highp vec3 ray_direction,highp vec3 sun_direction) {highp float cos_angle=dot(normalize(ray_direction),sun_direction);const highp float cos_sun_angular_diameter=0.99996192306;const highp float smoothstep_delta=1e-5;return smoothstep(
cos_sun_angular_diameter-smoothstep_delta,cos_sun_angular_diameter+smoothstep_delta,cos_angle);}float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec3 uv=v_uv;const float y_bias=0.015;uv.y+=y_bias;uv.y=pow(abs(uv.y),1.0/5.0);uv.y=map(uv.y,0.0,1.0,-1.0,1.0);vec3 sky_color=textureCube(u_cubemap,uv).rgb;
#ifdef FOG
sky_color=fog_apply_sky_gradient(v_uv.xzy,sky_color);
#endif
sky_color.rgb=dither(sky_color.rgb,gl_FragCoord.xy+u_temporal_offset);sky_color+=0.1*sun_disk(v_uv,u_sun_direction);gl_FragColor=vec4(sky_color*u_opacity,u_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,_l),skyboxGradient:zr(`varying highp vec3 v_uv;uniform lowp sampler2D u_color_ramp;uniform highp vec3 u_center_direction;uniform lowp float u_radius;uniform lowp float u_opacity;uniform highp float u_temporal_offset;void main() {float progress=acos(dot(normalize(v_uv),u_center_direction))/u_radius;vec4 color=texture2D(u_color_ramp,vec2(progress,0.5));
#ifdef FOG
color.rgb=fog_apply_sky_gradient(v_uv.xzy,color.rgb/color.a)*color.a;
#endif
color*=u_opacity;color.rgb=dither(color.rgb,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,_l),skyboxCapture:zr(`
varying highp vec3 v_position;uniform highp float u_sun_intensity;uniform highp float u_luminance;uniform lowp vec3 u_sun_direction;uniform highp vec4 u_color_tint_r;uniform highp vec4 u_color_tint_m;
#ifdef GL_ES
precision highp float;
#endif
#define BETA_R                  vec3(5.5e-6,13.0e-6,22.4e-6)
#define BETA_M                  vec3(21e-6,21e-6,21e-6)
#define MIE_G                   0.76
#define DENSITY_HEIGHT_SCALE_R  8000.0
#define DENSITY_HEIGHT_SCALE_M  1200.0
#define PLANET_RADIUS           6360e3
#define ATMOSPHERE_RADIUS       6420e3
#define SAMPLE_STEPS            10
#define DENSITY_STEPS           4
float ray_sphere_exit(vec3 orig,vec3 dir,float radius) {float a=dot(dir,dir);float b=2.0*dot(dir,orig);float c=dot(orig,orig)-radius*radius;float d=sqrt(b*b-4.0*a*c);return (-b+d)/(2.0*a);}vec3 extinction(vec2 density) {return exp(-vec3(BETA_R*u_color_tint_r.a*density.x+BETA_M*u_color_tint_m.a*density.y));}vec2 local_density(vec3 point) {float height=max(length(point)-PLANET_RADIUS,0.0);float exp_r=exp(-height/DENSITY_HEIGHT_SCALE_R);float exp_m=exp(-height/DENSITY_HEIGHT_SCALE_M);return vec2(exp_r,exp_m);}float phase_ray(float cos_angle) {return (3.0/(16.0*PI))*(1.0+cos_angle*cos_angle);}float phase_mie(float cos_angle) {return (3.0/(8.0*PI))*((1.0-MIE_G*MIE_G)*(1.0+cos_angle*cos_angle))/((2.0+MIE_G*MIE_G)*pow(1.0+MIE_G*MIE_G-2.0*MIE_G*cos_angle,1.5));}vec2 density_to_atmosphere(vec3 point,vec3 light_dir) {float ray_len=ray_sphere_exit(point,light_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(DENSITY_STEPS);vec2 density_point_to_atmosphere=vec2(0.0);for (int i=0; i < DENSITY_STEPS;++i) {vec3 point_on_ray=point+light_dir*((float(i)+0.5)*step_len);density_point_to_atmosphere+=local_density(point_on_ray)*step_len;;}return density_point_to_atmosphere;}vec3 atmosphere(vec3 ray_dir,vec3 sun_direction,float sun_intensity) {vec2 density_orig_to_point=vec2(0.0);vec3 scatter_r=vec3(0.0);vec3 scatter_m=vec3(0.0);vec3 origin=vec3(0.0,PLANET_RADIUS,0.0);float ray_len=ray_sphere_exit(origin,ray_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(SAMPLE_STEPS);for (int i=0; i < SAMPLE_STEPS;++i) {vec3 point_on_ray=origin+ray_dir*((float(i)+0.5)*step_len);vec2 density=local_density(point_on_ray)*step_len;density_orig_to_point+=density;vec2 density_point_to_atmosphere=density_to_atmosphere(point_on_ray,sun_direction);vec2 density_orig_to_atmosphere=density_orig_to_point+density_point_to_atmosphere;vec3 extinction=extinction(density_orig_to_atmosphere);scatter_r+=density.x*extinction;scatter_m+=density.y*extinction;}float cos_angle=dot(ray_dir,sun_direction);float phase_r=phase_ray(cos_angle);float phase_m=phase_mie(cos_angle);vec3 beta_r=BETA_R*u_color_tint_r.rgb*u_color_tint_r.a;vec3 beta_m=BETA_M*u_color_tint_m.rgb*u_color_tint_m.a;return (scatter_r*phase_r*beta_r+scatter_m*phase_m*beta_m)*sun_intensity;}const float A=0.15;const float B=0.50;const float C=0.10;const float D=0.20;const float E=0.02;const float F=0.30;vec3 uncharted2_tonemap(vec3 x) {return ((x*(A*x+C*B)+D*E)/(x*(A*x+B)+D*F))-E/F;}void main() {vec3 ray_direction=v_position;ray_direction.y=pow(ray_direction.y,5.0);const float y_bias=0.015;ray_direction.y+=y_bias;vec3 color=atmosphere(normalize(ray_direction),u_sun_direction,u_sun_intensity);float white_scale=1.0748724675633854;color=uncharted2_tonemap((log2(2.0/pow(u_luminance,4.0)))*color)*white_scale;gl_FragColor=vec4(color,1.0);}`,"attribute highp vec3 a_pos_3f;uniform mat3 u_matrix_3f;varying highp vec3 v_position;float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec4 pos=vec4(u_matrix_3f*a_pos_3f,1.0);v_position=pos.xyz;v_position.y*=-1.0;v_position.y=map(v_position.y,-1.0,1.0,0.0,1.0);gl_Position=vec4(a_pos_3f.xy,0.0,1.0);}"),globeRaster:zr(`uniform sampler2D u_image0;varying vec2 v_pos0;
#ifndef FOG
uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform vec2 u_viewport;
#endif
void main() {vec4 color;
#ifdef CUSTOM_ANTIALIASING
vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);vec3 dir=normalize(ray_dir);vec3 closest_point=dot(u_globe_pos,dir)*dir;float norm_dist_from_center=1.0-length(closest_point-u_globe_pos)/u_globe_radius;const float antialias_pixel=2.0;float antialias_factor=antialias_pixel*fwidth(norm_dist_from_center);float antialias=smoothstep(0.0,antialias_factor,norm_dist_from_center);vec4 raster=texture2D(u_image0,v_pos0);color=vec4(raster.rgb*antialias,raster.a*antialias);
#else
color=texture2D(u_image0,v_pos0);
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
gl_FragColor=color;
#ifdef TERRAIN_WIREFRAME
gl_FragColor=vec4(1.0,0.0,0.0,0.8);
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_proj_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform float u_zoom_transition;uniform vec2 u_merc_center;uniform mat3 u_grid_matrix;uniform float u_skirt_height;
#ifdef GLOBE_POLES
attribute vec3 a_globe_pos;attribute vec2 a_uv;
#else
attribute vec2 a_pos;
#endif
varying vec2 v_pos0;const float wireframeOffset=1e3;float mercatorXfromLng(float lng) {return (180.0+lng)/360.0;}float mercatorYfromLat(float lat) {return (180.0-(RAD_TO_DEG*log(tan(QUARTER_PI+lat/2.0*DEG_TO_RAD))))/360.0;}vec3 latLngToECEF(vec2 latLng) {latLng=DEG_TO_RAD*latLng;float cosLat=cos(latLng[0]);float sinLat=sin(latLng[0]);float cosLng=cos(latLng[1]);float sinLng=sin(latLng[1]);float sx=cosLat*sinLng*GLOBE_RADIUS;float sy=-sinLat*GLOBE_RADIUS;float sz=cosLat*cosLng*GLOBE_RADIUS;return vec3(sx,sy,sz);}void main() {
#ifdef GLOBE_POLES
vec3 globe_pos=a_globe_pos;vec2 uv=a_uv;
#else
float tiles=u_grid_matrix[0][2];float idx=u_grid_matrix[1][2];float idy=u_grid_matrix[2][2];vec3 decomposed_pos_and_skirt=decomposeToPosAndSkirt(a_pos);vec3 latLng=u_grid_matrix*vec3(decomposed_pos_and_skirt.xy,1.0);float mercatorY=mercatorYfromLat(latLng[0]);float uvY=mercatorY*tiles-idy;float mercatorX=mercatorXfromLng(latLng[1]);float uvX=mercatorX*tiles-idx;vec3 globe_pos=latLngToECEF(latLng.xy);vec2 merc_pos=vec2(mercatorX,mercatorY);vec2 uv=vec2(uvX,uvY);
#endif
v_pos0=uv;vec2 tile_pos=uv*EXTENT;vec3 globe_derived_up_vector=normalize(globe_pos)*u_tile_up_scale;
#ifdef GLOBE_POLES
vec3 up_vector=globe_derived_up_vector;
#else
vec3 up_vector=elevationVector(tile_pos);
#endif
float height=elevation(tile_pos);
#ifdef TERRAIN_WIREFRAME
height+=wireframeOffset;
#endif
globe_pos+=up_vector*height;
#ifndef GLOBE_POLES
globe_pos-=globe_derived_up_vector*u_skirt_height*decomposed_pos_and_skirt.z;
#endif
#ifdef GLOBE_POLES
vec4 interpolated_pos=u_globe_matrix*vec4(globe_pos,1.0);
#else
vec4 globe_world_pos=u_globe_matrix*vec4(globe_pos,1.0);vec4 merc_world_pos=vec4(0.0);if (u_zoom_transition > 0.0) {merc_world_pos=vec4(merc_pos,height-u_skirt_height*decomposed_pos_and_skirt.z,1.0);merc_world_pos.xy-=u_merc_center;merc_world_pos.x=wrap(merc_world_pos.x,-0.5,0.5);merc_world_pos=u_merc_matrix*merc_world_pos;}vec4 interpolated_pos=vec4(mix(globe_world_pos.xyz,merc_world_pos.xyz,u_zoom_transition),1.0);
#endif
gl_Position=u_proj_matrix*interpolated_pos;
#ifdef FOG
v_fog_pos=fog_position((u_normalize_matrix*vec4(globe_pos,1.0)).xyz);
#endif
}`),globeAtmosphere:zr(`uniform float u_transition;uniform highp float u_fadeout_range;uniform highp float u_temporal_offset;uniform vec3 u_start_color;uniform vec4 u_color;uniform vec4 u_space_color;uniform vec4 u_high_color;uniform float u_star_intensity;uniform float u_star_size;uniform float u_star_density;uniform float u_horizon_angle;uniform mat4 u_rotation_matrix;varying highp vec3 v_ray_dir;varying highp vec3 v_horizon_dir;highp float random(highp vec3 p) {p=fract(p*vec3(23.2342,97.1231,91.2342));p+=dot(p.zxy,p.yxz+123.1234);return fract(p.x*p.y);}float stars(vec3 p,float scale,vec2 offset) {vec2 uv_scale=(u_viewport/u_star_size)*scale;vec3 position=vec3(p.xy*uv_scale+offset*u_viewport,p.z);vec3 q=fract(position)-0.5;vec3 id=floor(position);float random_visibility=step(random(id),u_star_density);float circle=smoothstep(0.5+u_star_intensity,0.5,length(q));return circle*random_visibility;}void main() {highp vec3 dir=normalize(v_ray_dir);float globe_pos_dot_dir;
#ifdef PROJECTION_GLOBE_VIEW
globe_pos_dot_dir=dot(u_globe_pos,dir);highp vec3 closest_point_forward=abs(globe_pos_dot_dir)*dir;float norm_dist_from_center=length(closest_point_forward-u_globe_pos)/u_globe_radius;if (norm_dist_from_center < 0.98) {discard;return;}
#endif
highp vec3 horizon_dir=normalize(v_horizon_dir);float horizon_angle_mercator=dir.y < horizon_dir.y ?
0.0 : max(acos(dot(dir,horizon_dir)),0.0);float horizon_angle;
#ifdef PROJECTION_GLOBE_VIEW
highp vec3 closest_point=globe_pos_dot_dir*dir;float closest_point_to_center=length(closest_point-u_globe_pos);float theta=asin(clamp(closest_point_to_center/length(u_globe_pos),-1.0,1.0));horizon_angle=globe_pos_dot_dir < 0.0 ?
PI-theta-u_horizon_angle : theta-u_horizon_angle;float angle_t=pow(u_transition,10.0);horizon_angle=mix(horizon_angle,horizon_angle_mercator,angle_t);
#else
horizon_angle=horizon_angle_mercator;
#endif
horizon_angle/=PI;float t=exp(-horizon_angle/u_fadeout_range);float alpha_0=u_color.a;float alpha_1=u_high_color.a;float alpha_2=u_space_color.a;vec3 color_stop_0=u_color.rgb;vec3 color_stop_1=u_high_color.rgb;vec3 color_stop_2=u_space_color.rgb;vec3 c0=mix(color_stop_2,color_stop_1,alpha_1);vec3 c1=mix(c0,color_stop_0,alpha_0);vec3 c2=mix(c0,c1,t);vec3 c =mix(color_stop_2,c2,t);float a0=mix(alpha_2,1.0,alpha_1);float a1=mix(a0,1.0,alpha_0);float a2=mix(a0,a1,t);float a =mix(alpha_2,a2,t);vec2 uv=gl_FragCoord.xy/u_viewport-0.5;float aspect_ratio=u_viewport.x/u_viewport.y;vec4 uv_dir=vec4(normalize(vec3(uv.x*aspect_ratio,uv.y,1.0)),1.0);uv_dir=u_rotation_matrix*uv_dir;vec3 n=abs(uv_dir.xyz);vec2 uv_remap=(n.x > n.y && n.x > n.z) ? uv_dir.yz/uv_dir.x:
(n.y > n.x && n.y > n.z) ? uv_dir.zx/uv_dir.y:
uv_dir.xy/uv_dir.z;uv_remap.x/=aspect_ratio;vec3 D=vec3(uv_remap,1.0);highp float star_field=0.0;if (u_star_intensity > 0.0) {star_field+=stars(D,1.2,vec2(0.0,0.0));star_field+=stars(D,1.0,vec2(1.0,0.0));star_field+=stars(D,0.8,vec2(0.0,1.0));star_field+=stars(D,0.6,vec2(1.0,1.0));star_field*=(1.0-pow(t,0.25+(1.0-u_high_color.a)*0.75));c+=star_field*alpha_2;}c=dither(c,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=vec4(c,a);}`,`attribute vec3 a_pos;attribute vec2 a_uv;uniform vec3 u_frustum_tl;uniform vec3 u_frustum_tr;uniform vec3 u_frustum_br;uniform vec3 u_frustum_bl;uniform float u_horizon;varying highp vec3 v_ray_dir;varying highp vec3 v_horizon_dir;void main() {v_ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,a_uv.x),mix(u_frustum_bl,u_frustum_br,a_uv.x),a_uv.y);v_horizon_dir=mix(
mix(u_frustum_tl,u_frustum_bl,u_horizon),mix(u_frustum_tr,u_frustum_br,u_horizon),a_uv.x);gl_Position=vec4(a_pos,1.0);}`)};function yc(g,c){const f=g.replace(/\s*\/\/[^\n]*\n/g,`
`).split(`
`);for(let v of f)if(v=v.trim(),v[0]==="#"&&v.includes("if")&&!v.includes("endif")){v=v.replace("#","").replace(/ifdef|ifndef|elif|if/g,"").replace(/!|defined|\(|\)|\|\||&&/g,"").replace(/\s+/g," ").trim();const b=v.split(" ");for(const T of b)c.includes(T)||c.push(T)}}function zr(g,c){const f=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,v=c.match(/attribute (highp |mediump |lowp )?([\w]+) ([\w]+)/g),b={},T=[...Ju];return yc(g,T),yc(c,T),{fragmentSource:g=g.replace(f,(O,D,B,H,q)=>(b[q]=!0,D==="define"?`
#ifndef HAS_UNIFORM_u_${q}
varying ${B} ${H} ${q};
#else
uniform ${B} ${H} u_${q};
#endif
`:`
#ifdef HAS_UNIFORM_u_${q}
    ${B} ${H} ${q} = u_${q};
#endif
`)),vertexSource:c=c.replace(f,(O,D,B,H,q)=>{const J=H==="float"?"vec2":"vec4",ae=q.match(/color/)?"color":J;return b[q]?D==="define"?`
#ifndef HAS_UNIFORM_u_${q}
uniform lowp float u_${q}_t;
attribute ${B} ${J} a_${q};
varying ${B} ${H} ${q};
#else
uniform ${B} ${H} u_${q};
#endif
`:ae==="vec4"?`
#ifndef HAS_UNIFORM_u_${q}
    ${q} = a_${q};
#else
    ${B} ${H} ${q} = u_${q};
#endif
`:`
#ifndef HAS_UNIFORM_u_${q}
    ${q} = unpack_mix_${ae}(a_${q}, u_${q}_t);
#else
    ${B} ${H} ${q} = u_${q};
#endif
`:D==="define"?`
#ifndef HAS_UNIFORM_u_${q}
uniform lowp float u_${q}_t;
attribute ${B} ${J} a_${q};
#else
uniform ${B} ${H} u_${q};
#endif
`:ae==="vec4"?`
#ifndef HAS_UNIFORM_u_${q}
    ${B} ${H} ${q} = a_${q};
#else
    ${B} ${H} ${q} = u_${q};
#endif
`:`
#ifndef HAS_UNIFORM_u_${q}
    ${B} ${H} ${q} = unpack_mix_${ae}(a_${q}, u_${q}_t);
#else
    ${B} ${H} ${q} = u_${q};
#endif
`}),staticAttributes:v,usedDefines:T}}class yS{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffers=[],this.vao=null}bind(c,f,v,b,T,O,D){this.context=c;let B=this.boundPaintVertexBuffers.length!==b.length;for(let q=0;!B&&q<b.length;q++)this.boundPaintVertexBuffers[q]!==b[q]&&(B=!0);let H=this.boundDynamicVertexBuffers.length!==D.length;for(let q=0;!H&&q<D.length;q++)this.boundDynamicVertexBuffers[q]!==D[q]&&(H=!0);if(!c.extVertexArrayObject||!this.vao||this.boundProgram!==f||this.boundLayoutVertexBuffer!==v||B||H||this.boundIndexBuffer!==T||this.boundVertexOffset!==O)this.freshBind(f,v,b,T,O,D);else{c.bindVertexArrayOES.set(this.vao);for(const q of D)q&&q.bind();T&&T.dynamicDraw&&T.bind()}}freshBind(c,f,v,b,T,O){let D;const B=c.numAttributes,H=this.context,q=H.gl;if(H.extVertexArrayObject)this.vao&&this.destroy(),this.vao=H.extVertexArrayObject.createVertexArrayOES(),H.bindVertexArrayOES.set(this.vao),D=0,this.boundProgram=c,this.boundLayoutVertexBuffer=f,this.boundPaintVertexBuffers=v,this.boundIndexBuffer=b,this.boundVertexOffset=T,this.boundDynamicVertexBuffers=O;else{D=H.currentNumAttributes||0;for(let J=B;J<D;J++)q.disableVertexAttribArray(J)}f.enableAttributes(q,c),f.bind(),f.setVertexAttribPointers(q,c,T);for(const J of v)J.enableAttributes(q,c),J.bind(),J.setVertexAttribPointers(q,c,T);for(const J of O)J&&(J.enableAttributes(q,c),J.bind(),J.setVertexAttribPointers(q,c,T));b&&b.bind(),H.currentNumAttributes=B}destroy(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)}}function Im(g,c){const f=Math.pow(2,c.canonical.z),v=c.canonical.y;return[new o.MercatorCoordinate(0,v/f).toLngLat().lat,new o.MercatorCoordinate(0,(v+1)/f).toLngLat().lat]}function E_(g,c,f,v,b,T,O){const D=g.context,B=D.gl,H=f.fbo;if(!H)return;g.prepareDrawTile();const q=g.useProgram("hillshade");D.activeTexture.set(B.TEXTURE0),B.bindTexture(B.TEXTURE_2D,H.colorAttachment.get());const J=((de,pe,ee,le)=>{const ye=ee.paint.get("hillshade-shadow-color"),_e=ee.paint.get("hillshade-highlight-color"),Oe=ee.paint.get("hillshade-accent-color");let De=ee.paint.get("hillshade-illumination-direction")*(Math.PI/180);ee.paint.get("hillshade-illumination-anchor")==="viewport"&&(De-=de.transform.angle);const ke=!de.options.moving;return{u_matrix:le||de.transform.calculateProjMatrix(pe.tileID.toUnwrapped(),ke),u_image:0,u_latrange:Im(0,pe.tileID),u_light:[ee.paint.get("hillshade-exaggeration"),De],u_shadow:ye,u_highlight:_e,u_accent:Oe}})(g,f,v,g.terrain?c.projMatrix:null);g.prepareDrawProgram(D,q,c.toUnwrapped());const{tileBoundsBuffer:ae,tileBoundsIndexBuffer:ce,tileBoundsSegments:he}=g.getTileBoundsBuffers(f);q.draw(D,B.TRIANGLES,b,T,O,o.CullFaceMode.disabled,J,v.id,ae,ce,he)}function Om(g,c,f){if(!c.needsDEMTextureUpload)return;const v=g.context,b=v.gl;v.pixelStoreUnpackPremultiplyAlpha.set(!1),c.demTexture=c.demTexture||g.getTileTexture(f.stride);const T=f.getPixels();c.demTexture?c.demTexture.update(T,{premultiply:!1}):c.demTexture=new o.Texture(v,T,b.RGBA,{premultiply:!1}),c.needsDEMTextureUpload=!1}function T_(g,c,f,v,b,T){const O=g.context,D=O.gl;if(!c.dem)return;const B=c.dem;if(O.activeTexture.set(D.TEXTURE1),Om(g,c,B),!c.demTexture)return;c.demTexture.bind(D.NEAREST,D.CLAMP_TO_EDGE);const H=B.dim;O.activeTexture.set(D.TEXTURE0);let q=c.fbo;if(!q){const he=new o.Texture(O,{width:H,height:H,data:null},D.RGBA);he.bind(D.LINEAR,D.CLAMP_TO_EDGE),q=c.fbo=O.createFramebuffer(H,H,!0),q.colorAttachment.set(he.texture)}O.bindFramebuffer.set(q.framebuffer),O.viewport.set([0,0,H,H]);const{tileBoundsBuffer:J,tileBoundsIndexBuffer:ae,tileBoundsSegments:ce}=g.getMercatorTileBoundsBuffers();g.useProgram("hillshadePrepare").draw(O,D.TRIANGLES,v,b,T,o.CullFaceMode.disabled,((he,de)=>{const pe=de.stride,ee=o.create();return o.ortho(ee,0,o.EXTENT,-o.EXTENT,0,0,1),o.translate(ee,ee,[0,-o.EXTENT,0]),{u_matrix:ee,u_image:1,u_dimension:[pe,pe],u_zoom:he.overscaledZ,u_unpack:de.unpackVector}})(c.tileID,B),f.id,J,ae,ce),c.needsHillshadePrepare=!1}const km=g=>({u_matrix:new o.UniformMatrix4f(g),u_image0:new o.Uniform1i(g),u_skirt_height:new o.Uniform1f(g)}),vc=(g,c)=>({u_matrix:g,u_image0:0,u_skirt_height:c}),Th=(g,c,f,v,b,T,O,D,B,H,q,J,ae,ce,he)=>({u_proj_matrix:Float32Array.from(g),u_globe_matrix:c,u_normalize_matrix:Float32Array.from(v),u_merc_matrix:f,u_zoom_transition:b,u_merc_center:T,u_image0:0,u_frustum_tl:O,u_frustum_tr:D,u_frustum_br:B,u_frustum_bl:H,u_globe_pos:q,u_globe_radius:J,u_viewport:ae,u_grid_matrix:he?Float32Array.from(he):new Float32Array(9),u_skirt_height:ce});function _c(g,c){return g!=null&&c!=null&&!(!g.hasData()||!c.hasData())&&g.demTexture!=null&&c.demTexture!=null&&g.tileID.key!==c.tileID.key}const is=new class{constructor(){this.operations={}}newMorphing(g,c,f,v,b){if(g in this.operations){const T=this.operations[g];T.to.tileID.key!==f.tileID.key&&(T.queued=f)}else this.operations[g]={startTime:v,phase:0,duration:b,from:c,to:f,queued:null}}getMorphValuesForProxy(g){if(!(g in this.operations))return null;const c=this.operations[g];return{from:c.from,to:c.to,phase:c.phase}}update(g){for(const c in this.operations){const f=this.operations[c];for(f.phase=(g-f.startTime)/f.duration;f.phase>=1||!this._validOp(f);)if(!this._nextOp(f,g)){delete this.operations[c];break}}}_nextOp(g,c){return!!g.queued&&(g.from=g.to,g.to=g.queued,g.queued=null,g.phase=0,g.startTime=c,!0)}_validOp(g){return g.from.hasData()&&g.to.hasData()}},xl={0:null,1:"TERRAIN_VERTEX_MORPHING",2:"TERRAIN_WIREFRAME"};function Ah(g){return 6*Math.pow(1.5,22-g)}function A_(g,c){const f=1<<g.z;return!c&&(g.x===0||g.x===f-1)||g.y===0||g.y===f-1}const Qu=g=>({u_matrix:g});function Dm(g,c,f,v,b){if(b>0){const T=o.exported.now(),O=(T-g.timeAdded)/b,D=c?(T-c.timeAdded)/b:-1,B=f.getSource(),H=v.coveringZoomLevel({tileSize:B.tileSize,roundZoom:B.roundZoom}),q=!c||Math.abs(c.tileID.overscaledZ-H)>Math.abs(g.tileID.overscaledZ-H),J=q&&g.refreshedUponExpiration?1:o.clamp(q?O:1-D,0,1);return g.refreshedUponExpiration&&O>=1&&(g.refreshedUponExpiration=!1),c?{opacity:1,mix:1-J}:{opacity:J,mix:0}}return{opacity:1,mix:0}}class Rm extends o.SourceCache{constructor(c){const f={type:"raster-dem",maxzoom:c.transform.maxZoom},v=new $e(hc(),null),b=gr("mock-dem",f,v,c.style);super("mock-dem",b,!1),b.setEventedParent(this),this._sourceLoaded=!0}_loadTile(c,f){c.state="loaded",f(null)}}class Ph extends o.SourceCache{constructor(c){const f=gr("proxy",{type:"geojson",maxzoom:c.transform.maxZoom},new $e(hc(),null),c.style);super("proxy",f,!1),f.setEventedParent(this),this.map=this.getSource().map=c,this.used=this._sourceLoaded=!0,this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}update(c,f,v){if(c.freezeTileCoverage)return;this.transform=c;const b=c.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}).reduce((T,O)=>{if(T[O.key]="",!this._tiles[O.key]){const D=new o.Tile(O,this._source.tileSize*O.overscaleFactor(),c.tileZoom);D.state="loaded",this._tiles[O.key]=D}return T},{});for(const T in this._tiles)T in b||(this.freeFBO(T),this._tiles[T].unloadVectorData(),delete this._tiles[T])}freeFBO(c){const f=this.proxyCachedFBO[c];if(f!==void 0){const v=Object.values(f);this.renderCachePool.push(...v),delete this.proxyCachedFBO[c]}}deallocRenderCache(){this.renderCache.forEach(c=>c.fb.destroy()),this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}}class Ch extends o.OverscaledTileID{constructor(c,f,v){super(c.overscaledZ,c.wrap,c.canonical.z,c.canonical.x,c.canonical.y),this.proxyTileKey=f,this.projMatrix=v}}class Lm extends o.Elevation{constructor(c,f){super(),this.painter=c,this.terrainTileForTile={},this.prevTerrainTileForTile={};const[v,b,T]=function(B){const H=new o.StructArrayLayout2i4,q=new o.StructArrayLayout3ui6,J=131;H.reserve(17161),q.reserve(33800);const ae=o.EXTENT/128,ce=o.EXTENT+ae/2,he=ce+ae;for(let pe=-ae;pe<he;pe+=ae)for(let ee=-ae;ee<he;ee+=ae){const le=ee<0||ee>ce||pe<0||pe>ce?24575:0,ye=o.clamp(Math.round(ee),0,o.EXTENT),_e=o.clamp(Math.round(pe),0,o.EXTENT);H.emplaceBack(ye+le,_e)}const de=(pe,ee)=>{const le=ee*J+pe;q.emplaceBack(le+1,le,le+J),q.emplaceBack(le+J,le+J+1,le+1)};for(let pe=1;pe<129;pe++)for(let ee=1;ee<129;ee++)de(ee,pe);return[0,129].forEach(pe=>{for(let ee=0;ee<130;ee++)de(ee,pe),de(pe,ee)}),[H,q,32768]}(),O=c.context;this.gridBuffer=O.createVertexBuffer(v,o.posAttributes.members),this.gridIndexBuffer=O.createIndexBuffer(b),this.gridSegments=o.SegmentVector.simpleSegment(0,0,v.length,b.length),this.gridNoSkirtSegments=o.SegmentVector.simpleSegment(0,0,v.length,T),this.proxyCoords=[],this.proxiedCoords={},this._visibleDemTiles=[],this._drapedRenderBatches=[],this._sourceTilesOverlap={},this.proxySourceCache=new Ph(f.map),this.orthoMatrix=o.create(),o.ortho(this.orthoMatrix,this.painter.transform.projection.name==="globe"?.015:0,o.EXTENT,0,o.EXTENT,0,1);const D=O.gl;this._overlapStencilMode=new o.StencilMode({func:D.GEQUAL,mask:255},0,255,D.KEEP,D.KEEP,D.REPLACE),this._previousZoom=c.transform.zoom,this.pool=[],this._findCoveringTileCache={},this._tilesDirty={},this.style=f,this._useVertexMorphing=!0,this._exaggeration=1,this._mockSourceCache=new Rm(f.map)}set style(c){c.on("data",this._onStyleDataEvent.bind(this)),c.on("neworder",this._checkRenderCacheEfficiency.bind(this)),this._style=c,this._checkRenderCacheEfficiency(),this._style.map.on("moveend",()=>{this._clearLineLayersFromRenderCache()})}update(c,f,v){if(c&&c.terrain){this._style!==c&&(this.style=c),this.enabled=!0;const b=c.terrain.properties;this.sourceCache=c.terrain.drapeRenderMode===0?this._mockSourceCache:c._getSourceCache(b.get("source")),this._exaggeration=b.get("exaggeration");const T=()=>{this.sourceCache.used&&o.warnOnce(`Raster DEM source '${this.sourceCache.id}' is used both for terrain and as layer source.
This leads to lower resolution of hillshade. For full hillshade resolution but higher memory consumption, define another raster DEM source.`);const O=this.getScaledDemTileSize();this.sourceCache.update(f,O,!0),this.resetTileLookupCache(this.sourceCache.id)};this.sourceCache.usedForTerrain||(this.resetTileLookupCache(this.sourceCache.id),this.sourceCache.usedForTerrain=!0,T(),this._initializing=!0),T(),f.updateElevation(!0,v),this.resetTileLookupCache(this.proxySourceCache.id),this.proxySourceCache.update(f),this._emptyDEMTextureDirty=!0}else this._disable()}resetTileLookupCache(c){this._findCoveringTileCache[c]={}}getScaledDemTileSize(){return this.sourceCache.getSource().tileSize/128*this.proxySourceCache.getSource().tileSize}_checkRenderCacheEfficiency(){const c=this.renderCacheEfficiency(this._style);this._style.map._optimizeForTerrain||c.efficiency!==100&&o.warnOnce(`Terrain render cache efficiency is not optimal (${c.efficiency}%) and performance
                may be affected negatively, consider placing all background, fill and line layers before layer
                with id '${c.firstUndrapedLayer}' or create a map using optimizeForTerrain: true option.`)}_onStyleDataEvent(c){c.coord&&c.dataType==="source"?this._clearRenderCacheForTile(c.sourceCacheId,c.coord):c.dataType==="style"&&(this._invalidateRenderCache=!0)}_disable(){if(this.enabled&&(this.enabled=!1,this._sharedDepthStencil=void 0,this.proxySourceCache.deallocRenderCache(),this._style))for(const c in this._style._sourceCaches)this._style._sourceCaches[c].usedForTerrain=!1}destroy(){this._disable(),this._emptyDEMTexture&&this._emptyDEMTexture.destroy(),this._emptyDepthBufferTexture&&this._emptyDepthBufferTexture.destroy(),this.pool.forEach(c=>c.fb.destroy()),this.pool=[],this._depthFBO&&(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0)}_source(){return this.enabled?this.sourceCache:null}isUsingMockSource(){return this.sourceCache===this._mockSourceCache}exaggeration(){return this._exaggeration}get visibleDemTiles(){return this._visibleDemTiles}get drapeBufferSize(){const c=2*this.proxySourceCache.getSource().tileSize;return[c,c]}set useVertexMorphing(c){this._useVertexMorphing=c}updateTileBinding(c){if(!this.enabled)return;this.prevTerrainTileForTile=this.terrainTileForTile;const f=this.proxySourceCache,v=this.painter.transform;this._initializing&&(this._initializing=v._centerAltitude===0&&this.getAtPointOrZero(o.MercatorCoordinate.fromLngLat(v.center),-1)===-1,this._emptyDEMTextureDirty=!this._initializing);const b=this.proxyCoords=f.getIds().map(B=>{const H=f.getTileByID(B).tileID;return H.projMatrix=v.calculateProjMatrix(H.toUnwrapped()),H});(function(B,H){const q=H.transform.pointCoordinate(H.transform.getCameraPoint()),J=new o.Point(q.x,q.y);B.sort((ae,ce)=>{if(ce.overscaledZ-ae.overscaledZ)return ce.overscaledZ-ae.overscaledZ;const he=new o.Point(ae.canonical.x+(1<<ae.canonical.z)*ae.wrap,ae.canonical.y),de=new o.Point(ce.canonical.x+(1<<ce.canonical.z)*ce.wrap,ce.canonical.y),pe=J.mult(1<<ae.canonical.z);return pe.x-=.5,pe.y-=.5,pe.distSqr(he)-pe.distSqr(de)})})(b,this.painter),this._previousZoom=v.zoom;const T=this.proxyToSource||{};this.proxyToSource={},b.forEach(B=>{this.proxyToSource[B.key]={}}),this.terrainTileForTile={};const O=this._style._sourceCaches;for(const B in O){const H=O[B];if(!H.used||(H!==this.sourceCache&&this.resetTileLookupCache(H.id),this._setupProxiedCoordsForOrtho(H,c[B],T),H.usedForTerrain))continue;const q=c[B];H.getSource().reparseOverscaled&&this._assignTerrainTiles(q)}this.proxiedCoords[f.id]=b.map(B=>new Ch(B,B.key,this.orthoMatrix)),this._assignTerrainTiles(b),this._prepareDEMTextures(),this._setupDrapedRenderBatches(),this._initFBOPool(),this._setupRenderCache(T),this.renderingToTexture=!1,this._updateTimestamp=o.exported.now();const D={};this._visibleDemTiles=[];for(const B of this.proxyCoords){const H=this.terrainTileForTile[B.key];if(!H)continue;const q=H.tileID.key;q in D||(this._visibleDemTiles.push(H),D[q]=q)}}_assignTerrainTiles(c){this._initializing||c.forEach(f=>{if(this.terrainTileForTile[f.key])return;const v=this._findTileCoveringTileID(f,this.sourceCache);v&&(this.terrainTileForTile[f.key]=v)})}_prepareDEMTextures(){const c=this.painter.context,f=c.gl;for(const v in this.terrainTileForTile){const b=this.terrainTileForTile[v],T=b.dem;!T||b.demTexture&&!b.needsDEMTextureUpload||(c.activeTexture.set(f.TEXTURE1),Om(this.painter,b,T))}}_prepareDemTileUniforms(c,f,v,b){if(!f||f.demTexture==null)return!1;const T=c.tileID.canonical,O=Math.pow(2,f.tileID.canonical.z-T.z),D=b||"";return v[`u_dem_tl${D}`]=[T.x*O%1,T.y*O%1],v[`u_dem_scale${D}`]=O,!0}get emptyDEMTexture(){return!this._emptyDEMTextureDirty&&this._emptyDEMTexture?this._emptyDEMTexture:this._updateEmptyDEMTexture()}get emptyDepthBufferTexture(){const c=this.painter.context,f=c.gl;if(!this._emptyDepthBufferTexture){const v=new o.RGBAImage({width:1,height:1},Uint8Array.of(255,255,255,255));this._emptyDepthBufferTexture=new o.Texture(c,v,f.RGBA,{premultiply:!1})}return this._emptyDepthBufferTexture}_getLoadedAreaMinimum(){let c=0;const f=this._visibleDemTiles.reduce((v,b)=>{if(!b.dem)return v;const T=b.dem.tree.minimums[0];return T>0&&c++,v+T},0);return c?f/c:0}_updateEmptyDEMTexture(){const c=this.painter.context,f=c.gl;c.activeTexture.set(f.TEXTURE2);const v=this._getLoadedAreaMinimum(),b=new o.RGBAImage({width:1,height:1},new Uint8Array(o.DEMData.pack(v,this.sourceCache.getSource().encoding)));this._emptyDEMTextureDirty=!1;let T=this._emptyDEMTexture;return T?T.update(b,{premultiply:!1}):T=this._emptyDEMTexture=new o.Texture(c,b,f.RGBA,{premultiply:!1}),T}setupElevationDraw(c,f,v){const b=this.painter.context,T=b.gl,O=(D=this.sourceCache.getSource().encoding,{u_dem:2,u_dem_prev:4,u_dem_unpack:o.DEMData.getUnpackVector(D),u_dem_tl:[0,0],u_dem_tl_prev:[0,0],u_dem_scale:0,u_dem_scale_prev:0,u_dem_size:0,u_dem_lerp:1,u_depth:3,u_depth_size_inv:[0,0],u_exaggeration:0});var D;O.u_dem_size=this.sourceCache.getSource().tileSize,O.u_exaggeration=this.exaggeration();let B=null,H=null,q=1;if(v&&v.morphing&&this._useVertexMorphing){const J=v.morphing.srcDemTile,ae=v.morphing.dstDemTile;q=v.morphing.phase,J&&ae&&(this._prepareDemTileUniforms(c,J,O,"_prev")&&(H=J),this._prepareDemTileUniforms(c,ae,O)&&(B=ae))}if(H&&B?(b.activeTexture.set(T.TEXTURE2),B.demTexture.bind(T.NEAREST,T.CLAMP_TO_EDGE,T.NEAREST),b.activeTexture.set(T.TEXTURE4),H.demTexture.bind(T.NEAREST,T.CLAMP_TO_EDGE,T.NEAREST),O.u_dem_lerp=q):(B=this.terrainTileForTile[c.tileID.key],b.activeTexture.set(T.TEXTURE2),(this._prepareDemTileUniforms(c,B,O)?B.demTexture:this.emptyDEMTexture).bind(T.NEAREST,T.CLAMP_TO_EDGE)),b.activeTexture.set(T.TEXTURE3),v&&v.useDepthForOcclusion?(this._depthTexture&&this._depthTexture.bind(T.NEAREST,T.CLAMP_TO_EDGE),this._depthFBO&&(O.u_depth_size_inv=[1/this._depthFBO.width,1/this._depthFBO.height])):(this.emptyDepthBufferTexture.bind(T.NEAREST,T.CLAMP_TO_EDGE),O.u_depth_size_inv=[1,1]),v&&v.useMeterToDem&&B){const J=(1<<B.tileID.canonical.z)*o.mercatorZfromAltitude(1,this.painter.transform.center.lat)*this.sourceCache.getSource().tileSize;O.u_meter_to_dem=J}if(v&&v.labelPlaneMatrixInv&&(O.u_label_plane_matrix_inv=v.labelPlaneMatrixInv),f.setTerrainUniformValues(b,O),this.painter.transform.projection.name==="globe"){const J=this.globeUniformValues(this.painter.transform,c.tileID.canonical,v&&v.useDenormalizedUpVectorScale);f.setGlobeUniformValues(b,J)}}globeUniformValues(c,f,v){const b=c.projection;return{u_tile_tl_up:b.upVector(f,0,0),u_tile_tr_up:b.upVector(f,o.EXTENT,0),u_tile_br_up:b.upVector(f,o.EXTENT,o.EXTENT),u_tile_bl_up:b.upVector(f,0,o.EXTENT),u_tile_up_scale:v?o.globeMetersToEcef(1):b.upVectorScale(f,c.center.lat,c.worldSize).metersToTile}}renderToBackBuffer(c){const f=this.painter,v=this.painter.context;c.length!==0&&(v.bindFramebuffer.set(null),v.viewport.set([0,0,f.width,f.height]),f.gpuTimingDeferredRenderStart(),this.renderingToTexture=!1,function(b,T,O,D,B){if(b.transform.projection.name==="globe")(function(H,q,J,ae,ce){const he=H.context,de=he.gl;let pe,ee;const le=H.options.showTerrainWireframe?2:0,ye=H.transform,_e=o.globeUseCustomAntiAliasing(H,he,ye),Oe=(_t,Ze)=>{if(ee===_t)return;const st=[xl[_t],"PROJECTION_GLOBE_VIEW"];_e&&st.push("CUSTOM_ANTIALIASING"),Ze&&st.push(xl[le]),pe=H.useProgram("globeRaster",null,st),ee=_t},De=H.colorModeForRenderPass(),ke=new o.DepthMode(de.LEQUAL,o.DepthMode.ReadWrite,H.depthRangeFor3D);is.update(ce);const Ve=o.calculateGlobeMercatorMatrix(ye),Fe=[o.mercatorXfromLng(ye.center.lng),o.mercatorYfromLat(ye.center.lat)],Ke=le?[!1,!0]:[!1],xt=H.globeSharedBuffers,He=[ye.width*o.exported.devicePixelRatio,ye.height*o.exported.devicePixelRatio],ct=Float32Array.from(ye.globeMatrix),Je={useDenormalizedUpVectorScale:!0};if(Ke.forEach(_t=>{const Ze=H.transform,st=Ah(Ze.zoom)*q.exaggeration();ee=-1;const wt=_t?de.LINES:de.TRIANGLES;for(const pt of ae){const St=J.getTile(pt),Ht=o.StencilMode.disabled,ir=q.prevTerrainTileForTile[pt.key],Ft=q.terrainTileForTile[pt.key];_c(ir,Ft)&&is.newMorphing(pt.key,ir,Ft,ce,250),he.activeTexture.set(de.TEXTURE0),St.texture.bind(de.LINEAR,de.CLAMP_TO_EDGE);const Qt=is.getMorphValuesForProxy(pt.key),br=Qt?1:0;Qt&&o.extend$1(Je,{morphing:{srcDemTile:Qt.from,dstDemTile:Qt.to,phase:o.easeCubicInOut(Qt.phase)}});const yr=o.tileCornersToBounds(pt.canonical),Gt=o.getLatitudinalLod(yr.getCenter().lat),Nr=o.getGridMatrix(pt.canonical,yr,Gt,Ze.worldSize/Ze._pixelsPerMercatorPixel),Wr=o.globeNormalizeECEF(o.globeTileBounds(pt.canonical)),qr=Th(Ze.projMatrix,ct,Ve,Wr,o.globeToMercatorTransition(Ze.zoom),Fe,Ze.frustumCorners.TL,Ze.frustumCorners.TR,Ze.frustumCorners.BR,Ze.frustumCorners.BL,Ze.globeCenterInViewSpace,Ze.globeRadius,He,st,Nr);if(Oe(br,_t),q.setupElevationDraw(St,pe,Je),H.prepareDrawProgram(he,pe,pt.toUnwrapped()),xt){const[Hr,Mi,di]=_t?xt.getWirefameBuffers(H.context,Gt):xt.getGridBuffers(Gt,st!==0);pe.draw(he,wt,ke,Ht,De,o.CullFaceMode.backCCW,qr,"globe_raster",Hr,Mi,di)}}}),xt){const _t=["GLOBE_POLES","PROJECTION_GLOBE_VIEW"];_e&&_t.push("CUSTOM_ANTIALIASING"),pe=H.useProgram("globeRaster",null,_t);for(const Ze of ae){const{x:st,y:wt,z:pt}=Ze.canonical,St=wt===0,Ht=wt===(1<<pt)-1,[ir,Ft,Qt,br]=xt.getPoleBuffers(pt);if(br&&(St||Ht)){const yr=J.getTile(Ze);he.activeTexture.set(de.TEXTURE0),yr.texture.bind(de.LINEAR,de.CLAMP_TO_EDGE);let Gt=o.globePoleMatrixForTile(pt,st,ye);const Nr=o.globeNormalizeECEF(o.globeTileBounds(Ze.canonical)),Wr=(qr,Hr)=>qr.draw(he,de.TRIANGLES,ke,o.StencilMode.disabled,De,o.CullFaceMode.disabled,Th(ye.projMatrix,Gt,Gt,Nr,0,Fe,ye.frustumCorners.TL,ye.frustumCorners.TR,ye.frustumCorners.BR,ye.frustumCorners.BL,ye.globeCenterInViewSpace,ye.globeRadius,He,0),"globe_pole_raster",Hr,Qt,br);q.setupElevationDraw(yr,pe,Je),H.prepareDrawProgram(he,pe,Ze.toUnwrapped()),St&&Wr(pe,ir),Ht&&(Gt=o.scale(o.create(),Gt,[1,-1,1]),Wr(pe,Ft))}}}})(b,T,O,D,B);else{const H=b.context,q=H.gl;let J,ae;const ce=b.options.showTerrainWireframe?2:0,he=(ye,_e)=>{if(ae===ye)return;const Oe=[xl[ye]];_e&&Oe.push(xl[ce]),J=b.useProgram("terrainRaster",null,Oe),ae=ye},de=b.colorModeForRenderPass(),pe=new o.DepthMode(q.LEQUAL,o.DepthMode.ReadWrite,b.depthRangeFor3D);is.update(B);const ee=b.transform,le=Ah(ee.zoom)*T.exaggeration();(ce?[!1,!0]:[!1]).forEach(ye=>{ae=-1;const _e=ye?q.LINES:q.TRIANGLES,[Oe,De]=ye?T.getWirefameBuffer():[T.gridIndexBuffer,T.gridSegments];for(const ke of D){const Ve=O.getTile(ke),Fe=o.StencilMode.disabled,Ke=T.prevTerrainTileForTile[ke.key],xt=T.terrainTileForTile[ke.key];_c(Ke,xt)&&is.newMorphing(ke.key,Ke,xt,B,250),H.activeTexture.set(q.TEXTURE0),Ve.texture.bind(q.LINEAR,q.CLAMP_TO_EDGE,q.LINEAR_MIPMAP_NEAREST);const He=is.getMorphValuesForProxy(ke.key),ct=He?1:0;let Je;He&&(Je={morphing:{srcDemTile:He.from,dstDemTile:He.to,phase:o.easeCubicInOut(He.phase)}});const _t=vc(ke.projMatrix,A_(ke.canonical,ee.renderWorldCopies)?le/10:le);he(ct,ye),T.setupElevationDraw(Ve,J,Je),b.prepareDrawProgram(H,J,ke.toUnwrapped()),J.draw(H,_e,pe,Fe,de,o.CullFaceMode.backCCW,_t,"terrain_raster",T.gridBuffer,Oe,De)}})}}(f,this,this.proxySourceCache,c,this._updateTimestamp),this.renderingToTexture=!0,f.gpuTimingDeferredRenderEnd(),c.splice(0,c.length))}renderBatch(c){if(this._drapedRenderBatches.length===0)return c+1;this.renderingToTexture=!0;const f=this.painter,v=this.painter.context,b=this.proxySourceCache,T=this.proxiedCoords[b.id],O=this._drapedRenderBatches.shift(),D=[],B=f.style.order;let H=0;for(const q of T){const J=b.getTileByID(q.proxyTileKey),ae=b.proxyCachedFBO[q.key]?b.proxyCachedFBO[q.key][c]:void 0,ce=ae!==void 0?b.renderCache[ae]:this.pool[H++],he=ae!==void 0;if(J.texture=ce.tex,he&&!ce.dirty){D.push(J.tileID);continue}let de;v.bindFramebuffer.set(ce.fb.framebuffer),this.renderedToTile=!1,ce.dirty&&(v.clear({color:o.Color.transparent,stencil:0}),ce.dirty=!1);for(let pe=O.start;pe<=O.end;++pe){const ee=f.style._layers[B[pe]];if(ee.isHidden(f.transform.zoom))continue;const le=f.style._getLayerSourceCache(ee),ye=le?this.proxyToSource[q.key][le.id]:[q];if(!ye)continue;const _e=ye;v.viewport.set([0,0,ce.fb.width,ce.fb.height]),de!==(le?le.id:null)&&(this._setupStencil(ce,ye,ee,le),de=le?le.id:null),f.renderLayer(f,le,ee,_e)}this.renderedToTile?(ce.dirty=!0,D.push(J.tileID)):he||--H,H===5&&(H=0,this.renderToBackBuffer(D))}return this.renderToBackBuffer(D),this.renderingToTexture=!1,v.bindFramebuffer.set(null),v.viewport.set([0,0,f.width,f.height]),O.end+1}postRender(){}renderCacheEfficiency(c){const f=c.order.length;if(f===0)return{efficiency:100};let v,b=0,T=0,O=!1;for(let D=0;D<f;++D){const B=c._layers[c.order[D]];this._style.isLayerDraped(B)?(O&&++b,++T):O||(O=!0,v=B.id)}return T===0?{efficiency:100}:{efficiency:100*(1-b/T),firstUndrapedLayer:v}}getMinElevationBelowMSL(){let c=0;return this._visibleDemTiles.filter(f=>f.dem).forEach(f=>{c=Math.min(c,f.dem.tree.minimums[0])}),c===0?c:(c-30)*this._exaggeration}raycast(c,f,v){if(!this._visibleDemTiles)return null;const b=this._visibleDemTiles.filter(T=>T.dem).map(T=>{const O=T.tileID,D=1<<O.overscaledZ,{x:B,y:H}=O.canonical,q=B/D,J=(B+1)/D,ae=H/D,ce=(H+1)/D;return{minx:q,miny:ae,maxx:J,maxy:ce,t:T.dem.tree.raycastRoot(q,ae,J,ce,c,f,v),tile:T}});b.sort((T,O)=>(T.t!==null?T.t:Number.MAX_VALUE)-(O.t!==null?O.t:Number.MAX_VALUE));for(const T of b){if(T.t==null)return null;const O=T.tile.dem.tree.raycast(T.minx,T.miny,T.maxx,T.maxy,c,f,v);if(O!=null)return O}return null}_createFBO(){const c=this.painter.context,f=c.gl,v=this.drapeBufferSize;c.activeTexture.set(f.TEXTURE0);const b=new o.Texture(c,{width:v[0],height:v[1],data:null},f.RGBA);b.bind(f.LINEAR,f.CLAMP_TO_EDGE);const T=c.createFramebuffer(v[0],v[1],!1);return T.colorAttachment.set(b.texture),T.depthAttachment=new ze(c,T.framebuffer),this._sharedDepthStencil===void 0?(this._sharedDepthStencil=c.createRenderbuffer(c.gl.DEPTH_STENCIL,v[0],v[1]),this._stencilRef=0,T.depthAttachment.set(this._sharedDepthStencil),c.clear({stencil:0})):T.depthAttachment.set(this._sharedDepthStencil),c.extTextureFilterAnisotropic&&!c.extTextureFilterAnisotropicForceOff&&f.texParameterf(f.TEXTURE_2D,c.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,c.extTextureFilterAnisotropicMax),{fb:T,tex:b,dirty:!1}}_initFBOPool(){for(;this.pool.length<Math.min(5,this.proxyCoords.length);)this.pool.push(this._createFBO())}_shouldDisableRenderCache(){if(this._style.light&&this._style.light.hasTransition())return!0;for(const c in this._style._sourceCaches)if(this._style._sourceCaches[c].hasTransition())return!0;return this._style.order.some(c=>{const f=this._style._layers[c],v=f.isHidden(this.painter.transform.zoom);return f.type==="custom"?!v&&f.shouldRedrape():!v&&f.hasTransition()})}_clearLineLayersFromRenderCache(){let c=!1;for(const v of this._style._getSources())if(v instanceof kt){c=!0;break}if(!c)return;const f={};for(let v=0;v<this._style.order.length;++v){const b=this._style._layers[this._style.order[v]],T=this._style._getLayerSourceCache(b);if(T&&!f[T.id]&&!b.isHidden(this.painter.transform.zoom)&&b.type==="line"&&b.widthExpression()instanceof o.ZoomDependentExpression){f[T.id]=!0;for(const O of this.proxyCoords){const D=this.proxyToSource[O.key][T.id];if(D)for(const B of D)this._clearRenderCacheForTile(T.id,B)}}}}_clearRasterLayersFromRenderCache(){let c=!1;for(const v in this._style._sourceCaches)if(this._style._sourceCaches[v]._source instanceof Tt){c=!0;break}if(!c)return;const f={};for(let v=0;v<this._style.order.length;++v){const b=this._style._layers[this._style.order[v]],T=this._style._getLayerSourceCache(b);if(!T||f[T.id]||b.isHidden(this.painter.transform.zoom)||b.type!=="raster")continue;const O=b.paint.get("raster-fade-duration");for(const D of this.proxyCoords){const B=this.proxyToSource[D.key][T.id];if(B)for(const H of B){const q=Dm(T.getTile(H),T.findLoadedParent(H,0),T,this.painter.transform,O);(q.opacity!==1||q.mix!==0)&&this._clearRenderCacheForTile(T.id,H)}}}}_setupDrapedRenderBatches(){const c=this._style.order,f=c.length;if(f===0)return;const v=[];let b,T=0,O=this._style._layers[c[T]];for(;!this._style.isLayerDraped(O)&&O.isHidden(this.painter.transform.zoom)&&++T<f;)O=this._style._layers[c[T]];for(;T<f;++T){const D=this._style._layers[c[T]];D.isHidden(this.painter.transform.zoom)||(this._style.isLayerDraped(D)?b===void 0&&(b=T):b!==void 0&&(v.push({start:b,end:T-1}),b=void 0))}b!==void 0&&v.push({start:b,end:T-1}),this._drapedRenderBatches=v}_setupRenderCache(c){const f=this.proxySourceCache;if(this._shouldDisableRenderCache()||this._invalidateRenderCache){if(this._invalidateRenderCache=!1,f.renderCache.length>f.renderCachePool.length){const O=Object.values(f.proxyCachedFBO);f.proxyCachedFBO={};for(let D=0;D<O.length;++D){const B=Object.values(O[D]);f.renderCachePool.push(...B)}}return}this._clearRasterLayersFromRenderCache();const v=this.proxyCoords,b=this._tilesDirty;for(let O=v.length-1;O>=0;O--){const D=v[O];if(f.getTileByID(D.key),f.proxyCachedFBO[D.key]!==void 0){const B=c[D.key],H=this.proxyToSource[D.key];let q=0;for(const J in H){const ae=H[J],ce=B[J];if(!ce||ce.length!==ae.length||ae.some((he,de)=>he!==ce[de]||b[J]&&b[J].hasOwnProperty(he.key))){q=-1;break}++q}for(const J in f.proxyCachedFBO[D.key])f.renderCache[f.proxyCachedFBO[D.key][J]].dirty=q<0||q!==Object.values(B).length}}const T=[...this._drapedRenderBatches];T.sort((O,D)=>D.end-D.start-(O.end-O.start));for(const O of T)for(const D of v){if(f.proxyCachedFBO[D.key])continue;let B=f.renderCachePool.pop();B===void 0&&f.renderCache.length<50&&(B=f.renderCache.length,f.renderCache.push(this._createFBO())),B!==void 0&&(f.proxyCachedFBO[D.key]={},f.proxyCachedFBO[D.key][O.start]=B,f.renderCache[B].dirty=!0)}this._tilesDirty={}}_setupStencil(c,f,v,b){if(!b||!this._sourceTilesOverlap[b.id])return void(this._overlapStencilType&&(this._overlapStencilType=!1));const T=this.painter.context,O=T.gl;if(f.length<=1)return void(this._overlapStencilType=!1);let D;if(v.isTileClipped())D=f.length,this._overlapStencilMode.test={func:O.EQUAL,mask:255},this._overlapStencilType="Clip";else{if(!(f[0].overscaledZ>f[f.length-1].overscaledZ))return void(this._overlapStencilType=!1);D=1,this._overlapStencilMode.test={func:O.GREATER,mask:255},this._overlapStencilType="Mask"}this._stencilRef+D>255&&(T.clear({stencil:0}),this._stencilRef=0),this._stencilRef+=D,this._overlapStencilMode.ref=this._stencilRef,v.isTileClipped()&&this._renderTileClippingMasks(f,this._overlapStencilMode.ref)}clipOrMaskOverlapStencilType(){return this._overlapStencilType==="Clip"||this._overlapStencilType==="Mask"}stencilModeForRTTOverlap(c){return this.renderingToTexture&&this._overlapStencilType?(this._overlapStencilType==="Clip"&&(this._overlapStencilMode.ref=this.painter._tileClippingMaskIDs[c.key]),this._overlapStencilMode):o.StencilMode.disabled}_renderTileClippingMasks(c,f){const v=this.painter,b=this.painter.context,T=b.gl;v._tileClippingMaskIDs={},b.setColorMode(o.ColorMode.disabled),b.setDepthMode(o.DepthMode.disabled);const O=v.useProgram("clippingMask");for(const D of c){const B=v._tileClippingMaskIDs[D.key]=--f;O.draw(b,T.TRIANGLES,o.DepthMode.disabled,new o.StencilMode({func:T.ALWAYS,mask:0},B,255,T.KEEP,T.KEEP,T.REPLACE),o.ColorMode.disabled,o.CullFaceMode.disabled,Qu(D.projMatrix),"$clipping",v.tileExtentBuffer,v.quadTriangleIndexBuffer,v.tileExtentSegments)}}pointCoordinate(c){const f=this.painter.transform;if(c.x<0||c.x>f.width||c.y<0||c.y>f.height)return null;const v=[c.x,c.y,1,1];o.transformMat4$1(v,v,f.pixelMatrixInverse),o.scale$1(v,v,1/v[3]),v[0]/=f.worldSize,v[1]/=f.worldSize;const b=f._camera.position,T=o.mercatorZfromAltitude(1,f.center.lat),O=[b[0],b[1],b[2]/T,0],D=o.subtract([],v.slice(0,3),O);o.normalize(D,D);const B=this.raycast(O,D,this._exaggeration);return B!==null&&B?(o.scaleAndAdd(O,O,D,B),O[3]=O[2],O[2]*=T,O):null}drawDepth(){const c=this.painter,f=c.context,v=this.proxySourceCache,b=Math.ceil(c.width),T=Math.ceil(c.height);if(!this._depthFBO||this._depthFBO.width===b&&this._depthFBO.height===T||(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0),!this._depthFBO){const O=f.gl,D=f.createFramebuffer(b,T,!0);f.activeTexture.set(O.TEXTURE0);const B=new o.Texture(f,{width:b,height:T,data:null},O.RGBA);B.bind(O.NEAREST,O.CLAMP_TO_EDGE),D.colorAttachment.set(B.texture);const H=f.createRenderbuffer(f.gl.DEPTH_COMPONENT16,b,T);D.depthAttachment.set(H),this._depthFBO=D,this._depthTexture=B}f.bindFramebuffer.set(this._depthFBO.framebuffer),f.viewport.set([0,0,b,T]),function(O,D,B,H){if(O.transform.projection.name==="globe")return;const q=O.context,J=q.gl;q.clear({depth:1});const ae=O.useProgram("terrainDepth"),ce=new o.DepthMode(J.LESS,o.DepthMode.ReadWrite,O.depthRangeFor3D);for(const he of H){const de=B.getTile(he),pe=vc(he.projMatrix,0);D.setupElevationDraw(de,ae),ae.draw(q,J.TRIANGLES,ce,o.StencilMode.disabled,o.ColorMode.unblended,o.CullFaceMode.backCCW,pe,"terrain_depth",D.gridBuffer,D.gridIndexBuffer,D.gridNoSkirtSegments)}}(c,this,v,this.proxyCoords)}_setupProxiedCoordsForOrtho(c,f,v){if(c.getSource()instanceof mr)return this._setupProxiedCoordsForImageSource(c,f,v);this._findCoveringTileCache[c.id]=this._findCoveringTileCache[c.id]||{};const b=this.proxiedCoords[c.id]=[],T=this.proxyCoords;for(let D=0;D<T.length;D++){const B=T[D],H=this._findTileCoveringTileID(B,c);if(H){const q=this._createProxiedId(B,H,v[B.key]&&v[B.key][c.id]);b.push(q),this.proxyToSource[B.key][c.id]=[q]}}let O=!1;for(let D=0;D<f.length;D++){const B=c.getTile(f[D]);if(!B||!B.hasData())continue;const H=this._findTileCoveringTileID(B.tileID,this.proxySourceCache);if(H&&H.tileID.canonical.z!==B.tileID.canonical.z){const q=this.proxyToSource[H.tileID.key][c.id],J=this._createProxiedId(H.tileID,B,v[H.tileID.key]&&v[H.tileID.key][c.id]);q?q.splice(q.length-1,0,J):this.proxyToSource[H.tileID.key][c.id]=[J],b.push(J),O=!0}}this._sourceTilesOverlap[c.id]=O}_setupProxiedCoordsForImageSource(c,f,v){if(!c.getSource().loaded())return;const b=this.proxiedCoords[c.id]=[],T=this.proxyCoords,O=c.getSource(),D=new o.Point(O.tileID.x,O.tileID.y)._div(1<<O.tileID.z),B=O.coordinates.map(o.MercatorCoordinate.fromLngLat).reduce((q,J)=>(q.min.x=Math.min(q.min.x,J.x-D.x),q.min.y=Math.min(q.min.y,J.y-D.y),q.max.x=Math.max(q.max.x,J.x-D.x),q.max.y=Math.max(q.max.y,J.y-D.y),q),{min:new o.Point(Number.MAX_VALUE,Number.MAX_VALUE),max:new o.Point(-Number.MAX_VALUE,-Number.MAX_VALUE)}),H=(q,J)=>{const ae=q.wrap+q.canonical.x/(1<<q.canonical.z),ce=q.canonical.y/(1<<q.canonical.z),he=o.EXTENT/(1<<q.canonical.z),de=J.wrap+J.canonical.x/(1<<J.canonical.z),pe=J.canonical.y/(1<<J.canonical.z);return ae+he<de+B.min.x||ae>de+B.max.x||ce+he<pe+B.min.y||ce>pe+B.max.y};for(let q=0;q<T.length;q++){const J=T[q];for(let ae=0;ae<f.length;ae++){const ce=c.getTile(f[ae]);if(!ce||!ce.hasData()||H(J,ce.tileID))continue;const he=this._createProxiedId(J,ce,v[J.key]&&v[J.key][c.id]),de=this.proxyToSource[J.key][c.id];de?de.push(he):this.proxyToSource[J.key][c.id]=[he],b.push(he)}}}_createProxiedId(c,f,v){let b=this.orthoMatrix;if(v){const T=v.find(O=>O.key===f.tileID.key);if(T)return T}if(f.tileID.key!==c.key){const T=c.canonical.z-f.tileID.canonical.z;let O,D,B;b=o.create();const H=f.tileID.wrap-c.wrap<<c.overscaledZ;T>0?(O=o.EXTENT>>T,D=O*((f.tileID.canonical.x<<T)-c.canonical.x+H),B=O*((f.tileID.canonical.y<<T)-c.canonical.y)):(O=o.EXTENT<<-T,D=o.EXTENT*(f.tileID.canonical.x-(c.canonical.x+H<<-T)),B=o.EXTENT*(f.tileID.canonical.y-(c.canonical.y<<-T))),o.ortho(b,0,O,0,O,0,1),o.translate(b,b,[D,B,0])}return new Ch(f.tileID,c.key,b)}_findTileCoveringTileID(c,f){let v=f.getTile(c);if(v&&v.hasData())return v;const b=this._findCoveringTileCache[f.id],T=b[c.key];if(v=T?f.getTileByID(T):null,v&&v.hasData()||T===null)return v;let O=v?v.tileID:c,D=O.overscaledZ;const B=f.getSource().minzoom,H=[];if(!T){const J=f.getSource().maxzoom;if(c.canonical.z>=J){const ae=c.canonical.z-J;f.getSource().reparseOverscaled?(D=Math.max(c.canonical.z+2,f.transform.tileZoom),O=new o.OverscaledTileID(D,c.wrap,J,c.canonical.x>>ae,c.canonical.y>>ae)):ae!==0&&(D=J,O=new o.OverscaledTileID(D,c.wrap,J,c.canonical.x>>ae,c.canonical.y>>ae))}O.key!==c.key&&(H.push(O.key),v=f.getTile(O))}const q=J=>{H.forEach(ae=>{b[ae]=J}),H.length=0};for(D-=1;D>=B&&(!v||!v.hasData());D--){v&&q(v.tileID.key);const J=O.calculateScaledKey(D);if(v=f.getTileByID(J),v&&v.hasData())break;const ae=b[J];if(ae===null)break;ae===void 0?H.push(J):v=f.getTileByID(ae)}return q(v?v.tileID.key:null),v&&v.hasData()?v:null}findDEMTileFor(c){return this.enabled?this._findTileCoveringTileID(c,this.sourceCache):null}prepareDrawTile(){this.renderedToTile=!0}_clearRenderCacheForTile(c,f){let v=this._tilesDirty[c];v||(v=this._tilesDirty[c]={}),v[f.key]=!0}getWirefameBuffer(){if(!this.wireframeSegments){const c=function(f){let v=0;const b=new o.StructArrayLayout2ui4,T=131;for(let O=1;O<129;O++){for(let D=1;D<129;D++)v=O*T+D,b.emplaceBack(v,v+1),b.emplaceBack(v,v+T),b.emplaceBack(v+1,v+T),O===128&&b.emplaceBack(v+T,v+T+1);b.emplaceBack(v+1,v+1+T)}return b}();this.wireframeIndexBuffer=this.painter.context.createIndexBuffer(c),this.wireframeSegments=o.SegmentVector.simpleSegment(0,0,this.gridBuffer.length,c.length)}return[this.wireframeIndexBuffer,this.wireframeSegments]}}class Cr{static cacheKey(c,f,v,b){let T=`${f}${b?b.cacheKey:""}`;for(const O of v)c.usedDefines.includes(O)&&(T+=`/${O}`);return T}constructor(c,f,v,b,T,O){const D=c.gl;this.program=D.createProgram();const B=function(ee){const le=[];for(let ye=0;ye<ee.length;ye++){if(ee[ye]===null)continue;const _e=ee[ye].split(" ");le.push(_e.pop())}return le}(v.staticAttributes),H=b?b.getBinderAttributes():[],q=B.concat(H);let J=b?b.defines():[];J=J.concat(O.map(ee=>`#define ${ee}`));const ae=c.isWebGL2?`#version 300 es
`:"",ce=ae+J.concat(c.extStandardDerivatives&&ae.length===0?`#extension GL_OES_standard_derivatives : enable
`.concat(Cm):Cm,Cm,Eh,S_.fragmentSource,gc.fragmentSource,v.fragmentSource).join(`
`),he=ae+J.concat(`
#ifdef GL_ES
precision highp float;
#else

#if !defined(lowp)
#define lowp
#endif

#if !defined(mediump)
#define mediump
#endif

#if !defined(highp)
#define highp
#endif

#endif`,Eh,S_.vertexSource,gc.vertexSource,Sh.vertexSource,v.vertexSource).join(`
`),de=D.createShader(D.FRAGMENT_SHADER);if(D.isContextLost())return void(this.failedToCreate=!0);D.shaderSource(de,ce),D.compileShader(de),D.attachShader(this.program,de);const pe=D.createShader(D.VERTEX_SHADER);if(D.isContextLost())this.failedToCreate=!0;else{D.shaderSource(pe,he),D.compileShader(pe),D.attachShader(this.program,pe),this.attributes={},this.numAttributes=q.length;for(let ee=0;ee<this.numAttributes;ee++)q[ee]&&(D.bindAttribLocation(this.program,ee,q[ee]),this.attributes[q[ee]]=ee);D.linkProgram(this.program),D.deleteShader(pe),D.deleteShader(de),this.fixedUniforms=T(c),this.binderUniforms=b?b.getUniforms(c):[],O.includes("TERRAIN")&&(this.terrainUniforms=(ee=>({u_dem:new o.Uniform1i(ee),u_dem_prev:new o.Uniform1i(ee),u_dem_unpack:new o.Uniform4f(ee),u_dem_tl:new o.Uniform2f(ee),u_dem_scale:new o.Uniform1f(ee),u_dem_tl_prev:new o.Uniform2f(ee),u_dem_scale_prev:new o.Uniform1f(ee),u_dem_size:new o.Uniform1f(ee),u_dem_lerp:new o.Uniform1f(ee),u_exaggeration:new o.Uniform1f(ee),u_depth:new o.Uniform1i(ee),u_depth_size_inv:new o.Uniform2f(ee),u_meter_to_dem:new o.Uniform1f(ee),u_label_plane_matrix_inv:new o.UniformMatrix4f(ee)}))(c)),O.includes("GLOBE")&&(this.globeUniforms=(ee=>({u_tile_tl_up:new o.Uniform3f(ee),u_tile_tr_up:new o.Uniform3f(ee),u_tile_br_up:new o.Uniform3f(ee),u_tile_bl_up:new o.Uniform3f(ee),u_tile_up_scale:new o.Uniform1f(ee)}))(c)),O.includes("FOG")&&(this.fogUniforms=(ee=>({u_fog_matrix:new o.UniformMatrix4f(ee),u_fog_range:new o.Uniform2f(ee),u_fog_color:new o.Uniform4f(ee),u_fog_horizon_blend:new o.Uniform1f(ee),u_fog_temporal_offset:new o.Uniform1f(ee),u_frustum_tl:new o.Uniform3f(ee),u_frustum_tr:new o.Uniform3f(ee),u_frustum_br:new o.Uniform3f(ee),u_frustum_bl:new o.Uniform3f(ee),u_globe_pos:new o.Uniform3f(ee),u_globe_radius:new o.Uniform1f(ee),u_globe_transition:new o.Uniform1f(ee),u_is_globe:new o.Uniform1i(ee),u_viewport:new o.Uniform2f(ee)}))(c))}}setTerrainUniformValues(c,f){if(!this.terrainUniforms)return;const v=this.terrainUniforms;if(!this.failedToCreate){c.program.set(this.program);for(const b in f)v[b]&&v[b].set(this.program,b,f[b])}}setGlobeUniformValues(c,f){if(!this.globeUniforms)return;const v=this.globeUniforms;if(!this.failedToCreate){c.program.set(this.program);for(const b in f)v[b]&&v[b].set(this.program,b,f[b])}}setFogUniformValues(c,f){if(!this.fogUniforms)return;const v=this.fogUniforms;if(!this.failedToCreate){c.program.set(this.program);for(const b in f)v[b].set(this.program,b,f[b])}}draw(c,f,v,b,T,O,D,B,H,q,J,ae,ce,he,de){const pe=c.gl;if(this.failedToCreate)return;c.program.set(this.program),c.setDepthMode(v),c.setStencilMode(b),c.setColorMode(T),c.setCullFace(O);for(const le of Object.keys(this.fixedUniforms))this.fixedUniforms[le].set(this.program,le,D[le]);he&&he.setUniforms(this.program,c,this.binderUniforms,ae,{zoom:ce});const ee={[pe.LINES]:2,[pe.TRIANGLES]:3,[pe.LINE_STRIP]:1}[f];for(const le of J.get()){const ye=le.vaos||(le.vaos={});(ye[B]||(ye[B]=new yS)).bind(c,this,H,he?he.getPaintVertexBuffers():[],q,le.vertexOffset,de||[]),pe.drawElements(f,le.primitiveLength*ee,pe.UNSIGNED_SHORT,le.primitiveOffset*ee*2)}}}function ed(g,c){const f=Math.pow(2,c.tileID.overscaledZ),v=c.tileSize*Math.pow(2,g.transform.tileZoom)/f,b=v*(c.tileID.canonical.x+c.tileID.wrap*f),T=v*c.tileID.canonical.y;return{u_image:0,u_texsize:c.imageAtlasTexture.size,u_tile_units_to_pixels:1/Ge(c,1,g.transform.tileZoom),u_pixel_coord_upper:[b>>16,T>>16],u_pixel_coord_lower:[65535&b,65535&T]}}const P_=o.create(),jm=(g,c,f,v,b,T,O,D,B,H,q)=>{const J=c.style.light,ae=J.properties.get("position"),ce=[ae.x,ae.y,ae.z],he=o.create$1();J.properties.get("anchor")==="viewport"&&(o.fromRotation(he,-c.transform.angle),o.transformMat3(ce,ce,he));const de=J.properties.get("color"),pe=c.transform,ee={u_matrix:g,u_lightpos:ce,u_lightintensity:J.properties.get("intensity"),u_lightcolor:[de.r,de.g,de.b],u_vertical_gradient:+f,u_opacity:v,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:P_,u_merc_center:[0,0],u_up_dir:[0,0,0],u_height_lift:0,u_ao:b,u_edge_radius:T};return pe.projection.name==="globe"&&(ee.u_tile_id=[O.canonical.x,O.canonical.y,1<<O.canonical.z],ee.u_zoom_transition=B,ee.u_inv_rot_matrix=q,ee.u_merc_center=H,ee.u_up_dir=pe.projection.upVector(new o.CanonicalTileID(0,0,0),H[0]*o.EXTENT,H[1]*o.EXTENT),ee.u_height_lift=D),ee},C_=(g,c,f,v,b,T,O,D,B,H,q,J)=>{const ae=jm(g,c,f,v,b,T,O,B,H,q,J),ce={u_height_factor:-Math.pow(2,O.overscaledZ)/D.tileSize/8};return o.extend(ae,ed(c,D),ce)},bl=g=>({u_matrix:g}),zm=(g,c,f)=>o.extend(bl(g),ed(c,f)),vS=(g,c)=>({u_matrix:g,u_world:c}),_S=(g,c,f,v)=>o.extend(zm(g,c,f),{u_world:v}),xS=o.create(),Nm=(g,c,f,v,b,T)=>{const O=g.transform,D=O.projection.name==="globe";let B;if(T.paint.get("circle-pitch-alignment")==="map")if(D){const q=o.globePixelsToTileUnits(O.zoom,c.canonical)*O._pixelsPerMercatorPixel;B=Float32Array.from([q,0,0,q])}else B=O.calculatePixelsToTileUnitsMatrix(f);else B=new Float32Array([O.pixelsToGLUnits[0],0,0,O.pixelsToGLUnits[1]]);const H={u_camera_to_center_distance:O.cameraToCenterDistance,u_matrix:g.translatePosMatrix(c.projMatrix,f,T.paint.get("circle-translate"),T.paint.get("circle-translate-anchor")),u_device_pixel_ratio:o.exported.devicePixelRatio,u_extrude_scale:B,u_inv_rot_matrix:xS,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(D){H.u_inv_rot_matrix=v,H.u_merc_center=b,H.u_tile_id=[c.canonical.x,c.canonical.y,1<<c.canonical.z],H.u_zoom_transition=o.globeToMercatorTransition(O.zoom);const q=b[0]*o.EXTENT,J=b[1]*o.EXTENT;H.u_up_dir=O.projection.upVector(new o.CanonicalTileID(0,0,0),q,J)}return H},Bm=g=>{const c=[];return g.paint.get("circle-pitch-alignment")==="map"&&c.push("PITCH_WITH_MAP"),g.paint.get("circle-pitch-scale")==="map"&&c.push("SCALE_WITH_MAP"),c},$m=(g,c,f,v)=>{const b=o.EXTENT/f.tileSize;return{u_matrix:g,u_camera_to_center_distance:c.getCameraToCenterDistance(v),u_extrude_scale:[c.pixelsToGLUnits[0]/b,c.pixelsToGLUnits[1]/b]}},Mh=(g,c,f=1)=>({u_matrix:g,u_color:c,u_overlay:0,u_overlay_scale:f}),M_=o.create(),I_=(g,c,f,v,b,T,O)=>{const D=g.transform,B=D.projection.name==="globe",H=B?o.globePixelsToTileUnits(D.zoom,c.canonical)*D._pixelsPerMercatorPixel:Ge(f,1,T),q={u_matrix:c.projMatrix,u_extrude_scale:H,u_intensity:O,u_inv_rot_matrix:M_,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(B){q.u_inv_rot_matrix=v,q.u_merc_center=b,q.u_tile_id=[c.canonical.x,c.canonical.y,1<<c.canonical.z],q.u_zoom_transition=o.globeToMercatorTransition(D.zoom);const J=b[0]*o.EXTENT,ae=b[1]*o.EXTENT;q.u_up_dir=D.projection.upVector(new o.CanonicalTileID(0,0,0),J,ae)}return q},bS=(g,c,f,v,b,T,O)=>{const D=g.transform,B=D.calculatePixelsToTileUnitsMatrix(c);return{u_matrix:Fm(g,c,f,v),u_pixels_to_tile_units:B,u_device_pixel_ratio:T,u_units_to_pixels:[1/D.pixelsToGLUnits[0],1/D.pixelsToGLUnits[1]],u_dash_image:0,u_gradient_image:1,u_image_height:b,u_texsize:rd(f)?c.lineAtlasTexture.size:[0,0],u_tile_units_to_pixels:xc(c,g.transform),u_alpha_discard_threshold:0,u_trim_offset:O}},td=(g,c,f,v,b)=>{const T=g.transform;return{u_matrix:Fm(g,c,f,v),u_texsize:c.imageAtlasTexture.size,u_pixels_to_tile_units:T.calculatePixelsToTileUnitsMatrix(c),u_device_pixel_ratio:b,u_image:0,u_tile_units_to_pixels:xc(c,T),u_units_to_pixels:[1/T.pixelsToGLUnits[0],1/T.pixelsToGLUnits[1]],u_alpha_discard_threshold:0}};function xc(g,c){return 1/Ge(g,1,c.tileZoom)}function Fm(g,c,f,v){return g.translatePosMatrix(v||c.tileID.projMatrix,c,f.paint.get("line-translate"),f.paint.get("line-translate-anchor"))}function rd(g){const c=g.paint.get("line-dasharray").value;return c.value||c.kind!=="constant"}const Um=(g,c,f,v,b,T)=>{return{u_matrix:g,u_tl_parent:c,u_scale_parent:f,u_fade_t:v.mix,u_opacity:v.opacity*b.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:b.paint.get("raster-brightness-min"),u_brightness_high:b.paint.get("raster-brightness-max"),u_saturation_factor:(D=b.paint.get("raster-saturation"),D>0?1-1/(1.001-D):-D),u_contrast_factor:(O=b.paint.get("raster-contrast"),O>0?1/(1-O):1+O),u_spin_weights:xa(b.paint.get("raster-hue-rotate")),u_perspective_transform:T};var O,D};function xa(g){g*=Math.PI/180;const c=Math.sin(g),f=Math.cos(g);return[(2*f+1)/3,(-Math.sqrt(3)*c-f+1)/3,(Math.sqrt(3)*c-f+1)/3]}const Ih=o.create(),Vm=(g,c,f,v,b,T,O,D,B,H,q,J,ae,ce,he,de)=>{const pe=b.transform,ee={u_is_size_zoom_constant:+(g==="constant"||g==="source"),u_is_size_feature_constant:+(g==="constant"||g==="camera"),u_size_t:c?c.uSizeT:0,u_size:c?c.uSize:0,u_camera_to_center_distance:pe.cameraToCenterDistance,u_rotate_symbol:+f,u_aspect_ratio:pe.width/pe.height,u_fade_change:b.options.fadeDuration?b.symbolFadeChange:1,u_matrix:T,u_label_plane_matrix:O,u_coord_matrix:D,u_is_text:+B,u_pitch_with_map:+v,u_texsize:H,u_texture:0,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:Ih,u_merc_center:[0,0],u_camera_forward:[0,0,0],u_ecef_origin:[0,0,0],u_tile_matrix:Ih,u_up_vector:[0,-1,0]};return de.name==="globe"&&(ee.u_tile_id=[q.canonical.x,q.canonical.y,1<<q.canonical.z],ee.u_zoom_transition=J,ee.u_inv_rot_matrix=ce,ee.u_merc_center=ae,ee.u_camera_forward=pe._camera.forward(),ee.u_ecef_origin=o.globeECEFOrigin(pe.globeMatrix,q.toUnwrapped()),ee.u_tile_matrix=Float32Array.from(pe.globeMatrix),ee.u_up_vector=he),ee},Oh=(g,c,f,v,b,T,O,D,B,H,q,J,ae,ce,he,de,pe)=>o.extend(Vm(g,c,f,v,b,T,O,D,B,H,J,ae,ce,he,de,pe),{u_gamma_scale:v?b.transform.cameraToCenterDistance*Math.cos(b.terrain?0:b.transform._pitch):1,u_device_pixel_ratio:o.exported.devicePixelRatio,u_is_halo:+q}),O_=(g,c,f,v,b,T,O,D,B,H,q,J,ae,ce,he,de)=>o.extend(Oh(g,c,f,v,b,T,O,D,!0,B,!0,q,J,ae,ce,he,de),{u_texsize_icon:H,u_texture_icon:1}),Gm=(g,c,f)=>({u_matrix:g,u_opacity:c,u_color:f}),wS=(g,c,f,v,b)=>o.extend(function(T,O,D){const B=O.imageManager.getPattern(T.toString()),{width:H,height:q}=O.imageManager.getPixelSize(),J=Math.pow(2,D.tileID.overscaledZ),ae=D.tileSize*Math.pow(2,O.transform.tileZoom)/J,ce=ae*(D.tileID.canonical.x+D.tileID.wrap*J),he=ae*D.tileID.canonical.y;return{u_image:0,u_pattern_tl:B.tl,u_pattern_br:B.br,u_texsize:[H,q],u_pattern_size:B.displaySize,u_tile_units_to_pixels:1/Ge(D,1,O.transform.tileZoom),u_pixel_coord_upper:[ce>>16,he>>16],u_pixel_coord_lower:[65535&ce,65535&he]}}(v,f,b),{u_matrix:g,u_opacity:c}),Wm={fillExtrusion:g=>({u_matrix:new o.UniformMatrix4f(g),u_lightpos:new o.Uniform3f(g),u_lightintensity:new o.Uniform1f(g),u_lightcolor:new o.Uniform3f(g),u_vertical_gradient:new o.Uniform1f(g),u_opacity:new o.Uniform1f(g),u_edge_radius:new o.Uniform1f(g),u_ao:new o.Uniform2f(g),u_tile_id:new o.Uniform3f(g),u_zoom_transition:new o.Uniform1f(g),u_inv_rot_matrix:new o.UniformMatrix4f(g),u_merc_center:new o.Uniform2f(g),u_up_dir:new o.Uniform3f(g),u_height_lift:new o.Uniform1f(g)}),fillExtrusionPattern:g=>({u_matrix:new o.UniformMatrix4f(g),u_lightpos:new o.Uniform3f(g),u_lightintensity:new o.Uniform1f(g),u_lightcolor:new o.Uniform3f(g),u_vertical_gradient:new o.Uniform1f(g),u_height_factor:new o.Uniform1f(g),u_edge_radius:new o.Uniform1f(g),u_ao:new o.Uniform2f(g),u_tile_id:new o.Uniform3f(g),u_zoom_transition:new o.Uniform1f(g),u_inv_rot_matrix:new o.UniformMatrix4f(g),u_merc_center:new o.Uniform2f(g),u_up_dir:new o.Uniform3f(g),u_height_lift:new o.Uniform1f(g),u_image:new o.Uniform1i(g),u_texsize:new o.Uniform2f(g),u_pixel_coord_upper:new o.Uniform2f(g),u_pixel_coord_lower:new o.Uniform2f(g),u_tile_units_to_pixels:new o.Uniform1f(g),u_opacity:new o.Uniform1f(g)}),fill:g=>({u_matrix:new o.UniformMatrix4f(g)}),fillPattern:g=>({u_matrix:new o.UniformMatrix4f(g),u_image:new o.Uniform1i(g),u_texsize:new o.Uniform2f(g),u_pixel_coord_upper:new o.Uniform2f(g),u_pixel_coord_lower:new o.Uniform2f(g),u_tile_units_to_pixels:new o.Uniform1f(g)}),fillOutline:g=>({u_matrix:new o.UniformMatrix4f(g),u_world:new o.Uniform2f(g)}),fillOutlinePattern:g=>({u_matrix:new o.UniformMatrix4f(g),u_world:new o.Uniform2f(g),u_image:new o.Uniform1i(g),u_texsize:new o.Uniform2f(g),u_pixel_coord_upper:new o.Uniform2f(g),u_pixel_coord_lower:new o.Uniform2f(g),u_tile_units_to_pixels:new o.Uniform1f(g)}),circle:g=>({u_camera_to_center_distance:new o.Uniform1f(g),u_extrude_scale:new o.UniformMatrix2f(g),u_device_pixel_ratio:new o.Uniform1f(g),u_matrix:new o.UniformMatrix4f(g),u_inv_rot_matrix:new o.UniformMatrix4f(g),u_merc_center:new o.Uniform2f(g),u_tile_id:new o.Uniform3f(g),u_zoom_transition:new o.Uniform1f(g),u_up_dir:new o.Uniform3f(g)}),collisionBox:g=>({u_matrix:new o.UniformMatrix4f(g),u_camera_to_center_distance:new o.Uniform1f(g),u_extrude_scale:new o.Uniform2f(g)}),collisionCircle:g=>({u_matrix:new o.UniformMatrix4f(g),u_inv_matrix:new o.UniformMatrix4f(g),u_camera_to_center_distance:new o.Uniform1f(g),u_viewport_size:new o.Uniform2f(g)}),debug:g=>({u_color:new o.UniformColor(g),u_matrix:new o.UniformMatrix4f(g),u_overlay:new o.Uniform1i(g),u_overlay_scale:new o.Uniform1f(g)}),clippingMask:g=>({u_matrix:new o.UniformMatrix4f(g)}),heatmap:g=>({u_extrude_scale:new o.Uniform1f(g),u_intensity:new o.Uniform1f(g),u_matrix:new o.UniformMatrix4f(g),u_inv_rot_matrix:new o.UniformMatrix4f(g),u_merc_center:new o.Uniform2f(g),u_tile_id:new o.Uniform3f(g),u_zoom_transition:new o.Uniform1f(g),u_up_dir:new o.Uniform3f(g)}),heatmapTexture:g=>({u_image:new o.Uniform1i(g),u_color_ramp:new o.Uniform1i(g),u_opacity:new o.Uniform1f(g)}),hillshade:g=>({u_matrix:new o.UniformMatrix4f(g),u_image:new o.Uniform1i(g),u_latrange:new o.Uniform2f(g),u_light:new o.Uniform2f(g),u_shadow:new o.UniformColor(g),u_highlight:new o.UniformColor(g),u_accent:new o.UniformColor(g)}),hillshadePrepare:g=>({u_matrix:new o.UniformMatrix4f(g),u_image:new o.Uniform1i(g),u_dimension:new o.Uniform2f(g),u_zoom:new o.Uniform1f(g),u_unpack:new o.Uniform4f(g)}),line:g=>({u_matrix:new o.UniformMatrix4f(g),u_pixels_to_tile_units:new o.UniformMatrix2f(g),u_device_pixel_ratio:new o.Uniform1f(g),u_units_to_pixels:new o.Uniform2f(g),u_dash_image:new o.Uniform1i(g),u_gradient_image:new o.Uniform1i(g),u_image_height:new o.Uniform1f(g),u_texsize:new o.Uniform2f(g),u_tile_units_to_pixels:new o.Uniform1f(g),u_alpha_discard_threshold:new o.Uniform1f(g),u_trim_offset:new o.Uniform2f(g)}),linePattern:g=>({u_matrix:new o.UniformMatrix4f(g),u_texsize:new o.Uniform2f(g),u_pixels_to_tile_units:new o.UniformMatrix2f(g),u_device_pixel_ratio:new o.Uniform1f(g),u_image:new o.Uniform1i(g),u_units_to_pixels:new o.Uniform2f(g),u_tile_units_to_pixels:new o.Uniform1f(g),u_alpha_discard_threshold:new o.Uniform1f(g)}),raster:g=>({u_matrix:new o.UniformMatrix4f(g),u_tl_parent:new o.Uniform2f(g),u_scale_parent:new o.Uniform1f(g),u_fade_t:new o.Uniform1f(g),u_opacity:new o.Uniform1f(g),u_image0:new o.Uniform1i(g),u_image1:new o.Uniform1i(g),u_brightness_low:new o.Uniform1f(g),u_brightness_high:new o.Uniform1f(g),u_saturation_factor:new o.Uniform1f(g),u_contrast_factor:new o.Uniform1f(g),u_spin_weights:new o.Uniform3f(g),u_perspective_transform:new o.Uniform2f(g)}),symbolIcon:g=>({u_is_size_zoom_constant:new o.Uniform1i(g),u_is_size_feature_constant:new o.Uniform1i(g),u_size_t:new o.Uniform1f(g),u_size:new o.Uniform1f(g),u_camera_to_center_distance:new o.Uniform1f(g),u_rotate_symbol:new o.Uniform1i(g),u_aspect_ratio:new o.Uniform1f(g),u_fade_change:new o.Uniform1f(g),u_matrix:new o.UniformMatrix4f(g),u_label_plane_matrix:new o.UniformMatrix4f(g),u_coord_matrix:new o.UniformMatrix4f(g),u_is_text:new o.Uniform1i(g),u_pitch_with_map:new o.Uniform1i(g),u_texsize:new o.Uniform2f(g),u_tile_id:new o.Uniform3f(g),u_zoom_transition:new o.Uniform1f(g),u_inv_rot_matrix:new o.UniformMatrix4f(g),u_merc_center:new o.Uniform2f(g),u_camera_forward:new o.Uniform3f(g),u_tile_matrix:new o.UniformMatrix4f(g),u_up_vector:new o.Uniform3f(g),u_ecef_origin:new o.Uniform3f(g),u_texture:new o.Uniform1i(g)}),symbolSDF:g=>({u_is_size_zoom_constant:new o.Uniform1i(g),u_is_size_feature_constant:new o.Uniform1i(g),u_size_t:new o.Uniform1f(g),u_size:new o.Uniform1f(g),u_camera_to_center_distance:new o.Uniform1f(g),u_rotate_symbol:new o.Uniform1i(g),u_aspect_ratio:new o.Uniform1f(g),u_fade_change:new o.Uniform1f(g),u_matrix:new o.UniformMatrix4f(g),u_label_plane_matrix:new o.UniformMatrix4f(g),u_coord_matrix:new o.UniformMatrix4f(g),u_is_text:new o.Uniform1i(g),u_pitch_with_map:new o.Uniform1i(g),u_texsize:new o.Uniform2f(g),u_texture:new o.Uniform1i(g),u_gamma_scale:new o.Uniform1f(g),u_device_pixel_ratio:new o.Uniform1f(g),u_tile_id:new o.Uniform3f(g),u_zoom_transition:new o.Uniform1f(g),u_inv_rot_matrix:new o.UniformMatrix4f(g),u_merc_center:new o.Uniform2f(g),u_camera_forward:new o.Uniform3f(g),u_tile_matrix:new o.UniformMatrix4f(g),u_up_vector:new o.Uniform3f(g),u_ecef_origin:new o.Uniform3f(g),u_is_halo:new o.Uniform1i(g)}),symbolTextAndIcon:g=>({u_is_size_zoom_constant:new o.Uniform1i(g),u_is_size_feature_constant:new o.Uniform1i(g),u_size_t:new o.Uniform1f(g),u_size:new o.Uniform1f(g),u_camera_to_center_distance:new o.Uniform1f(g),u_rotate_symbol:new o.Uniform1i(g),u_aspect_ratio:new o.Uniform1f(g),u_fade_change:new o.Uniform1f(g),u_matrix:new o.UniformMatrix4f(g),u_label_plane_matrix:new o.UniformMatrix4f(g),u_coord_matrix:new o.UniformMatrix4f(g),u_is_text:new o.Uniform1i(g),u_pitch_with_map:new o.Uniform1i(g),u_texsize:new o.Uniform2f(g),u_texsize_icon:new o.Uniform2f(g),u_texture:new o.Uniform1i(g),u_texture_icon:new o.Uniform1i(g),u_gamma_scale:new o.Uniform1f(g),u_device_pixel_ratio:new o.Uniform1f(g),u_is_halo:new o.Uniform1i(g)}),background:g=>({u_matrix:new o.UniformMatrix4f(g),u_opacity:new o.Uniform1f(g),u_color:new o.UniformColor(g)}),backgroundPattern:g=>({u_matrix:new o.UniformMatrix4f(g),u_opacity:new o.Uniform1f(g),u_image:new o.Uniform1i(g),u_pattern_tl:new o.Uniform2f(g),u_pattern_br:new o.Uniform2f(g),u_texsize:new o.Uniform2f(g),u_pattern_size:new o.Uniform2f(g),u_pixel_coord_upper:new o.Uniform2f(g),u_pixel_coord_lower:new o.Uniform2f(g),u_tile_units_to_pixels:new o.Uniform1f(g)}),terrainRaster:km,terrainDepth:km,skybox:g=>({u_matrix:new o.UniformMatrix4f(g),u_sun_direction:new o.Uniform3f(g),u_cubemap:new o.Uniform1i(g),u_opacity:new o.Uniform1f(g),u_temporal_offset:new o.Uniform1f(g)}),skyboxGradient:g=>({u_matrix:new o.UniformMatrix4f(g),u_color_ramp:new o.Uniform1i(g),u_center_direction:new o.Uniform3f(g),u_radius:new o.Uniform1f(g),u_opacity:new o.Uniform1f(g),u_temporal_offset:new o.Uniform1f(g)}),skyboxCapture:g=>({u_matrix_3f:new o.UniformMatrix3f(g),u_sun_direction:new o.Uniform3f(g),u_sun_intensity:new o.Uniform1f(g),u_color_tint_r:new o.Uniform4f(g),u_color_tint_m:new o.Uniform4f(g),u_luminance:new o.Uniform1f(g)}),globeRaster:g=>({u_proj_matrix:new o.UniformMatrix4f(g),u_globe_matrix:new o.UniformMatrix4f(g),u_normalize_matrix:new o.UniformMatrix4f(g),u_merc_matrix:new o.UniformMatrix4f(g),u_zoom_transition:new o.Uniform1f(g),u_merc_center:new o.Uniform2f(g),u_image0:new o.Uniform1i(g),u_grid_matrix:new o.UniformMatrix3f(g),u_skirt_height:new o.Uniform1f(g),u_frustum_tl:new o.Uniform3f(g),u_frustum_tr:new o.Uniform3f(g),u_frustum_br:new o.Uniform3f(g),u_frustum_bl:new o.Uniform3f(g),u_globe_pos:new o.Uniform3f(g),u_globe_radius:new o.Uniform1f(g),u_viewport:new o.Uniform2f(g)}),globeAtmosphere:g=>({u_frustum_tl:new o.Uniform3f(g),u_frustum_tr:new o.Uniform3f(g),u_frustum_br:new o.Uniform3f(g),u_frustum_bl:new o.Uniform3f(g),u_horizon:new o.Uniform1f(g),u_transition:new o.Uniform1f(g),u_fadeout_range:new o.Uniform1f(g),u_color:new o.Uniform4f(g),u_high_color:new o.Uniform4f(g),u_space_color:new o.Uniform4f(g),u_star_intensity:new o.Uniform1f(g),u_star_density:new o.Uniform1f(g),u_star_size:new o.Uniform1f(g),u_temporal_offset:new o.Uniform1f(g),u_horizon_angle:new o.Uniform1f(g),u_rotation_matrix:new o.UniformMatrix4f(g)})};let kh;function nd(g,c,f,v,b,T,O){const D=g.context,B=D.gl,H=g.transform,q=g.useProgram("collisionBox"),J=[];let ae=0,ce=0;for(let _e=0;_e<v.length;_e++){const Oe=v[_e],De=c.getTile(Oe),ke=De.getBucket(f);if(!ke)continue;const Ve=To(Oe,ke,H);let Fe=Ve;b[0]===0&&b[1]===0||(Fe=g.translatePosMatrix(Ve,De,b,T));const Ke=O?ke.textCollisionBox:ke.iconCollisionBox,xt=ke.collisionCircleArray;if(xt.length>0){const He=o.create(),ct=Fe;o.mul(He,ke.placementInvProjMatrix,H.glCoordMatrix),o.mul(He,He,ke.placementViewportMatrix),J.push({circleArray:xt,circleOffset:ce,transform:ct,invTransform:He,projection:ke.getProjection()}),ae+=xt.length/4,ce=ae}Ke&&(g.terrain&&g.terrain.setupElevationDraw(De,q),q.draw(D,B.LINES,o.DepthMode.disabled,o.StencilMode.disabled,g.colorModeForRenderPass(),o.CullFaceMode.disabled,$m(Fe,H,De,ke.getProjection()),f.id,Ke.layoutVertexBuffer,Ke.indexBuffer,Ke.segments,null,H.zoom,null,[Ke.collisionVertexBuffer,Ke.collisionVertexBufferExt]))}if(!O||!J.length)return;const he=g.useProgram("collisionCircle"),de=new o.StructArrayLayout2f1f2i16;de.resize(4*ae),de._trim();let pe=0;for(const _e of J)for(let Oe=0;Oe<_e.circleArray.length/4;Oe++){const De=4*Oe,ke=_e.circleArray[De+0],Ve=_e.circleArray[De+1],Fe=_e.circleArray[De+2],Ke=_e.circleArray[De+3];de.emplace(pe++,ke,Ve,Fe,Ke,0),de.emplace(pe++,ke,Ve,Fe,Ke,1),de.emplace(pe++,ke,Ve,Fe,Ke,2),de.emplace(pe++,ke,Ve,Fe,Ke,3)}(!kh||kh.length<2*ae)&&(kh=function(_e){const Oe=2*_e,De=new o.StructArrayLayout3ui6;De.resize(Oe),De._trim();for(let ke=0;ke<Oe;ke++){const Ve=6*ke;De.uint16[Ve+0]=4*ke+0,De.uint16[Ve+1]=4*ke+1,De.uint16[Ve+2]=4*ke+2,De.uint16[Ve+3]=4*ke+2,De.uint16[Ve+4]=4*ke+3,De.uint16[Ve+5]=4*ke+0}return De}(ae));const ee=D.createIndexBuffer(kh,!0),le=D.createVertexBuffer(de,o.collisionCircleLayout.members,!0);for(const _e of J){const Oe={u_matrix:_e.transform,u_inv_matrix:_e.invTransform,u_camera_to_center_distance:(ye=H).getCameraToCenterDistance(_e.projection),u_viewport_size:[ye.width,ye.height]};he.draw(D,B.TRIANGLES,o.DepthMode.disabled,o.StencilMode.disabled,g.colorModeForRenderPass(),o.CullFaceMode.disabled,Oe,f.id,le,ee,o.SegmentVector.simpleSegment(0,2*_e.circleOffset,_e.circleArray.length,_e.circleArray.length/2),null,H.zoom)}var ye;le.destroy(),ee.destroy()}const k_=o.create();function qm({width:g,height:c,anchor:f,textOffset:v,textScale:b},T){const{horizontalAlign:O,verticalAlign:D}=o.getAnchorAlignment(f),B=-(O-.5)*g,H=-(D-.5)*c,q=o.evaluateVariableOffset(f,v);return new o.Point((B/b+q[0])*T,(H/b+q[1])*T)}function SS(g,c,f,v,b,T,O,D,B,H,q){const J=g.text.placedSymbolArray,ae=g.text.dynamicLayoutVertexArray,ce=g.icon.dynamicLayoutVertexArray,he={},de=g.getProjection(),pe=fn(D,de,T),ee=T.elevation,le=de.upVectorScale(D.canonical,T.center.lat,T.worldSize).metersToTile;ae.clear();for(let ye=0;ye<J.length;ye++){const _e=J.get(ye),{tileAnchorX:Oe,tileAnchorY:De,numGlyphs:ke}=_e,Ve=_e.hidden||!_e.crossTileID||g.allowVerticalPlacement&&!_e.placedOrientation?null:v[_e.crossTileID];if(Ve){let Fe=0,Ke=0,xt=0;if(ee){const St=ee?ee.getAtTileOffset(D,Oe,De):0,[Ht,ir,Ft]=de.upVector(D.canonical,Oe,De);Fe=St*Ht*le,Ke=St*ir*le,xt=St*Ft*le}let[He,ct,Je,_t]=ci(_e.projectedAnchorX+Fe,_e.projectedAnchorY+Ke,_e.projectedAnchorZ+xt,f?pe:O);const Ze=v_(T.getCameraToCenterDistance(de),_t);let st=b.evaluateSizeForFeature(g.textSizeData,H,_e)*Ze/o.ONE_EM;f&&(st*=g.tilePixelRatio/B);const wt=qm(Ve,st);f?({x:He,y:ct,z:Je}=de.projectTilePoint(Oe+wt.x,De+wt.y,D.canonical),[He,ct,Je]=ci(He+Fe,ct+Ke,Je+xt,O)):(c&&wt._rotate(-T.angle),He+=wt.x,ct+=wt.y,Je=0);const pt=g.allowVerticalPlacement&&_e.placedOrientation===o.WritingMode.vertical?Math.PI/2:0;for(let St=0;St<ke;St++)o.addDynamicAttributes(ae,He,ct,Je,pt);q&&_e.associatedIconIndex>=0&&(he[_e.associatedIconIndex]={x:He,y:ct,z:Je,angle:pt})}else qo(ke,ae)}if(q){ce.clear();const ye=g.icon.placedSymbolArray;for(let _e=0;_e<ye.length;_e++){const Oe=ye.get(_e),{numGlyphs:De}=Oe,ke=he[_e];if(Oe.hidden||!ke)qo(De,ce);else{const{x:Ve,y:Fe,z:Ke,angle:xt}=ke;for(let He=0;He<De;He++)o.addDynamicAttributes(ce,Ve,Fe,Ke,xt)}}g.icon.dynamicLayoutVertexBuffer.updateData(ce)}g.text.dynamicLayoutVertexBuffer.updateData(ae)}function Hm(g,c,f){return f.iconsInText&&c?"symbolTextAndIcon":g?"symbolSDF":"symbolIcon"}function D_(g,c,f,v,b,T,O,D,B,H,q,J){const ae=g.context,ce=ae.gl,he=g.transform,de=D==="map",pe=B==="map",ee=de&&f.layout.get("symbol-placement")!=="point",le=de&&!pe&&!ee,ye=f.layout.get("symbol-sort-key").constantOr(1)!==void 0;let _e=!1;const Oe=g.depthModeForSublayer(0,o.DepthMode.ReadOnly),De=[o.mercatorXfromLng(he.center.lng),o.mercatorYfromLat(he.center.lat)],ke=f.layout.get("text-variable-anchor"),Ve=he.projection.name==="globe",Fe=[],Ke=[0,-1,0];let xt=Ke;!Ve&&!he.mercatorFromTransition||de||(xt=function(He){const ct=He._camera.getWorldToCamera(He.worldSize,1),Je=o.multiply([],ct,He.globeMatrix);o.invert(Je,Je);const _t=[0,0,0],Ze=[0,1,0,0];return o.transformMat4$1(Ze,Ze,Je),_t[0]=Ze[0],_t[1]=Ze[1],_t[2]=Ze[2],o.normalize(_t,_t),_t}(he));for(const He of v){const ct=c.getTile(He),Je=ct.getBucket(f);if(!Je||Je.projection.name==="mercator"&&Ve)continue;const _t=b?Je.text:Je.icon;if(!_t||Je.fullyClipped||!_t.segments.get().length)continue;const Ze=_t.programConfigurations.get(f.id),st=b||Je.sdfIcons,wt=b?Je.textSizeData:Je.iconSizeData,pt=pe||he.pitch!==0,St=o.evaluateSizeForZoom(wt,he.zoom);let Ht,ir,Ft,Qt,br=[0,0],yr=null;if(b)ir=ct.glyphAtlasTexture,Ft=ce.LINEAR,Ht=ct.glyphAtlasTexture.size,Je.iconsInText&&(br=ct.imageAtlasTexture.size,yr=ct.imageAtlasTexture,Qt=pt||g.options.rotating||g.options.zooming||wt.kind==="composite"||wt.kind==="camera"?ce.LINEAR:ce.NEAREST);else{const ss=f.layout.get("icon-size").constantOr(0)!==1||Je.iconsNeedLinear;ir=ct.imageAtlasTexture,Ft=st||g.options.rotating||g.options.zooming||ss||pt?ce.LINEAR:ce.NEAREST,Ht=ct.imageAtlasTexture.size}const Gt=Je.projection.name==="globe",Nr=Gt?xt:Ke,Wr=Gt?o.globeToMercatorTransition(he.zoom):0,qr=fn(He,Je.getProjection(),he),Hr=he.calculatePixelsToTileUnitsMatrix(ct),Mi=it(qr,ct.tileID.canonical,pe,de,he,Je.getProjection(),Hr),di=g.terrain&&pe&&ee?o.invert(o.create(),Mi):k_,Mo=Bn(qr,ct.tileID.canonical,pe,de,he,Je.getProjection(),Hr),wa=ke&&Je.hasTextData(),pn=f.layout.get("icon-text-fit")!=="none"&&wa&&Je.hasIconData();if(ee){const ss=he.elevation,Bs=ss?ss.getAtTileOffsetFunc(He,he.center.lat,he.worldSize,Je.getProjection()):null,Al=Qa(qr,ct.tileID.canonical,pe,de,he,Je.getProjection(),Hr);_m(Je,qr,g,b,Al,Mo,pe,H,Bs,He)}const Xr=ee||b&&ke||pn,kr=g.translatePosMatrix(qr,ct,T,O),$n=Xr?k_:Mi,Ni=g.translatePosMatrix(Mo,ct,T,O,!0),cn=Je.getProjection().createInversionMatrix(he,He.canonical),Zi=[];g.terrainRenderModeElevated()&&pe&&Zi.push("PITCH_WITH_MAP_TERRAIN"),Gt&&Zi.push("PROJECTION_GLOBE_VIEW"),Xr&&Zi.push("PROJECTED_POS_ON_VIEWPORT");const Xh=st&&f.paint.get(b?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let Tl;Tl=st?Je.iconsInText?O_(wt.kind,St,le,pe,g,kr,$n,Ni,Ht,br,He,Wr,De,cn,Nr,Je.getProjection()):Oh(wt.kind,St,le,pe,g,kr,$n,Ni,b,Ht,!0,He,Wr,De,cn,Nr,Je.getProjection()):Vm(wt.kind,St,le,pe,g,kr,$n,Ni,b,Ht,He,Wr,De,cn,Nr,Je.getProjection());const pd={program:g.useProgram(Hm(st,b,Je),Ze,Zi),buffers:_t,uniformValues:Tl,atlasTexture:ir,atlasTextureIcon:yr,atlasInterpolation:Ft,atlasInterpolationIcon:Qt,isSDF:st,hasHalo:Xh,tile:ct,labelPlaneMatrixInv:di};if(ye&&Je.canOverlap){_e=!0;const ss=_t.segments.get();for(const Bs of ss)Fe.push({segments:new o.SegmentVector([Bs]),sortKey:Bs.sortKey,state:pd})}else Fe.push({segments:_t.segments,sortKey:0,state:pd})}_e&&Fe.sort((He,ct)=>He.sortKey-ct.sortKey);for(const He of Fe){const ct=He.state;if(g.terrain&&g.terrain.setupElevationDraw(ct.tile,ct.program,{useDepthForOcclusion:!Ve,labelPlaneMatrixInv:ct.labelPlaneMatrixInv}),ae.activeTexture.set(ce.TEXTURE0),ct.atlasTexture.bind(ct.atlasInterpolation,ce.CLAMP_TO_EDGE),ct.atlasTextureIcon&&(ae.activeTexture.set(ce.TEXTURE1),ct.atlasTextureIcon&&ct.atlasTextureIcon.bind(ct.atlasInterpolationIcon,ce.CLAMP_TO_EDGE)),ct.isSDF){const Je=ct.uniformValues;ct.hasHalo&&(Je.u_is_halo=1,id(ct.buffers,He.segments,f,g,ct.program,Oe,q,J,Je)),Je.u_is_halo=0}id(ct.buffers,He.segments,f,g,ct.program,Oe,q,J,ct.uniformValues)}}function id(g,c,f,v,b,T,O,D,B){const H=v.context,q=[g.dynamicLayoutVertexBuffer,g.opacityVertexBuffer,g.globeExtVertexBuffer];b.draw(H,H.gl.TRIANGLES,T,O,D,o.CullFaceMode.disabled,B,f.id,g.layoutVertexBuffer,g.indexBuffer,c,f.paint,v.transform.zoom,g.programConfigurations.get(f.id),q)}function R_(g,c,f,v,b,T,O){const D=g.context.gl,B=f.paint.get("fill-pattern"),H=B&&B.constantOr(1);let q,J,ae,ce,he;O?(J=H&&!f.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",q=D.LINES):(J=H?"fillPattern":"fill",q=D.TRIANGLES);for(const de of v){const pe=c.getTile(de);if(H&&!pe.patternsLoaded())continue;const ee=pe.getBucket(f);if(!ee)continue;g.prepareDrawTile();const le=ee.programConfigurations.get(f.id),ye=g.useProgram(J,le);H&&(g.context.activeTexture.set(D.TEXTURE0),pe.imageAtlasTexture.bind(D.LINEAR,D.CLAMP_TO_EDGE),le.updatePaintBuffers());const _e=B.constantOr(null);if(_e&&pe.imageAtlas){const De=pe.imageAtlas.patternPositions[_e.toString()];De&&le.setConstantPatternPositions(De)}const Oe=g.translatePosMatrix(de.projMatrix,pe,f.paint.get("fill-translate"),f.paint.get("fill-translate-anchor"));if(O){ce=ee.indexBuffer2,he=ee.segments2;const De=g.terrain&&g.terrain.renderingToTexture?g.terrain.drapeBufferSize:[D.drawingBufferWidth,D.drawingBufferHeight];ae=J==="fillOutlinePattern"&&H?_S(Oe,g,pe,De):vS(Oe,De)}else ce=ee.indexBuffer,he=ee.segments,ae=H?zm(Oe,g,pe):bl(Oe);g.prepareDrawProgram(g.context,ye,de.toUnwrapped()),ye.draw(g.context,q,b,g.stencilModeForClipping(de),T,o.CullFaceMode.disabled,ae,f.id,ee.layoutVertexBuffer,ce,he,f.paint,g.transform.zoom,le)}}function Dh(g,c,f,v,b,T,O){const D=g.context,B=D.gl,H=g.transform,q=f.paint.get("fill-extrusion-pattern"),J=q.constantOr(1),ae=f.paint.get("fill-extrusion-opacity"),ce=[f.paint.get("fill-extrusion-ambient-occlusion-intensity"),f.paint.get("fill-extrusion-ambient-occlusion-radius")],he=f.layout.get("fill-extrusion-edge-radius"),de=he>0&&!f.paint.get("fill-extrusion-rounded-roof"),pe=de?0:he,ee=H.projection.name==="globe"?o.fillExtrusionHeightLift():0,le=H.projection.name==="globe",ye=le?o.globeToMercatorTransition(H.zoom):0,_e=[o.mercatorXfromLng(H.center.lng),o.mercatorYfromLat(H.center.lat)],Oe=[];le&&Oe.push("PROJECTION_GLOBE_VIEW"),ce[0]>0&&Oe.push("FAUX_AO"),de&&Oe.push("ZERO_ROOF_RADIUS");for(const De of v){const ke=c.getTile(De),Ve=ke.getBucket(f);if(!Ve||Ve.projection.name!==H.projection.name)continue;const Fe=Ve.programConfigurations.get(f.id),Ke=g.useProgram(J?"fillExtrusionPattern":"fillExtrusion",Fe,Oe);if(g.terrain){const st=g.terrain;if(g.style.terrainSetForDrapingOnly())st.setupElevationDraw(ke,Ke,{useMeterToDem:!0});else{if(!Ve.enableTerrain)continue;if(st.setupElevationDraw(ke,Ke,{useMeterToDem:!0}),L_(D,c,De,Ve,f,st),!Ve.centroidVertexBuffer){const wt=Ke.attributes.a_centroid_pos;wt!==void 0&&B.vertexAttrib2f(wt,0,0)}}}J&&(g.context.activeTexture.set(B.TEXTURE0),ke.imageAtlasTexture.bind(B.LINEAR,B.CLAMP_TO_EDGE),Fe.updatePaintBuffers());const xt=q.constantOr(null);if(xt&&ke.imageAtlas){const st=ke.imageAtlas.patternPositions[xt.toString()];st&&Fe.setConstantPatternPositions(st)}const He=g.translatePosMatrix(De.projMatrix,ke,f.paint.get("fill-extrusion-translate"),f.paint.get("fill-extrusion-translate-anchor")),ct=H.projection.createInversionMatrix(H,De.canonical),Je=f.paint.get("fill-extrusion-vertical-gradient"),_t=J?C_(He,g,Je,ae,ce,pe,De,ke,ee,ye,_e,ct):jm(He,g,Je,ae,ce,pe,De,ee,ye,_e,ct);g.prepareDrawProgram(D,Ke,De.toUnwrapped());const Ze=[];g.terrain&&Ze.push(Ve.centroidVertexBuffer),le&&Ze.push(Ve.layoutVertexExtBuffer),Ke.draw(D,D.gl.TRIANGLES,b,T,O,o.CullFaceMode.backCCW,_t,f.id,Ve.layoutVertexBuffer,Ve.indexBuffer,Ve.segments,f.paint,g.transform.zoom,Fe,Ze)}}function L_(g,c,f,v,b,T){const O=[ee=>{let le=ee.canonical.x-1,ye=ee.wrap;return le<0&&(le=(1<<ee.canonical.z)-1,ye--),new o.OverscaledTileID(ee.overscaledZ,ye,ee.canonical.z,le,ee.canonical.y)},ee=>{let le=ee.canonical.x+1,ye=ee.wrap;return le===1<<ee.canonical.z&&(le=0,ye++),new o.OverscaledTileID(ee.overscaledZ,ye,ee.canonical.z,le,ee.canonical.y)},ee=>new o.OverscaledTileID(ee.overscaledZ,ee.wrap,ee.canonical.z,ee.canonical.x,(ee.canonical.y===0?1<<ee.canonical.z:ee.canonical.y)-1),ee=>new o.OverscaledTileID(ee.overscaledZ,ee.wrap,ee.canonical.z,ee.canonical.x,ee.canonical.y===(1<<ee.canonical.z)-1?0:ee.canonical.y+1)],D=ee=>{const le=c.getSource().minzoom,ye=Oe=>{const De=c.getTileByID(Oe);if(De&&De.hasData())return De.getBucket(b)},_e=[0,-1,1];for(const Oe of _e){if(ee.overscaledZ+Oe<le)continue;const De=ye(ee.calculateScaledKey(ee.overscaledZ+Oe));if(De)return De}},B=[0,0,0],H=(ee,le)=>(B[0]=Math.min(ee.min.y,le.min.y),B[1]=Math.max(ee.max.y,le.max.y),B[2]=o.EXTENT-le.min.x>ee.max.x?le.min.x-o.EXTENT:ee.max.x,B),q=(ee,le)=>(B[0]=Math.min(ee.min.x,le.min.x),B[1]=Math.max(ee.max.x,le.max.x),B[2]=o.EXTENT-le.min.y>ee.max.y?le.min.y-o.EXTENT:ee.max.y,B),J=[(ee,le)=>H(ee,le),(ee,le)=>H(le,ee),(ee,le)=>q(ee,le),(ee,le)=>q(le,ee)],ae=new o.Point(0,0);let ce,he,de;const pe=(ee,le,ye,_e,Oe)=>{const De=[[_e?ye:ee,_e?ee:ye,0],[_e?ye:le,_e?le:ye,0]],ke=Oe<0?o.EXTENT+Oe:Oe,Ve=[_e?ke:(ee+le)/2,_e?(ee+le)/2:ke,0];return ye===0&&Oe<0||ye!==0&&Oe>0?T.getForTilePoints(de,[Ve],!0,he):De.push(Ve),T.getForTilePoints(f,De,!0,ce),Math.max(De[0][2],De[1][2],Ve[2])/T.exaggeration()};for(let ee=0;ee<4;ee++){const le=(ee<2?1:5)-ee,ye=v.borders[ee];if(ye.length===0)continue;const _e=de=O[ee](f),Oe=D(_e);if(!(Oe&&Oe instanceof o.FillExtrusionBucket&&Oe.enableTerrain)||v.borderDoneWithNeighborZ[ee]===Oe.canonical.z&&Oe.borderDoneWithNeighborZ[le]===v.canonical.z||(he=T.findDEMTileFor(_e),!he||!he.dem))continue;if(!ce){const Fe=T.findDEMTileFor(f);if(!Fe||!Fe.dem)return;ce=Fe}const De=Oe.borders[le];let ke=0;const Ve=Oe.borderDoneWithNeighborZ[le]!==v.canonical.z;if(v.canonical.z===Oe.canonical.z){for(let Fe=0;Fe<ye.length;Fe++){const Ke=v.featuresOnBorder[ye[Fe]],xt=Ke.borders[ee];let He;for(;ke<De.length&&(He=Oe.featuresOnBorder[De[ke]],!(He.borders[le][1]>xt[0]+3));)Ve&&Oe.encodeCentroid(void 0,He,!1),ke++;if(He&&ke<De.length){const ct=ke;let Je=0;for(;!(He.borders[le][0]>xt[1]-3)&&(Je++,++ke!==De.length);)He=Oe.featuresOnBorder[De[ke]];if(He=Oe.featuresOnBorder[De[ct]],Ke.intersectsCount()>1||He.intersectsCount()>1||Je!==1){Je!==1&&(ke=ct),v.encodeCentroid(void 0,Ke,!1),Ve&&Oe.encodeCentroid(void 0,He,!1);continue}const _t=J[ee](Ke,He),Ze=ee%2?o.EXTENT-1:0;ae.x=pe(_t[0],Math.min(o.EXTENT-1,_t[1]),Ze,ee<2,_t[2]),ae.y=0,v.encodeCentroid(ae,Ke,!1),Ve&&Oe.encodeCentroid(ae,He,!1)}else v.encodeCentroid(void 0,Ke,!1)}v.borderDoneWithNeighborZ[ee]=Oe.canonical.z,v.needsCentroidUpdate=!0,Ve&&(Oe.borderDoneWithNeighborZ[le]=v.canonical.z,Oe.needsCentroidUpdate=!0)}else{for(const Fe of ye)v.encodeCentroid(void 0,v.featuresOnBorder[Fe],!1);if(Ve){for(const Fe of De)Oe.encodeCentroid(void 0,Oe.featuresOnBorder[Fe],!1);Oe.borderDoneWithNeighborZ[le]=v.canonical.z,Oe.needsCentroidUpdate=!0}v.borderDoneWithNeighborZ[ee]=Oe.canonical.z,v.needsCentroidUpdate=!0}}(v.needsCentroidUpdate||!v.centroidVertexBuffer&&v.centroidVertexArray.length!==0)&&v.uploadCentroid(g)}const bc=new o.Color(1,0,0,1),ES=new o.Color(0,1,0,1),TS=new o.Color(0,0,1,1),AS=new o.Color(1,0,1,1),PS=new o.Color(0,1,1,1);function CS(g,c,f){const v=g.context,b=g.transform,T=v.gl,O=b.projection.name==="globe",D=O?["PROJECTION_GLOBE_VIEW"]:null;let B=f.projMatrix;if(O&&o.globeToMercatorTransition(b.zoom)>0){const Ke=o.transitionTileAABBinECEF(f.canonical,b),xt=o.globeDenormalizeECEF(Ke);B=o.multiply(new Float32Array(16),b.globeMatrix,xt),o.multiply(B,b.projMatrix,B)}const H=g.useProgram("debug",null,D),q=c.getTileByID(f.key);g.terrain&&g.terrain.setupElevationDraw(q,H);const J=o.DepthMode.disabled,ae=o.StencilMode.disabled,ce=g.colorModeForRenderPass(),he="$debug";v.activeTexture.set(T.TEXTURE0),g.emptyTexture.bind(T.LINEAR,T.CLAMP_TO_EDGE),O?q._makeGlobeTileDebugBuffers(g.context,b):q._makeDebugTileBoundsBuffers(g.context,b.projection);const de=q._tileDebugBuffer||g.debugBuffer,pe=q._tileDebugIndexBuffer||g.debugIndexBuffer,ee=q._tileDebugSegments||g.debugSegments;H.draw(v,T.LINE_STRIP,J,ae,ce,o.CullFaceMode.disabled,Mh(B,o.Color.red),he,de,pe,ee,null,null,null,[q._globeTileDebugBorderBuffer]);const le=q.latestRawTileData,ye=Math.floor((le&&le.byteLength||0)/1024),_e=c.getTile(f).tileSize,Oe=512/Math.min(_e,512)*(f.overscaledZ/b.zoom)*.5;let De=f.canonical.toString();f.overscaledZ!==f.canonical.z&&(De+=` => ${f.overscaledZ}`),De+=` ${ye}kb`,function(Ke,xt){Ke.initDebugOverlayCanvas();const He=Ke.debugOverlayCanvas,ct=Ke.context.gl,Je=Ke.debugOverlayCanvas.getContext("2d");Je.clearRect(0,0,He.width,He.height),Je.shadowColor="white",Je.shadowBlur=2,Je.lineWidth=1.5,Je.strokeStyle="white",Je.textBaseline="top",Je.font="bold 36px Open Sans, sans-serif",Je.fillText(xt,5,5),Je.strokeText(xt,5,5),Ke.debugOverlayTexture.update(He),Ke.debugOverlayTexture.bind(ct.LINEAR,ct.CLAMP_TO_EDGE)}(g,De);const ke=q._tileDebugTextBuffer||g.debugBuffer,Ve=q._tileDebugTextIndexBuffer||g.quadTriangleIndexBuffer,Fe=q._tileDebugTextSegments||g.debugSegments;H.draw(v,T.TRIANGLES,J,ae,o.ColorMode.alphaBlended,o.CullFaceMode.disabled,Mh(B,o.Color.transparent,Oe),he,ke,Ve,Fe,null,null,null,[q._globeTileDebugTextBuffer])}function j_(g,c,f,v){wc(g,0,c+f/2,g.transform.width,f,v)}function Rh(g,c,f,v){wc(g,c-f/2,0,f,g.transform.height,v)}function wc(g,c,f,v,b,T){const O=g.context,D=O.gl;D.enable(D.SCISSOR_TEST),D.scissor(c*o.exported.devicePixelRatio,f*o.exported.devicePixelRatio,v*o.exported.devicePixelRatio,b*o.exported.devicePixelRatio),O.clear({color:T}),D.disable(D.SCISSOR_TEST)}const z_=o.createLayout([{name:"a_pos_3f",components:3,type:"Float32"}]),{members:N_}=z_;function os(g,c,f,v){g.emplaceBack(c,f,v)}class Lh{constructor(c){this.vertexArray=new o.StructArrayLayout3f12,this.indices=new o.StructArrayLayout3ui6,os(this.vertexArray,-1,-1,1),os(this.vertexArray,1,-1,1),os(this.vertexArray,-1,1,1),os(this.vertexArray,1,1,1),os(this.vertexArray,-1,-1,-1),os(this.vertexArray,1,-1,-1),os(this.vertexArray,-1,1,-1),os(this.vertexArray,1,1,-1),this.indices.emplaceBack(5,1,3),this.indices.emplaceBack(3,7,5),this.indices.emplaceBack(6,2,0),this.indices.emplaceBack(0,4,6),this.indices.emplaceBack(2,6,7),this.indices.emplaceBack(7,3,2),this.indices.emplaceBack(5,4,0),this.indices.emplaceBack(0,1,5),this.indices.emplaceBack(0,2,3),this.indices.emplaceBack(3,1,0),this.indices.emplaceBack(7,6,4),this.indices.emplaceBack(4,5,7),this.vertexBuffer=c.createVertexBuffer(this.vertexArray,N_),this.indexBuffer=c.createIndexBuffer(this.indices),this.segment=o.SegmentVector.simpleSegment(0,0,36,12)}}function Po(g,c,f,v,b,T){const O=g.gl,D=c.paint.get("sky-atmosphere-color"),B=c.paint.get("sky-atmosphere-halo-color"),H=c.paint.get("sky-atmosphere-sun-intensity"),q=((J,ae,ce,he,de)=>({u_matrix_3f:J,u_sun_direction:ae,u_sun_intensity:ce,u_color_tint_r:[he.r,he.g,he.b,he.a],u_color_tint_m:[de.r,de.g,de.b,de.a],u_luminance:5e-5}))(o.fromMat4(o.create$1(),v),b,H,D,B);O.framebufferTexture2D(O.FRAMEBUFFER,O.COLOR_ATTACHMENT0,O.TEXTURE_CUBE_MAP_POSITIVE_X+T,c.skyboxTexture,0),f.draw(g,O.TRIANGLES,o.DepthMode.disabled,o.StencilMode.disabled,o.ColorMode.unblended,o.CullFaceMode.frontCW,q,"skyboxCapture",c.skyboxGeometry.vertexBuffer,c.skyboxGeometry.indexBuffer,c.skyboxGeometry.segment)}const od=o.createLayout([{type:"Float32",name:"a_pos",components:3},{type:"Float32",name:"a_uv",components:2}]);class B_{constructor(c){const f=new o.StructArrayLayout5f20;f.emplaceBack(-1,1,1,0,0),f.emplaceBack(1,1,1,1,0),f.emplaceBack(1,-1,1,1,1),f.emplaceBack(-1,-1,1,0,1);const v=new o.StructArrayLayout3ui6;v.emplaceBack(0,1,2),v.emplaceBack(2,3,0),this.vertexBuffer=c.createVertexBuffer(f,od.members),this.indexBuffer=c.createIndexBuffer(v),this.segments=o.SegmentVector.simpleSegment(0,0,4,2)}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy()}}const wl={symbol:function(g,c,f,v,b){if(g.renderPass!=="translucent")return;const T=o.StencilMode.disabled,O=g.colorModeForRenderPass();f.layout.get("text-variable-anchor")&&function(D,B,H,q,J,ae,ce){const he=B.transform,de=J==="map",pe=ae==="map";for(const ee of D){const le=q.getTile(ee),ye=le.getBucket(H);if(!ye||!ye.text||!ye.text.segments.get().length)continue;const _e=o.evaluateSizeForZoom(ye.textSizeData,he.zoom),Oe=fn(ee,ye.getProjection(),he),De=he.calculatePixelsToTileUnitsMatrix(le),ke=it(Oe,le.tileID.canonical,pe,de,he,ye.getProjection(),De),Ve=H.layout.get("icon-text-fit")!=="none"&&ye.hasIconData();if(_e){const Fe=Math.pow(2,he.zoom-le.tileID.overscaledZ);SS(ye,de,pe,ce,o.symbolSize,he,ke,ee,Fe,_e,Ve)}}}(v,g,f,c,f.layout.get("text-rotation-alignment"),f.layout.get("text-pitch-alignment"),b),f.paint.get("icon-opacity").constantOr(1)!==0&&D_(g,c,f,v,!1,f.paint.get("icon-translate"),f.paint.get("icon-translate-anchor"),f.layout.get("icon-rotation-alignment"),f.layout.get("icon-pitch-alignment"),f.layout.get("icon-keep-upright"),T,O),f.paint.get("text-opacity").constantOr(1)!==0&&D_(g,c,f,v,!0,f.paint.get("text-translate"),f.paint.get("text-translate-anchor"),f.layout.get("text-rotation-alignment"),f.layout.get("text-pitch-alignment"),f.layout.get("text-keep-upright"),T,O),c.map.showCollisionBoxes&&(nd(g,c,f,v,f.paint.get("text-translate"),f.paint.get("text-translate-anchor"),!0),nd(g,c,f,v,f.paint.get("icon-translate"),f.paint.get("icon-translate-anchor"),!1))},circle:function(g,c,f,v){if(g.renderPass!=="translucent")return;const b=f.paint.get("circle-opacity"),T=f.paint.get("circle-stroke-width"),O=f.paint.get("circle-stroke-opacity"),D=f.layout.get("circle-sort-key").constantOr(1)!==void 0;if(b.constantOr(1)===0&&(T.constantOr(1)===0||O.constantOr(1)===0))return;const B=g.context,H=B.gl,q=g.transform,J=g.depthModeForSublayer(0,o.DepthMode.ReadOnly),ae=o.StencilMode.disabled,ce=g.colorModeForRenderPass(),he=q.projection.name==="globe",de=[o.mercatorXfromLng(q.center.lng),o.mercatorYfromLat(q.center.lat)],pe=[];for(let le=0;le<v.length;le++){const ye=v[le],_e=c.getTile(ye),Oe=_e.getBucket(f);if(!Oe||Oe.projection.name!==q.projection.name)continue;const De=Oe.programConfigurations.get(f.id),ke=Bm(f);he&&ke.push("PROJECTION_GLOBE_VIEW");const Ve=g.useProgram("circle",De,ke),Fe=Oe.layoutVertexBuffer,Ke=Oe.globeExtVertexBuffer,xt=Oe.indexBuffer,He=q.projection.createInversionMatrix(q,ye.canonical),ct={programConfiguration:De,program:Ve,layoutVertexBuffer:Fe,globeExtVertexBuffer:Ke,indexBuffer:xt,uniformValues:Nm(g,ye,_e,He,de,f),tile:_e};if(D){const Je=Oe.segments.get();for(const _t of Je)pe.push({segments:new o.SegmentVector([_t]),sortKey:_t.sortKey,state:ct})}else pe.push({segments:Oe.segments,sortKey:0,state:ct})}D&&pe.sort((le,ye)=>le.sortKey-ye.sortKey);const ee={useDepthForOcclusion:!he};for(const le of pe){const{programConfiguration:ye,program:_e,layoutVertexBuffer:Oe,globeExtVertexBuffer:De,indexBuffer:ke,uniformValues:Ve,tile:Fe}=le.state,Ke=le.segments;g.terrain&&g.terrain.setupElevationDraw(Fe,_e,ee),g.prepareDrawProgram(B,_e,Fe.tileID.toUnwrapped()),_e.draw(B,H.TRIANGLES,J,ae,ce,o.CullFaceMode.disabled,Ve,f.id,Oe,ke,Ke,f.paint,q.zoom,ye,[De])}},heatmap:function(g,c,f,v){if(f.paint.get("heatmap-opacity")!==0)if(g.renderPass==="offscreen"){const b=g.context,T=b.gl,O=o.StencilMode.disabled,D=new o.ColorMode([T.ONE,T.ONE],o.Color.transparent,[!0,!0,!0,!0]);(function(ce,he,de,pe){const ee=ce.gl,le=he.width*pe,ye=he.height*pe;ce.activeTexture.set(ee.TEXTURE1),ce.viewport.set([0,0,le,ye]);let _e=de.heatmapFbo;if(!_e||_e&&(_e.width!==le||_e.height!==ye)){_e&&_e.destroy();const Oe=ee.createTexture();ee.bindTexture(ee.TEXTURE_2D,Oe),ee.texParameteri(ee.TEXTURE_2D,ee.TEXTURE_WRAP_S,ee.CLAMP_TO_EDGE),ee.texParameteri(ee.TEXTURE_2D,ee.TEXTURE_WRAP_T,ee.CLAMP_TO_EDGE),ee.texParameteri(ee.TEXTURE_2D,ee.TEXTURE_MIN_FILTER,ee.LINEAR),ee.texParameteri(ee.TEXTURE_2D,ee.TEXTURE_MAG_FILTER,ee.LINEAR),_e=de.heatmapFbo=ce.createFramebuffer(le,ye,!1),function(De,ke,Ve,Fe,Ke,xt){const He=De.gl;He.texImage2D(He.TEXTURE_2D,0,De.isWebGL2&&De.extRenderToTextureHalfFloat?He.RGBA16F:He.RGBA,Ke,xt,0,He.RGBA,De.extRenderToTextureHalfFloat?De.isWebGL2?He.HALF_FLOAT:De.extTextureHalfFloat.HALF_FLOAT_OES:He.UNSIGNED_BYTE,null),Fe.colorAttachment.set(Ve)}(ce,0,Oe,_e,le,ye)}else ee.bindTexture(ee.TEXTURE_2D,_e.colorAttachment.get()),ce.bindFramebuffer.set(_e.framebuffer)})(b,g,f,g.transform.projection.name==="globe"?.5:.25),b.clear({color:o.Color.transparent});const B=g.transform,H=B.projection.name==="globe",q=H?["PROJECTION_GLOBE_VIEW"]:null,J=H?o.CullFaceMode.frontCCW:o.CullFaceMode.disabled,ae=[o.mercatorXfromLng(B.center.lng),o.mercatorYfromLat(B.center.lat)];for(let ce=0;ce<v.length;ce++){const he=v[ce];if(c.hasRenderableParent(he))continue;const de=c.getTile(he),pe=de.getBucket(f);if(!pe||pe.projection.name!==B.projection.name)continue;const ee=pe.programConfigurations.get(f.id),le=g.useProgram("heatmap",ee,q),{zoom:ye}=g.transform;g.terrain&&g.terrain.setupElevationDraw(de,le),g.prepareDrawProgram(b,le,he.toUnwrapped());const _e=B.projection.createInversionMatrix(B,he.canonical);le.draw(b,T.TRIANGLES,o.DepthMode.disabled,O,D,J,I_(g,he,de,_e,ae,ye,f.paint.get("heatmap-intensity")),f.id,pe.layoutVertexBuffer,pe.indexBuffer,pe.segments,f.paint,g.transform.zoom,ee,H?[pe.globeExtVertexBuffer]:null)}b.viewport.set([0,0,g.width,g.height])}else g.renderPass==="translucent"&&(g.context.setColorMode(g.colorModeForRenderPass()),function(b,T){const O=b.context,D=O.gl,B=T.heatmapFbo;if(!B)return;O.activeTexture.set(D.TEXTURE0),D.bindTexture(D.TEXTURE_2D,B.colorAttachment.get()),O.activeTexture.set(D.TEXTURE1);let H=T.colorRampTexture;H||(H=T.colorRampTexture=new o.Texture(O,T.colorRamp,D.RGBA)),H.bind(D.LINEAR,D.CLAMP_TO_EDGE),b.useProgram("heatmapTexture").draw(O,D.TRIANGLES,o.DepthMode.disabled,o.StencilMode.disabled,b.colorModeForRenderPass(),o.CullFaceMode.disabled,((q,J,ae,ce)=>({u_image:0,u_color_ramp:1,u_opacity:J.paint.get("heatmap-opacity")}))(0,T),T.id,b.viewportBuffer,b.quadTriangleIndexBuffer,b.viewportSegments,T.paint,b.transform.zoom)}(g,f))},line:function(g,c,f,v){if(g.renderPass!=="translucent")return;const b=f.paint.get("line-opacity"),T=f.paint.get("line-width");if(b.constantOr(1)===0||T.constantOr(1)===0)return;const O=g.depthModeForSublayer(0,o.DepthMode.ReadOnly),D=g.colorModeForRenderPass(),B=g.terrain&&g.terrain.renderingToTexture?1:o.exported.devicePixelRatio,H=f.paint.get("line-dasharray"),q=H.constantOr(1),J=f.layout.get("line-cap"),ae=f.paint.get("line-pattern"),ce=ae.constantOr(1),he=f.paint.get("line-gradient"),de=ce?"linePattern":"line",pe=g.context,ee=pe.gl,le=(_e=>{const Oe=[];rd(_e)&&Oe.push("RENDER_LINE_DASH"),_e.paint.get("line-gradient")&&Oe.push("RENDER_LINE_GRADIENT");const De=_e.paint.get("line-trim-offset");De[0]===0&&De[1]===0||Oe.push("RENDER_LINE_TRIM_OFFSET");const ke=_e.paint.get("line-pattern").constantOr(1),Ve=_e.paint.get("line-opacity").constantOr(1)!==1;return!ke&&Ve&&Oe.push("RENDER_LINE_ALPHA_DISCARD"),Oe})(f);let ye=le.includes("RENDER_LINE_ALPHA_DISCARD");g.terrain&&g.terrain.clipOrMaskOverlapStencilType()&&(ye=!1);for(const _e of v){const Oe=c.getTile(_e);if(ce&&!Oe.patternsLoaded())continue;const De=Oe.getBucket(f);if(!De)continue;g.prepareDrawTile();const ke=De.programConfigurations.get(f.id),Ve=g.useProgram(de,ke,le),Fe=ae.constantOr(null);if(Fe&&Oe.imageAtlas){const st=Oe.imageAtlas.patternPositions[Fe.toString()];st&&ke.setConstantPatternPositions(st)}const Ke=H.constantOr(null),xt=J.constantOr(null);if(!ce&&Ke&&xt&&Oe.lineAtlas){const st=Oe.lineAtlas.getDash(Ke,xt);st&&ke.setConstantPatternPositions(st)}let[He,ct]=f.paint.get("line-trim-offset");(xt==="round"||xt==="square")&&He!==ct&&(He===0&&(He-=1),ct===1&&(ct+=1));const Je=g.terrain?_e.projMatrix:null,_t=ce?td(g,Oe,f,Je,B):bS(g,Oe,f,Je,De.lineClipsArray.length,B,[He,ct]);if(he){const st=De.gradients[f.id];let wt=st.texture;if(f.gradientVersion!==st.version){let pt=256;if(f.stepInterpolant){const St=c.getSource().maxzoom,Ht=_e.canonical.z===St?Math.ceil(1<<g.transform.maxZoom-_e.canonical.z):1;pt=o.clamp(o.nextPowerOfTwo(De.maxLineLength/o.EXTENT*1024*Ht),256,pe.maxTextureSize)}st.gradient=o.renderColorRamp({expression:f.gradientExpression(),evaluationKey:"lineProgress",resolution:pt,image:st.gradient||void 0,clips:De.lineClipsArray}),st.texture?st.texture.update(st.gradient):st.texture=new o.Texture(pe,st.gradient,ee.RGBA),st.version=f.gradientVersion,wt=st.texture}pe.activeTexture.set(ee.TEXTURE1),wt.bind(f.stepInterpolant?ee.NEAREST:ee.LINEAR,ee.CLAMP_TO_EDGE)}q&&(pe.activeTexture.set(ee.TEXTURE0),Oe.lineAtlasTexture.bind(ee.LINEAR,ee.REPEAT),ke.updatePaintBuffers()),ce&&(pe.activeTexture.set(ee.TEXTURE0),Oe.imageAtlasTexture.bind(ee.LINEAR,ee.CLAMP_TO_EDGE),ke.updatePaintBuffers()),g.prepareDrawProgram(pe,Ve,_e.toUnwrapped());const Ze=st=>{Ve.draw(pe,ee.TRIANGLES,O,st,D,o.CullFaceMode.disabled,_t,f.id,De.layoutVertexBuffer,De.indexBuffer,De.segments,f.paint,g.transform.zoom,ke,[De.layoutVertexBuffer2])};if(ye){const st=g.stencilModeForClipping(_e).ref;st===0&&g.terrain&&pe.clear({stencil:0});const wt={func:ee.EQUAL,mask:255};_t.u_alpha_discard_threshold=.8,Ze(new o.StencilMode(wt,st,255,ee.KEEP,ee.KEEP,ee.INVERT)),_t.u_alpha_discard_threshold=0,Ze(new o.StencilMode(wt,st,255,ee.KEEP,ee.KEEP,ee.KEEP))}else Ze(g.stencilModeForClipping(_e))}ye&&(g.resetStencilClippingMasks(),g.terrain&&pe.clear({stencil:0}))},fill:function(g,c,f,v){const b=f.paint.get("fill-color"),T=f.paint.get("fill-opacity");if(T.constantOr(1)===0)return;const O=g.colorModeForRenderPass(),D=f.paint.get("fill-pattern"),B=g.opaquePassEnabledForLayer()&&!D.constantOr(1)&&b.constantOr(o.Color.transparent).a===1&&T.constantOr(0)===1?"opaque":"translucent";if(g.renderPass===B){const H=g.depthModeForSublayer(1,g.renderPass==="opaque"?o.DepthMode.ReadWrite:o.DepthMode.ReadOnly);R_(g,c,f,v,H,O,!1)}if(g.renderPass==="translucent"&&f.paint.get("fill-antialias")){const H=g.depthModeForSublayer(f.getPaintProperty("fill-outline-color")?2:0,o.DepthMode.ReadOnly);R_(g,c,f,v,H,O,!0)}},"fill-extrusion":function(g,c,f,v){const b=f.paint.get("fill-extrusion-opacity");if(b!==0&&g.renderPass==="translucent"){const T=new o.DepthMode(g.context.gl.LEQUAL,o.DepthMode.ReadWrite,g.depthRangeFor3D);if(b!==1||f.paint.get("fill-extrusion-pattern").constantOr(1))Dh(g,c,f,v,T,o.StencilMode.disabled,o.ColorMode.disabled),Dh(g,c,f,v,T,g.stencilModeFor3D(),g.colorModeForRenderPass()),g.resetStencilClippingMasks();else{const O=g.colorModeForRenderPass();Dh(g,c,f,v,T,o.StencilMode.disabled,O)}}},hillshade:function(g,c,f,v){if(g.renderPass!=="offscreen"&&g.renderPass!=="translucent")return;const b=g.context,T=g.depthModeForSublayer(0,o.DepthMode.ReadOnly),O=g.colorModeForRenderPass(),D=g.terrain&&g.terrain.renderingToTexture,[B,H]=g.renderPass!=="translucent"||D?[{},v]:g.stencilConfigForOverlap(v);for(const q of H){const J=c.getTile(q);if(J.needsHillshadePrepare&&g.renderPass==="offscreen")T_(g,J,f,T,o.StencilMode.disabled,O);else if(g.renderPass==="translucent"){const ae=D&&g.terrain?g.terrain.stencilModeForRTTOverlap(q):B[q.overscaledZ];E_(g,q,J,f,T,ae,O)}}b.viewport.set([0,0,g.width,g.height]),g.resetStencilClippingMasks()},raster:function(g,c,f,v,b,T){if(g.renderPass!=="translucent"||f.paint.get("raster-opacity")===0||!v.length)return;const O=g.context,D=O.gl,B=c.getSource(),H=g.useProgram("raster"),q=g.colorModeForRenderPass(),J=g.terrain&&g.terrain.renderingToTexture,[ae,ce]=B instanceof mr||J?[{},v]:g.stencilConfigForOverlap(v),he=ce[ce.length-1].overscaledZ,de=!g.options.moving;for(const pe of ce){const ee=J?o.DepthMode.disabled:g.depthModeForSublayer(pe.overscaledZ-he,f.paint.get("raster-opacity")===1?o.DepthMode.ReadWrite:o.DepthMode.ReadOnly,D.LESS),le=pe.toUnwrapped(),ye=c.getTile(pe);if(J&&(!ye||!ye.hasData()))continue;const _e=J?pe.projMatrix:g.transform.calculateProjMatrix(le,de),Oe=g.terrain&&J?g.terrain.stencilModeForRTTOverlap(pe):ae[pe.overscaledZ],De=T?0:f.paint.get("raster-fade-duration");ye.registerFadeDuration(De);const ke=c.findLoadedParent(pe,0),Ve=Dm(ye,ke,c,g.transform,De);let Fe,Ke;g.terrain&&g.terrain.prepareDrawTile();const xt=f.paint.get("raster-resampling")==="nearest"?D.NEAREST:D.LINEAR;O.activeTexture.set(D.TEXTURE0),ye.texture.bind(xt,D.CLAMP_TO_EDGE),O.activeTexture.set(D.TEXTURE1),ke?(ke.texture.bind(xt,D.CLAMP_TO_EDGE),Fe=Math.pow(2,ke.tileID.overscaledZ-ye.tileID.overscaledZ),Ke=[ye.tileID.canonical.x*Fe%1,ye.tileID.canonical.y*Fe%1]):ye.texture.bind(xt,D.CLAMP_TO_EDGE),ye.texture.useMipmap&&O.extTextureFilterAnisotropic&&g.transform.pitch>20&&D.texParameterf(D.TEXTURE_2D,O.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,O.extTextureFilterAnisotropicMax);const He=Um(_e,Ke||[0,0],Fe||1,Ve,f,B instanceof mr?B.perspectiveTransform:[0,0]);if(g.prepareDrawProgram(O,H,le),B instanceof mr)B.boundsBuffer&&B.boundsSegments&&H.draw(O,D.TRIANGLES,ee,o.StencilMode.disabled,q,o.CullFaceMode.disabled,He,f.id,B.boundsBuffer,g.quadTriangleIndexBuffer,B.boundsSegments);else{const{tileBoundsBuffer:ct,tileBoundsIndexBuffer:Je,tileBoundsSegments:_t}=g.getTileBoundsBuffers(ye);H.draw(O,D.TRIANGLES,ee,Oe,q,o.CullFaceMode.disabled,He,f.id,ct,Je,_t)}}g.resetStencilClippingMasks()},background:function(g,c,f,v){const b=f.paint.get("background-color"),T=f.paint.get("background-opacity");if(T===0)return;const O=g.context,D=O.gl,B=g.transform,H=B.tileSize,q=f.paint.get("background-pattern");if(g.isPatternMissing(q))return;const J=!q&&b.a===1&&T===1&&g.opaquePassEnabledForLayer()?"opaque":"translucent";if(g.renderPass!==J)return;const ae=o.StencilMode.disabled,ce=g.depthModeForSublayer(0,J==="opaque"?o.DepthMode.ReadWrite:o.DepthMode.ReadOnly),he=g.colorModeForRenderPass(),de=g.useProgram(q?"backgroundPattern":"background");let pe,ee=v;ee||(pe=g.getBackgroundTiles(),ee=Object.values(pe).map(le=>le.tileID)),q&&(O.activeTexture.set(D.TEXTURE0),g.imageManager.bind(g.context));for(const le of ee){const ye=le.toUnwrapped(),_e=v?le.projMatrix:g.transform.calculateProjMatrix(ye);g.prepareDrawTile();const Oe=c?c.getTile(le):pe?pe[le.key]:new o.Tile(le,H,B.zoom,g),De=q?wS(_e,T,g,q,{tileID:le,tileSize:H}):Gm(_e,T,b);g.prepareDrawProgram(O,de,ye);const{tileBoundsBuffer:ke,tileBoundsIndexBuffer:Ve,tileBoundsSegments:Fe}=g.getTileBoundsBuffers(Oe);de.draw(O,D.TRIANGLES,ce,ae,he,o.CullFaceMode.disabled,De,f.id,ke,Ve,Fe)}},sky:function(g,c,f){const v=g.transform,b=v.projection.name==="mercator"||v.projection.name==="globe"?1:o.smoothstep(7,8,v.zoom),T=f.paint.get("sky-opacity")*b;if(T===0)return;const O=g.context,D=f.paint.get("sky-type"),B=new o.DepthMode(O.gl.LEQUAL,o.DepthMode.ReadOnly,[0,1]),H=g.frameCounter/1e3%1;D==="atmosphere"?g.renderPass==="offscreen"?f.needsSkyboxCapture(g)&&(function(q,J,ae,ce){const he=q.context,de=he.gl;let pe=J.skyboxFbo;if(!pe){pe=J.skyboxFbo=he.createFramebuffer(32,32,!1),J.skyboxGeometry=new Lh(he),J.skyboxTexture=he.gl.createTexture(),de.bindTexture(de.TEXTURE_CUBE_MAP,J.skyboxTexture),de.texParameteri(de.TEXTURE_CUBE_MAP,de.TEXTURE_WRAP_S,de.CLAMP_TO_EDGE),de.texParameteri(de.TEXTURE_CUBE_MAP,de.TEXTURE_WRAP_T,de.CLAMP_TO_EDGE),de.texParameteri(de.TEXTURE_CUBE_MAP,de.TEXTURE_MIN_FILTER,de.LINEAR),de.texParameteri(de.TEXTURE_CUBE_MAP,de.TEXTURE_MAG_FILTER,de.LINEAR);for(let _e=0;_e<6;++_e)de.texImage2D(de.TEXTURE_CUBE_MAP_POSITIVE_X+_e,0,de.RGBA,32,32,0,de.RGBA,de.UNSIGNED_BYTE,null)}he.bindFramebuffer.set(pe.framebuffer),he.viewport.set([0,0,32,32]);const ee=J.getCenter(q,!0),le=q.useProgram("skyboxCapture"),ye=new Float64Array(16);o.identity(ye),o.rotateY(ye,ye,.5*-Math.PI),Po(he,J,le,ye,ee,0),o.identity(ye),o.rotateY(ye,ye,.5*Math.PI),Po(he,J,le,ye,ee,1),o.identity(ye),o.rotateX(ye,ye,.5*-Math.PI),Po(he,J,le,ye,ee,2),o.identity(ye),o.rotateX(ye,ye,.5*Math.PI),Po(he,J,le,ye,ee,3),o.identity(ye),Po(he,J,le,ye,ee,4),o.identity(ye),o.rotateY(ye,ye,Math.PI),Po(he,J,le,ye,ee,5),he.viewport.set([0,0,q.width,q.height])}(g,f),f.markSkyboxValid(g)):g.renderPass==="sky"&&function(q,J,ae,ce,he){const de=q.context,pe=de.gl,ee=q.transform,le=q.useProgram("skybox");de.activeTexture.set(pe.TEXTURE0),pe.bindTexture(pe.TEXTURE_CUBE_MAP,J.skyboxTexture);const ye=((_e,Oe,De,ke,Ve)=>({u_matrix:_e,u_sun_direction:Oe,u_cubemap:0,u_opacity:ke,u_temporal_offset:Ve}))(ee.skyboxMatrix,J.getCenter(q,!1),0,ce,he);q.prepareDrawProgram(de,le),le.draw(de,pe.TRIANGLES,ae,o.StencilMode.disabled,q.colorModeForRenderPass(),o.CullFaceMode.backCW,ye,"skybox",J.skyboxGeometry.vertexBuffer,J.skyboxGeometry.indexBuffer,J.skyboxGeometry.segment)}(g,f,B,T,H):D==="gradient"&&g.renderPass==="sky"&&function(q,J,ae,ce,he){const de=q.context,pe=de.gl,ee=q.transform,le=q.useProgram("skyboxGradient");J.skyboxGeometry||(J.skyboxGeometry=new Lh(de)),de.activeTexture.set(pe.TEXTURE0);let ye=J.colorRampTexture;ye||(ye=J.colorRampTexture=new o.Texture(de,J.colorRamp,pe.RGBA)),ye.bind(pe.LINEAR,pe.CLAMP_TO_EDGE);const _e=((Oe,De,ke,Ve,Fe)=>({u_matrix:Oe,u_color_ramp:0,u_center_direction:De,u_radius:o.degToRad(ke),u_opacity:Ve,u_temporal_offset:Fe}))(ee.skyboxMatrix,J.getCenter(q,!1),J.paint.get("sky-gradient-radius"),ce,he);q.prepareDrawProgram(de,le),le.draw(de,pe.TRIANGLES,ae,o.StencilMode.disabled,q.colorModeForRenderPass(),o.CullFaceMode.backCW,_e,"skyboxGradient",J.skyboxGeometry.vertexBuffer,J.skyboxGeometry.indexBuffer,J.skyboxGeometry.segment)}(g,f,B,T,H)},debug:function(g,c,f){for(let v=0;v<f.length;v++)CS(g,c,f[v])},custom:function(g,c,f,v){const b=g.context,T=f.implementation;if(!g.transform.projection.unsupportedLayers||!g.transform.projection.unsupportedLayers.includes("custom")||g.terrain&&(g.terrain.renderingToTexture||g.renderPass==="offscreen")&&f.isLayerDraped()){if(g.renderPass==="offscreen"){const O=T.prerender;if(O){if(g.setCustomLayerDefaults(),b.setColorMode(g.colorModeForRenderPass()),g.transform.projection.name==="globe"){const D=g.transform.pointMerc;O.call(T,b.gl,g.transform.customLayerMatrix(),g.transform.getProjection(),g.transform.globeToMercatorMatrix(),o.globeToMercatorTransition(g.transform.zoom),[D.x,D.y],g.transform.pixelsPerMeterRatio)}else O.call(T,b.gl,g.transform.customLayerMatrix());b.setDirty(),g.setBaseState()}}else if(g.renderPass==="translucent"){if(g.terrain&&g.terrain.renderingToTexture){const D=T.renderToTile;if(D){const B=v[0].canonical,H=new o.MercatorCoordinate(B.x+v[0].wrap*(1<<B.z),B.y,B.z);b.setDepthMode(o.DepthMode.disabled),b.setStencilMode(o.StencilMode.disabled),b.setColorMode(g.colorModeForRenderPass()),g.setCustomLayerDefaults(),D.call(T,b.gl,H),b.setDirty(),g.setBaseState()}return}g.setCustomLayerDefaults(),b.setColorMode(g.colorModeForRenderPass()),b.setStencilMode(o.StencilMode.disabled);const O=T.renderingMode==="3d"?new o.DepthMode(g.context.gl.LEQUAL,o.DepthMode.ReadWrite,g.depthRangeFor3D):g.depthModeForSublayer(0,o.DepthMode.ReadOnly);if(b.setDepthMode(O),g.transform.projection.name==="globe"){const D=g.transform.pointMerc;T.render(b.gl,g.transform.customLayerMatrix(),g.transform.getProjection(),g.transform.globeToMercatorMatrix(),o.globeToMercatorTransition(g.transform.zoom),[D.x,D.y],g.transform.pixelsPerMeterRatio)}else T.render(b.gl,g.transform.customLayerMatrix());b.setDirty(),g.setBaseState(),b.bindFramebuffer.set(null)}}else o.warnOnce("Custom layers are not yet supported with this projection. Use mercator or globe to enable usage of custom layers.")}};class Sc{constructor(c,f,v=!1){this.context=new It(c,v),this.transform=f,this._tileTextures={},this.frameCopies=[],this.loadTimeStamps=[],this.setup(),this.numSublayers=o.SourceCache.maxUnderzooming+o.SourceCache.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.deferredRenderGpuTimeQueries=[],this.gpuTimers={},this.frameCounter=0,this._backgroundTiles={}}updateTerrain(c,f){const v=!!c&&!!c.terrain&&this.transform.projection.supportsTerrain;if(!(v||this._terrain&&this._terrain.enabled))return;this._terrain||(this._terrain=new Lm(this,c));const b=this._terrain;this.transform.elevation=v?b:null,b.update(c,this.transform,f)}_updateFog(c){const f=c.fog;if(!f||this.transform.projection.name==="globe"||f.getOpacity(this.transform.pitch)<1||f.properties.get("horizon-blend")<.03)return void(this.transform.fogCullDistSq=null);const[v,b]=f.getFovAdjustedRange(this.transform._fov);if(v>b)return void(this.transform.fogCullDistSq=null);const T=v+.78*(b-v);this.transform.fogCullDistSq=T*T}get terrain(){return this.transform._terrainEnabled()&&this._terrain&&this._terrain.enabled?this._terrain:null}resize(c,f){if(this.width=c*o.exported.devicePixelRatio,this.height=f*o.exported.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const v of this.style.order)this.style._layers[v].resize()}setup(){const c=this.context,f=new o.StructArrayLayout2i4;f.emplaceBack(0,0),f.emplaceBack(o.EXTENT,0),f.emplaceBack(0,o.EXTENT),f.emplaceBack(o.EXTENT,o.EXTENT),this.tileExtentBuffer=c.createVertexBuffer(f,o.posAttributes.members),this.tileExtentSegments=o.SegmentVector.simpleSegment(0,0,4,2);const v=new o.StructArrayLayout2i4;v.emplaceBack(0,0),v.emplaceBack(o.EXTENT,0),v.emplaceBack(0,o.EXTENT),v.emplaceBack(o.EXTENT,o.EXTENT),this.debugBuffer=c.createVertexBuffer(v,o.posAttributes.members),this.debugSegments=o.SegmentVector.simpleSegment(0,0,4,5);const b=new o.StructArrayLayout2i4;b.emplaceBack(-1,-1),b.emplaceBack(1,-1),b.emplaceBack(-1,1),b.emplaceBack(1,1),this.viewportBuffer=c.createVertexBuffer(b,o.posAttributes.members),this.viewportSegments=o.SegmentVector.simpleSegment(0,0,4,2);const T=new o.StructArrayLayout4i8;T.emplaceBack(0,0,0,0),T.emplaceBack(o.EXTENT,0,o.EXTENT,0),T.emplaceBack(0,o.EXTENT,0,o.EXTENT),T.emplaceBack(o.EXTENT,o.EXTENT,o.EXTENT,o.EXTENT),this.mercatorBoundsBuffer=c.createVertexBuffer(T,o.boundsAttributes.members),this.mercatorBoundsSegments=o.SegmentVector.simpleSegment(0,0,4,2);const O=new o.StructArrayLayout3ui6;O.emplaceBack(0,1,2),O.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=c.createIndexBuffer(O);const D=new o.StructArrayLayout1ui2;for(const H of[0,1,3,2,0])D.emplaceBack(H);this.debugIndexBuffer=c.createIndexBuffer(D),this.emptyTexture=new o.Texture(c,new o.RGBAImage({width:1,height:1},Uint8Array.of(0,0,0,0)),c.gl.RGBA),this.identityMat=o.create();const B=this.context.gl;this.stencilClearMode=new o.StencilMode({func:B.ALWAYS,mask:0},0,255,B.ZERO,B.ZERO,B.ZERO),this.loadTimeStamps.push(o.window.performance.now()),this.atmosphereBuffer=new B_(this.context)}getMercatorTileBoundsBuffers(){return{tileBoundsBuffer:this.mercatorBoundsBuffer,tileBoundsIndexBuffer:this.quadTriangleIndexBuffer,tileBoundsSegments:this.mercatorBoundsSegments}}getTileBoundsBuffers(c){return c._makeTileBoundsBuffers(this.context,this.transform.projection),c._tileBoundsBuffer?{tileBoundsBuffer:c._tileBoundsBuffer,tileBoundsIndexBuffer:c._tileBoundsIndexBuffer,tileBoundsSegments:c._tileBoundsSegments}:this.getMercatorTileBoundsBuffers()}clearStencil(){const c=this.context,f=c.gl;this.nextStencilID=1,this.currentStencilSource=void 0,this._tileClippingMaskIDs={},this.useProgram("clippingMask").draw(c,f.TRIANGLES,o.DepthMode.disabled,this.stencilClearMode,o.ColorMode.disabled,o.CullFaceMode.disabled,Qu(this.identityMat),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}resetStencilClippingMasks(){this.terrain||(this.currentStencilSource=void 0,this._tileClippingMaskIDs={})}_renderTileClippingMasks(c,f,v){if(!f||this.currentStencilSource===f.id||!c.isTileClipped()||!v||v.length===0)return;if(this._tileClippingMaskIDs&&!this.terrain){let D=!1;for(const B of v)if(this._tileClippingMaskIDs[B.key]===void 0){D=!0;break}if(!D)return}this.currentStencilSource=f.id;const b=this.context,T=b.gl;this.nextStencilID+v.length>256&&this.clearStencil(),b.setColorMode(o.ColorMode.disabled),b.setDepthMode(o.DepthMode.disabled);const O=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const D of v){const B=f.getTile(D),H=this._tileClippingMaskIDs[D.key]=this.nextStencilID++,{tileBoundsBuffer:q,tileBoundsIndexBuffer:J,tileBoundsSegments:ae}=this.getTileBoundsBuffers(B);O.draw(b,T.TRIANGLES,o.DepthMode.disabled,new o.StencilMode({func:T.ALWAYS,mask:0},H,255,T.KEEP,T.KEEP,T.REPLACE),o.ColorMode.disabled,o.CullFaceMode.disabled,Qu(D.projMatrix),"$clipping",q,J,ae)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const c=this.nextStencilID++,f=this.context.gl;return new o.StencilMode({func:f.NOTEQUAL,mask:255},c,255,f.KEEP,f.KEEP,f.REPLACE)}stencilModeForClipping(c){if(this.terrain)return this.terrain.stencilModeForRTTOverlap(c);const f=this.context.gl;return new o.StencilMode({func:f.EQUAL,mask:255},this._tileClippingMaskIDs[c.key],0,f.KEEP,f.KEEP,f.REPLACE)}stencilConfigForOverlap(c){const f=this.context.gl,v=c.sort((O,D)=>D.overscaledZ-O.overscaledZ),b=v[v.length-1].overscaledZ,T=v[0].overscaledZ-b+1;if(T>1){this.currentStencilSource=void 0,this.nextStencilID+T>256&&this.clearStencil();const O={};for(let D=0;D<T;D++)O[D+b]=new o.StencilMode({func:f.GEQUAL,mask:255},D+this.nextStencilID,255,f.KEEP,f.KEEP,f.REPLACE);return this.nextStencilID+=T,[O,v]}return[{[b]:o.StencilMode.disabled},v]}colorModeForRenderPass(){const c=this.context.gl;return this._showOverdrawInspector?new o.ColorMode([c.CONSTANT_COLOR,c.ONE],new o.Color(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?o.ColorMode.unblended:o.ColorMode.alphaBlended}depthModeForSublayer(c,f,v){if(!this.opaquePassEnabledForLayer())return o.DepthMode.disabled;const b=1-((1+this.currentLayer)*this.numSublayers+c)*this.depthEpsilon;return new o.DepthMode(v||this.context.gl.LEQUAL,f,[b,b])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(c,f){this.style=c,this.options=f,this.imageManager=c.imageManager,this.glyphManager=c.glyphManager,this.symbolFadeChange=c.placement.symbolFadeChange(o.exported.now()),this.imageManager.beginFrame();const v=this.style.order,b=this.style._sourceCaches;for(const H in b){const q=b[H];q.used&&q.prepare(this.context)}const T={},O={},D={};for(const H in b){const q=b[H];T[H]=q.getVisibleCoordinates(),O[H]=T[H].slice().reverse(),D[H]=q.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let H=0;H<v.length;H++)if(this.style._layers[v[H]].is3D()){this.opaquePassCutoff=H;break}if(this.terrain&&(this.terrain.updateTileBinding(D),this.opaquePassCutoff=0),this.transform.projection.name!=="globe"||this.globeSharedBuffers||(this.globeSharedBuffers=new o.GlobeSharedBuffers(this.context)),!o.isMapAuthenticated(this.context.gl))return;this.renderPass="offscreen";for(const H of v){const q=this.style._layers[H],J=c._getLayerSourceCache(q);if(!q.hasOffscreenPass()||q.isHidden(this.transform.zoom))continue;const ae=J?O[J.id]:void 0;(q.type==="custom"||q.isSky()||ae&&ae.length)&&this.renderLayer(this,J,q,ae)}this.depthRangeFor3D=[0,1-(c.order.length+2)*this.numSublayers*this.depthEpsilon];const B=this.terrain;if(B&&(this.style.hasSymbolLayers()||this.style.hasCircleLayers())&&B.drawDepth(),this.context.bindFramebuffer.set(null),this.context.viewport.set([0,0,this.width,this.height]),this.context.clear({color:f.showOverdrawInspector?o.Color.black:o.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=f.showOverdrawInspector,this.renderPass="opaque",!this.terrain)for(this.currentLayer=v.length-1;this.currentLayer>=0;this.currentLayer--){const H=this.style._layers[v[this.currentLayer]],q=c._getLayerSourceCache(H);if(H.isSky())continue;const J=q?O[q.id]:void 0;this._renderTileClippingMasks(H,q,J),this.renderLayer(this,q,H,J)}if(this.style.fog&&this.transform.projection.supportsFog&&function(H,q){const J=H.context,ae=J.gl,ce=H.transform,he=new o.DepthMode(ae.LEQUAL,o.DepthMode.ReadOnly,[0,1]),de=H.useProgram("globeAtmosphere",null,ce.projection.name==="globe"?["PROJECTION_GLOBE_VIEW","FOG"]:["FOG"]),pe=o.globeToMercatorTransition(ce.zoom),ee=q.properties.get("color").toArray01(),le=q.properties.get("high-color").toArray01(),ye=q.properties.get("space-color").toArray01PremultipliedAlpha(),_e=o.identity$1([]);o.rotateY$1(_e,_e,-o.degToRad(ce._center.lng)),o.rotateX$1(_e,_e,o.degToRad(ce._center.lat)),o.rotateZ$1(_e,_e,ce.angle),o.rotateX$1(_e,_e,-ce._pitch);const Oe=o.fromQuat(new Float32Array(16),_e),De=o.mapValue(q.properties.get("star-intensity"),0,1,0,.25),ke=5e-4,Ve=o.mapValue(q.properties.get("horizon-blend"),0,1,ke,.25),Fe=o.globeUseCustomAntiAliasing(H,J,ce)&&Ve===ke?ce.worldSize/(2*Math.PI*1.025)-1:ce.globeRadius,Ke=H.frameCounter/1e3%1,xt=o.length(ce.globeCenterInViewSpace),He=Math.sqrt(Math.pow(xt,2)-Math.pow(Fe,2)),ct=Math.acos(He/xt),Je=((Ze,st,wt,pt,St,Ht,ir,Ft,Qt,br,yr,Gt,Nr,Wr)=>({u_frustum_tl:Ze,u_frustum_tr:st,u_frustum_br:wt,u_frustum_bl:pt,u_horizon:St,u_transition:Ht,u_fadeout_range:ir,u_color:Ft,u_high_color:Qt,u_space_color:br,u_star_intensity:yr,u_star_size:5*o.exported.devicePixelRatio,u_star_density:0,u_temporal_offset:Gt,u_horizon_angle:Nr,u_rotation_matrix:Wr}))(ce.frustumCorners.TL,ce.frustumCorners.TR,ce.frustumCorners.BR,ce.frustumCorners.BL,ce.frustumCorners.horizon,pe,Ve,ee,le,ye,De,Ke,ct,Oe);H.prepareDrawProgram(J,de);const _t=H.atmosphereBuffer;_t&&de.draw(J,ae.TRIANGLES,he,o.StencilMode.disabled,o.ColorMode.alphaBlended,o.CullFaceMode.backCW,Je,"skybox",_t.vertexBuffer,_t.indexBuffer,_t.segments)}(this,this.style.fog),this.renderPass="sky",(o.globeToMercatorTransition(this.transform.zoom)>0||this.transform.projection.name!=="globe")&&this.transform.isHorizonVisible())for(this.currentLayer=0;this.currentLayer<v.length;this.currentLayer++){const H=this.style._layers[v[this.currentLayer]],q=c._getLayerSourceCache(H);H.isSky()&&this.renderLayer(this,q,H,q?O[q.id]:void 0)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<v.length;){const H=this.style._layers[v[this.currentLayer]],q=c._getLayerSourceCache(H);if(H.isSky()){++this.currentLayer;continue}if(this.terrain&&this.style.isLayerDraped(H)){if(H.isHidden(this.transform.zoom)){++this.currentLayer;continue}this.currentLayer=this.terrain.renderBatch(this.currentLayer);continue}const J=q?(H.type==="symbol"?D:O)[q.id]:void 0;this._renderTileClippingMasks(H,q,q?T[q.id]:void 0),this.renderLayer(this,q,H,J),++this.currentLayer}if(this.terrain&&this.terrain.postRender(),this.options.showTileBoundaries||this.options.showQueryGeometry||this.options.showTileAABBs){let H=null;o.values(this.style._layers).forEach(q=>{const J=c._getLayerSourceCache(q);J&&!q.isHidden(this.transform.zoom)&&(!H||H.getSource().maxzoom<J.getSource().maxzoom)&&(H=J)}),H&&this.options.showTileBoundaries&&wl.debug(this,H,H.getVisibleCoordinates())}this.options.showPadding&&function(H){const q=H.transform.padding;j_(H,H.transform.height-(q.top||0),3,bc),j_(H,q.bottom||0,3,ES),Rh(H,q.left||0,3,TS),Rh(H,H.transform.width-(q.right||0),3,AS);const J=H.transform.centerPoint;(function(ae,ce,he,de){wc(ae,ce-1,he-10,2,20,de),wc(ae,ce-10,he-1,20,2,de)})(H,J.x,H.transform.height-J.y,PS)}(this),this.context.setDefault(),this.frameCounter=(this.frameCounter+1)%Number.MAX_SAFE_INTEGER,this.tileLoaded&&this.options.speedIndexTiming&&(this.loadTimeStamps.push(o.window.performance.now()),this.saveCanvasCopy())}renderLayer(c,f,v,b){v.isHidden(this.transform.zoom)||(v.type==="background"||v.type==="sky"||v.type==="custom"||b&&b.length)&&(this.id=v.id,this.gpuTimingStart(v),(!c.transform.projection.unsupportedLayers||!c.transform.projection.unsupportedLayers.includes(v.type)||c.terrain&&v.type==="custom")&&wl[v.type](c,f,v,b,this.style.placement.variableOffsets,this.options.isInitialLoad),this.gpuTimingEnd())}gpuTimingStart(c){if(!this.options.gpuTiming)return;const f=this.context.extTimerQuery;let v=this.gpuTimers[c.id];v||(v=this.gpuTimers[c.id]={calls:0,cpuTime:0,query:f.createQueryEXT()}),v.calls++,f.beginQueryEXT(f.TIME_ELAPSED_EXT,v.query)}gpuTimingDeferredRenderStart(){if(this.options.gpuTimingDeferredRender){const c=this.context.extTimerQuery,f=c.createQueryEXT();this.deferredRenderGpuTimeQueries.push(f),c.beginQueryEXT(c.TIME_ELAPSED_EXT,f)}}gpuTimingDeferredRenderEnd(){if(!this.options.gpuTimingDeferredRender)return;const c=this.context.extTimerQuery;c.endQueryEXT(c.TIME_ELAPSED_EXT)}gpuTimingEnd(){if(!this.options.gpuTiming)return;const c=this.context.extTimerQuery;c.endQueryEXT(c.TIME_ELAPSED_EXT)}collectGpuTimers(){const c=this.gpuTimers;return this.gpuTimers={},c}collectDeferredRenderGpuQueries(){const c=this.deferredRenderGpuTimeQueries;return this.deferredRenderGpuTimeQueries=[],c}queryGpuTimers(c){const f={};for(const v in c){const b=c[v],T=this.context.extTimerQuery,O=T.getQueryObjectEXT(b.query,T.QUERY_RESULT_EXT)/1e6;T.deleteQueryEXT(b.query),f[v]=O}return f}queryGpuTimeDeferredRender(c){if(!this.options.gpuTimingDeferredRender)return 0;const f=this.context.extTimerQuery;let v=0;for(const b of c)v+=f.getQueryObjectEXT(b,f.QUERY_RESULT_EXT)/1e6,f.deleteQueryEXT(b);return v}translatePosMatrix(c,f,v,b,T){if(!v[0]&&!v[1])return c;const O=T?b==="map"?this.transform.angle:0:b==="viewport"?-this.transform.angle:0;if(O){const H=Math.sin(O),q=Math.cos(O);v=[v[0]*q-v[1]*H,v[0]*H+v[1]*q]}const D=[T?v[0]:Ge(f,v[0],this.transform.zoom),T?v[1]:Ge(f,v[1],this.transform.zoom),0],B=new Float32Array(16);return o.translate(B,c,D),B}saveTileTexture(c){const f=this._tileTextures[c.size[0]];f?f.push(c):this._tileTextures[c.size[0]]=[c]}getTileTexture(c){const f=this._tileTextures[c];return f&&f.length>0?f.pop():null}isPatternMissing(c){return c===null||c!==void 0&&!this.imageManager.getPattern(c.toString())}terrainRenderModeElevated(){return this.style&&!!this.style.getTerrain()&&!!this.terrain&&!this.terrain.renderingToTexture}currentGlobalDefines(){const c=this.terrain&&this.terrain.renderingToTexture,f=this.terrain&&this.terrain.exaggeration()===0,v=this.style&&this.style.fog,b=[];return this.terrainRenderModeElevated()&&b.push("TERRAIN"),this.transform.projection.name==="globe"&&b.push("GLOBE"),f&&b.push("ZERO_EXAGGERATION"),v&&!c&&v.getOpacity(this.transform.pitch)!==0&&b.push("FOG"),c&&b.push("RENDER_TO_TEXTURE"),this._showOverdrawInspector&&b.push("OVERDRAW_INSPECTOR"),b}useProgram(c,f,v){this.cache=this.cache||{};const b=v||[],T=this.currentGlobalDefines().concat(b),O=Cr.cacheKey(Mm[c],c,T,f);return this.cache[O]||(this.cache[O]=new Cr(this.context,c,Mm[c],f,Wm[c],T)),this.cache[O]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.frontFace.setDefault(),this.context.cullFaceSide.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const c=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(c.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=o.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new o.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this._terrain&&this._terrain.destroy(),this.globeSharedBuffers&&this.globeSharedBuffers.destroy(),this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy(),this.atmosphereBuffer&&this.atmosphereBuffer.destroy()}prepareDrawTile(){this.terrain&&this.terrain.prepareDrawTile()}prepareDrawProgram(c,f,v){if(this.terrain&&this.terrain.renderingToTexture)return;const b=this.style.fog;if(b){const T=b.getOpacity(this.transform.pitch),O=((D,B,H,q,J,ae,ce,he,de,pe,ee)=>{const le=D.transform,ye=B.properties.get("color").toArray01();ye[3]=q;const _e=D.frameCounter/1e3%1;return{u_fog_matrix:H?le.calculateFogTileMatrix(H):D.identityMat,u_fog_range:B.getFovAdjustedRange(le._fov),u_fog_color:ye,u_fog_horizon_blend:B.properties.get("horizon-blend"),u_fog_temporal_offset:_e,u_frustum_tl:J,u_frustum_tr:ae,u_frustum_br:ce,u_frustum_bl:he,u_globe_pos:de,u_globe_radius:pe,u_viewport:ee,u_globe_transition:o.globeToMercatorTransition(le.zoom),u_is_globe:+(le.projection.name==="globe")}})(this,b,v,T,this.transform.frustumCorners.TL,this.transform.frustumCorners.TR,this.transform.frustumCorners.BR,this.transform.frustumCorners.BL,this.transform.globeCenterInViewSpace,this.transform.globeRadius,[this.transform.width*o.exported.devicePixelRatio,this.transform.height*o.exported.devicePixelRatio]);f.setFogUniformValues(c,O)}}setTileLoadedFlag(c){this.tileLoaded=c}saveCanvasCopy(){const c=this.canvasCopy();c&&(this.frameCopies.push(c),this.tileLoaded=!1)}canvasCopy(){const c=this.context.gl,f=c.createTexture();return c.bindTexture(c.TEXTURE_2D,f),c.copyTexImage2D(c.TEXTURE_2D,0,c.RGBA,0,0,c.drawingBufferWidth,c.drawingBufferHeight,0),f}getCanvasCopiesAndTimestamps(){return{canvasCopies:this.frameCopies,timeStamps:this.loadTimeStamps}}averageElevationNeedsEasing(){if(!this.transform._elevation)return!1;const c=this.style&&this.style.fog;return!!c&&c.getOpacity(this.transform.pitch)!==0}getBackgroundTiles(){const c=this._backgroundTiles,f=this._backgroundTiles={},v=this.transform.coveringTiles({tileSize:512});for(const b of v)f[b.key]=c[b.key]||new o.Tile(b,512,this.transform.tileZoom,this);return f}clearBackgroundTiles(){this._backgroundTiles={}}}class jh{constructor(c=0,f=0,v=0,b=0){if(isNaN(c)||c<0||isNaN(f)||f<0||isNaN(v)||v<0||isNaN(b)||b<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=c,this.bottom=f,this.left=v,this.right=b}interpolate(c,f,v){return f.top!=null&&c.top!=null&&(this.top=o.number(c.top,f.top,v)),f.bottom!=null&&c.bottom!=null&&(this.bottom=o.number(c.bottom,f.bottom,v)),f.left!=null&&c.left!=null&&(this.left=o.number(c.left,f.left,v)),f.right!=null&&c.right!=null&&(this.right=o.number(c.right,f.right,v)),this}getCenter(c,f){const v=o.clamp((this.left+c-this.right)/2,0,c),b=o.clamp((this.top+f-this.bottom)/2,0,f);return new o.Point(v,b)}equals(c){return this.top===c.top&&this.bottom===c.bottom&&this.left===c.left&&this.right===c.right}clone(){return new jh(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function zh(g,c){const f=o.getColumn(g,3);o.fromQuat(g,c),o.setColumn(g,3,f)}function Ir(g,c){const f=o.identity$1([]);return o.rotateZ$1(f,f,-c),o.rotateX$1(f,f,-g),f}function ad(g,c){const f=[g[0],g[1],0],v=[c[0],c[1],0];if(o.length(f)>=1e-15){const O=o.normalize([],f);o.scale$2(v,O,o.dot(v,O)),c[0]=v[0],c[1]=v[1]}const b=o.cross([],c,g);if(o.len(b)<1e-15)return null;const T=Math.atan2(-b[1],b[0]);return Ir(Math.atan2(Math.sqrt(g[0]*g[0]+g[1]*g[1]),-g[2]),T)}class $_{constructor(c,f){this.position=c,this.orientation=f}get position(){return this._position}set position(c){if(c){const f=c instanceof o.MercatorCoordinate?c:new o.MercatorCoordinate(c[0],c[1],c[2]);this._renderWorldCopies&&(f.x=o.wrap(f.x,0,1)),this._position=f}else this._position=null}lookAtPoint(c,f){if(this.orientation=null,!this.position)return;const v=this.position,b=this._elevation?this._elevation.getAtPointOrZero(o.MercatorCoordinate.fromLngLat(c)):0,T=o.MercatorCoordinate.fromLngLat(c,b),O=[T.x-v.x,T.y-v.y,T.z-v.z];f||(f=[0,0,1]),f[2]=Math.abs(f[2]),this.orientation=ad(O,f)}setPitchBearing(c,f){this.orientation=Ir(o.degToRad(c),o.degToRad(-f))}}class Nh{constructor(c,f){this._transform=o.identity([]),this.orientation=f,this.position=c}get mercatorPosition(){const c=this.position;return new o.MercatorCoordinate(c[0],c[1],c[2])}get position(){const c=o.getColumn(this._transform,3);return[c[0],c[1],c[2]]}set position(c){var f;c&&o.setColumn(this._transform,3,[(f=c)[0],f[1],f[2],1])}get orientation(){return this._orientation}set orientation(c){this._orientation=c||o.identity$1([]),c&&zh(this._transform,this._orientation)}getPitchBearing(){const c=this.forward(),f=this.right();return{bearing:Math.atan2(-f[1],f[0]),pitch:Math.atan2(Math.sqrt(c[0]*c[0]+c[1]*c[1]),-c[2])}}setPitchBearing(c,f){this._orientation=Ir(c,f),zh(this._transform,this._orientation)}forward(){const c=o.getColumn(this._transform,2);return[-c[0],-c[1],-c[2]]}up(){const c=o.getColumn(this._transform,1);return[-c[0],-c[1],-c[2]]}right(){const c=o.getColumn(this._transform,0);return[c[0],c[1],c[2]]}getCameraToWorld(c,f){const v=new Float64Array(16);return o.invert(v,this.getWorldToCamera(c,f)),v}getWorldToCameraPosition(c,f,v){const b=this.position;o.scale$2(b,b,-c);const T=new Float64Array(16);return o.fromScaling(T,[v,v,v]),o.translate(T,T,b),T[10]*=f,T}getWorldToCamera(c,f){const v=new Float64Array(16),b=new Float64Array(4),T=this.position;return o.conjugate(b,this._orientation),o.scale$2(T,T,-c),o.fromQuat(v,b),o.translate(v,v,T),v[1]*=-1,v[5]*=-1,v[9]*=-1,v[13]*=-1,v[8]*=f,v[9]*=f,v[10]*=f,v[11]*=f,v}getCameraToClipPerspective(c,f,v,b){const T=new Float64Array(16);return o.perspective(T,c,f,v,b),T}getDistanceToElevation(c,f=!1){const v=c===0?0:o.mercatorZfromAltitude(c,f?o.latFromMercatorY(this.position[1]):this.position[1]),b=this.forward();return(v-this.position[2])/b[2]}clone(){return new Nh([...this.position],[...this.orientation])}}function Ec(g,c){const f=Bh(g.projection,g.zoom,g.width,g.height),v=function(T,O,D,B,H){const q=new o.LngLat(D.lng-180*as,D.lat),J=new o.LngLat(D.lng+180*as,D.lat),ae=T.project(q.lng,q.lat),ce=T.project(J.lng,J.lat),he=-Math.atan2(ce.y-ae.y,ce.x-ae.x),de=o.MercatorCoordinate.fromLngLat(D);de.y=o.clamp(de.y,-1+as,1-as);const pe=de.toLngLat(),ee=T.project(pe.lng,pe.lat),le=o.MercatorCoordinate.fromLngLat(pe);le.x+=as;const ye=le.toLngLat(),_e=T.project(ye.lng,ye.lat),Oe=$h(_e.x-ee.x,_e.y-ee.y,he),De=o.MercatorCoordinate.fromLngLat(pe);De.y+=as;const ke=De.toLngLat(),Ve=T.project(ke.lng,ke.lat),Fe=$h(Ve.x-ee.x,Ve.y-ee.y,he),Ke=Math.abs(Oe.x)/Math.abs(Fe.y),xt=o.identity([]);o.rotateZ(xt,xt,-he*(1-(H?0:B)));const He=o.identity([]);return o.scale(He,He,[1,1-(1-Ke)*B,1]),He[4]=-Fe.x/Fe.y*B,o.rotateZ(He,He,he),o.multiply(He,xt,He),He}(g.projection,0,g.center,f,c),b=F_(g);return o.scale(v,v,[b,b,1]),v}function F_(g){const c=g.projection,f=Bh(g.projection,g.zoom,g.width,g.height),v=U_(c,g.center),b=U_(c,o.LngLat.convert(c.center));return Math.pow(2,v*f+(1-f)*b)}function Bh(g,c,f,v,b=1/0){const T=g.range;if(!T)return 0;const O=Math.min(b,Math.max(f,v)),D=Math.log(O/1024)/Math.LN2;return o.smoothstep(T[0]+D,T[1]+D,c)}const as=1/4e4;function U_(g,c){const f=o.clamp(c.lat,-o.MAX_MERCATOR_LATITUDE,o.MAX_MERCATOR_LATITUDE),v=new o.LngLat(c.lng-180*as,f),b=new o.LngLat(c.lng+180*as,f),T=g.project(v.lng,f),O=g.project(b.lng,f),D=o.MercatorCoordinate.fromLngLat(v),B=o.MercatorCoordinate.fromLngLat(b),H=O.x-T.x,q=O.y-T.y,J=B.x-D.x,ae=B.y-D.y,ce=Math.sqrt((J*J+ae*ae)/(H*H+q*q));return Math.log(ce)/Math.LN2}function $h(g,c,f){const v=Math.cos(f),b=Math.sin(f);return{x:g*v-c*b,y:g*b+c*v}}class Tc{constructor(c,f,v,b,T,O,D){this.tileSize=512,this._renderWorldCopies=T===void 0||T,this._minZoom=c||0,this._maxZoom=f||22,this._minPitch=v??0,this._maxPitch=b??60,this.setProjection(O),this.setMaxBounds(D),this.width=0,this.height=0,this._center=new o.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._nearZ=0,this._farZ=0,this._unmodified=!0,this._edgeInsets=new jh,this._projMatrixCache={},this._alignedProjMatrixCache={},this._fogTileMatrixCache={},this._distanceTileDataCache={},this._camera=new Nh,this._centerAltitude=0,this._averageElevation=0,this.cameraElevationReference="ground",this._pixelsPerMercatorPixel=1,this.globeRadius=0,this.globeCenterInViewSpace=[0,0,0],this._horizonShift=.1}clone(){const c=new Tc(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies,this.getProjection());return c._elevation=this._elevation,c._centerAltitude=this._centerAltitude,c._centerAltitudeValidForExaggeration=this._centerAltitudeValidForExaggeration,c.tileSize=this.tileSize,c.mercatorFromTransition=this.mercatorFromTransition,c.width=this.width,c.height=this.height,c.cameraElevationReference=this.cameraElevationReference,c._center=this._center,c._setZoom(this.zoom),c._seaLevelZoom=this._seaLevelZoom,c.angle=this.angle,c._fov=this._fov,c._pitch=this._pitch,c._nearZ=this._nearZ,c._farZ=this._farZ,c._averageElevation=this._averageElevation,c._unmodified=this._unmodified,c._edgeInsets=this._edgeInsets.clone(),c._camera=this._camera.clone(),c._calcMatrices(),c.freezeTileCoverage=this.freezeTileCoverage,c.frustumCorners=this.frustumCorners,c}get elevation(){return this._elevation}set elevation(c){this._elevation!==c&&(this._elevation=c,this._updateCameraOnTerrain(),this._calcMatrices())}updateElevation(c,f=!1){const v=this._elevation&&this._elevation.exaggeration()!==this._centerAltitudeValidForExaggeration;(this._seaLevelZoom==null||v)&&this._updateCameraOnTerrain(),(c||v)&&this._constrainCamera(f),this._calcMatrices()}getProjection(){return o.pick(this.projection,["name","center","parallels"])}setProjection(c){this.projectionOptions=c||{name:"mercator"};const f=this.projection?this.getProjection():void 0;this.projection=o.getProjection(this.projectionOptions);const v=!_(f,this.getProjection());return v&&this._calcMatrices(),this.mercatorFromTransition=!1,v}setMercatorFromTransition(){const c=this.projection.name;this.mercatorFromTransition=!0,this.projectionOptions={name:"mercator"},this.projection=o.getProjection({name:"mercator"});const f=c!==this.projection.name;return f&&this._calcMatrices(),f}get minZoom(){return this._minZoom}set minZoom(c){this._minZoom!==c&&(this._minZoom=c,this.zoom=Math.max(this.zoom,c))}get maxZoom(){return this._maxZoom}set maxZoom(c){this._maxZoom!==c&&(this._maxZoom=c,this.zoom=Math.min(this.zoom,c))}get minPitch(){return this._minPitch}set minPitch(c){this._minPitch!==c&&(this._minPitch=c,this.pitch=Math.max(this.pitch,c))}get maxPitch(){return this._maxPitch}set maxPitch(c){this._maxPitch!==c&&(this._maxPitch=c,this.pitch=Math.min(this.pitch,c))}get renderWorldCopies(){return this._renderWorldCopies&&this.projection.supportsWorldCopies===!0}set renderWorldCopies(c){c===void 0?c=!0:c===null&&(c=!1),this._renderWorldCopies=c}get worldSize(){return this.tileSize*this.scale}get cameraWorldSizeForFog(){const c=Math.max(this._camera.getDistanceToElevation(this._averageElevation),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(c))}get cameraWorldSize(){const c=Math.max(this._camera.getDistanceToElevation(this._averageElevation,!0),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(c))}get pixelsPerMeter(){return this.projection.pixelsPerMeter(this.center.lat,this.worldSize)}get cameraPixelsPerMeter(){return o.mercatorZfromAltitude(this.center.lat,this.cameraWorldSizeForFog)}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new o.Point(this.width,this.height)}get bearing(){return o.wrap(this.rotation,-180,180)}set bearing(c){this.rotation=c}get rotation(){return-this.angle/Math.PI*180}set rotation(c){const f=-c*Math.PI/180;var v;this.angle!==f&&(this._unmodified=!1,this.angle=f,this._calcMatrices(),this.rotationMatrix=(v=new o.ARRAY_TYPE(4),o.ARRAY_TYPE!=Float32Array&&(v[1]=0,v[2]=0),v[0]=1,v[3]=1,v),function(b,T,O){var D=T[0],B=T[1],H=T[2],q=T[3],J=Math.sin(O),ae=Math.cos(O);b[0]=D*ae+H*J,b[1]=B*ae+q*J,b[2]=D*-J+H*ae,b[3]=B*-J+q*ae}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(c){const f=o.clamp(c,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==f&&(this._unmodified=!1,this._pitch=f,this._calcMatrices())}get aspect(){return this.width/this.height}get fov(){return this._fov/Math.PI*180}get fovX(){return this._fov}get fovY(){const c=1/Math.tan(.5*this.fovX);return 2*Math.atan(1/this.aspect/c)}set fov(c){c=Math.max(.01,Math.min(60,c)),this._fov!==c&&(this._unmodified=!1,this._fov=o.degToRad(c),this._calcMatrices())}get averageElevation(){return this._averageElevation}set averageElevation(c){this._averageElevation=c,this._calcFogMatrices(),this._distanceTileDataCache={}}get zoom(){return this._zoom}set zoom(c){const f=Math.min(Math.max(c,this.minZoom),this.maxZoom);this._zoom!==f&&(this._unmodified=!1,this._setZoom(f),this._updateSeaLevelZoom(),this._constrain(),this._calcMatrices())}_setZoom(c){this._zoom=c,this.scale=this.zoomScale(c),this.tileZoom=Math.floor(c),this.zoomFraction=c-this.tileZoom}_updateCameraOnTerrain(){if(!this._elevation||!this._elevation.isDataAvailableAtPoint(this.locationCoordinate(this.center)))return this._centerAltitude=0,this._seaLevelZoom=null,void(this._centerAltitudeValidForExaggeration=void 0);const c=this._elevation;this._centerAltitude=c.getAtPointOrZero(this.locationCoordinate(this.center)),this._centerAltitudeValidForExaggeration=c.exaggeration(),this._updateSeaLevelZoom()}_updateSeaLevelZoom(){this._centerAltitudeValidForExaggeration!==void 0&&(this._seaLevelZoom=this._zoomFromMercatorZ((this.pixelsPerMeter*this._centerAltitude+this.cameraToCenterDistance)/this.worldSize))}sampleAverageElevation(){if(!this._elevation)return 0;const c=this._elevation,f=[[.5,.2],[.3,.5],[.5,.5],[.7,.5],[.5,.8]],v=this.horizonLineFromTop();let b=0,T=0;for(let O=0;O<f.length;O++){const D=new o.Point(f[O][0]*this.width,v+f[O][1]*(this.height-v)),B=c.pointCoordinate(D);if(!B)continue;const H=1/Math.hypot(B[0]-this._camera.position[0],B[1]-this._camera.position[1]);b+=B[3]*H,T+=H}return T===0?NaN:b/T}get center(){return this._center}set center(c){c.lat===this._center.lat&&c.lng===this._center.lng||(this._unmodified=!1,this._center=c,this._terrainEnabled()&&(this.cameraElevationReference==="ground"?this._updateCameraOnTerrain():this._updateZoomFromElevation()),this._constrain(),this._calcMatrices())}_updateZoomFromElevation(){if(this._seaLevelZoom==null||!this._elevation)return;const c=this._seaLevelZoom,f=this._elevation.getAtPointOrZero(this.locationCoordinate(this.center)),v=this.pixelsPerMeter/this.worldSize*f,b=this._mercatorZfromZoom(c),T=this._mercatorZfromZoom(this._maxZoom),O=Math.max(b-v,T);this._setZoom(this._zoomFromMercatorZ(O))}get padding(){return this._edgeInsets.toJSON()}set padding(c){this._edgeInsets.equals(c)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,c,1),this._calcMatrices())}computeZoomRelativeTo(c){const f=this.rayIntersectionCoordinate(this.pointRayIntersection(this.centerPoint,c.toAltitude()));let v;v=c.z<this._camera.position[2]?[f.x,f.y,f.z]:[c.x,c.y,c.z];const b=o.length(o.sub([],this._camera.position,v));return o.clamp(this._zoomFromMercatorZ(b),this._minZoom,this._maxZoom)}setFreeCameraOptions(c){if(!this.height||!c.position&&!c.orientation)return;this._updateCameraState();let f=!1;if(c.orientation&&!o.exactEquals(c.orientation,this._camera.orientation)&&(f=this._setCameraOrientation(c.orientation)),c.position){const v=[c.position.x,c.position.y,c.position.z];o.exactEquals$1(v,this._camera.position)||(this._setCameraPosition(v),f=!0)}f&&(this._updateStateFromCamera(),this.recenterOnTerrain())}getFreeCameraOptions(){this._updateCameraState();const c=this._camera.position,f=new $_;return f.position=new o.MercatorCoordinate(c[0],c[1],c[2]),f.orientation=this._camera.orientation,f._elevation=this.elevation,f._renderWorldCopies=this.renderWorldCopies,f}_setCameraOrientation(c){if(!o.length$1(c))return!1;o.normalize$1(c,c);const f=o.transformQuat([],[0,0,-1],c),v=o.transformQuat([],[0,-1,0],c);if(v[2]<0)return!1;const b=ad(f,v);return!!b&&(this._camera.orientation=b,!0)}_setCameraPosition(c){const f=this.zoomScale(this.minZoom)*this.tileSize,v=this.zoomScale(this.maxZoom)*this.tileSize,b=this.cameraToCenterDistance;c[2]=o.clamp(c[2],b/v,b/f),this._camera.position=c}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}get fovAboveCenter(){return this._fov*(.5+this.centerOffset.y/this.height)}isPaddingEqual(c){return this._edgeInsets.equals(c)}interpolatePadding(c,f,v){this._unmodified=!1,this._edgeInsets.interpolate(c,f,v),this._constrain(),this._calcMatrices()}coveringZoomLevel(c){const f=(c.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/c.tileSize));return Math.max(0,f)}getVisibleUnwrappedCoordinates(c){const f=[new o.UnwrappedTileID(0,c)];if(this.renderWorldCopies){const v=this.pointCoordinate(new o.Point(0,0)),b=this.pointCoordinate(new o.Point(this.width,0)),T=this.pointCoordinate(new o.Point(this.width,this.height)),O=this.pointCoordinate(new o.Point(0,this.height)),D=Math.floor(Math.min(v.x,b.x,T.x,O.x)),B=Math.floor(Math.max(v.x,b.x,T.x,O.x)),H=1;for(let q=D-H;q<=B+H;q++)q!==0&&f.push(new o.UnwrappedTileID(q,c))}return f}coveringTiles(c){let f=this.coveringZoomLevel(c);const v=f,b=this.elevation&&!c.isTerrainDEM,T=this.projection.name==="mercator";if(c.minzoom!==void 0&&f<c.minzoom)return[];c.maxzoom!==void 0&&f>c.maxzoom&&(f=c.maxzoom);const O=this.locationCoordinate(this.center),D=this.center.lat,B=1<<f,H=[B*O.x,B*O.y,0],q=this.projection.name==="globe",J=!q,ae=o.Frustum.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,f,J),ce=q?this._camera.mercatorPosition:this.pointCoordinate(this.getCameraPoint()),he=B*o.mercatorZfromAltitude(1,this.center.lat),de=this._camera.position[2]/o.mercatorZfromAltitude(1,this.center.lat),pe=[B*ce.x,B*ce.y,de*(J?1:he)],ee=this.cameraToCenterDistance/c.tileSize*(c.roundZoom?1:.502),le=this.pitch<=60&&this._edgeInsets.top<=this._edgeInsets.bottom&&!this._elevation&&!this.projection.isReprojectedInTileSpace?f:0,ye=c.isTerrainDEM&&this._elevation?1e4*this._elevation.exaggeration():this._centerAltitude,_e=c.isTerrainDEM?-ye:this._elevation?this._elevation.getMinElevationBelowMSL():0,Oe=this.projection.isReprojectedInTileSpace?F_(this):1,De=Ze=>{const wt=new o.MercatorCoordinate(Ze.x+25e-6,Ze.y,Ze.z),pt=new o.MercatorCoordinate(Ze.x,Ze.y+25e-6,Ze.z),St=Ze.toLngLat(),Ht=wt.toLngLat(),ir=pt.toLngLat(),Ft=this.locationCoordinate(St),Qt=this.locationCoordinate(Ht),br=this.locationCoordinate(ir),yr=Math.hypot(Qt.x-Ft.x,Qt.y-Ft.y),Gt=Math.hypot(br.x-Ft.x,br.y-Ft.y);return Math.sqrt(yr*Gt)*Oe/25e-6},ke=Ze=>{const st=ye,wt=_e;return{aabb:o.tileAABB(this,B,0,0,0,Ze,wt,st,this.projection),zoom:0,x:0,y:0,minZ:wt,maxZ:st,wrap:Ze,fullyVisible:!1}},Ve=[];let Fe=[];const Ke=f,xt=c.reparseOverscaled?v:f,He=Ze=>Ze*Ze,ct=He((de-this._centerAltitude)*he),Je=Ze=>{if(!this._elevation||!Ze.tileID||!T)return;const st=this._elevation.getMinMaxForTile(Ze.tileID),wt=Ze.aabb;st?(wt.min[2]=st.min,wt.max[2]=st.max,wt.center[2]=(wt.min[2]+wt.max[2])/2):(Ze.shouldSplit=_t(Ze),Ze.shouldSplit||(wt.min[2]=wt.max[2]=wt.center[2]=this._centerAltitude))},_t=Ze=>{if(Ze.zoom<le)return!0;if(Ze.zoom===Ke)return!1;if(Ze.shouldSplit!=null)return Ze.shouldSplit;const st=Ze.aabb.distanceX(pe),wt=Ze.aabb.distanceY(pe);let pt=ct,St=1;if(q){pt=He(Ze.aabb.distanceZ(pe));const Ft=Math.pow(2,Ze.zoom),Qt=o.latFromMercatorY((Ze.y+1)/Ft),br=o.latFromMercatorY(Ze.y/Ft),yr=Math.min(Math.max(D,Qt),br),Gt=o.circumferenceAtLatitude(yr)/o.circumferenceAtLatitude(D);if(St=yr===D?1/Math.max(1,this._mercatorScaleRatio-.3):Math.min(1,Gt/this._mercatorScaleRatio),this.zoom<=o.GLOBE_ZOOM_THRESHOLD_MIN&&Ze.zoom===Ke-1&&Gt>=.9)return!0}else if(b&&(pt=He(Ze.aabb.distanceZ(pe)*he)),this.projection.isReprojectedInTileSpace&&v<=5){const Ft=Math.pow(2,Ze.zoom),Qt=De(new o.MercatorCoordinate((Ze.x+.5)/Ft,(Ze.y+.5)/Ft));St=Qt>.85?1:Qt}const Ht=st*st+wt*wt+pt,ir=He((1<<Ke-Ze.zoom)*ee*St*((Ft,Qt)=>{if(Qt*He(.707)<Ft)return 1;const br=Math.sqrt(Qt/Ft);return br/(1.4144271570014144+(Math.pow(1.1,br-1.4144271570014144+1)-1)/(1.1-1)-1)})(Math.max(pt,ct),Ht));return Ht<ir};if(this.renderWorldCopies)for(let Ze=1;Ze<=3;Ze++)Ve.push(ke(-Ze)),Ve.push(ke(Ze));for(Ve.push(ke(0));Ve.length>0;){const Ze=Ve.pop(),st=Ze.x,wt=Ze.y;let pt=Ze.fullyVisible;if(!pt){const St=Ze.aabb.intersects(ae);if(St===0)continue;pt=St===2}if(Ze.zoom!==Ke&&_t(Ze))for(let St=0;St<4;St++){const Ht=(st<<1)+St%2,ir=(wt<<1)+(St>>1),Ft={aabb:T?Ze.aabb.quadrant(St):o.tileAABB(this,B,Ze.zoom+1,Ht,ir,Ze.wrap,Ze.minZ,Ze.maxZ,this.projection),zoom:Ze.zoom+1,x:Ht,y:ir,wrap:Ze.wrap,fullyVisible:pt,tileID:void 0,shouldSplit:void 0,minZ:Ze.minZ,maxZ:Ze.maxZ};b&&!q&&(Ft.tileID=new o.OverscaledTileID(Ze.zoom+1===Ke?xt:Ze.zoom+1,Ze.wrap,Ze.zoom+1,Ht,ir),Je(Ft)),Ve.push(Ft)}else{const St=Ze.zoom===Ke?xt:Ze.zoom;if(c.minzoom&&c.minzoom>St)continue;const Ht=H[0]-(.5+st+(Ze.wrap<<Ze.zoom))*(1<<f-Ze.zoom),ir=H[1]-.5-wt,Ft=Ze.tileID?Ze.tileID:new o.OverscaledTileID(St,Ze.wrap,Ze.zoom,st,wt);Fe.push({tileID:Ft,distanceSq:Ht*Ht+ir*ir})}}if(this.fogCullDistSq){const Ze=this.fogCullDistSq,st=this.horizonLineFromTop();Fe=Fe.filter(wt=>{const pt=[0,0,0,1],St=[o.EXTENT,o.EXTENT,0,1],Ht=this.calculateFogTileMatrix(wt.tileID.toUnwrapped());o.transformMat4$1(pt,pt,Ht),o.transformMat4$1(St,St,Ht);const ir=o.getAABBPointSquareDist(pt,St);if(ir===0)return!0;let Ft=!1;const Qt=this._elevation;if(Qt&&ir>Ze&&st!==0){const br=this.calculateProjMatrix(wt.tileID.toUnwrapped());let yr;c.isTerrainDEM||(yr=Qt.getMinMaxForTile(wt.tileID)),yr||(yr={min:_e,max:ye});const Gt=o.furthestTileCorner(this.rotation),Nr=[Gt[0]*o.EXTENT,Gt[1]*o.EXTENT,yr.max];o.transformMat4(Nr,Nr,br),Ft=(1-Nr[1])*this.height*.5<st}return ir<Ze||Ft})}return Fe.sort((Ze,st)=>Ze.distanceSq-st.distanceSq).map(Ze=>Ze.tileID)}resize(c,f){this.width=c,this.height=f,this.pixelsToGLUnits=[2/c,-2/f],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(c){return Math.pow(2,c)}scaleZoom(c){return Math.log(c)/Math.LN2}project(c){const f=o.clamp(c.lat,-o.MAX_MERCATOR_LATITUDE,o.MAX_MERCATOR_LATITUDE),v=this.projection.project(c.lng,f);return new o.Point(v.x*this.worldSize,v.y*this.worldSize)}unproject(c){return this.projection.unproject(c.x/this.worldSize,c.y/this.worldSize)}get point(){return this.project(this.center)}get pointMerc(){return this.point._div(this.worldSize)}get pixelsPerMeterRatio(){return this.pixelsPerMeter/o.mercatorZfromAltitude(1,this.center.lat)/this.worldSize}setLocationAtPoint(c,f){let v,b;const T=this.centerPoint;if(this.projection.name==="globe"){const D=this.worldSize;v=(f.x-T.x)/D,b=(f.y-T.y)/D}else{const D=this.pointCoordinate(f),B=this.pointCoordinate(T);v=D.x-B.x,b=D.y-B.y}const O=this.locationCoordinate(c);this.setLocation(new o.MercatorCoordinate(O.x-v,O.y-b))}setLocation(c){this.center=this.coordinateLocation(c),this.projection.wrap&&(this.center=this.center.wrap())}locationPoint(c){return this.projection.locationPoint(this,c)}locationPoint3D(c){return this.projection.locationPoint(this,c,!0)}pointLocation(c){return this.coordinateLocation(this.pointCoordinate(c))}pointLocation3D(c){return this.coordinateLocation(this.pointCoordinate3D(c))}locationCoordinate(c,f){const v=f?o.mercatorZfromAltitude(f,c.lat):void 0,b=this.projection.project(c.lng,c.lat);return new o.MercatorCoordinate(b.x,b.y,v)}coordinateLocation(c){return this.projection.unproject(c.x,c.y)}pointRayIntersection(c,f){const v=f??this._centerAltitude,b=[c.x,c.y,0,1],T=[c.x,c.y,1,1];o.transformMat4$1(b,b,this.pixelMatrixInverse),o.transformMat4$1(T,T,this.pixelMatrixInverse);const O=T[3];o.scale$1(b,b,1/b[3]),o.scale$1(T,T,1/O);const D=b[2],B=T[2];return{p0:b,p1:T,t:D===B?0:(v-D)/(B-D)}}screenPointToMercatorRay(c){const f=[c.x,c.y,0,1],v=[c.x,c.y,1,1];return o.transformMat4$1(f,f,this.pixelMatrixInverse),o.transformMat4$1(v,v,this.pixelMatrixInverse),o.scale$1(f,f,1/f[3]),o.scale$1(v,v,1/v[3]),f[2]=o.mercatorZfromAltitude(f[2],this._center.lat)*this.worldSize,v[2]=o.mercatorZfromAltitude(v[2],this._center.lat)*this.worldSize,o.scale$1(f,f,1/this.worldSize),o.scale$1(v,v,1/this.worldSize),new o.Ray([f[0],f[1],f[2]],o.normalize([],o.sub([],v,f)))}rayIntersectionCoordinate(c){const{p0:f,p1:v,t:b}=c,T=o.mercatorZfromAltitude(f[2],this._center.lat),O=o.mercatorZfromAltitude(v[2],this._center.lat);return new o.MercatorCoordinate(o.number(f[0],v[0],b)/this.worldSize,o.number(f[1],v[1],b)/this.worldSize,o.number(T,O,b))}pointCoordinate(c,f=this._centerAltitude){return this.projection.pointCoordinate(this,c.x,c.y,f)}pointCoordinate3D(c){if(!this.elevation)return this.pointCoordinate(c);let f=this.projection.pointCoordinate3D(this,c.x,c.y);if(f)return new o.MercatorCoordinate(f[0],f[1],f[2]);let v=0,b=this.horizonLineFromTop();if(c.y>b)return this.pointCoordinate(c);const T=.02*b,O=c.clone();for(let D=0;D<10&&b-v>T;D++){O.y=o.number(v,b,.66);const B=this.projection.pointCoordinate3D(this,O.x,O.y);B?(b=O.y,f=B):v=O.y}return f?new o.MercatorCoordinate(f[0],f[1],f[2]):this.pointCoordinate(c)}isPointAboveHorizon(c){return this.projection.isPointAboveHorizon(this,c)}isPointOnSurface(c){if(c.y<0||c.y>this.height||c.x<0||c.x>this.width)return!1;if(this.elevation||this.zoom>=o.GLOBE_ZOOM_THRESHOLD_MAX)return!this.isPointAboveHorizon(c);const f=this.pointCoordinate(c);return f.y>=0&&f.y<=1}_coordinatePoint(c,f){const v=f&&this.elevation?this.elevation.getAtPointOrZero(c,this._centerAltitude):this._centerAltitude,b=[c.x*this.worldSize,c.y*this.worldSize,v+c.toAltitude(),1];return o.transformMat4$1(b,b,this.pixelMatrix),b[3]>0?new o.Point(b[0]/b[3],b[1]/b[3]):new o.Point(Number.MAX_VALUE,Number.MAX_VALUE)}_getBoundsNonRectangular(){const{top:c,left:f}=this._edgeInsets,v=this.height-this._edgeInsets.bottom,b=this.width-this._edgeInsets.right,T=this.pointLocation3D(new o.Point(f,c)),O=this.pointLocation3D(new o.Point(b,c)),D=this.pointLocation3D(new o.Point(b,v)),B=this.pointLocation3D(new o.Point(f,v));let H=Math.min(T.lng,O.lng,D.lng,B.lng),q=Math.max(T.lng,O.lng,D.lng,B.lng),J=Math.min(T.lat,O.lat,D.lat,B.lat),ae=Math.max(T.lat,O.lat,D.lat,B.lat);const ce=Math.pow(2,-this.zoom)/16*270,he=this.projection.name==="globe"?1:4,de=(pe,ee,le,ye,_e)=>{const Oe=(pe+le)/2,De=(ee+ye)/2,ke=new o.Point(Oe,De),{lng:Ve,lat:Fe}=this.pointLocation3D(ke),Ke=Math.max(0,H-Ve,J-Fe,Ve-q,Fe-ae);H=Math.min(H,Ve),q=Math.max(q,Ve),J=Math.min(J,Fe),ae=Math.max(ae,Fe),(_e<he||Ke>ce)&&(de(pe,ee,Oe,De,_e+1),de(Oe,De,le,ye,_e+1))};if(de(f,c,b,c,1),de(b,c,b,v,1),de(b,v,f,v,1),de(f,v,f,c,1),this.projection.name==="globe"){const[pe,ee]=o.polesInViewport(this);pe?(ae=90,q=180,H=-180):ee&&(J=-90,q=180,H=-180)}return new o.LngLatBounds(new o.LngLat(H,J),new o.LngLat(q,ae))}_getBoundsRectangular(c,f){const{top:v,left:b}=this._edgeInsets,T=this.height-this._edgeInsets.bottom,O=this.width-this._edgeInsets.right,D=new o.Point(b,v),B=new o.Point(O,v),H=new o.Point(O,T),q=new o.Point(b,T);let J=this.pointCoordinate(D,c),ae=this.pointCoordinate(B,c);const ce=this.pointCoordinate(H,f),he=this.pointCoordinate(q,f),de=(pe,ee)=>(ee.y-pe.y)/(ee.x-pe.x);return J.y>1&&ae.y>=0?J=new o.MercatorCoordinate((1-he.y)/de(he,J)+he.x,1):J.y<0&&ae.y<=1&&(J=new o.MercatorCoordinate(-he.y/de(he,J)+he.x,0)),ae.y>1&&J.y>=0?ae=new o.MercatorCoordinate((1-ce.y)/de(ce,ae)+ce.x,1):ae.y<0&&J.y<=1&&(ae=new o.MercatorCoordinate(-ce.y/de(ce,ae)+ce.x,0)),new o.LngLatBounds().extend(this.coordinateLocation(J)).extend(this.coordinateLocation(ae)).extend(this.coordinateLocation(he)).extend(this.coordinateLocation(ce))}_getBoundsRectangularTerrain(){const c=this.elevation;if(!c.visibleDemTiles.length||c.isUsingMockSource())return this._getBoundsRectangular(0,0);const f=c.visibleDemTiles.reduce((v,b)=>{if(b.dem){const T=b.dem.tree;v.min=Math.min(v.min,T.minimums[0]),v.max=Math.max(v.max,T.maximums[0])}return v},{min:Number.MAX_VALUE,max:0});return this._getBoundsRectangular(f.min*c.exaggeration(),f.max*c.exaggeration())}getBounds(){return this.projection.name==="mercator"||this.projection.name==="equirectangular"?this._terrainEnabled()?this._getBoundsRectangularTerrain():this._getBoundsRectangular(0,0):this._getBoundsNonRectangular()}horizonLineFromTop(c=!0){const f=this.height/2/Math.tan(this._fov/2)/Math.tan(Math.max(this._pitch,.1))+this.centerOffset.y,v=this.height/2-f*(1-this._horizonShift);return c?Math.max(0,v):v}getMaxBounds(){return this.maxBounds}setMaxBounds(c){this.maxBounds=c,this.minLat=-o.MAX_MERCATOR_LATITUDE,this.maxLat=o.MAX_MERCATOR_LATITUDE,this.minLng=-180,this.maxLng=180,c&&(this.minLat=c.getSouth(),this.maxLat=c.getNorth(),this.minLng=c.getWest(),this.maxLng=c.getEast(),this.maxLng<this.minLng&&(this.maxLng+=360)),this.worldMinX=o.mercatorXfromLng(this.minLng)*this.tileSize,this.worldMaxX=o.mercatorXfromLng(this.maxLng)*this.tileSize,this.worldMinY=o.mercatorYfromLat(this.maxLat)*this.tileSize,this.worldMaxY=o.mercatorYfromLat(this.minLat)*this.tileSize,this._constrain()}calculatePosMatrix(c,f){return this.projection.createTileMatrix(this,f,c)}calculateDistanceTileData(c){const f=c.key,v=this._distanceTileDataCache;if(v[f])return v[f];const b=c.canonical,T=1/this.height,O=this.cameraWorldSize,D=O/this.zoomScale(b.z),B=(b.x+Math.pow(2,b.z)*c.wrap)*D,H=b.y*D,q=this.point;q.x*=O/this.worldSize,q.y*=O/this.worldSize;const J=this.angle,ae=Math.sin(-J),ce=-Math.cos(-J);return v[f]={bearing:[ae,ce],center:[(q.x-B)*T,(q.y-H)*T],scale:D/o.EXTENT*T},v[f]}calculateFogTileMatrix(c){const f=c.key,v=this._fogTileMatrixCache;if(v[f])return v[f];const b=this.projection.createTileMatrix(this,this.cameraWorldSizeForFog,c);return o.multiply(b,this.worldToFogMatrix,b),v[f]=new Float32Array(b),v[f]}calculateProjMatrix(c,f=!1){const v=c.key,b=f?this._alignedProjMatrixCache:this._projMatrixCache;if(b[v])return b[v];const T=this.calculatePosMatrix(c,this.worldSize);return o.multiply(T,this.projection.isReprojectedInTileSpace?this.mercatorMatrix:f?this.alignedProjMatrix:this.projMatrix,T),b[v]=new Float32Array(T),b[v]}calculatePixelsToTileUnitsMatrix(c){const f=c.tileID.key,v=this._pixelsToTileUnitsCache;if(v[f])return v[f];const b=function(T,O){const{scale:D}=T.tileTransform,B=D*o.EXTENT/(T.tileSize*Math.pow(2,O.zoom-T.tileID.overscaledZ+T.tileID.canonical.z));return H=new Float32Array(4),ae=(q=O.inverseAdjustmentMatrix)[1],ce=q[2],he=q[3],pe=(J=[B,B])[1],H[0]=q[0]*(de=J[0]),H[1]=ae*de,H[2]=ce*pe,H[3]=he*pe,H;var H,q,J,ae,ce,he,de,pe}(c,this);return v[f]=b,v[f]}customLayerMatrix(){return this.mercatorMatrix.slice()}globeToMercatorMatrix(){if(this.projection.name==="globe"){const c=1/this.worldSize,f=o.fromScaling([],[c,c,c]);return o.multiply(f,f,this.globeMatrix),f}}recenterOnTerrain(){if(!this._elevation||this.projection.name==="globe")return;const c=this._elevation;this._updateCameraState();const f=o.mercatorZfromAltitude(1,this._center.lat)*this.worldSize,v=this._computeCameraPosition(f),b=this._camera.forward(),T=o.mercatorZfromAltitude(1,this._center.lat);v[2]/=T,b[2]/=T,o.normalize(b,b);const O=c.raycast(v,b,c.exaggeration());if(O){const D=o.scaleAndAdd([],v,b,O),B=new o.MercatorCoordinate(D[0],D[1],o.mercatorZfromAltitude(D[2],o.latFromMercatorY(D[1]))),H=(B.z+o.length([B.x-v[0],B.y-v[1],B.z-v[2]*T]))*this._pixelsPerMercatorPixel;this._seaLevelZoom=this._zoomFromMercatorZ(H),this._centerAltitude=B.toAltitude(),this._center=this.coordinateLocation(B),this._updateZoomFromElevation(),this._constrain(),this._calcMatrices()}}_constrainCamera(c=!1){if(!this._elevation)return;const f=this._elevation,v=o.mercatorZfromAltitude(1,this._center.lat)*this.worldSize,b=this._computeCameraPosition(v),T=f.getAtPointOrZero(new o.MercatorCoordinate(...b)),O=this.pixelsPerMeter/this.worldSize*T,D=this._minimumHeightOverTerrain(),B=b[2]-O;if(B<=D)if(B<0||c){const H=this.locationCoordinate(this._center,this._centerAltitude),q=[b[0],b[1],H.z-b[2]],J=o.length(q);q[2]-=(D-B)/this._pixelsPerMercatorPixel;const ae=o.length(q);if(ae===0)return;o.scale$2(q,q,J/ae*this._pixelsPerMercatorPixel),this._camera.position=[b[0],b[1],H.z*this._pixelsPerMercatorPixel-q[2]],this._updateStateFromCamera()}else this._isCameraConstrained=!0}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;const c=this.projection.name==="globe"||this.mercatorFromTransition;if(this.projection.isReprojectedInTileSpace||c){const ae=this.center;return ae.lat=o.clamp(ae.lat,this.minLat,this.maxLat),(this.maxBounds||!this.renderWorldCopies&&!c)&&(ae.lng=o.clamp(ae.lng,this.minLng,this.maxLng)),this.center=ae,void(this._constraining=!1)}const f=this._unmodified,{x:v,y:b}=this.point;let T=0,O=v,D=b;const B=this.width/2,H=this.height/2,q=this.worldMinY*this.scale,J=this.worldMaxY*this.scale;if(b-H<q&&(D=q+H),b+H>J&&(D=J-H),J-q<this.height&&(T=Math.max(T,this.height/(J-q)),D=(J+q)/2),this.maxBounds||!this._renderWorldCopies||!this.projection.wrap){const ae=this.worldMinX*this.scale,ce=this.worldMaxX*this.scale,he=this.worldSize/2-(ae+ce)/2;O=(v+he+this.worldSize)%this.worldSize-he,O-B<ae&&(O=ae+B),O+B>ce&&(O=ce-B),ce-ae<this.width&&(T=Math.max(T,this.width/(ce-ae)),O=(ce+ae)/2)}O===v&&D===b||(this.center=this.unproject(new o.Point(O,D))),T&&(this.zoom+=this.scaleZoom(T)),this._constrainCamera(),this._unmodified=f,this._constraining=!1}_minZoomForBounds(){let c=Math.max(0,this.scaleZoom(this.height/(this.worldMaxY-this.worldMinY)));return this.maxBounds&&(c=Math.max(c,this.scaleZoom(this.width/(this.worldMaxX-this.worldMinX)))),c}_maxCameraBoundsDistance(){return this._mercatorZfromZoom(this._minZoomForBounds())}_calcMatrices(){if(!this.height)return;const c=this.centerOffset,f=this.pixelsPerMeter;this.projection.name==="globe"&&(this._mercatorScaleRatio=o.mercatorZfromAltitude(1,this.center.lat)/o.mercatorZfromAltitude(1,o.GLOBE_SCALE_MATCH_LATITUDE));const v=Bh(this.projection,this.zoom,this.width,this.height,1024);this._pixelsPerMercatorPixel=this.projection.pixelSpaceConversion(this.center.lat,this.worldSize,v),this.cameraToCenterDistance=.5/Math.tan(.5*this._fov)*this.height*this._pixelsPerMercatorPixel,this._updateCameraState(),this._farZ=this.projection.farthestPixelDistance(this),this._nearZ=this.height/50;const b=this.projection.zAxisUnit==="meters"?f:1,T=this._camera.getWorldToCamera(this.worldSize,b),O=this._camera.getCameraToClipPerspective(this._fov,this.width/this.height,this._nearZ,this._farZ);O[8]=2*-c.x/this.width,O[9]=2*c.y/this.height;let D=o.mul([],O,T);if(this.projection.isReprojectedInTileSpace){const De=this.locationCoordinate(this.center),ke=o.identity([]);o.translate(ke,ke,[De.x*this.worldSize,De.y*this.worldSize,0]),o.multiply(ke,ke,Ec(this)),o.translate(ke,ke,[-De.x*this.worldSize,-De.y*this.worldSize,0]),o.multiply(D,D,ke),this.inverseAdjustmentMatrix=function(Ve){const Fe=Ec(Ve,!0);return ne([],[Fe[0],Fe[1],Fe[4],Fe[5]])}(this)}else this.inverseAdjustmentMatrix=[1,0,0,1];this.mercatorMatrix=o.scale([],D,[this.worldSize,this.worldSize,this.worldSize/b,1]),this.projMatrix=D,this.invProjMatrix=o.invert(new Float64Array(16),this.projMatrix);const B=o.invert([],O);this.frustumCorners=o.FrustumCorners.fromInvProjectionMatrix(B,this.horizonLineFromTop(),this.height);const H=new Float32Array(16);o.identity(H),o.scale(H,H,[1,-1,1]),o.rotateX(H,H,this._pitch),o.rotateZ(H,H,this.angle);const q=o.perspective(new Float32Array(16),this._fov,this.width/this.height,this._nearZ,this._farZ),J=(Math.PI/2-this._pitch)*(this.height/this._fov)*this._horizonShift;q[8]=2*-c.x/this.width,q[9]=2*(c.y+J)/this.height,this.skyboxMatrix=o.multiply(H,q,H);const ae=this.point,ce=ae.x,he=ae.y,de=this.width%2/2,pe=this.height%2/2,ee=Math.cos(this.angle),le=Math.sin(this.angle),ye=ce-Math.round(ce)+ee*de+le*pe,_e=he-Math.round(he)+ee*pe+le*de,Oe=new Float64Array(D);if(o.translate(Oe,Oe,[ye>.5?ye-1:ye,_e>.5?_e-1:_e,0]),this.alignedProjMatrix=Oe,D=o.create(),o.scale(D,D,[this.width/2,-this.height/2,1]),o.translate(D,D,[1,-1,0]),this.labelPlaneMatrix=D,D=o.create(),o.scale(D,D,[1,-1,1]),o.translate(D,D,[-1,-1,0]),o.scale(D,D,[2/this.width,2/this.height,1]),this.glCoordMatrix=D,this.pixelMatrix=o.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),this._calcFogMatrices(),this._distanceTileDataCache={},D=o.invert(new Float64Array(16),this.pixelMatrix),!D)throw new Error("failed to invert matrix");if(this.pixelMatrixInverse=D,this.projection.name==="globe"||this.mercatorFromTransition){this.globeMatrix=o.calculateGlobeMatrix(this);const De=[this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]];this.globeCenterInViewSpace=o.transformMat4(De,De,T),this.globeRadius=this.worldSize/2/Math.PI-1}else this.globeMatrix=D;this._projMatrixCache={},this._alignedProjMatrixCache={},this._pixelsToTileUnitsCache={}}_calcFogMatrices(){this._fogTileMatrixCache={};const c=this.cameraWorldSizeForFog,f=this.cameraPixelsPerMeter,v=this._camera.position,b=1/this.height/this._pixelsPerMercatorPixel,T=[c,c,f];o.scale$2(T,T,b),o.scale$2(v,v,-1),o.multiply$2(v,v,T);const O=o.create();o.translate(O,O,v),o.scale(O,O,T),this.mercatorFogMatrix=O,this.worldToFogMatrix=this._camera.getWorldToCameraPosition(c,f,b)}_computeCameraPosition(c){const f=(c=c||this.pixelsPerMeter)/this.pixelsPerMeter,v=this._camera.forward(),b=this.point,T=this._mercatorZfromZoom(this._seaLevelZoom?this._seaLevelZoom:this._zoom)*f-c/this.worldSize*this._centerAltitude;return[b.x/this.worldSize-v[0]*T,b.y/this.worldSize-v[1]*T,c/this.worldSize*this._centerAltitude-v[2]*T]}_updateCameraState(){this.height&&(this._camera.setPitchBearing(this._pitch,this.angle),this._camera.position=this._computeCameraPosition())}_translateCameraConstrained(c){const f=this._maxCameraBoundsDistance()*Math.cos(this._pitch),v=this._camera.position[2],b=c[2];let T=1;this.projection.wrap&&(this.center=this.center.wrap()),b>0&&(T=Math.min((f-v)/b,1)),this._camera.position=o.scaleAndAdd([],this._camera.position,c,T),this._updateStateFromCamera()}_updateStateFromCamera(){const c=this._camera.position,f=this._camera.forward(),{pitch:v,bearing:b}=this._camera.getPitchBearing(),T=o.mercatorZfromAltitude(this._centerAltitude,this.center.lat)*this._pixelsPerMercatorPixel,O=this._mercatorZfromZoom(this._maxZoom)*Math.cos(o.degToRad(this._maxPitch)),D=Math.max((c[2]-T)/Math.cos(v),O),B=this._zoomFromMercatorZ(D);o.scaleAndAdd(c,c,f,D),this._pitch=o.clamp(v,o.degToRad(this.minPitch),o.degToRad(this.maxPitch)),this.angle=o.wrap(b,-Math.PI,Math.PI),this._setZoom(o.clamp(B,this._minZoom,this._maxZoom)),this._updateSeaLevelZoom(),this._center=this.coordinateLocation(new o.MercatorCoordinate(c[0],c[1],c[2])),this._unmodified=!1,this._constrain(),this._calcMatrices()}_worldSizeFromZoom(c){return Math.pow(2,c)*this.tileSize}_mercatorZfromZoom(c){return this.cameraToCenterDistance/this._worldSizeFromZoom(c)}_minimumHeightOverTerrain(){const c=Math.min((this._seaLevelZoom!=null?this._seaLevelZoom:this._zoom)+4,this._maxZoom);return this._mercatorZfromZoom(c)}_zoomFromMercatorZ(c){return this.scaleZoom(this.cameraToCenterDistance/(c*this.tileSize))}zoomFromMercatorZAdjusted(c){let f=0,v=o.GLOBE_ZOOM_THRESHOLD_MAX,b=0,T=1/0;for(;v-f>1e-6&&v>f;){const O=f+.5*(v-f),D=this.tileSize*Math.pow(2,O),B=this.getCameraToCenterDistance(this.projection,O,D),H=this.scaleZoom(B/(c*this.tileSize)),q=Math.abs(O-H);q<T&&(T=q,b=O),O<H?f=O:v=O}return b}_terrainEnabled(){return!(!this._elevation||!this.projection.supportsTerrain&&(o.warnOnce("Terrain is not yet supported with alternate projections. Use mercator or globe to enable terrain."),1))}anyCornerOffEdge(c,f){const v=Math.min(c.x,f.x),b=Math.max(c.x,f.x),T=Math.min(c.y,f.y),O=Math.max(c.y,f.y);if(T<this.horizonLineFromTop(!1))return!0;if(this.projection.name!=="mercator")return!1;const D=[new o.Point(v,T),new o.Point(b,O),new o.Point(v,O),new o.Point(b,T)],B=this.renderWorldCopies?-3:0,H=this.renderWorldCopies?4:1;for(const q of D){const J=this.pointRayIntersection(q);if(J.t<0)return!0;const ae=this.rayIntersectionCoordinate(J);if(ae.x<B||ae.y<0||ae.x>H||ae.y>1)return!0}return!1}isHorizonVisible(){return this.pitch+o.radToDeg(this.fovAboveCenter)>88||this.anyCornerOffEdge(new o.Point(0,0),new o.Point(this.width,this.height))}zoomDeltaToMovement(c,f){const v=o.length(o.sub([],this._camera.position,c)),b=this._zoomFromMercatorZ(v)+f;return v-this._mercatorZfromZoom(b)}getCameraPoint(){if(this.projection.name==="globe"){const c=function([f,v,b],T){const O=[f,v,b,1];o.transformMat4$1(O,O,T);const D=O[3]=Math.max(O[3],1e-6);return O[0]/=D,O[1]/=D,O[2]/=D,O}([this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]],this.pixelMatrix);return new o.Point(c[0],c[1])}{const c=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new o.Point(0,c))}}getCameraToCenterDistance(c,f=this.zoom,v=this.worldSize){const b=Bh(c,f,this.width,this.height,1024),T=c.pixelSpaceConversion(this.center.lat,v,b);return .5/Math.tan(.5*this._fov)*this.height*T}getWorldToCameraMatrix(){const c=this._camera.getWorldToCamera(this.worldSize,this.projection.zAxisUnit==="meters"?this.pixelsPerMeter:1);return this.projection.name==="globe"&&o.multiply(c,c,this.globeMatrix),c}}function Ac(g,c){let f=!1,v=null;const b=()=>{v=null,f&&(g(),v=setTimeout(b,c),f=!1)};return()=>(f=!0,v||b(),v)}class Xm{constructor(c){this._hashName=c&&encodeURIComponent(c),o.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=Ac(this._updateHashUnthrottled.bind(this),300)}addTo(c){return this._map=c,o.window.addEventListener("hashchange",this._onHashChange,!1),c.on("moveend",this._updateHash),this}remove(){return this._map?(this._map.off("moveend",this._updateHash),o.window.removeEventListener("hashchange",this._onHashChange,!1),clearTimeout(this._updateHash()),this._map=void 0,this):this}getHashString(){const c=this._map;if(!c)return"";const f=sd(c);if(this._hashName){const v=this._hashName;let b=!1;const T=o.window.location.hash.slice(1).split("&").map(O=>{const D=O.split("=")[0];return D===v?(b=!0,`${D}=${f}`):O}).filter(O=>O);return b||T.push(`${v}=${f}`),`#${T.join("&")}`}return`#${f}`}_getCurrentHash(){const c=o.window.location.hash.replace("#","");if(this._hashName){let f;return c.split("&").map(v=>v.split("=")).forEach(v=>{v[0]===this._hashName&&(f=v)}),(f&&f[1]||"").split("/")}return c.split("/")}_onHashChange(){const c=this._map;if(!c)return!1;const f=this._getCurrentHash();if(f.length>=3&&!f.some(v=>isNaN(v))){const v=c.dragRotate.isEnabled()&&c.touchZoomRotate.isEnabled()?+(f[3]||0):c.getBearing();return c.jumpTo({center:[+f[2],+f[1]],zoom:+f[0],bearing:v,pitch:+(f[4]||0)}),!0}return!1}_updateHashUnthrottled(){const c=o.window.location.href.replace(/(#.+)?$/,this.getHashString());o.window.history.replaceState(o.window.history.state,null,c)}}function sd(g,c){const f=g.getCenter(),v=Math.round(100*g.getZoom())/100,b=Math.ceil((v*Math.LN2+Math.log(512/360/.5))/Math.LN10),T=Math.pow(10,b),O=Math.round(f.lng*T)/T,D=Math.round(f.lat*T)/T,B=g.getBearing(),H=g.getPitch();let q=c?`/${O}/${D}/${v}`:`${v}/${D}/${O}`;return(B||H)&&(q+="/"+Math.round(10*B)/10),H&&(q+=`/${Math.round(H)}`),q}const ld={linearity:.3,easing:o.bezier(0,0,.3,1)},Fh=o.extend({deceleration:2500,maxSpeed:1400},ld),Uh=o.extend({deceleration:20,maxSpeed:1400},ld),Bt=o.extend({deceleration:1e3,maxSpeed:360},ld),Ho=o.extend({deceleration:1e3,maxSpeed:90},ld);class V_{constructor(c){this._map=c,this.clear()}clear(){this._inertiaBuffer=[]}record(c){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:o.exported.now(),settings:c})}_drainInertiaBuffer(){const c=this._inertiaBuffer,f=o.exported.now();for(;c.length>0&&f-c[0].time>160;)c.shift()}_onMoveEnd(c){if(this._map._prefersReducedMotion()||(this._drainInertiaBuffer(),this._inertiaBuffer.length<2))return;const f={zoom:0,bearing:0,pitch:0,pan:new o.Point(0,0),pinchAround:void 0,around:void 0};for(const{settings:T}of this._inertiaBuffer)f.zoom+=T.zoomDelta||0,f.bearing+=T.bearingDelta||0,f.pitch+=T.pitchDelta||0,T.panDelta&&f.pan._add(T.panDelta),T.around&&(f.around=T.around),T.pinchAround&&(f.pinchAround=T.pinchAround);const v=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,b={};if(f.pan.mag()){const T=ud(f.pan.mag(),v,o.extend({},Fh,c||{}));b.offset=f.pan.mult(T.amount/f.pan.mag()),b.center=this._map.transform.center,cd(b,T)}if(f.zoom){const T=ud(f.zoom,v,Uh);b.zoom=this._map.transform.zoom+T.amount,cd(b,T)}if(f.bearing){const T=ud(f.bearing,v,Bt);b.bearing=this._map.transform.bearing+o.clamp(T.amount,-179,179),cd(b,T)}if(f.pitch){const T=ud(f.pitch,v,Ho);b.pitch=this._map.transform.pitch+T.amount,cd(b,T)}if(b.zoom||b.bearing){const T=f.pinchAround===void 0?f.around:f.pinchAround;b.around=T?this._map.unproject(T):this._map.getCenter()}return this.clear(),b.noMoveStart=!0,b}}function cd(g,c){(!g.duration||g.duration<c.duration)&&(g.duration=c.duration,g.easing=c.easing)}function ud(g,c,f){const{maxSpeed:v,linearity:b,deceleration:T}=f,O=o.clamp(g*b/(c/1e3),-v,v),D=Math.abs(O)/(T*b);return{easing:f.easing,duration:1e3*D,amount:O*(D/2)}}class ui extends o.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(c,f,v,b={}){const T=Y(f.getCanvasContainer(),v),O=f.unproject(T);super(c,o.extend({point:T,lngLat:O,originalEvent:v},b)),this._defaultPrevented=!1,this.target=f}}class dd extends o.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(c,f,v){const b=c==="touchend"?v.changedTouches:v.touches,T=Q(f.getCanvasContainer(),b),O=T.map(B=>f.unproject(B)),D=T.reduce((B,H,q,J)=>B.add(H.div(J.length)),new o.Point(0,0));super(c,{points:T,point:D,lngLats:O,lngLat:f.unproject(D),originalEvent:v}),this._defaultPrevented=!1}}class Vh extends o.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(c,f,v){super(c,{originalEvent:v}),this._defaultPrevented=!1}}class Zm{constructor(c,f){this._map=c,this._clickTolerance=f.clickTolerance}reset(){this._mousedownPos=void 0}wheel(c){return this._firePreventable(new Vh(c.type,this._map,c))}mousedown(c,f){return this._mousedownPos=f,this._firePreventable(new ui(c.type,this._map,c))}mouseup(c){this._map.fire(new ui(c.type,this._map,c))}preclick(c){const f=o.extend({},c);f.type="preclick",this._map.fire(new ui(f.type,this._map,f))}click(c,f){this._mousedownPos&&this._mousedownPos.dist(f)>=this._clickTolerance||(this.preclick(c),this._map.fire(new ui(c.type,this._map,c)))}dblclick(c){return this._firePreventable(new ui(c.type,this._map,c))}mouseover(c){this._map.fire(new ui(c.type,this._map,c))}mouseout(c){this._map.fire(new ui(c.type,this._map,c))}touchstart(c){return this._firePreventable(new dd(c.type,this._map,c))}touchmove(c){this._map.fire(new dd(c.type,this._map,c))}touchend(c){this._map.fire(new dd(c.type,this._map,c))}touchcancel(c){this._map.fire(new dd(c.type,this._map,c))}_firePreventable(c){if(this._map.fire(c),c.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Gh{constructor(c){this._map=c}reset(){this._delayContextMenu=!1,this._contextMenuEvent=void 0}mousemove(c){this._map.fire(new ui(c.type,this._map,c))}mousedown(){this._delayContextMenu=!0}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new ui("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(c){this._delayContextMenu?this._contextMenuEvent=c:this._map.fire(new ui(c.type,this._map,c)),this._map.listens("contextmenu")&&c.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class G_{constructor(c,f){this._map=c,this._el=c.getCanvasContainer(),this._container=c.getContainer(),this._clickTolerance=f.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(c,f){this.isEnabled()&&c.shiftKey&&c.button===0&&(z(),this._startPos=this._lastPos=f,this._active=!0)}mousemoveWindow(c,f){if(!this._active)return;const v=f,b=this._startPos,T=this._lastPos;if(!b||!T||T.equals(v)||!this._box&&v.dist(b)<this._clickTolerance)return;this._lastPos=v,this._box||(this._box=I("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",c));const O=Math.min(b.x,v.x),D=Math.max(b.x,v.x),B=Math.min(b.y,v.y),H=Math.max(b.y,v.y);this._map._requestDomTask(()=>{this._box&&(this._box.style.transform=`translate(${O}px,${B}px)`,this._box.style.width=D-O+"px",this._box.style.height=H-B+"px")})}mouseupWindow(c,f){if(!this._active)return;const v=this._startPos,b=f;if(v&&c.button===0){if(this.reset(),W(),v.x!==b.x||v.y!==b.y)return this._map.fire(new o.Event("boxzoomend",{originalEvent:c})),{cameraAnimation:T=>T.fitScreenCoordinates(v,b,this._map.getBearing(),{linear:!1})};this._fireEvent("boxzoomcancel",c)}}keydown(c){this._active&&c.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",c))}blur(){this.reset()}reset(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(this._box.remove(),this._box=null),F(),delete this._startPos,delete this._lastPos}_fireEvent(c,f){return this._map.fire(new o.Event(c,{originalEvent:f}))}}function Wh(g,c){const f={};for(let v=0;v<g.length;v++)f[g[v].identifier]=c[v];return f}class Pc{constructor(c){this.reset(),this.numTouches=c.numTouches}reset(){this.centroid=void 0,this.startTime=0,this.touches={},this.aborted=!1}touchstart(c,f,v){(this.centroid||v.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===0&&(this.startTime=c.timeStamp),v.length===this.numTouches&&(this.centroid=function(b){const T=new o.Point(0,0);for(const O of b)T._add(O);return T.div(b.length)}(f),this.touches=Wh(v,f)))}touchmove(c,f,v){if(this.aborted||!this.centroid)return;const b=Wh(v,f);for(const T in this.touches){const O=b[T];(!O||O.dist(this.touches[T])>30)&&(this.aborted=!0)}}touchend(c,f,v){if((!this.centroid||c.timeStamp-this.startTime>500)&&(this.aborted=!0),v.length===0){const b=!this.aborted&&this.centroid;if(this.reset(),b)return b}}}class Km{constructor(c){this.singleTap=new Pc(c),this.numTaps=c.numTaps,this.reset()}reset(){this.lastTime=1/0,this.lastTap=void 0,this.count=0,this.singleTap.reset()}touchstart(c,f,v){this.singleTap.touchstart(c,f,v)}touchmove(c,f,v){this.singleTap.touchmove(c,f,v)}touchend(c,f,v){const b=this.singleTap.touchend(c,f,v);if(b){const T=c.timeStamp-this.lastTime<500,O=!this.lastTap||this.lastTap.dist(b)<30;if(T&&O||this.reset(),this.count++,this.lastTime=c.timeStamp,this.lastTap=b,this.count===this.numTaps)return this.reset(),b}}}class MS{constructor(){this._zoomIn=new Km({numTouches:1,numTaps:2}),this._zoomOut=new Km({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(c,f,v){this._zoomIn.touchstart(c,f,v),this._zoomOut.touchstart(c,f,v)}touchmove(c,f,v){this._zoomIn.touchmove(c,f,v),this._zoomOut.touchmove(c,f,v)}touchend(c,f,v){const b=this._zoomIn.touchend(c,f,v),T=this._zoomOut.touchend(c,f,v);return b?(this._active=!0,c.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:O=>O.easeTo({duration:300,zoom:O.getZoom()+1,around:O.unproject(b)},{originalEvent:c})}):T?(this._active=!0,c.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:O=>O.easeTo({duration:300,zoom:O.getZoom()-1,around:O.unproject(T)},{originalEvent:c})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}const W_={0:1,2:2};class Cc{constructor(c){this.reset(),this._clickTolerance=c.clickTolerance||1}blur(){this.reset()}reset(){this._active=!1,this._moved=!1,this._lastPoint=void 0,this._eventButton=void 0}_correctButton(c,f){return!1}_move(c,f){return{}}mousedown(c,f){if(this._lastPoint)return;const v=Z(c);this._correctButton(c,v)&&(this._lastPoint=f,this._eventButton=v)}mousemoveWindow(c,f){const v=this._lastPoint;if(v){if(c.preventDefault(),this._eventButton!=null&&function(b,T){const O=W_[T];return b.buttons===void 0||(b.buttons&O)!==O}(c,this._eventButton))this.reset();else if(this._moved||!(f.dist(v)<this._clickTolerance))return this._moved=!0,this._lastPoint=f,this._move(v,f)}}mouseupWindow(c){this._lastPoint&&Z(c)===this._eventButton&&(this._moved&&W(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Ym extends Cc{mousedown(c,f){super.mousedown(c,f),this._lastPoint&&(this._active=!0)}_correctButton(c,f){return f===0&&!c.ctrlKey}_move(c,f){return{around:f,panDelta:f.sub(c)}}}class Jm extends Cc{_correctButton(c,f){return f===0&&c.ctrlKey||f===2}_move(c,f){const v=.8*(f.x-c.x);if(v)return this._active=!0,{bearingDelta:v}}contextmenu(c){c.preventDefault()}}class Qm extends Cc{_correctButton(c,f){return f===0&&c.ctrlKey||f===2}_move(c,f){const v=-.5*(f.y-c.y);if(v)return this._active=!0,{pitchDelta:v}}contextmenu(c){c.preventDefault()}}class qh{constructor(c,f){this._map=c,this._el=c.getCanvasContainer(),this._minTouches=1,this._clickTolerance=f.clickTolerance||1,this.reset(),o.bindAll(["_addTouchPanBlocker","_showTouchPanBlockerAlert"],this)}reset(){this._active=!1,this._touches={},this._sum=new o.Point(0,0)}touchstart(c,f,v){return this._calculateTransform(c,f,v)}touchmove(c,f,v){if(this._active&&!(v.length<this._minTouches)){if(this._map._cooperativeGestures&&!this._map.isMoving()){if(v.length===1&&!o.isFullscreen())return void this._showTouchPanBlockerAlert();this._alertContainer.style.visibility!=="hidden"&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}return c.cancelable&&c.preventDefault(),this._calculateTransform(c,f,v)}}touchend(c,f,v){this._calculateTransform(c,f,v),this._active&&v.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(c,f,v){v.length>0&&(this._active=!0);const b=Wh(v,f),T=new o.Point(0,0),O=new o.Point(0,0);let D=0;for(const H in b){const q=b[H],J=this._touches[H];J&&(T._add(q),O._add(q.sub(J)),D++,b[H]=q)}if(this._touches=b,D<this._minTouches||!O.mag())return;const B=O.div(D);return this._sum._add(B),this._sum.mag()<this._clickTolerance?void 0:{around:T.div(D),panDelta:B}}enable(){this._enabled=!0,this._map._cooperativeGestures&&(this._addTouchPanBlocker(),this._el.classList.add("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page"))}disable(){this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove(),this._el.classList.remove("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page")),this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}_addTouchPanBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=I("div","mapboxgl-touch-pan-blocker",this._map._container),this._alertContainer.textContent=this._map._getUIString("TouchPanBlocker.Message"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showTouchPanBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","null")},500)}}class hd{constructor(){this.reset()}reset(){this._active=!1,this._firstTwoTouches=void 0}_start(c){}_move(c,f,v){return{}}touchstart(c,f,v){this._firstTwoTouches||v.length<2||(this._firstTwoTouches=[v[0].identifier,v[1].identifier],this._start([f[0],f[1]]))}touchmove(c,f,v){const b=this._firstTwoTouches;if(!b)return;c.preventDefault();const[T,O]=b,D=fd(v,f,T),B=fd(v,f,O);if(!D||!B)return;const H=this._aroundCenter?null:D.add(B).div(2);return this._move([D,B],H,c)}touchend(c,f,v){if(!this._firstTwoTouches)return;const[b,T]=this._firstTwoTouches,O=fd(v,f,b),D=fd(v,f,T);O&&D||(this._active&&W(),this.reset())}touchcancel(){this.reset()}enable(c){this._enabled=!0,this._aroundCenter=!!c&&c.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function fd(g,c,f){for(let v=0;v<g.length;v++)if(g[v].identifier===f)return c[v]}function eg(g,c){return Math.log(g/c)/Math.LN2}class q_ extends hd{reset(){super.reset(),this._distance=0,this._startDistance=0}_start(c){this._startDistance=this._distance=c[0].dist(c[1])}_move(c,f){const v=this._distance;if(this._distance=c[0].dist(c[1]),this._active||!(Math.abs(eg(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:eg(this._distance,v),pinchAround:f}}}function tg(g,c){return 180*g.angleWith(c)/Math.PI}class H_ extends hd{reset(){super.reset(),this._minDiameter=0,this._startVector=void 0,this._vector=void 0}_start(c){this._startVector=this._vector=c[0].sub(c[1]),this._minDiameter=c[0].dist(c[1])}_move(c,f){const v=this._vector;if(this._vector=c[0].sub(c[1]),v&&(this._active||!this._isBelowThreshold(this._vector)))return this._active=!0,{bearingDelta:tg(this._vector,v),pinchAround:f}}_isBelowThreshold(c){this._minDiameter=Math.min(this._minDiameter,c.mag());const f=25/(Math.PI*this._minDiameter)*360,v=this._startVector;if(!v)return!1;const b=tg(c,v);return Math.abs(b)<f}}function Ns(g){return Math.abs(g.y)>Math.abs(g.x)}class X_ extends hd{constructor(c){super(),this._map=c}reset(){super.reset(),this._valid=void 0,this._firstMove=void 0,this._lastPoints=void 0}_start(c){this._lastPoints=c,Ns(c[0].sub(c[1]))&&(this._valid=!1)}_move(c,f,v){const b=this._lastPoints;if(!b)return;const T=c[0].sub(b[0]),O=c[1].sub(b[1]);return this._map._cooperativeGestures&&!o.isFullscreen()&&v.touches.length<3||(this._valid=this.gestureBeginsVertically(T,O,v.timeStamp),!this._valid)?void 0:(this._lastPoints=c,this._active=!0,{pitchDelta:(T.y+O.y)/2*-.5})}gestureBeginsVertically(c,f,v){if(this._valid!==void 0)return this._valid;const b=c.mag()>=2,T=f.mag()>=2;if(!b&&!T)return;if(!b||!T)return this._firstMove==null&&(this._firstMove=v),v-this._firstMove<100&&void 0;const O=c.y>0==f.y>0;return Ns(c)&&Ns(f)&&O}}const Z_={panStep:100,bearingStep:15,pitchStep:10};class IS{constructor(){const c=Z_;this._panStep=c.panStep,this._bearingStep=c.bearingStep,this._pitchStep=c.pitchStep,this._rotationDisabled=!1}blur(){this.reset()}reset(){this._active=!1}keydown(c){if(c.altKey||c.ctrlKey||c.metaKey)return;let f=0,v=0,b=0,T=0,O=0;switch(c.keyCode){case 61:case 107:case 171:case 187:f=1;break;case 189:case 109:case 173:f=-1;break;case 37:c.shiftKey?v=-1:(c.preventDefault(),T=-1);break;case 39:c.shiftKey?v=1:(c.preventDefault(),T=1);break;case 38:c.shiftKey?b=1:(c.preventDefault(),O=-1);break;case 40:c.shiftKey?b=-1:(c.preventDefault(),O=1);break;default:return}return this._rotationDisabled&&(v=0,b=0),{cameraAnimation:D=>{const B=D.getZoom();D.easeTo({duration:300,easeId:"keyboardHandler",easing:K_,zoom:f?Math.round(B)+f*(c.shiftKey?2:1):B,bearing:D.getBearing()+v*this._bearingStep,pitch:D.getPitch()+b*this._pitchStep,offset:[-T*this._panStep,-O*this._panStep],center:D.getCenter()},{originalEvent:c})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function K_(g){return g*(2-g)}const rg=4.000244140625;class Y_{constructor(c,f){this._map=c,this._el=c.getCanvasContainer(),this._handler=f,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,o.bindAll(["_onTimeout","_addScrollZoomBlocker","_showBlockerAlert"],this)}setZoomRate(c){this._defaultZoomRate=c}setWheelZoomRate(c){this._wheelZoomRate=c}isEnabled(){return!!this._enabled}isActive(){return this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(c){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!c&&c.around==="center",this._map._cooperativeGestures&&this._addScrollZoomBlocker())}disable(){this.isEnabled()&&(this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove()))}wheel(c){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!(c.ctrlKey||c.metaKey||this.isZooming()||o.isFullscreen()))return void this._showBlockerAlert();this._alertContainer.style.visibility!=="hidden"&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}let f=c.deltaMode===o.window.WheelEvent.DOM_DELTA_LINE?40*c.deltaY:c.deltaY;const v=o.exported.now(),b=v-(this._lastWheelEventTime||0);this._lastWheelEventTime=v,f!==0&&f%rg==0?this._type="wheel":f!==0&&Math.abs(f)<4?this._type="trackpad":b>400?(this._type=null,this._lastValue=f,this._timeout=setTimeout(this._onTimeout,40,c)):this._type||(this._type=Math.abs(b*f)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,f+=this._lastValue)),c.shiftKey&&f&&(f/=4),this._type&&(this._lastWheelEvent=c,this._delta-=f,this._active||this._start(c)),c.preventDefault()}_onTimeout(c){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(c)}_start(c){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const f=Y(this._el,c);this._aroundPoint=this._aroundCenter?this._map.transform.centerPoint:f,this._aroundCoord=this._map.transform.pointCoordinate3D(this._aroundPoint),this._targetZoom=void 0,this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const c=this._map.transform;this._type==="wheel"&&c.projection.wrap&&(c._center.lng>=180||c._center.lng<=-180)&&(this._prevEase=null,this._easing=null,this._lastWheelEvent=null,this._lastWheelEventTime=0);const f=()=>c._terrainEnabled()&&this._aroundCoord?c.computeZoomRelativeTo(this._aroundCoord):c.zoom;if(this._delta!==0){const B=this._type==="wheel"&&Math.abs(this._delta)>rg?this._wheelZoomRate:this._defaultZoomRate;let H=2/(1+Math.exp(-Math.abs(this._delta*B)));this._delta<0&&H!==0&&(H=1/H);const q=f(),J=Math.pow(2,q),ae=typeof this._targetZoom=="number"?c.zoomScale(this._targetZoom):J;this._targetZoom=Math.min(c.maxZoom,Math.max(c.minZoom,c.scaleZoom(ae*H))),this._type==="wheel"&&(this._startZoom=q,this._easing=this._smoothOutEasing(200)),this._delta=0}const v=typeof this._targetZoom=="number"?this._targetZoom:f(),b=this._startZoom,T=this._easing;let O,D=!1;if(this._type==="wheel"&&b&&T){const B=Math.min((o.exported.now()-this._lastWheelEventTime)/200,1),H=T(B);O=o.number(b,v,H),B<1?this._frameId||(this._frameId=!0):D=!0}else O=v,D=!0;return this._active=!0,D&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!D,zoomDelta:O-f(),around:this._aroundPoint,aroundCoord:this._aroundCoord,originalEvent:this._lastWheelEvent}}_smoothOutEasing(c){let f=o.ease;if(this._prevEase){const v=this._prevEase,b=(o.exported.now()-v.start)/v.duration,T=v.easing(b+.01)-v.easing(b),O=.27/Math.sqrt(T*T+1e-4)*.01,D=Math.sqrt(.0729-O*O);f=o.bezier(O,D,.25,1)}return this._prevEase={start:o.exported.now(),duration:c,easing:f},f}blur(){this.reset()}reset(){this._active=!1}_addScrollZoomBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=I("div","mapboxgl-scroll-zoom-blocker",this._map._container),this._alertContainer.textContent=/(Mac|iPad)/i.test(o.window.navigator.userAgent)?this._map._getUIString("ScrollZoomBlocker.CmdMessage"):this._map._getUIString("ScrollZoomBlocker.CtrlMessage"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","null")},200)}}class J_{constructor(c,f){this._clickZoom=c,this._tapZoom=f}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Ci{constructor(){this.reset()}reset(){this._active=!1}blur(){this.reset()}dblclick(c,f){return c.preventDefault(),{cameraAnimation:v=>{v.easeTo({duration:300,zoom:v.getZoom()+(c.shiftKey?-1:1),around:v.unproject(f)},{originalEvent:c})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class OS{constructor(){this._tap=new Km({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,this._swipePoint=void 0,this._swipeTouch=0,this._tapTime=0,this._tap.reset()}touchstart(c,f,v){this._swipePoint||(this._tapTime&&c.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?v.length>0&&(this._swipePoint=f[0],this._swipeTouch=v[0].identifier):this._tap.touchstart(c,f,v))}touchmove(c,f,v){if(this._tapTime){if(this._swipePoint){if(v[0].identifier!==this._swipeTouch)return;const b=f[0],T=b.y-this._swipePoint.y;return this._swipePoint=b,c.preventDefault(),this._active=!0,{zoomDelta:T/128}}}else this._tap.touchmove(c,f,v)}touchend(c,f,v){this._tapTime?this._swipePoint&&v.length===0&&this.reset():this._tap.touchend(c,f,v)&&(this._tapTime=c.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Q_{constructor(c,f,v){this._el=c,this._mousePan=f,this._touchPan=v}enable(c){this._inertiaOptions=c||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class kS{constructor(c,f,v){this._pitchWithRotate=c.pitchWithRotate,this._mouseRotate=f,this._mousePitch=v}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class DS{constructor(c,f,v,b){this._el=c,this._touchZoom=f,this._touchRotate=v,this._tapDragZoom=b,this._rotationDisabled=!1,this._enabled=!0}enable(c){this._touchZoom.enable(c),this._rotationDisabled||this._touchRotate.enable(c),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const Co=g=>g.zoom||g.drag||g.pitch||g.rotate;class ex extends o.Event{}class RS{constructor(){this.constants=[1,1,.01],this.radius=0}setup(c,f){const v=o.sub([],f,c);this.radius=o.length(v[2]<0?o.div([],v,this.constants):[v[0],v[1],0])}projectRay(c){o.div(c,c,this.constants),o.normalize(c,c),o.mul$1(c,c,this.constants);const f=o.scale$2([],c,this.radius);if(f[2]>0){const v=o.scale$2([],[0,0,1],o.dot(f,[0,0,1])),b=o.scale$2([],o.normalize([],[f[0],f[1],0]),this.radius),T=o.add([],f,o.scale$2([],o.sub([],o.add([],b,v),f),2));f[0]=T[0],f[1]=T[1]}return f}}function Xo(g){return g.panDelta&&g.panDelta.mag()||g.zoomDelta||g.bearingDelta||g.pitchDelta}class ba{constructor(c,f){this._map=c,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new V_(c),this._bearingSnap=f.bearingSnap,this._previousActiveHandlers={},this._trackingEllipsoid=new RS,this._dragOrigin=null,this._eventsInProgress={},this._addDefaultHandlers(f),o.bindAll(["handleEvent","handleWindowEvent"],this);const v=this._el;this._listeners=[[v,"touchstart",{passive:!0}],[v,"touchmove",{passive:!1}],[v,"touchend",void 0],[v,"touchcancel",void 0],[v,"mousedown",void 0],[v,"mousemove",void 0],[v,"mouseup",void 0],[o.window.document,"mousemove",{capture:!0}],[o.window.document,"mouseup",void 0],[v,"mouseover",void 0],[v,"mouseout",void 0],[v,"dblclick",void 0],[v,"click",void 0],[v,"keydown",{capture:!1}],[v,"keyup",void 0],[v,"wheel",{passive:!1}],[v,"contextmenu",void 0],[o.window,"blur",void 0]];for(const[b,T,O]of this._listeners)b.addEventListener(T,b===o.window.document?this.handleWindowEvent:this.handleEvent,O)}destroy(){for(const[c,f,v]of this._listeners)c.removeEventListener(f,c===o.window.document?this.handleWindowEvent:this.handleEvent,v)}_addDefaultHandlers(c){const f=this._map,v=f.getCanvasContainer();this._add("mapEvent",new Zm(f,c));const b=f.boxZoom=new G_(f,c);this._add("boxZoom",b);const T=new MS,O=new Ci;f.doubleClickZoom=new J_(O,T),this._add("tapZoom",T),this._add("clickZoom",O);const D=new OS;this._add("tapDragZoom",D);const B=f.touchPitch=new X_(f);this._add("touchPitch",B);const H=new Jm(c),q=new Qm(c);f.dragRotate=new kS(c,H,q),this._add("mouseRotate",H,["mousePitch"]),this._add("mousePitch",q,["mouseRotate"]);const J=new Ym(c),ae=new qh(f,c);f.dragPan=new Q_(v,J,ae),this._add("mousePan",J),this._add("touchPan",ae,["touchZoom","touchRotate"]);const ce=new H_,he=new q_;f.touchZoomRotate=new DS(v,he,ce,D),this._add("touchRotate",ce,["touchPan","touchZoom"]),this._add("touchZoom",he,["touchPan","touchRotate"]),this._add("blockableMapEvent",new Gh(f));const de=f.scrollZoom=new Y_(f,this);this._add("scrollZoom",de,["mousePan"]);const pe=f.keyboard=new IS;this._add("keyboard",pe);for(const ee of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])c.interactive&&c[ee]&&f[ee].enable(c[ee])}_add(c,f,v){this._handlers.push({handlerName:c,handler:f,allowed:v}),this._handlersById[c]=f}stop(c){if(!this._updatingCamera){for(const{handler:f}of this._handlers)f.reset();this._inertia.clear(),this._fireEvents({},{},c),this._changes=[]}}isActive(){for(const{handler:c}of this._handlers)if(c.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!Co(this._eventsInProgress)||this.isZooming()}_isDragging(){return!!this._eventsInProgress.drag}_blockedByActive(c,f,v){for(const b in c)if(b!==v&&(!f||f.indexOf(b)<0))return!0;return!1}handleWindowEvent(c){this.handleEvent(c,`${c.type}Window`)}_getMapTouches(c){const f=[];for(const v of c)this._el.contains(v.target)&&f.push(v);return f}handleEvent(c,f){this._updatingCamera=!0;const v=c.type==="renderFrame",b=v?void 0:c,T={needsRenderFrame:!1},O={},D={},B=c.touches?this._getMapTouches(c.touches):void 0,H=B?Q(this._el,B):v?void 0:Y(this._el,c);for(const{handlerName:ae,handler:ce,allowed:he}of this._handlers){if(!ce.isEnabled())continue;let de;this._blockedByActive(D,he,ae)?ce.reset():ce[f||c.type]&&(de=ce[f||c.type](c,H,B),this.mergeHandlerResult(T,O,de,ae,b),de&&de.needsRenderFrame&&this._triggerRenderFrame()),(de||ce.isActive())&&(D[ae]=ce)}const q={};for(const ae in this._previousActiveHandlers)D[ae]||(q[ae]=b);this._previousActiveHandlers=D,(Object.keys(q).length||Xo(T))&&(this._changes.push([T,O,q]),this._triggerRenderFrame()),(Object.keys(D).length||Xo(T))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:J}=T;J&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],J(this._map))}mergeHandlerResult(c,f,v,b,T){if(!v)return;o.extend(c,v);const O={handlerName:b,originalEvent:v.originalEvent||T};v.zoomDelta!==void 0&&(f.zoom=O),v.panDelta!==void 0&&(f.drag=O),v.pitchDelta!==void 0&&(f.pitch=O),v.bearingDelta!==void 0&&(f.rotate=O)}_applyChanges(){const c={},f={},v={};for(const[b,T,O]of this._changes)b.panDelta&&(c.panDelta=(c.panDelta||new o.Point(0,0))._add(b.panDelta)),b.zoomDelta&&(c.zoomDelta=(c.zoomDelta||0)+b.zoomDelta),b.bearingDelta&&(c.bearingDelta=(c.bearingDelta||0)+b.bearingDelta),b.pitchDelta&&(c.pitchDelta=(c.pitchDelta||0)+b.pitchDelta),b.around!==void 0&&(c.around=b.around),b.aroundCoord!==void 0&&(c.aroundCoord=b.aroundCoord),b.pinchAround!==void 0&&(c.pinchAround=b.pinchAround),b.noInertia&&(c.noInertia=b.noInertia),o.extend(f,T),o.extend(v,O);this._updateMapTransform(c,f,v),this._changes=[]}_updateMapTransform(c,f,v){const b=this._map,T=b.transform,O=le=>[le.x,le.y,le.z];if((le=>{const ye=this._eventsInProgress.drag;return ye&&!this._handlersById[ye.handlerName].isActive()})()&&!Xo(c)){const le=T.zoom;T.cameraElevationReference="sea",T.recenterOnTerrain(),T.cameraElevationReference="ground",le!==T.zoom&&this._map._update(!0)}if(T._isCameraConstrained&&b._stop(!0),!Xo(c))return void this._fireEvents(f,v,!0);let{panDelta:D,zoomDelta:B,bearingDelta:H,pitchDelta:q,around:J,aroundCoord:ae,pinchAround:ce}=c;T._isCameraConstrained&&(B>0&&(B=0),T._isCameraConstrained=!1),ce!==void 0&&(J=ce),(B||(le=>f[le]&&!this._eventsInProgress[le])("drag"))&&J&&(this._dragOrigin=O(T.pointCoordinate3D(J)),this._trackingEllipsoid.setup(T._camera.position,this._dragOrigin)),T.cameraElevationReference="sea",b._stop(!0),J=J||b.transform.centerPoint,H&&(T.bearing+=H),q&&(T.pitch+=q),T._updateCameraState();const he=[0,0,0];if(D)if(T.projection.name==="mercator"){const le=this._trackingEllipsoid.projectRay(T.screenPointToMercatorRay(J).dir),ye=this._trackingEllipsoid.projectRay(T.screenPointToMercatorRay(J.sub(D)).dir);he[0]=ye[0]-le[0],he[1]=ye[1]-le[1]}else{const le=T.pointCoordinate(J);if(T.projection.name==="globe"){D=D.rotate(-T.angle);const ye=T._pixelsPerMercatorPixel/T.worldSize;he[0]=-D.x*o.mercatorScale(o.latFromMercatorY(le.y))*ye,he[1]=-D.y*o.mercatorScale(T.center.lat)*ye}else{const ye=T.pointCoordinate(J.sub(D));le&&ye&&(he[0]=ye.x-le.x,he[1]=ye.y-le.y)}}const de=T.zoom,pe=[0,0,0];if(B){const le=O(ae||T.pointCoordinate3D(J)),ye={dir:o.normalize([],o.sub([],le,T._camera.position))};if(ye.dir[2]<0){const _e=T.zoomDeltaToMovement(le,B);o.scale$2(pe,ye.dir,_e)}}const ee=o.add(he,he,pe);T._translateCameraConstrained(ee),B&&Math.abs(T.zoom-de)>1e-4&&T.recenterOnTerrain(),T.cameraElevationReference="ground",this._map._update(),c.noInertia||this._inertia.record(c),this._fireEvents(f,v,!0)}_fireEvents(c,f,v){const b=Co(this._eventsInProgress),T=Co(c),O={};for(const q in c){const{originalEvent:J}=c[q];this._eventsInProgress[q]||(O[`${q}start`]=J),this._eventsInProgress[q]=c[q]}!b&&T&&this._fireEvent("movestart",T.originalEvent);for(const q in O)this._fireEvent(q,O[q]);T&&this._fireEvent("move",T.originalEvent);for(const q in c){const{originalEvent:J}=c[q];this._fireEvent(q,J)}const D={};let B;for(const q in this._eventsInProgress){const{handlerName:J,originalEvent:ae}=this._eventsInProgress[q];this._handlersById[J].isActive()||(delete this._eventsInProgress[q],B=f[J]||ae,D[`${q}end`]=B)}for(const q in D)this._fireEvent(q,D[q]);const H=Co(this._eventsInProgress);if(v&&(b||T)&&!H){this._updatingCamera=!0;const q=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),J=ae=>ae!==0&&-this._bearingSnap<ae&&ae<this._bearingSnap;q?(J(q.bearing||this._map.getBearing())&&(q.bearing=0),this._map.easeTo(q,{originalEvent:B})):(this._map.fire(new o.Event("moveend",{originalEvent:B})),J(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(c,f){this._map.fire(new o.Event(c,f?{originalEvent:f}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(c=>{this._frameId=void 0,this.handleEvent(new ex("renderFrame",{timeStamp:c})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}const Sl="map.setFreeCameraOptions(...) and map.getFreeCameraOptions() are not yet supported for non-mercator projections.";class Hh extends o.Evented{constructor(c,f){super(),this._moving=!1,this._zooming=!1,this.transform=c,this._bearingSnap=f.bearingSnap,this._respectPrefersReducedMotion=f.respectPrefersReducedMotion!==!1,o.bindAll(["_renderFrameCallback"],this)}getCenter(){return new o.LngLat(this.transform.center.lng,this.transform.center.lat)}setCenter(c,f){return this.jumpTo({center:c},f)}panBy(c,f,v){return c=o.Point.convert(c).mult(-1),this.panTo(this.transform.center,o.extend({offset:c},f),v)}panTo(c,f,v){return this.easeTo(o.extend({center:c},f),v)}getZoom(){return this.transform.zoom}setZoom(c,f){return this.jumpTo({zoom:c},f),this}zoomTo(c,f,v){return this.easeTo(o.extend({zoom:c},f),v)}zoomIn(c,f){return this.zoomTo(this.getZoom()+1,c,f),this}zoomOut(c,f){return this.zoomTo(this.getZoom()-1,c,f),this}getBearing(){return this.transform.bearing}setBearing(c,f){return this.jumpTo({bearing:c},f),this}getPadding(){return this.transform.padding}setPadding(c,f){return this.jumpTo({padding:c},f),this}rotateTo(c,f,v){return this.easeTo(o.extend({bearing:c},f),v)}resetNorth(c,f){return this.rotateTo(0,o.extend({duration:1e3},c),f),this}resetNorthPitch(c,f){return this.easeTo(o.extend({bearing:0,pitch:0,duration:1e3},c),f),this}snapToNorth(c,f){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(c,f):this}getPitch(){return this.transform.pitch}setPitch(c,f){return this.jumpTo({pitch:c},f),this}cameraForBounds(c,f){c=o.LngLatBounds.convert(c);const v=f&&f.bearing||0,b=f&&f.pitch||0,T=c.getNorthWest(),O=c.getSouthEast();return this._cameraForBounds(this.transform,T,O,v,b,f)}_extendCameraOptions(c){const f={top:0,bottom:0,right:0,left:0};if(typeof(c=o.extend({padding:f,offset:[0,0],maxZoom:this.transform.maxZoom},c)).padding=="number"){const v=c.padding;c.padding={top:v,bottom:v,right:v,left:v}}return c.padding=o.extend(f,c.padding),c}_minimumAABBFrustumDistance(c,f){const v=f.max[0]-f.min[0],b=f.max[1]-f.min[1];return v/b>c.aspect?v/(2*Math.tan(.5*c.fovX)*c.aspect):b/(2*Math.tan(.5*c.fovY)*c.aspect)}_cameraForBoundsOnGlobe(c,f,v,b,T,O){const D=c.clone(),B=this._extendCameraOptions(O);D.bearing=b,D.pitch=T;const H=o.LngLat.convert(f),q=o.LngLat.convert(v),J=.5*(H.lat+q.lat),ae=.5*(H.lng+q.lng),ce=o.latLngToECEF(J,ae),he=o.normalize([],ce),de=o.normalize([],o.cross([],he,[0,1,0])),pe=o.cross([],de,he),ee=[de[0],de[1],de[2],0,pe[0],pe[1],pe[2],0,he[0],he[1],he[2],0,0,0,0,1],le=[ce,o.latLngToECEF(H.lat,H.lng),o.latLngToECEF(q.lat,H.lng),o.latLngToECEF(q.lat,q.lng),o.latLngToECEF(H.lat,q.lng),o.latLngToECEF(J,H.lng),o.latLngToECEF(J,q.lng),o.latLngToECEF(H.lat,ae),o.latLngToECEF(q.lat,ae)];let ye=o.Aabb.fromPoints(le.map(pt=>[o.dot(de,pt),o.dot(pe,pt),o.dot(he,pt)]));const _e=o.transformMat4([],ye.center,ee);o.squaredLength(_e)===0&&o.set(_e,0,0,1),o.normalize(_e,_e),o.scale$2(_e,_e,o.GLOBE_RADIUS),D.center=o.ecefToLatLng(_e);const Oe=D.getWorldToCameraMatrix(),De=o.invert(new Float64Array(16),Oe);ye=o.Aabb.applyTransform(ye,o.multiply([],Oe,ee)),o.transformMat4(_e,_e,Oe);const ke=.5*(ye.max[2]-ye.min[2]),Ve=this._minimumAABBFrustumDistance(D,ye),Fe=o.scale$2([],[0,0,1],ke),Ke=o.add(Fe,_e,Fe),xt=Ve+(D.pitch===0?0:o.distance(_e,Ke)),He=D.globeCenterInViewSpace,ct=o.sub([],_e,[He[0],He[1],He[2]]);o.normalize(ct,ct),o.scale$2(ct,ct,xt);const Je=o.add([],_e,ct);o.transformMat4(Je,Je,De);const _t=o.earthRadius/o.GLOBE_RADIUS,Ze=o.length(Je),st=o.mercatorZfromAltitude(Math.max(Ze*_t-o.earthRadius,Number.EPSILON),0),wt=Math.min(D.zoomFromMercatorZAdjusted(st),B.maxZoom);return wt>.5*(o.GLOBE_ZOOM_THRESHOLD_MIN+o.GLOBE_ZOOM_THRESHOLD_MAX)?(D.setProjection({name:"mercator"}),D.zoom=wt,this._cameraForBounds(D,f,v,b,T,O)):{center:D.center,zoom:wt,bearing:b,pitch:T}}queryTerrainElevation(c,f){const v=this.transform.elevation;return v?(f=o.extend({},{exaggerated:!0},f),v.getAtPoint(o.MercatorCoordinate.fromLngLat(c),null,f.exaggerated)):null}_cameraForBounds(c,f,v,b,T,O){if(c.projection.name==="globe")return this._cameraForBoundsOnGlobe(c,f,v,b,T,O);const D=c.clone(),B=this._extendCameraOptions(O),H=D.padding;D.bearing=b,D.pitch=T;const q=o.LngLat.convert(f),J=o.LngLat.convert(v),ae=new o.LngLat(q.lng,J.lat),ce=new o.LngLat(J.lng,q.lat),he=D.project(q),de=D.project(J),pe=this.queryTerrainElevation(q),ee=this.queryTerrainElevation(J),le=this.queryTerrainElevation(ae),ye=this.queryTerrainElevation(ce),_e=[[he.x,he.y,Math.min(pe||0,ee||0,le||0,ye||0)],[de.x,de.y,Math.max(pe||0,ee||0,le||0,ye||0)]];let Oe=o.Aabb.fromPoints(_e);const De=D.getWorldToCameraMatrix(),ke=o.invert(new Float64Array(16),De);Oe=o.Aabb.applyTransform(Oe,De);const Ve=o.sub([],Oe.max,Oe.min),Fe=H.left||0,Ke=H.right||0,xt=H.bottom||0,He=H.top||0,{left:ct,right:Je,top:_t,bottom:Ze}=B.padding,st=.5*(Fe+Ke),wt=.5*(He+xt),pt=Math.min(D.scaleZoom(D.scale*Math.min((D.width-(Fe+Ke+ct+Je))/Ve[0],(D.height-(xt+He+Ze+_t))/Ve[1])),B.maxZoom),St=D.scale/D.zoomScale(pt);Oe=new o.Aabb([Oe.min[0]-(ct+st)*St,Oe.min[1]-(Ze+wt)*St,Oe.min[2]],[Oe.max[0]+(Je+st)*St,Oe.max[1]+(_t+wt)*St,Oe.max[2]]);const Ht=.5*Ve[2],ir=this._minimumAABBFrustumDistance(D,Oe),Ft=[0,0,1,0];o.transformMat4$1(Ft,Ft,De),o.normalize$2(Ft,Ft);const Qt=o.scale$2([],Ft,ir+Ht),br=o.add([],Oe.center,Qt),yr=(typeof B.offset.x=="number"&&typeof B.offset.y=="number"?new o.Point(B.offset.x,B.offset.y):o.Point.convert(B.offset)).rotate(-o.degToRad(b));Oe.center[0]-=yr.x*St,Oe.center[1]+=yr.y*St,o.transformMat4(Oe.center,Oe.center,ke),o.transformMat4(br,br,ke);const Gt=[Oe.center[0],Oe.center[1],br[2]*D.pixelsPerMeter];o.scale$2(Gt,Gt,1/D.worldSize);const Nr=o.lngFromMercatorX(Gt[0]),Wr=o.latFromMercatorY(Gt[1]),qr=Math.min(D._zoomFromMercatorZ(Gt[2]),B.maxZoom),Hr=new o.LngLat(Nr,Wr);return D.mercatorFromTransition&&qr<.5*(o.GLOBE_ZOOM_THRESHOLD_MIN+o.GLOBE_ZOOM_THRESHOLD_MAX)?(D.setProjection({name:"globe"}),D.zoom=qr,this._cameraForBounds(D,f,v,b,T,O)):{center:Hr,zoom:qr,bearing:b,pitch:T}}fitBounds(c,f,v){const b=this.cameraForBounds(c,f);return this._fitInternal(b,f,v)}fitScreenCoordinates(c,f,v,b,T){const O=o.Point.convert(c),D=o.Point.convert(f),B=new o.Point(Math.min(O.x,D.x),Math.min(O.y,D.y)),H=new o.Point(Math.max(O.x,D.x),Math.max(O.y,D.y));if(this.transform.projection.name==="mercator"&&this.transform.anyCornerOffEdge(O,D))return this;const q=this.transform.pointLocation3D(B),J=this.transform.pointLocation3D(H),ae=this.transform.pointLocation3D(new o.Point(B.x,H.y)),ce=this.transform.pointLocation3D(new o.Point(H.x,B.y)),he=[Math.min(q.lng,J.lng,ae.lng,ce.lng),Math.min(q.lat,J.lat,ae.lat,ce.lat)],de=[Math.max(q.lng,J.lng,ae.lng,ce.lng),Math.max(q.lat,J.lat,ae.lat,ce.lat)],pe=b&&b.pitch?b.pitch:this.getPitch(),ee=this._cameraForBounds(this.transform,he,de,v,pe,b);return this._fitInternal(ee,b,T)}_fitInternal(c,f,v){return c?(delete(f=o.extend(c,f)).padding,f.linear?this.easeTo(f,v):this.flyTo(f,v)):this}jumpTo(c,f){this.stop();const v=c.preloadOnly?this.transform.clone():this.transform;let b=!1,T=!1,O=!1;return"zoom"in c&&v.zoom!==+c.zoom&&(b=!0,v.zoom=+c.zoom),c.center!==void 0&&(v.center=o.LngLat.convert(c.center)),"bearing"in c&&v.bearing!==+c.bearing&&(T=!0,v.bearing=+c.bearing),"pitch"in c&&v.pitch!==+c.pitch&&(O=!0,v.pitch=+c.pitch),c.padding==null||v.isPaddingEqual(c.padding)||(v.padding=c.padding),c.preloadOnly?(this._preloadTiles(v),this):(this.fire(new o.Event("movestart",f)).fire(new o.Event("move",f)),b&&this.fire(new o.Event("zoomstart",f)).fire(new o.Event("zoom",f)).fire(new o.Event("zoomend",f)),T&&this.fire(new o.Event("rotatestart",f)).fire(new o.Event("rotate",f)).fire(new o.Event("rotateend",f)),O&&this.fire(new o.Event("pitchstart",f)).fire(new o.Event("pitch",f)).fire(new o.Event("pitchend",f)),this.fire(new o.Event("moveend",f)))}getFreeCameraOptions(){return this.transform.projection.supportsFreeCamera||o.warnOnce(Sl),this.transform.getFreeCameraOptions()}setFreeCameraOptions(c,f){const v=this.transform;if(!v.projection.supportsFreeCamera)return o.warnOnce(Sl),this;this.stop();const b=v.zoom,T=v.pitch,O=v.bearing;v.setFreeCameraOptions(c);const D=b!==v.zoom,B=T!==v.pitch,H=O!==v.bearing;return this.fire(new o.Event("movestart",f)).fire(new o.Event("move",f)),D&&this.fire(new o.Event("zoomstart",f)).fire(new o.Event("zoom",f)).fire(new o.Event("zoomend",f)),H&&this.fire(new o.Event("rotatestart",f)).fire(new o.Event("rotate",f)).fire(new o.Event("rotateend",f)),B&&this.fire(new o.Event("pitchstart",f)).fire(new o.Event("pitch",f)).fire(new o.Event("pitchend",f)),this.fire(new o.Event("moveend",f)),this}easeTo(c,f){this._stop(!1,c.easeId),((c=o.extend({offset:[0,0],duration:500,easing:o.ease},c)).animate===!1||this._prefersReducedMotion(c))&&(c.duration=0);const v=this.transform,b=this.getZoom(),T=this.getBearing(),O=this.getPitch(),D=this.getPadding(),B="zoom"in c?+c.zoom:b,H="bearing"in c?this._normalizeBearing(c.bearing,T):T,q="pitch"in c?+c.pitch:O,J="padding"in c?c.padding:v.padding,ae=o.Point.convert(c.offset);let ce,he,de;if(v.projection.name==="globe"){const Fe=o.MercatorCoordinate.fromLngLat(v.center),Ke=ae.rotate(-v.angle);Fe.x+=Ke.x/v.worldSize,Fe.y+=Ke.y/v.worldSize;const xt=Fe.toLngLat(),He=o.LngLat.convert(c.center||xt);this._normalizeCenter(He),ce=v.centerPoint.add(Ke),he=new o.Point(Fe.x,Fe.y).mult(v.worldSize),de=new o.Point(o.mercatorXfromLng(He.lng),o.mercatorYfromLat(He.lat)).mult(v.worldSize).sub(he)}else{ce=v.centerPoint.add(ae);const Fe=v.pointLocation(ce),Ke=o.LngLat.convert(c.center||Fe);this._normalizeCenter(Ke),he=v.project(Fe),de=v.project(Ke).sub(he)}const pe=v.zoomScale(B-b);let ee,le;c.around&&(ee=o.LngLat.convert(c.around),le=v.locationPoint(ee));const ye=this._zooming||B!==b,_e=this._rotating||T!==H,Oe=this._pitching||q!==O,De=!v.isPaddingEqual(J),ke=Fe=>Ke=>{if(ye&&(Fe.zoom=o.number(b,B,Ke)),_e&&(Fe.bearing=o.number(T,H,Ke)),Oe&&(Fe.pitch=o.number(O,q,Ke)),De&&(Fe.interpolatePadding(D,J,Ke),ce=Fe.centerPoint.add(ae)),ee)Fe.setLocationAtPoint(ee,le);else{const xt=Fe.zoomScale(Fe.zoom-b),He=B>b?Math.min(2,pe):Math.max(.5,pe),ct=Math.pow(He,1-Ke),Je=Fe.unproject(he.add(de.mult(Ke*ct)).mult(xt));Fe.setLocationAtPoint(Fe.renderWorldCopies?Je.wrap():Je,ce)}return c.preloadOnly||this._fireMoveEvents(f),Fe};if(c.preloadOnly){const Fe=this._emulate(ke,c.duration,v);return this._preloadTiles(Fe),this}const Ve={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=ye,this._rotating=_e,this._pitching=Oe,this._padding=De,this._easeId=c.easeId,this._prepareEase(f,c.noMoveStart,Ve),this._ease(ke(v),Fe=>{v.recenterOnTerrain(),this._afterEase(f,Fe)},c),this}_prepareEase(c,f,v={}){this._moving=!0,this.transform.cameraElevationReference="sea",f||v.moving||this.fire(new o.Event("movestart",c)),this._zooming&&!v.zooming&&this.fire(new o.Event("zoomstart",c)),this._rotating&&!v.rotating&&this.fire(new o.Event("rotatestart",c)),this._pitching&&!v.pitching&&this.fire(new o.Event("pitchstart",c))}_fireMoveEvents(c){this.fire(new o.Event("move",c)),this._zooming&&this.fire(new o.Event("zoom",c)),this._rotating&&this.fire(new o.Event("rotate",c)),this._pitching&&this.fire(new o.Event("pitch",c))}_afterEase(c,f){if(this._easeId&&f&&this._easeId===f)return;this._easeId=void 0,this.transform.cameraElevationReference="ground";const v=this._zooming,b=this._rotating,T=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,v&&this.fire(new o.Event("zoomend",c)),b&&this.fire(new o.Event("rotateend",c)),T&&this.fire(new o.Event("pitchend",c)),this.fire(new o.Event("moveend",c))}flyTo(c,f){if(this._prefersReducedMotion(c)){const pt=o.pick(c,["center","zoom","bearing","pitch","around"]);return this.jumpTo(pt,f)}this.stop(),c=o.extend({offset:[0,0],speed:1.2,curve:1.42,easing:o.ease},c);const v=this.transform,b=this.getZoom(),T=this.getBearing(),O=this.getPitch(),D=this.getPadding(),B="zoom"in c?o.clamp(+c.zoom,v.minZoom,v.maxZoom):b,H="bearing"in c?this._normalizeBearing(c.bearing,T):T,q="pitch"in c?+c.pitch:O,J="padding"in c?c.padding:v.padding,ae=v.zoomScale(B-b),ce=o.Point.convert(c.offset);let he=v.centerPoint.add(ce);const de=v.pointLocation(he),pe=o.LngLat.convert(c.center||de);this._normalizeCenter(pe);const ee=v.project(de),le=v.project(pe).sub(ee);let ye=c.curve;const _e=Math.max(v.width,v.height),Oe=_e/ae,De=le.mag();if("minZoom"in c){const pt=o.clamp(Math.min(c.minZoom,b,B),v.minZoom,v.maxZoom),St=_e/v.zoomScale(pt-b);ye=Math.sqrt(St/De*2)}const ke=ye*ye;function Ve(pt){const St=(Oe*Oe-_e*_e+(pt?-1:1)*ke*ke*De*De)/(2*(pt?Oe:_e)*ke*De);return Math.log(Math.sqrt(St*St+1)-St)}function Fe(pt){return(Math.exp(pt)-Math.exp(-pt))/2}function Ke(pt){return(Math.exp(pt)+Math.exp(-pt))/2}const xt=Ve(0);let He=function(pt){return Ke(xt)/Ke(xt+ye*pt)},ct=function(pt){return _e*((Ke(xt)*(Fe(St=xt+ye*pt)/Ke(St))-Fe(xt))/ke)/De;var St},Je=(Ve(1)-xt)/ye;if(Math.abs(De)<1e-6||!isFinite(Je)){if(Math.abs(_e-Oe)<1e-6)return this.easeTo(c,f);const pt=Oe<_e?-1:1;Je=Math.abs(Math.log(Oe/_e))/ye,ct=function(){return 0},He=function(St){return Math.exp(pt*ye*St)}}c.duration="duration"in c?+c.duration:1e3*Je/("screenSpeed"in c?+c.screenSpeed/ye:+c.speed),c.maxDuration&&c.duration>c.maxDuration&&(c.duration=0);const _t=T!==H,Ze=q!==O,st=!v.isPaddingEqual(J),wt=pt=>St=>{const Ht=St*Je,ir=1/He(Ht);pt.zoom=St===1?B:b+pt.scaleZoom(ir),_t&&(pt.bearing=o.number(T,H,St)),Ze&&(pt.pitch=o.number(O,q,St)),st&&(pt.interpolatePadding(D,J,St),he=pt.centerPoint.add(ce));const Ft=St===1?pe:pt.unproject(ee.add(le.mult(ct(Ht))).mult(ir));return pt.setLocationAtPoint(pt.renderWorldCopies?Ft.wrap():Ft,he),pt._updateCameraOnTerrain(),c.preloadOnly||this._fireMoveEvents(f),pt};if(c.preloadOnly){const pt=this._emulate(wt,c.duration,v);return this._preloadTiles(pt),this}return this._zooming=!0,this._rotating=_t,this._pitching=Ze,this._padding=st,this._prepareEase(f,!1),this._ease(wt(v),()=>this._afterEase(f),c),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(c,f){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),this._easeFrameId=void 0,this._onEaseFrame=void 0),this._onEaseEnd){const v=this._onEaseEnd;this._onEaseEnd=void 0,v.call(this,f)}if(!c){const v=this.handlers;v&&v.stop(!1)}return this}_ease(c,f,v){v.animate===!1||v.duration===0?(c(1),f()):(this._easeStart=o.exported.now(),this._easeOptions=v,this._onEaseFrame=c,this._onEaseEnd=f,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const c=Math.min((o.exported.now()-this._easeStart)/this._easeOptions.duration,1),f=this._onEaseFrame;f&&f(this._easeOptions.easing(c)),c<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(c,f){c=o.wrap(c,-180,180);const v=Math.abs(c-f);return Math.abs(c-360-f)<v&&(c-=360),Math.abs(c+360-f)<v&&(c+=360),c}_normalizeCenter(c){const f=this.transform;if(!f.renderWorldCopies||f.maxBounds)return;const v=c.lng-f.center.lng;c.lng+=v>180?-360:v<-180?360:0}_prefersReducedMotion(c){return this._respectPrefersReducedMotion&&o.exported.prefersReducedMotion&&!(c&&c.essential)}_emulate(c,f,v){const b=Math.ceil(15*f/1e3),T=[],O=c(v.clone());for(let D=0;D<=b;D++){const B=O(D/b);T.push(B.clone())}return T}}class $t{constructor(c={}){this.options=c,o.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)}getDefaultPosition(){return"bottom-right"}onAdd(c){const f=this.options&&this.options.compact;return this._map=c,this._container=I("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=I("button","mapboxgl-ctrl-attrib-button",this._container),I("span","mapboxgl-ctrl-icon",this._compactButton).setAttribute("aria-hidden","true"),this._compactButton.type="button",this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=I("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),f&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),f===void 0&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container}onRemove(){this._container.remove(),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0}_setElementTitle(c,f){const v=this._map._getUIString(`AttributionControl.${f}`);c.setAttribute("aria-label",v),c.removeAttribute("title"),c.firstElementChild&&c.firstElementChild.setAttribute("title",v)}_toggleAttribution(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","true"))}_updateEditLink(){let c=this._editLink;c||(c=this._editLink=this._container.querySelector(".mapbox-improve-map"));const f=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||o.config.ACCESS_TOKEN}];if(c){const v=f.reduce((b,T,O)=>(T.value&&(b+=`${T.key}=${T.value}${O<f.length-1?"&":""}`),b),"?");c.href=`${o.config.FEEDBACK_URL}/${v}#${sd(this._map,!0)}`,c.rel="noopener nofollow",this._setElementTitle(c,"MapFeedback")}}_updateData(c){!c||c.sourceDataType!=="metadata"&&c.sourceDataType!=="visibility"&&c.dataType!=="style"||(this._updateAttributions(),this._updateEditLink())}_updateAttributions(){if(!this._map.style)return;let c=[];if(this._map.style.stylesheet){const b=this._map.style.stylesheet;this.styleOwner=b.owner,this.styleId=b.id}const f=this._map.style._sourceCaches;for(const b in f){const T=f[b];if(T.used){const O=T.getSource();O.attribution&&c.indexOf(O.attribution)<0&&c.push(O.attribution)}}c.sort((b,T)=>b.length-T.length),c=c.filter((b,T)=>{for(let O=T+1;O<c.length;O++)if(c[O].indexOf(b)>=0)return!1;return!0}),this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?c=[...this.options.customAttribution,...c]:c.unshift(this.options.customAttribution));const v=c.join(" | ");v!==this._attribHTML&&(this._attribHTML=v,c.length?(this._innerContainer.innerHTML=v,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")}}class ng{constructor(){o.bindAll(["_updateLogo","_updateCompact"],this)}onAdd(c){this._map=c,this._container=I("div","mapboxgl-ctrl");const f=I("a","mapboxgl-ctrl-logo");return f.target="_blank",f.rel="noopener nofollow",f.href="https://www.mapbox.com/",f.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),f.setAttribute("rel","noopener nofollow"),this._container.appendChild(f),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){this._container.remove(),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)}getDefaultPosition(){return"bottom-left"}_updateLogo(c){c&&c.sourceDataType!=="metadata"||(this._container.style.display=this._logoRequired()?"block":"none")}_logoRequired(){if(!this._map.style)return!0;const c=this._map.style._sourceCaches;if(Object.entries(c).length===0)return!0;for(const f in c){const v=c[f].getSource();if(v.hasOwnProperty("mapbox_logo")&&!v.mapbox_logo)return!1}return!0}_updateCompact(){const c=this._container.children;if(c.length){const f=c[0];this._map.getCanvasContainer().offsetWidth<250?f.classList.add("mapboxgl-compact"):f.classList.remove("mapboxgl-compact")}}}class ig{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(c){const f=++this._id;return this._queue.push({callback:c,id:f,cancelled:!1}),f}remove(c){const f=this._currentlyRunning,v=f?this._queue.concat(f):this._queue;for(const b of v)if(b.id===c)return void(b.cancelled=!0)}run(c=0){const f=this._currentlyRunning=this._queue;this._queue=[];for(const v of f)if(!v.cancelled&&(v.callback(c),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}function Mc(g,c,f){if(g=new o.LngLat(g.lng,g.lat),c){const v=new o.LngLat(g.lng-360,g.lat),b=new o.LngLat(g.lng+360,g.lat),T=360*Math.ceil(Math.abs(g.lng-f.center.lng)/360),O=f.locationPoint(g).distSqr(c),D=c.x<0||c.y<0||c.x>f.width||c.y>f.height;f.locationPoint(v).distSqr(c)<O&&(D||Math.abs(v.lng-f.center.lng)<T)?g=v:f.locationPoint(b).distSqr(c)<O&&(D||Math.abs(b.lng-f.center.lng)<T)&&(g=b)}for(;Math.abs(g.lng-f.center.lng)>180;){const v=f.locationPoint(g);if(v.x>=0&&v.y>=0&&v.x<=f.width&&v.y<=f.height)break;g.lng>f.center.lng?g.lng-=360:g.lng+=360}return g}const El={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};class jt extends o.Evented{constructor(c,f){if(super(),(c instanceof o.window.HTMLElement||f)&&(c=o.extend({element:c},f)),o.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress","_clearFadeTimer"],this),this._anchor=c&&c.anchor||"center",this._color=c&&c.color||"#3FB1CE",this._scale=c&&c.scale||1,this._draggable=c&&c.draggable||!1,this._clickTolerance=c&&c.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=c&&c.rotation||0,this._rotationAlignment=c&&c.rotationAlignment||"auto",this._pitchAlignment=c&&c.pitchAlignment&&c.pitchAlignment||"auto",this._updateMoving=()=>this._update(!0),this._occludedOpacity=c&&c.occludedOpacity||.2,c&&c.element)this._element=c.element,this._offset=o.Point.convert(c&&c.offset||[0,0]);else{this._defaultMarker=!0,this._element=I("div");const b=41,T=27,O=R("svg",{display:"block",height:b*this._scale+"px",width:T*this._scale+"px",viewBox:`0 0 ${T} ${b}`},this._element),D=R("radialGradient",{id:"shadowGradient"},R("defs",{},O));R("stop",{offset:"10%","stop-opacity":.4},D),R("stop",{offset:"100%","stop-opacity":.05},D),R("ellipse",{cx:13.5,cy:34.8,rx:10.5,ry:5.25,fill:"url(#shadowGradient)"},O),R("path",{fill:this._color,d:"M27,13.5C27,19.07 20.25,27 14.75,34.5C14.02,35.5 12.98,35.5 12.25,34.5C6.75,27 0,19.22 0,13.5C0,6.04 6.04,0 13.5,0C20.96,0 27,6.04 27,13.5Z"},O),R("path",{opacity:.25,d:"M13.5,0C6.04,0 0,6.04 0,13.5C0,19.22 6.75,27 12.25,34.5C13,35.52 14.02,35.5 14.75,34.5C20.25,27 27,19.07 27,13.5C27,6.04 20.96,0 13.5,0ZM13.5,1C20.42,1 26,6.58 26,13.5C26,15.9 24.5,19.18 22.22,22.74C19.95,26.3 16.71,30.14 13.94,33.91C13.74,34.18 13.61,34.32 13.5,34.44C13.39,34.32 13.26,34.18 13.06,33.91C10.28,30.13 7.41,26.31 5.02,22.77C2.62,19.23 1,15.95 1,13.5C1,6.58 6.58,1 13.5,1Z"},O),R("circle",{fill:"white",cx:13.5,cy:13.5,r:5.5},O),this._offset=o.Point.convert(c&&c.offset||[0,-14])}this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label","Map marker"),this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",b=>{b.preventDefault()}),this._element.addEventListener("mousedown",b=>{b.preventDefault()});const v=this._element.classList;for(const b in El)v.remove(`mapboxgl-marker-anchor-${b}`);v.add(`mapboxgl-marker-anchor-${this._anchor}`),this._popup=null}addTo(c){return c===this._map||(this.remove(),this._map=c,c.getCanvasContainer().appendChild(this._element),c.on("move",this._updateMoving),c.on("moveend",this._update),c.on("remove",this._clearFadeTimer),c._addMarker(this),this.setDraggable(this._draggable),this._update(),c.on("click",this._onMapClick)),this}remove(){const c=this._map;return c&&(c.off("click",this._onMapClick),c.off("move",this._updateMoving),c.off("moveend",this._update),c.off("mousedown",this._addDragHandler),c.off("touchstart",this._addDragHandler),c.off("mouseup",this._onUp),c.off("touchend",this._onUp),c.off("mousemove",this._onMove),c.off("touchmove",this._onMove),c.off("remove",this._clearFadeTimer),c._removeMarker(this),this._map=void 0),this._clearFadeTimer(),this._element.remove(),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(c){return this._lngLat=o.LngLat.convert(c),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(!0),this}getElement(){return this._element}setPopup(c){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeAttribute("role"),this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),c){if(!("offset"in c.options)){const b=Math.sqrt(Math.pow(13.5,2)/2);c.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[b,-1*(38.1-13.5+b)],"bottom-right":[-b,-1*(38.1-13.5+b)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=c,c._marker=this,this._lngLat&&this._popup.setLngLat(this._lngLat),this._element.setAttribute("role","button"),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress),this._element.setAttribute("aria-expanded","false")}return this}_onKeyPress(c){const f=c.code,v=c.charCode||c.keyCode;f!=="Space"&&f!=="Enter"&&v!==32&&v!==13||this.togglePopup()}_onMapClick(c){const f=c.originalEvent.target,v=this._element;this._popup&&(f===v||v.contains(f))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const c=this._popup;return c?(c.isOpen()?(c.remove(),this._element.setAttribute("aria-expanded","false")):this._map&&(c.addTo(this._map),this._element.setAttribute("aria-expanded","true")),this):this}_behindTerrain(){const c=this._map,f=this._pos;if(!c||!f)return!1;const v=c.unproject(f),b=c.getFreeCameraOptions();if(!b.position)return!1;const T=b.position.toLngLat();return T.distanceTo(v)<.9*T.distanceTo(this._lngLat)}_evaluateOpacity(){const c=this._map;if(!c)return;const f=this._pos;if(!f||f.x<0||f.x>c.transform.width||f.y<0||f.y>c.transform.height)return void this._clearFadeTimer();const v=c.unproject(f);let b;c._showingGlobe()&&o.isLngLatBehindGlobe(c.transform,this._lngLat)?b=0:(b=1-c._queryFogOpacity(v),c.transform._terrainEnabled()&&c.getTerrain()&&this._behindTerrain()&&(b*=this._occludedOpacity)),this._element.style.opacity=`${b}`,this._element.style.pointerEvents=b>0?"auto":"none",this._popup&&this._popup._setOpacity(b),this._fadeTimer=null}_clearFadeTimer(){this._fadeTimer&&(clearTimeout(this._fadeTimer),this._fadeTimer=null)}_updateDOM(){const c=this._pos;if(!c||!this._map)return;const f=this._offset.mult(this._scale);this._element.style.transform=`
            translate(${c.x}px,${c.y}px)
            ${El[this._anchor]}
            ${this._calculateXYTransform()} ${this._calculateZTransform()}
            translate(${f.x}px,${f.y}px)
        `}_calculateXYTransform(){const c=this._pos,f=this._map,v=this.getPitchAlignment();if(!f||!c||v!=="map")return"";if(!f._showingGlobe()){const B=f.getPitch();return B?`rotateX(${B}deg)`:""}const b=o.radToDeg(o.globeTiltAtLngLat(f.transform,this._lngLat)),T=c.sub(o.globeCenterToScreenPoint(f.transform)),O=Math.abs(T.x)+Math.abs(T.y);if(O===0)return"";const D=b/O;return`rotateX(${-T.y*D}deg) rotateY(${T.x*D}deg)`}_calculateZTransform(){const c=this._pos,f=this._map;if(!f||!c)return"";let v=0;const b=this.getRotationAlignment();if(b==="map")if(f._showingGlobe()){const T=f.project(new o.LngLat(this._lngLat.lng,this._lngLat.lat+.001)),O=f.project(new o.LngLat(this._lngLat.lng,this._lngLat.lat-.001)).sub(T);v=o.radToDeg(Math.atan2(O.y,O.x))-90}else v=-f.getBearing();else if(b==="horizon"){const T=o.smoothstep(4,6,f.getZoom()),O=o.globeCenterToScreenPoint(f.transform);O.y+=T*f.transform.height;const D=c.sub(O),B=o.radToDeg(Math.atan2(D.y,D.x));v=(B>90?B-270:B+90)*(1-T)}return v+=this._rotation,v?`rotateZ(${v}deg)`:""}_update(c){o.window.cancelAnimationFrame(this._updateFrameId);const f=this._map;f&&(f.transform.renderWorldCopies&&(this._lngLat=Mc(this._lngLat,this._pos,f.transform)),this._pos=f.project(this._lngLat),c===!0?this._updateFrameId=o.window.requestAnimationFrame(()=>{this._element&&this._pos&&this._anchor&&(this._pos=this._pos.round(),this._updateDOM())}):this._pos=this._pos.round(),f._requestDomTask(()=>{this._map&&(this._element&&this._pos&&this._anchor&&this._updateDOM(),(f._showingGlobe()||f.getTerrain()||f.getFog())&&!this._fadeTimer&&(this._fadeTimer=setTimeout(this._evaluateOpacity.bind(this),60)))}))}getOffset(){return this._offset}setOffset(c){return this._offset=o.Point.convert(c),this._update(),this}_onMove(c){const f=this._map;if(!f)return;const v=this._pointerdownPos,b=this._positionDelta;if(v&&b){if(!this._isDragging){const T=this._clickTolerance||f._clickTolerance;if(c.point.dist(v)<T)return;this._isDragging=!0}this._pos=c.point.sub(b),this._lngLat=f.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new o.Event("dragstart"))),this.fire(new o.Event("drag"))}}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1;const c=this._map;c&&(c.off("mousemove",this._onMove),c.off("touchmove",this._onMove)),this._state==="active"&&this.fire(new o.Event("dragend")),this._state="inactive"}_addDragHandler(c){const f=this._map,v=this._pos;f&&v&&this._element.contains(c.originalEvent.target)&&(c.preventDefault(),this._positionDelta=c.point.sub(v),this._pointerdownPos=c.point,this._state="pending",f.on("mousemove",this._onMove),f.on("touchmove",this._onMove),f.once("mouseup",this._onUp),f.once("touchend",this._onUp))}setDraggable(c){this._draggable=!!c;const f=this._map;return f&&(c?(f.on("mousedown",this._addDragHandler),f.on("touchstart",this._addDragHandler)):(f.off("mousedown",this._addDragHandler),f.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(c){return this._rotation=c||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(c){return this._rotationAlignment=c||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment==="auto"||this._rotationAlignment==="horizon"&&this._map&&!this._map._showingGlobe()?"viewport":this._rotationAlignment}setPitchAlignment(c){return this._pitchAlignment=c||"auto",this._update(),this}getPitchAlignment(){return this._pitchAlignment==="auto"?this.getRotationAlignment():this._pitchAlignment}setOccludedOpacity(c){return this._occludedOpacity=c||.2,this._update(),this}getOccludedOpacity(){return this._occludedOpacity}}const og={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},LS=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function tx(g=new o.Point(0,0),c="bottom"){if(typeof g=="number"){const f=Math.round(Math.sqrt(.5*Math.pow(g,2)));switch(c){case"top":return new o.Point(0,g);case"top-left":return new o.Point(f,f);case"top-right":return new o.Point(-f,f);case"bottom":return new o.Point(0,-g);case"bottom-left":return new o.Point(f,-f);case"bottom-right":return new o.Point(-f,-f);case"left":return new o.Point(g,0);case"right":return new o.Point(-g,0)}return new o.Point(0,0)}return g instanceof o.Point||Array.isArray(g)?o.Point.convert(g):o.Point.convert(g[c]||[0,0])}class ag{constructor(c){this.jumpTo(c)}getValue(c){if(c<=this._startTime)return this._start;if(c>=this._endTime)return this._end;const f=o.easeCubicInOut((c-this._startTime)/(this._endTime-this._startTime));return this._start*(1-f)+this._end*f}isEasing(c){return c>=this._startTime&&c<=this._endTime}jumpTo(c){this._startTime=-1/0,this._endTime=-1/0,this._start=c,this._end=c}easeTo(c,f,v){this._start=this.getValue(f),this._end=c,this._startTime=f,this._endTime=f+v}}const rx={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","Map.Title":"Map","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScrollZoomBlocker.CtrlMessage":"Use ctrl + scroll to zoom the map","ScrollZoomBlocker.CmdMessage":"Use ⌘ + scroll to zoom the map","TouchPanBlocker.Message":"Use two fingers to move the map"},nx={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:85,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,performanceMetricsCollection:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,optimizeForTerrain:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,minTileCacheSize:null,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",localFontFamily:null,transformRequest:null,accessToken:null,fadeDuration:300,respectPrefersReducedMotion:!0,crossSourceCollisions:!0},jS={showCompass:!0,showZoom:!0,visualizePitch:!1};class zS{constructor(c,f,v=!1){this._clickTolerance=10,this.element=f,this.mouseRotate=new Jm({clickTolerance:c.dragRotate._mouseRotate._clickTolerance}),this.map=c,v&&(this.mousePitch=new Qm({clickTolerance:c.dragRotate._mousePitch._clickTolerance})),o.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),f.addEventListener("mousedown",this.mousedown),f.addEventListener("touchstart",this.touchstart,{passive:!1}),f.addEventListener("touchmove",this.touchmove),f.addEventListener("touchend",this.touchend),f.addEventListener("touchcancel",this.reset)}down(c,f){this.mouseRotate.mousedown(c,f),this.mousePitch&&this.mousePitch.mousedown(c,f),z()}move(c,f){const v=this.map,b=this.mouseRotate.mousemoveWindow(c,f),T=b&&b.bearingDelta;if(T&&v.setBearing(v.getBearing()+T),this.mousePitch){const O=this.mousePitch.mousemoveWindow(c,f),D=O&&O.pitchDelta;D&&v.setPitch(v.getPitch()+D)}}off(){const c=this.element;c.removeEventListener("mousedown",this.mousedown),c.removeEventListener("touchstart",this.touchstart,{passive:!1}),c.removeEventListener("touchmove",this.touchmove),c.removeEventListener("touchend",this.touchend),c.removeEventListener("touchcancel",this.reset),this.offTemp()}offTemp(){F(),o.window.removeEventListener("mousemove",this.mousemove),o.window.removeEventListener("mouseup",this.mouseup)}mousedown(c){this.down(o.extend({},c,{ctrlKey:!0,preventDefault:()=>c.preventDefault()}),Y(this.element,c)),o.window.addEventListener("mousemove",this.mousemove),o.window.addEventListener("mouseup",this.mouseup)}mousemove(c){this.move(c,Y(this.element,c))}mouseup(c){this.mouseRotate.mouseupWindow(c),this.mousePitch&&this.mousePitch.mouseupWindow(c),this.offTemp()}touchstart(c){c.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=Q(this.element,c.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>c.preventDefault()},this._startPos))}touchmove(c){c.targetTouches.length!==1?this.reset():(this._lastPos=Q(this.element,c.targetTouches)[0],this.move({preventDefault:()=>c.preventDefault()},this._lastPos))}touchend(c){c.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}const sg={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0,showUserHeading:!1},lg={maxWidth:100,unit:"metric"},cg={kilometer:"km",meter:"m",mile:"mi",foot:"ft","nautical-mile":"nm"},Ic={version:o.version,supported:E,setRTLTextPlugin:o.setRTLTextPlugin,getRTLTextPluginStatus:o.getRTLTextPluginStatus,Map:class extends Hh{constructor(g){if(o.LivePerformanceUtils.mark(o.PerformanceMarkers.create),(g=o.extend({},nx,g)).minZoom!=null&&g.maxZoom!=null&&g.minZoom>g.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(g.minPitch!=null&&g.maxPitch!=null&&g.minPitch>g.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(g.minPitch!=null&&g.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(g.maxPitch!=null&&g.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(g.antialias&&o.isSafariWithAntialiasingBug(o.window)&&(g.antialias=!1,o.warnOnce("Antialiasing is disabled for this WebGL context to avoid browser bug: https://github.com/mapbox/mapbox-gl-js/issues/11609")),super(new Tc(g.minZoom,g.maxZoom,g.minPitch,g.maxPitch,g.renderWorldCopies),g),this._interactive=g.interactive,this._minTileCacheSize=g.minTileCacheSize,this._maxTileCacheSize=g.maxTileCacheSize,this._failIfMajorPerformanceCaveat=g.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=g.preserveDrawingBuffer,this._antialias=g.antialias,this._useWebGL2=g.useWebGL2,this._trackResize=g.trackResize,this._bearingSnap=g.bearingSnap,this._refreshExpiredTiles=g.refreshExpiredTiles,this._fadeDuration=g.fadeDuration,this._isInitialLoad=!0,this._crossSourceCollisions=g.crossSourceCollisions,this._collectResourceTiming=g.collectResourceTiming,this._optimizeForTerrain=g.optimizeForTerrain,this._language=this._parseLanguage(g.language),this._worldview=g.worldview,this._renderTaskQueue=new ig,this._domRenderTaskQueue=new ig,this._controls=[],this._markers=[],this._popups=[],this._mapId=o.uniqueId(),this._locale=o.extend({},rx,g.locale),this._clickTolerance=g.clickTolerance,this._cooperativeGestures=g.cooperativeGestures,this._performanceMetricsCollection=g.performanceMetricsCollection,this._containerWidth=0,this._containerHeight=0,this._averageElevationLastSampledAt=-1/0,this._averageElevationExaggeration=0,this._averageElevation=new ag(0),this._interactionRange=[1/0,-1/0],this._visibilityHidden=0,this._useExplicitProjection=!1,this._requestManager=new o.RequestManager(g.transformRequest,g.accessToken,g.testMode),this._silenceAuthErrors=!!g.testMode,typeof g.container=="string"){if(this._container=o.window.document.getElementById(g.container),!this._container)throw new Error(`Container '${g.container}' not found.`)}else{if(!(g.container instanceof o.window.HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=g.container}if(this._container.childNodes.length>0&&o.warnOnce("The map container element should be empty, otherwise the map's interactivity will be negatively impacted. If you want to display a message when WebGL is not supported, use the Mapbox GL Supported plugin instead."),g.maxBounds&&this.setMaxBounds(g.maxBounds),o.bindAll(["_onWindowOnline","_onWindowResize","_onVisibilityChange","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),o.window!==void 0&&(o.window.addEventListener("online",this._onWindowOnline,!1),o.window.addEventListener("resize",this._onWindowResize,!1),o.window.addEventListener("orientationchange",this._onWindowResize,!1),o.window.addEventListener("webkitfullscreenchange",this._onWindowResize,!1),o.window.addEventListener("visibilitychange",this._onVisibilityChange,!1)),this.handlers=new ba(this,g),this._localFontFamily=g.localFontFamily,this._localIdeographFontFamily=g.localIdeographFontFamily,g.style&&this.setStyle(g.style,{localFontFamily:this._localFontFamily,localIdeographFontFamily:this._localIdeographFontFamily}),g.projection&&this.setProjection(g.projection),this._hash=g.hash&&new Xm(typeof g.hash=="string"&&g.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:g.center,zoom:g.zoom,bearing:g.bearing,pitch:g.pitch}),g.bounds&&(this.resize(),this.fitBounds(g.bounds,o.extend({},g.fitBoundsOptions,{duration:0})))),this.resize(),g.attributionControl&&this.addControl(new $t({customAttribution:g.customAttribution})),this._logoControl=new ng,this.addControl(this._logoControl,g.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",c=>{this._update(c.dataType==="style"),this.fire(new o.Event(`${c.dataType}data`,c))}),this.on("dataloading",c=>{this.fire(new o.Event(`${c.dataType}dataloading`,c))})}_getMapId(){return this._mapId}addControl(g,c){if(c===void 0&&(c=g.getDefaultPosition?g.getDefaultPosition():"top-right"),!g||!g.onAdd)return this.fire(new o.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const f=g.onAdd(this);this._controls.push(g);const v=this._controlPositions[c];return c.indexOf("bottom")!==-1?v.insertBefore(f,v.firstChild):v.appendChild(f),this}removeControl(g){if(!g||!g.onRemove)return this.fire(new o.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const c=this._controls.indexOf(g);return c>-1&&this._controls.splice(c,1),g.onRemove(this),this}hasControl(g){return this._controls.indexOf(g)>-1}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}resize(g){if(this._updateContainerDimensions(),this._containerWidth===this.transform.width&&this._containerHeight===this.transform.height)return this;this._resizeCanvas(this._containerWidth,this._containerHeight),this.transform.resize(this._containerWidth,this._containerHeight),this.painter.resize(Math.ceil(this._containerWidth),Math.ceil(this._containerHeight));const c=!this._moving;return c&&this.fire(new o.Event("movestart",g)).fire(new o.Event("move",g)),this.fire(new o.Event("resize",g)),c&&this.fire(new o.Event("moveend",g)),this}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()||null}setMaxBounds(g){return this.transform.setMaxBounds(o.LngLatBounds.convert(g)),this._update()}setMinZoom(g){if((g=g??-2)>=-2&&g<=this.transform.maxZoom)return this.transform.minZoom=g,this._update(),this.getZoom()<g?this.setZoom(g):this.fire(new o.Event("zoomstart")).fire(new o.Event("zoom")).fire(new o.Event("zoomend")),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(g){if((g=g??22)>=this.transform.minZoom)return this.transform.maxZoom=g,this._update(),this.getZoom()>g?this.setZoom(g):this.fire(new o.Event("zoomstart")).fire(new o.Event("zoom")).fire(new o.Event("zoomend")),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(g){if((g=g??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(g>=0&&g<=this.transform.maxPitch)return this.transform.minPitch=g,this._update(),this.getPitch()<g?this.setPitch(g):this.fire(new o.Event("pitchstart")).fire(new o.Event("pitch")).fire(new o.Event("pitchend")),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(g){if((g=g??85)>85)throw new Error("maxPitch must be less than or equal to 85");if(g>=this.transform.minPitch)return this.transform.maxPitch=g,this._update(),this.getPitch()>g?this.setPitch(g):this.fire(new o.Event("pitchstart")).fire(new o.Event("pitch")).fire(new o.Event("pitchend")),this;throw new Error("maxPitch must be greater than or equal to minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(g){return this.transform.renderWorldCopies=g,this.transform.renderWorldCopies||this._forceMarkerAndPopupUpdate(!0),this._update()}getLanguage(){return this._language}_parseLanguage(g){return g==="auto"?o.window.navigator.language:Array.isArray(g)?g.length===0?void 0:g.map(c=>c==="auto"?o.window.navigator.language:c):g}setLanguage(g){const c=this._parseLanguage(g);if(!this.style||c===this._language)return this;this._language=c,this.style._reloadSources();for(const f of this._controls)f._setLanguage&&f._setLanguage(this._language);return this}getWorldview(){return this._worldview}setWorldview(g){return this.style&&g!==this._worldview?(this._worldview=g,this.style._reloadSources(),this):this}getProjection(){return this.transform.mercatorFromTransition?{name:"globe",center:[0,0]}:this.transform.getProjection()}_showingGlobe(){return this.transform.projection.name==="globe"}setProjection(g){return this._lazyInitEmptyStyle(),g?typeof g=="string"&&(g={name:g}):g=null,this._useExplicitProjection=!!g,this._prioritizeAndUpdateProjection(g,this.style.stylesheet?this.style.stylesheet.projection:null)}_updateProjectionTransition(){if(this.getProjection().name!=="globe")return;const g=this.transform,c=g.projection.name;let f;c==="globe"&&g.zoom>=o.GLOBE_ZOOM_THRESHOLD_MAX?(g.setMercatorFromTransition(),f=!0):c==="mercator"&&g.zoom<o.GLOBE_ZOOM_THRESHOLD_MAX&&(g.setProjection({name:"globe"}),f=!0),f&&(this.style.applyProjectionUpdate(),this.style._forceSymbolLayerUpdate())}_prioritizeAndUpdateProjection(g,c){return this._updateProjection(g||c||{name:"mercator"})}_updateProjection(g){let c;if(c=g.name==="globe"&&this.transform.zoom>=o.GLOBE_ZOOM_THRESHOLD_MAX?this.transform.setMercatorFromTransition():this.transform.setProjection(g),this.style.applyProjectionUpdate(),c){this.painter.clearBackgroundTiles();for(const f in this.style._sourceCaches)this.style._sourceCaches[f].clearTiles();this._update(!0),this._forceMarkerAndPopupUpdate(!0)}return this}project(g){return this.transform.locationPoint3D(o.LngLat.convert(g))}unproject(g){return this.transform.pointLocation3D(o.Point.convert(g))}isMoving(){return this._moving||this.handlers&&this.handlers.isMoving()||!1}isZooming(){return this._zooming||this.handlers&&this.handlers.isZooming()||!1}isRotating(){return this._rotating||this.handlers&&this.handlers.isRotating()||!1}_isDragging(){return this.handlers&&this.handlers._isDragging()||!1}_createDelegatedListener(g,c,f){if(g==="mouseenter"||g==="mouseover"){let v=!1;const b=O=>{const D=c.filter(H=>this.getLayer(H)),B=D.length?this.queryRenderedFeatures(O.point,{layers:D}):[];B.length?v||(v=!0,f.call(this,new ui(g,this,O.originalEvent,{features:B}))):v=!1},T=()=>{v=!1};return{layers:new Set(c),listener:f,delegates:{mousemove:b,mouseout:T}}}if(g==="mouseleave"||g==="mouseout"){let v=!1;const b=O=>{const D=c.filter(B=>this.getLayer(B));(D.length?this.queryRenderedFeatures(O.point,{layers:D}):[]).length?v=!0:v&&(v=!1,f.call(this,new ui(g,this,O.originalEvent)))},T=O=>{v&&(v=!1,f.call(this,new ui(g,this,O.originalEvent)))};return{layers:new Set(c),listener:f,delegates:{mousemove:b,mouseout:T}}}{const v=b=>{const T=c.filter(D=>this.getLayer(D)),O=T.length?this.queryRenderedFeatures(b.point,{layers:T}):[];O.length&&(b.features=O,f.call(this,b),delete b.features)};return{layers:new Set(c),listener:f,delegates:{[g]:v}}}}on(g,c,f){if(f===void 0)return super.on(g,c);Array.isArray(c)||(c=[c]);const v=this._createDelegatedListener(g,c,f);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[g]=this._delegatedListeners[g]||[],this._delegatedListeners[g].push(v);for(const b in v.delegates)this.on(b,v.delegates[b]);return this}once(g,c,f){if(f===void 0)return super.once(g,c);Array.isArray(c)||(c=[c]);const v=this._createDelegatedListener(g,c,f);for(const b in v.delegates)this.once(b,v.delegates[b]);return this}off(g,c,f){if(f===void 0)return super.off(g,c);c=new Set(Array.isArray(c)?c:[c]);const v=(T,O)=>{if(T.size!==O.size)return!1;for(const D of T)if(!O.has(D))return!1;return!0},b=this._delegatedListeners?this._delegatedListeners[g]:void 0;return b&&(T=>{for(let O=0;O<T.length;O++){const D=T[O];if(D.listener===f&&v(D.layers,c)){for(const B in D.delegates)this.off(B,D.delegates[B]);return T.splice(O,1),this}}})(b),this}queryRenderedFeatures(g,c){return this.style?(c!==void 0||g===void 0||g instanceof o.Point||Array.isArray(g)||(c=g,g=void 0),this.style.queryRenderedFeatures(g=g||[[0,0],[this.transform.width,this.transform.height]],c=c||{},this.transform)):[]}querySourceFeatures(g,c){return this.style.querySourceFeatures(g,c)}isPointOnSurface(g){const{name:c}=this.transform.projection;return c!=="globe"&&c!=="mercator"&&o.warnOnce(`${c} projection does not support isPointOnSurface, this API may behave unexpectedly.`),this.transform.isPointOnSurface(o.Point.convert(g))}setStyle(g,c){return(c=o.extend({},{localIdeographFontFamily:this._localIdeographFontFamily,localFontFamily:this._localFontFamily},c)).diff!==!1&&c.localIdeographFontFamily===this._localIdeographFontFamily&&c.localFontFamily===this._localFontFamily&&this.style&&g?(this._diffStyle(g,c),this):(this._localIdeographFontFamily=c.localIdeographFontFamily,this._localFontFamily=c.localFontFamily,this._updateStyle(g,c))}_getUIString(g){const c=this._locale[g];if(c==null)throw new Error(`Missing UI string '${g}'`);return c}_updateStyle(g,c){return this.style&&(this.style.setEventedParent(null),this.style._remove(),this.style=void 0),g&&(this.style=new _a(this,c||{}),this.style.setEventedParent(this,{style:this.style}),typeof g=="string"?this.style.loadURL(g):this.style.loadJSON(g)),this._updateTerrain(),this}_lazyInitEmptyStyle(){this.style||(this.style=new _a(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(g,c){if(typeof g=="string"){const f=this._requestManager.normalizeStyleURL(g),v=this._requestManager.transformRequest(f,o.ResourceType.Style);o.getJSON(v,(b,T)=>{b?this.fire(new o.ErrorEvent(b)):T&&this._updateDiff(T,c)})}else typeof g=="object"&&this._updateDiff(g,c)}_updateDiff(g,c){try{this.style.setState(g)&&this._update(!0)}catch(f){o.warnOnce(`Unable to perform style diff: ${f.message||f.error||f}.  Rebuilding the style from scratch.`),this._updateStyle(g,c)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():(o.warnOnce("There is no style added to the map."),!1)}addSource(g,c){return this._lazyInitEmptyStyle(),this.style.addSource(g,c),this._update(!0)}isSourceLoaded(g){return!!this.style&&this.style._isSourceCacheLoaded(g)}areTilesLoaded(){const g=this.style&&this.style._sourceCaches;for(const c in g){const f=g[c]._tiles;for(const v in f){const b=f[v];if(b.state!=="loaded"&&b.state!=="errored")return!1}}return!0}addSourceType(g,c,f){this._lazyInitEmptyStyle(),this.style.addSourceType(g,c,f)}removeSource(g){return this.style.removeSource(g),this._updateTerrain(),this._update(!0)}getSource(g){return this.style.getSource(g)}addImage(g,c,{pixelRatio:f=1,sdf:v=!1,stretchX:b,stretchY:T,content:O}={}){if(this._lazyInitEmptyStyle(),c instanceof o.window.HTMLImageElement||o.window.ImageBitmap&&c instanceof o.window.ImageBitmap){const{width:D,height:B,data:H}=o.exported.getImageData(c);this.style.addImage(g,{data:new o.RGBAImage({width:D,height:B},H),pixelRatio:f,stretchX:b,stretchY:T,content:O,sdf:v,version:0})}else if(c.width===void 0||c.height===void 0)this.fire(new o.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));else{const{width:D,height:B}=c,H=c;this.style.addImage(g,{data:new o.RGBAImage({width:D,height:B},new Uint8Array(H.data)),pixelRatio:f,stretchX:b,stretchY:T,content:O,sdf:v,version:0,userImage:H}),H.onAdd&&H.onAdd(this,g)}}updateImage(g,c){const f=this.style.getImage(g);if(!f)return void this.fire(new o.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const v=c instanceof o.window.HTMLImageElement||o.window.ImageBitmap&&c instanceof o.window.ImageBitmap?o.exported.getImageData(c):c,{width:b,height:T}=v;b!==void 0&&T!==void 0?b===f.data.width&&T===f.data.height?(f.data.replace(v.data,!(c instanceof o.window.HTMLImageElement||o.window.ImageBitmap&&c instanceof o.window.ImageBitmap)),this.style.updateImage(g,f)):this.fire(new o.ErrorEvent(new Error(`The width and height of the updated image (${b}, ${T})
                must be that same as the previous version of the image
                (${f.data.width}, ${f.data.height})`))):this.fire(new o.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")))}hasImage(g){return g?!!this.style.getImage(g):(this.fire(new o.ErrorEvent(new Error("Missing required image id"))),!1)}removeImage(g){this.style.removeImage(g)}loadImage(g,c){o.getImage(this._requestManager.transformRequest(g,o.ResourceType.Image),(f,v)=>{c(f,v instanceof o.window.HTMLImageElement?o.exported.getImageData(v):v)})}listImages(){return this.style.listImages()}addLayer(g,c){return this._lazyInitEmptyStyle(),this.style.addLayer(g,c),this._update(!0)}moveLayer(g,c){return this.style.moveLayer(g,c),this._update(!0)}removeLayer(g){return this.style.removeLayer(g),this._update(!0)}getLayer(g){return this.style.getLayer(g)}setLayerZoomRange(g,c,f){return this.style.setLayerZoomRange(g,c,f),this._update(!0)}setFilter(g,c,f={}){return this.style.setFilter(g,c,f),this._update(!0)}getFilter(g){return this.style.getFilter(g)}setPaintProperty(g,c,f,v={}){return this.style.setPaintProperty(g,c,f,v),this._update(!0)}getPaintProperty(g,c){return this.style.getPaintProperty(g,c)}setLayoutProperty(g,c,f,v={}){return this.style.setLayoutProperty(g,c,f,v),this._update(!0)}getLayoutProperty(g,c){return this.style.getLayoutProperty(g,c)}setLight(g,c={}){return this._lazyInitEmptyStyle(),this.style.setLight(g,c),this._update(!0)}getLight(){return this.style.getLight()}setTerrain(g){return this._lazyInitEmptyStyle(),!g&&this.transform.projection.requiresDraping?this.style.setTerrainForDraping():this.style.setTerrain(g),this._averageElevationLastSampledAt=-1/0,this._update(!0)}getTerrain(){return this.style?this.style.getTerrain():null}setFog(g){return this._lazyInitEmptyStyle(),this.style.setFog(g),this._update(!0)}getFog(){return this.style?this.style.getFog():null}_queryFogOpacity(g){return this.style&&this.style.fog?this.style.fog.getOpacityAtLatLng(o.LngLat.convert(g),this.transform):0}setFeatureState(g,c){return this.style.setFeatureState(g,c),this._update()}removeFeatureState(g,c){return this.style.removeFeatureState(g,c),this._update()}getFeatureState(g){return this.style.getFeatureState(g)}_updateContainerDimensions(){if(!this._container)return;const g=this._container.getBoundingClientRect().width||400,c=this._container.getBoundingClientRect().height||300;let f,v,b,T=this._container;for(;T&&(!v||!b);){const O=o.window.getComputedStyle(T).transform;O&&O!=="none"&&(f=O.match(/matrix.*\((.+)\)/)[1].split(", "),f[0]&&f[0]!=="0"&&f[0]!=="1"&&(v=f[0]),f[3]&&f[3]!=="0"&&f[3]!=="1"&&(b=f[3])),T=T.parentElement}this._containerWidth=v?Math.abs(g/v):g,this._containerHeight=b?Math.abs(c/b):c}_detectMissingCSS(){o.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")!=="rgb(250, 128, 114)"&&o.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")}_setupContainer(){const g=this._container;g.classList.add("mapboxgl-map"),(this._missingCSSCanary=I("div","mapboxgl-canary",g)).style.visibility="hidden",this._detectMissingCSS();const c=this._canvasContainer=I("div","mapboxgl-canvas-container",g);this._interactive&&c.classList.add("mapboxgl-interactive"),this._canvas=I("canvas","mapboxgl-canvas",c),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region"),this._updateContainerDimensions(),this._resizeCanvas(this._containerWidth,this._containerHeight);const f=this._controlContainer=I("div","mapboxgl-control-container",g),v=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(b=>{v[b]=I("div",`mapboxgl-ctrl-${b}`,f)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(g,c){const f=o.exported.devicePixelRatio||1;this._canvas.width=f*Math.ceil(g),this._canvas.height=f*Math.ceil(c),this._canvas.style.width=`${g}px`,this._canvas.style.height=`${c}px`}_addMarker(g){this._markers.push(g)}_removeMarker(g){const c=this._markers.indexOf(g);c!==-1&&this._markers.splice(c,1)}_addPopup(g){this._popups.push(g)}_removePopup(g){const c=this._popups.indexOf(g);c!==-1&&this._popups.splice(c,1)}_setupPainter(){const g=o.extend({},E.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),c=this._useWebGL2&&this._canvas.getContext("webgl2",g),f=c||this._canvas.getContext("webgl",g)||this._canvas.getContext("experimental-webgl",g);f?(this._useWebGL2&&!c&&o.warnOnce("Failed to create WebGL 2 context. Using WebGL 1."),o.storeAuthState(f,!0),this.painter=new Sc(f,this.transform,!!c),this.on("data",v=>{v.dataType==="source"&&this.painter.setTileLoadedFlag(!0)}),o.exported$1.testSupport(f)):this.fire(new o.ErrorEvent(new Error("Failed to initialize WebGL")))}_contextLost(g){g.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new o.Event("webglcontextlost",{originalEvent:g}))}_contextRestored(g){this._setupPainter(),this.resize(),this._update(),this.fire(new o.Event("webglcontextrestored",{originalEvent:g}))}_onMapScroll(g){if(g.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(g){return this.style?(this._styleDirty=this._styleDirty||g,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(g){return this._update(),this._renderTaskQueue.add(g)}_cancelRenderFrame(g){this._renderTaskQueue.remove(g)}_requestDomTask(g){!this.loaded()||this.loaded()&&!this.isMoving()?g():this._domRenderTaskQueue.add(g)}_render(g){let c;const f=this.painter.context.extTimerQuery,v=o.exported.now();if(this.listens("gpu-timing-frame")&&(c=f.createQueryEXT(),f.beginQueryEXT(f.TIME_ELAPSED_EXT,c)),this.painter.context.setDirty(),this.painter.setBaseState(),(this.isMoving()||this.isRotating()||this.isZooming())&&(this._interactionRange[0]=Math.min(this._interactionRange[0],o.window.performance.now()),this._interactionRange[1]=Math.max(this._interactionRange[1],o.window.performance.now())),this._renderTaskQueue.run(g),this._domRenderTaskQueue.run(g),this._removed)return;this._updateProjectionTransition();const b=this._isInitialLoad?0:this._fadeDuration;if(this.style&&this._styleDirty){this._styleDirty=!1;const D=this.transform.zoom,B=this.transform.pitch,H=o.exported.now(),q=new o.EvaluationParameters(D,{now:H,fadeDuration:b,pitch:B,transition:this.style.getTransition()});this.style.update(q)}this.style&&this.style.fog&&this.style.fog.hasTransition()&&(this.style._markersNeedUpdate=!0,this._sourcesDirty=!0);let T=!1;if(this.style&&this._sourcesDirty?(this._sourcesDirty=!1,this.painter._updateFog(this.style),this._updateTerrain(),T=this._updateAverageElevation(v),this.style._updateSources(this.transform),this._forceMarkerAndPopupUpdate()):T=this._updateAverageElevation(v),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,b,this._crossSourceCollisions),this.style&&this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showTerrainWireframe:this.showTerrainWireframe,showOverdrawInspector:this._showOverdrawInspector,showQueryGeometry:!!this._showQueryGeometry,showTileAABBs:this.showTileAABBs,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:b,isInitialLoad:this._isInitialLoad,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer"),gpuTimingDeferredRender:!!this.listens("gpu-timing-deferred-render"),speedIndexTiming:this.speedIndexTiming}),this.fire(new o.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new o.Event("load"))),this.style&&this.style.hasTransitions()&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),c){const D=o.exported.now()-v;f.endQueryEXT(f.TIME_ELAPSED_EXT,c),setTimeout(()=>{const B=f.getQueryObjectEXT(c,f.QUERY_RESULT_EXT)/1e6;f.deleteQueryEXT(c),this.fire(new o.Event("gpu-timing-frame",{cpuTime:D,gpuTime:B})),o.window.performance.mark("frame-gpu",{startTime:v,detail:{gpuTime:B}})},50)}if(this.listens("gpu-timing-layer")){const D=this.painter.collectGpuTimers();setTimeout(()=>{const B=this.painter.queryGpuTimers(D);this.fire(new o.Event("gpu-timing-layer",{layerTimes:B}))},50)}if(this.listens("gpu-timing-deferred-render")){const D=this.painter.collectDeferredRenderGpuQueries();setTimeout(()=>{const B=this.painter.queryGpuTimeDeferredRender(D);this.fire(new o.Event("gpu-timing-deferred-render",{gpuTime:B}))},50)}const O=this._sourcesDirty||this._styleDirty||this._placementDirty||T;if(O||this._repaint)this.triggerRepaint();else{const D=!this.isMoving()&&this.loaded();if(D&&(T=this._updateAverageElevation(v,!0)),T)this.triggerRepaint();else if(this._triggerFrame(!1),D&&(this.fire(new o.Event("idle")),this._isInitialLoad=!1,this.speedIndexTiming)){const B=this._calculateSpeedIndex();this.fire(new o.Event("speedindexcompleted",{speedIndex:B})),this.speedIndexTiming=!1}}!this._loaded||this._fullyLoaded||O||(this._fullyLoaded=!0,o.LivePerformanceUtils.mark(o.PerformanceMarkers.fullLoad),this._performanceMetricsCollection&&o.postPerformanceEvent(this._requestManager._customAccessToken,{width:this.painter.width,height:this.painter.height,interactionRange:this._interactionRange,visibilityHidden:this._visibilityHidden,terrainEnabled:!!this.painter.style.getTerrain(),fogEnabled:!!this.painter.style.getFog(),projection:this.getProjection().name,zoom:this.transform.zoom,renderer:this.painter.context.renderer,vendor:this.painter.context.vendor}),this._authenticate())}_forceMarkerAndPopupUpdate(g){for(const c of this._markers)g&&!this.getRenderWorldCopies()&&(c._lngLat=c._lngLat.wrap()),c._update();for(const c of this._popups)!g||this.getRenderWorldCopies()||c._trackPointer||(c._lngLat=c._lngLat.wrap()),c._update()}_updateAverageElevation(g,c=!1){const f=v=>(this.transform.averageElevation=v,this._update(!1),!0);if(!this.painter.averageElevationNeedsEasing())return this.transform.averageElevation!==0&&f(0);if((c||g-this._averageElevationLastSampledAt>500)&&!this._averageElevation.isEasing(g)){const v=this.transform.averageElevation;let b=this.transform.sampleAverageElevation(),T=!1;this.transform.elevation&&(T=this.transform.elevation.exaggeration()!==this._averageElevationExaggeration,this._averageElevationExaggeration=this.transform.elevation.exaggeration()),isNaN(b)?b=0:this._averageElevationLastSampledAt=g;const O=Math.abs(v-b);if(O>1){if(this._isInitialLoad||T)return this._averageElevation.jumpTo(b),f(b);this._averageElevation.easeTo(b,g,300)}else if(O>1e-4)return this._averageElevation.jumpTo(b),f(b)}return!!this._averageElevation.isEasing(g)&&f(this._averageElevation.getValue(g))}_authenticate(){o.getMapSessionAPI(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,g=>{if(g&&(g.message===o.AUTH_ERR_MSG||g.status===401)){const c=this.painter.context.gl;o.storeAuthState(c,!1),this._logoControl instanceof ng&&this._logoControl._updateLogo(),c&&c.clear(c.DEPTH_BUFFER_BIT|c.COLOR_BUFFER_BIT|c.STENCIL_BUFFER_BIT),this._silenceAuthErrors||this.fire(new o.ErrorEvent(new Error("A valid Mapbox access token is required to use Mapbox GL JS. To create an account or a new access token, visit https://account.mapbox.com/")))}}),o.postMapLoadEvent(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,()=>{})}_updateTerrain(){const g=this._isDragging();this.painter.updateTerrain(this.style,g)}_calculateSpeedIndex(){const g=this.painter.canvasCopy(),c=this.painter.getCanvasCopiesAndTimestamps();c.timeStamps.push(performance.now());const f=this.painter.context.gl,v=f.createFramebuffer();function b(T){f.framebufferTexture2D(f.FRAMEBUFFER,f.COLOR_ATTACHMENT0,f.TEXTURE_2D,T,0);const O=new Uint8Array(f.drawingBufferWidth*f.drawingBufferHeight*4);return f.readPixels(0,0,f.drawingBufferWidth,f.drawingBufferHeight,f.RGBA,f.UNSIGNED_BYTE,O),O}return f.bindFramebuffer(f.FRAMEBUFFER,v),this._canvasPixelComparison(b(g),c.canvasCopies.map(b),c.timeStamps)}_canvasPixelComparison(g,c,f){let v=f[1]-f[0];const b=g.length/4;for(let T=0;T<c.length;T++){const O=c[T];let D=0;for(let B=0;B<O.length;B+=4)O[B]===g[B]&&O[B+1]===g[B+1]&&O[B+2]===g[B+2]&&O[B+3]===g[B+3]&&(D+=1);v+=(f[T+2]-f[T+1])*(1-D/b)}return v}remove(){this._hash&&this._hash.remove();for(const c of this._controls)c.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this._domRenderTaskQueue.clear(),this.style&&this.style.destroy(),this.painter.destroy(),this.handlers&&this.handlers.destroy(),this.handlers=void 0,this.setStyle(null),o.window!==void 0&&(o.window.removeEventListener("resize",this._onWindowResize,!1),o.window.removeEventListener("orientationchange",this._onWindowResize,!1),o.window.removeEventListener("webkitfullscreenchange",this._onWindowResize,!1),o.window.removeEventListener("online",this._onWindowOnline,!1),o.window.removeEventListener("visibilitychange",this._onVisibilityChange,!1));const g=this.painter.context.gl.getExtension("WEBGL_lose_context");g&&g.loseContext(),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvasContainer.remove(),this._controlContainer.remove(),this._missingCSSCanary.remove(),this._canvas=void 0,this._canvasContainer=void 0,this._controlContainer=void 0,this._missingCSSCanary=void 0,this._container.classList.remove("mapboxgl-map"),this._container.removeEventListener("scroll",this._onMapScroll,!1),o.removeAuthState(this.painter.context.gl),this._removed=!0,this.fire(new o.Event("remove"))}triggerRepaint(){this._triggerFrame(!0)}_triggerFrame(g){this._renderNextFrame=this._renderNextFrame||g,this.style&&!this._frame&&(this._frame=o.exported.frame(c=>{const f=!!this._renderNextFrame;this._frame=null,this._renderNextFrame=null,f&&this._render(c)}))}_preloadTiles(g){const c=this.style?Object.values(this.style._sourceCaches):[];return o.asyncAll(c,(f,v)=>f._preloadTiles(g,v),()=>{this.triggerRepaint()}),this}_onWindowOnline(){this._update()}_onWindowResize(g){this._trackResize&&this.resize({originalEvent:g})._update()}_onVisibilityChange(){o.window.document.visibilityState==="hidden"&&this._visibilityHidden++}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(g){this._showTileBoundaries!==g&&(this._showTileBoundaries=g,this._update())}get showTerrainWireframe(){return!!this._showTerrainWireframe}set showTerrainWireframe(g){this._showTerrainWireframe!==g&&(this._showTerrainWireframe=g,this._update())}get speedIndexTiming(){return!!this._speedIndexTiming}set speedIndexTiming(g){this._speedIndexTiming!==g&&(this._speedIndexTiming=g,this._update())}get showPadding(){return!!this._showPadding}set showPadding(g){this._showPadding!==g&&(this._showPadding=g,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(g){this._showCollisionBoxes!==g&&(this._showCollisionBoxes=g,g?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(g){this._showOverdrawInspector!==g&&(this._showOverdrawInspector=g,this._update())}get repaint(){return!!this._repaint}set repaint(g){this._repaint!==g&&(this._repaint=g,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(g){this._vertices=g,this._update()}get showTileAABBs(){return!!this._showTileAABBs}set showTileAABBs(g){this._showTileAABBs!==g&&(this._showTileAABBs=g,g&&this._update())}_setCacheLimits(g,c){o.setCacheLimits(g,c)}get version(){return o.version}},NavigationControl:class{constructor(g){this.options=o.extend({},jS,g),this._container=I("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",c=>c.preventDefault()),this.options.showZoom&&(o.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",c=>{this._map&&this._map.zoomIn({},{originalEvent:c})}),I("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",c=>{this._map&&this._map.zoomOut({},{originalEvent:c})}),I("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(o.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",c=>{const f=this._map;f&&(this.options.visualizePitch?f.resetNorthPitch({},{originalEvent:c}):f.resetNorth({},{originalEvent:c}))}),this._compassIcon=I("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}_updateZoomButtons(){const g=this._map;if(!g)return;const c=g.getZoom(),f=c===g.getMaxZoom(),v=c===g.getMinZoom();this._zoomInButton.disabled=f,this._zoomOutButton.disabled=v,this._zoomInButton.setAttribute("aria-disabled",f.toString()),this._zoomOutButton.setAttribute("aria-disabled",v.toString())}_rotateCompassArrow(){const g=this._map;if(!g)return;const c=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(g.transform.pitch*(Math.PI/180)),.5)}) rotateX(${g.transform.pitch}deg) rotateZ(${g.transform.angle*(180/Math.PI)}deg)`:`rotate(${g.transform.angle*(180/Math.PI)}deg)`;g._requestDomTask(()=>{this._compassIcon&&(this._compassIcon.style.transform=c)})}onAdd(g){return this._map=g,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),g.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&g.on("pitch",this._rotateCompassArrow),g.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new zS(g,this._compass,this.options.visualizePitch)),this._container}onRemove(){const g=this._map;g&&(this._container.remove(),this.options.showZoom&&g.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&g.off("pitch",this._rotateCompassArrow),g.off("rotate",this._rotateCompassArrow),this._handler&&this._handler.off(),this._handler=void 0),this._map=void 0)}_createButton(g,c){const f=I("button",g,this._container);return f.type="button",f.addEventListener("click",c),f}_setButtonTitle(g,c){if(!this._map)return;const f=this._map._getUIString(`NavigationControl.${c}`);g.setAttribute("aria-label",f),g.firstElementChild&&g.firstElementChild.setAttribute("title",f)}},GeolocateControl:class extends o.Evented{constructor(g){super(),this.options=o.extend({geolocation:o.window.navigator.geolocation},sg,g),o.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker","_updateMarkerRotation","_onDeviceOrientation"],this),this._updateMarkerRotationThrottled=Ac(this._updateMarkerRotation,20),this._numberOfWatches=0}onAdd(g){return this._map=g,this._container=I("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkGeolocationSupport(this._setupUI),this._container}onRemove(){this._geolocationWatchID!==void 0&&(this.options.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),this._container.remove(),this._map.off("zoom",this._onZoom),this._map=void 0,this._numberOfWatches=0,this._noTimeout=!1}_checkGeolocationSupport(g){const c=(f=!!this.options.geolocation)=>{this._supportsGeolocation=f,g(f)};this._supportsGeolocation!==void 0?g(this._supportsGeolocation):o.window.navigator.permissions!==void 0?o.window.navigator.permissions.query({name:"geolocation"}).then(f=>c(f.state!=="denied")).catch(()=>c()):c()}_isOutOfMapMaxBounds(g){const c=this._map.getMaxBounds(),f=g.coords;return!!c&&(f.longitude<c.getWest()||f.longitude>c.getEast()||f.latitude<c.getSouth()||f.latitude>c.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}}_onSuccess(g){if(this._map){if(this._isOutOfMapMaxBounds(g))return this._setErrorState(),this.fire(new o.Event("outofmaxbounds",g)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=g,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(g),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(g),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new o.Event("geolocate",g)),this._finish()}}_updateCamera(g){const c=new o.LngLat(g.coords.longitude,g.coords.latitude),f=g.coords.accuracy,v=this._map.getBearing(),b=o.extend({bearing:v},this.options.fitBoundsOptions);this._map.fitBounds(c.toBounds(f),b,{geolocateSource:!0})}_updateMarker(g){if(g){const c=new o.LngLat(g.coords.longitude,g.coords.latitude);this._accuracyCircleMarker.setLngLat(c).addTo(this._map),this._userLocationDotMarker.setLngLat(c).addTo(this._map),this._accuracy=g.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const g=this._map.transform,c=o.mercatorZfromAltitude(1,g._center.lat)*g.worldSize,f=Math.ceil(2*this._accuracy*c);this._circleElement.style.width=`${f}px`,this._circleElement.style.height=`${f}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_updateMarkerRotation(){this._userLocationDotMarker&&typeof this._heading=="number"?(this._userLocationDotMarker.setRotation(this._heading),this._dotElement.classList.add("mapboxgl-user-location-show-heading")):(this._dotElement.classList.remove("mapboxgl-user-location-show-heading"),this._userLocationDotMarker.setRotation(0))}_onError(g){if(this._map){if(this.options.trackUserLocation)if(g.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const c=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.setAttribute("aria-label",c),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",c),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(g.code===3&&this._noTimeout)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new o.Event("error",g)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(g){if(this._map!==void 0){if(this._container.addEventListener("contextmenu",c=>c.preventDefault()),this._geolocateButton=I("button","mapboxgl-ctrl-geolocate",this._container),I("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",g===!1){o.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");const c=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.setAttribute("aria-label",c),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",c)}else{const c=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.setAttribute("aria-label",c),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",c)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=I("div","mapboxgl-user-location"),this._dotElement.appendChild(I("div","mapboxgl-user-location-dot")),this._dotElement.appendChild(I("div","mapboxgl-user-location-heading")),this._userLocationDotMarker=new jt({element:this._dotElement,rotationAlignment:"map",pitchAlignment:"map"}),this._circleElement=I("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new jt({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",c=>{c.geolocateSource||this._watchState!=="ACTIVE_LOCK"||c.originalEvent&&c.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this.fire(new o.Event("trackuserlocationend")))})}}_onDeviceOrientation(g){this._userLocationDotMarker&&(g.webkitCompassHeading?this._heading=g.webkitCompassHeading:g.absolute===!0&&(this._heading=-1*g.alpha),this._updateMarkerRotationThrottled())}trigger(){if(!this._setup)return o.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new o.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":this._numberOfWatches--,this._noTimeout=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new o.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new o.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let g;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),this._numberOfWatches++,this._numberOfWatches>1?(g={maximumAge:6e5,timeout:0},this._noTimeout=!0):(g=this.options.positionOptions,this._noTimeout=!1),this._geolocationWatchID=this.options.geolocation.watchPosition(this._onSuccess,this._onError,g),this.options.showUserHeading&&this._addDeviceOrientationListener()}}else this.options.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_addDeviceOrientationListener(){const g=()=>{o.window.addEventListener("ondeviceorientationabsolute"in o.window?"deviceorientationabsolute":"deviceorientation",this._onDeviceOrientation)};o.window.DeviceMotionEvent!==void 0&&typeof o.window.DeviceMotionEvent.requestPermission=="function"?DeviceOrientationEvent.requestPermission().then(c=>{c==="granted"&&g()}).catch(console.error):g()}_clearWatch(){this.options.geolocation.clearWatch(this._geolocationWatchID),o.window.removeEventListener("deviceorientation",this._onDeviceOrientation),o.window.removeEventListener("deviceorientationabsolute",this._onDeviceOrientation),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:$t,ScaleControl:class{constructor(g){this.options=o.extend({},lg,g),this._isNumberFormatSupported=function(){try{return new Intl.NumberFormat("en",{style:"unit",unitDisplay:"short",unit:"meter"}),!0}catch{return!1}}(),o.bindAll(["_update","_setScale","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_update(){const g=this.options.maxWidth||100,c=this._map,f=c._containerHeight/2,v=c._containerWidth/2-g/2,b=c.unproject([v,f]),T=c.unproject([v+g,f]),O=b.distanceTo(T);if(this.options.unit==="imperial"){const D=3.2808*O;D>5280?this._setScale(g,D/5280,"mile"):this._setScale(g,D,"foot")}else this.options.unit==="nautical"?this._setScale(g,O/1852,"nautical-mile"):O>=1e3?this._setScale(g,O/1e3,"kilometer"):this._setScale(g,O,"meter")}_setScale(g,c,f){this._map._requestDomTask(()=>{const v=function(T){const O=Math.pow(10,`${Math.floor(T)}`.length-1);let D=T/O;return D=D>=10?10:D>=5?5:D>=3?3:D>=2?2:D>=1?1:function(B){const H=Math.pow(10,Math.ceil(-Math.log(B)/Math.LN10));return Math.round(B*H)/H}(D),O*D}(c),b=v/c;this._container.innerHTML=this._isNumberFormatSupported&&f!=="nautical-mile"?new Intl.NumberFormat(this._language,{style:"unit",unitDisplay:"short",unit:f}).format(v):`${v}&nbsp;${cg[f]}`,this._container.style.width=g*b+"px"})}onAdd(g){return this._map=g,this._language=g.getLanguage(),this._container=I("div","mapboxgl-ctrl mapboxgl-ctrl-scale",g.getContainer()),this._container.dir="auto",this._map.on("move",this._update),this._update(),this._container}onRemove(){this._container.remove(),this._map.off("move",this._update),this._map=void 0}_setLanguage(g){this._language=g,this._update()}setUnit(g){this.options.unit=g,this._update()}},FullscreenControl:class{constructor(g){this._fullscreen=!1,g&&g.container&&(g.container instanceof o.window.HTMLElement?this._container=g.container:o.warnOnce("Full screen control 'container' must be a DOM element.")),o.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in o.window.document?this._fullscreenchange="fullscreenchange":"onwebkitfullscreenchange"in o.window.document&&(this._fullscreenchange="webkitfullscreenchange")}onAdd(g){return this._map=g,this._container||(this._container=this._map.getContainer()),this._controlContainer=I("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",o.warnOnce("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){this._controlContainer.remove(),this._map=null,o.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)}_checkFullscreenSupport(){return!(!o.window.document.fullscreenEnabled&&!o.window.document.webkitFullscreenEnabled)}_setupUI(){const g=this._fullscreenButton=I("button","mapboxgl-ctrl-fullscreen",this._controlContainer);I("span","mapboxgl-ctrl-icon",g).setAttribute("aria-hidden","true"),g.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),o.window.document.addEventListener(this._fullscreenchange,this._changeIcon)}_updateTitle(){const g=this._getTitle();this._fullscreenButton.setAttribute("aria-label",g),this._fullscreenButton.firstElementChild&&this._fullscreenButton.firstElementChild.setAttribute("title",g)}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(o.window.document.fullscreenElement||o.window.document.webkitFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}_onClickFullscreen(){this._isFullscreen()?o.window.document.exitFullscreen?o.window.document.exitFullscreen():o.window.document.webkitCancelFullScreen&&o.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}},Popup:class extends o.Evented{constructor(g){super(),this.options=o.extend(Object.create(og),g),o.bindAll(["_update","_onClose","remove","_onMouseEvent"],this),this._classList=new Set(g&&g.className?g.className.trim().split(/\s+/):[])}addTo(g){return this._map&&this.remove(),this._map=g,this.options.closeOnClick&&g.on("preclick",this._onClose),this.options.closeOnMove&&g.on("move",this._onClose),g.on("remove",this.remove),this._update(),g._addPopup(this),this._focusFirstElement(),this._trackPointer?(g.on("mousemove",this._onMouseEvent),g.on("mouseup",this._onMouseEvent),g._canvasContainer.classList.add("mapboxgl-track-pointer")):g.on("move",this._update),this.fire(new o.Event("open")),this}isOpen(){return!!this._map}remove(){this._content&&this._content.remove(),this._container&&(this._container.remove(),this._container=void 0);const g=this._map;return g&&(g.off("move",this._update),g.off("move",this._onClose),g.off("preclick",this._onClose),g.off("click",this._onClose),g.off("remove",this.remove),g.off("mousemove",this._onMouseEvent),g.off("mouseup",this._onMouseEvent),g.off("drag",this._onMouseEvent),g._canvasContainer&&g._canvasContainer.classList.remove("mapboxgl-track-pointer"),g._removePopup(this),this._map=void 0),this.fire(new o.Event("close")),this}getLngLat(){return this._lngLat}setLngLat(g){this._lngLat=o.LngLat.convert(g),this._pos=null,this._trackPointer=!1,this._update();const c=this._map;return c&&(c.on("move",this._update),c.off("mousemove",this._onMouseEvent),c._canvasContainer.classList.remove("mapboxgl-track-pointer")),this}trackPointer(){this._trackPointer=!0,this._pos=null,this._update();const g=this._map;return g&&(g.off("move",this._update),g.on("mousemove",this._onMouseEvent),g.on("drag",this._onMouseEvent),g._canvasContainer.classList.add("mapboxgl-track-pointer")),this}getElement(){return this._container}setText(g){return this.setDOMContent(o.window.document.createTextNode(g))}setHTML(g){const c=o.window.document.createDocumentFragment(),f=o.window.document.createElement("body");let v;for(f.innerHTML=g;v=f.firstChild,v;)c.appendChild(v);return this.setDOMContent(c)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(g){return this.options.maxWidth=g,this._update(),this}setDOMContent(g){let c=this._content;if(c)for(;c.hasChildNodes();)c.firstChild&&c.removeChild(c.firstChild);else c=this._content=I("div","mapboxgl-popup-content",this._container||void 0);if(c.appendChild(g),this.options.closeButton){const f=this._closeButton=I("button","mapboxgl-popup-close-button",c);f.type="button",f.setAttribute("aria-label","Close popup"),f.setAttribute("aria-hidden","true"),f.innerHTML="&#215;",f.addEventListener("click",this._onClose)}return this._update(),this._focusFirstElement(),this}addClassName(g){return this._classList.add(g),this._updateClassList(),this}removeClassName(g){return this._classList.delete(g),this._updateClassList(),this}setOffset(g){return this.options.offset=g,this._update(),this}toggleClassName(g){let c;return this._classList.delete(g)?c=!1:(this._classList.add(g),c=!0),this._updateClassList(),c}_onMouseEvent(g){this._update(g.point)}_getAnchor(g){if(this.options.anchor)return this.options.anchor;const c=this._map,f=this._container,v=this._pos;if(!c||!f||!v)return"bottom";const b=f.offsetWidth,T=f.offsetHeight,O=v.x<b/2,D=v.x>c.transform.width-b/2;if(v.y+g<T)return O?"top-left":D?"top-right":"top";if(v.y>c.transform.height-T){if(O)return"bottom-left";if(D)return"bottom-right"}return O?"left":D?"right":"bottom"}_updateClassList(){const g=this._container;if(!g)return;const c=[...this._classList];c.push("mapboxgl-popup"),this._anchor&&c.push(`mapboxgl-popup-anchor-${this._anchor}`),this._trackPointer&&c.push("mapboxgl-popup-track-pointer"),g.className=c.join(" ")}_update(g){const c=this._map,f=this._content;if(!c||!this._lngLat&&!this._trackPointer||!f)return;let v=this._container;if(v||(v=this._container=I("div","mapboxgl-popup",c.getContainer()),this._tip=I("div","mapboxgl-popup-tip",v),v.appendChild(f)),this.options.maxWidth&&v.style.maxWidth!==this.options.maxWidth&&(v.style.maxWidth=this.options.maxWidth),c.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Mc(this._lngLat,this._pos,c.transform)),!this._trackPointer||g){const b=this._pos=this._trackPointer&&g?g:c.project(this._lngLat),T=tx(this.options.offset),O=this._anchor=this._getAnchor(T.y),D=tx(this.options.offset,O),B=b.add(D).round();c._requestDomTask(()=>{this._container&&O&&(this._container.style.transform=`${El[O]} translate(${B.x}px,${B.y}px)`)})}if(!this._marker&&c._showingGlobe()){const b=o.isLngLatBehindGlobe(c.transform,this._lngLat)?0:1;this._setOpacity(b)}this._updateClassList()}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const g=this._container.querySelector(LS);g&&g.focus()}_onClose(){this.remove()}_setOpacity(g){this._container&&(this._container.style.opacity=`${g}`),this._content&&(this._content.style.pointerEvents=g?"auto":"none")}},Marker:jt,Style:_a,LngLat:o.LngLat,LngLatBounds:o.LngLatBounds,Point:o.Point,MercatorCoordinate:o.MercatorCoordinate,FreeCameraOptions:$_,Evented:o.Evented,config:o.config,prewarm:function(){hc().acquire(ga)},clearPrewarmedResources:function(){const g=zi;g&&(g.isPreloaded()&&g.numActive()===1?(g.release(ga),zi=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return o.config.ACCESS_TOKEN},set accessToken(g){o.config.ACCESS_TOKEN=g},get baseApiUrl(){return o.config.API_URL},set baseApiUrl(g){o.config.API_URL=g},get workerCount(){return li.workerCount},set workerCount(g){li.workerCount=g},get maxParallelImageRequests(){return o.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(g){o.config.MAX_PARALLEL_IMAGE_REQUESTS=g},clearStorage(g){o.clearTileCache(g)},workerUrl:"",workerClass:null,setNow:o.exported.setNow,restoreNow:o.exported.restoreNow};return Ic});var m=u;return m})})(IG);var PAe=IG.exports;const uA=sn(PAe),CAe=({onZoomIn:e,onZoomOut:t,onReset:r})=>M.jsxs("div",{className:"absolute top-4 right-4 flex flex-col gap-2",children:[M.jsx(Is,{size:"icon",variant:"outline",className:"bg-background/80",onClick:e,children:M.jsx(uK,{className:"h-4 w-4"})}),M.jsx(Is,{size:"icon",variant:"outline",className:"bg-background/80",onClick:t,children:M.jsx(dK,{className:"h-4 w-4"})}),M.jsx(Is,{size:"icon",variant:"outline",className:"bg-background/80",onClick:r,children:M.jsx(t_,{className:"h-4 w-4"})})]}),MAe=({title:e,items:t,hoveredCountry:r})=>M.jsxs("div",{className:"absolute bottom-4 left-4 bg-background/80 p-3 rounded-md text-xs shadow-md",children:[M.jsxs("div",{className:"font-medium text-sm mb-2",children:[e," Legend"]}),t.map((n,s)=>M.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[M.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:n.color}}),M.jsx("span",{children:n.label})]},s)),r&&M.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-200",children:[M.jsx("div",{className:"font-medium",children:r.name}),M.jsx("div",{className:"text-xs",children:r.value!==null?`${e}: ${typeof r.value=="number"?r.value.toFixed(2):r.value}`:`No data for ${e}`})]})]}),IAe=({onTokenSubmit:e,initialToken:t})=>{const[r,n]=V.useState(t);return M.jsxs("div",{className:"flex flex-col items-center justify-center h-full bg-muted/20 rounded-lg border border-dashed p-8",children:[M.jsx(t_,{className:"h-12 w-12 text-muted-foreground mb-4"}),M.jsx("h3",{className:"text-lg font-medium mb-2",children:"Mapbox Token Required"}),M.jsxs("p",{className:"text-sm text-muted-foreground mb-4 text-center",children:["To display the interactive map, please enter your Mapbox public token. You can get one for free at ",M.jsx("a",{href:"https://www.mapbox.com/",target:"_blank",rel:"noopener noreferrer",className:"text-primary underline",children:"mapbox.com"}),"."]}),M.jsxs("div",{className:"w-full max-w-md",children:[M.jsx("input",{type:"text",placeholder:"Enter your Mapbox token",className:"w-full rounded-md border border-input px-3 py-2 mb-2",onChange:s=>n(s.target.value),value:r}),M.jsx(Is,{onClick:()=>e(r),disabled:!r||r==="YOUR_MAPBOX_ACCESS_TOKEN",className:"w-full",children:"Apply Token"})]})]})},OAe=()=>M.jsxs("div",{className:"flex flex-col items-center justify-center h-full bg-muted/20 rounded-lg border border-dashed p-8",children:[M.jsx(t_,{className:"h-12 w-12 text-muted-foreground mb-4 animate-pulse"}),M.jsx("h3",{className:"text-lg font-medium mb-2",children:"Loading data..."})]});var kG={exports:{}};/* @license
Papa Parse
v5.5.2
https://github.com/mholt/PapaParse
License: MIT
*/(function(e,t){((r,n)=>{e.exports=n()})(Cf,function r(){var n=typeof self<"u"?self:typeof window<"u"?window:n!==void 0?n:{},s,u=!n.document&&!!n.postMessage,h=n.IS_PAPA_WORKER||!1,m={},o=0,_={};function E(Z){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(re){var ne=W(re);ne.chunkSize=parseInt(ne.chunkSize),re.step||re.chunk||(ne.chunkSize=null),this._handle=new k(ne),(this._handle.streamer=this)._config=ne}).call(this,Z),this.parseChunk=function(re,ne){var ue=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<ue){let Ee=this._config.newline;Ee||(fe=this._config.quoteChar||'"',Ee=this._handle.guessLineEndings(re,fe)),re=[...re.split(Ee).slice(ue)].join(Ee)}this.isFirstChunk&&Q(this._config.beforeFirstChunk)&&(fe=this._config.beforeFirstChunk(re))!==void 0&&(re=fe),this.isFirstChunk=!1,this._halted=!1;var ue=this._partialLine+re,fe=(this._partialLine="",this._handle.parse(ue,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(re=fe.meta.cursor,ue=(this._finished||(this._partialLine=ue.substring(re-this._baseIndex),this._baseIndex=re),fe&&fe.data&&(this._rowCount+=fe.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),h)n.postMessage({results:fe,workerId:_.WORKER_ID,finished:ue});else if(Q(this._config.chunk)&&!ne){if(this._config.chunk(fe,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=fe=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(fe.data),this._completeResults.errors=this._completeResults.errors.concat(fe.errors),this._completeResults.meta=fe.meta),this._completed||!ue||!Q(this._config.complete)||fe&&fe.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),ue||fe&&fe.meta.paused||this._nextChunk(),fe}this._halted=!0},this._sendError=function(re){Q(this._config.error)?this._config.error(re):h&&this._config.error&&n.postMessage({workerId:_.WORKER_ID,error:re,finished:!1})}}function S(Z){var re;(Z=Z||{}).chunkSize||(Z.chunkSize=_.RemoteChunkSize),E.call(this,Z),this._nextChunk=u?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(ne){this._input=ne,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(re=new XMLHttpRequest,this._config.withCredentials&&(re.withCredentials=this._config.withCredentials),u||(re.onload=Y(this._chunkLoaded,this),re.onerror=Y(this._chunkError,this)),re.open(this._config.downloadRequestBody?"POST":"GET",this._input,!u),this._config.downloadRequestHeaders){var ne,ue=this._config.downloadRequestHeaders;for(ne in ue)re.setRequestHeader(ne,ue[ne])}var fe;this._config.chunkSize&&(fe=this._start+this._config.chunkSize-1,re.setRequestHeader("Range","bytes="+this._start+"-"+fe));try{re.send(this._config.downloadRequestBody)}catch(Ee){this._chunkError(Ee.message)}u&&re.status===0&&this._chunkError()}},this._chunkLoaded=function(){re.readyState===4&&(re.status<200||400<=re.status?this._chunkError():(this._start+=this._config.chunkSize||re.responseText.length,this._finished=!this._config.chunkSize||this._start>=(ne=>(ne=ne.getResponseHeader("Content-Range"))!==null?parseInt(ne.substring(ne.lastIndexOf("/")+1)):-1)(re),this.parseChunk(re.responseText)))},this._chunkError=function(ne){ne=re.statusText||ne,this._sendError(new Error(ne))}}function A(Z){(Z=Z||{}).chunkSize||(Z.chunkSize=_.LocalChunkSize),E.call(this,Z);var re,ne,ue=typeof FileReader<"u";this.stream=function(fe){this._input=fe,ne=fe.slice||fe.webkitSlice||fe.mozSlice,ue?((re=new FileReader).onload=Y(this._chunkLoaded,this),re.onerror=Y(this._chunkError,this)):re=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var fe=this._input,Ee=(this._config.chunkSize&&(Ee=Math.min(this._start+this._config.chunkSize,this._input.size),fe=ne.call(fe,this._start,Ee)),re.readAsText(fe,this._config.encoding));ue||this._chunkLoaded({target:{result:Ee}})},this._chunkLoaded=function(fe){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(fe.target.result)},this._chunkError=function(){this._sendError(re.error)}}function I(Z){var re;E.call(this,Z=Z||{}),this.stream=function(ne){return re=ne,this._nextChunk()},this._nextChunk=function(){var ne,ue;if(!this._finished)return ne=this._config.chunkSize,re=ne?(ue=re.substring(0,ne),re.substring(ne)):(ue=re,""),this._finished=!re,this.parseChunk(ue)}}function R(Z){E.call(this,Z=Z||{});var re=[],ne=!0,ue=!1;this.pause=function(){E.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){E.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(fe){this._input=fe,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){ue&&re.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),re.length?this.parseChunk(re.shift()):ne=!0},this._streamData=Y(function(fe){try{re.push(typeof fe=="string"?fe:fe.toString(this._config.encoding)),ne&&(ne=!1,this._checkIsFinished(),this.parseChunk(re.shift()))}catch(Ee){this._streamError(Ee)}},this),this._streamError=Y(function(fe){this._streamCleanUp(),this._sendError(fe)},this),this._streamEnd=Y(function(){this._streamCleanUp(),ue=!0,this._streamData("")},this),this._streamCleanUp=Y(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function k(Z){var re,ne,ue,fe,Ee=Math.pow(2,53),Se=-Ee,je=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,Le=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,Ue=this,we=0,Pe=0,rt=!1,$e=!1,Ge=[],Re={data:[],errors:[],meta:{}};function at(gt){return Z.skipEmptyLines==="greedy"?gt.join("").trim()==="":gt.length===1&&gt[0].length===0}function Et(){if(Re&&ue&&(lt("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+_.DefaultDelimiter+"'"),ue=!1),Z.skipEmptyLines&&(Re.data=Re.data.filter(function(Be){return!at(Be)})),vt()){let Be=function(zt,Ot){Q(Z.transformHeader)&&(zt=Z.transformHeader(zt,Ot)),Ge.push(zt)};var ht=Be;if(Re)if(Array.isArray(Re.data[0])){for(var gt=0;vt()&&gt<Re.data.length;gt++)Re.data[gt].forEach(Be);Re.data.splice(0,1)}else Re.data.forEach(Be)}function tt(Be,zt){for(var Ot=Z.header?{}:[],qt=0;qt<Be.length;qt++){var Pt=qt,nr=Be[qt],nr=((tr,Yt)=>(or=>(Z.dynamicTypingFunction&&Z.dynamicTyping[or]===void 0&&(Z.dynamicTyping[or]=Z.dynamicTypingFunction(or)),(Z.dynamicTyping[or]||Z.dynamicTyping)===!0))(tr)?Yt==="true"||Yt==="TRUE"||Yt!=="false"&&Yt!=="FALSE"&&((or=>{if(je.test(or)&&(or=parseFloat(or),Se<or&&or<Ee))return 1})(Yt)?parseFloat(Yt):Le.test(Yt)?new Date(Yt):Yt===""?null:Yt):Yt)(Pt=Z.header?qt>=Ge.length?"__parsed_extra":Ge[qt]:Pt,nr=Z.transform?Z.transform(nr,Pt):nr);Pt==="__parsed_extra"?(Ot[Pt]=Ot[Pt]||[],Ot[Pt].push(nr)):Ot[Pt]=nr}return Z.header&&(qt>Ge.length?lt("FieldMismatch","TooManyFields","Too many fields: expected "+Ge.length+" fields but parsed "+qt,Pe+zt):qt<Ge.length&&lt("FieldMismatch","TooFewFields","Too few fields: expected "+Ge.length+" fields but parsed "+qt,Pe+zt)),Ot}var ft;Re&&(Z.header||Z.dynamicTyping||Z.transform)&&(ft=1,!Re.data.length||Array.isArray(Re.data[0])?(Re.data=Re.data.map(tt),ft=Re.data.length):Re.data=tt(Re.data,0),Z.header&&Re.meta&&(Re.meta.fields=Ge),Pe+=ft)}function vt(){return Z.header&&Ge.length===0}function lt(gt,tt,ft,ht){gt={type:gt,code:tt,message:ft},ht!==void 0&&(gt.row=ht),Re.errors.push(gt)}Q(Z.step)&&(fe=Z.step,Z.step=function(gt){Re=gt,vt()?Et():(Et(),Re.data.length!==0&&(we+=gt.data.length,Z.preview&&we>Z.preview?ne.abort():(Re.data=Re.data[0],fe(Re,Ue))))}),this.parse=function(gt,tt,ft){var ht=Z.quoteChar||'"',ht=(Z.newline||(Z.newline=this.guessLineEndings(gt,ht)),ue=!1,Z.delimiter?Q(Z.delimiter)&&(Z.delimiter=Z.delimiter(gt),Re.meta.delimiter=Z.delimiter):((ht=((Be,zt,Ot,qt,Pt)=>{var nr,tr,Yt,or;Pt=Pt||[",","	","|",";",_.RECORD_SEP,_.UNIT_SEP];for(var wn=0;wn<Pt.length;wn++){for(var An,ii=Pt[wn],Vr=0,Yn=0,ln=0,hn=(Yt=void 0,new N({comments:qt,delimiter:ii,newline:zt,preview:10}).parse(Be)),gn=0;gn<hn.data.length;gn++)Ot&&at(hn.data[gn])?ln++:(An=hn.data[gn].length,Yn+=An,Yt===void 0?Yt=An:0<An&&(Vr+=Math.abs(An-Yt),Yt=An));0<hn.data.length&&(Yn/=hn.data.length-ln),(tr===void 0||Vr<=tr)&&(or===void 0||or<Yn)&&1.99<Yn&&(tr=Vr,nr=ii,or=Yn)}return{successful:!!(Z.delimiter=nr),bestDelimiter:nr}})(gt,Z.newline,Z.skipEmptyLines,Z.comments,Z.delimitersToGuess)).successful?Z.delimiter=ht.bestDelimiter:(ue=!0,Z.delimiter=_.DefaultDelimiter),Re.meta.delimiter=Z.delimiter),W(Z));return Z.preview&&Z.header&&ht.preview++,re=gt,ne=new N(ht),Re=ne.parse(re,tt,ft),Et(),rt?{meta:{paused:!0}}:Re||{meta:{paused:!1}}},this.paused=function(){return rt},this.pause=function(){rt=!0,ne.abort(),re=Q(Z.chunk)?"":re.substring(ne.getCharIndex())},this.resume=function(){Ue.streamer._halted?(rt=!1,Ue.streamer.parseChunk(re,!0)):setTimeout(Ue.resume,3)},this.aborted=function(){return $e},this.abort=function(){$e=!0,ne.abort(),Re.meta.aborted=!0,Q(Z.complete)&&Z.complete(Re),re=""},this.guessLineEndings=function(Be,ht){Be=Be.substring(0,1048576);var ht=new RegExp(L(ht)+"([^]*?)"+L(ht),"gm"),ft=(Be=Be.replace(ht,"")).split("\r"),ht=Be.split(`
`),Be=1<ht.length&&ht[0].length<ft[0].length;if(ft.length===1||Be)return`
`;for(var zt=0,Ot=0;Ot<ft.length;Ot++)ft[Ot][0]===`
`&&zt++;return zt>=ft.length/2?`\r
`:"\r"}}function L(Z){return Z.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function N(Z){var re=(Z=Z||{}).delimiter,ne=Z.newline,ue=Z.comments,fe=Z.step,Ee=Z.preview,Se=Z.fastMode,je=null,Le=!1,Ue=Z.quoteChar==null?'"':Z.quoteChar,we=Ue;if(Z.escapeChar!==void 0&&(we=Z.escapeChar),(typeof re!="string"||-1<_.BAD_DELIMITERS.indexOf(re))&&(re=","),ue===re)throw new Error("Comment character same as delimiter");ue===!0?ue="#":(typeof ue!="string"||-1<_.BAD_DELIMITERS.indexOf(ue))&&(ue=!1),ne!==`
`&&ne!=="\r"&&ne!==`\r
`&&(ne=`
`);var Pe=0,rt=!1;this.parse=function($e,Ge,Re){if(typeof $e!="string")throw new Error("Input must be a string");var at=$e.length,Et=re.length,vt=ne.length,lt=ue.length,gt=Q(fe),tt=[],ft=[],ht=[],Be=Pe=0;if(!$e)return Vr();if(Se||Se!==!1&&$e.indexOf(Ue)===-1){for(var zt=$e.split(ne),Ot=0;Ot<zt.length;Ot++){if(ht=zt[Ot],Pe+=ht.length,Ot!==zt.length-1)Pe+=ne.length;else if(Re)return Vr();if(!ue||ht.substring(0,lt)!==ue){if(gt){if(tt=[],or(ht.split(re)),Yn(),rt)return Vr()}else or(ht.split(re));if(Ee&&Ee<=Ot)return tt=tt.slice(0,Ee),Vr(!0)}}return Vr()}for(var qt=$e.indexOf(re,Pe),Pt=$e.indexOf(ne,Pe),nr=new RegExp(L(we)+L(Ue),"g"),tr=$e.indexOf(Ue,Pe);;)if($e[Pe]===Ue)for(tr=Pe,Pe++;;){if((tr=$e.indexOf(Ue,tr+1))===-1)return Re||ft.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:tt.length,index:Pe}),An();if(tr===at-1)return An($e.substring(Pe,tr).replace(nr,Ue));if(Ue===we&&$e[tr+1]===we)tr++;else if(Ue===we||tr===0||$e[tr-1]!==we){qt!==-1&&qt<tr+1&&(qt=$e.indexOf(re,tr+1));var Yt=wn((Pt=Pt!==-1&&Pt<tr+1?$e.indexOf(ne,tr+1):Pt)===-1?qt:Math.min(qt,Pt));if($e.substr(tr+1+Yt,Et)===re){ht.push($e.substring(Pe,tr).replace(nr,Ue)),$e[Pe=tr+1+Yt+Et]!==Ue&&(tr=$e.indexOf(Ue,Pe)),qt=$e.indexOf(re,Pe),Pt=$e.indexOf(ne,Pe);break}if(Yt=wn(Pt),$e.substring(tr+1+Yt,tr+1+Yt+vt)===ne){if(ht.push($e.substring(Pe,tr).replace(nr,Ue)),ii(tr+1+Yt+vt),qt=$e.indexOf(re,Pe),tr=$e.indexOf(Ue,Pe),gt&&(Yn(),rt))return Vr();if(Ee&&tt.length>=Ee)return Vr(!0);break}ft.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:tt.length,index:Pe}),tr++}}else if(ue&&ht.length===0&&$e.substring(Pe,Pe+lt)===ue){if(Pt===-1)return Vr();Pe=Pt+vt,Pt=$e.indexOf(ne,Pe),qt=$e.indexOf(re,Pe)}else if(qt!==-1&&(qt<Pt||Pt===-1))ht.push($e.substring(Pe,qt)),Pe=qt+Et,qt=$e.indexOf(re,Pe);else{if(Pt===-1)break;if(ht.push($e.substring(Pe,Pt)),ii(Pt+vt),gt&&(Yn(),rt))return Vr();if(Ee&&tt.length>=Ee)return Vr(!0)}return An();function or(ln){tt.push(ln),Be=Pe}function wn(ln){var hn=0;return hn=ln!==-1&&(ln=$e.substring(tr+1,ln))&&ln.trim()===""?ln.length:hn}function An(ln){return Re||(ln===void 0&&(ln=$e.substring(Pe)),ht.push(ln),Pe=at,or(ht),gt&&Yn()),Vr()}function ii(ln){Pe=ln,or(ht),ht=[],Pt=$e.indexOf(ne,Pe)}function Vr(ln){if(Z.header&&!Ge&&tt.length&&!Le){var hn=tt[0],gn={},oi=new Set(hn);let Wo=!1;for(let Ti=0;Ti<hn.length;Ti++){let Jn=hn[Ti];if(gn[Jn=Q(Z.transformHeader)?Z.transformHeader(Jn,Ti):Jn]){let qi,So=gn[Jn];for(;qi=Jn+"_"+So,So++,oi.has(qi););oi.add(qi),hn[Ti]=qi,gn[Jn]++,Wo=!0,(je=je===null?{}:je)[qi]=Jn}else gn[Jn]=1,hn[Ti]=Jn;oi.add(Jn)}Wo&&console.warn("Duplicate headers found and renamed."),Le=!0}return{data:tt,errors:ft,meta:{delimiter:re,linebreak:ne,aborted:rt,truncated:!!ln,cursor:Be+(Ge||0),renamedHeaders:je}}}function Yn(){fe(Vr()),tt=[],ft=[]}},this.abort=function(){rt=!0},this.getCharIndex=function(){return Pe}}function z(Z){var re=Z.data,ne=m[re.workerId],ue=!1;if(re.error)ne.userError(re.error,re.file);else if(re.results&&re.results.data){var fe={abort:function(){ue=!0,F(re.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:U,resume:U};if(Q(ne.userStep)){for(var Ee=0;Ee<re.results.data.length&&(ne.userStep({data:re.results.data[Ee],errors:re.results.errors,meta:re.results.meta},fe),!ue);Ee++);delete re.results}else Q(ne.userChunk)&&(ne.userChunk(re.results,fe,re.file),delete re.results)}re.finished&&!ue&&F(re.workerId,re.results)}function F(Z,re){var ne=m[Z];Q(ne.userComplete)&&ne.userComplete(re),ne.terminate(),delete m[Z]}function U(){throw new Error("Not implemented.")}function W(Z){if(typeof Z!="object"||Z===null)return Z;var re,ne=Array.isArray(Z)?[]:{};for(re in Z)ne[re]=W(Z[re]);return ne}function Y(Z,re){return function(){Z.apply(re,arguments)}}function Q(Z){return typeof Z=="function"}return _.parse=function(Z,re){var ne=(re=re||{}).dynamicTyping||!1;if(Q(ne)&&(re.dynamicTypingFunction=ne,ne={}),re.dynamicTyping=ne,re.transform=!!Q(re.transform)&&re.transform,!re.worker||!_.WORKERS_SUPPORTED)return ne=null,_.NODE_STREAM_INPUT,typeof Z=="string"?(Z=(ue=>ue.charCodeAt(0)!==65279?ue:ue.slice(1))(Z),ne=new(re.download?S:I)(re)):Z.readable===!0&&Q(Z.read)&&Q(Z.on)?ne=new R(re):(n.File&&Z instanceof File||Z instanceof Object)&&(ne=new A(re)),ne.stream(Z);(ne=(()=>{var ue;return!!_.WORKERS_SUPPORTED&&(ue=(()=>{var fe=n.URL||n.webkitURL||null,Ee=r.toString();return _.BLOB_URL||(_.BLOB_URL=fe.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",Ee,")();"],{type:"text/javascript"})))})(),(ue=new n.Worker(ue)).onmessage=z,ue.id=o++,m[ue.id]=ue)})()).userStep=re.step,ne.userChunk=re.chunk,ne.userComplete=re.complete,ne.userError=re.error,re.step=Q(re.step),re.chunk=Q(re.chunk),re.complete=Q(re.complete),re.error=Q(re.error),delete re.worker,ne.postMessage({input:Z,config:re,workerId:ne.id})},_.unparse=function(Z,re){var ne=!1,ue=!0,fe=",",Ee=`\r
`,Se='"',je=Se+Se,Le=!1,Ue=null,we=!1,Pe=((()=>{if(typeof re=="object"){if(typeof re.delimiter!="string"||_.BAD_DELIMITERS.filter(function(Ge){return re.delimiter.indexOf(Ge)!==-1}).length||(fe=re.delimiter),typeof re.quotes!="boolean"&&typeof re.quotes!="function"&&!Array.isArray(re.quotes)||(ne=re.quotes),typeof re.skipEmptyLines!="boolean"&&typeof re.skipEmptyLines!="string"||(Le=re.skipEmptyLines),typeof re.newline=="string"&&(Ee=re.newline),typeof re.quoteChar=="string"&&(Se=re.quoteChar),typeof re.header=="boolean"&&(ue=re.header),Array.isArray(re.columns)){if(re.columns.length===0)throw new Error("Option columns is empty");Ue=re.columns}re.escapeChar!==void 0&&(je=re.escapeChar+Se),re.escapeFormulae instanceof RegExp?we=re.escapeFormulae:typeof re.escapeFormulae=="boolean"&&re.escapeFormulae&&(we=/^[=+\-@\t\r].*$/)}})(),new RegExp(L(Se),"g"));if(typeof Z=="string"&&(Z=JSON.parse(Z)),Array.isArray(Z)){if(!Z.length||Array.isArray(Z[0]))return rt(null,Z,Le);if(typeof Z[0]=="object")return rt(Ue||Object.keys(Z[0]),Z,Le)}else if(typeof Z=="object")return typeof Z.data=="string"&&(Z.data=JSON.parse(Z.data)),Array.isArray(Z.data)&&(Z.fields||(Z.fields=Z.meta&&Z.meta.fields||Ue),Z.fields||(Z.fields=Array.isArray(Z.data[0])?Z.fields:typeof Z.data[0]=="object"?Object.keys(Z.data[0]):[]),Array.isArray(Z.data[0])||typeof Z.data[0]=="object"||(Z.data=[Z.data])),rt(Z.fields||[],Z.data||[],Le);throw new Error("Unable to serialize unrecognized input");function rt(Ge,Re,at){var Et="",vt=(typeof Ge=="string"&&(Ge=JSON.parse(Ge)),typeof Re=="string"&&(Re=JSON.parse(Re)),Array.isArray(Ge)&&0<Ge.length),lt=!Array.isArray(Re[0]);if(vt&&ue){for(var gt=0;gt<Ge.length;gt++)0<gt&&(Et+=fe),Et+=$e(Ge[gt],gt);0<Re.length&&(Et+=Ee)}for(var tt=0;tt<Re.length;tt++){var ft=(vt?Ge:Re[tt]).length,ht=!1,Be=vt?Object.keys(Re[tt]).length===0:Re[tt].length===0;if(at&&!vt&&(ht=at==="greedy"?Re[tt].join("").trim()==="":Re[tt].length===1&&Re[tt][0].length===0),at==="greedy"&&vt){for(var zt=[],Ot=0;Ot<ft;Ot++){var qt=lt?Ge[Ot]:Ot;zt.push(Re[tt][qt])}ht=zt.join("").trim()===""}if(!ht){for(var Pt=0;Pt<ft;Pt++){0<Pt&&!Be&&(Et+=fe);var nr=vt&&lt?Ge[Pt]:Pt;Et+=$e(Re[tt][nr],Pt)}tt<Re.length-1&&(!at||0<ft&&!Be)&&(Et+=Ee)}}return Et}function $e(Ge,Re){var at,Et;return Ge==null?"":Ge.constructor===Date?JSON.stringify(Ge).slice(1,25):(Et=!1,we&&typeof Ge=="string"&&we.test(Ge)&&(Ge="'"+Ge,Et=!0),at=Ge.toString().replace(Pe,je),(Et=Et||ne===!0||typeof ne=="function"&&ne(Ge,Re)||Array.isArray(ne)&&ne[Re]||((vt,lt)=>{for(var gt=0;gt<lt.length;gt++)if(-1<vt.indexOf(lt[gt]))return!0;return!1})(at,_.BAD_DELIMITERS)||-1<at.indexOf(fe)||at.charAt(0)===" "||at.charAt(at.length-1)===" ")?Se+at+Se:at)}},_.RECORD_SEP="",_.UNIT_SEP="",_.BYTE_ORDER_MARK="\uFEFF",_.BAD_DELIMITERS=["\r",`
`,'"',_.BYTE_ORDER_MARK],_.WORKERS_SUPPORTED=!u&&!!n.Worker,_.NODE_STREAM_INPUT=1,_.LocalChunkSize=10485760,_.RemoteChunkSize=5242880,_.DefaultDelimiter=",",_.Parser=N,_.ParserHandle=k,_.NetworkStreamer=S,_.FileStreamer=A,_.StringStreamer=I,_.ReadableStreamStreamer=R,n.jQuery&&((s=n.jQuery).fn.parse=function(Z){var re=Z.config||{},ne=[];return this.each(function(Ee){if(!(s(this).prop("tagName").toUpperCase()==="INPUT"&&s(this).attr("type").toLowerCase()==="file"&&n.FileReader)||!this.files||this.files.length===0)return!0;for(var Se=0;Se<this.files.length;Se++)ne.push({file:this.files[Se],inputElem:this,instanceConfig:s.extend({},re)})}),ue(),this;function ue(){if(ne.length===0)Q(Z.complete)&&Z.complete();else{var Ee,Se,je,Le,Ue=ne[0];if(Q(Z.before)){var we=Z.before(Ue.file,Ue.inputElem);if(typeof we=="object"){if(we.action==="abort")return Ee="AbortError",Se=Ue.file,je=Ue.inputElem,Le=we.reason,void(Q(Z.error)&&Z.error({name:Ee},Se,je,Le));if(we.action==="skip")return void fe();typeof we.config=="object"&&(Ue.instanceConfig=s.extend(Ue.instanceConfig,we.config))}else if(we==="skip")return void fe()}var Pe=Ue.instanceConfig.complete;Ue.instanceConfig.complete=function(rt){Q(Pe)&&Pe(rt,Ue.file,Ue.inputElem),fe()},_.parse(Ue.file,Ue.instanceConfig)}}function fe(){ne.splice(0,1),ue()}}),h&&(n.onmessage=function(Z){Z=Z.data,_.WORKER_ID===void 0&&Z&&(_.WORKER_ID=Z.workerId),typeof Z.input=="string"?n.postMessage({workerId:_.WORKER_ID,results:_.parse(Z.input,Z.config),finished:!0}):(n.File&&Z.input instanceof File||Z.input instanceof Object)&&(Z=_.parse(Z.input,Z.config))&&n.postMessage({workerId:_.WORKER_ID,results:Z,finished:!0})}),(S.prototype=Object.create(E.prototype)).constructor=S,(A.prototype=Object.create(E.prototype)).constructor=A,(I.prototype=Object.create(I.prototype)).constructor=I,(R.prototype=Object.create(E.prototype)).constructor=R,_})})(kG);var kAe=kG.exports;const dA=sn(kAe),M1=[{code:"ALB",name:"Albania",lat:41.153332,lng:20.168331},{code:"AUT",name:"Austria",lat:47.516231,lng:14.550072},{code:"BEL",name:"Belgium",lat:50.503887,lng:4.469936},{code:"BGR",name:"Bulgaria",lat:42.733883,lng:25.48583},{code:"HRV",name:"Croatia",lat:45.1,lng:15.2},{code:"CYP",name:"Cyprus",lat:35.126413,lng:33.429859},{code:"CZE",name:"Czech Republic",lat:49.817492,lng:15.472962},{code:"DNK",name:"Denmark",lat:56.26392,lng:9.501785},{code:"EST",name:"Estonia",lat:58.595272,lng:25.013607},{code:"FIN",name:"Finland",lat:61.92411,lng:25.748151},{code:"FRA",name:"France",lat:46.227638,lng:2.213749},{code:"DEU",name:"Germany",lat:51.165691,lng:10.451526},{code:"GRC",name:"Greece",lat:39.074208,lng:21.824312},{code:"HUN",name:"Hungary",lat:47.162494,lng:19.503304},{code:"ISL",name:"Iceland",lat:64.963051,lng:-19.020835},{code:"IRL",name:"Ireland",lat:53.41291,lng:-8.24389},{code:"ITA",name:"Italy",lat:41.87194,lng:12.56738},{code:"LVA",name:"Latvia",lat:56.879635,lng:24.603189},{code:"LTU",name:"Lithuania",lat:55.169438,lng:23.881275},{code:"LUX",name:"Luxembourg",lat:49.815273,lng:6.129583},{code:"MLT",name:"Malta",lat:35.937496,lng:14.375416},{code:"NLD",name:"Netherlands",lat:52.132633,lng:5.291266},{code:"NOR",name:"Norway",lat:60.472024,lng:8.468946},{code:"POL",name:"Poland",lat:51.919438,lng:19.145136},{code:"PRT",name:"Portugal",lat:39.399872,lng:-8.224454},{code:"ROU",name:"Romania",lat:45.943161,lng:24.96676},{code:"SVK",name:"Slovakia",lat:48.669026,lng:19.699024},{code:"SVN",name:"Slovenia",lat:46.151241,lng:14.995463},{code:"ESP",name:"Spain",lat:40.463667,lng:-3.74922},{code:"SWE",name:"Sweden",lat:60.128161,lng:18.643501},{code:"CHE",name:"Switzerland",lat:46.818188,lng:8.227512},{code:"GBR",name:"United Kingdom",lat:55.378051,lng:-3.435973}],DG=()=>{const[e,t]=V.useState([]),[r,n]=V.useState(!0),[s,u]=V.useState(null);return V.useEffect(()=>{(async()=>{try{n(!0),console.info("Attempting to load CSV data from various paths...");const m="/pisa_2022_visualization";console.info(`Attempting to load from: ${m}/OWB_PCA_country_means_2.csv`);const o=await fetch(`${m}/OWB_PCA_country_means_2.csv`);if(!o.ok)throw new Error(`Failed to load PCA data: ${o.status} ${o.statusText}`);const _=await o.text();console.info(`Attempting to load from: ${m}/country_means.csv`);const E=await fetch(`${m}/country_means.csv`);if(!E.ok)throw new Error(`Failed to load country means data: ${E.status} ${E.statusText}`);const S=await E.text(),A=dA.parse(_,{header:!0,skipEmptyLines:!0,dynamicTyping:!0});console.log("PCA data loaded:",A.data.slice(0,3));const I=new Map;A.data.forEach(L=>{L.CNT&&I.set(L.CNT,{OWB:L.OWB,X:L.X,Y:L.Y})});const R=dA.parse(S,{header:!0,skipEmptyLines:!0,dynamicTyping:!0});if(console.info("Main data loaded. Number of rows:",R.data.length),console.info("Sample data:",R.data.slice(0,2)),R.data.length===0)throw new Error("No data found in the CSV file");const k=R.data.map(L=>{if(!L.CNT)return console.warn("Row missing country code:",L),null;const N=I.get(L.CNT),z=M1.find(U=>U.code===L.CNT),F=z?z.name:L.CNT;return{...L,PV10SCIE:L.PV10SCIE!==void 0?L.PV10SCIE:L.PV1SCI,OWB:N==null?void 0:N.OWB,X:N==null?void 0:N.X,Y:N==null?void 0:N.Y,CountryName:F}}).filter(Boolean);if(console.info("Merged data complete. Total countries:",k.length),k.length===0)throw new Error("No valid country data after merging");t(k),n(!1)}catch(m){console.error("Error loading CSV data:",m),u(`Failed to load data: ${m}`),n(!1);try{console.info("Attempting fallback to only PCA data...");const _=await(await fetch(`${baseUrl}/OWB_PCA_country_means_2.csv`)).text(),S=dA.parse(_,{header:!0,skipEmptyLines:!0,dynamicTyping:!0}).data.filter(A=>A.CNT).map(A=>{const I=M1.find(R=>R.code===A.CNT);return{CNT:A.CNT,OWB:A.OWB,X:A.X,Y:A.Y,CountryName:I?I.name:A.CNT}});console.info("Fallback data loaded. Total countries:",S.length),S.length>0&&(t(S),u("Partial data loaded. Only PCA coordinates available."))}catch(o){console.error("Fallback data loading also failed:",o)}finally{n(!1)}}})()},[]),{data:e,loading:r,error:s}},RG=e=>{const t=["ALB","AUT","BEL","BGR","BIH","BLR","CHE","CYP","CZE","DEU","DNK","ESP","EST","FIN","FRA","GBR","GRC","HRV","HUN","IRL","ISL","ITA","LTU","LUX","LVA","MDA","MKD","MLT","MNE","NLD","NOR","POL","PRT","ROU","RUS","SRB","SVK","SVN","SWE","UKR"];return e.filter(r=>t.includes(r.CNT))},LG=e=>{const t={},r=new Map;return M1.forEach(n=>{r.set(n.code,n.name)}),e.forEach(n=>{const s=n.CNT;t[s]?(Object.keys(n).forEach(u=>{const h=n[u];if(typeof h=="number"){const m=t[s][u];typeof m=="number"?t[s][u]=m+h:t[s][u]=h}}),t[s].count=(t[s].count||0)+1):t[s]={...n,CountryName:r.get(s)||n.CountryName||s,count:1}}),Object.keys(t).forEach(n=>{const s=t[n],u=s.count||1;Object.keys(s).forEach(h=>{const m=s[h];typeof m=="number"&&h!=="count"&&(s[h]=m/u)}),delete s.count}),t},DAe=(e,t)=>isNaN(e)?"#cccccc":t==="PV1MATH"||t==="PV1READ"||t==="PV10SCIE"?e>=500?"#10b981":e>=470?"#6366f1":"#ef4444":t==="BULLIED"?e<=-.3?"#10b981":e<=0?"#6366f1":"#ef4444":e>=.3?"#10b981":e>=0?"#6366f1":"#ef4444",RAe=(e,t,r)=>{const n=e.filter(A=>{const I=A[t],R=A[r];return typeof I=="number"&&!isNaN(I)&&typeof R=="number"&&!isNaN(R)});if(n.length<2)return 0;let s=0,u=0;n.forEach(A=>{s+=A[t],u+=A[r]});const h=s/n.length,m=u/n.length;let o=0,_=0,E=0;n.forEach(A=>{const I=A[t]-h,R=A[r]-m;o+=I*R,_+=I*I,E+=R*R});const S=Math.sqrt(_*E);return S===0?0:o/S},LAe=e=>{let t=[];return e==="PV1MATH"?t=[{color:"#10b981",label:"High (≥500)"},{color:"#6366f1",label:"Medium (470-499)"},{color:"#ef4444",label:"Low (<470)"}]:e==="BULLIED"?t=[{color:"#10b981",label:"Low (≤-0.3)"},{color:"#6366f1",label:"Medium (-0.3-0)"},{color:"#ef4444",label:"High (>0)"}]:t=[{color:"#10b981",label:"High (≥0.3)"},{color:"#6366f1",label:"Medium (0-0.3)"},{color:"#ef4444",label:"Low (<0)"}],t},fB=(e,t,r,n)=>e.map(s=>{var o;const u=s.properties.ISO3,h=(o=r[u])==null?void 0:o[t],m=typeof h=="number"?h:NaN;return{...s,properties:{...s.properties,value:m,color:DAe(m,t),isSelected:n.includes(u)}}}),jAe="pk.eyJ1IjoiZ3VzdGF2MTgwNCIsImEiOiJjbWE0MzB4ZmcwMmxyMmlxenkxb3kxbDRhIn0.S7fEsxZHglwllqaFWJOqLQ",zAe=({selectedVariable:e,selectedCountries:t,onCountrySelect:r,countryData:n,loading:s})=>{const u=V.useRef(null),h=V.useRef(null),[m,o]=V.useState(jAe),[_,E]=V.useState(m===""||m==="YOUR_MAPBOX_ACCESS_TOKEN"),[S,A]=V.useState(null),[I,R]=V.useState([]),k=V.useRef(null),[L,N]=V.useState(null),[z,F]=V.useState(null);V.useEffect(()=>{if(!(!u.current||!m||_||s))return uA.accessToken=m,h.current?Y():(h.current=new uA.Map({container:u.current,style:"mapbox://styles/mapbox/light-v11",center:[15,54],zoom:3.5,maxBounds:[[-25,30],[45,75]]}),h.current.addControl(new uA.NavigationControl,"bottom-right"),h.current.on("load",()=>{U()})),Q(),()=>{h.current&&(k.current&&(k.current.remove(),k.current=null),h.current.remove(),h.current=null)}},[m,_,s]),V.useEffect(()=>{!h.current||h.current.isStyleLoaded()===!1||(Y(),Q())},[e,t,n]);const U=async()=>{if(h.current)try{const Ee=(await(await fetch("https://raw.githubusercontent.com/leakyMirror/map-of-europe/master/GeoJSON/europe.geojson")).json()).features.filter(je=>{const Le=je.properties.ISO3;return n[Le]}),Se=fB(Ee,e,n,t);h.current.addSource("europe-countries",{type:"geojson",data:{type:"FeatureCollection",features:Se}}),h.current.addLayer({id:"europe-countries-fill",type:"fill",source:"europe-countries",layout:{},paint:{"fill-color":["get","color"],"fill-opacity":["case",["to-boolean",["feature-state","hover"]],.8,["get","isSelected"],.9,.6]}}),h.current.addLayer({id:"europe-countries-outline",type:"line",source:"europe-countries",layout:{},paint:{"line-color":["case",["get","isSelected"],"#000000","#ffffff"],"line-width":["case",["get","isSelected"],2,.5]}}),W()}catch(ue){console.error("Error setting up choropleth map:",ue)}},W=()=>{var Se;if(!h.current)return;const ue=h.current.getCanvas();ue.style.cursor="default";let fe=null,Ee=null;(Se=u.current)==null||Se.addEventListener("mousemove",je=>{L&&F({x:je.clientX,y:je.clientY-40})}),h.current.on("mousemove","europe-countries-fill",je=>{var Le,Ue;if(je.features&&je.features.length>0){const we=je.features[0].properties.ISO3;if(Ee===we)return;ue.style.cursor="pointer",Ee=we,S&&((Le=h.current)==null||Le.setFeatureState({source:"europe-countries",id:S},{hover:!1})),A(we),(Ue=h.current)==null||Ue.setFeatureState({source:"europe-countries",id:we},{hover:!0}),fe&&window.clearTimeout(fe),fe=window.setTimeout(()=>{var $e;if(!je.features||!je.features[0]){console.error("No features available in the event");return}const Pe=je.features[0].properties.NAME,rt=($e=n[we])==null?void 0:$e[e];F({x:je.point.x,y:je.point.y-10}),N({name:Pe,value:typeof rt=="number"?rt:null}),console.log("Hover info set:",Pe,rt)},50)}}),h.current.on("mouseleave","europe-countries-fill",()=>{var je;fe&&window.clearTimeout(fe),S&&((je=h.current)==null||je.setFeatureState({source:"europe-countries",id:S},{hover:!1})),N(null),F(null),A(null),Ee=null,ue.style.cursor=""}),h.current.on("click","europe-countries-fill",je=>{if(je.features&&je.features.length>0){const Le=je.features[0].properties.ISO3;r(Le)}})},Y=()=>{if(!(!h.current||!h.current.getSource("europe-countries")))try{const ue=h.current.getSource("europe-countries")._data;if(!ue)return;const fe=fB(ue.features,e,n,t);h.current.getSource("europe-countries").setData({type:"FeatureCollection",features:fe})}catch(ue){console.error("Error updating choropleth map:",ue)}},Q=()=>{const ue=LAe(e);R(ue)},Z=ue=>{if(!h.current)return;const fe=h.current.getZoom();h.current.easeTo({zoom:ue==="in"?fe+1:fe-1,duration:500})},re=()=>{h.current&&h.current.flyTo({center:[15,54],zoom:3.5,duration:1500})},ne=ue=>{o(ue),E(!1)};return s?M.jsx(OAe,{}):_?M.jsx(IAe,{onTokenSubmit:ne,initialToken:m}):M.jsxs("div",{className:"relative h-full w-full",children:[M.jsx("div",{ref:u,className:"h-full w-full rounded-md"}),M.jsx(CAe,{onZoomIn:()=>Z("in"),onZoomOut:()=>Z("out"),onReset:re}),M.jsx(MAe,{title:e,items:I,hoveredCountry:null}),L&&z&&M.jsxs("div",{className:"absolute bg-white px-2 py-1 text-xs shadow-md rounded-md pointer-events-none border z-50",style:{left:z.x+"px",top:z.y+"px",transform:"translate(-50%, -100%)"},children:[M.jsx("div",{className:"font-medium",children:L.name}),M.jsx("div",{children:L.value!==null?`${e}: ${typeof L.value=="number"?L.value.toFixed(2):L.value}`:`No data for ${e}`})]})]})},{createElement:Hp,createContext:NAe,createRef:$Ce,forwardRef:jG,useCallback:Ro,useContext:zG,useEffect:Jd,useImperativeHandle:NG,useLayoutEffect:BAe,useMemo:$Ae,useRef:Lo,useState:ip}=j1,pB=j1[`useId${Math.random()}`.slice(0,5)],FAe=BAe,cS=NAe(null);cS.displayName="PanelGroupContext";const Qd=FAe,UAe=typeof pB=="function"?pB:()=>null;let VAe=0;function RO(e=null){const t=UAe(),r=Lo(e||t||null);return r.current===null&&(r.current=""+VAe++),e??r.current}function BG({children:e,className:t="",collapsedSize:r,collapsible:n,defaultSize:s,forwardedRef:u,id:h,maxSize:m,minSize:o,onCollapse:_,onExpand:E,onResize:S,order:A,style:I,tagName:R="div",...k}){const L=zG(cS);if(L===null)throw Error("Panel components must be rendered within a PanelGroup container");const{collapsePanel:N,expandPanel:z,getPanelSize:F,getPanelStyle:U,groupId:W,isPanelCollapsed:Y,reevaluatePanelConstraints:Q,registerPanel:Z,resizePanel:re,unregisterPanel:ne}=L,ue=RO(h),fe=Lo({callbacks:{onCollapse:_,onExpand:E,onResize:S},constraints:{collapsedSize:r,collapsible:n,defaultSize:s,maxSize:m,minSize:o},id:ue,idIsFromProps:h!==void 0,order:A});Lo({didLogMissingDefaultSizeWarning:!1}),Qd(()=>{const{callbacks:Se,constraints:je}=fe.current,Le={...je};fe.current.id=ue,fe.current.idIsFromProps=h!==void 0,fe.current.order=A,Se.onCollapse=_,Se.onExpand=E,Se.onResize=S,je.collapsedSize=r,je.collapsible=n,je.defaultSize=s,je.maxSize=m,je.minSize=o,(Le.collapsedSize!==je.collapsedSize||Le.collapsible!==je.collapsible||Le.maxSize!==je.maxSize||Le.minSize!==je.minSize)&&Q(fe.current,Le)}),Qd(()=>{const Se=fe.current;return Z(Se),()=>{ne(Se)}},[A,ue,Z,ne]),NG(u,()=>({collapse:()=>{N(fe.current)},expand:Se=>{z(fe.current,Se)},getId(){return ue},getSize(){return F(fe.current)},isCollapsed(){return Y(fe.current)},isExpanded(){return!Y(fe.current)},resize:Se=>{re(fe.current,Se)}}),[N,z,F,Y,ue,re]);const Ee=U(fe.current,s);return Hp(R,{...k,children:e,className:t,id:h,style:{...Ee,...I},"data-panel":"","data-panel-collapsible":n||void 0,"data-panel-group-id":W,"data-panel-id":ue,"data-panel-size":parseFloat(""+Ee.flexGrow).toFixed(1)})}const $G=jG((e,t)=>Hp(BG,{...e,forwardedRef:t}));BG.displayName="Panel";$G.displayName="forwardRef(Panel)";let lM=null,Vd=null;function GAe(e,t){if(t){const r=(t&WG)!==0,n=(t&qG)!==0,s=(t&HG)!==0,u=(t&XG)!==0;if(r)return s?"se-resize":u?"ne-resize":"e-resize";if(n)return s?"sw-resize":u?"nw-resize":"w-resize";if(s)return"s-resize";if(u)return"n-resize"}switch(e){case"horizontal":return"ew-resize";case"intersection":return"move";case"vertical":return"ns-resize"}}function WAe(){Vd!==null&&(document.head.removeChild(Vd),lM=null,Vd=null)}function hA(e,t){const r=GAe(e,t);lM!==r&&(lM=r,Vd===null&&(Vd=document.createElement("style"),document.head.appendChild(Vd)),Vd.innerHTML=`*{cursor: ${r}!important;}`)}function FG(e){return e.type==="keydown"}function UG(e){return e.type.startsWith("pointer")}function VG(e){return e.type.startsWith("mouse")}function uS(e){if(UG(e)){if(e.isPrimary)return{x:e.clientX,y:e.clientY}}else if(VG(e))return{x:e.clientX,y:e.clientY};return{x:1/0,y:1/0}}function qAe(){if(typeof matchMedia=="function")return matchMedia("(pointer:coarse)").matches?"coarse":"fine"}function HAe(e,t,r){return e.x<t.x+t.width&&e.x+e.width>t.x&&e.y<t.y+t.height&&e.y+e.height>t.y}function XAe(e,t){if(e===t)throw new Error("Cannot compare node with itself");const r={a:yB(e),b:yB(t)};let n;for(;r.a.at(-1)===r.b.at(-1);)e=r.a.pop(),t=r.b.pop(),n=e;Pr(n,"Stacking order can only be calculated for elements with a common ancestor");const s={a:gB(mB(r.a)),b:gB(mB(r.b))};if(s.a===s.b){const u=n.childNodes,h={a:r.a.at(-1),b:r.b.at(-1)};let m=u.length;for(;m--;){const o=u[m];if(o===h.a)return 1;if(o===h.b)return-1}}return Math.sign(s.a-s.b)}const ZAe=/\b(?:position|zIndex|opacity|transform|webkitTransform|mixBlendMode|filter|webkitFilter|isolation)\b/;function KAe(e){var t;const r=getComputedStyle((t=GG(e))!==null&&t!==void 0?t:e).display;return r==="flex"||r==="inline-flex"}function YAe(e){const t=getComputedStyle(e);return!!(t.position==="fixed"||t.zIndex!=="auto"&&(t.position!=="static"||KAe(e))||+t.opacity<1||"transform"in t&&t.transform!=="none"||"webkitTransform"in t&&t.webkitTransform!=="none"||"mixBlendMode"in t&&t.mixBlendMode!=="normal"||"filter"in t&&t.filter!=="none"||"webkitFilter"in t&&t.webkitFilter!=="none"||"isolation"in t&&t.isolation==="isolate"||ZAe.test(t.willChange)||t.webkitOverflowScrolling==="touch")}function mB(e){let t=e.length;for(;t--;){const r=e[t];if(Pr(r,"Missing node"),YAe(r))return r}return null}function gB(e){return e&&Number(getComputedStyle(e).zIndex)||0}function yB(e){const t=[];for(;e;)t.push(e),e=GG(e);return t}function GG(e){const{parentNode:t}=e;return t&&t instanceof ShadowRoot?t.host:t}const WG=1,qG=2,HG=4,XG=8,JAe=qAe()==="coarse";let Os=[],op=!1,eu=new Map,dS=new Map;const Vv=new Set;function QAe(e,t,r,n,s){var u;const{ownerDocument:h}=t,m={direction:r,element:t,hitAreaMargins:n,setResizeHandlerState:s},o=(u=eu.get(h))!==null&&u!==void 0?u:0;return eu.set(h,o+1),Vv.add(m),I1(),function(){var E;dS.delete(e),Vv.delete(m);const S=(E=eu.get(h))!==null&&E!==void 0?E:1;if(eu.set(h,S-1),I1(),S===1&&eu.delete(h),Os.includes(m)){const A=Os.indexOf(m);A>=0&&Os.splice(A,1),jO(),s("up",!0,null)}}}function vB(e){const{target:t}=e,{x:r,y:n}=uS(e);op=!0,LO({target:t,x:r,y:n}),I1(),Os.length>0&&(O1("down",e),e.preventDefault(),e.stopPropagation())}function hy(e){const{x:t,y:r}=uS(e);if(op&&e.buttons===0&&(op=!1,O1("up",e)),!op){const{target:n}=e;LO({target:n,x:t,y:r})}O1("move",e),jO(),Os.length>0&&e.preventDefault()}function Tf(e){const{target:t}=e,{x:r,y:n}=uS(e);dS.clear(),op=!1,Os.length>0&&e.preventDefault(),O1("up",e),LO({target:t,x:r,y:n}),jO(),I1()}function LO({target:e,x:t,y:r}){Os.splice(0);let n=null;e instanceof HTMLElement&&(n=e),Vv.forEach(s=>{const{element:u,hitAreaMargins:h}=s,m=u.getBoundingClientRect(),{bottom:o,left:_,right:E,top:S}=m,A=JAe?h.coarse:h.fine;if(t>=_-A&&t<=E+A&&r>=S-A&&r<=o+A){if(n!==null&&document.contains(n)&&u!==n&&!u.contains(n)&&!n.contains(u)&&XAe(n,u)>0){let R=n,k=!1;for(;R&&!R.contains(u);){if(HAe(R.getBoundingClientRect(),m)){k=!0;break}R=R.parentElement}if(k)return}Os.push(s)}})}function fA(e,t){dS.set(e,t)}function jO(){let e=!1,t=!1;Os.forEach(n=>{const{direction:s}=n;s==="horizontal"?e=!0:t=!0});let r=0;dS.forEach(n=>{r|=n}),e&&t?hA("intersection",r):e?hA("horizontal",r):t?hA("vertical",r):WAe()}function I1(){eu.forEach((e,t)=>{const{body:r}=t;r.removeEventListener("contextmenu",Tf),r.removeEventListener("pointerdown",vB),r.removeEventListener("pointerleave",hy),r.removeEventListener("pointermove",hy)}),window.removeEventListener("pointerup",Tf),window.removeEventListener("pointercancel",Tf),Vv.size>0&&(op?(Os.length>0&&eu.forEach((e,t)=>{const{body:r}=t;e>0&&(r.addEventListener("contextmenu",Tf),r.addEventListener("pointerleave",hy),r.addEventListener("pointermove",hy))}),window.addEventListener("pointerup",Tf),window.addEventListener("pointercancel",Tf)):eu.forEach((e,t)=>{const{body:r}=t;e>0&&(r.addEventListener("pointerdown",vB,{capture:!0}),r.addEventListener("pointermove",hy))}))}function O1(e,t){Vv.forEach(r=>{const{setResizeHandlerState:n}=r,s=Os.includes(r);n(e,s,t)})}function ePe(){const[e,t]=ip(0);return Ro(()=>t(r=>r+1),[])}function Pr(e,t){if(!e)throw console.error(t),Error(t)}const zO=10;function dh(e,t,r=zO){return e.toFixed(r)===t.toFixed(r)?0:e>t?1:-1}function Bl(e,t,r=zO){return dh(e,t,r)===0}function na(e,t,r){return dh(e,t,r)===0}function tPe(e,t,r){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++){const s=e[n],u=t[n];if(!na(s,u,r))return!1}return!0}function Vf({panelConstraints:e,panelIndex:t,size:r}){const n=e[t];Pr(n!=null,`Panel constraints not found for index ${t}`);let{collapsedSize:s=0,collapsible:u,maxSize:h=100,minSize:m=0}=n;if(dh(r,m)<0)if(u){const o=(s+m)/2;dh(r,o)<0?r=s:r=m}else r=m;return r=Math.min(h,r),r=parseFloat(r.toFixed(zO)),r}function _y({delta:e,initialLayout:t,panelConstraints:r,pivotIndices:n,prevLayout:s,trigger:u}){if(na(e,0))return t;const h=[...t],[m,o]=n;Pr(m!=null,"Invalid first pivot index"),Pr(o!=null,"Invalid second pivot index");let _=0;if(u==="keyboard"){{const S=e<0?o:m,A=r[S];Pr(A,`Panel constraints not found for index ${S}`);const{collapsedSize:I=0,collapsible:R,minSize:k=0}=A;if(R){const L=t[S];if(Pr(L!=null,`Previous layout not found for panel index ${S}`),na(L,I)){const N=k-L;dh(N,Math.abs(e))>0&&(e=e<0?0-N:N)}}}{const S=e<0?m:o,A=r[S];Pr(A,`No panel constraints found for index ${S}`);const{collapsedSize:I=0,collapsible:R,minSize:k=0}=A;if(R){const L=t[S];if(Pr(L!=null,`Previous layout not found for panel index ${S}`),na(L,k)){const N=L-I;dh(N,Math.abs(e))>0&&(e=e<0?0-N:N)}}}}{const S=e<0?1:-1;let A=e<0?o:m,I=0;for(;;){const k=t[A];Pr(k!=null,`Previous layout not found for panel index ${A}`);const N=Vf({panelConstraints:r,panelIndex:A,size:100})-k;if(I+=N,A+=S,A<0||A>=r.length)break}const R=Math.min(Math.abs(e),Math.abs(I));e=e<0?0-R:R}{let A=e<0?m:o;for(;A>=0&&A<r.length;){const I=Math.abs(e)-Math.abs(_),R=t[A];Pr(R!=null,`Previous layout not found for panel index ${A}`);const k=R-I,L=Vf({panelConstraints:r,panelIndex:A,size:k});if(!na(R,L)&&(_+=R-L,h[A]=L,_.toPrecision(3).localeCompare(Math.abs(e).toPrecision(3),void 0,{numeric:!0})>=0))break;e<0?A--:A++}}if(tPe(s,h))return s;{const S=e<0?o:m,A=t[S];Pr(A!=null,`Previous layout not found for panel index ${S}`);const I=A+_,R=Vf({panelConstraints:r,panelIndex:S,size:I});if(h[S]=R,!na(R,I)){let k=I-R,N=e<0?o:m;for(;N>=0&&N<r.length;){const z=h[N];Pr(z!=null,`Previous layout not found for panel index ${N}`);const F=z+k,U=Vf({panelConstraints:r,panelIndex:N,size:F});if(na(z,U)||(k-=U-z,h[N]=U),na(k,0))break;e>0?N--:N++}}}const E=h.reduce((S,A)=>A+S,0);return na(E,100)?h:s}function rPe({layout:e,panelsArray:t,pivotIndices:r}){let n=0,s=100,u=0,h=0;const m=r[0];Pr(m!=null,"No pivot index found"),t.forEach((S,A)=>{const{constraints:I}=S,{maxSize:R=100,minSize:k=0}=I;A===m?(n=k,s=R):(u+=k,h+=R)});const o=Math.min(s,100-u),_=Math.max(n,100-h),E=e[m];return{valueMax:o,valueMin:_,valueNow:E}}function Gv(e,t=document){return Array.from(t.querySelectorAll(`[data-panel-resize-handle-id][data-panel-group-id="${e}"]`))}function ZG(e,t,r=document){const s=Gv(e,r).findIndex(u=>u.getAttribute("data-panel-resize-handle-id")===t);return s??null}function KG(e,t,r){const n=ZG(e,t,r);return n!=null?[n,n+1]:[-1,-1]}function YG(e,t=document){var r;if(t instanceof HTMLElement&&(t==null||(r=t.dataset)===null||r===void 0?void 0:r.panelGroupId)==e)return t;const n=t.querySelector(`[data-panel-group][data-panel-group-id="${e}"]`);return n||null}function hS(e,t=document){const r=t.querySelector(`[data-panel-resize-handle-id="${e}"]`);return r||null}function nPe(e,t,r,n=document){var s,u,h,m;const o=hS(t,n),_=Gv(e,n),E=o?_.indexOf(o):-1,S=(s=(u=r[E])===null||u===void 0?void 0:u.id)!==null&&s!==void 0?s:null,A=(h=(m=r[E+1])===null||m===void 0?void 0:m.id)!==null&&h!==void 0?h:null;return[S,A]}function iPe({committedValuesRef:e,eagerValuesRef:t,groupId:r,layout:n,panelDataArray:s,panelGroupElement:u,setLayout:h}){Lo({didWarnAboutMissingResizeHandle:!1}),Qd(()=>{if(!u)return;const m=Gv(r,u);for(let o=0;o<s.length-1;o++){const{valueMax:_,valueMin:E,valueNow:S}=rPe({layout:n,panelsArray:s,pivotIndices:[o,o+1]}),A=m[o];if(A!=null){const I=s[o];Pr(I,`No panel data found for index "${o}"`),A.setAttribute("aria-controls",I.id),A.setAttribute("aria-valuemax",""+Math.round(_)),A.setAttribute("aria-valuemin",""+Math.round(E)),A.setAttribute("aria-valuenow",S!=null?""+Math.round(S):"")}}return()=>{m.forEach((o,_)=>{o.removeAttribute("aria-controls"),o.removeAttribute("aria-valuemax"),o.removeAttribute("aria-valuemin"),o.removeAttribute("aria-valuenow")})}},[r,n,s,u]),Jd(()=>{if(!u)return;const m=t.current;Pr(m,"Eager values not found");const{panelDataArray:o}=m,_=YG(r,u);Pr(_!=null,`No group found for id "${r}"`);const E=Gv(r,u);Pr(E,`No resize handles found for group id "${r}"`);const S=E.map(A=>{const I=A.getAttribute("data-panel-resize-handle-id");Pr(I,"Resize handle element has no handle id attribute");const[R,k]=nPe(r,I,o,u);if(R==null||k==null)return()=>{};const L=N=>{if(!N.defaultPrevented)switch(N.key){case"Enter":{N.preventDefault();const z=o.findIndex(F=>F.id===R);if(z>=0){const F=o[z];Pr(F,`No panel data found for index ${z}`);const U=n[z],{collapsedSize:W=0,collapsible:Y,minSize:Q=0}=F.constraints;if(U!=null&&Y){const Z=_y({delta:na(U,W)?Q-W:W-U,initialLayout:n,panelConstraints:o.map(re=>re.constraints),pivotIndices:KG(r,I,u),prevLayout:n,trigger:"keyboard"});n!==Z&&h(Z)}}break}}};return A.addEventListener("keydown",L),()=>{A.removeEventListener("keydown",L)}});return()=>{S.forEach(A=>A())}},[u,e,t,r,n,s,h])}function _B(e,t){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}function JG(e,t){const r=e==="horizontal",{x:n,y:s}=uS(t);return r?n:s}function oPe(e,t,r,n,s){const u=r==="horizontal",h=hS(t,s);Pr(h,`No resize handle element found for id "${t}"`);const m=h.getAttribute("data-panel-group-id");Pr(m,"Resize handle element has no group id attribute");let{initialCursorPosition:o}=n;const _=JG(r,e),E=YG(m,s);Pr(E,`No group element found for id "${m}"`);const S=E.getBoundingClientRect(),A=u?S.width:S.height;return(_-o)/A*100}function aPe(e,t,r,n,s,u){if(FG(e)){const h=r==="horizontal";let m=0;e.shiftKey?m=100:s!=null?m=s:m=10;let o=0;switch(e.key){case"ArrowDown":o=h?0:m;break;case"ArrowLeft":o=h?-m:0;break;case"ArrowRight":o=h?m:0;break;case"ArrowUp":o=h?0:-m;break;case"End":o=100;break;case"Home":o=-100;break}return o}else return n==null?0:oPe(e,t,r,n,u)}function sPe({panelDataArray:e}){const t=Array(e.length),r=e.map(u=>u.constraints);let n=0,s=100;for(let u=0;u<e.length;u++){const h=r[u];Pr(h,`Panel constraints not found for index ${u}`);const{defaultSize:m}=h;m!=null&&(n++,t[u]=m,s-=m)}for(let u=0;u<e.length;u++){const h=r[u];Pr(h,`Panel constraints not found for index ${u}`);const{defaultSize:m}=h;if(m!=null)continue;const o=e.length-n,_=s/o;n++,t[u]=_,s-=_}return t}function Af(e,t,r){t.forEach((n,s)=>{const u=e[s];Pr(u,`Panel data not found for index ${s}`);const{callbacks:h,constraints:m,id:o}=u,{collapsedSize:_=0,collapsible:E}=m,S=r[o];if(S==null||n!==S){r[o]=n;const{onCollapse:A,onExpand:I,onResize:R}=h;R&&R(n,S),E&&(A||I)&&(I&&(S==null||Bl(S,_))&&!Bl(n,_)&&I(),A&&(S==null||!Bl(S,_))&&Bl(n,_)&&A())}})}function M0(e,t){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!=t[r])return!1;return!0}function lPe({defaultSize:e,dragState:t,layout:r,panelData:n,panelIndex:s,precision:u=3}){const h=r[s];let m;return h==null?m=e!=null?e.toPrecision(u):"1":n.length===1?m="1":m=h.toPrecision(u),{flexBasis:0,flexGrow:m,flexShrink:1,overflow:"hidden",pointerEvents:t!==null?"none":void 0}}function cPe(e,t=10){let r=null;return(...s)=>{r!==null&&clearTimeout(r),r=setTimeout(()=>{e(...s)},t)}}function xB(e){try{if(typeof localStorage<"u")e.getItem=t=>localStorage.getItem(t),e.setItem=(t,r)=>{localStorage.setItem(t,r)};else throw new Error("localStorage not supported in this environment")}catch(t){console.error(t),e.getItem=()=>null,e.setItem=()=>{}}}function QG(e){return`react-resizable-panels:${e}`}function eW(e){return e.map(t=>{const{constraints:r,id:n,idIsFromProps:s,order:u}=t;return s?n:u?`${u}:${JSON.stringify(r)}`:JSON.stringify(r)}).sort((t,r)=>t.localeCompare(r)).join(",")}function tW(e,t){try{const r=QG(e),n=t.getItem(r);if(n){const s=JSON.parse(n);if(typeof s=="object"&&s!=null)return s}}catch{}return null}function uPe(e,t,r){var n,s;const u=(n=tW(e,r))!==null&&n!==void 0?n:{},h=eW(t);return(s=u[h])!==null&&s!==void 0?s:null}function dPe(e,t,r,n,s){var u;const h=QG(e),m=eW(t),o=(u=tW(e,s))!==null&&u!==void 0?u:{};o[m]={expandToSizes:Object.fromEntries(r.entries()),layout:n};try{s.setItem(h,JSON.stringify(o))}catch(_){console.error(_)}}function bB({layout:e,panelConstraints:t}){const r=[...e],n=r.reduce((u,h)=>u+h,0);if(r.length!==t.length)throw Error(`Invalid ${t.length} panel layout: ${r.map(u=>`${u}%`).join(", ")}`);if(!na(n,100)&&r.length>0)for(let u=0;u<t.length;u++){const h=r[u];Pr(h!=null,`No layout data found for index ${u}`);const m=100/n*h;r[u]=m}let s=0;for(let u=0;u<t.length;u++){const h=r[u];Pr(h!=null,`No layout data found for index ${u}`);const m=Vf({panelConstraints:t,panelIndex:u,size:h});h!=m&&(s+=h-m,r[u]=m)}if(!na(s,0))for(let u=0;u<t.length;u++){const h=r[u];Pr(h!=null,`No layout data found for index ${u}`);const m=h+s,o=Vf({panelConstraints:t,panelIndex:u,size:m});if(h!==o&&(s-=o-h,r[u]=o,na(s,0)))break}return r}const hPe=100,xy={getItem:e=>(xB(xy),xy.getItem(e)),setItem:(e,t)=>{xB(xy),xy.setItem(e,t)}},wB={};function rW({autoSaveId:e=null,children:t,className:r="",direction:n,forwardedRef:s,id:u=null,onLayout:h=null,keyboardResizeBy:m=null,storage:o=xy,style:_,tagName:E="div",...S}){const A=RO(u),I=Lo(null),[R,k]=ip(null),[L,N]=ip([]),z=ePe(),F=Lo({}),U=Lo(new Map),W=Lo(0),Y=Lo({autoSaveId:e,direction:n,dragState:R,id:A,keyboardResizeBy:m,onLayout:h,storage:o}),Q=Lo({layout:L,panelDataArray:[],panelDataArrayChanged:!1});Lo({didLogIdAndOrderWarning:!1,didLogPanelConstraintsWarning:!1,prevPanelIds:[]}),NG(s,()=>({getId:()=>Y.current.id,getLayout:()=>{const{layout:Re}=Q.current;return Re},setLayout:Re=>{const{onLayout:at}=Y.current,{layout:Et,panelDataArray:vt}=Q.current,lt=bB({layout:Re,panelConstraints:vt.map(gt=>gt.constraints)});_B(Et,lt)||(N(lt),Q.current.layout=lt,at&&at(lt),Af(vt,lt,F.current))}}),[]),Qd(()=>{Y.current.autoSaveId=e,Y.current.direction=n,Y.current.dragState=R,Y.current.id=A,Y.current.onLayout=h,Y.current.storage=o}),iPe({committedValuesRef:Y,eagerValuesRef:Q,groupId:A,layout:L,panelDataArray:Q.current.panelDataArray,setLayout:N,panelGroupElement:I.current}),Jd(()=>{const{panelDataArray:Re}=Q.current;if(e){if(L.length===0||L.length!==Re.length)return;let at=wB[e];at==null&&(at=cPe(dPe,hPe),wB[e]=at);const Et=[...Re],vt=new Map(U.current);at(e,Et,vt,L,o)}},[e,L,o]),Jd(()=>{});const Z=Ro(Re=>{const{onLayout:at}=Y.current,{layout:Et,panelDataArray:vt}=Q.current;if(Re.constraints.collapsible){const lt=vt.map(ht=>ht.constraints),{collapsedSize:gt=0,panelSize:tt,pivotIndices:ft}=Id(vt,Re,Et);if(Pr(tt!=null,`Panel size not found for panel "${Re.id}"`),!Bl(tt,gt)){U.current.set(Re.id,tt);const Be=Pf(vt,Re)===vt.length-1?tt-gt:gt-tt,zt=_y({delta:Be,initialLayout:Et,panelConstraints:lt,pivotIndices:ft,prevLayout:Et,trigger:"imperative-api"});M0(Et,zt)||(N(zt),Q.current.layout=zt,at&&at(zt),Af(vt,zt,F.current))}}},[]),re=Ro((Re,at)=>{const{onLayout:Et}=Y.current,{layout:vt,panelDataArray:lt}=Q.current;if(Re.constraints.collapsible){const gt=lt.map(Ot=>Ot.constraints),{collapsedSize:tt=0,panelSize:ft=0,minSize:ht=0,pivotIndices:Be}=Id(lt,Re,vt),zt=at??ht;if(Bl(ft,tt)){const Ot=U.current.get(Re.id),qt=Ot!=null&&Ot>=zt?Ot:zt,nr=Pf(lt,Re)===lt.length-1?ft-qt:qt-ft,tr=_y({delta:nr,initialLayout:vt,panelConstraints:gt,pivotIndices:Be,prevLayout:vt,trigger:"imperative-api"});M0(vt,tr)||(N(tr),Q.current.layout=tr,Et&&Et(tr),Af(lt,tr,F.current))}}},[]),ne=Ro(Re=>{const{layout:at,panelDataArray:Et}=Q.current,{panelSize:vt}=Id(Et,Re,at);return Pr(vt!=null,`Panel size not found for panel "${Re.id}"`),vt},[]),ue=Ro((Re,at)=>{const{panelDataArray:Et}=Q.current,vt=Pf(Et,Re);return lPe({defaultSize:at,dragState:R,layout:L,panelData:Et,panelIndex:vt})},[R,L]),fe=Ro(Re=>{const{layout:at,panelDataArray:Et}=Q.current,{collapsedSize:vt=0,collapsible:lt,panelSize:gt}=Id(Et,Re,at);return Pr(gt!=null,`Panel size not found for panel "${Re.id}"`),lt===!0&&Bl(gt,vt)},[]),Ee=Ro(Re=>{const{layout:at,panelDataArray:Et}=Q.current,{collapsedSize:vt=0,collapsible:lt,panelSize:gt}=Id(Et,Re,at);return Pr(gt!=null,`Panel size not found for panel "${Re.id}"`),!lt||dh(gt,vt)>0},[]),Se=Ro(Re=>{const{panelDataArray:at}=Q.current;at.push(Re),at.sort((Et,vt)=>{const lt=Et.order,gt=vt.order;return lt==null&&gt==null?0:lt==null?-1:gt==null?1:lt-gt}),Q.current.panelDataArrayChanged=!0,z()},[z]);Qd(()=>{if(Q.current.panelDataArrayChanged){Q.current.panelDataArrayChanged=!1;const{autoSaveId:Re,onLayout:at,storage:Et}=Y.current,{layout:vt,panelDataArray:lt}=Q.current;let gt=null;if(Re){const ft=uPe(Re,lt,Et);ft&&(U.current=new Map(Object.entries(ft.expandToSizes)),gt=ft.layout)}gt==null&&(gt=sPe({panelDataArray:lt}));const tt=bB({layout:gt,panelConstraints:lt.map(ft=>ft.constraints)});_B(vt,tt)||(N(tt),Q.current.layout=tt,at&&at(tt),Af(lt,tt,F.current))}}),Qd(()=>{const Re=Q.current;return()=>{Re.layout=[]}},[]);const je=Ro(Re=>function(Et){Et.preventDefault();const vt=I.current;if(!vt)return()=>null;const{direction:lt,dragState:gt,id:tt,keyboardResizeBy:ft,onLayout:ht}=Y.current,{layout:Be,panelDataArray:zt}=Q.current,{initialLayout:Ot}=gt??{},qt=KG(tt,Re,vt);let Pt=aPe(Et,Re,lt,gt,ft,vt);const nr=lt==="horizontal";document.dir==="rtl"&&nr&&(Pt=-Pt);const tr=zt.map(wn=>wn.constraints),Yt=_y({delta:Pt,initialLayout:Ot??Be,panelConstraints:tr,pivotIndices:qt,prevLayout:Be,trigger:FG(Et)?"keyboard":"mouse-or-touch"}),or=!M0(Be,Yt);(UG(Et)||VG(Et))&&W.current!=Pt&&(W.current=Pt,!or&&Pt!==0?nr?fA(Re,Pt<0?WG:qG):fA(Re,Pt<0?HG:XG):fA(Re,0)),or&&(N(Yt),Q.current.layout=Yt,ht&&ht(Yt),Af(zt,Yt,F.current))},[]),Le=Ro((Re,at)=>{const{onLayout:Et}=Y.current,{layout:vt,panelDataArray:lt}=Q.current,gt=lt.map(Ot=>Ot.constraints),{panelSize:tt,pivotIndices:ft}=Id(lt,Re,vt);Pr(tt!=null,`Panel size not found for panel "${Re.id}"`);const Be=Pf(lt,Re)===lt.length-1?tt-at:at-tt,zt=_y({delta:Be,initialLayout:vt,panelConstraints:gt,pivotIndices:ft,prevLayout:vt,trigger:"imperative-api"});M0(vt,zt)||(N(zt),Q.current.layout=zt,Et&&Et(zt),Af(lt,zt,F.current))},[]),Ue=Ro((Re,at)=>{const{layout:Et,panelDataArray:vt}=Q.current,{collapsedSize:lt=0,collapsible:gt}=at,{collapsedSize:tt=0,collapsible:ft,maxSize:ht=100,minSize:Be=0}=Re.constraints,{panelSize:zt}=Id(vt,Re,Et);zt!=null&&(gt&&ft&&Bl(zt,lt)?Bl(lt,tt)||Le(Re,tt):zt<Be?Le(Re,Be):zt>ht&&Le(Re,ht))},[Le]),we=Ro((Re,at)=>{const{direction:Et}=Y.current,{layout:vt}=Q.current;if(!I.current)return;const lt=hS(Re,I.current);Pr(lt,`Drag handle element not found for id "${Re}"`);const gt=JG(Et,at);k({dragHandleId:Re,dragHandleRect:lt.getBoundingClientRect(),initialCursorPosition:gt,initialLayout:vt})},[]),Pe=Ro(()=>{k(null)},[]),rt=Ro(Re=>{const{panelDataArray:at}=Q.current,Et=Pf(at,Re);Et>=0&&(at.splice(Et,1),delete F.current[Re.id],Q.current.panelDataArrayChanged=!0,z())},[z]),$e=$Ae(()=>({collapsePanel:Z,direction:n,dragState:R,expandPanel:re,getPanelSize:ne,getPanelStyle:ue,groupId:A,isPanelCollapsed:fe,isPanelExpanded:Ee,reevaluatePanelConstraints:Ue,registerPanel:Se,registerResizeHandle:je,resizePanel:Le,startDragging:we,stopDragging:Pe,unregisterPanel:rt,panelGroupElement:I.current}),[Z,R,n,re,ne,ue,A,fe,Ee,Ue,Se,je,Le,we,Pe,rt]),Ge={display:"flex",flexDirection:n==="horizontal"?"row":"column",height:"100%",overflow:"hidden",width:"100%"};return Hp(cS.Provider,{value:$e},Hp(E,{...S,children:t,className:r,id:u,ref:I,style:{...Ge,..._},"data-panel-group":"","data-panel-group-direction":n,"data-panel-group-id":A}))}const nW=jG((e,t)=>Hp(rW,{...e,forwardedRef:t}));rW.displayName="PanelGroup";nW.displayName="forwardRef(PanelGroup)";function Pf(e,t){return e.findIndex(r=>r===t||r.id===t.id)}function Id(e,t,r){const n=Pf(e,t),u=n===e.length-1?[n-1,n]:[n,n+1],h=r[n];return{...t.constraints,panelSize:h,pivotIndices:u}}function fPe({disabled:e,handleId:t,resizeHandler:r,panelGroupElement:n}){Jd(()=>{if(e||r==null||n==null)return;const s=hS(t,n);if(s==null)return;const u=h=>{if(!h.defaultPrevented)switch(h.key){case"ArrowDown":case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"End":case"Home":{h.preventDefault(),r(h);break}case"F6":{h.preventDefault();const m=s.getAttribute("data-panel-group-id");Pr(m,`No group element found for id "${m}"`);const o=Gv(m,n),_=ZG(m,t,n);Pr(_!==null,`No resize element found for id "${t}"`);const E=h.shiftKey?_>0?_-1:o.length-1:_+1<o.length?_+1:0;o[E].focus();break}}};return s.addEventListener("keydown",u),()=>{s.removeEventListener("keydown",u)}},[n,e,t,r])}function iW({children:e=null,className:t="",disabled:r=!1,hitAreaMargins:n,id:s,onBlur:u,onDragging:h,onFocus:m,style:o={},tabIndex:_=0,tagName:E="div",...S}){var A,I;const R=Lo(null),k=Lo({onDragging:h});Jd(()=>{k.current.onDragging=h});const L=zG(cS);if(L===null)throw Error("PanelResizeHandle components must be rendered within a PanelGroup container");const{direction:N,groupId:z,registerResizeHandle:F,startDragging:U,stopDragging:W,panelGroupElement:Y}=L,Q=RO(s),[Z,re]=ip("inactive"),[ne,ue]=ip(!1),[fe,Ee]=ip(null),Se=Lo({state:Z});Qd(()=>{Se.current.state=Z}),Jd(()=>{if(r)Ee(null);else{const we=F(Q);Ee(()=>we)}},[r,Q,F]);const je=(A=n==null?void 0:n.coarse)!==null&&A!==void 0?A:15,Le=(I=n==null?void 0:n.fine)!==null&&I!==void 0?I:5;return Jd(()=>{if(r||fe==null)return;const we=R.current;return Pr(we,"Element ref not attached"),QAe(Q,we,N,{coarse:je,fine:Le},(rt,$e,Ge)=>{if($e)switch(rt){case"down":{re("drag"),Pr(Ge,'Expected event to be defined for "down" action'),U(Q,Ge);const{onDragging:Re}=k.current;Re&&Re(!0);break}case"move":{const{state:Re}=Se.current;Re!=="drag"&&re("hover"),Pr(Ge,'Expected event to be defined for "move" action'),fe(Ge);break}case"up":{re("hover"),W();const{onDragging:Re}=k.current;Re&&Re(!1);break}}else re("inactive")})},[je,N,r,Le,F,Q,fe,U,W]),fPe({disabled:r,handleId:Q,resizeHandler:fe,panelGroupElement:Y}),Hp(E,{...S,children:e,className:t,id:s,onBlur:()=>{ue(!1),u==null||u()},onFocus:()=>{ue(!0),m==null||m()},ref:R,role:"separator",style:{...{touchAction:"none",userSelect:"none"},...o},tabIndex:_,"data-panel-group-direction":N,"data-panel-group-id":z,"data-resize-handle":"","data-resize-handle-active":Z==="drag"?"pointer":ne?"keyboard":void 0,"data-resize-handle-state":Z,"data-panel-resize-handle-enabled":!r,"data-panel-resize-handle-id":Q})}iW.displayName="PanelResizeHandle";const SB=({className:e,...t})=>M.jsx(nW,{className:Wt("flex h-full w-full data-[panel-group-direction=vertical]:flex-col",e),...t}),I0=$G,EB=({withHandle:e,className:t,...r})=>M.jsx(iW,{className:Wt("relative flex w-px items-center justify-center bg-border after:absolute after:inset-y-0 after:left-1/2 after:w-1 after:-translate-x-1/2 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring focus-visible:ring-offset-1 data-[panel-group-direction=vertical]:h-px data-[panel-group-direction=vertical]:w-full data-[panel-group-direction=vertical]:after:left-0 data-[panel-group-direction=vertical]:after:h-1 data-[panel-group-direction=vertical]:after:w-full data-[panel-group-direction=vertical]:after:-translate-y-1/2 data-[panel-group-direction=vertical]:after:translate-x-0 [&[data-panel-group-direction=vertical]>div]:rotate-90",t),...r,children:e&&M.jsx("div",{className:"z-10 flex h-4 w-3 items-center justify-center rounded-sm border bg-border",children:M.jsx(sK,{className:"h-2.5 w-2.5"})})}),oW=V.forwardRef(({className:e,...t},r)=>M.jsx("div",{className:"relative w-full overflow-auto",children:M.jsx("table",{ref:r,className:Wt("w-full caption-bottom text-sm",e),...t})}));oW.displayName="Table";const aW=V.forwardRef(({className:e,...t},r)=>M.jsx("thead",{ref:r,className:Wt("[&_tr]:border-b",e),...t}));aW.displayName="TableHeader";const sW=V.forwardRef(({className:e,...t},r)=>M.jsx("tbody",{ref:r,className:Wt("[&_tr:last-child]:border-0",e),...t}));sW.displayName="TableBody";const pPe=V.forwardRef(({className:e,...t},r)=>M.jsx("tfoot",{ref:r,className:Wt("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...t}));pPe.displayName="TableFooter";const by=V.forwardRef(({className:e,...t},r)=>M.jsx("tr",{ref:r,className:Wt("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...t}));by.displayName="TableRow";const cM=V.forwardRef(({className:e,...t},r)=>M.jsx("th",{ref:r,className:Wt("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...t}));cM.displayName="TableHead";const wy=V.forwardRef(({className:e,...t},r)=>M.jsx("td",{ref:r,className:Wt("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...t}));wy.displayName="TableCell";const mPe=V.forwardRef(({className:e,...t},r)=>M.jsx("caption",{ref:r,className:Wt("mt-4 text-sm text-muted-foreground",e),...t}));mPe.displayName="TableCaption";function gPe(e,t){return V.useReducer((r,n)=>t[r][n]??r,e)}var NO="ScrollArea",[lW,FCe]=gh(NO),[yPe,Za]=lW(NO),cW=V.forwardRef((e,t)=>{const{__scopeScrollArea:r,type:n="hover",dir:s,scrollHideDelay:u=600,...h}=e,[m,o]=V.useState(null),[_,E]=V.useState(null),[S,A]=V.useState(null),[I,R]=V.useState(null),[k,L]=V.useState(null),[N,z]=V.useState(0),[F,U]=V.useState(0),[W,Y]=V.useState(!1),[Q,Z]=V.useState(!1),re=Ur(t,ue=>o(ue)),ne=pw(s);return M.jsx(yPe,{scope:r,type:n,dir:ne,scrollHideDelay:u,scrollArea:m,viewport:_,onViewportChange:E,content:S,onContentChange:A,scrollbarX:I,onScrollbarXChange:R,scrollbarXEnabled:W,onScrollbarXEnabledChange:Y,scrollbarY:k,onScrollbarYChange:L,scrollbarYEnabled:Q,onScrollbarYEnabledChange:Z,onCornerWidthChange:z,onCornerHeightChange:U,children:M.jsx(vr.div,{dir:ne,...h,ref:re,style:{position:"relative","--radix-scroll-area-corner-width":N+"px","--radix-scroll-area-corner-height":F+"px",...e.style}})})});cW.displayName=NO;var uW="ScrollAreaViewport",dW=V.forwardRef((e,t)=>{const{__scopeScrollArea:r,children:n,asChild:s,nonce:u,...h}=e,m=Za(uW,r),o=V.useRef(null),_=Ur(t,o,m.onViewportChange);return M.jsxs(M.Fragment,{children:[M.jsx("style",{dangerouslySetInnerHTML:{__html:`
[data-radix-scroll-area-viewport] {
  scrollbar-width: none;
  -ms-overflow-style: none;
  -webkit-overflow-scrolling: touch;
}
[data-radix-scroll-area-viewport]::-webkit-scrollbar {
  display: none;
}
:where([data-radix-scroll-area-viewport]) {
  display: flex;
  flex-direction: column;
  align-items: stretch;
}
:where([data-radix-scroll-area-content]) {
  flex-grow: 1;
}
`},nonce:u}),M.jsx(vr.div,{"data-radix-scroll-area-viewport":"",...h,asChild:s,ref:_,style:{overflowX:m.scrollbarXEnabled?"scroll":"hidden",overflowY:m.scrollbarYEnabled?"scroll":"hidden",...e.style},children:PPe({asChild:s,children:n},E=>M.jsx("div",{"data-radix-scroll-area-content":"",ref:m.onContentChange,style:{minWidth:m.scrollbarXEnabled?"fit-content":void 0},children:E}))})]})});dW.displayName=uW;var ml="ScrollAreaScrollbar",BO=V.forwardRef((e,t)=>{const{forceMount:r,...n}=e,s=Za(ml,e.__scopeScrollArea),{onScrollbarXEnabledChange:u,onScrollbarYEnabledChange:h}=s,m=e.orientation==="horizontal";return V.useEffect(()=>(m?u(!0):h(!0),()=>{m?u(!1):h(!1)}),[m,u,h]),s.type==="hover"?M.jsx(vPe,{...n,ref:t,forceMount:r}):s.type==="scroll"?M.jsx(_Pe,{...n,ref:t,forceMount:r}):s.type==="auto"?M.jsx(hW,{...n,ref:t,forceMount:r}):s.type==="always"?M.jsx($O,{...n,ref:t}):null});BO.displayName=ml;var vPe=V.forwardRef((e,t)=>{const{forceMount:r,...n}=e,s=Za(ml,e.__scopeScrollArea),[u,h]=V.useState(!1);return V.useEffect(()=>{const m=s.scrollArea;let o=0;if(m){const _=()=>{window.clearTimeout(o),h(!0)},E=()=>{o=window.setTimeout(()=>h(!1),s.scrollHideDelay)};return m.addEventListener("pointerenter",_),m.addEventListener("pointerleave",E),()=>{window.clearTimeout(o),m.removeEventListener("pointerenter",_),m.removeEventListener("pointerleave",E)}}},[s.scrollArea,s.scrollHideDelay]),M.jsx(qa,{present:r||u,children:M.jsx(hW,{"data-state":u?"visible":"hidden",...n,ref:t})})}),_Pe=V.forwardRef((e,t)=>{const{forceMount:r,...n}=e,s=Za(ml,e.__scopeScrollArea),u=e.orientation==="horizontal",h=pS(()=>o("SCROLL_END"),100),[m,o]=gPe("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return V.useEffect(()=>{if(m==="idle"){const _=window.setTimeout(()=>o("HIDE"),s.scrollHideDelay);return()=>window.clearTimeout(_)}},[m,s.scrollHideDelay,o]),V.useEffect(()=>{const _=s.viewport,E=u?"scrollLeft":"scrollTop";if(_){let S=_[E];const A=()=>{const I=_[E];S!==I&&(o("SCROLL"),h()),S=I};return _.addEventListener("scroll",A),()=>_.removeEventListener("scroll",A)}},[s.viewport,u,o,h]),M.jsx(qa,{present:r||m!=="hidden",children:M.jsx($O,{"data-state":m==="hidden"?"hidden":"visible",...n,ref:t,onPointerEnter:rr(e.onPointerEnter,()=>o("POINTER_ENTER")),onPointerLeave:rr(e.onPointerLeave,()=>o("POINTER_LEAVE"))})})}),hW=V.forwardRef((e,t)=>{const r=Za(ml,e.__scopeScrollArea),{forceMount:n,...s}=e,[u,h]=V.useState(!1),m=e.orientation==="horizontal",o=pS(()=>{if(r.viewport){const _=r.viewport.offsetWidth<r.viewport.scrollWidth,E=r.viewport.offsetHeight<r.viewport.scrollHeight;h(m?_:E)}},10);return Xp(r.viewport,o),Xp(r.content,o),M.jsx(qa,{present:n||u,children:M.jsx($O,{"data-state":u?"visible":"hidden",...s,ref:t})})}),$O=V.forwardRef((e,t)=>{const{orientation:r="vertical",...n}=e,s=Za(ml,e.__scopeScrollArea),u=V.useRef(null),h=V.useRef(0),[m,o]=V.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),_=yW(m.viewport,m.content),E={...n,sizes:m,onSizesChange:o,hasThumb:_>0&&_<1,onThumbChange:A=>u.current=A,onThumbPointerUp:()=>h.current=0,onThumbPointerDown:A=>h.current=A};function S(A,I){return TPe(A,h.current,m,I)}return r==="horizontal"?M.jsx(xPe,{...E,ref:t,onThumbPositionChange:()=>{if(s.viewport&&u.current){const A=s.viewport.scrollLeft,I=TB(A,m,s.dir);u.current.style.transform=`translate3d(${I}px, 0, 0)`}},onWheelScroll:A=>{s.viewport&&(s.viewport.scrollLeft=A)},onDragScroll:A=>{s.viewport&&(s.viewport.scrollLeft=S(A,s.dir))}}):r==="vertical"?M.jsx(bPe,{...E,ref:t,onThumbPositionChange:()=>{if(s.viewport&&u.current){const A=s.viewport.scrollTop,I=TB(A,m);u.current.style.transform=`translate3d(0, ${I}px, 0)`}},onWheelScroll:A=>{s.viewport&&(s.viewport.scrollTop=A)},onDragScroll:A=>{s.viewport&&(s.viewport.scrollTop=S(A))}}):null}),xPe=V.forwardRef((e,t)=>{const{sizes:r,onSizesChange:n,...s}=e,u=Za(ml,e.__scopeScrollArea),[h,m]=V.useState(),o=V.useRef(null),_=Ur(t,o,u.onScrollbarXChange);return V.useEffect(()=>{o.current&&m(getComputedStyle(o.current))},[o]),M.jsx(pW,{"data-orientation":"horizontal",...s,ref:_,sizes:r,style:{bottom:0,left:u.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:u.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":fS(r)+"px",...e.style},onThumbPointerDown:E=>e.onThumbPointerDown(E.x),onDragScroll:E=>e.onDragScroll(E.x),onWheelScroll:(E,S)=>{if(u.viewport){const A=u.viewport.scrollLeft+E.deltaX;e.onWheelScroll(A),_W(A,S)&&E.preventDefault()}},onResize:()=>{o.current&&u.viewport&&h&&n({content:u.viewport.scrollWidth,viewport:u.viewport.offsetWidth,scrollbar:{size:o.current.clientWidth,paddingStart:D1(h.paddingLeft),paddingEnd:D1(h.paddingRight)}})}})}),bPe=V.forwardRef((e,t)=>{const{sizes:r,onSizesChange:n,...s}=e,u=Za(ml,e.__scopeScrollArea),[h,m]=V.useState(),o=V.useRef(null),_=Ur(t,o,u.onScrollbarYChange);return V.useEffect(()=>{o.current&&m(getComputedStyle(o.current))},[o]),M.jsx(pW,{"data-orientation":"vertical",...s,ref:_,sizes:r,style:{top:0,right:u.dir==="ltr"?0:void 0,left:u.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":fS(r)+"px",...e.style},onThumbPointerDown:E=>e.onThumbPointerDown(E.y),onDragScroll:E=>e.onDragScroll(E.y),onWheelScroll:(E,S)=>{if(u.viewport){const A=u.viewport.scrollTop+E.deltaY;e.onWheelScroll(A),_W(A,S)&&E.preventDefault()}},onResize:()=>{o.current&&u.viewport&&h&&n({content:u.viewport.scrollHeight,viewport:u.viewport.offsetHeight,scrollbar:{size:o.current.clientHeight,paddingStart:D1(h.paddingTop),paddingEnd:D1(h.paddingBottom)}})}})}),[wPe,fW]=lW(ml),pW=V.forwardRef((e,t)=>{const{__scopeScrollArea:r,sizes:n,hasThumb:s,onThumbChange:u,onThumbPointerUp:h,onThumbPointerDown:m,onThumbPositionChange:o,onDragScroll:_,onWheelScroll:E,onResize:S,...A}=e,I=Za(ml,r),[R,k]=V.useState(null),L=Ur(t,re=>k(re)),N=V.useRef(null),z=V.useRef(""),F=I.viewport,U=n.content-n.viewport,W=si(E),Y=si(o),Q=pS(S,10);function Z(re){if(N.current){const ne=re.clientX-N.current.left,ue=re.clientY-N.current.top;_({x:ne,y:ue})}}return V.useEffect(()=>{const re=ne=>{const ue=ne.target;(R==null?void 0:R.contains(ue))&&W(ne,U)};return document.addEventListener("wheel",re,{passive:!1}),()=>document.removeEventListener("wheel",re,{passive:!1})},[F,R,U,W]),V.useEffect(Y,[n,Y]),Xp(R,Q),Xp(I.content,Q),M.jsx(wPe,{scope:r,scrollbar:R,hasThumb:s,onThumbChange:si(u),onThumbPointerUp:si(h),onThumbPositionChange:Y,onThumbPointerDown:si(m),children:M.jsx(vr.div,{...A,ref:L,style:{position:"absolute",...A.style},onPointerDown:rr(e.onPointerDown,re=>{re.button===0&&(re.target.setPointerCapture(re.pointerId),N.current=R.getBoundingClientRect(),z.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",I.viewport&&(I.viewport.style.scrollBehavior="auto"),Z(re))}),onPointerMove:rr(e.onPointerMove,Z),onPointerUp:rr(e.onPointerUp,re=>{const ne=re.target;ne.hasPointerCapture(re.pointerId)&&ne.releasePointerCapture(re.pointerId),document.body.style.webkitUserSelect=z.current,I.viewport&&(I.viewport.style.scrollBehavior=""),N.current=null})})})}),k1="ScrollAreaThumb",mW=V.forwardRef((e,t)=>{const{forceMount:r,...n}=e,s=fW(k1,e.__scopeScrollArea);return M.jsx(qa,{present:r||s.hasThumb,children:M.jsx(SPe,{ref:t,...n})})}),SPe=V.forwardRef((e,t)=>{const{__scopeScrollArea:r,style:n,...s}=e,u=Za(k1,r),h=fW(k1,r),{onThumbPositionChange:m}=h,o=Ur(t,S=>h.onThumbChange(S)),_=V.useRef(),E=pS(()=>{_.current&&(_.current(),_.current=void 0)},100);return V.useEffect(()=>{const S=u.viewport;if(S){const A=()=>{if(E(),!_.current){const I=APe(S,m);_.current=I,m()}};return m(),S.addEventListener("scroll",A),()=>S.removeEventListener("scroll",A)}},[u.viewport,E,m]),M.jsx(vr.div,{"data-state":h.hasThumb?"visible":"hidden",...s,ref:o,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...n},onPointerDownCapture:rr(e.onPointerDownCapture,S=>{const I=S.target.getBoundingClientRect(),R=S.clientX-I.left,k=S.clientY-I.top;h.onThumbPointerDown({x:R,y:k})}),onPointerUp:rr(e.onPointerUp,h.onThumbPointerUp)})});mW.displayName=k1;var FO="ScrollAreaCorner",gW=V.forwardRef((e,t)=>{const r=Za(FO,e.__scopeScrollArea),n=!!(r.scrollbarX&&r.scrollbarY);return r.type!=="scroll"&&n?M.jsx(EPe,{...e,ref:t}):null});gW.displayName=FO;var EPe=V.forwardRef((e,t)=>{const{__scopeScrollArea:r,...n}=e,s=Za(FO,r),[u,h]=V.useState(0),[m,o]=V.useState(0),_=!!(u&&m);return Xp(s.scrollbarX,()=>{var S;const E=((S=s.scrollbarX)==null?void 0:S.offsetHeight)||0;s.onCornerHeightChange(E),o(E)}),Xp(s.scrollbarY,()=>{var S;const E=((S=s.scrollbarY)==null?void 0:S.offsetWidth)||0;s.onCornerWidthChange(E),h(E)}),_?M.jsx(vr.div,{...n,ref:t,style:{width:u,height:m,position:"absolute",right:s.dir==="ltr"?0:void 0,left:s.dir==="rtl"?0:void 0,bottom:0,...e.style}}):null});function D1(e){return e?parseInt(e,10):0}function yW(e,t){const r=e/t;return isNaN(r)?0:r}function fS(e){const t=yW(e.viewport,e.content),r=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,n=(e.scrollbar.size-r)*t;return Math.max(n,18)}function TPe(e,t,r,n="ltr"){const s=fS(r),u=s/2,h=t||u,m=s-h,o=r.scrollbar.paddingStart+h,_=r.scrollbar.size-r.scrollbar.paddingEnd-m,E=r.content-r.viewport,S=n==="ltr"?[0,E]:[E*-1,0];return vW([o,_],S)(e)}function TB(e,t,r="ltr"){const n=fS(t),s=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,u=t.scrollbar.size-s,h=t.content-t.viewport,m=u-n,o=r==="ltr"?[0,h]:[h*-1,0],_=IP(e,o);return vW([0,h],[0,m])(_)}function vW(e,t){return r=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const n=(t[1]-t[0])/(e[1]-e[0]);return t[0]+n*(r-e[0])}}function _W(e,t){return e>0&&e<t}var APe=(e,t=()=>{})=>{let r={left:e.scrollLeft,top:e.scrollTop},n=0;return function s(){const u={left:e.scrollLeft,top:e.scrollTop},h=r.left!==u.left,m=r.top!==u.top;(h||m)&&t(),r=u,n=window.requestAnimationFrame(s)}(),()=>window.cancelAnimationFrame(n)};function pS(e,t){const r=si(e),n=V.useRef(0);return V.useEffect(()=>()=>window.clearTimeout(n.current),[]),V.useCallback(()=>{window.clearTimeout(n.current),n.current=window.setTimeout(r,t)},[r,t])}function Xp(e,t){const r=si(t);Wi(()=>{let n=0;if(e){const s=new ResizeObserver(()=>{cancelAnimationFrame(n),n=window.requestAnimationFrame(r)});return s.observe(e),()=>{window.cancelAnimationFrame(n),s.unobserve(e)}}},[e,r])}function PPe(e,t){const{asChild:r,children:n}=e;if(!r)return typeof t=="function"?t(n):t;const s=V.Children.only(n);return V.cloneElement(s,{children:typeof t=="function"?t(s.props.children):t})}var xW=cW,CPe=dW,MPe=gW;const UO=V.forwardRef(({className:e,children:t,...r},n)=>M.jsxs(xW,{ref:n,className:Wt("relative overflow-hidden",e),...r,children:[M.jsx(CPe,{className:"h-full w-full rounded-[inherit]",children:t}),M.jsx(bW,{}),M.jsx(MPe,{})]}));UO.displayName=xW.displayName;const bW=V.forwardRef(({className:e,orientation:t="vertical",...r},n)=>M.jsx(BO,{ref:n,orientation:t,className:Wt("flex touch-none select-none transition-colors",t==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",t==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",e),...r,children:M.jsx(mW,{className:"relative flex-1 rounded-full bg-border"})}));bW.displayName=BO.displayName;const IPe=e_("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function AB({className:e,variant:t,...r}){return M.jsx("div",{className:Wt(IPe({variant:t}),e),...r})}var VO="Checkbox",[OPe,UCe]=gh(VO),[kPe,DPe]=OPe(VO),wW=V.forwardRef((e,t)=>{const{__scopeCheckbox:r,name:n,checked:s,defaultChecked:u,required:h,disabled:m,value:o="on",onCheckedChange:_,form:E,...S}=e,[A,I]=V.useState(null),R=Ur(t,U=>I(U)),k=V.useRef(!1),L=A?E||!!A.closest("form"):!0,[N=!1,z]=Au({prop:s,defaultProp:u,onChange:_}),F=V.useRef(N);return V.useEffect(()=>{const U=A==null?void 0:A.form;if(U){const W=()=>z(F.current);return U.addEventListener("reset",W),()=>U.removeEventListener("reset",W)}},[A,z]),M.jsxs(kPe,{scope:r,state:N,disabled:m,children:[M.jsx(vr.button,{type:"button",role:"checkbox","aria-checked":Su(N)?"mixed":N,"aria-required":h,"data-state":TW(N),"data-disabled":m?"":void 0,disabled:m,value:o,...S,ref:R,onKeyDown:rr(e.onKeyDown,U=>{U.key==="Enter"&&U.preventDefault()}),onClick:rr(e.onClick,U=>{z(W=>Su(W)?!0:!W),L&&(k.current=U.isPropagationStopped(),k.current||U.stopPropagation())})}),L&&M.jsx(RPe,{control:A,bubbles:!k.current,name:n,value:o,checked:N,required:h,disabled:m,form:E,style:{transform:"translateX(-100%)"},defaultChecked:Su(u)?!1:u})]})});wW.displayName=VO;var SW="CheckboxIndicator",EW=V.forwardRef((e,t)=>{const{__scopeCheckbox:r,forceMount:n,...s}=e,u=DPe(SW,r);return M.jsx(qa,{present:n||Su(u.state)||u.state===!0,children:M.jsx(vr.span,{"data-state":TW(u.state),"data-disabled":u.disabled?"":void 0,...s,ref:t,style:{pointerEvents:"none",...e.style}})})});EW.displayName=SW;var RPe=e=>{const{control:t,checked:r,bubbles:n=!0,defaultChecked:s,...u}=e,h=V.useRef(null),m=tU(r),o=X4(t);V.useEffect(()=>{const E=h.current,S=window.HTMLInputElement.prototype,I=Object.getOwnPropertyDescriptor(S,"checked").set;if(m!==r&&I){const R=new Event("click",{bubbles:n});E.indeterminate=Su(r),I.call(E,Su(r)?!1:r),E.dispatchEvent(R)}},[m,r,n]);const _=V.useRef(Su(r)?!1:r);return M.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:s??_.current,...u,tabIndex:-1,ref:h,style:{...e.style,...o,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function Su(e){return e==="indeterminate"}function TW(e){return Su(e)?"indeterminate":e?"checked":"unchecked"}var AW=wW,LPe=EW;const PW=V.forwardRef(({className:e,...t},r)=>M.jsx(AW,{ref:r,className:Wt("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...t,children:M.jsx(LPe,{className:Wt("flex items-center justify-center text-current"),children:M.jsx(P4,{className:"h-4 w-4"})})}));PW.displayName=AW.displayName;const jPe=({active:e,payload:t})=>e&&t&&t.length?M.jsxs("div",{className:"custom-tooltip bg-white p-2 border border-gray-200 rounded-md shadow-md",children:[M.jsx("p",{className:"font-medium",children:t[0].payload.name}),M.jsxs("p",{className:"text-sm text-gray-600",children:[t[0].name,": ",t[0].value.toFixed(2)]}),M.jsxs("p",{className:"text-sm text-gray-600",children:[t[1].name,": ",t[1].value.toFixed(2)]})]}):null,pA=[{id:"BELONG",name:"Sense of Belonging"},{id:"BULLIED",name:"Exposure to Bullying"},{id:"PV1MATH",name:"Math Performance"},{id:"ESCS",name:"Socioeconomic Status"}],zPe=({countryData:e,selectedCountries:t,loading:r})=>{const[n,s]=V.useState(0),[u,h]=V.useState(null),[m,o]=V.useState(["BELONG","BULLIED","PV1MATH","ESCS"]),[_,E]=V.useState(3),[S,A]=V.useState("ESCS"),[I,R]=V.useState(!0),k=V.useMemo(()=>{const re=[];for(let ne=0;ne<m.length;ne++)for(let ue=ne+1;ue<m.length;ue++)re.push([m[ne],m[ue]]);return re},[m]),L=Math.ceil(k.length/_),N=k.slice(n*_,(n+1)*_),z=()=>s(re=>(re+1)%L),F=()=>s(re=>(re-1+L)%L),U=(re,ne)=>!e||Object.keys(e).length===0?[]:Object.values(e).filter(ue=>{const fe=ue[re],Ee=ue[ne],Se=ue[S];return typeof fe=="number"&&!isNaN(fe)&&typeof Ee=="number"&&!isNaN(Ee)&&typeof Se=="number"&&!isNaN(Se)}).map(ue=>({x:ue[re],y:ue[ne],colorValue:ue[S],name:ue.CountryName||ue.CNT,code:ue.CNT,isSelected:t.includes(ue.CNT)})),W=re=>{if(!I||re.length<2)return null;const ne=re.length;let ue=0,fe=0,Ee=0,Se=0;re.forEach(Pe=>{ue+=Pe.x,fe+=Pe.y,Ee+=Pe.x*Pe.y,Se+=Pe.x*Pe.x});const je=(ne*Ee-ue*fe)/(ne*Se-ue*ue),Le=(fe-je*ue)/ne,Ue=Math.min(...re.map(Pe=>Pe.x)),we=Math.max(...re.map(Pe=>Pe.x));return[{x:Ue,y:je*Ue+Le},{x:we,y:je*we+Le}]},Y=(re,ne,ue)=>{const fe=(re-ne)/(ue-ne),Ee=fe>.5?255:Math.round(fe*2*255),Se=50,je=fe<.5?255:Math.round((1-fe)*2*255);return`rgb(${Ee}, ${Se}, ${je})`},Q=re=>{o(ne=>ne.includes(re)?ne.length<=2?ne:ne.filter(ue=>ue!==re):[...ne,re]),s(0)},Z=re=>{E(parseInt(re)),s(0)};return r?M.jsx("div",{className:"flex items-center justify-center h-[500px]",children:M.jsx("p",{className:"text-muted-foreground",children:"Loading data..."})}):Object.keys(e).length===0?M.jsxs("div",{className:"flex flex-col items-center justify-center h-[500px] gap-2",children:[M.jsx(mP,{className:"h-6 w-6 text-amber-500"}),M.jsx("p",{className:"text-muted-foreground",children:"No data available for correlation analysis"}),M.jsx("p",{className:"text-xs text-muted-foreground",children:"This might be due to a data loading error"})]}):M.jsxs(_n,{className:"w-full",children:[M.jsxs(oa,{className:"pb-3",children:[M.jsxs("div",{className:"flex justify-between items-center",children:[M.jsxs("div",{children:[M.jsx(aa,{className:"text-lg font-semibold",children:"Correlation Grid Explorer"}),M.jsx(La,{children:"Explore relationships between your chosen variables across countries"})]}),M.jsxs("div",{className:"flex gap-2",children:[M.jsx(Is,{variant:"outline",size:"icon",onClick:F,disabled:n===0,className:"h-8 w-8",children:M.jsx(aK,{className:"h-4 w-4"})}),M.jsxs(Is,{variant:"outline",size:"sm",disabled:!0,className:"h-8 pointer-events-none",children:[n+1," / ",L||1]}),M.jsx(Is,{variant:"outline",size:"icon",onClick:z,disabled:n===L-1||L===0,className:"h-8 w-8",children:M.jsx(Wc,{className:"h-4 w-4"})})]})]}),M.jsx("div",{className:"flex flex-col gap-3 mt-2",children:M.jsxs("div",{className:"flex flex-wrap justify-between gap-2",children:[M.jsxs("div",{className:"flex items-center gap-2",children:[M.jsx("span",{className:"text-sm font-medium",children:"Variables:"}),M.jsx(UO,{className:"flex gap-1",children:M.jsx("div",{className:"flex gap-1 py-1",children:pA.map(re=>M.jsxs(AB,{variant:m.includes(re.id)?"default":"outline",className:`cursor-pointer flex items-center gap-1 ${m.includes(re.id)?"":"opacity-60"}`,onClick:()=>Q(re.id),children:[re.name,m.includes(re.id)&&m.length>2&&M.jsx(lI,{className:"h-3 w-3 ml-1"})]},re.id))})})]}),M.jsxs("div",{className:"flex items-center gap-2",children:[M.jsxs(qU,{value:_.toString(),onValueChange:Z,children:[M.jsx(PI,{className:"w-[130px] h-8",children:M.jsx(HU,{placeholder:"Layout"})}),M.jsxs(CI,{children:[M.jsx(Ra,{value:"1",children:"1 plot"}),M.jsx(Ra,{value:"2",children:"2 plots"}),M.jsx(Ra,{value:"3",children:"3 plots"}),M.jsx(Ra,{value:"4",children:"4 plots"}),M.jsx(Ra,{value:"6",children:"6 plots"})]})]}),M.jsxs("div",{className:"flex items-center space-x-2",children:[M.jsx(PW,{id:"trend-line",checked:I,onCheckedChange:()=>R(!I)}),M.jsx("label",{htmlFor:"trend-line",className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"Trend line"})]})]})]})})]}),M.jsxs(xn,{children:[M.jsx("div",{className:`grid grid-cols-1 ${_>=2?"md:grid-cols-2":""} ${_>=3?"lg:grid-cols-3":""} gap-4`,children:N.map(([re,ne])=>{var rt,$e;const ue=U(re,ne),fe=W(ue),Ee=RAe(Object.values(e),re,ne),Se=`${re}-${ne}`,je=((rt=pA.find(Ge=>Ge.id===re))==null?void 0:rt.name)||re,Le=(($e=pA.find(Ge=>Ge.id===ne))==null?void 0:$e.name)||ne,Ue=ue.map(Ge=>Ge.colorValue),we=Math.min(...Ue),Pe=Math.max(...Ue);return M.jsxs("div",{className:`border rounded-md p-2 h-[280px] ${u===Se?"ring-2 ring-primary/50":""}`,onMouseEnter:()=>h(Se),onMouseLeave:()=>h(null),children:[M.jsxs("div",{className:"flex justify-between items-center mb-1",children:[M.jsxs("span",{className:"text-xs font-medium",children:[je," vs ",Le]}),M.jsxs(AB,{variant:Ee<0?"destructive":"default",className:"text-xs",children:["Correlation: ",Ee.toFixed(2)]})]}),M.jsx(_u,{width:"100%",height:"90%",children:M.jsxs(MG,{margin:{top:10,right:10,bottom:30,left:30},children:[M.jsx(Yl,{strokeDasharray:"3 3",opacity:.2}),M.jsx($a,{type:"number",dataKey:"x",name:je,domain:["auto","auto"],label:{value:je,position:"bottom",offset:10,fontSize:10},tick:{fontSize:10}}),M.jsx(Fa,{type:"number",dataKey:"y",name:Le,domain:["auto","auto"],label:{value:Le,angle:-90,position:"insideLeft",offset:-10,fontSize:10},tick:{fontSize:10}}),M.jsx(Fi,{content:M.jsx(jPe,{}),cursor:{strokeDasharray:"3 3"}}),fe&&M.jsx(wu,{segment:fe,stroke:"#000",strokeDasharray:"3 3",ifOverflow:"extendDomain"}),M.jsx(Ou,{name:"Countries",data:ue.filter(Ge=>!Ge.isSelected),fill:"#8884d8",fillOpacity:.6,shape:Ge=>{const{cx:Re,cy:at,fill:Et,payload:vt}=Ge;return M.jsx("circle",{cx:Re,cy:at,r:4,fill:Y(vt.colorValue,we,Pe),fillOpacity:.7})},className:"opacity-60 hover:opacity-80",isAnimationActive:!1}),t.length>0&&M.jsx(Ou,{name:"Selected Countries",data:ue.filter(Ge=>Ge.isSelected),fill:"#ff7300",stroke:"#ff7300",strokeWidth:1,shape:"circle",isAnimationActive:!1})]})})]},Se)})}),k.length===0&&M.jsxs("div",{className:"flex flex-col items-center justify-center h-[200px] gap-2",children:[M.jsx(mP,{className:"h-6 w-6 text-amber-500"}),M.jsx("p",{className:"text-muted-foreground",children:"Select at least 2 variables to see correlation plots"})]})]})]})},PB=["BELONG","BULLIED","FAMSUP","STRESAGR","EMOCOAGR","EMPATAGR"],CB=["ESCS","HISEI","HISCED","HOMEPOS","PAREDINT"],mA=["PV1MATH","PV1READ","PV10SCIE"],MB={BELONG:"Sense of Belonging",BULLIED:"Exposure to Bullying",FAMSUP:"Family Support",STRESAGR:"School Stress",EMOCOAGR:"Emotional Control",EMPATAGR:"Empathy",ESCS:"Socioeconomic Status",HISEI:"Highest Occupational Status",HISCED:"Highest Education Level",HOMEPOS:"Home Possessions",PAREDINT:"Parental Interest",PV1MATH:"Math Performance",PV1READ:"Reading Performance",PV10SCIE:"Science Performance"},NPe=({countryData:e,selectedCountries:t,loading:r})=>{const[n,s]=be.useState("performance"),u=S=>t.length===0||!e||Object.keys(e).length===0?[]:[...t.filter(R=>e[R]&&typeof e[R].PV1MATH=="number"&&!isNaN(e[R].PV1MATH))].sort((R,k)=>e[k].PV1MATH-e[R].PV1MATH).map(R=>{const k={name:e[R].CountryName||R,code:R};return S.forEach(L=>{e[R]&&typeof e[R][L]=="number"&&!isNaN(e[R][L])?(k[L]=e[R][L],k[`${L}Label`]=MB[L]||L):(k[L]=null,console.log(`No data for ${L} in country ${R}`))}),k}),h=u(mA),m=u(PB),o=u(CB),_=S=>{const A=["#8b5cf6","#10b981","#ef4444","#f59e0b","#3b82f6","#ec4899","#6366f1","#14b8a6","#f43f5e","#84cc16"];return S.map((I,R)=>M.jsx(zo,{dataKey:I,name:MB[I]||I,fill:A[R%A.length],isAnimationActive:!1},I))},E=S=>{switch(S){case"performance":return[0,1];case"wellbeing":return[0,1];case"background":return[0,1];default:return[0,1]}};return r?M.jsx(_n,{className:"w-full",children:M.jsx(xn,{className:"pt-6 flex items-center justify-center h-[500px]",children:M.jsx("div",{className:"text-muted-foreground",children:"Loading data..."})})}):t.length===0?M.jsx(_n,{className:"w-full",children:M.jsx(xn,{className:"pt-6 flex items-center justify-center h-[500px]",children:M.jsxs("div",{className:"text-center",children:[M.jsx("div",{className:"text-muted-foreground mb-2",children:"No countries selected"}),M.jsx("div",{className:"text-sm text-muted-foreground",children:"Please select at least one country to visualize data"})]})})}):(console.log("Performance data:",h),console.log("Performance vars available:",mA.map(S=>h.length>0&&h[0][S]!==null?S:`${S} (missing)`)),M.jsxs(_n,{className:"w-full",children:[M.jsxs(oa,{children:[M.jsx(aa,{className:"text-lg",children:"Feature Comparison"}),M.jsx(La,{children:"Countries sorted by math performance (PV1MATH)"})]}),M.jsx(xn,{className:"p-0",children:M.jsxs(gw,{defaultValue:n,value:n,onValueChange:s,className:"w-full",children:[M.jsx("div",{className:"px-6",children:M.jsxs(n_,{className:"w-full",children:[M.jsx(sl,{value:"performance",className:"flex-1",children:"Performance"}),M.jsx(sl,{value:"wellbeing",className:"flex-1",children:"Well-being"}),M.jsx(sl,{value:"background",className:"flex-1",children:"Background"})]})}),M.jsx(ll,{value:"performance",className:"mt-0",children:M.jsx("div",{className:"h-[500px] w-full pt-4",children:h.length>0?M.jsx(_u,{width:"100%",height:"100%",children:M.jsxs(np,{data:h,margin:{top:20,right:30,left:20,bottom:60},children:[M.jsx(Yl,{strokeDasharray:"3 3",vertical:!1}),M.jsx($a,{dataKey:"name",tick:{fontSize:12},angle:-45,textAnchor:"end",tickMargin:10}),M.jsx(Fa,{tick:{fontSize:12},domain:E("performance"),tickCount:6,label:{value:"Normalized Performance (0-1)",angle:-90,position:"insideLeft",style:{textAnchor:"middle",fontSize:12}}}),M.jsx(Fi,{}),M.jsx(ha,{wrapperStyle:{fontSize:12,bottom:0}}),M.jsx(wu,{y:.5,stroke:"#000",strokeDasharray:"3 3"}),_(mA)]})}):M.jsx("div",{className:"h-full flex items-center justify-center",children:M.jsx("div",{className:"text-muted-foreground",children:"No performance data available for selected countries"})})})}),M.jsx(ll,{value:"wellbeing",className:"mt-0",children:M.jsx("div",{className:"h-[500px] w-full pt-4",children:m.length>0?M.jsx(_u,{width:"100%",height:"100%",children:M.jsxs(np,{data:m,margin:{top:20,right:30,left:20,bottom:60},children:[M.jsx(Yl,{strokeDasharray:"3 3",vertical:!1}),M.jsx($a,{dataKey:"name",tick:{fontSize:12},angle:-45,textAnchor:"end",tickMargin:10}),M.jsx(Fa,{tick:{fontSize:12},domain:E("wellbeing"),tickCount:6,label:{value:"Normalized Well-being (0-1)",angle:-90,position:"insideLeft",style:{textAnchor:"middle",fontSize:12}}}),M.jsx(Fi,{}),M.jsx(ha,{wrapperStyle:{fontSize:12,bottom:0}}),M.jsx(wu,{y:.5,stroke:"#000",strokeDasharray:"3 3"}),_(PB)]})}):M.jsx("div",{className:"h-full flex items-center justify-center",children:M.jsx("div",{className:"text-muted-foreground",children:"No well-being data available for selected countries"})})})}),M.jsx(ll,{value:"background",className:"mt-0",children:M.jsx("div",{className:"h-[500px] w-full pt-4",children:o.length>0?M.jsx(_u,{width:"100%",height:"100%",children:M.jsxs(np,{data:o,margin:{top:20,right:30,left:20,bottom:60},children:[M.jsx(Yl,{strokeDasharray:"3 3",vertical:!1}),M.jsx($a,{dataKey:"name",tick:{fontSize:12},angle:-45,textAnchor:"end",tickMargin:10}),M.jsx(Fa,{tick:{fontSize:12},domain:E("background"),tickCount:6,label:{value:"Normalized Background (0-1)",angle:-90,position:"insideLeft",style:{textAnchor:"middle",fontSize:12}}}),M.jsx(Fi,{}),M.jsx(ha,{wrapperStyle:{fontSize:12,bottom:0}}),M.jsx(wu,{y:.5,stroke:"#000",strokeDasharray:"3 3"}),_(CB)]})}):M.jsx("div",{className:"h-full flex items-center justify-center",children:M.jsx("div",{className:"text-muted-foreground",children:"No background data available for selected countries"})})})})]})})]}))},BPe=({active:e,payload:t,label:r})=>e&&t&&t.length?M.jsxs("div",{className:"custom-tooltip bg-white p-3 border border-gray-200 rounded-md shadow-md",children:[M.jsx("p",{className:"font-medium",children:t[0].payload.name}),M.jsxs("p",{className:"text-sm",children:["PC1: ",t[0].payload.x.toFixed(2)]}),M.jsxs("p",{className:"text-sm",children:["PC2: ",t[0].payload.y.toFixed(2)]}),M.jsxs("p",{className:"text-sm",children:["Well-being: ",t[0].payload.z.toFixed(2)]})]}):null,$Pe=({countryData:e,selectedCountries:t,loading:r})=>{const n=V.useMemo(()=>!e||Object.keys(e).length===0?(console.log("No country data available for PCA plot"),[]):Object.values(e).filter(s=>{const u=s.X,h=s.Y,m=typeof u=="number"&&!isNaN(u)&&typeof h=="number"&&!isNaN(h);return!m&&s.X!==void 0&&console.log(`Filtering out country with invalid PCA data: ${s.CNT}`,{xValue:u,yValue:h}),m}).map(s=>({name:s.CountryName||s.CNT,code:s.CNT,x:s.X,y:s.Y,z:s.OWB||0,isSelected:t.includes(s.CNT)})),[e,t]);return console.log("PCA plot data:",{dataLength:n.length,sampleData:n.slice(0,3)}),r?M.jsx("div",{className:"flex items-center justify-center h-full",children:M.jsx("p",{className:"text-muted-foreground",children:"Loading data..."})}):n.length===0?M.jsxs("div",{className:"flex flex-col items-center justify-center h-full gap-2",children:[M.jsx(mP,{className:"h-6 w-6 text-amber-500"}),M.jsx("p",{className:"text-muted-foreground",children:"No PCA data available"}),M.jsx("p",{className:"text-xs text-muted-foreground",children:"This might be due to missing X and Y coordinates in the data"})]}):M.jsx("div",{className:"h-full w-full",children:M.jsx(_u,{width:"100%",height:"100%",children:M.jsxs(MG,{margin:{top:20,right:30,bottom:60,left:50},children:[M.jsx(Yl,{strokeDasharray:"3 3",opacity:.2}),M.jsx($a,{type:"number",dataKey:"x",name:"Principal Component 1",domain:["dataMin","dataMax"],tick:!1,children:M.jsx(Ri,{value:"Principal Component 1",position:"bottom",offset:20})}),M.jsx(Fa,{type:"number",dataKey:"y",name:"Principal Component 2",domain:["dataMin","dataMax"],tick:!1,children:M.jsx(Ri,{value:"Principal Component 2",angle:-90,position:"left",style:{textAnchor:"middle"},offset:-30})}),M.jsx(m_,{type:"number",dataKey:"z",range:[50,400],name:"Well-being Score"}),M.jsx(Fi,{content:M.jsx(BPe,{})}),M.jsx(ha,{layout:"horizontal",verticalAlign:"top",align:"center",height:36,wrapperStyle:{paddingBottom:10}}),M.jsx(Ou,{name:"All Countries",data:n.filter(s=>!s.isSelected),fill:"#8884d8",opacity:.6,shape:s=>{const{cx:u,cy:h,fill:m,opacity:o}=s;return M.jsx("circle",{cx:u,cy:h,r:6,stroke:"none",fill:m,fillOpacity:o})}}),t.length>0&&M.jsx(Ou,{name:"Selected Countries",data:n.filter(s=>s.isSelected),fill:"#ff7300",shape:"circle",opacity:1})]})})})},FPe=()=>{const[e,t]=V.useState("BELONG"),[r,n]=V.useState(["FIN","NOR","ISL","GBR"]),[s,u]=V.useState("map"),[h,m]=V.useState(!1),[o,_]=V.useState(!0),{data:E,loading:S,error:A}=DG(),I=E.length>0?RG(E):[],R=I.length>0?LG(I):{},k=U=>{n(W=>W.includes(U)?W.filter(Y=>Y!==U):W.length<10?[...W,U]:W)},L={BELONG:{title:"Sense of belonging at school (BELONG)",description:"This index measures students' sense of belonging and connectedness to their school environment. It is derived from students' responses to questions about feeling accepted, liked, and part of the school community.",interpretation:"Higher values indicate a stronger sense of belonging. The index is standardized with an OECD average of 0 and a standard deviation of 1. Positive values indicate an above-average sense of belonging, while negative values indicate below-average levels.",significance:"Research shows that students' sense of belonging is associated with higher academic motivation, better academic performance, and improved psychological well-being."},BULLIED:{title:"Exposure to bullying (BULLIED)",description:"This index measures students' experiences with different forms of bullying. It is based on responses to questions about being made fun of, being excluded, being threatened, or having possessions taken or destroyed.",interpretation:"Higher values indicate more frequent exposure to bullying. The index is standardized with an OECD average of 0. Positive values indicate above-average bullying exposure, while negative values indicate below-average exposure.",significance:"Bullying can negatively impact students' mental health, academic performance, and overall well-being. Lower values on this index are associated with better school climates."},PV1MATH:{title:"Mathematics Performance (PV1MATH)",description:"This is the first plausible value for students' performance in mathematics. It represents student achievement in mathematical literacy as assessed in the PISA test.",interpretation:"Scores are standardized across OECD countries with a mean of approximately 500 points and a standard deviation of 100. Higher scores indicate better mathematics performance.",significance:"Mathematics performance is an important indicator of students' ability to formulate, employ, and interpret mathematics in various contexts and to use mathematical reasoning to solve real-world problems."},PV1READ:{title:"Reading Performance (PV1READ)",description:"This is the first plausible value for students' performance in reading. It represents student achievement in reading literacy as assessed in the PISA test.",interpretation:"Scores are standardized across OECD countries with a mean of approximately 500 points and a standard deviation of 100. Higher scores indicate better reading performance.",significance:"Reading performance is an important indicator of students' ability to understand, use, reflect on and engage with written texts, in order to achieve one's goals, develop one's knowledge and potential, and participate in society."},PV10SCIE:{title:"Science Performance (PV10SCIE)",description:"This is the first plausible value for students' performance in science. It represents student achievement in scientific literacy as assessed in the PISA test.",interpretation:"Scores are standardized across OECD countries with a mean of approximately 500 points and a standard deviation of 100. Higher scores indicate better science performance.",significance:"Science performance is an important indicator of students' ability to engage with science-related issues, and with the ideas of science, as a reflective citizen."},OWB:{title:"Overall Well-being (OWB)",description:"This is a composite index derived from Principal Component Analysis of multiple well-being indicators including sense of belonging, bullying exposure, and other socio-emotional factors.",interpretation:"Higher values indicate better overall well-being. The index is standardized with a mean of 0 and a standard deviation of 1. Positive values indicate above-average well-being, while negative values indicate below-average well-being.",significance:"Overall well-being is associated with better academic performance, better mental health outcomes, and better social integration in school environments."}},N=r.map(U=>{const W=M1.find(Y=>Y.code===U);return W||{code:U,name:U}}),z=(U,W)=>R[U]?R[U][W]:null,F=()=>{const U=[...N].sort((W,Y)=>{const Q=z(W.code,e),Z=z(Y.code,e);return Q===null&&Z===null?0:Q===null?1:Z===null?-1:Z-Q});return M.jsx(UO,{className:"h-full w-full",children:M.jsxs(oW,{children:[M.jsx(aW,{children:M.jsxs(by,{children:[M.jsx(cM,{className:"w-[180px]",children:"Country"}),M.jsx(cM,{children:e})]})}),M.jsx(sW,{children:S?M.jsx(by,{children:M.jsx(wy,{colSpan:2,className:"text-center",children:"Loading data..."})}):U.length===0?M.jsx(by,{children:M.jsx(wy,{colSpan:2,className:"text-center",children:"No countries selected"})}):U.map(W=>M.jsxs(by,{className:"cursor-pointer hover:bg-muted/20",onClick:()=>k(W.code),children:[M.jsx(wy,{className:"font-medium",children:W.name}),M.jsx(wy,{children:z(W.code,e)!==null&&typeof z(W.code,e)=="number"?z(W.code,e).toFixed(2):"No data"})]},W.code))})]})})};return M.jsxs("div",{className:"flex-1 p-4 md:p-6 overflow-y-auto bg-gray-50",children:[h&&M.jsx("div",{className:"container mx-auto mb-6",children:M.jsxs(Is,{variant:"outline",onClick:()=>m(!1),className:"flex items-center gap-2 mb-4",children:[M.jsx(pP,{className:"h-4 w-4"}),"Hide Introduction"]})}),M.jsxs("div",{className:"container mx-auto",children:[M.jsxs("div",{className:"mb-6",id:"data-explorer",children:[M.jsx("h1",{className:"text-3xl font-bold mb-2 text-gray-800",children:"Denmark in a European context"}),M.jsx("p",{className:"text-muted-foreground",children:"Select countries & indicators on the map to explore patterns in educational outcomes across Europe."}),S&&M.jsx("p",{className:"text-muted-foreground mt-2",children:"Loading data..."}),A&&M.jsxs("p",{className:"text-red-500 mt-2",children:["Error: ",A]})]}),M.jsxs(_n,{className:"mb-6",children:[M.jsxs(oa,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[M.jsxs("div",{children:[M.jsx(aa,{className:"text-xl",children:"PISA 2022 Indicators"}),M.jsx(La,{children:"Explore educational well-being across Europe"})]}),M.jsx("div",{className:"flex items-center gap-4",children:M.jsxs("div",{className:"flex items-center gap-2",children:[M.jsx("span",{className:"text-sm",children:"Variable:"}),M.jsxs(qU,{value:e,onValueChange:t,children:[M.jsx(PI,{className:"w-[180px]",children:M.jsx(HU,{})}),M.jsxs(CI,{children:[M.jsx(Ra,{value:"BELONG",children:"Sense of Belonging"}),M.jsx(Ra,{value:"BULLIED",children:"Exposure to Bullying"}),M.jsx(Ra,{value:"PV1MATH",children:"Math Performance"}),M.jsx(Ra,{value:"PV1READ",children:"Reading Performance"}),M.jsx(Ra,{value:"PV10SCIE",children:"Science Performance"}),M.jsx(Ra,{value:"OWB",children:"Overall Well-being"})]})]})]})})]}),M.jsx(xn,{children:M.jsxs(gw,{value:s,onValueChange:u,children:[M.jsxs(n_,{className:"mb-4",children:[M.jsxs(sl,{value:"map",className:"flex items-center gap-2",children:[M.jsx(t_,{className:"h-4 w-4"}),"Map View"]}),M.jsxs(sl,{value:"chart",className:"flex items-center gap-2",children:[M.jsx(iK,{className:"h-4 w-4"}),"Chart View"]})]}),M.jsx(ll,{value:"map",className:"pt-2",children:M.jsx("div",{className:"min-h-[500px] border rounded-md overflow-hidden",children:M.jsxs(SB,{direction:"horizontal",className:"min-h-[500px]",children:[M.jsx(I0,{defaultSize:o?70:100,children:M.jsx("div",{className:"h-[500px]",children:M.jsx(zAe,{selectedVariable:e,selectedCountries:r,onCountrySelect:k,countryData:R,loading:S})})}),o&&M.jsxs(M.Fragment,{children:[M.jsx(EB,{withHandle:!0}),M.jsx(I0,{defaultSize:30,children:M.jsxs("div",{className:"h-[500px] p-2",children:[M.jsx("div",{className:"font-medium mb-2",children:"Selected Countries Data"}),M.jsx(F,{})]})})]})]})})}),M.jsx(ll,{value:"chart",className:"pt-2",children:M.jsxs(SB,{direction:"horizontal",className:"min-h-[500px] border rounded-md overflow-hidden",children:[M.jsx(I0,{defaultSize:o?70:100,children:M.jsx("div",{className:"h-[500px]",children:M.jsx(AAe,{variable:e,countries:r,countryData:R,loading:S})})}),o&&M.jsxs(M.Fragment,{children:[M.jsx(EB,{withHandle:!0}),M.jsx(I0,{defaultSize:30,children:M.jsxs("div",{className:"h-[500px] p-2",children:[M.jsx("div",{className:"font-medium mb-2",children:"Selected Countries Data"}),M.jsx(F,{})]})})]})]})})]})})]}),M.jsxs(_n,{className:"mb-6",id:"feature-bar-plots",children:[M.jsxs(oa,{children:[M.jsx(aa,{className:"text-lg",children:"Feature Bar Plots"}),M.jsx(La,{children:"Compare multiple features across selected countries, sorted by math performance"})]}),M.jsx(xn,{className:"p-2 md:p-4",children:M.jsx(NPe,{countryData:R,selectedCountries:r,loading:S})})]}),M.jsxs(_n,{className:"mb-6",id:"pca-plot",children:[M.jsxs(oa,{children:[M.jsx(aa,{className:"text-lg",children:"Principal Component Analysis"}),M.jsx(La,{children:M.jsxs("span",{children:["Explore how countries cluster, and see if they grouped together as you would expect.",M.jsx("br",{}),"Interestingly, Denmark & Ireland are very close, and all Nordic countries are distributed to the right except Finland.",M.jsx("br",{}),M.jsx("br",{}),"Countries you selected on the map are marked with Orange."]})})]}),M.jsx(xn,{className:"p-2 md:p-4",children:M.jsx("div",{className:"h-[400px]",children:M.jsx($Pe,{countryData:R,selectedCountries:r,loading:S})})})]}),M.jsx(_n,{className:"mb-6",id:"correlation-grid",children:M.jsx(xn,{className:"p-2 md:p-4",children:M.jsx(zPe,{countryData:R,selectedCountries:r,loading:S})})}),M.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-6",children:[M.jsxs(_n,{className:"col-span-1",children:[M.jsxs(oa,{children:[M.jsx(aa,{children:"Selected Countries"}),M.jsx(La,{children:"Click on map markers to select countries for comparison"})]}),M.jsx(xn,{children:M.jsx("div",{className:"space-y-2",children:N.length===0?M.jsx("p",{className:"text-muted-foreground text-sm",children:"No countries selected. Click on the map to select countries."}):M.jsx("div",{className:"grid grid-cols-2 gap-2",children:N.map(U=>M.jsxs("div",{className:"border rounded-md p-2 flex items-center justify-between cursor-pointer hover:bg-muted/50",onClick:()=>k(U.code),children:[M.jsx("span",{children:U.name}),M.jsx("span",{className:"text-xs bg-secondary px-1.5 py-0.5 rounded-sm",children:U.code})]},U.code))})})})]}),M.jsxs(_n,{className:"col-span-1 lg:col-span-2",children:[M.jsx(oa,{children:M.jsx(aa,{children:"About This Indicator"})}),M.jsx(xn,{children:M.jsx("div",{className:"space-y-4",children:e in L?M.jsxs(M.Fragment,{children:[M.jsxs("div",{children:[M.jsx("h3",{className:"font-semibold mb-1",children:L[e].title}),M.jsx("p",{className:"text-sm text-muted-foreground",children:L[e].description})]}),M.jsxs("div",{children:[M.jsx("h3",{className:"font-semibold mb-1",children:"Interpretation"}),M.jsx("p",{className:"text-sm text-muted-foreground",children:L[e].interpretation})]}),M.jsxs("div",{children:[M.jsx("h3",{className:"font-semibold mb-1",children:"Significance"}),M.jsx("p",{className:"text-sm text-muted-foreground",children:L[e].significance})]})]}):M.jsx("p",{className:"text-muted-foreground text-sm",children:"Select a variable to see its description."})})})]})]}),M.jsxs(_n,{className:"mb-6",children:[M.jsxs(oa,{children:[M.jsx(aa,{children:"Research Insights"}),M.jsx(La,{children:"Academic analysis of the PISA 2022 results"})]}),M.jsx(xn,{children:M.jsxs("div",{className:"prose max-w-none",children:[M.jsx("p",{className:"text-gray-700",children:"Analysis of the 2022 PISA data reveals several important patterns across European educational systems. The relationship between well-being indicators and academic performance suggests that countries focusing on social-emotional factors tend to achieve better overall outcomes."}),M.jsx("p",{className:"text-gray-700 mt-4",children:"Further research is needed to understand the causal mechanisms behind these relationships, but the data provides valuable insights for policy makers seeking to improve educational systems."}),M.jsx("div",{className:"flex justify-center mt-6",children:M.jsxs(Is,{onClick:()=>m(!0),variant:"outline",className:`${h?"hidden":"flex"} items-center gap-2`,children:[M.jsx(pP,{className:"h-4 w-4"}),"Show Introduction"]})})]})})]})]})]})},gA=768;function UPe(){const[e,t]=V.useState(void 0);return V.useEffect(()=>{const r=window.matchMedia(`(max-width: ${gA-1}px)`),n=()=>{t(window.innerWidth<gA)};return r.addEventListener("change",n),t(window.innerWidth<gA),()=>r.removeEventListener("change",n)},[]),!!e}const CW=V.forwardRef(({className:e,type:t,...r},n)=>M.jsx("input",{type:t,className:Wt("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:n,...r}));CW.displayName="Input";var VPe="Separator",IB="horizontal",GPe=["horizontal","vertical"],MW=V.forwardRef((e,t)=>{const{decorative:r,orientation:n=IB,...s}=e,u=WPe(n)?n:IB,m=r?{role:"none"}:{"aria-orientation":u==="vertical"?u:void 0,role:"separator"};return M.jsx(vr.div,{"data-orientation":u,...m,...s,ref:t})});MW.displayName=VPe;function WPe(e){return GPe.includes(e)}var IW=MW;const OW=V.forwardRef(({className:e,orientation:t="horizontal",decorative:r=!0,...n},s)=>M.jsx(IW,{ref:s,decorative:r,orientation:t,className:Wt("shrink-0 bg-border",t==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",e),...n}));OW.displayName=IW.displayName;var GO="Dialog",[kW,VCe]=gh(GO),[qPe,js]=kW(GO),DW=e=>{const{__scopeDialog:t,children:r,open:n,defaultOpen:s,onOpenChange:u,modal:h=!0}=e,m=V.useRef(null),o=V.useRef(null),[_=!1,E]=Au({prop:n,defaultProp:s,onChange:u});return M.jsx(qPe,{scope:t,triggerRef:m,contentRef:o,contentId:ql(),titleId:ql(),descriptionId:ql(),open:_,onOpenChange:E,onOpenToggle:V.useCallback(()=>E(S=>!S),[E]),modal:h,children:r})};DW.displayName=GO;var RW="DialogTrigger",HPe=V.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,s=js(RW,r),u=Ur(t,s.triggerRef);return M.jsx(vr.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":HO(s.open),...n,ref:u,onClick:rr(e.onClick,s.onOpenToggle)})});HPe.displayName=RW;var WO="DialogPortal",[XPe,LW]=kW(WO,{forceMount:void 0}),jW=e=>{const{__scopeDialog:t,forceMount:r,children:n,container:s}=e,u=js(WO,t);return M.jsx(XPe,{scope:t,forceMount:r,children:V.Children.map(n,h=>M.jsx(qa,{present:r||u.open,children:M.jsx(J1,{asChild:!0,container:s,children:h})}))})};jW.displayName=WO;var R1="DialogOverlay",zW=V.forwardRef((e,t)=>{const r=LW(R1,e.__scopeDialog),{forceMount:n=r.forceMount,...s}=e,u=js(R1,e.__scopeDialog);return u.modal?M.jsx(qa,{present:n||u.open,children:M.jsx(ZPe,{...s,ref:t})}):null});zW.displayName=R1;var ZPe=V.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,s=js(R1,r);return M.jsx(TI,{as:Ga,allowPinchZoom:!0,shards:[s.contentRef],children:M.jsx(vr.div,{"data-state":HO(s.open),...n,ref:t,style:{pointerEvents:"auto",...n.style}})})}),hh="DialogContent",NW=V.forwardRef((e,t)=>{const r=LW(hh,e.__scopeDialog),{forceMount:n=r.forceMount,...s}=e,u=js(hh,e.__scopeDialog);return M.jsx(qa,{present:n||u.open,children:u.modal?M.jsx(KPe,{...s,ref:t}):M.jsx(YPe,{...s,ref:t})})});NW.displayName=hh;var KPe=V.forwardRef((e,t)=>{const r=js(hh,e.__scopeDialog),n=V.useRef(null),s=Ur(t,r.contentRef,n);return V.useEffect(()=>{const u=n.current;if(u)return nU(u)},[]),M.jsx(BW,{...e,ref:s,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:rr(e.onCloseAutoFocus,u=>{var h;u.preventDefault(),(h=r.triggerRef.current)==null||h.focus()}),onPointerDownOutside:rr(e.onPointerDownOutside,u=>{const h=u.detail.originalEvent,m=h.button===0&&h.ctrlKey===!0;(h.button===2||m)&&u.preventDefault()}),onFocusOutside:rr(e.onFocusOutside,u=>u.preventDefault())})}),YPe=V.forwardRef((e,t)=>{const r=js(hh,e.__scopeDialog),n=V.useRef(!1),s=V.useRef(!1);return M.jsx(BW,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:u=>{var h,m;(h=e.onCloseAutoFocus)==null||h.call(e,u),u.defaultPrevented||(n.current||(m=r.triggerRef.current)==null||m.focus(),u.preventDefault()),n.current=!1,s.current=!1},onInteractOutside:u=>{var o,_;(o=e.onInteractOutside)==null||o.call(e,u),u.defaultPrevented||(n.current=!0,u.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const h=u.target;((_=r.triggerRef.current)==null?void 0:_.contains(h))&&u.preventDefault(),u.detail.originalEvent.type==="focusin"&&s.current&&u.preventDefault()}})}),BW=V.forwardRef((e,t)=>{const{__scopeDialog:r,trapFocus:n,onOpenAutoFocus:s,onCloseAutoFocus:u,...h}=e,m=js(hh,r),o=V.useRef(null),_=Ur(t,o);return Q5(),M.jsxs(M.Fragment,{children:[M.jsx(EI,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:s,onUnmountAutoFocus:u,children:M.jsx(Jv,{role:"dialog",id:m.contentId,"aria-describedby":m.descriptionId,"aria-labelledby":m.titleId,"data-state":HO(m.open),...h,ref:_,onDismiss:()=>m.onOpenChange(!1)})}),M.jsxs(M.Fragment,{children:[M.jsx(JPe,{titleId:m.titleId}),M.jsx(eCe,{contentRef:o,descriptionId:m.descriptionId})]})]})}),qO="DialogTitle",$W=V.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,s=js(qO,r);return M.jsx(vr.h2,{id:s.titleId,...n,ref:t})});$W.displayName=qO;var FW="DialogDescription",UW=V.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,s=js(FW,r);return M.jsx(vr.p,{id:s.descriptionId,...n,ref:t})});UW.displayName=FW;var VW="DialogClose",GW=V.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,s=js(VW,r);return M.jsx(vr.button,{type:"button",...n,ref:t,onClick:rr(e.onClick,()=>s.onOpenChange(!1))})});GW.displayName=VW;function HO(e){return e?"open":"closed"}var WW="DialogTitleWarning",[GCe,qW]=vZ(WW,{contentName:hh,titleName:qO,docsSlug:"dialog"}),JPe=({titleId:e})=>{const t=qW(WW),r=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return V.useEffect(()=>{e&&(document.getElementById(e)||console.error(r))},[r,e]),null},QPe="DialogDescriptionWarning",eCe=({contentRef:e,descriptionId:t})=>{const n=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${qW(QPe).contentName}}.`;return V.useEffect(()=>{var u;const s=(u=e.current)==null?void 0:u.getAttribute("aria-describedby");t&&s&&(document.getElementById(t)||console.warn(n))},[n,e,t]),null},tCe=DW,rCe=jW,HW=zW,XW=NW,ZW=$W,KW=UW,nCe=GW;const iCe=tCe,oCe=rCe,YW=V.forwardRef(({className:e,...t},r)=>M.jsx(HW,{className:Wt("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:r}));YW.displayName=HW.displayName;const aCe=e_("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),JW=V.forwardRef(({side:e="right",className:t,children:r,...n},s)=>M.jsxs(oCe,{children:[M.jsx(YW,{}),M.jsxs(XW,{ref:s,className:Wt(aCe({side:e}),t),...n,children:[r,M.jsxs(nCe,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[M.jsx(lI,{className:"h-4 w-4"}),M.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));JW.displayName=XW.displayName;const sCe=V.forwardRef(({className:e,...t},r)=>M.jsx(ZW,{ref:r,className:Wt("text-lg font-semibold text-foreground",e),...t}));sCe.displayName=ZW.displayName;const lCe=V.forwardRef(({className:e,...t},r)=>M.jsx(KW,{ref:r,className:Wt("text-sm text-muted-foreground",e),...t}));lCe.displayName=KW.displayName;function OB({className:e,...t}){return M.jsx("div",{className:Wt("animate-pulse rounded-md bg-muted",e),...t})}const cCe="sidebar:state",uCe=60*60*24*7,dCe="16rem",hCe="18rem",fCe="3rem",pCe="b",QW=V.createContext(null);function g_(){const e=V.useContext(QW);if(!e)throw new Error("useSidebar must be used within a SidebarProvider.");return e}const eq=V.forwardRef(({defaultOpen:e=!0,open:t,onOpenChange:r,className:n,style:s,children:u,...h},m)=>{const o=UPe(),[_,E]=V.useState(!1),[S,A]=V.useState(e),I=t??S,R=V.useCallback(z=>{const F=typeof z=="function"?z(I):z;r?r(F):A(F),document.cookie=`${cCe}=${F}; path=/; max-age=${uCe}`},[r,I]),k=V.useCallback(()=>o?E(z=>!z):R(z=>!z),[o,R,E]);V.useEffect(()=>{const z=F=>{F.key===pCe&&(F.metaKey||F.ctrlKey)&&(F.preventDefault(),k())};return window.addEventListener("keydown",z),()=>window.removeEventListener("keydown",z)},[k]);const L=I?"expanded":"collapsed",N=V.useMemo(()=>({state:L,open:I,setOpen:R,isMobile:o,openMobile:_,setOpenMobile:E,toggleSidebar:k}),[L,I,R,o,_,E,k]);return M.jsx(QW.Provider,{value:N,children:M.jsx(g5,{delayDuration:0,children:M.jsx("div",{style:{"--sidebar-width":dCe,"--sidebar-width-icon":fCe,...s},className:Wt("group/sidebar-wrapper flex min-h-svh w-full has-[[data-variant=inset]]:bg-sidebar",n),ref:m,...h,children:u})})})});eq.displayName="SidebarProvider";const tq=V.forwardRef(({side:e="left",variant:t="sidebar",collapsible:r="offcanvas",className:n,children:s,...u},h)=>{const{isMobile:m,state:o,openMobile:_,setOpenMobile:E}=g_();return r==="none"?M.jsx("div",{className:Wt("flex h-full w-[--sidebar-width] flex-col bg-sidebar text-sidebar-foreground",n),ref:h,...u,children:s}):m?M.jsx(iCe,{open:_,onOpenChange:E,...u,children:M.jsx(JW,{"data-sidebar":"sidebar","data-mobile":"true",className:"w-[--sidebar-width] bg-sidebar p-0 text-sidebar-foreground [&>button]:hidden",style:{"--sidebar-width":hCe},side:e,children:M.jsx("div",{className:"flex h-full w-full flex-col",children:s})})}):M.jsxs("div",{ref:h,className:"group peer hidden md:block text-sidebar-foreground","data-state":o,"data-collapsible":o==="collapsed"?r:"","data-variant":t,"data-side":e,children:[M.jsx("div",{className:Wt("duration-200 relative h-svh w-[--sidebar-width] bg-transparent transition-[width] ease-linear","group-data-[collapsible=offcanvas]:w-0","group-data-[side=right]:rotate-180",t==="floating"||t==="inset"?"group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4))]":"group-data-[collapsible=icon]:w-[--sidebar-width-icon]")}),M.jsx("div",{className:Wt("duration-200 fixed inset-y-0 z-10 hidden h-svh w-[--sidebar-width] transition-[left,right,width] ease-linear md:flex",e==="left"?"left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]":"right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]",t==="floating"||t==="inset"?"p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4)_+2px)]":"group-data-[collapsible=icon]:w-[--sidebar-width-icon] group-data-[side=left]:border-r group-data-[side=right]:border-l",n),...u,children:M.jsx("div",{"data-sidebar":"sidebar",className:"flex h-full w-full flex-col bg-sidebar group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:border-sidebar-border group-data-[variant=floating]:shadow",children:s})})]})});tq.displayName="Sidebar";const rq=V.forwardRef(({className:e,onClick:t,...r},n)=>{const{toggleSidebar:s}=g_();return M.jsxs(Is,{ref:n,"data-sidebar":"trigger",variant:"ghost",size:"icon",className:Wt("h-7 w-7",e),onClick:u=>{t==null||t(u),s()},...r,children:[M.jsx(lK,{}),M.jsx("span",{className:"sr-only",children:"Toggle Sidebar"})]})});rq.displayName="SidebarTrigger";const mCe=V.forwardRef(({className:e,...t},r)=>{const{toggleSidebar:n}=g_();return M.jsx("button",{ref:r,"data-sidebar":"rail","aria-label":"Toggle Sidebar",tabIndex:-1,onClick:n,title:"Toggle Sidebar",className:Wt("absolute inset-y-0 z-20 hidden w-4 -translate-x-1/2 transition-all ease-linear after:absolute after:inset-y-0 after:left-1/2 after:w-[2px] hover:after:bg-sidebar-border group-data-[side=left]:-right-4 group-data-[side=right]:left-0 sm:flex","[[data-side=left]_&]:cursor-w-resize [[data-side=right]_&]:cursor-e-resize","[[data-side=left][data-state=collapsed]_&]:cursor-e-resize [[data-side=right][data-state=collapsed]_&]:cursor-w-resize","group-data-[collapsible=offcanvas]:translate-x-0 group-data-[collapsible=offcanvas]:after:left-full group-data-[collapsible=offcanvas]:hover:bg-sidebar","[[data-side=left][data-collapsible=offcanvas]_&]:-right-2","[[data-side=right][data-collapsible=offcanvas]_&]:-left-2",e),...t})});mCe.displayName="SidebarRail";const gCe=V.forwardRef(({className:e,...t},r)=>M.jsx("main",{ref:r,className:Wt("relative flex min-h-svh flex-1 flex-col bg-background","peer-data-[variant=inset]:min-h-[calc(100svh-theme(spacing.4))] md:peer-data-[variant=inset]:m-2 md:peer-data-[state=collapsed]:peer-data-[variant=inset]:ml-2 md:peer-data-[variant=inset]:ml-0 md:peer-data-[variant=inset]:rounded-xl md:peer-data-[variant=inset]:shadow",e),...t}));gCe.displayName="SidebarInset";const yCe=V.forwardRef(({className:e,...t},r)=>M.jsx(CW,{ref:r,"data-sidebar":"input",className:Wt("h-8 w-full bg-background shadow-none focus-visible:ring-2 focus-visible:ring-sidebar-ring",e),...t}));yCe.displayName="SidebarInput";const nq=V.forwardRef(({className:e,...t},r)=>M.jsx("div",{ref:r,"data-sidebar":"header",className:Wt("flex flex-col gap-2 p-2",e),...t}));nq.displayName="SidebarHeader";const iq=V.forwardRef(({className:e,...t},r)=>M.jsx("div",{ref:r,"data-sidebar":"footer",className:Wt("flex flex-col gap-2 p-2",e),...t}));iq.displayName="SidebarFooter";const vCe=V.forwardRef(({className:e,...t},r)=>M.jsx(OW,{ref:r,"data-sidebar":"separator",className:Wt("mx-2 w-auto bg-sidebar-border",e),...t}));vCe.displayName="SidebarSeparator";const oq=V.forwardRef(({className:e,...t},r)=>M.jsx("div",{ref:r,"data-sidebar":"content",className:Wt("flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden",e),...t}));oq.displayName="SidebarContent";const X0=V.forwardRef(({className:e,...t},r)=>M.jsx("div",{ref:r,"data-sidebar":"group",className:Wt("relative flex w-full min-w-0 flex-col p-2",e),...t}));X0.displayName="SidebarGroup";const Z0=V.forwardRef(({className:e,asChild:t=!1,...r},n)=>{const s=t?Ga:"div";return M.jsx(s,{ref:n,"data-sidebar":"group-label",className:Wt("duration-200 flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium text-sidebar-foreground/70 outline-none ring-sidebar-ring transition-[margin,opa] ease-linear focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0","group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0",e),...r})});Z0.displayName="SidebarGroupLabel";const _Ce=V.forwardRef(({className:e,asChild:t=!1,...r},n)=>{const s=t?Ga:"button";return M.jsx(s,{ref:n,"data-sidebar":"group-action",className:Wt("absolute right-3 top-3.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0","after:absolute after:-inset-2 after:md:hidden","group-data-[collapsible=icon]:hidden",e),...r})});_Ce.displayName="SidebarGroupAction";const K0=V.forwardRef(({className:e,...t},r)=>M.jsx("div",{ref:r,"data-sidebar":"group-content",className:Wt("w-full text-sm",e),...t}));K0.displayName="SidebarGroupContent";const Y0=V.forwardRef(({className:e,...t},r)=>M.jsx("ul",{ref:r,"data-sidebar":"menu",className:Wt("flex w-full min-w-0 flex-col gap-1",e),...t}));Y0.displayName="SidebarMenu";const Zs=V.forwardRef(({className:e,...t},r)=>M.jsx("li",{ref:r,"data-sidebar":"menu-item",className:Wt("group/menu-item relative",e),...t}));Zs.displayName="SidebarMenuItem";const xCe=e_("peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-none ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-[[data-sidebar=menu-action]]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:!size-8 group-data-[collapsible=icon]:!p-2 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0",{variants:{variant:{default:"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground",outline:"bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]"},size:{default:"h-8 text-sm",sm:"h-7 text-xs",lg:"h-12 text-sm group-data-[collapsible=icon]:!p-0"}},defaultVariants:{variant:"default",size:"default"}}),Ks=V.forwardRef(({asChild:e=!1,isActive:t=!1,variant:r="default",size:n="default",tooltip:s,className:u,...h},m)=>{const o=e?Ga:"button",{isMobile:_,state:E}=g_(),S=M.jsx(o,{ref:m,"data-sidebar":"menu-button","data-size":n,"data-active":t,className:Wt(xCe({variant:r,size:n}),u),...h});return s?(typeof s=="string"&&(s={children:s}),M.jsxs(K2,{children:[M.jsx(Y2,{asChild:!0,children:S}),M.jsx(y5,{side:"right",align:"center",hidden:E!=="collapsed"||_,...s})]})):S});Ks.displayName="SidebarMenuButton";const bCe=V.forwardRef(({className:e,asChild:t=!1,showOnHover:r=!1,...n},s)=>{const u=t?Ga:"button";return M.jsx(u,{ref:s,"data-sidebar":"menu-action",className:Wt("absolute right-1 top-1.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 peer-hover/menu-button:text-sidebar-accent-foreground [&>svg]:size-4 [&>svg]:shrink-0","after:absolute after:-inset-2 after:md:hidden","peer-data-[size=sm]/menu-button:top-1","peer-data-[size=default]/menu-button:top-1.5","peer-data-[size=lg]/menu-button:top-2.5","group-data-[collapsible=icon]:hidden",r&&"group-focus-within/menu-item:opacity-100 group-hover/menu-item:opacity-100 data-[state=open]:opacity-100 peer-data-[active=true]/menu-button:text-sidebar-accent-foreground md:opacity-0",e),...n})});bCe.displayName="SidebarMenuAction";const wCe=V.forwardRef(({className:e,...t},r)=>M.jsx("div",{ref:r,"data-sidebar":"menu-badge",className:Wt("absolute right-1 flex h-5 min-w-5 items-center justify-center rounded-md px-1 text-xs font-medium tabular-nums text-sidebar-foreground select-none pointer-events-none","peer-hover/menu-button:text-sidebar-accent-foreground peer-data-[active=true]/menu-button:text-sidebar-accent-foreground","peer-data-[size=sm]/menu-button:top-1","peer-data-[size=default]/menu-button:top-1.5","peer-data-[size=lg]/menu-button:top-2.5","group-data-[collapsible=icon]:hidden",e),...t}));wCe.displayName="SidebarMenuBadge";const SCe=V.forwardRef(({className:e,showIcon:t=!1,...r},n)=>{const s=V.useMemo(()=>`${Math.floor(Math.random()*40)+50}%`,[]);return M.jsxs("div",{ref:n,"data-sidebar":"menu-skeleton",className:Wt("rounded-md h-8 flex gap-2 px-2 items-center",e),...r,children:[t&&M.jsx(OB,{className:"size-4 rounded-md","data-sidebar":"menu-skeleton-icon"}),M.jsx(OB,{className:"h-4 flex-1 max-w-[--skeleton-width]","data-sidebar":"menu-skeleton-text",style:{"--skeleton-width":s}})]})});SCe.displayName="SidebarMenuSkeleton";const ECe=V.forwardRef(({className:e,...t},r)=>M.jsx("ul",{ref:r,"data-sidebar":"menu-sub",className:Wt("mx-3.5 flex min-w-0 translate-x-px flex-col gap-1 border-l border-sidebar-border px-2.5 py-0.5","group-data-[collapsible=icon]:hidden",e),...t}));ECe.displayName="SidebarMenuSub";const TCe=V.forwardRef(({...e},t)=>M.jsx("li",{ref:t,...e}));TCe.displayName="SidebarMenuSubItem";const ACe=V.forwardRef(({asChild:e=!1,size:t="md",isActive:r,className:n,...s},u)=>{const h=e?Ga:"a";return M.jsx(h,{ref:u,"data-sidebar":"menu-sub-button","data-size":t,"data-active":r,className:Wt("flex h-7 min-w-0 -translate-x-px items-center gap-2 overflow-hidden rounded-md px-2 text-sidebar-foreground outline-none ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 aria-disabled:pointer-events-none aria-disabled:opacity-50 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0 [&>svg]:text-sidebar-accent-foreground","data-[active=true]:bg-sidebar-accent data-[active=true]:text-sidebar-accent-foreground",t==="sm"&&"text-xs",t==="md"&&"text-sm","group-data-[collapsible=icon]:hidden",n),...s})});ACe.displayName="SidebarMenuSubButton";const PCe=()=>{const{state:e}=g_(),t=r=>{const n=document.getElementById(r);n&&n.scrollIntoView({behavior:"smooth"})};return M.jsxs(tq,{children:[M.jsxs(nq,{className:"flex items-center justify-between",children:[M.jsxs("div",{className:`${e==="collapsed"?"hidden":"block"}`,children:[M.jsx("h2",{className:"font-semibold text-sm",children:"PISA Explorer"}),M.jsx("p",{className:"text-xs text-muted-foreground",children:"Navigation"})]}),M.jsx(rq,{})]}),M.jsxs(oq,{children:[M.jsxs(X0,{children:[M.jsx(Z0,{children:"Introduction"}),M.jsx(K0,{children:M.jsx(Y0,{children:M.jsx(Zs,{children:M.jsxs(Ks,{onClick:()=>t("start-introduction"),tooltip:"Introduction",children:[M.jsx(Wc,{className:"h-4 w-4"}),M.jsx("span",{children:"Overview"})]})})})})]}),M.jsxs(X0,{children:[M.jsx(Z0,{children:"Denmark Analysis"}),M.jsx(K0,{children:M.jsxs(Y0,{children:[M.jsx(Zs,{children:M.jsxs(Ks,{onClick:()=>t("denmark-clusters"),tooltip:"Student Profiles",children:[M.jsx(Wc,{className:"h-4 w-4"}),M.jsx("span",{children:"Student Clusters"})]})}),M.jsx(Zs,{children:M.jsxs(Ks,{onClick:()=>t("denmark-wellbeing"),tooltip:"Student Well-being",children:[M.jsx(Wc,{className:"h-4 w-4"}),M.jsx("span",{children:"Student Well-being"})]})}),M.jsx(Zs,{children:M.jsxs(Ks,{onClick:()=>t("denmark-correlations"),tooltip:"Data Correlations",children:[M.jsx(Wc,{className:"h-4 w-4"}),M.jsx("span",{children:"Key Correlations"})]})}),M.jsx(Zs,{children:M.jsxs(Ks,{onClick:()=>t("denmark-comparison"),tooltip:"Nordic Comparison",children:[M.jsx(Wc,{className:"h-4 w-4"}),M.jsx("span",{children:"Nordic Comparison"})]})})]})})]}),M.jsxs(X0,{children:[M.jsx(Z0,{children:"Interactive Exploration"}),M.jsx(K0,{children:M.jsxs(Y0,{children:[M.jsx(Zs,{children:M.jsxs(Ks,{onClick:()=>t("data-explorer"),tooltip:"Data Explorer",children:[M.jsx(cK,{className:"h-4 w-4"}),M.jsx("span",{children:"Data Explorer"})]})}),M.jsx(Zs,{children:M.jsxs(Ks,{onClick:()=>t("feature-bar-plots"),tooltip:"Feature Bar Plots",children:[M.jsx(oK,{className:"h-4 w-4"}),M.jsx("span",{children:"Feature Bar Plots"})]})}),M.jsx(Zs,{children:M.jsxs(Ks,{onClick:()=>t("pca-plot"),tooltip:"PCA Plot",children:[M.jsx(Wc,{className:"h-4 w-4"}),M.jsx("span",{children:"PCA Plot"})]})}),M.jsx(Zs,{children:M.jsxs(Ks,{onClick:()=>t("correlation-grid"),tooltip:"Correlation Grid",children:[M.jsx(Wc,{className:"h-4 w-4"}),M.jsx("span",{children:"Correlation Grid"})]})})]})})]})]}),M.jsx(iq,{className:`${e==="collapsed"?"hidden":"block"} p-4 text-xs text-muted-foreground`,children:M.jsx("p",{children:"PISA 2022 Data Analysis"})})]})},CCe=()=>{const e="/pisa_2022_visualization";return M.jsx("div",{children:M.jsxs(_n,{className:"mb-8",id:"denmark-correlations",children:[M.jsxs(oa,{children:[M.jsx(aa,{children:"Key Correlations in Danish Student Data"}),M.jsx(La,{children:"Scatter plots showing important relationships between variables"})]}),M.jsxs(xn,{children:[M.jsxs(gw,{defaultValue:"socioeconomic",className:"w-full",children:[M.jsxs(n_,{className:"mb-2",children:[M.jsx(sl,{value:"socioeconomic",children:"Socioeconomic Impact"}),M.jsx(sl,{value:"wellbeing",children:"Well-being Factors"})]}),M.jsxs(ll,{value:"socioeconomic",className:"space-y-2",children:[M.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[M.jsxs("div",{children:[M.jsx("h3",{className:"text-sm font-semibold mb-1",children:"Socioeconomic Status vs. Math"}),M.jsx("div",{className:"aspect-square bg-slate-50 rounded-md overflow-hidden border",children:M.jsx("img",{src:`${e}/danish-students-correlation-plots/ESCS_PV1MATH_scatter.png`,alt:"Scatter plot showing relationship between socioeconomic status and math scores",className:"w-full h-full object-contain p-1"})}),M.jsx("p",{className:"text-xs mt-1 text-gray-600",children:"Positive correlation between socioeconomic status and mathematics performance."})]}),M.jsxs("div",{children:[M.jsx("h3",{className:"text-sm font-semibold mb-1",children:"Socioeconomic Status vs. Reading"}),M.jsx("div",{className:"aspect-square bg-slate-50 rounded-md overflow-hidden border",children:M.jsx("img",{src:`${e}/danish-students-correlation-plots/ESCS_PV1READ_scatter.png`,alt:"Scatter plot showing relationship between socioeconomic status and reading scores",className:"w-full h-full object-contain p-1"})}),M.jsx("p",{className:"text-xs mt-1 text-gray-600",children:"Reading performance shows positive correlation with socioeconomic status."})]}),M.jsxs("div",{children:[M.jsx("h3",{className:"text-sm font-semibold mb-1",children:"Socioeconomic Status vs. Science"}),M.jsx("div",{className:"aspect-square bg-slate-50 rounded-md overflow-hidden border",children:M.jsx("img",{src:`${e}/danish-students-correlation-plots/ESCS_PV10SCIE_scatter.png`,alt:"Scatter plot showing relationship between socioeconomic status and science scores",className:"w-full h-full object-contain p-1"})}),M.jsx("p",{className:"text-xs mt-1 text-gray-600",children:"Science performance also correlates with socioeconomic status."})]})]}),M.jsxs("div",{className:"p-3 bg-blue-50 rounded-md mt-2",children:[M.jsx("h4",{className:"font-semibold text-xs mb-1",children:"Key Insight:"}),M.jsx("p",{className:"text-xs",children:"While there's a clear correlation between socioeconomic status and academic performance across all subjects, the substantial vertical spread at each ESCS level indicates that many students from lower socioeconomic backgrounds still achieve high scores. This suggests that effective educational practices can help overcome socioeconomic disadvantages."})]})]}),M.jsxs(ll,{value:"wellbeing",className:"space-y-2",children:[M.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[M.jsxs("div",{children:[M.jsx("h3",{className:"text-sm font-semibold mb-1",children:"Emotional Regulation vs. Math"}),M.jsx("div",{className:"aspect-square bg-slate-50 rounded-md overflow-hidden border",children:M.jsx("img",{src:`${e}/danish-students-correlation-plots/EMOCOAGR_PV1MATH_scatter.png`,alt:"Scatter plot showing relationship between emotional regulation and math scores",className:"w-full h-full object-contain p-1"})}),M.jsx("p",{className:"text-xs mt-1 text-gray-600",children:"Students with stronger emotional regulation skills tend to perform better in mathematics."})]}),M.jsxs("div",{children:[M.jsx("h3",{className:"text-sm font-semibold mb-1",children:"Stress Resistance vs. Math"}),M.jsx("div",{className:"aspect-square bg-slate-50 rounded-md overflow-hidden border",children:M.jsx("img",{src:`${e}/danish-students-correlation-plots/STRESAGR_PV1MATH_scatter.png`,alt:"Scatter plot showing relationship between stress resistance and math scores",className:"w-full h-full object-contain p-1"})}),M.jsx("p",{className:"text-xs mt-1 text-gray-600",children:"Higher stress resistance correlates with better mathematics performance."})]}),M.jsxs("div",{children:[M.jsx("h3",{className:"text-sm font-semibold mb-1",children:"Stress Resistance vs. Reading"}),M.jsx("div",{className:"aspect-square bg-slate-50 rounded-md overflow-hidden border",children:M.jsx("img",{src:`${e}/danish-students-correlation-plots/STRESAGR_PV1READ_scatter.png`,alt:"Scatter plot showing relationship between stress resistance and reading scores",className:"w-full h-full object-contain p-1"})}),M.jsx("p",{className:"text-xs mt-1 text-gray-600",children:"Vice versa, Reading performance decreases with with higher stress resistance."})]})]}),M.jsxs("div",{className:"p-3 bg-green-50 rounded-md mt-2",children:[M.jsx("h4",{className:"font-semibold text-xs mb-1",children:"Well-being Insight:"}),M.jsx("p",{className:"text-xs",children:"The correlation between social-emotional factors and academic performance is significant. Students who can manage stress and regulate their emotions effectively tend to perform better academically. This underscores the importance of integrating well-being support into educational practices, particularly for students in clusters 4 and 0 who show lower social-emotional indicators."})]})]})]}),M.jsxs("div",{className:"bg-amber-50 p-3 rounded-md mt-4",children:[M.jsx("h3",{className:"font-semibold text-sm mb-1",children:"Implications of Correlation Analysis"}),M.jsxs("ul",{className:"list-disc pl-4 text-xs space-y-1",children:[M.jsxs("li",{children:[M.jsx("strong",{children:"Targeted Support for Low-ESCS Students:"})," While socioeconomic status correlates with performance, the wide spread indicates that targeted educational interventions can help students overcome socioeconomic disadvantages."]}),M.jsxs("li",{children:[M.jsx("strong",{children:"Social-Emotional Learning Integration:"})," The strong relationship between emotional regulation, stress resistance, and academic performance suggests that integrating social-emotional learning into the curriculum could yield academic benefits."]}),M.jsxs("li",{children:[M.jsx("strong",{children:"Cluster-Specific Approaches:"})," Correlations help explain the differences between clusters. For example, Cluster 4's lower mathematics performance despite average socioeconomic status may be linked to lower stress resistance."]})]})]})]})]})})},MCe=()=>{var _,E,S,A,I,R,k,L,N,z,F,U;const{data:e,loading:t}=DG(),r=e.length>0?RG(e):[],n=r.length>0?LG(r):{},s=["DNK","FIN","ISL","NOR","SWE"],u="/pisa_2022_visualization",h=s.map(W=>({name:W==="DNK"?"Denmark":W==="FIN"?"Finland":W==="ISL"?"Iceland":W==="NOR"?"Norway":"Sweden",code:W,...n[W]})),m=h.filter(W=>W&&W.PV1MATH),o=h.filter(W=>W&&W.BELONG&&W.BULLIED).map(W=>({name:W.name,"Sense of Belonging":W.BELONG,"Bullying Exposure (reversed)":W.BULLIED?W.BULLIED:0,"Socioeconomic Status":W.ESCS||0}));return(_=n.DNK)!=null&&_.PV1MATH,(E=n.DNK)!=null&&E.PV1READ,(S=n.DNK)!=null&&S.PV10SCIE,(A=n.DNK)!=null&&A.BELONG&&(n.DNK.BELONG+2)*100,(I=n.DNK)!=null&&I.BULLIED&&(2-n.DNK.BULLIED)*100,(R=n.DNK)!=null&&R.ESCS&&(n.DNK.ESCS+2)*100,M.jsxs("div",{className:"container mx-auto px-4 py-8",id:"denmark-overview",children:[M.jsxs("div",{className:"mb-8",children:[M.jsx("h2",{className:"text-3xl font-bold mb-4",children:"Denmark's PISA Story"}),M.jsx("p",{className:"text-lg text-gray-700 mb-6"})]}),M.jsxs(_n,{className:"mb-8",id:"denmark-clusters",children:[M.jsxs(oa,{children:[M.jsx(aa,{children:"Student Clusters"}),M.jsx(La,{children:"Analysis of distinct student profiles based on performance and well-being indicators"})]}),M.jsxs(xn,{children:[M.jsx("div",{className:"flex justify-center mb-6",children:M.jsx("img",{src:`${u}/t-sne-danish-students.png`,alt:"t-SNE Visualization of Danish Students",className:"max-w-full h-auto rounded-lg shadow-md"})}),M.jsx("p",{className:"mb-6 text-sm text-gray-700",children:"Using clustering analysis, we've identified five distinct student profiles within the Danish PISA data. These clusters help identify different needs and strengths in the student population."}),M.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-6",children:[M.jsx(_n,{className:"bg-emerald-100",children:M.jsxs(xn,{className:"pt-4",children:[M.jsx("h4",{className:"font-semibold text-sm",children:"Average-ESCS Boys with Low Family Support (100% boys)"}),M.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Students in this cluster exhibit slightly above-average socio-economic backgrounds (ESCS = +0.29) but report notably low family support (FAMSUP = -0.27). Despite their adequate socio-economic status, this lack of family backing correlates with below-average academic performance, particularly in mathematics (PV1MATH = 456.51) and reading (PV1READ = 439.03). This cluster is composed exclusively of boys, highlighting a group potentially at risk due to insufficient emotional or practical support at home.               "})]})}),M.jsx(_n,{className:"bg-orange-100",children:M.jsxs(xn,{className:"pt-4",children:[M.jsx("h4",{className:"font-semibold text-sm",children:" High-ESCS Girls, Strong Socio-emotional Skills (100% girls)"}),M.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Cluster 1 represents high socio-economic status students (ESCS = +0.93) composed entirely of girls. These students report good family support (FAMSUP = +0.16) and exceptional empathetic agreement (EMPATAGR = +0.42). Academically, these girls excel particularly in reading (PV1READ = 555.50), indicating that strong socio-emotional skills and family backing contribute significantly to literacy and academic success.        "})]})}),M.jsx(_n,{className:"bg-indigo-100",children:M.jsxs(xn,{className:"pt-4",children:[M.jsx("h4",{className:"font-semibold text-sm",children:"Affluent Boys, High Belonging and Resilience (99% boys)"}),M.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"This small but distinct group is characterized by the highest socio-economic advantage (ESCS = +0.99). Nearly all are boys (99%), with exceptional feelings of belonging (BELONG = +0.51), high emotional agreement (EMOCOAGR = +0.56), and strong stress resilience (STRESAGR = +0.72). They achieve the highest academic performance, particularly notable in mathematics (PV1MATH = 546.00) and science (PV10SCIE = 553.69). Their socio-economic advantage and socio-emotional strength clearly correlate with their outstanding academic outcomes.              "})]})}),M.jsx(_n,{className:"bg-pink-100",children:M.jsxs(xn,{className:"pt-4",children:[M.jsx("h4",{className:"font-semibold text-sm",children:"Low-ESCS, Mixed-Gender Students with Middling Well-being (54% girls)"}),M.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"The largest cluster represents students from significantly lower socio-economic backgrounds (ESCS = -0.68), evenly mixed between boys (54%) and girls (46%). These students report average wellbeing but significantly lower parental educational background (HISCED = 4.32) and occupational status (HISEI = 45.61). Their academic performance is consistently below average across mathematics, reading, and science, pointing towards socio-economic challenges impacting their educational outcomes."})]})}),M.jsx(_n,{className:"bg-lime-100",children:M.jsxs(xn,{className:"pt-4",children:[M.jsx("h4",{className:"font-semibold text-sm",children:"Socially Strained Group, High Incidence of Bullying (98% girls)"}),M.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Cluster 4, predominantly girls, reveals concerning social dynamics. Despite moderate socio-economic status (ESCS = +0.20), students report the highest bullying rates (BULLIED = +0.15), negative belonging (BELONG = -0.23), and poor stress resilience (STRESAGR = -0.32). Consequently, their academic scores, especially in mathematics (PV1MATH = 435.72), lag significantly behind other groups with similar ESCS levels, indicating that bullying and low social support severely undermine academic performance.                "})]})})]}),M.jsx("div",{className:"mt-4",children:M.jsxs("p",{className:"text-m text-gray-700",children:["The student clustering reveals that while Denmark performs well overall, there are a big gap between boys and girls. The gender differences in academic performance patterns at similar socioeconomic levels suggest the need for gender-sensitive teaching approaches. Additionally, the contrast between clusters highlights how social-emotional factors can significantly impact academic outcomes independent of socio-economic status. Educational policies should be differentiated to address the specific needs of each student profile, with particular attention to bolstering support systems for vulnerable groups (Clusters 3 and 4) while providing appropriate challenges for high-achieving students (Clusters 1 and 2).",M.jsx("br",{}),M.jsx("br",{}),M.jsx("b",{children:" Our clusters' relation to related research"}),M.jsx("br",{}),M.jsx("br",{}),"Research suggests a gender disparity in student well-being. Surveys in Denmark have found significant well-being differences between girls and boys For example, Danish studies note that adolescent girls report higher levels of stress and lower life satisfaction compared to boys – echoing a wider “gender well-being gap” observed in many countries [1]",M.jsx("br",{}),M.jsx("br",{}),"Denmark's PISA 2022 results reflect familiar gender patterns seen across Europe. Danish boys scored higher in mathematics (by ~12 points) while girls scored higher in reading (by ~21 points) oecd.org . These gaps align with the international trend: in almost all countries girls outperform boys in reading, and boys often hold a modest lead in math oecd.org hm.ee . Notably, Denmark's gender gap in math is similar to many OECD countries (boys were ahead in roughly half of participating countries) oecd.org . In science, no large gender difference was reported for Denmark, consistent with the general European pattern of minimal gender gaps in science performance.",M.jsx("br",{}),M.jsx("br",{}),"Denmark's education system is comparatively equitable in socioeconomic terms when measured against other OECD and European countries. PISA 2022 showed that the score gap between the most advantaged and most disadvantaged Danish students (top 25% vs bottom 25% by socioeconomic status) was about 74 points in math, significantly smaller than the OECD average gap of 93 points oecd.org. In other words, family background has a somewhat weaker influence on performance in Denmark than in many countries. [2]",M.jsx("br",{}),M.jsx("br",{}),"[1] https://link.springer.com/article/10.1007/s11205-024-03334-7",M.jsx("br",{}),"[2] https://www.oecd.org/en/publications/pisa-2022-results-volume-i-and-ii-country-notes_ed6fbcc5-en/denmark_8b15948c-en.html#:~:text=,across%20OECD%20countries"]})})]})]}),M.jsxs(_n,{className:"mb-8",id:"denmark-wellbeing",children:[M.jsxs(oa,{children:[M.jsx(aa,{children:"Student Well-being in Denmark"}),M.jsx(La,{children:"Analysis of social-emotional factors affecting Danish students"})]}),M.jsxs(xn,{children:[M.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[M.jsx(_n,{children:M.jsxs(xn,{className:"pt-6",children:[M.jsx("h3",{className:"font-semibold mb-2",children:"Sense of Belonging"}),M.jsxs("div",{className:"flex items-baseline",children:[M.jsx("span",{className:"text-3xl font-bold",children:((L=(k=n.DNK)==null?void 0:k.BELONG)==null?void 0:L.toFixed(2))||"N/A"}),M.jsx("span",{className:"ml-2 text-sm text-muted-foreground",children:"index score"})]}),M.jsx("p",{className:"text-sm text-gray-600 mt-2",children:"Danish students report a moderate to high sense of belonging at school. Despite high bullying rates."})]})}),M.jsx(_n,{children:M.jsxs(xn,{className:"pt-6",children:[M.jsx("h3",{className:"font-semibold mb-2",children:"Bullying Exposure"}),M.jsxs("div",{className:"flex items-baseline",children:[M.jsx("span",{className:"text-3xl font-bold",children:((z=(N=n.DNK)==null?void 0:N.BULLIED)==null?void 0:z.toFixed(2))||"N/A"}),M.jsx("span",{className:"ml-2 text-sm text-muted-foreground",children:"index score"})]}),M.jsx("p",{className:"text-sm text-gray-600 mt-2",children:"Denmark shows relatively high bullying rates compared to nordic averages, and is the highest in the Nordics."})]})})]}),M.jsxs("div",{className:"mt-8",children:[M.jsx("h3",{className:"font-semibold mb-4",children:"Socioeconomic Status Impact"}),M.jsxs("p",{className:"text-sm text-gray-700 mb-4",children:["Denmark's education system demonstrates relatively good equity, with socioeconomic status (ESCS index: ",((U=(F=n.DNK)==null?void 0:F.ESCS)==null?void 0:U.toFixed(2))||"N/A",") having less impact on academic outcomes compared to many other countries. Later we will explore the impact of socioeconomic status on academic performance."]})]})]})]}),M.jsx(CCe,{}),M.jsxs(_n,{className:"mb-8",id:"denmark-comparison",children:[M.jsxs(oa,{children:[M.jsx(aa,{children:"Nordic Comparison"}),M.jsx(La,{children:"How Denmark compares to other Nordic countries in key PISA metrics"})]}),M.jsx(xn,{children:M.jsxs(gw,{defaultValue:"academic",children:[M.jsxs(n_,{className:"mb-4",children:[M.jsx(sl,{value:"academic",children:"Academic Performance"}),M.jsx(sl,{value:"wellbeing",children:"Well-being Factors"})]}),M.jsxs(ll,{value:"academic",children:[M.jsx("div",{className:"h-[400px]",children:t?M.jsx("div",{className:"flex h-full w-full items-center justify-center",children:M.jsx("p",{children:"Loading data..."})}):M.jsx(_u,{width:"100%",height:"100%",children:M.jsxs(np,{data:m,margin:{top:20,right:30,left:20,bottom:70},children:[M.jsx(Yl,{strokeDasharray:"3 3"}),M.jsx($a,{dataKey:"name",angle:-45,textAnchor:"end",height:70}),M.jsx(Fa,{domain:[0,1]}),M.jsx(Fi,{}),M.jsx(ha,{}),M.jsx(zo,{name:"Mathematics",dataKey:"PV1MATH",fill:"#8884d8"}),M.jsx(zo,{name:"Reading",dataKey:"PV1READ",fill:"#82ca9d"}),M.jsx(zo,{name:"Science",dataKey:"PV10SCIE",fill:"#ffc658"})]})})}),M.jsxs("div",{className:"mt-6",children:[M.jsx("h4",{className:"font-semibold mb-2",children:"Key Insights"}),M.jsxs("ul",{className:"list-disc pl-5 text-sm text-gray-700 space-y-1",children:[M.jsx("li",{children:"Denmark performs relatively well compared to other Nordic countries, particularly in mathematics"}),M.jsx("li",{children:"There is not a single country which leads on all academic metrics"}),M.jsx("li",{children:"Swedens leads in reading and math, while Finland leads in science"}),M.jsx("li",{children:"Iceland has lowest academic performance but overall best well being scores"})]})]})]}),M.jsxs(ll,{value:"wellbeing",children:[M.jsx("div",{className:"h-[400px]",children:t?M.jsx("div",{className:"flex h-full w-full items-center justify-center",children:M.jsx("p",{children:"Loading data..."})}):M.jsx(_u,{width:"100%",height:"100%",children:M.jsxs(np,{data:o,margin:{top:20,right:30,left:20,bottom:70},children:[M.jsx(Yl,{strokeDasharray:"3 3"}),M.jsx($a,{dataKey:"name",angle:-45,textAnchor:"end",height:70}),M.jsx(Fa,{}),M.jsx(Fi,{}),M.jsx(ha,{}),M.jsx(zo,{name:"Sense of Belonging",dataKey:"Sense of Belonging",fill:"#8884d8"}),M.jsx(zo,{name:"Low Bullying (lower is better)",dataKey:"Bullying Exposure (reversed)",fill:"#82ca9d"}),M.jsx(zo,{name:"Socioeconomic Status",dataKey:"Socioeconomic Status",fill:"#ffc658"})]})})}),M.jsxs("div",{className:"mt-6",children:[M.jsx("h4",{className:"font-semibold mb-2",children:"Well-being Insights"}),M.jsxs("ul",{className:"list-disc pl-5 text-sm text-gray-700 space-y-1",children:[M.jsx("li",{children:"Denmark shows strong results in student well-being relative to its Nordic neighbors"}),M.jsx("li",{children:"Danish students report good sense of belonging, slightly higher than the Nordic average"}),M.jsx("li",{children:"Bullying levels are relatively low in all Nordic countries, with Denmark performing well in this area"}),M.jsx("li",{children:"The Nordic countries generally share similar socioeconomic profiles, allowing for meaningful comparisons"})]})]})]})]})})]}),M.jsxs("div",{className:"border-t pt-6 mt-8 mb-8",children:[M.jsx("h3",{className:"text-xl font-bold mb-4",children:"Key Takeaways about Denmark's PISA Results"}),M.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[M.jsxs("div",{children:[M.jsx("h4",{className:"font-semibold mb-2",children:"Strengths"}),M.jsxs("ul",{className:"list-disc pl-5 text-sm text-gray-700 space-y-1",children:[M.jsxs("li",{children:[M.jsx("strong",{children:"Strong Overall Academic Performance"}),M.jsx("br",{}),"Denmark performs well in mathematics compared to other Nordic countries, with high-performing student clusters (e.g., affluent, resilient boys) scoring above international averages."]}),M.jsxs("li",{children:[M.jsx("strong",{children:"High Socioeconomic Equity"}),M.jsx("br",{}),"The correlation between socioeconomic status and academic performance exists, but is weaker than in many other countries—indicating a relatively equitable education system."]}),M.jsxs("li",{children:[M.jsx("strong",{children:"Well-being and Belonging"}),M.jsx("br",{}),"Students report a moderately high sense of belonging at school, even though bullying rates are concerning."]}),M.jsxs("li",{children:[M.jsx("strong",{children:"High-Achieving Subgroups"}),M.jsx("br",{}),"Certain student clusters, such as High-ESCS Girls and Affluent Boys, demonstrate that a mix of strong socio-emotional skills and family support correlates with excellent academic outcomes."]})]})]}),M.jsxs("div",{children:[M.jsx("h4",{className:"font-semibold mb-2",children:"Areas for Improvement"}),M.jsxs("ul",{className:"list-disc pl-5 text-sm text-gray-700 space-y-1",children:[M.jsxs("li",{children:[M.jsx("strong",{children:"Gender Gaps in Well-being and Performance"}),M.jsx("br",{}),"There are clear disparities between boys and girls. Girls tend to outperform boys in reading and have stronger socio-emotional skills, while some all-boy clusters show low support and underperformance."]}),M.jsxs("li",{children:[M.jsx("strong",{children:"Bullying Incidence"}),M.jsx("br",{}),"Denmark reports the highest bullying exposure in the Nordics, negatively affecting student well-being and academic outcomes—particularly among girls in socially strained groups."]}),M.jsxs("li",{children:[M.jsx("strong",{children:"Low Family Support in Some Clusters"}),M.jsx("br",{}),"Some students, especially boys from average socioeconomic backgrounds, report low family support, correlating with underperformance and emotional strain."]}),M.jsxs("li",{children:[M.jsx("strong",{children:"Stress and Academic Trade-offs"}),M.jsx("br",{}),"Students with higher stress levels perform better in mathematics but worse in reading, highlighting the complex relationship between stress and learning outcomes."]})]})]})]})]}),M.jsx("div",{id:"data-explorer",className:"border-t border-gray-200 pt-8"})]})},ICe=()=>(V.useEffect(()=>{document.title="European PISA Explorer | 2022 Data Analysis"},[]),M.jsx(eq,{children:M.jsxs("div",{className:"flex min-h-screen",children:[M.jsx(PCe,{}),M.jsxs("div",{className:"flex flex-col flex-1 overflow-auto",children:[M.jsx(aQ,{}),M.jsxs("div",{className:"flex flex-col flex-1 overflow-auto",children:[M.jsx(lQ,{}),M.jsx(MCe,{}),M.jsx(FPe,{})]})]})]})})),OCe=()=>{const e=D5();return V.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",e.pathname)},[e.pathname]),M.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:M.jsxs("div",{className:"text-center",children:[M.jsx("h1",{className:"text-4xl font-bold mb-4",children:"404"}),M.jsx("p",{className:"text-xl text-gray-600 mb-4",children:"Oops! Page not found"}),M.jsx("a",{href:"/",className:"text-blue-500 hover:text-blue-700 underline",children:"Return to Home"})]})})},kCe=new _J,DCe=()=>M.jsx(bJ,{client:kCe,children:M.jsxs(g5,{children:[M.jsx(HK,{}),M.jsx(wY,{}),M.jsx(oQ,{basename:"/pisa_2022_visualization",children:M.jsxs(rQ,{children:[M.jsx(PP,{path:"/",element:M.jsx(ICe,{})}),M.jsx(PP,{path:"*",element:M.jsx(OCe,{})})]})})]})});QF(document.getElementById("root")).render(M.jsx(DCe,{}));
